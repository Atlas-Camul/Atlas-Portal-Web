function FF(o,c){for(var d=0;d<c.length;d++){const _=c[d];if(typeof _!="string"&&!Array.isArray(_)){for(const C in _)if(C!=="default"&&!(C in o)){const I=Object.getOwnPropertyDescriptor(_,C);I&&Object.defineProperty(o,C,I.get?I:{enumerable:!0,get:()=>_[C]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))_(C);new MutationObserver(C=>{for(const I of C)if(I.type==="childList")for(const z of I.addedNodes)z.tagName==="LINK"&&z.rel==="modulepreload"&&_(z)}).observe(document,{childList:!0,subtree:!0});function d(C){const I={};return C.integrity&&(I.integrity=C.integrity),C.referrerpolicy&&(I.referrerPolicy=C.referrerpolicy),C.crossorigin==="use-credentials"?I.credentials="include":C.crossorigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function _(C){if(C.ep)return;C.ep=!0;const I=d(C);fetch(C.href,I)}})();var r8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jF(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var b5={},UF={get exports(){return b5},set exports(o){b5=o}},XE={},Re={},VF={get exports(){return Re},set exports(o){Re=o}},Ji={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H5=Symbol.for("react.element"),qF=Symbol.for("react.portal"),ZF=Symbol.for("react.fragment"),GF=Symbol.for("react.strict_mode"),HF=Symbol.for("react.profiler"),WF=Symbol.for("react.provider"),YF=Symbol.for("react.context"),KF=Symbol.for("react.forward_ref"),$F=Symbol.for("react.suspense"),XF=Symbol.for("react.memo"),JF=Symbol.for("react.lazy"),L9=Symbol.iterator;function QF(o){return o===null||typeof o!="object"?null:(o=L9&&o[L9]||o["@@iterator"],typeof o=="function"?o:null)}var r7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n7=Object.assign,i7={};function lw(o,c,d){this.props=o,this.context=c,this.refs=i7,this.updater=d||r7}lw.prototype.isReactComponent={};lw.prototype.setState=function(o,c){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,c,"setState")};lw.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function o7(){}o7.prototype=lw.prototype;function uz(o,c,d){this.props=o,this.context=c,this.refs=i7,this.updater=d||r7}var cz=uz.prototype=new o7;cz.constructor=uz;n7(cz,lw.prototype);cz.isPureReactComponent=!0;var P9=Array.isArray,a7=Object.prototype.hasOwnProperty,pz={current:null},s7={key:!0,ref:!0,__self:!0,__source:!0};function l7(o,c,d){var _,C={},I=null,z=null;if(c!=null)for(_ in c.ref!==void 0&&(z=c.ref),c.key!==void 0&&(I=""+c.key),c)a7.call(c,_)&&!s7.hasOwnProperty(_)&&(C[_]=c[_]);var Z=arguments.length-2;if(Z===1)C.children=d;else if(1<Z){for(var X=Array(Z),oe=0;oe<Z;oe++)X[oe]=arguments[oe+2];C.children=X}if(o&&o.defaultProps)for(_ in Z=o.defaultProps,Z)C[_]===void 0&&(C[_]=Z[_]);return{$$typeof:H5,type:o,key:I,ref:z,props:C,_owner:pz.current}}function ej(o,c){return{$$typeof:H5,type:o.type,key:c,ref:o.ref,props:o.props,_owner:o._owner}}function hz(o){return typeof o=="object"&&o!==null&&o.$$typeof===H5}function tj(o){var c={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(d){return c[d]})}var D9=/\/+/g;function n8(o,c){return typeof o=="object"&&o!==null&&o.key!=null?tj(""+o.key):c.toString(36)}function RT(o,c,d,_,C){var I=typeof o;(I==="undefined"||I==="boolean")&&(o=null);var z=!1;if(o===null)z=!0;else switch(I){case"string":case"number":z=!0;break;case"object":switch(o.$$typeof){case H5:case qF:z=!0}}if(z)return z=o,C=C(z),o=_===""?"."+n8(z,0):_,P9(C)?(d="",o!=null&&(d=o.replace(D9,"$&/")+"/"),RT(C,c,d,"",function(oe){return oe})):C!=null&&(hz(C)&&(C=ej(C,d+(!C.key||z&&z.key===C.key?"":(""+C.key).replace(D9,"$&/")+"/")+o)),c.push(C)),1;if(z=0,_=_===""?".":_+":",P9(o))for(var Z=0;Z<o.length;Z++){I=o[Z];var X=_+n8(I,Z);z+=RT(I,c,d,X,C)}else if(X=QF(o),typeof X=="function")for(o=X.call(o),Z=0;!(I=o.next()).done;)I=I.value,X=_+n8(I,Z++),z+=RT(I,c,d,X,C);else if(I==="object")throw c=String(o),Error("Objects are not valid as a React child (found: "+(c==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":c)+"). If you meant to render a collection of children, use an array instead.");return z}function hT(o,c,d){if(o==null)return o;var _=[],C=0;return RT(o,_,"","",function(I){return c.call(d,I,C++)}),_}function rj(o){if(o._status===-1){var c=o._result;c=c(),c.then(function(d){(o._status===0||o._status===-1)&&(o._status=1,o._result=d)},function(d){(o._status===0||o._status===-1)&&(o._status=2,o._result=d)}),o._status===-1&&(o._status=0,o._result=c)}if(o._status===1)return o._result.default;throw o._result}var Rh={current:null},BT={transition:null},nj={ReactCurrentDispatcher:Rh,ReactCurrentBatchConfig:BT,ReactCurrentOwner:pz};Ji.Children={map:hT,forEach:function(o,c,d){hT(o,function(){c.apply(this,arguments)},d)},count:function(o){var c=0;return hT(o,function(){c++}),c},toArray:function(o){return hT(o,function(c){return c})||[]},only:function(o){if(!hz(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};Ji.Component=lw;Ji.Fragment=ZF;Ji.Profiler=HF;Ji.PureComponent=uz;Ji.StrictMode=GF;Ji.Suspense=$F;Ji.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nj;Ji.cloneElement=function(o,c,d){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var _=n7({},o.props),C=o.key,I=o.ref,z=o._owner;if(c!=null){if(c.ref!==void 0&&(I=c.ref,z=pz.current),c.key!==void 0&&(C=""+c.key),o.type&&o.type.defaultProps)var Z=o.type.defaultProps;for(X in c)a7.call(c,X)&&!s7.hasOwnProperty(X)&&(_[X]=c[X]===void 0&&Z!==void 0?Z[X]:c[X])}var X=arguments.length-2;if(X===1)_.children=d;else if(1<X){Z=Array(X);for(var oe=0;oe<X;oe++)Z[oe]=arguments[oe+2];_.children=Z}return{$$typeof:H5,type:o.type,key:C,ref:I,props:_,_owner:z}};Ji.createContext=function(o){return o={$$typeof:YF,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:WF,_context:o},o.Consumer=o};Ji.createElement=l7;Ji.createFactory=function(o){var c=l7.bind(null,o);return c.type=o,c};Ji.createRef=function(){return{current:null}};Ji.forwardRef=function(o){return{$$typeof:KF,render:o}};Ji.isValidElement=hz;Ji.lazy=function(o){return{$$typeof:JF,_payload:{_status:-1,_result:o},_init:rj}};Ji.memo=function(o,c){return{$$typeof:XF,type:o,compare:c===void 0?null:c}};Ji.startTransition=function(o){var c=BT.transition;BT.transition={};try{o()}finally{BT.transition=c}};Ji.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ji.useCallback=function(o,c){return Rh.current.useCallback(o,c)};Ji.useContext=function(o){return Rh.current.useContext(o)};Ji.useDebugValue=function(){};Ji.useDeferredValue=function(o){return Rh.current.useDeferredValue(o)};Ji.useEffect=function(o,c){return Rh.current.useEffect(o,c)};Ji.useId=function(){return Rh.current.useId()};Ji.useImperativeHandle=function(o,c,d){return Rh.current.useImperativeHandle(o,c,d)};Ji.useInsertionEffect=function(o,c){return Rh.current.useInsertionEffect(o,c)};Ji.useLayoutEffect=function(o,c){return Rh.current.useLayoutEffect(o,c)};Ji.useMemo=function(o,c){return Rh.current.useMemo(o,c)};Ji.useReducer=function(o,c,d){return Rh.current.useReducer(o,c,d)};Ji.useRef=function(o){return Rh.current.useRef(o)};Ji.useState=function(o){return Rh.current.useState(o)};Ji.useSyncExternalStore=function(o,c,d){return Rh.current.useSyncExternalStore(o,c,d)};Ji.useTransition=function(){return Rh.current.useTransition()};Ji.version="18.2.0";(function(o){o.exports=Ji})(VF);const oi=jF(Re),J2=FF({__proto__:null,default:oi},[Re]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ij=Re,oj=Symbol.for("react.element"),aj=Symbol.for("react.fragment"),sj=Object.prototype.hasOwnProperty,lj=ij.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uj={key:!0,ref:!0,__self:!0,__source:!0};function u7(o,c,d){var _,C={},I=null,z=null;d!==void 0&&(I=""+d),c.key!==void 0&&(I=""+c.key),c.ref!==void 0&&(z=c.ref);for(_ in c)sj.call(c,_)&&!uj.hasOwnProperty(_)&&(C[_]=c[_]);if(o&&o.defaultProps)for(_ in c=o.defaultProps,c)C[_]===void 0&&(C[_]=c[_]);return{$$typeof:oj,type:o,key:I,ref:z,props:C,_owner:lj.current}}XE.Fragment=aj;XE.jsx=u7;XE.jsxs=u7;(function(o){o.exports=XE})(UF);const c7=b5.Fragment,pe=b5.jsx,rt=b5.jsxs;var K8={},aE={},cj={get exports(){return aE},set exports(o){aE=o}},kf={},$8={},pj={get exports(){return $8},set exports(o){$8=o}},p7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function c(ar,Vr){var Tn=ar.length;ar.push(Vr);e:for(;0<Tn;){var Ai=Tn-1>>>1,ga=ar[Ai];if(0<C(ga,Vr))ar[Ai]=Vr,ar[Tn]=ga,Tn=Ai;else break e}}function d(ar){return ar.length===0?null:ar[0]}function _(ar){if(ar.length===0)return null;var Vr=ar[0],Tn=ar.pop();if(Tn!==Vr){ar[0]=Tn;e:for(var Ai=0,ga=ar.length,Uf=ga>>>1;Ai<Uf;){var cp=2*(Ai+1)-1,Eo=ar[cp],gs=cp+1,ko=ar[gs];if(0>C(Eo,Tn))gs<ga&&0>C(ko,Eo)?(ar[Ai]=ko,ar[gs]=Tn,Ai=gs):(ar[Ai]=Eo,ar[cp]=Tn,Ai=cp);else if(gs<ga&&0>C(ko,Tn))ar[Ai]=ko,ar[gs]=Tn,Ai=gs;else break e}}return Vr}function C(ar,Vr){var Tn=ar.sortIndex-Vr.sortIndex;return Tn!==0?Tn:ar.id-Vr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var I=performance;o.unstable_now=function(){return I.now()}}else{var z=Date,Z=z.now();o.unstable_now=function(){return z.now()-Z}}var X=[],oe=[],_e=1,Se=null,Ne=3,$e=!1,We=!1,Ze=!1,ct=typeof setTimeout=="function"?setTimeout:null,Oe=typeof clearTimeout=="function"?clearTimeout:null,Be=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Xe(ar){for(var Vr=d(oe);Vr!==null;){if(Vr.callback===null)_(oe);else if(Vr.startTime<=ar)_(oe),Vr.sortIndex=Vr.expirationTime,c(X,Vr);else break;Vr=d(oe)}}function Et(ar){if(Ze=!1,Xe(ar),!We)if(d(X)!==null)We=!0,gi(Ht);else{var Vr=d(oe);Vr!==null&&Ra(Et,Vr.startTime-ar)}}function Ht(ar,Vr){We=!1,Ze&&(Ze=!1,Oe(ot),ot=-1),$e=!0;var Tn=Ne;try{for(Xe(Vr),Se=d(X);Se!==null&&(!(Se.expirationTime>Vr)||ar&&!sr());){var Ai=Se.callback;if(typeof Ai=="function"){Se.callback=null,Ne=Se.priorityLevel;var ga=Ai(Se.expirationTime<=Vr);Vr=o.unstable_now(),typeof ga=="function"?Se.callback=ga:Se===d(X)&&_(X),Xe(Vr)}else _(X);Se=d(X)}if(Se!==null)var Uf=!0;else{var cp=d(oe);cp!==null&&Ra(Et,cp.startTime-Vr),Uf=!1}return Uf}finally{Se=null,Ne=Tn,$e=!1}}var Xt=!1,ze=null,ot=-1,Zr=5,yr=-1;function sr(){return!(o.unstable_now()-yr<Zr)}function _s(){if(ze!==null){var ar=o.unstable_now();yr=ar;var Vr=!0;try{Vr=ze(!0,ar)}finally{Vr?ms():(Xt=!1,ze=null)}}else Xt=!1}var ms;if(typeof Be=="function")ms=function(){Be(_s)};else if(typeof MessageChannel<"u"){var Lf=new MessageChannel,Go=Lf.port2;Lf.port1.onmessage=_s,ms=function(){Go.postMessage(null)}}else ms=function(){ct(_s,0)};function gi(ar){ze=ar,Xt||(Xt=!0,ms())}function Ra(ar,Vr){ot=ct(function(){ar(o.unstable_now())},Vr)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(ar){ar.callback=null},o.unstable_continueExecution=function(){We||$e||(We=!0,gi(Ht))},o.unstable_forceFrameRate=function(ar){0>ar||125<ar?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Zr=0<ar?Math.floor(1e3/ar):5},o.unstable_getCurrentPriorityLevel=function(){return Ne},o.unstable_getFirstCallbackNode=function(){return d(X)},o.unstable_next=function(ar){switch(Ne){case 1:case 2:case 3:var Vr=3;break;default:Vr=Ne}var Tn=Ne;Ne=Vr;try{return ar()}finally{Ne=Tn}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(ar,Vr){switch(ar){case 1:case 2:case 3:case 4:case 5:break;default:ar=3}var Tn=Ne;Ne=ar;try{return Vr()}finally{Ne=Tn}},o.unstable_scheduleCallback=function(ar,Vr,Tn){var Ai=o.unstable_now();switch(typeof Tn=="object"&&Tn!==null?(Tn=Tn.delay,Tn=typeof Tn=="number"&&0<Tn?Ai+Tn:Ai):Tn=Ai,ar){case 1:var ga=-1;break;case 2:ga=250;break;case 5:ga=1073741823;break;case 4:ga=1e4;break;default:ga=5e3}return ga=Tn+ga,ar={id:_e++,callback:Vr,priorityLevel:ar,startTime:Tn,expirationTime:ga,sortIndex:-1},Tn>Ai?(ar.sortIndex=Tn,c(oe,ar),d(X)===null&&ar===d(oe)&&(Ze?(Oe(ot),ot=-1):Ze=!0,Ra(Et,Tn-Ai))):(ar.sortIndex=ga,c(X,ar),We||$e||(We=!0,gi(Ht))),ar},o.unstable_shouldYield=sr,o.unstable_wrapCallback=function(ar){var Vr=Ne;return function(){var Tn=Ne;Ne=Vr;try{return ar.apply(this,arguments)}finally{Ne=Tn}}}})(p7);(function(o){o.exports=p7})(pj);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h7=Re,If=$8;function Yt(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d7=new Set,C5={};function w2(o,c){Q2(o,c),Q2(o+"Capture",c)}function Q2(o,c){for(C5[o]=c,o=0;o<c.length;o++)d7.add(c[o])}var cv=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),X8=Object.prototype.hasOwnProperty,hj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z9={},N9={};function dj(o){return X8.call(N9,o)?!0:X8.call(z9,o)?!1:hj.test(o)?N9[o]=!0:(z9[o]=!0,!1)}function fj(o,c,d,_){if(d!==null&&d.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return _?!1:d!==null?!d.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function mj(o,c,d,_){if(c===null||typeof c>"u"||fj(o,c,d,_))return!0;if(_)return!1;if(d!==null)switch(d.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function Bh(o,c,d,_,C,I,z){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=_,this.attributeNamespace=C,this.mustUseProperty=d,this.propertyName=o,this.type=c,this.sanitizeURL=I,this.removeEmptyString=z}var tp={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){tp[o]=new Bh(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];tp[c]=new Bh(c,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){tp[o]=new Bh(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){tp[o]=new Bh(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){tp[o]=new Bh(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){tp[o]=new Bh(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){tp[o]=new Bh(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){tp[o]=new Bh(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){tp[o]=new Bh(o,5,!1,o.toLowerCase(),null,!1,!1)});var dz=/[\-:]([a-z])/g;function fz(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(dz,fz);tp[c]=new Bh(c,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(dz,fz);tp[c]=new Bh(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(dz,fz);tp[c]=new Bh(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){tp[o]=new Bh(o,1,!1,o.toLowerCase(),null,!1,!1)});tp.xlinkHref=new Bh("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){tp[o]=new Bh(o,1,!1,o.toLowerCase(),null,!0,!0)});function mz(o,c,d,_){var C=tp.hasOwnProperty(c)?tp[c]:null;(C!==null?C.type!==0:_||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(mj(c,d,C,_)&&(d=null),_||C===null?dj(c)&&(d===null?o.removeAttribute(c):o.setAttribute(c,""+d)):C.mustUseProperty?o[C.propertyName]=d===null?C.type===3?!1:"":d:(c=C.attributeName,_=C.attributeNamespace,d===null?o.removeAttribute(c):(C=C.type,d=C===3||C===4&&d===!0?"":""+d,_?o.setAttributeNS(_,c,d):o.setAttribute(c,d))))}var gv=h7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dT=Symbol.for("react.element"),z2=Symbol.for("react.portal"),N2=Symbol.for("react.fragment"),gz=Symbol.for("react.strict_mode"),J8=Symbol.for("react.profiler"),f7=Symbol.for("react.provider"),m7=Symbol.for("react.context"),yz=Symbol.for("react.forward_ref"),Q8=Symbol.for("react.suspense"),eD=Symbol.for("react.suspense_list"),vz=Symbol.for("react.memo"),Cv=Symbol.for("react.lazy"),g7=Symbol.for("react.offscreen"),O9=Symbol.iterator;function Z4(o){return o===null||typeof o!="object"?null:(o=O9&&o[O9]||o["@@iterator"],typeof o=="function"?o:null)}var Ys=Object.assign,i8;function r5(o){if(i8===void 0)try{throw Error()}catch(d){var c=d.stack.trim().match(/\n( *(at )?)/);i8=c&&c[1]||""}return`
`+i8+o}var o8=!1;function a8(o,c){if(!o||o8)return"";o8=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(oe){var _=oe}Reflect.construct(o,[],c)}else{try{c.call()}catch(oe){_=oe}o.call(c.prototype)}else{try{throw Error()}catch(oe){_=oe}o()}}catch(oe){if(oe&&_&&typeof oe.stack=="string"){for(var C=oe.stack.split(`
`),I=_.stack.split(`
`),z=C.length-1,Z=I.length-1;1<=z&&0<=Z&&C[z]!==I[Z];)Z--;for(;1<=z&&0<=Z;z--,Z--)if(C[z]!==I[Z]){if(z!==1||Z!==1)do if(z--,Z--,0>Z||C[z]!==I[Z]){var X=`
`+C[z].replace(" at new "," at ");return o.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",o.displayName)),X}while(1<=z&&0<=Z);break}}}finally{o8=!1,Error.prepareStackTrace=d}return(o=o?o.displayName||o.name:"")?r5(o):""}function gj(o){switch(o.tag){case 5:return r5(o.type);case 16:return r5("Lazy");case 13:return r5("Suspense");case 19:return r5("SuspenseList");case 0:case 2:case 15:return o=a8(o.type,!1),o;case 11:return o=a8(o.type.render,!1),o;case 1:return o=a8(o.type,!0),o;default:return""}}function tD(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case N2:return"Fragment";case z2:return"Portal";case J8:return"Profiler";case gz:return"StrictMode";case Q8:return"Suspense";case eD:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case m7:return(o.displayName||"Context")+".Consumer";case f7:return(o._context.displayName||"Context")+".Provider";case yz:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case vz:return c=o.displayName||null,c!==null?c:tD(o.type)||"Memo";case Cv:c=o._payload,o=o._init;try{return tD(o(c))}catch{}}return null}function yj(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tD(c);case 8:return c===gz?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Vv(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function y7(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function vj(o){var c=y7(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),_=""+o[c];if(!o.hasOwnProperty(c)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var C=d.get,I=d.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return C.call(this)},set:function(z){_=""+z,I.call(this,z)}}),Object.defineProperty(o,c,{enumerable:d.enumerable}),{getValue:function(){return _},setValue:function(z){_=""+z},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function fT(o){o._valueTracker||(o._valueTracker=vj(o))}function v7(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var d=c.getValue(),_="";return o&&(_=y7(o)?o.checked?"true":"false":o.value),o=_,o!==d?(c.setValue(o),!0):!1}function sE(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function rD(o,c){var d=c.checked;return Ys({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??o._wrapperState.initialChecked})}function R9(o,c){var d=c.defaultValue==null?"":c.defaultValue,_=c.checked!=null?c.checked:c.defaultChecked;d=Vv(c.value!=null?c.value:d),o._wrapperState={initialChecked:_,initialValue:d,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function _7(o,c){c=c.checked,c!=null&&mz(o,"checked",c,!1)}function nD(o,c){_7(o,c);var d=Vv(c.value),_=c.type;if(d!=null)_==="number"?(d===0&&o.value===""||o.value!=d)&&(o.value=""+d):o.value!==""+d&&(o.value=""+d);else if(_==="submit"||_==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?iD(o,c.type,d):c.hasOwnProperty("defaultValue")&&iD(o,c.type,Vv(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function B9(o,c,d){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var _=c.type;if(!(_!=="submit"&&_!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,d||c===o.value||(o.value=c),o.defaultValue=c}d=o.name,d!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,d!==""&&(o.name=d)}function iD(o,c,d){(c!=="number"||sE(o.ownerDocument)!==o)&&(d==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+d&&(o.defaultValue=""+d))}var n5=Array.isArray;function H2(o,c,d,_){if(o=o.options,c){c={};for(var C=0;C<d.length;C++)c["$"+d[C]]=!0;for(d=0;d<o.length;d++)C=c.hasOwnProperty("$"+o[d].value),o[d].selected!==C&&(o[d].selected=C),C&&_&&(o[d].defaultSelected=!0)}else{for(d=""+Vv(d),c=null,C=0;C<o.length;C++){if(o[C].value===d){o[C].selected=!0,_&&(o[C].defaultSelected=!0);return}c!==null||o[C].disabled||(c=o[C])}c!==null&&(c.selected=!0)}}function oD(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(Yt(91));return Ys({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function F9(o,c){var d=c.value;if(d==null){if(d=c.children,c=c.defaultValue,d!=null){if(c!=null)throw Error(Yt(92));if(n5(d)){if(1<d.length)throw Error(Yt(93));d=d[0]}c=d}c==null&&(c=""),d=c}o._wrapperState={initialValue:Vv(d)}}function x7(o,c){var d=Vv(c.value),_=Vv(c.defaultValue);d!=null&&(d=""+d,d!==o.value&&(o.value=d),c.defaultValue==null&&o.defaultValue!==d&&(o.defaultValue=d)),_!=null&&(o.defaultValue=""+_)}function j9(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function w7(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function aD(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?w7(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mT,b7=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,d,_,C){MSApp.execUnsafeLocalFunction(function(){return o(c,d,_,C)})}:o}(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(mT=mT||document.createElement("div"),mT.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=mT.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function S5(o,c){if(c){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=c;return}}o.textContent=c}var p5={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_j=["Webkit","ms","Moz","O"];Object.keys(p5).forEach(function(o){_j.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),p5[c]=p5[o]})});function C7(o,c,d){return c==null||typeof c=="boolean"||c===""?"":d||typeof c!="number"||c===0||p5.hasOwnProperty(o)&&p5[o]?(""+c).trim():c+"px"}function S7(o,c){o=o.style;for(var d in c)if(c.hasOwnProperty(d)){var _=d.indexOf("--")===0,C=C7(d,c[d],_);d==="float"&&(d="cssFloat"),_?o.setProperty(d,C):o[d]=C}}var xj=Ys({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sD(o,c){if(c){if(xj[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(Yt(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(Yt(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(Yt(61))}if(c.style!=null&&typeof c.style!="object")throw Error(Yt(62))}}function lD(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uD=null;function _z(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var cD=null,W2=null,Y2=null;function U9(o){if(o=K5(o)){if(typeof cD!="function")throw Error(Yt(280));var c=o.stateNode;c&&(c=rI(c),cD(o.stateNode,o.type,c))}}function T7(o){W2?Y2?Y2.push(o):Y2=[o]:W2=o}function E7(){if(W2){var o=W2,c=Y2;if(Y2=W2=null,U9(o),c)for(o=0;o<c.length;o++)U9(c[o])}}function I7(o,c){return o(c)}function k7(){}var s8=!1;function M7(o,c,d){if(s8)return o(c,d);s8=!0;try{return I7(o,c,d)}finally{s8=!1,(W2!==null||Y2!==null)&&(k7(),E7())}}function T5(o,c){var d=o.stateNode;if(d===null)return null;var _=rI(d);if(_===null)return null;d=_[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(o=o.type,_=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!_;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(Yt(231,c,typeof d));return d}var pD=!1;if(cv)try{var G4={};Object.defineProperty(G4,"passive",{get:function(){pD=!0}}),window.addEventListener("test",G4,G4),window.removeEventListener("test",G4,G4)}catch{pD=!1}function wj(o,c,d,_,C,I,z,Z,X){var oe=Array.prototype.slice.call(arguments,3);try{c.apply(d,oe)}catch(_e){this.onError(_e)}}var h5=!1,lE=null,uE=!1,hD=null,bj={onError:function(o){h5=!0,lE=o}};function Cj(o,c,d,_,C,I,z,Z,X){h5=!1,lE=null,wj.apply(bj,arguments)}function Sj(o,c,d,_,C,I,z,Z,X){if(Cj.apply(this,arguments),h5){if(h5){var oe=lE;h5=!1,lE=null}else throw Error(Yt(198));uE||(uE=!0,hD=oe)}}function b2(o){var c=o,d=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,c.flags&4098&&(d=c.return),o=c.return;while(o)}return c.tag===3?d:null}function A7(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function V9(o){if(b2(o)!==o)throw Error(Yt(188))}function Tj(o){var c=o.alternate;if(!c){if(c=b2(o),c===null)throw Error(Yt(188));return c!==o?null:o}for(var d=o,_=c;;){var C=d.return;if(C===null)break;var I=C.alternate;if(I===null){if(_=C.return,_!==null){d=_;continue}break}if(C.child===I.child){for(I=C.child;I;){if(I===d)return V9(C),o;if(I===_)return V9(C),c;I=I.sibling}throw Error(Yt(188))}if(d.return!==_.return)d=C,_=I;else{for(var z=!1,Z=C.child;Z;){if(Z===d){z=!0,d=C,_=I;break}if(Z===_){z=!0,_=C,d=I;break}Z=Z.sibling}if(!z){for(Z=I.child;Z;){if(Z===d){z=!0,d=I,_=C;break}if(Z===_){z=!0,_=I,d=C;break}Z=Z.sibling}if(!z)throw Error(Yt(189))}}if(d.alternate!==_)throw Error(Yt(190))}if(d.tag!==3)throw Error(Yt(188));return d.stateNode.current===d?o:c}function L7(o){return o=Tj(o),o!==null?P7(o):null}function P7(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=P7(o);if(c!==null)return c;o=o.sibling}return null}var D7=If.unstable_scheduleCallback,q9=If.unstable_cancelCallback,Ej=If.unstable_shouldYield,Ij=If.unstable_requestPaint,Nl=If.unstable_now,kj=If.unstable_getCurrentPriorityLevel,xz=If.unstable_ImmediatePriority,z7=If.unstable_UserBlockingPriority,cE=If.unstable_NormalPriority,Mj=If.unstable_LowPriority,N7=If.unstable_IdlePriority,JE=null,Jg=null;function Aj(o){if(Jg&&typeof Jg.onCommitFiberRoot=="function")try{Jg.onCommitFiberRoot(JE,o,void 0,(o.current.flags&128)===128)}catch{}}var Bg=Math.clz32?Math.clz32:Dj,Lj=Math.log,Pj=Math.LN2;function Dj(o){return o>>>=0,o===0?32:31-(Lj(o)/Pj|0)|0}var gT=64,yT=4194304;function i5(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function pE(o,c){var d=o.pendingLanes;if(d===0)return 0;var _=0,C=o.suspendedLanes,I=o.pingedLanes,z=d&268435455;if(z!==0){var Z=z&~C;Z!==0?_=i5(Z):(I&=z,I!==0&&(_=i5(I)))}else z=d&~C,z!==0?_=i5(z):I!==0&&(_=i5(I));if(_===0)return 0;if(c!==0&&c!==_&&!(c&C)&&(C=_&-_,I=c&-c,C>=I||C===16&&(I&4194240)!==0))return c;if(_&4&&(_|=d&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=_;0<c;)d=31-Bg(c),C=1<<d,_|=o[d],c&=~C;return _}function zj(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nj(o,c){for(var d=o.suspendedLanes,_=o.pingedLanes,C=o.expirationTimes,I=o.pendingLanes;0<I;){var z=31-Bg(I),Z=1<<z,X=C[z];X===-1?(!(Z&d)||Z&_)&&(C[z]=zj(Z,c)):X<=c&&(o.expiredLanes|=Z),I&=~Z}}function dD(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function O7(){var o=gT;return gT<<=1,!(gT&4194240)&&(gT=64),o}function l8(o){for(var c=[],d=0;31>d;d++)c.push(o);return c}function W5(o,c,d){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Bg(c),o[c]=d}function Oj(o,c){var d=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var _=o.eventTimes;for(o=o.expirationTimes;0<d;){var C=31-Bg(d),I=1<<C;c[C]=0,_[C]=-1,o[C]=-1,d&=~I}}function wz(o,c){var d=o.entangledLanes|=c;for(o=o.entanglements;d;){var _=31-Bg(d),C=1<<_;C&c|o[_]&c&&(o[_]|=c),d&=~C}}var ma=0;function R7(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var B7,bz,F7,j7,U7,fD=!1,vT=[],Dv=null,zv=null,Nv=null,E5=new Map,I5=new Map,Tv=[],Rj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Z9(o,c){switch(o){case"focusin":case"focusout":Dv=null;break;case"dragenter":case"dragleave":zv=null;break;case"mouseover":case"mouseout":Nv=null;break;case"pointerover":case"pointerout":E5.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":I5.delete(c.pointerId)}}function H4(o,c,d,_,C,I){return o===null||o.nativeEvent!==I?(o={blockedOn:c,domEventName:d,eventSystemFlags:_,nativeEvent:I,targetContainers:[C]},c!==null&&(c=K5(c),c!==null&&bz(c)),o):(o.eventSystemFlags|=_,c=o.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),o)}function Bj(o,c,d,_,C){switch(c){case"focusin":return Dv=H4(Dv,o,c,d,_,C),!0;case"dragenter":return zv=H4(zv,o,c,d,_,C),!0;case"mouseover":return Nv=H4(Nv,o,c,d,_,C),!0;case"pointerover":var I=C.pointerId;return E5.set(I,H4(E5.get(I)||null,o,c,d,_,C)),!0;case"gotpointercapture":return I=C.pointerId,I5.set(I,H4(I5.get(I)||null,o,c,d,_,C)),!0}return!1}function V7(o){var c=o2(o.target);if(c!==null){var d=b2(c);if(d!==null){if(c=d.tag,c===13){if(c=A7(d),c!==null){o.blockedOn=c,U7(o.priority,function(){F7(d)});return}}else if(c===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function FT(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var d=mD(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(d===null){d=o.nativeEvent;var _=new d.constructor(d.type,d);uD=_,d.target.dispatchEvent(_),uD=null}else return c=K5(d),c!==null&&bz(c),o.blockedOn=d,!1;c.shift()}return!0}function G9(o,c,d){FT(o)&&d.delete(c)}function Fj(){fD=!1,Dv!==null&&FT(Dv)&&(Dv=null),zv!==null&&FT(zv)&&(zv=null),Nv!==null&&FT(Nv)&&(Nv=null),E5.forEach(G9),I5.forEach(G9)}function W4(o,c){o.blockedOn===c&&(o.blockedOn=null,fD||(fD=!0,If.unstable_scheduleCallback(If.unstable_NormalPriority,Fj)))}function k5(o){function c(C){return W4(C,o)}if(0<vT.length){W4(vT[0],o);for(var d=1;d<vT.length;d++){var _=vT[d];_.blockedOn===o&&(_.blockedOn=null)}}for(Dv!==null&&W4(Dv,o),zv!==null&&W4(zv,o),Nv!==null&&W4(Nv,o),E5.forEach(c),I5.forEach(c),d=0;d<Tv.length;d++)_=Tv[d],_.blockedOn===o&&(_.blockedOn=null);for(;0<Tv.length&&(d=Tv[0],d.blockedOn===null);)V7(d),d.blockedOn===null&&Tv.shift()}var K2=gv.ReactCurrentBatchConfig,hE=!0;function jj(o,c,d,_){var C=ma,I=K2.transition;K2.transition=null;try{ma=1,Cz(o,c,d,_)}finally{ma=C,K2.transition=I}}function Uj(o,c,d,_){var C=ma,I=K2.transition;K2.transition=null;try{ma=4,Cz(o,c,d,_)}finally{ma=C,K2.transition=I}}function Cz(o,c,d,_){if(hE){var C=mD(o,c,d,_);if(C===null)v8(o,c,_,dE,d),Z9(o,_);else if(Bj(C,o,c,d,_))_.stopPropagation();else if(Z9(o,_),c&4&&-1<Rj.indexOf(o)){for(;C!==null;){var I=K5(C);if(I!==null&&B7(I),I=mD(o,c,d,_),I===null&&v8(o,c,_,dE,d),I===C)break;C=I}C!==null&&_.stopPropagation()}else v8(o,c,_,null,d)}}var dE=null;function mD(o,c,d,_){if(dE=null,o=_z(_),o=o2(o),o!==null)if(c=b2(o),c===null)o=null;else if(d=c.tag,d===13){if(o=A7(c),o!==null)return o;o=null}else if(d===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return dE=o,null}function q7(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kj()){case xz:return 1;case z7:return 4;case cE:case Mj:return 16;case N7:return 536870912;default:return 16}default:return 16}}var kv=null,Sz=null,jT=null;function Z7(){if(jT)return jT;var o,c=Sz,d=c.length,_,C="value"in kv?kv.value:kv.textContent,I=C.length;for(o=0;o<d&&c[o]===C[o];o++);var z=d-o;for(_=1;_<=z&&c[d-_]===C[I-_];_++);return jT=C.slice(o,1<_?1-_:void 0)}function UT(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function _T(){return!0}function H9(){return!1}function Mf(o){function c(d,_,C,I,z){this._reactName=d,this._targetInst=C,this.type=_,this.nativeEvent=I,this.target=z,this.currentTarget=null;for(var Z in o)o.hasOwnProperty(Z)&&(d=o[Z],this[Z]=d?d(I):I[Z]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?_T:H9,this.isPropagationStopped=H9,this}return Ys(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=_T)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=_T)},persist:function(){},isPersistent:_T}),c}var uw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tz=Mf(uw),Y5=Ys({},uw,{view:0,detail:0}),Vj=Mf(Y5),u8,c8,Y4,QE=Ys({},Y5,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ez,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Y4&&(Y4&&o.type==="mousemove"?(u8=o.screenX-Y4.screenX,c8=o.screenY-Y4.screenY):c8=u8=0,Y4=o),u8)},movementY:function(o){return"movementY"in o?o.movementY:c8}}),W9=Mf(QE),qj=Ys({},QE,{dataTransfer:0}),Zj=Mf(qj),Gj=Ys({},Y5,{relatedTarget:0}),p8=Mf(Gj),Hj=Ys({},uw,{animationName:0,elapsedTime:0,pseudoElement:0}),Wj=Mf(Hj),Yj=Ys({},uw,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Kj=Mf(Yj),$j=Ys({},uw,{data:0}),Y9=Mf($j),Xj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eU(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=Qj[o])?!!c[o]:!1}function Ez(){return eU}var tU=Ys({},Y5,{key:function(o){if(o.key){var c=Xj[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=UT(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Jj[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ez,charCode:function(o){return o.type==="keypress"?UT(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?UT(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),rU=Mf(tU),nU=Ys({},QE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K9=Mf(nU),iU=Ys({},Y5,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ez}),oU=Mf(iU),aU=Ys({},uw,{propertyName:0,elapsedTime:0,pseudoElement:0}),sU=Mf(aU),lU=Ys({},QE,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),uU=Mf(lU),cU=[9,13,27,32],Iz=cv&&"CompositionEvent"in window,d5=null;cv&&"documentMode"in document&&(d5=document.documentMode);var pU=cv&&"TextEvent"in window&&!d5,G7=cv&&(!Iz||d5&&8<d5&&11>=d5),$9=String.fromCharCode(32),X9=!1;function H7(o,c){switch(o){case"keyup":return cU.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W7(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var O2=!1;function hU(o,c){switch(o){case"compositionend":return W7(c);case"keypress":return c.which!==32?null:(X9=!0,$9);case"textInput":return o=c.data,o===$9&&X9?null:o;default:return null}}function dU(o,c){if(O2)return o==="compositionend"||!Iz&&H7(o,c)?(o=Z7(),jT=Sz=kv=null,O2=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return G7&&c.locale!=="ko"?null:c.data;default:return null}}var fU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J9(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!fU[o.type]:c==="textarea"}function Y7(o,c,d,_){T7(_),c=fE(c,"onChange"),0<c.length&&(d=new Tz("onChange","change",null,d,_),o.push({event:d,listeners:c}))}var f5=null,M5=null;function mU(o){oR(o,0)}function eI(o){var c=F2(o);if(v7(c))return o}function gU(o,c){if(o==="change")return c}var K7=!1;if(cv){var h8;if(cv){var d8="oninput"in document;if(!d8){var Q9=document.createElement("div");Q9.setAttribute("oninput","return;"),d8=typeof Q9.oninput=="function"}h8=d8}else h8=!1;K7=h8&&(!document.documentMode||9<document.documentMode)}function eN(){f5&&(f5.detachEvent("onpropertychange",$7),M5=f5=null)}function $7(o){if(o.propertyName==="value"&&eI(M5)){var c=[];Y7(c,M5,o,_z(o)),M7(mU,c)}}function yU(o,c,d){o==="focusin"?(eN(),f5=c,M5=d,f5.attachEvent("onpropertychange",$7)):o==="focusout"&&eN()}function vU(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return eI(M5)}function _U(o,c){if(o==="click")return eI(c)}function xU(o,c){if(o==="input"||o==="change")return eI(c)}function wU(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var jg=typeof Object.is=="function"?Object.is:wU;function A5(o,c){if(jg(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var d=Object.keys(o),_=Object.keys(c);if(d.length!==_.length)return!1;for(_=0;_<d.length;_++){var C=d[_];if(!X8.call(c,C)||!jg(o[C],c[C]))return!1}return!0}function tN(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function rN(o,c){var d=tN(o);o=0;for(var _;d;){if(d.nodeType===3){if(_=o+d.textContent.length,o<=c&&_>=c)return{node:d,offset:c-o};o=_}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=tN(d)}}function X7(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?X7(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function J7(){for(var o=window,c=sE();c instanceof o.HTMLIFrameElement;){try{var d=typeof c.contentWindow.location.href=="string"}catch{d=!1}if(d)o=c.contentWindow;else break;c=sE(o.document)}return c}function kz(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function bU(o){var c=J7(),d=o.focusedElem,_=o.selectionRange;if(c!==d&&d&&d.ownerDocument&&X7(d.ownerDocument.documentElement,d)){if(_!==null&&kz(d)){if(c=_.start,o=_.end,o===void 0&&(o=c),"selectionStart"in d)d.selectionStart=c,d.selectionEnd=Math.min(o,d.value.length);else if(o=(c=d.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var C=d.textContent.length,I=Math.min(_.start,C);_=_.end===void 0?I:Math.min(_.end,C),!o.extend&&I>_&&(C=_,_=I,I=C),C=rN(d,I);var z=rN(d,_);C&&z&&(o.rangeCount!==1||o.anchorNode!==C.node||o.anchorOffset!==C.offset||o.focusNode!==z.node||o.focusOffset!==z.offset)&&(c=c.createRange(),c.setStart(C.node,C.offset),o.removeAllRanges(),I>_?(o.addRange(c),o.extend(z.node,z.offset)):(c.setEnd(z.node,z.offset),o.addRange(c)))}}for(c=[],o=d;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<c.length;d++)o=c[d],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var CU=cv&&"documentMode"in document&&11>=document.documentMode,R2=null,gD=null,m5=null,yD=!1;function nN(o,c,d){var _=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;yD||R2==null||R2!==sE(_)||(_=R2,"selectionStart"in _&&kz(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),m5&&A5(m5,_)||(m5=_,_=fE(gD,"onSelect"),0<_.length&&(c=new Tz("onSelect","select",null,c,d),o.push({event:c,listeners:_}),c.target=R2)))}function xT(o,c){var d={};return d[o.toLowerCase()]=c.toLowerCase(),d["Webkit"+o]="webkit"+c,d["Moz"+o]="moz"+c,d}var B2={animationend:xT("Animation","AnimationEnd"),animationiteration:xT("Animation","AnimationIteration"),animationstart:xT("Animation","AnimationStart"),transitionend:xT("Transition","TransitionEnd")},f8={},Q7={};cv&&(Q7=document.createElement("div").style,"AnimationEvent"in window||(delete B2.animationend.animation,delete B2.animationiteration.animation,delete B2.animationstart.animation),"TransitionEvent"in window||delete B2.transitionend.transition);function tI(o){if(f8[o])return f8[o];if(!B2[o])return o;var c=B2[o],d;for(d in c)if(c.hasOwnProperty(d)&&d in Q7)return f8[o]=c[d];return o}var eR=tI("animationend"),tR=tI("animationiteration"),rR=tI("animationstart"),nR=tI("transitionend"),iR=new Map,iN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zv(o,c){iR.set(o,c),w2(c,[o])}for(var m8=0;m8<iN.length;m8++){var g8=iN[m8],SU=g8.toLowerCase(),TU=g8[0].toUpperCase()+g8.slice(1);Zv(SU,"on"+TU)}Zv(eR,"onAnimationEnd");Zv(tR,"onAnimationIteration");Zv(rR,"onAnimationStart");Zv("dblclick","onDoubleClick");Zv("focusin","onFocus");Zv("focusout","onBlur");Zv(nR,"onTransitionEnd");Q2("onMouseEnter",["mouseout","mouseover"]);Q2("onMouseLeave",["mouseout","mouseover"]);Q2("onPointerEnter",["pointerout","pointerover"]);Q2("onPointerLeave",["pointerout","pointerover"]);w2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));w2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));w2("onBeforeInput",["compositionend","keypress","textInput","paste"]);w2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));w2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));w2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var o5="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EU=new Set("cancel close invalid load scroll toggle".split(" ").concat(o5));function oN(o,c,d){var _=o.type||"unknown-event";o.currentTarget=d,Sj(_,c,void 0,o),o.currentTarget=null}function oR(o,c){c=(c&4)!==0;for(var d=0;d<o.length;d++){var _=o[d],C=_.event;_=_.listeners;e:{var I=void 0;if(c)for(var z=_.length-1;0<=z;z--){var Z=_[z],X=Z.instance,oe=Z.currentTarget;if(Z=Z.listener,X!==I&&C.isPropagationStopped())break e;oN(C,Z,oe),I=X}else for(z=0;z<_.length;z++){if(Z=_[z],X=Z.instance,oe=Z.currentTarget,Z=Z.listener,X!==I&&C.isPropagationStopped())break e;oN(C,Z,oe),I=X}}}if(uE)throw o=hD,uE=!1,hD=null,o}function hs(o,c){var d=c[bD];d===void 0&&(d=c[bD]=new Set);var _=o+"__bubble";d.has(_)||(aR(c,o,2,!1),d.add(_))}function y8(o,c,d){var _=0;c&&(_|=4),aR(d,o,_,c)}var wT="_reactListening"+Math.random().toString(36).slice(2);function L5(o){if(!o[wT]){o[wT]=!0,d7.forEach(function(d){d!=="selectionchange"&&(EU.has(d)||y8(d,!1,o),y8(d,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[wT]||(c[wT]=!0,y8("selectionchange",!1,c))}}function aR(o,c,d,_){switch(q7(c)){case 1:var C=jj;break;case 4:C=Uj;break;default:C=Cz}d=C.bind(null,c,d,o),C=void 0,!pD||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),_?C!==void 0?o.addEventListener(c,d,{capture:!0,passive:C}):o.addEventListener(c,d,!0):C!==void 0?o.addEventListener(c,d,{passive:C}):o.addEventListener(c,d,!1)}function v8(o,c,d,_,C){var I=_;if(!(c&1)&&!(c&2)&&_!==null)e:for(;;){if(_===null)return;var z=_.tag;if(z===3||z===4){var Z=_.stateNode.containerInfo;if(Z===C||Z.nodeType===8&&Z.parentNode===C)break;if(z===4)for(z=_.return;z!==null;){var X=z.tag;if((X===3||X===4)&&(X=z.stateNode.containerInfo,X===C||X.nodeType===8&&X.parentNode===C))return;z=z.return}for(;Z!==null;){if(z=o2(Z),z===null)return;if(X=z.tag,X===5||X===6){_=I=z;continue e}Z=Z.parentNode}}_=_.return}M7(function(){var oe=I,_e=_z(d),Se=[];e:{var Ne=iR.get(o);if(Ne!==void 0){var $e=Tz,We=o;switch(o){case"keypress":if(UT(d)===0)break e;case"keydown":case"keyup":$e=rU;break;case"focusin":We="focus",$e=p8;break;case"focusout":We="blur",$e=p8;break;case"beforeblur":case"afterblur":$e=p8;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=W9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=Zj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=oU;break;case eR:case tR:case rR:$e=Wj;break;case nR:$e=sU;break;case"scroll":$e=Vj;break;case"wheel":$e=uU;break;case"copy":case"cut":case"paste":$e=Kj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=K9}var Ze=(c&4)!==0,ct=!Ze&&o==="scroll",Oe=Ze?Ne!==null?Ne+"Capture":null:Ne;Ze=[];for(var Be=oe,Xe;Be!==null;){Xe=Be;var Et=Xe.stateNode;if(Xe.tag===5&&Et!==null&&(Xe=Et,Oe!==null&&(Et=T5(Be,Oe),Et!=null&&Ze.push(P5(Be,Et,Xe)))),ct)break;Be=Be.return}0<Ze.length&&(Ne=new $e(Ne,We,null,d,_e),Se.push({event:Ne,listeners:Ze}))}}if(!(c&7)){e:{if(Ne=o==="mouseover"||o==="pointerover",$e=o==="mouseout"||o==="pointerout",Ne&&d!==uD&&(We=d.relatedTarget||d.fromElement)&&(o2(We)||We[pv]))break e;if(($e||Ne)&&(Ne=_e.window===_e?_e:(Ne=_e.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,$e?(We=d.relatedTarget||d.toElement,$e=oe,We=We?o2(We):null,We!==null&&(ct=b2(We),We!==ct||We.tag!==5&&We.tag!==6)&&(We=null)):($e=null,We=oe),$e!==We)){if(Ze=W9,Et="onMouseLeave",Oe="onMouseEnter",Be="mouse",(o==="pointerout"||o==="pointerover")&&(Ze=K9,Et="onPointerLeave",Oe="onPointerEnter",Be="pointer"),ct=$e==null?Ne:F2($e),Xe=We==null?Ne:F2(We),Ne=new Ze(Et,Be+"leave",$e,d,_e),Ne.target=ct,Ne.relatedTarget=Xe,Et=null,o2(_e)===oe&&(Ze=new Ze(Oe,Be+"enter",We,d,_e),Ze.target=Xe,Ze.relatedTarget=ct,Et=Ze),ct=Et,$e&&We)t:{for(Ze=$e,Oe=We,Be=0,Xe=Ze;Xe;Xe=A2(Xe))Be++;for(Xe=0,Et=Oe;Et;Et=A2(Et))Xe++;for(;0<Be-Xe;)Ze=A2(Ze),Be--;for(;0<Xe-Be;)Oe=A2(Oe),Xe--;for(;Be--;){if(Ze===Oe||Oe!==null&&Ze===Oe.alternate)break t;Ze=A2(Ze),Oe=A2(Oe)}Ze=null}else Ze=null;$e!==null&&aN(Se,Ne,$e,Ze,!1),We!==null&&ct!==null&&aN(Se,ct,We,Ze,!0)}}e:{if(Ne=oe?F2(oe):window,$e=Ne.nodeName&&Ne.nodeName.toLowerCase(),$e==="select"||$e==="input"&&Ne.type==="file")var Ht=gU;else if(J9(Ne))if(K7)Ht=xU;else{Ht=vU;var Xt=yU}else($e=Ne.nodeName)&&$e.toLowerCase()==="input"&&(Ne.type==="checkbox"||Ne.type==="radio")&&(Ht=_U);if(Ht&&(Ht=Ht(o,oe))){Y7(Se,Ht,d,_e);break e}Xt&&Xt(o,Ne,oe),o==="focusout"&&(Xt=Ne._wrapperState)&&Xt.controlled&&Ne.type==="number"&&iD(Ne,"number",Ne.value)}switch(Xt=oe?F2(oe):window,o){case"focusin":(J9(Xt)||Xt.contentEditable==="true")&&(R2=Xt,gD=oe,m5=null);break;case"focusout":m5=gD=R2=null;break;case"mousedown":yD=!0;break;case"contextmenu":case"mouseup":case"dragend":yD=!1,nN(Se,d,_e);break;case"selectionchange":if(CU)break;case"keydown":case"keyup":nN(Se,d,_e)}var ze;if(Iz)e:{switch(o){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else O2?H7(o,d)&&(ot="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(ot="onCompositionStart");ot&&(G7&&d.locale!=="ko"&&(O2||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&O2&&(ze=Z7()):(kv=_e,Sz="value"in kv?kv.value:kv.textContent,O2=!0)),Xt=fE(oe,ot),0<Xt.length&&(ot=new Y9(ot,o,null,d,_e),Se.push({event:ot,listeners:Xt}),ze?ot.data=ze:(ze=W7(d),ze!==null&&(ot.data=ze)))),(ze=pU?hU(o,d):dU(o,d))&&(oe=fE(oe,"onBeforeInput"),0<oe.length&&(_e=new Y9("onBeforeInput","beforeinput",null,d,_e),Se.push({event:_e,listeners:oe}),_e.data=ze))}oR(Se,c)})}function P5(o,c,d){return{instance:o,listener:c,currentTarget:d}}function fE(o,c){for(var d=c+"Capture",_=[];o!==null;){var C=o,I=C.stateNode;C.tag===5&&I!==null&&(C=I,I=T5(o,d),I!=null&&_.unshift(P5(o,I,C)),I=T5(o,c),I!=null&&_.push(P5(o,I,C))),o=o.return}return _}function A2(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function aN(o,c,d,_,C){for(var I=c._reactName,z=[];d!==null&&d!==_;){var Z=d,X=Z.alternate,oe=Z.stateNode;if(X!==null&&X===_)break;Z.tag===5&&oe!==null&&(Z=oe,C?(X=T5(d,I),X!=null&&z.unshift(P5(d,X,Z))):C||(X=T5(d,I),X!=null&&z.push(P5(d,X,Z)))),d=d.return}z.length!==0&&o.push({event:c,listeners:z})}var IU=/\r\n?/g,kU=/\u0000|\uFFFD/g;function sN(o){return(typeof o=="string"?o:""+o).replace(IU,`
`).replace(kU,"")}function bT(o,c,d){if(c=sN(c),sN(o)!==c&&d)throw Error(Yt(425))}function mE(){}var vD=null,_D=null;function xD(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var wD=typeof setTimeout=="function"?setTimeout:void 0,MU=typeof clearTimeout=="function"?clearTimeout:void 0,lN=typeof Promise=="function"?Promise:void 0,AU=typeof queueMicrotask=="function"?queueMicrotask:typeof lN<"u"?function(o){return lN.resolve(null).then(o).catch(LU)}:wD;function LU(o){setTimeout(function(){throw o})}function _8(o,c){var d=c,_=0;do{var C=d.nextSibling;if(o.removeChild(d),C&&C.nodeType===8)if(d=C.data,d==="/$"){if(_===0){o.removeChild(C),k5(c);return}_--}else d!=="$"&&d!=="$?"&&d!=="$!"||_++;d=C}while(d);k5(c)}function Ov(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function uN(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(c===0)return o;c--}else d==="/$"&&c++}o=o.previousSibling}return null}var cw=Math.random().toString(36).slice(2),Xg="__reactFiber$"+cw,D5="__reactProps$"+cw,pv="__reactContainer$"+cw,bD="__reactEvents$"+cw,PU="__reactListeners$"+cw,DU="__reactHandles$"+cw;function o2(o){var c=o[Xg];if(c)return c;for(var d=o.parentNode;d;){if(c=d[pv]||d[Xg]){if(d=c.alternate,c.child!==null||d!==null&&d.child!==null)for(o=uN(o);o!==null;){if(d=o[Xg])return d;o=uN(o)}return c}o=d,d=o.parentNode}return null}function K5(o){return o=o[Xg]||o[pv],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function F2(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(Yt(33))}function rI(o){return o[D5]||null}var CD=[],j2=-1;function Gv(o){return{current:o}}function fs(o){0>j2||(o.current=CD[j2],CD[j2]=null,j2--)}function ja(o,c){j2++,CD[j2]=o.current,o.current=c}var qv={},up=Gv(qv),Hh=Gv(!1),m2=qv;function ew(o,c){var d=o.type.contextTypes;if(!d)return qv;var _=o.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===c)return _.__reactInternalMemoizedMaskedChildContext;var C={},I;for(I in d)C[I]=c[I];return _&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=C),C}function Wh(o){return o=o.childContextTypes,o!=null}function gE(){fs(Hh),fs(up)}function cN(o,c,d){if(up.current!==qv)throw Error(Yt(168));ja(up,c),ja(Hh,d)}function sR(o,c,d){var _=o.stateNode;if(c=c.childContextTypes,typeof _.getChildContext!="function")return d;_=_.getChildContext();for(var C in _)if(!(C in c))throw Error(Yt(108,yj(o)||"Unknown",C));return Ys({},d,_)}function yE(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||qv,m2=up.current,ja(up,o),ja(Hh,Hh.current),!0}function pN(o,c,d){var _=o.stateNode;if(!_)throw Error(Yt(169));d?(o=sR(o,c,m2),_.__reactInternalMemoizedMergedChildContext=o,fs(Hh),fs(up),ja(up,o)):fs(Hh),ja(Hh,d)}var rv=null,nI=!1,x8=!1;function lR(o){rv===null?rv=[o]:rv.push(o)}function zU(o){nI=!0,lR(o)}function Hv(){if(!x8&&rv!==null){x8=!0;var o=0,c=ma;try{var d=rv;for(ma=1;o<d.length;o++){var _=d[o];do _=_(!0);while(_!==null)}rv=null,nI=!1}catch(C){throw rv!==null&&(rv=rv.slice(o+1)),D7(xz,Hv),C}finally{ma=c,x8=!1}}return null}var U2=[],V2=0,vE=null,_E=0,zf=[],Nf=0,g2=null,nv=1,iv="";function Jx(o,c){U2[V2++]=_E,U2[V2++]=vE,vE=o,_E=c}function uR(o,c,d){zf[Nf++]=nv,zf[Nf++]=iv,zf[Nf++]=g2,g2=o;var _=nv;o=iv;var C=32-Bg(_)-1;_&=~(1<<C),d+=1;var I=32-Bg(c)+C;if(30<I){var z=C-C%5;I=(_&(1<<z)-1).toString(32),_>>=z,C-=z,nv=1<<32-Bg(c)+C|d<<C|_,iv=I+o}else nv=1<<I|d<<C|_,iv=o}function Mz(o){o.return!==null&&(Jx(o,1),uR(o,1,0))}function Az(o){for(;o===vE;)vE=U2[--V2],U2[V2]=null,_E=U2[--V2],U2[V2]=null;for(;o===g2;)g2=zf[--Nf],zf[Nf]=null,iv=zf[--Nf],zf[Nf]=null,nv=zf[--Nf],zf[Nf]=null}var Ef=null,Tf=null,vs=!1,Rg=null;function cR(o,c){var d=Of(5,null,null,0);d.elementType="DELETED",d.stateNode=c,d.return=o,c=o.deletions,c===null?(o.deletions=[d],o.flags|=16):c.push(d)}function hN(o,c){switch(o.tag){case 5:var d=o.type;return c=c.nodeType!==1||d.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Ef=o,Tf=Ov(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Ef=o,Tf=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(d=g2!==null?{id:nv,overflow:iv}:null,o.memoizedState={dehydrated:c,treeContext:d,retryLane:1073741824},d=Of(18,null,null,0),d.stateNode=c,d.return=o,o.child=d,Ef=o,Tf=null,!0):!1;default:return!1}}function SD(o){return(o.mode&1)!==0&&(o.flags&128)===0}function TD(o){if(vs){var c=Tf;if(c){var d=c;if(!hN(o,c)){if(SD(o))throw Error(Yt(418));c=Ov(d.nextSibling);var _=Ef;c&&hN(o,c)?cR(_,d):(o.flags=o.flags&-4097|2,vs=!1,Ef=o)}}else{if(SD(o))throw Error(Yt(418));o.flags=o.flags&-4097|2,vs=!1,Ef=o}}}function dN(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Ef=o}function CT(o){if(o!==Ef)return!1;if(!vs)return dN(o),vs=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!xD(o.type,o.memoizedProps)),c&&(c=Tf)){if(SD(o))throw pR(),Error(Yt(418));for(;c;)cR(o,c),c=Ov(c.nextSibling)}if(dN(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Yt(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"){if(c===0){Tf=Ov(o.nextSibling);break e}c--}else d!=="$"&&d!=="$!"&&d!=="$?"||c++}o=o.nextSibling}Tf=null}}else Tf=Ef?Ov(o.stateNode.nextSibling):null;return!0}function pR(){for(var o=Tf;o;)o=Ov(o.nextSibling)}function tw(){Tf=Ef=null,vs=!1}function Lz(o){Rg===null?Rg=[o]:Rg.push(o)}var NU=gv.ReactCurrentBatchConfig;function Ng(o,c){if(o&&o.defaultProps){c=Ys({},c),o=o.defaultProps;for(var d in o)c[d]===void 0&&(c[d]=o[d]);return c}return c}var xE=Gv(null),wE=null,q2=null,Pz=null;function Dz(){Pz=q2=wE=null}function zz(o){var c=xE.current;fs(xE),o._currentValue=c}function ED(o,c,d){for(;o!==null;){var _=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),o===d)break;o=o.return}}function $2(o,c){wE=o,Pz=q2=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&c&&(Gh=!0),o.firstContext=null)}function Bf(o){var c=o._currentValue;if(Pz!==o)if(o={context:o,memoizedValue:c,next:null},q2===null){if(wE===null)throw Error(Yt(308));q2=o,wE.dependencies={lanes:0,firstContext:o}}else q2=q2.next=o;return c}var a2=null;function Nz(o){a2===null?a2=[o]:a2.push(o)}function hR(o,c,d,_){var C=c.interleaved;return C===null?(d.next=d,Nz(c)):(d.next=C.next,C.next=d),c.interleaved=d,hv(o,_)}function hv(o,c){o.lanes|=c;var d=o.alternate;for(d!==null&&(d.lanes|=c),d=o,o=o.return;o!==null;)o.childLanes|=c,d=o.alternate,d!==null&&(d.childLanes|=c),d=o,o=o.return;return d.tag===3?d.stateNode:null}var Sv=!1;function Oz(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dR(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function av(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Rv(o,c,d){var _=o.updateQueue;if(_===null)return null;if(_=_.shared,To&2){var C=_.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),_.pending=c,hv(o,d)}return C=_.interleaved,C===null?(c.next=c,Nz(_)):(c.next=C.next,C.next=c),_.interleaved=c,hv(o,d)}function VT(o,c,d){if(c=c.updateQueue,c!==null&&(c=c.shared,(d&4194240)!==0)){var _=c.lanes;_&=o.pendingLanes,d|=_,c.lanes=d,wz(o,d)}}function fN(o,c){var d=o.updateQueue,_=o.alternate;if(_!==null&&(_=_.updateQueue,d===_)){var C=null,I=null;if(d=d.firstBaseUpdate,d!==null){do{var z={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};I===null?C=I=z:I=I.next=z,d=d.next}while(d!==null);I===null?C=I=c:I=I.next=c}else C=I=c;d={baseState:_.baseState,firstBaseUpdate:C,lastBaseUpdate:I,shared:_.shared,effects:_.effects},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=c}function bE(o,c,d,_){var C=o.updateQueue;Sv=!1;var I=C.firstBaseUpdate,z=C.lastBaseUpdate,Z=C.shared.pending;if(Z!==null){C.shared.pending=null;var X=Z,oe=X.next;X.next=null,z===null?I=oe:z.next=oe,z=X;var _e=o.alternate;_e!==null&&(_e=_e.updateQueue,Z=_e.lastBaseUpdate,Z!==z&&(Z===null?_e.firstBaseUpdate=oe:Z.next=oe,_e.lastBaseUpdate=X))}if(I!==null){var Se=C.baseState;z=0,_e=oe=X=null,Z=I;do{var Ne=Z.lane,$e=Z.eventTime;if((_&Ne)===Ne){_e!==null&&(_e=_e.next={eventTime:$e,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var We=o,Ze=Z;switch(Ne=c,$e=d,Ze.tag){case 1:if(We=Ze.payload,typeof We=="function"){Se=We.call($e,Se,Ne);break e}Se=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Ze.payload,Ne=typeof We=="function"?We.call($e,Se,Ne):We,Ne==null)break e;Se=Ys({},Se,Ne);break e;case 2:Sv=!0}}Z.callback!==null&&Z.lane!==0&&(o.flags|=64,Ne=C.effects,Ne===null?C.effects=[Z]:Ne.push(Z))}else $e={eventTime:$e,lane:Ne,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},_e===null?(oe=_e=$e,X=Se):_e=_e.next=$e,z|=Ne;if(Z=Z.next,Z===null){if(Z=C.shared.pending,Z===null)break;Ne=Z,Z=Ne.next,Ne.next=null,C.lastBaseUpdate=Ne,C.shared.pending=null}}while(1);if(_e===null&&(X=Se),C.baseState=X,C.firstBaseUpdate=oe,C.lastBaseUpdate=_e,c=C.shared.interleaved,c!==null){C=c;do z|=C.lane,C=C.next;while(C!==c)}else I===null&&(C.shared.lanes=0);v2|=z,o.lanes=z,o.memoizedState=Se}}function mN(o,c,d){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var _=o[c],C=_.callback;if(C!==null){if(_.callback=null,_=d,typeof C!="function")throw Error(Yt(191,C));C.call(_)}}}var fR=new h7.Component().refs;function ID(o,c,d,_){c=o.memoizedState,d=d(_,c),d=d==null?c:Ys({},c,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var iI={isMounted:function(o){return(o=o._reactInternals)?b2(o)===o:!1},enqueueSetState:function(o,c,d){o=o._reactInternals;var _=Oh(),C=Fv(o),I=av(_,C);I.payload=c,d!=null&&(I.callback=d),c=Rv(o,I,C),c!==null&&(Fg(c,o,C,_),VT(c,o,C))},enqueueReplaceState:function(o,c,d){o=o._reactInternals;var _=Oh(),C=Fv(o),I=av(_,C);I.tag=1,I.payload=c,d!=null&&(I.callback=d),c=Rv(o,I,C),c!==null&&(Fg(c,o,C,_),VT(c,o,C))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var d=Oh(),_=Fv(o),C=av(d,_);C.tag=2,c!=null&&(C.callback=c),c=Rv(o,C,_),c!==null&&(Fg(c,o,_,d),VT(c,o,_))}};function gN(o,c,d,_,C,I,z){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(_,I,z):c.prototype&&c.prototype.isPureReactComponent?!A5(d,_)||!A5(C,I):!0}function mR(o,c,d){var _=!1,C=qv,I=c.contextType;return typeof I=="object"&&I!==null?I=Bf(I):(C=Wh(c)?m2:up.current,_=c.contextTypes,I=(_=_!=null)?ew(o,C):qv),c=new c(d,I),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=iI,o.stateNode=c,c._reactInternals=o,_&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=C,o.__reactInternalMemoizedMaskedChildContext=I),c}function yN(o,c,d,_){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(d,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(d,_),c.state!==o&&iI.enqueueReplaceState(c,c.state,null)}function kD(o,c,d,_){var C=o.stateNode;C.props=d,C.state=o.memoizedState,C.refs=fR,Oz(o);var I=c.contextType;typeof I=="object"&&I!==null?C.context=Bf(I):(I=Wh(c)?m2:up.current,C.context=ew(o,I)),C.state=o.memoizedState,I=c.getDerivedStateFromProps,typeof I=="function"&&(ID(o,c,I,d),C.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(c=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),c!==C.state&&iI.enqueueReplaceState(C,C.state,null),bE(o,d,C,_),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308)}function K4(o,c,d){if(o=d.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(Yt(309));var _=d.stateNode}if(!_)throw Error(Yt(147,o));var C=_,I=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===I?c.ref:(c=function(z){var Z=C.refs;Z===fR&&(Z=C.refs={}),z===null?delete Z[I]:Z[I]=z},c._stringRef=I,c)}if(typeof o!="string")throw Error(Yt(284));if(!d._owner)throw Error(Yt(290,o))}return o}function ST(o,c){throw o=Object.prototype.toString.call(c),Error(Yt(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function vN(o){var c=o._init;return c(o._payload)}function gR(o){function c(Oe,Be){if(o){var Xe=Oe.deletions;Xe===null?(Oe.deletions=[Be],Oe.flags|=16):Xe.push(Be)}}function d(Oe,Be){if(!o)return null;for(;Be!==null;)c(Oe,Be),Be=Be.sibling;return null}function _(Oe,Be){for(Oe=new Map;Be!==null;)Be.key!==null?Oe.set(Be.key,Be):Oe.set(Be.index,Be),Be=Be.sibling;return Oe}function C(Oe,Be){return Oe=jv(Oe,Be),Oe.index=0,Oe.sibling=null,Oe}function I(Oe,Be,Xe){return Oe.index=Xe,o?(Xe=Oe.alternate,Xe!==null?(Xe=Xe.index,Xe<Be?(Oe.flags|=2,Be):Xe):(Oe.flags|=2,Be)):(Oe.flags|=1048576,Be)}function z(Oe){return o&&Oe.alternate===null&&(Oe.flags|=2),Oe}function Z(Oe,Be,Xe,Et){return Be===null||Be.tag!==6?(Be=I8(Xe,Oe.mode,Et),Be.return=Oe,Be):(Be=C(Be,Xe),Be.return=Oe,Be)}function X(Oe,Be,Xe,Et){var Ht=Xe.type;return Ht===N2?_e(Oe,Be,Xe.props.children,Et,Xe.key):Be!==null&&(Be.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Cv&&vN(Ht)===Be.type)?(Et=C(Be,Xe.props),Et.ref=K4(Oe,Be,Xe),Et.return=Oe,Et):(Et=YT(Xe.type,Xe.key,Xe.props,null,Oe.mode,Et),Et.ref=K4(Oe,Be,Xe),Et.return=Oe,Et)}function oe(Oe,Be,Xe,Et){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Xe.containerInfo||Be.stateNode.implementation!==Xe.implementation?(Be=k8(Xe,Oe.mode,Et),Be.return=Oe,Be):(Be=C(Be,Xe.children||[]),Be.return=Oe,Be)}function _e(Oe,Be,Xe,Et,Ht){return Be===null||Be.tag!==7?(Be=h2(Xe,Oe.mode,Et,Ht),Be.return=Oe,Be):(Be=C(Be,Xe),Be.return=Oe,Be)}function Se(Oe,Be,Xe){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return Be=I8(""+Be,Oe.mode,Xe),Be.return=Oe,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case dT:return Xe=YT(Be.type,Be.key,Be.props,null,Oe.mode,Xe),Xe.ref=K4(Oe,null,Be),Xe.return=Oe,Xe;case z2:return Be=k8(Be,Oe.mode,Xe),Be.return=Oe,Be;case Cv:var Et=Be._init;return Se(Oe,Et(Be._payload),Xe)}if(n5(Be)||Z4(Be))return Be=h2(Be,Oe.mode,Xe,null),Be.return=Oe,Be;ST(Oe,Be)}return null}function Ne(Oe,Be,Xe,Et){var Ht=Be!==null?Be.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Ht!==null?null:Z(Oe,Be,""+Xe,Et);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case dT:return Xe.key===Ht?X(Oe,Be,Xe,Et):null;case z2:return Xe.key===Ht?oe(Oe,Be,Xe,Et):null;case Cv:return Ht=Xe._init,Ne(Oe,Be,Ht(Xe._payload),Et)}if(n5(Xe)||Z4(Xe))return Ht!==null?null:_e(Oe,Be,Xe,Et,null);ST(Oe,Xe)}return null}function $e(Oe,Be,Xe,Et,Ht){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Oe=Oe.get(Xe)||null,Z(Be,Oe,""+Et,Ht);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case dT:return Oe=Oe.get(Et.key===null?Xe:Et.key)||null,X(Be,Oe,Et,Ht);case z2:return Oe=Oe.get(Et.key===null?Xe:Et.key)||null,oe(Be,Oe,Et,Ht);case Cv:var Xt=Et._init;return $e(Oe,Be,Xe,Xt(Et._payload),Ht)}if(n5(Et)||Z4(Et))return Oe=Oe.get(Xe)||null,_e(Be,Oe,Et,Ht,null);ST(Be,Et)}return null}function We(Oe,Be,Xe,Et){for(var Ht=null,Xt=null,ze=Be,ot=Be=0,Zr=null;ze!==null&&ot<Xe.length;ot++){ze.index>ot?(Zr=ze,ze=null):Zr=ze.sibling;var yr=Ne(Oe,ze,Xe[ot],Et);if(yr===null){ze===null&&(ze=Zr);break}o&&ze&&yr.alternate===null&&c(Oe,ze),Be=I(yr,Be,ot),Xt===null?Ht=yr:Xt.sibling=yr,Xt=yr,ze=Zr}if(ot===Xe.length)return d(Oe,ze),vs&&Jx(Oe,ot),Ht;if(ze===null){for(;ot<Xe.length;ot++)ze=Se(Oe,Xe[ot],Et),ze!==null&&(Be=I(ze,Be,ot),Xt===null?Ht=ze:Xt.sibling=ze,Xt=ze);return vs&&Jx(Oe,ot),Ht}for(ze=_(Oe,ze);ot<Xe.length;ot++)Zr=$e(ze,Oe,ot,Xe[ot],Et),Zr!==null&&(o&&Zr.alternate!==null&&ze.delete(Zr.key===null?ot:Zr.key),Be=I(Zr,Be,ot),Xt===null?Ht=Zr:Xt.sibling=Zr,Xt=Zr);return o&&ze.forEach(function(sr){return c(Oe,sr)}),vs&&Jx(Oe,ot),Ht}function Ze(Oe,Be,Xe,Et){var Ht=Z4(Xe);if(typeof Ht!="function")throw Error(Yt(150));if(Xe=Ht.call(Xe),Xe==null)throw Error(Yt(151));for(var Xt=Ht=null,ze=Be,ot=Be=0,Zr=null,yr=Xe.next();ze!==null&&!yr.done;ot++,yr=Xe.next()){ze.index>ot?(Zr=ze,ze=null):Zr=ze.sibling;var sr=Ne(Oe,ze,yr.value,Et);if(sr===null){ze===null&&(ze=Zr);break}o&&ze&&sr.alternate===null&&c(Oe,ze),Be=I(sr,Be,ot),Xt===null?Ht=sr:Xt.sibling=sr,Xt=sr,ze=Zr}if(yr.done)return d(Oe,ze),vs&&Jx(Oe,ot),Ht;if(ze===null){for(;!yr.done;ot++,yr=Xe.next())yr=Se(Oe,yr.value,Et),yr!==null&&(Be=I(yr,Be,ot),Xt===null?Ht=yr:Xt.sibling=yr,Xt=yr);return vs&&Jx(Oe,ot),Ht}for(ze=_(Oe,ze);!yr.done;ot++,yr=Xe.next())yr=$e(ze,Oe,ot,yr.value,Et),yr!==null&&(o&&yr.alternate!==null&&ze.delete(yr.key===null?ot:yr.key),Be=I(yr,Be,ot),Xt===null?Ht=yr:Xt.sibling=yr,Xt=yr);return o&&ze.forEach(function(_s){return c(Oe,_s)}),vs&&Jx(Oe,ot),Ht}function ct(Oe,Be,Xe,Et){if(typeof Xe=="object"&&Xe!==null&&Xe.type===N2&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case dT:e:{for(var Ht=Xe.key,Xt=Be;Xt!==null;){if(Xt.key===Ht){if(Ht=Xe.type,Ht===N2){if(Xt.tag===7){d(Oe,Xt.sibling),Be=C(Xt,Xe.props.children),Be.return=Oe,Oe=Be;break e}}else if(Xt.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Cv&&vN(Ht)===Xt.type){d(Oe,Xt.sibling),Be=C(Xt,Xe.props),Be.ref=K4(Oe,Xt,Xe),Be.return=Oe,Oe=Be;break e}d(Oe,Xt);break}else c(Oe,Xt);Xt=Xt.sibling}Xe.type===N2?(Be=h2(Xe.props.children,Oe.mode,Et,Xe.key),Be.return=Oe,Oe=Be):(Et=YT(Xe.type,Xe.key,Xe.props,null,Oe.mode,Et),Et.ref=K4(Oe,Be,Xe),Et.return=Oe,Oe=Et)}return z(Oe);case z2:e:{for(Xt=Xe.key;Be!==null;){if(Be.key===Xt)if(Be.tag===4&&Be.stateNode.containerInfo===Xe.containerInfo&&Be.stateNode.implementation===Xe.implementation){d(Oe,Be.sibling),Be=C(Be,Xe.children||[]),Be.return=Oe,Oe=Be;break e}else{d(Oe,Be);break}else c(Oe,Be);Be=Be.sibling}Be=k8(Xe,Oe.mode,Et),Be.return=Oe,Oe=Be}return z(Oe);case Cv:return Xt=Xe._init,ct(Oe,Be,Xt(Xe._payload),Et)}if(n5(Xe))return We(Oe,Be,Xe,Et);if(Z4(Xe))return Ze(Oe,Be,Xe,Et);ST(Oe,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"?(Xe=""+Xe,Be!==null&&Be.tag===6?(d(Oe,Be.sibling),Be=C(Be,Xe),Be.return=Oe,Oe=Be):(d(Oe,Be),Be=I8(Xe,Oe.mode,Et),Be.return=Oe,Oe=Be),z(Oe)):d(Oe,Be)}return ct}var rw=gR(!0),yR=gR(!1),$5={},Qg=Gv($5),z5=Gv($5),N5=Gv($5);function s2(o){if(o===$5)throw Error(Yt(174));return o}function Rz(o,c){switch(ja(N5,c),ja(z5,o),ja(Qg,$5),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:aD(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=aD(c,o)}fs(Qg),ja(Qg,c)}function nw(){fs(Qg),fs(z5),fs(N5)}function vR(o){s2(N5.current);var c=s2(Qg.current),d=aD(c,o.type);c!==d&&(ja(z5,o),ja(Qg,d))}function Bz(o){z5.current===o&&(fs(Qg),fs(z5))}var Hs=Gv(0);function CE(o){for(var c=o;c!==null;){if(c.tag===13){var d=c.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var w8=[];function Fz(){for(var o=0;o<w8.length;o++)w8[o]._workInProgressVersionPrimary=null;w8.length=0}var qT=gv.ReactCurrentDispatcher,b8=gv.ReactCurrentBatchConfig,y2=0,Ws=null,Bu=null,Uu=null,SE=!1,g5=!1,O5=0,OU=0;function op(){throw Error(Yt(321))}function jz(o,c){if(c===null)return!1;for(var d=0;d<c.length&&d<o.length;d++)if(!jg(o[d],c[d]))return!1;return!0}function Uz(o,c,d,_,C,I){if(y2=I,Ws=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,qT.current=o===null||o.memoizedState===null?jU:UU,o=d(_,C),g5){I=0;do{if(g5=!1,O5=0,25<=I)throw Error(Yt(301));I+=1,Uu=Bu=null,c.updateQueue=null,qT.current=VU,o=d(_,C)}while(g5)}if(qT.current=TE,c=Bu!==null&&Bu.next!==null,y2=0,Uu=Bu=Ws=null,SE=!1,c)throw Error(Yt(300));return o}function Vz(){var o=O5!==0;return O5=0,o}function Kg(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Uu===null?Ws.memoizedState=Uu=o:Uu=Uu.next=o,Uu}function Ff(){if(Bu===null){var o=Ws.alternate;o=o!==null?o.memoizedState:null}else o=Bu.next;var c=Uu===null?Ws.memoizedState:Uu.next;if(c!==null)Uu=c,Bu=o;else{if(o===null)throw Error(Yt(310));Bu=o,o={memoizedState:Bu.memoizedState,baseState:Bu.baseState,baseQueue:Bu.baseQueue,queue:Bu.queue,next:null},Uu===null?Ws.memoizedState=Uu=o:Uu=Uu.next=o}return Uu}function R5(o,c){return typeof c=="function"?c(o):c}function C8(o){var c=Ff(),d=c.queue;if(d===null)throw Error(Yt(311));d.lastRenderedReducer=o;var _=Bu,C=_.baseQueue,I=d.pending;if(I!==null){if(C!==null){var z=C.next;C.next=I.next,I.next=z}_.baseQueue=C=I,d.pending=null}if(C!==null){I=C.next,_=_.baseState;var Z=z=null,X=null,oe=I;do{var _e=oe.lane;if((y2&_e)===_e)X!==null&&(X=X.next={lane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),_=oe.hasEagerState?oe.eagerState:o(_,oe.action);else{var Se={lane:_e,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null};X===null?(Z=X=Se,z=_):X=X.next=Se,Ws.lanes|=_e,v2|=_e}oe=oe.next}while(oe!==null&&oe!==I);X===null?z=_:X.next=Z,jg(_,c.memoizedState)||(Gh=!0),c.memoizedState=_,c.baseState=z,c.baseQueue=X,d.lastRenderedState=_}if(o=d.interleaved,o!==null){C=o;do I=C.lane,Ws.lanes|=I,v2|=I,C=C.next;while(C!==o)}else C===null&&(d.lanes=0);return[c.memoizedState,d.dispatch]}function S8(o){var c=Ff(),d=c.queue;if(d===null)throw Error(Yt(311));d.lastRenderedReducer=o;var _=d.dispatch,C=d.pending,I=c.memoizedState;if(C!==null){d.pending=null;var z=C=C.next;do I=o(I,z.action),z=z.next;while(z!==C);jg(I,c.memoizedState)||(Gh=!0),c.memoizedState=I,c.baseQueue===null&&(c.baseState=I),d.lastRenderedState=I}return[I,_]}function _R(){}function xR(o,c){var d=Ws,_=Ff(),C=c(),I=!jg(_.memoizedState,C);if(I&&(_.memoizedState=C,Gh=!0),_=_.queue,qz(CR.bind(null,d,_,o),[o]),_.getSnapshot!==c||I||Uu!==null&&Uu.memoizedState.tag&1){if(d.flags|=2048,B5(9,bR.bind(null,d,_,C,c),void 0,null),qu===null)throw Error(Yt(349));y2&30||wR(d,c,C)}return C}function wR(o,c,d){o.flags|=16384,o={getSnapshot:c,value:d},c=Ws.updateQueue,c===null?(c={lastEffect:null,stores:null},Ws.updateQueue=c,c.stores=[o]):(d=c.stores,d===null?c.stores=[o]:d.push(o))}function bR(o,c,d,_){c.value=d,c.getSnapshot=_,SR(c)&&TR(o)}function CR(o,c,d){return d(function(){SR(c)&&TR(o)})}function SR(o){var c=o.getSnapshot;o=o.value;try{var d=c();return!jg(o,d)}catch{return!0}}function TR(o){var c=hv(o,1);c!==null&&Fg(c,o,1,-1)}function _N(o){var c=Kg();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:R5,lastRenderedState:o},c.queue=o,o=o.dispatch=FU.bind(null,Ws,o),[c.memoizedState,o]}function B5(o,c,d,_){return o={tag:o,create:c,destroy:d,deps:_,next:null},c=Ws.updateQueue,c===null?(c={lastEffect:null,stores:null},Ws.updateQueue=c,c.lastEffect=o.next=o):(d=c.lastEffect,d===null?c.lastEffect=o.next=o:(_=d.next,d.next=o,o.next=_,c.lastEffect=o)),o}function ER(){return Ff().memoizedState}function ZT(o,c,d,_){var C=Kg();Ws.flags|=o,C.memoizedState=B5(1|c,d,void 0,_===void 0?null:_)}function oI(o,c,d,_){var C=Ff();_=_===void 0?null:_;var I=void 0;if(Bu!==null){var z=Bu.memoizedState;if(I=z.destroy,_!==null&&jz(_,z.deps)){C.memoizedState=B5(c,d,I,_);return}}Ws.flags|=o,C.memoizedState=B5(1|c,d,I,_)}function xN(o,c){return ZT(8390656,8,o,c)}function qz(o,c){return oI(2048,8,o,c)}function IR(o,c){return oI(4,2,o,c)}function kR(o,c){return oI(4,4,o,c)}function MR(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function AR(o,c,d){return d=d!=null?d.concat([o]):null,oI(4,4,MR.bind(null,c,o),d)}function Zz(){}function LR(o,c){var d=Ff();c=c===void 0?null:c;var _=d.memoizedState;return _!==null&&c!==null&&jz(c,_[1])?_[0]:(d.memoizedState=[o,c],o)}function PR(o,c){var d=Ff();c=c===void 0?null:c;var _=d.memoizedState;return _!==null&&c!==null&&jz(c,_[1])?_[0]:(o=o(),d.memoizedState=[o,c],o)}function DR(o,c,d){return y2&21?(jg(d,c)||(d=O7(),Ws.lanes|=d,v2|=d,o.baseState=!0),c):(o.baseState&&(o.baseState=!1,Gh=!0),o.memoizedState=d)}function RU(o,c){var d=ma;ma=d!==0&&4>d?d:4,o(!0);var _=b8.transition;b8.transition={};try{o(!1),c()}finally{ma=d,b8.transition=_}}function zR(){return Ff().memoizedState}function BU(o,c,d){var _=Fv(o);if(d={lane:_,action:d,hasEagerState:!1,eagerState:null,next:null},NR(o))OR(c,d);else if(d=hR(o,c,d,_),d!==null){var C=Oh();Fg(d,o,_,C),RR(d,c,_)}}function FU(o,c,d){var _=Fv(o),C={lane:_,action:d,hasEagerState:!1,eagerState:null,next:null};if(NR(o))OR(c,C);else{var I=o.alternate;if(o.lanes===0&&(I===null||I.lanes===0)&&(I=c.lastRenderedReducer,I!==null))try{var z=c.lastRenderedState,Z=I(z,d);if(C.hasEagerState=!0,C.eagerState=Z,jg(Z,z)){var X=c.interleaved;X===null?(C.next=C,Nz(c)):(C.next=X.next,X.next=C),c.interleaved=C;return}}catch{}finally{}d=hR(o,c,C,_),d!==null&&(C=Oh(),Fg(d,o,_,C),RR(d,c,_))}}function NR(o){var c=o.alternate;return o===Ws||c!==null&&c===Ws}function OR(o,c){g5=SE=!0;var d=o.pending;d===null?c.next=c:(c.next=d.next,d.next=c),o.pending=c}function RR(o,c,d){if(d&4194240){var _=c.lanes;_&=o.pendingLanes,d|=_,c.lanes=d,wz(o,d)}}var TE={readContext:Bf,useCallback:op,useContext:op,useEffect:op,useImperativeHandle:op,useInsertionEffect:op,useLayoutEffect:op,useMemo:op,useReducer:op,useRef:op,useState:op,useDebugValue:op,useDeferredValue:op,useTransition:op,useMutableSource:op,useSyncExternalStore:op,useId:op,unstable_isNewReconciler:!1},jU={readContext:Bf,useCallback:function(o,c){return Kg().memoizedState=[o,c===void 0?null:c],o},useContext:Bf,useEffect:xN,useImperativeHandle:function(o,c,d){return d=d!=null?d.concat([o]):null,ZT(4194308,4,MR.bind(null,c,o),d)},useLayoutEffect:function(o,c){return ZT(4194308,4,o,c)},useInsertionEffect:function(o,c){return ZT(4,2,o,c)},useMemo:function(o,c){var d=Kg();return c=c===void 0?null:c,o=o(),d.memoizedState=[o,c],o},useReducer:function(o,c,d){var _=Kg();return c=d!==void 0?d(c):c,_.memoizedState=_.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},_.queue=o,o=o.dispatch=BU.bind(null,Ws,o),[_.memoizedState,o]},useRef:function(o){var c=Kg();return o={current:o},c.memoizedState=o},useState:_N,useDebugValue:Zz,useDeferredValue:function(o){return Kg().memoizedState=o},useTransition:function(){var o=_N(!1),c=o[0];return o=RU.bind(null,o[1]),Kg().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,d){var _=Ws,C=Kg();if(vs){if(d===void 0)throw Error(Yt(407));d=d()}else{if(d=c(),qu===null)throw Error(Yt(349));y2&30||wR(_,c,d)}C.memoizedState=d;var I={value:d,getSnapshot:c};return C.queue=I,xN(CR.bind(null,_,I,o),[o]),_.flags|=2048,B5(9,bR.bind(null,_,I,d,c),void 0,null),d},useId:function(){var o=Kg(),c=qu.identifierPrefix;if(vs){var d=iv,_=nv;d=(_&~(1<<32-Bg(_)-1)).toString(32)+d,c=":"+c+"R"+d,d=O5++,0<d&&(c+="H"+d.toString(32)),c+=":"}else d=OU++,c=":"+c+"r"+d.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},UU={readContext:Bf,useCallback:LR,useContext:Bf,useEffect:qz,useImperativeHandle:AR,useInsertionEffect:IR,useLayoutEffect:kR,useMemo:PR,useReducer:C8,useRef:ER,useState:function(){return C8(R5)},useDebugValue:Zz,useDeferredValue:function(o){var c=Ff();return DR(c,Bu.memoizedState,o)},useTransition:function(){var o=C8(R5)[0],c=Ff().memoizedState;return[o,c]},useMutableSource:_R,useSyncExternalStore:xR,useId:zR,unstable_isNewReconciler:!1},VU={readContext:Bf,useCallback:LR,useContext:Bf,useEffect:qz,useImperativeHandle:AR,useInsertionEffect:IR,useLayoutEffect:kR,useMemo:PR,useReducer:S8,useRef:ER,useState:function(){return S8(R5)},useDebugValue:Zz,useDeferredValue:function(o){var c=Ff();return Bu===null?c.memoizedState=o:DR(c,Bu.memoizedState,o)},useTransition:function(){var o=S8(R5)[0],c=Ff().memoizedState;return[o,c]},useMutableSource:_R,useSyncExternalStore:xR,useId:zR,unstable_isNewReconciler:!1};function iw(o,c){try{var d="",_=c;do d+=gj(_),_=_.return;while(_);var C=d}catch(I){C=`
Error generating stack: `+I.message+`
`+I.stack}return{value:o,source:c,stack:C,digest:null}}function T8(o,c,d){return{value:o,source:null,stack:d??null,digest:c??null}}function MD(o,c){try{console.error(c.value)}catch(d){setTimeout(function(){throw d})}}var qU=typeof WeakMap=="function"?WeakMap:Map;function BR(o,c,d){d=av(-1,d),d.tag=3,d.payload={element:null};var _=c.value;return d.callback=function(){IE||(IE=!0,FD=_),MD(o,c)},d}function FR(o,c,d){d=av(-1,d),d.tag=3;var _=o.type.getDerivedStateFromError;if(typeof _=="function"){var C=c.value;d.payload=function(){return _(C)},d.callback=function(){MD(o,c)}}var I=o.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(d.callback=function(){MD(o,c),typeof _!="function"&&(Bv===null?Bv=new Set([this]):Bv.add(this));var z=c.stack;this.componentDidCatch(c.value,{componentStack:z!==null?z:""})}),d}function wN(o,c,d){var _=o.pingCache;if(_===null){_=o.pingCache=new qU;var C=new Set;_.set(c,C)}else C=_.get(c),C===void 0&&(C=new Set,_.set(c,C));C.has(d)||(C.add(d),o=nV.bind(null,o,c,d),c.then(o,o))}function bN(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function CN(o,c,d,_,C){return o.mode&1?(o.flags|=65536,o.lanes=C,o):(o===c?o.flags|=65536:(o.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(c=av(-1,1),c.tag=2,Rv(d,c,1))),d.lanes|=1),o)}var ZU=gv.ReactCurrentOwner,Gh=!1;function zh(o,c,d,_){c.child=o===null?yR(c,null,d,_):rw(c,o.child,d,_)}function SN(o,c,d,_,C){d=d.render;var I=c.ref;return $2(c,C),_=Uz(o,c,d,_,I,C),d=Vz(),o!==null&&!Gh?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~C,dv(o,c,C)):(vs&&d&&Mz(c),c.flags|=1,zh(o,c,_,C),c.child)}function TN(o,c,d,_,C){if(o===null){var I=d.type;return typeof I=="function"&&!Jz(I)&&I.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(c.tag=15,c.type=I,jR(o,c,I,_,C)):(o=YT(d.type,null,_,c,c.mode,C),o.ref=c.ref,o.return=c,c.child=o)}if(I=o.child,!(o.lanes&C)){var z=I.memoizedProps;if(d=d.compare,d=d!==null?d:A5,d(z,_)&&o.ref===c.ref)return dv(o,c,C)}return c.flags|=1,o=jv(I,_),o.ref=c.ref,o.return=c,c.child=o}function jR(o,c,d,_,C){if(o!==null){var I=o.memoizedProps;if(A5(I,_)&&o.ref===c.ref)if(Gh=!1,c.pendingProps=_=I,(o.lanes&C)!==0)o.flags&131072&&(Gh=!0);else return c.lanes=o.lanes,dv(o,c,C)}return AD(o,c,d,_,C)}function UR(o,c,d){var _=c.pendingProps,C=_.children,I=o!==null?o.memoizedState:null;if(_.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},ja(G2,_f),_f|=d;else{if(!(d&1073741824))return o=I!==null?I.baseLanes|d:d,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,ja(G2,_f),_f|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=I!==null?I.baseLanes:d,ja(G2,_f),_f|=_}else I!==null?(_=I.baseLanes|d,c.memoizedState=null):_=d,ja(G2,_f),_f|=_;return zh(o,c,C,d),c.child}function VR(o,c){var d=c.ref;(o===null&&d!==null||o!==null&&o.ref!==d)&&(c.flags|=512,c.flags|=2097152)}function AD(o,c,d,_,C){var I=Wh(d)?m2:up.current;return I=ew(c,I),$2(c,C),d=Uz(o,c,d,_,I,C),_=Vz(),o!==null&&!Gh?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~C,dv(o,c,C)):(vs&&_&&Mz(c),c.flags|=1,zh(o,c,d,C),c.child)}function EN(o,c,d,_,C){if(Wh(d)){var I=!0;yE(c)}else I=!1;if($2(c,C),c.stateNode===null)GT(o,c),mR(c,d,_),kD(c,d,_,C),_=!0;else if(o===null){var z=c.stateNode,Z=c.memoizedProps;z.props=Z;var X=z.context,oe=d.contextType;typeof oe=="object"&&oe!==null?oe=Bf(oe):(oe=Wh(d)?m2:up.current,oe=ew(c,oe));var _e=d.getDerivedStateFromProps,Se=typeof _e=="function"||typeof z.getSnapshotBeforeUpdate=="function";Se||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Z!==_||X!==oe)&&yN(c,z,_,oe),Sv=!1;var Ne=c.memoizedState;z.state=Ne,bE(c,_,z,C),X=c.memoizedState,Z!==_||Ne!==X||Hh.current||Sv?(typeof _e=="function"&&(ID(c,d,_e,_),X=c.memoizedState),(Z=Sv||gN(c,d,Z,_,Ne,X,oe))?(Se||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(c.flags|=4194308)):(typeof z.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=X),z.props=_,z.state=X,z.context=oe,_=Z):(typeof z.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{z=c.stateNode,dR(o,c),Z=c.memoizedProps,oe=c.type===c.elementType?Z:Ng(c.type,Z),z.props=oe,Se=c.pendingProps,Ne=z.context,X=d.contextType,typeof X=="object"&&X!==null?X=Bf(X):(X=Wh(d)?m2:up.current,X=ew(c,X));var $e=d.getDerivedStateFromProps;(_e=typeof $e=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Z!==Se||Ne!==X)&&yN(c,z,_,X),Sv=!1,Ne=c.memoizedState,z.state=Ne,bE(c,_,z,C);var We=c.memoizedState;Z!==Se||Ne!==We||Hh.current||Sv?(typeof $e=="function"&&(ID(c,d,$e,_),We=c.memoizedState),(oe=Sv||gN(c,d,oe,_,Ne,We,X)||!1)?(_e||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(_,We,X),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(_,We,X)),typeof z.componentDidUpdate=="function"&&(c.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof z.componentDidUpdate!="function"||Z===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Z===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=We),z.props=_,z.state=We,z.context=X,_=oe):(typeof z.componentDidUpdate!="function"||Z===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Z===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=1024),_=!1)}return LD(o,c,d,_,I,C)}function LD(o,c,d,_,C,I){VR(o,c);var z=(c.flags&128)!==0;if(!_&&!z)return C&&pN(c,d,!1),dv(o,c,I);_=c.stateNode,ZU.current=c;var Z=z&&typeof d.getDerivedStateFromError!="function"?null:_.render();return c.flags|=1,o!==null&&z?(c.child=rw(c,o.child,null,I),c.child=rw(c,null,Z,I)):zh(o,c,Z,I),c.memoizedState=_.state,C&&pN(c,d,!0),c.child}function qR(o){var c=o.stateNode;c.pendingContext?cN(o,c.pendingContext,c.pendingContext!==c.context):c.context&&cN(o,c.context,!1),Rz(o,c.containerInfo)}function IN(o,c,d,_,C){return tw(),Lz(C),c.flags|=256,zh(o,c,d,_),c.child}var PD={dehydrated:null,treeContext:null,retryLane:0};function DD(o){return{baseLanes:o,cachePool:null,transitions:null}}function ZR(o,c,d){var _=c.pendingProps,C=Hs.current,I=!1,z=(c.flags&128)!==0,Z;if((Z=z)||(Z=o!==null&&o.memoizedState===null?!1:(C&2)!==0),Z?(I=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(C|=1),ja(Hs,C&1),o===null)return TD(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(c.mode&1?o.data==="$!"?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(z=_.children,o=_.fallback,I?(_=c.mode,I=c.child,z={mode:"hidden",children:z},!(_&1)&&I!==null?(I.childLanes=0,I.pendingProps=z):I=lI(z,_,0,null),o=h2(o,_,d,null),I.return=c,o.return=c,I.sibling=o,c.child=I,c.child.memoizedState=DD(d),c.memoizedState=PD,o):Gz(c,z));if(C=o.memoizedState,C!==null&&(Z=C.dehydrated,Z!==null))return GU(o,c,z,_,Z,C,d);if(I){I=_.fallback,z=c.mode,C=o.child,Z=C.sibling;var X={mode:"hidden",children:_.children};return!(z&1)&&c.child!==C?(_=c.child,_.childLanes=0,_.pendingProps=X,c.deletions=null):(_=jv(C,X),_.subtreeFlags=C.subtreeFlags&14680064),Z!==null?I=jv(Z,I):(I=h2(I,z,d,null),I.flags|=2),I.return=c,_.return=c,_.sibling=I,c.child=_,_=I,I=c.child,z=o.child.memoizedState,z=z===null?DD(d):{baseLanes:z.baseLanes|d,cachePool:null,transitions:z.transitions},I.memoizedState=z,I.childLanes=o.childLanes&~d,c.memoizedState=PD,_}return I=o.child,o=I.sibling,_=jv(I,{mode:"visible",children:_.children}),!(c.mode&1)&&(_.lanes=d),_.return=c,_.sibling=null,o!==null&&(d=c.deletions,d===null?(c.deletions=[o],c.flags|=16):d.push(o)),c.child=_,c.memoizedState=null,_}function Gz(o,c){return c=lI({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function TT(o,c,d,_){return _!==null&&Lz(_),rw(c,o.child,null,d),o=Gz(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function GU(o,c,d,_,C,I,z){if(d)return c.flags&256?(c.flags&=-257,_=T8(Error(Yt(422))),TT(o,c,z,_)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(I=_.fallback,C=c.mode,_=lI({mode:"visible",children:_.children},C,0,null),I=h2(I,C,z,null),I.flags|=2,_.return=c,I.return=c,_.sibling=I,c.child=_,c.mode&1&&rw(c,o.child,null,z),c.child.memoizedState=DD(z),c.memoizedState=PD,I);if(!(c.mode&1))return TT(o,c,z,null);if(C.data==="$!"){if(_=C.nextSibling&&C.nextSibling.dataset,_)var Z=_.dgst;return _=Z,I=Error(Yt(419)),_=T8(I,_,void 0),TT(o,c,z,_)}if(Z=(z&o.childLanes)!==0,Gh||Z){if(_=qu,_!==null){switch(z&-z){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=C&(_.suspendedLanes|z)?0:C,C!==0&&C!==I.retryLane&&(I.retryLane=C,hv(o,C),Fg(_,o,C,-1))}return Xz(),_=T8(Error(Yt(421))),TT(o,c,z,_)}return C.data==="$?"?(c.flags|=128,c.child=o.child,c=iV.bind(null,o),C._reactRetry=c,null):(o=I.treeContext,Tf=Ov(C.nextSibling),Ef=c,vs=!0,Rg=null,o!==null&&(zf[Nf++]=nv,zf[Nf++]=iv,zf[Nf++]=g2,nv=o.id,iv=o.overflow,g2=c),c=Gz(c,_.children),c.flags|=4096,c)}function kN(o,c,d){o.lanes|=c;var _=o.alternate;_!==null&&(_.lanes|=c),ED(o.return,c,d)}function E8(o,c,d,_,C){var I=o.memoizedState;I===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:d,tailMode:C}:(I.isBackwards=c,I.rendering=null,I.renderingStartTime=0,I.last=_,I.tail=d,I.tailMode=C)}function GR(o,c,d){var _=c.pendingProps,C=_.revealOrder,I=_.tail;if(zh(o,c,_.children,d),_=Hs.current,_&2)_=_&1|2,c.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&kN(o,d,c);else if(o.tag===19)kN(o,d,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}_&=1}if(ja(Hs,_),!(c.mode&1))c.memoizedState=null;else switch(C){case"forwards":for(d=c.child,C=null;d!==null;)o=d.alternate,o!==null&&CE(o)===null&&(C=d),d=d.sibling;d=C,d===null?(C=c.child,c.child=null):(C=d.sibling,d.sibling=null),E8(c,!1,C,d,I);break;case"backwards":for(d=null,C=c.child,c.child=null;C!==null;){if(o=C.alternate,o!==null&&CE(o)===null){c.child=C;break}o=C.sibling,C.sibling=d,d=C,C=o}E8(c,!0,d,null,I);break;case"together":E8(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function GT(o,c){!(c.mode&1)&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function dv(o,c,d){if(o!==null&&(c.dependencies=o.dependencies),v2|=c.lanes,!(d&c.childLanes))return null;if(o!==null&&c.child!==o.child)throw Error(Yt(153));if(c.child!==null){for(o=c.child,d=jv(o,o.pendingProps),c.child=d,d.return=c;o.sibling!==null;)o=o.sibling,d=d.sibling=jv(o,o.pendingProps),d.return=c;d.sibling=null}return c.child}function HU(o,c,d){switch(c.tag){case 3:qR(c),tw();break;case 5:vR(c);break;case 1:Wh(c.type)&&yE(c);break;case 4:Rz(c,c.stateNode.containerInfo);break;case 10:var _=c.type._context,C=c.memoizedProps.value;ja(xE,_._currentValue),_._currentValue=C;break;case 13:if(_=c.memoizedState,_!==null)return _.dehydrated!==null?(ja(Hs,Hs.current&1),c.flags|=128,null):d&c.child.childLanes?ZR(o,c,d):(ja(Hs,Hs.current&1),o=dv(o,c,d),o!==null?o.sibling:null);ja(Hs,Hs.current&1);break;case 19:if(_=(d&c.childLanes)!==0,o.flags&128){if(_)return GR(o,c,d);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),ja(Hs,Hs.current),_)break;return null;case 22:case 23:return c.lanes=0,UR(o,c,d)}return dv(o,c,d)}var HR,zD,WR,YR;HR=function(o,c){for(var d=c.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};zD=function(){};WR=function(o,c,d,_){var C=o.memoizedProps;if(C!==_){o=c.stateNode,s2(Qg.current);var I=null;switch(d){case"input":C=rD(o,C),_=rD(o,_),I=[];break;case"select":C=Ys({},C,{value:void 0}),_=Ys({},_,{value:void 0}),I=[];break;case"textarea":C=oD(o,C),_=oD(o,_),I=[];break;default:typeof C.onClick!="function"&&typeof _.onClick=="function"&&(o.onclick=mE)}sD(d,_);var z;d=null;for(oe in C)if(!_.hasOwnProperty(oe)&&C.hasOwnProperty(oe)&&C[oe]!=null)if(oe==="style"){var Z=C[oe];for(z in Z)Z.hasOwnProperty(z)&&(d||(d={}),d[z]="")}else oe!=="dangerouslySetInnerHTML"&&oe!=="children"&&oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&oe!=="autoFocus"&&(C5.hasOwnProperty(oe)?I||(I=[]):(I=I||[]).push(oe,null));for(oe in _){var X=_[oe];if(Z=C!=null?C[oe]:void 0,_.hasOwnProperty(oe)&&X!==Z&&(X!=null||Z!=null))if(oe==="style")if(Z){for(z in Z)!Z.hasOwnProperty(z)||X&&X.hasOwnProperty(z)||(d||(d={}),d[z]="");for(z in X)X.hasOwnProperty(z)&&Z[z]!==X[z]&&(d||(d={}),d[z]=X[z])}else d||(I||(I=[]),I.push(oe,d)),d=X;else oe==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,Z=Z?Z.__html:void 0,X!=null&&Z!==X&&(I=I||[]).push(oe,X)):oe==="children"?typeof X!="string"&&typeof X!="number"||(I=I||[]).push(oe,""+X):oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&(C5.hasOwnProperty(oe)?(X!=null&&oe==="onScroll"&&hs("scroll",o),I||Z===X||(I=[])):(I=I||[]).push(oe,X))}d&&(I=I||[]).push("style",d);var oe=I;(c.updateQueue=oe)&&(c.flags|=4)}};YR=function(o,c,d,_){d!==_&&(c.flags|=4)};function $4(o,c){if(!vs)switch(o.tailMode){case"hidden":c=o.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var _=null;d!==null;)d.alternate!==null&&(_=d),d=d.sibling;_===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:_.sibling=null}}function ap(o){var c=o.alternate!==null&&o.alternate.child===o.child,d=0,_=0;if(c)for(var C=o.child;C!==null;)d|=C.lanes|C.childLanes,_|=C.subtreeFlags&14680064,_|=C.flags&14680064,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)d|=C.lanes|C.childLanes,_|=C.subtreeFlags,_|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=_,o.childLanes=d,c}function WU(o,c,d){var _=c.pendingProps;switch(Az(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ap(c),null;case 1:return Wh(c.type)&&gE(),ap(c),null;case 3:return _=c.stateNode,nw(),fs(Hh),fs(up),Fz(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(o===null||o.child===null)&&(CT(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Rg!==null&&(VD(Rg),Rg=null))),zD(o,c),ap(c),null;case 5:Bz(c);var C=s2(N5.current);if(d=c.type,o!==null&&c.stateNode!=null)WR(o,c,d,_,C),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!_){if(c.stateNode===null)throw Error(Yt(166));return ap(c),null}if(o=s2(Qg.current),CT(c)){_=c.stateNode,d=c.type;var I=c.memoizedProps;switch(_[Xg]=c,_[D5]=I,o=(c.mode&1)!==0,d){case"dialog":hs("cancel",_),hs("close",_);break;case"iframe":case"object":case"embed":hs("load",_);break;case"video":case"audio":for(C=0;C<o5.length;C++)hs(o5[C],_);break;case"source":hs("error",_);break;case"img":case"image":case"link":hs("error",_),hs("load",_);break;case"details":hs("toggle",_);break;case"input":R9(_,I),hs("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!I.multiple},hs("invalid",_);break;case"textarea":F9(_,I),hs("invalid",_)}sD(d,I),C=null;for(var z in I)if(I.hasOwnProperty(z)){var Z=I[z];z==="children"?typeof Z=="string"?_.textContent!==Z&&(I.suppressHydrationWarning!==!0&&bT(_.textContent,Z,o),C=["children",Z]):typeof Z=="number"&&_.textContent!==""+Z&&(I.suppressHydrationWarning!==!0&&bT(_.textContent,Z,o),C=["children",""+Z]):C5.hasOwnProperty(z)&&Z!=null&&z==="onScroll"&&hs("scroll",_)}switch(d){case"input":fT(_),B9(_,I,!0);break;case"textarea":fT(_),j9(_);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(_.onclick=mE)}_=C,c.updateQueue=_,_!==null&&(c.flags|=4)}else{z=C.nodeType===9?C:C.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=w7(d)),o==="http://www.w3.org/1999/xhtml"?d==="script"?(o=z.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof _.is=="string"?o=z.createElement(d,{is:_.is}):(o=z.createElement(d),d==="select"&&(z=o,_.multiple?z.multiple=!0:_.size&&(z.size=_.size))):o=z.createElementNS(o,d),o[Xg]=c,o[D5]=_,HR(o,c,!1,!1),c.stateNode=o;e:{switch(z=lD(d,_),d){case"dialog":hs("cancel",o),hs("close",o),C=_;break;case"iframe":case"object":case"embed":hs("load",o),C=_;break;case"video":case"audio":for(C=0;C<o5.length;C++)hs(o5[C],o);C=_;break;case"source":hs("error",o),C=_;break;case"img":case"image":case"link":hs("error",o),hs("load",o),C=_;break;case"details":hs("toggle",o),C=_;break;case"input":R9(o,_),C=rD(o,_),hs("invalid",o);break;case"option":C=_;break;case"select":o._wrapperState={wasMultiple:!!_.multiple},C=Ys({},_,{value:void 0}),hs("invalid",o);break;case"textarea":F9(o,_),C=oD(o,_),hs("invalid",o);break;default:C=_}sD(d,C),Z=C;for(I in Z)if(Z.hasOwnProperty(I)){var X=Z[I];I==="style"?S7(o,X):I==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&b7(o,X)):I==="children"?typeof X=="string"?(d!=="textarea"||X!=="")&&S5(o,X):typeof X=="number"&&S5(o,""+X):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(C5.hasOwnProperty(I)?X!=null&&I==="onScroll"&&hs("scroll",o):X!=null&&mz(o,I,X,z))}switch(d){case"input":fT(o),B9(o,_,!1);break;case"textarea":fT(o),j9(o);break;case"option":_.value!=null&&o.setAttribute("value",""+Vv(_.value));break;case"select":o.multiple=!!_.multiple,I=_.value,I!=null?H2(o,!!_.multiple,I,!1):_.defaultValue!=null&&H2(o,!!_.multiple,_.defaultValue,!0);break;default:typeof C.onClick=="function"&&(o.onclick=mE)}switch(d){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return ap(c),null;case 6:if(o&&c.stateNode!=null)YR(o,c,o.memoizedProps,_);else{if(typeof _!="string"&&c.stateNode===null)throw Error(Yt(166));if(d=s2(N5.current),s2(Qg.current),CT(c)){if(_=c.stateNode,d=c.memoizedProps,_[Xg]=c,(I=_.nodeValue!==d)&&(o=Ef,o!==null))switch(o.tag){case 3:bT(_.nodeValue,d,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&bT(_.nodeValue,d,(o.mode&1)!==0)}I&&(c.flags|=4)}else _=(d.nodeType===9?d:d.ownerDocument).createTextNode(_),_[Xg]=c,c.stateNode=_}return ap(c),null;case 13:if(fs(Hs),_=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(vs&&Tf!==null&&c.mode&1&&!(c.flags&128))pR(),tw(),c.flags|=98560,I=!1;else if(I=CT(c),_!==null&&_.dehydrated!==null){if(o===null){if(!I)throw Error(Yt(318));if(I=c.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(Yt(317));I[Xg]=c}else tw(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;ap(c),I=!1}else Rg!==null&&(VD(Rg),Rg=null),I=!0;if(!I)return c.flags&65536?c:null}return c.flags&128?(c.lanes=d,c):(_=_!==null,_!==(o!==null&&o.memoizedState!==null)&&_&&(c.child.flags|=8192,c.mode&1&&(o===null||Hs.current&1?Fu===0&&(Fu=3):Xz())),c.updateQueue!==null&&(c.flags|=4),ap(c),null);case 4:return nw(),zD(o,c),o===null&&L5(c.stateNode.containerInfo),ap(c),null;case 10:return zz(c.type._context),ap(c),null;case 17:return Wh(c.type)&&gE(),ap(c),null;case 19:if(fs(Hs),I=c.memoizedState,I===null)return ap(c),null;if(_=(c.flags&128)!==0,z=I.rendering,z===null)if(_)$4(I,!1);else{if(Fu!==0||o!==null&&o.flags&128)for(o=c.child;o!==null;){if(z=CE(o),z!==null){for(c.flags|=128,$4(I,!1),_=z.updateQueue,_!==null&&(c.updateQueue=_,c.flags|=4),c.subtreeFlags=0,_=d,d=c.child;d!==null;)I=d,o=_,I.flags&=14680066,z=I.alternate,z===null?(I.childLanes=0,I.lanes=o,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=z.childLanes,I.lanes=z.lanes,I.child=z.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=z.memoizedProps,I.memoizedState=z.memoizedState,I.updateQueue=z.updateQueue,I.type=z.type,o=z.dependencies,I.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),d=d.sibling;return ja(Hs,Hs.current&1|2),c.child}o=o.sibling}I.tail!==null&&Nl()>ow&&(c.flags|=128,_=!0,$4(I,!1),c.lanes=4194304)}else{if(!_)if(o=CE(z),o!==null){if(c.flags|=128,_=!0,d=o.updateQueue,d!==null&&(c.updateQueue=d,c.flags|=4),$4(I,!0),I.tail===null&&I.tailMode==="hidden"&&!z.alternate&&!vs)return ap(c),null}else 2*Nl()-I.renderingStartTime>ow&&d!==1073741824&&(c.flags|=128,_=!0,$4(I,!1),c.lanes=4194304);I.isBackwards?(z.sibling=c.child,c.child=z):(d=I.last,d!==null?d.sibling=z:c.child=z,I.last=z)}return I.tail!==null?(c=I.tail,I.rendering=c,I.tail=c.sibling,I.renderingStartTime=Nl(),c.sibling=null,d=Hs.current,ja(Hs,_?d&1|2:d&1),c):(ap(c),null);case 22:case 23:return $z(),_=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==_&&(c.flags|=8192),_&&c.mode&1?_f&1073741824&&(ap(c),c.subtreeFlags&6&&(c.flags|=8192)):ap(c),null;case 24:return null;case 25:return null}throw Error(Yt(156,c.tag))}function YU(o,c){switch(Az(c),c.tag){case 1:return Wh(c.type)&&gE(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return nw(),fs(Hh),fs(up),Fz(),o=c.flags,o&65536&&!(o&128)?(c.flags=o&-65537|128,c):null;case 5:return Bz(c),null;case 13:if(fs(Hs),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(Yt(340));tw()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return fs(Hs),null;case 4:return nw(),null;case 10:return zz(c.type._context),null;case 22:case 23:return $z(),null;case 24:return null;default:return null}}var ET=!1,sp=!1,KU=typeof WeakSet=="function"?WeakSet:Set,Mr=null;function Z2(o,c){var d=o.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(_){Ks(o,c,_)}else d.current=null}function ND(o,c,d){try{d()}catch(_){Ks(o,c,_)}}var MN=!1;function $U(o,c){if(vD=hE,o=J7(),kz(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var _=d.getSelection&&d.getSelection();if(_&&_.rangeCount!==0){d=_.anchorNode;var C=_.anchorOffset,I=_.focusNode;_=_.focusOffset;try{d.nodeType,I.nodeType}catch{d=null;break e}var z=0,Z=-1,X=-1,oe=0,_e=0,Se=o,Ne=null;t:for(;;){for(var $e;Se!==d||C!==0&&Se.nodeType!==3||(Z=z+C),Se!==I||_!==0&&Se.nodeType!==3||(X=z+_),Se.nodeType===3&&(z+=Se.nodeValue.length),($e=Se.firstChild)!==null;)Ne=Se,Se=$e;for(;;){if(Se===o)break t;if(Ne===d&&++oe===C&&(Z=z),Ne===I&&++_e===_&&(X=z),($e=Se.nextSibling)!==null)break;Se=Ne,Ne=Se.parentNode}Se=$e}d=Z===-1||X===-1?null:{start:Z,end:X}}else d=null}d=d||{start:0,end:0}}else d=null;for(_D={focusedElem:o,selectionRange:d},hE=!1,Mr=c;Mr!==null;)if(c=Mr,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Mr=o;else for(;Mr!==null;){c=Mr;try{var We=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var Ze=We.memoizedProps,ct=We.memoizedState,Oe=c.stateNode,Be=Oe.getSnapshotBeforeUpdate(c.elementType===c.type?Ze:Ng(c.type,Ze),ct);Oe.__reactInternalSnapshotBeforeUpdate=Be}break;case 3:var Xe=c.stateNode.containerInfo;Xe.nodeType===1?Xe.textContent="":Xe.nodeType===9&&Xe.documentElement&&Xe.removeChild(Xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Yt(163))}}catch(Et){Ks(c,c.return,Et)}if(o=c.sibling,o!==null){o.return=c.return,Mr=o;break}Mr=c.return}return We=MN,MN=!1,We}function y5(o,c,d){var _=c.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var C=_=_.next;do{if((C.tag&o)===o){var I=C.destroy;C.destroy=void 0,I!==void 0&&ND(c,d,I)}C=C.next}while(C!==_)}}function aI(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&o)===o){var _=d.create;d.destroy=_()}d=d.next}while(d!==c)}}function OD(o){var c=o.ref;if(c!==null){var d=o.stateNode;switch(o.tag){case 5:o=d;break;default:o=d}typeof c=="function"?c(o):c.current=o}}function KR(o){var c=o.alternate;c!==null&&(o.alternate=null,KR(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Xg],delete c[D5],delete c[bD],delete c[PU],delete c[DU])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function $R(o){return o.tag===5||o.tag===3||o.tag===4}function AN(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||$R(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function RD(o,c,d){var _=o.tag;if(_===5||_===6)o=o.stateNode,c?d.nodeType===8?d.parentNode.insertBefore(o,c):d.insertBefore(o,c):(d.nodeType===8?(c=d.parentNode,c.insertBefore(o,d)):(c=d,c.appendChild(o)),d=d._reactRootContainer,d!=null||c.onclick!==null||(c.onclick=mE));else if(_!==4&&(o=o.child,o!==null))for(RD(o,c,d),o=o.sibling;o!==null;)RD(o,c,d),o=o.sibling}function BD(o,c,d){var _=o.tag;if(_===5||_===6)o=o.stateNode,c?d.insertBefore(o,c):d.appendChild(o);else if(_!==4&&(o=o.child,o!==null))for(BD(o,c,d),o=o.sibling;o!==null;)BD(o,c,d),o=o.sibling}var Jc=null,Og=!1;function _v(o,c,d){for(d=d.child;d!==null;)XR(o,c,d),d=d.sibling}function XR(o,c,d){if(Jg&&typeof Jg.onCommitFiberUnmount=="function")try{Jg.onCommitFiberUnmount(JE,d)}catch{}switch(d.tag){case 5:sp||Z2(d,c);case 6:var _=Jc,C=Og;Jc=null,_v(o,c,d),Jc=_,Og=C,Jc!==null&&(Og?(o=Jc,d=d.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)):Jc.removeChild(d.stateNode));break;case 18:Jc!==null&&(Og?(o=Jc,d=d.stateNode,o.nodeType===8?_8(o.parentNode,d):o.nodeType===1&&_8(o,d),k5(o)):_8(Jc,d.stateNode));break;case 4:_=Jc,C=Og,Jc=d.stateNode.containerInfo,Og=!0,_v(o,c,d),Jc=_,Og=C;break;case 0:case 11:case 14:case 15:if(!sp&&(_=d.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){C=_=_.next;do{var I=C,z=I.destroy;I=I.tag,z!==void 0&&(I&2||I&4)&&ND(d,c,z),C=C.next}while(C!==_)}_v(o,c,d);break;case 1:if(!sp&&(Z2(d,c),_=d.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=d.memoizedProps,_.state=d.memoizedState,_.componentWillUnmount()}catch(Z){Ks(d,c,Z)}_v(o,c,d);break;case 21:_v(o,c,d);break;case 22:d.mode&1?(sp=(_=sp)||d.memoizedState!==null,_v(o,c,d),sp=_):_v(o,c,d);break;default:_v(o,c,d)}}function LN(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var d=o.stateNode;d===null&&(d=o.stateNode=new KU),c.forEach(function(_){var C=oV.bind(null,o,_);d.has(_)||(d.add(_),_.then(C,C))})}}function zg(o,c){var d=c.deletions;if(d!==null)for(var _=0;_<d.length;_++){var C=d[_];try{var I=o,z=c,Z=z;e:for(;Z!==null;){switch(Z.tag){case 5:Jc=Z.stateNode,Og=!1;break e;case 3:Jc=Z.stateNode.containerInfo,Og=!0;break e;case 4:Jc=Z.stateNode.containerInfo,Og=!0;break e}Z=Z.return}if(Jc===null)throw Error(Yt(160));XR(I,z,C),Jc=null,Og=!1;var X=C.alternate;X!==null&&(X.return=null),C.return=null}catch(oe){Ks(C,c,oe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)JR(c,o),c=c.sibling}function JR(o,c){var d=o.alternate,_=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(zg(c,o),Zg(o),_&4){try{y5(3,o,o.return),aI(3,o)}catch(Ze){Ks(o,o.return,Ze)}try{y5(5,o,o.return)}catch(Ze){Ks(o,o.return,Ze)}}break;case 1:zg(c,o),Zg(o),_&512&&d!==null&&Z2(d,d.return);break;case 5:if(zg(c,o),Zg(o),_&512&&d!==null&&Z2(d,d.return),o.flags&32){var C=o.stateNode;try{S5(C,"")}catch(Ze){Ks(o,o.return,Ze)}}if(_&4&&(C=o.stateNode,C!=null)){var I=o.memoizedProps,z=d!==null?d.memoizedProps:I,Z=o.type,X=o.updateQueue;if(o.updateQueue=null,X!==null)try{Z==="input"&&I.type==="radio"&&I.name!=null&&_7(C,I),lD(Z,z);var oe=lD(Z,I);for(z=0;z<X.length;z+=2){var _e=X[z],Se=X[z+1];_e==="style"?S7(C,Se):_e==="dangerouslySetInnerHTML"?b7(C,Se):_e==="children"?S5(C,Se):mz(C,_e,Se,oe)}switch(Z){case"input":nD(C,I);break;case"textarea":x7(C,I);break;case"select":var Ne=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!I.multiple;var $e=I.value;$e!=null?H2(C,!!I.multiple,$e,!1):Ne!==!!I.multiple&&(I.defaultValue!=null?H2(C,!!I.multiple,I.defaultValue,!0):H2(C,!!I.multiple,I.multiple?[]:"",!1))}C[D5]=I}catch(Ze){Ks(o,o.return,Ze)}}break;case 6:if(zg(c,o),Zg(o),_&4){if(o.stateNode===null)throw Error(Yt(162));C=o.stateNode,I=o.memoizedProps;try{C.nodeValue=I}catch(Ze){Ks(o,o.return,Ze)}}break;case 3:if(zg(c,o),Zg(o),_&4&&d!==null&&d.memoizedState.isDehydrated)try{k5(c.containerInfo)}catch(Ze){Ks(o,o.return,Ze)}break;case 4:zg(c,o),Zg(o);break;case 13:zg(c,o),Zg(o),C=o.child,C.flags&8192&&(I=C.memoizedState!==null,C.stateNode.isHidden=I,!I||C.alternate!==null&&C.alternate.memoizedState!==null||(Yz=Nl())),_&4&&LN(o);break;case 22:if(_e=d!==null&&d.memoizedState!==null,o.mode&1?(sp=(oe=sp)||_e,zg(c,o),sp=oe):zg(c,o),Zg(o),_&8192){if(oe=o.memoizedState!==null,(o.stateNode.isHidden=oe)&&!_e&&o.mode&1)for(Mr=o,_e=o.child;_e!==null;){for(Se=Mr=_e;Mr!==null;){switch(Ne=Mr,$e=Ne.child,Ne.tag){case 0:case 11:case 14:case 15:y5(4,Ne,Ne.return);break;case 1:Z2(Ne,Ne.return);var We=Ne.stateNode;if(typeof We.componentWillUnmount=="function"){_=Ne,d=Ne.return;try{c=_,We.props=c.memoizedProps,We.state=c.memoizedState,We.componentWillUnmount()}catch(Ze){Ks(_,d,Ze)}}break;case 5:Z2(Ne,Ne.return);break;case 22:if(Ne.memoizedState!==null){DN(Se);continue}}$e!==null?($e.return=Ne,Mr=$e):DN(Se)}_e=_e.sibling}e:for(_e=null,Se=o;;){if(Se.tag===5){if(_e===null){_e=Se;try{C=Se.stateNode,oe?(I=C.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(Z=Se.stateNode,X=Se.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null,Z.style.display=C7("display",z))}catch(Ze){Ks(o,o.return,Ze)}}}else if(Se.tag===6){if(_e===null)try{Se.stateNode.nodeValue=oe?"":Se.memoizedProps}catch(Ze){Ks(o,o.return,Ze)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===o)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===o)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===o)break e;_e===Se&&(_e=null),Se=Se.return}_e===Se&&(_e=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:zg(c,o),Zg(o),_&4&&LN(o);break;case 21:break;default:zg(c,o),Zg(o)}}function Zg(o){var c=o.flags;if(c&2){try{e:{for(var d=o.return;d!==null;){if($R(d)){var _=d;break e}d=d.return}throw Error(Yt(160))}switch(_.tag){case 5:var C=_.stateNode;_.flags&32&&(S5(C,""),_.flags&=-33);var I=AN(o);BD(o,I,C);break;case 3:case 4:var z=_.stateNode.containerInfo,Z=AN(o);RD(o,Z,z);break;default:throw Error(Yt(161))}}catch(X){Ks(o,o.return,X)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function XU(o,c,d){Mr=o,QR(o)}function QR(o,c,d){for(var _=(o.mode&1)!==0;Mr!==null;){var C=Mr,I=C.child;if(C.tag===22&&_){var z=C.memoizedState!==null||ET;if(!z){var Z=C.alternate,X=Z!==null&&Z.memoizedState!==null||sp;Z=ET;var oe=sp;if(ET=z,(sp=X)&&!oe)for(Mr=C;Mr!==null;)z=Mr,X=z.child,z.tag===22&&z.memoizedState!==null?zN(C):X!==null?(X.return=z,Mr=X):zN(C);for(;I!==null;)Mr=I,QR(I),I=I.sibling;Mr=C,ET=Z,sp=oe}PN(o)}else C.subtreeFlags&8772&&I!==null?(I.return=C,Mr=I):PN(o)}}function PN(o){for(;Mr!==null;){var c=Mr;if(c.flags&8772){var d=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:sp||aI(5,c);break;case 1:var _=c.stateNode;if(c.flags&4&&!sp)if(d===null)_.componentDidMount();else{var C=c.elementType===c.type?d.memoizedProps:Ng(c.type,d.memoizedProps);_.componentDidUpdate(C,d.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var I=c.updateQueue;I!==null&&mN(c,I,_);break;case 3:var z=c.updateQueue;if(z!==null){if(d=null,c.child!==null)switch(c.child.tag){case 5:d=c.child.stateNode;break;case 1:d=c.child.stateNode}mN(c,z,d)}break;case 5:var Z=c.stateNode;if(d===null&&c.flags&4){d=Z;var X=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&d.focus();break;case"img":X.src&&(d.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var oe=c.alternate;if(oe!==null){var _e=oe.memoizedState;if(_e!==null){var Se=_e.dehydrated;Se!==null&&k5(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Yt(163))}sp||c.flags&512&&OD(c)}catch(Ne){Ks(c,c.return,Ne)}}if(c===o){Mr=null;break}if(d=c.sibling,d!==null){d.return=c.return,Mr=d;break}Mr=c.return}}function DN(o){for(;Mr!==null;){var c=Mr;if(c===o){Mr=null;break}var d=c.sibling;if(d!==null){d.return=c.return,Mr=d;break}Mr=c.return}}function zN(o){for(;Mr!==null;){var c=Mr;try{switch(c.tag){case 0:case 11:case 15:var d=c.return;try{aI(4,c)}catch(X){Ks(c,d,X)}break;case 1:var _=c.stateNode;if(typeof _.componentDidMount=="function"){var C=c.return;try{_.componentDidMount()}catch(X){Ks(c,C,X)}}var I=c.return;try{OD(c)}catch(X){Ks(c,I,X)}break;case 5:var z=c.return;try{OD(c)}catch(X){Ks(c,z,X)}}}catch(X){Ks(c,c.return,X)}if(c===o){Mr=null;break}var Z=c.sibling;if(Z!==null){Z.return=c.return,Mr=Z;break}Mr=c.return}}var JU=Math.ceil,EE=gv.ReactCurrentDispatcher,Hz=gv.ReactCurrentOwner,Rf=gv.ReactCurrentBatchConfig,To=0,qu=null,Ol=null,ep=0,_f=0,G2=Gv(0),Fu=0,F5=null,v2=0,sI=0,Wz=0,v5=null,Zh=null,Yz=0,ow=1/0,tv=null,IE=!1,FD=null,Bv=null,IT=!1,Mv=null,kE=0,_5=0,jD=null,HT=-1,WT=0;function Oh(){return To&6?Nl():HT!==-1?HT:HT=Nl()}function Fv(o){return o.mode&1?To&2&&ep!==0?ep&-ep:NU.transition!==null?(WT===0&&(WT=O7()),WT):(o=ma,o!==0||(o=window.event,o=o===void 0?16:q7(o.type)),o):1}function Fg(o,c,d,_){if(50<_5)throw _5=0,jD=null,Error(Yt(185));W5(o,d,_),(!(To&2)||o!==qu)&&(o===qu&&(!(To&2)&&(sI|=d),Fu===4&&Ev(o,ep)),Yh(o,_),d===1&&To===0&&!(c.mode&1)&&(ow=Nl()+500,nI&&Hv()))}function Yh(o,c){var d=o.callbackNode;Nj(o,c);var _=pE(o,o===qu?ep:0);if(_===0)d!==null&&q9(d),o.callbackNode=null,o.callbackPriority=0;else if(c=_&-_,o.callbackPriority!==c){if(d!=null&&q9(d),c===1)o.tag===0?zU(NN.bind(null,o)):lR(NN.bind(null,o)),AU(function(){!(To&6)&&Hv()}),d=null;else{switch(R7(_)){case 1:d=xz;break;case 4:d=z7;break;case 16:d=cE;break;case 536870912:d=N7;break;default:d=cE}d=sB(d,eB.bind(null,o))}o.callbackPriority=c,o.callbackNode=d}}function eB(o,c){if(HT=-1,WT=0,To&6)throw Error(Yt(327));var d=o.callbackNode;if(X2()&&o.callbackNode!==d)return null;var _=pE(o,o===qu?ep:0);if(_===0)return null;if(_&30||_&o.expiredLanes||c)c=ME(o,_);else{c=_;var C=To;To|=2;var I=rB();(qu!==o||ep!==c)&&(tv=null,ow=Nl()+500,p2(o,c));do try{tV();break}catch(Z){tB(o,Z)}while(1);Dz(),EE.current=I,To=C,Ol!==null?c=0:(qu=null,ep=0,c=Fu)}if(c!==0){if(c===2&&(C=dD(o),C!==0&&(_=C,c=UD(o,C))),c===1)throw d=F5,p2(o,0),Ev(o,_),Yh(o,Nl()),d;if(c===6)Ev(o,_);else{if(C=o.current.alternate,!(_&30)&&!QU(C)&&(c=ME(o,_),c===2&&(I=dD(o),I!==0&&(_=I,c=UD(o,I))),c===1))throw d=F5,p2(o,0),Ev(o,_),Yh(o,Nl()),d;switch(o.finishedWork=C,o.finishedLanes=_,c){case 0:case 1:throw Error(Yt(345));case 2:Qx(o,Zh,tv);break;case 3:if(Ev(o,_),(_&130023424)===_&&(c=Yz+500-Nl(),10<c)){if(pE(o,0)!==0)break;if(C=o.suspendedLanes,(C&_)!==_){Oh(),o.pingedLanes|=o.suspendedLanes&C;break}o.timeoutHandle=wD(Qx.bind(null,o,Zh,tv),c);break}Qx(o,Zh,tv);break;case 4:if(Ev(o,_),(_&4194240)===_)break;for(c=o.eventTimes,C=-1;0<_;){var z=31-Bg(_);I=1<<z,z=c[z],z>C&&(C=z),_&=~I}if(_=C,_=Nl()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*JU(_/1960))-_,10<_){o.timeoutHandle=wD(Qx.bind(null,o,Zh,tv),_);break}Qx(o,Zh,tv);break;case 5:Qx(o,Zh,tv);break;default:throw Error(Yt(329))}}}return Yh(o,Nl()),o.callbackNode===d?eB.bind(null,o):null}function UD(o,c){var d=v5;return o.current.memoizedState.isDehydrated&&(p2(o,c).flags|=256),o=ME(o,c),o!==2&&(c=Zh,Zh=d,c!==null&&VD(c)),o}function VD(o){Zh===null?Zh=o:Zh.push.apply(Zh,o)}function QU(o){for(var c=o;;){if(c.flags&16384){var d=c.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var _=0;_<d.length;_++){var C=d[_],I=C.getSnapshot;C=C.value;try{if(!jg(I(),C))return!1}catch{return!1}}}if(d=c.child,c.subtreeFlags&16384&&d!==null)d.return=c,c=d;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ev(o,c){for(c&=~Wz,c&=~sI,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var d=31-Bg(c),_=1<<d;o[d]=-1,c&=~_}}function NN(o){if(To&6)throw Error(Yt(327));X2();var c=pE(o,0);if(!(c&1))return Yh(o,Nl()),null;var d=ME(o,c);if(o.tag!==0&&d===2){var _=dD(o);_!==0&&(c=_,d=UD(o,_))}if(d===1)throw d=F5,p2(o,0),Ev(o,c),Yh(o,Nl()),d;if(d===6)throw Error(Yt(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Qx(o,Zh,tv),Yh(o,Nl()),null}function Kz(o,c){var d=To;To|=1;try{return o(c)}finally{To=d,To===0&&(ow=Nl()+500,nI&&Hv())}}function _2(o){Mv!==null&&Mv.tag===0&&!(To&6)&&X2();var c=To;To|=1;var d=Rf.transition,_=ma;try{if(Rf.transition=null,ma=1,o)return o()}finally{ma=_,Rf.transition=d,To=c,!(To&6)&&Hv()}}function $z(){_f=G2.current,fs(G2)}function p2(o,c){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;if(d!==-1&&(o.timeoutHandle=-1,MU(d)),Ol!==null)for(d=Ol.return;d!==null;){var _=d;switch(Az(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&gE();break;case 3:nw(),fs(Hh),fs(up),Fz();break;case 5:Bz(_);break;case 4:nw();break;case 13:fs(Hs);break;case 19:fs(Hs);break;case 10:zz(_.type._context);break;case 22:case 23:$z()}d=d.return}if(qu=o,Ol=o=jv(o.current,null),ep=_f=c,Fu=0,F5=null,Wz=sI=v2=0,Zh=v5=null,a2!==null){for(c=0;c<a2.length;c++)if(d=a2[c],_=d.interleaved,_!==null){d.interleaved=null;var C=_.next,I=d.pending;if(I!==null){var z=I.next;I.next=C,_.next=z}d.pending=_}a2=null}return o}function tB(o,c){do{var d=Ol;try{if(Dz(),qT.current=TE,SE){for(var _=Ws.memoizedState;_!==null;){var C=_.queue;C!==null&&(C.pending=null),_=_.next}SE=!1}if(y2=0,Uu=Bu=Ws=null,g5=!1,O5=0,Hz.current=null,d===null||d.return===null){Fu=1,F5=c,Ol=null;break}e:{var I=o,z=d.return,Z=d,X=c;if(c=ep,Z.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var oe=X,_e=Z,Se=_e.tag;if(!(_e.mode&1)&&(Se===0||Se===11||Se===15)){var Ne=_e.alternate;Ne?(_e.updateQueue=Ne.updateQueue,_e.memoizedState=Ne.memoizedState,_e.lanes=Ne.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var $e=bN(z);if($e!==null){$e.flags&=-257,CN($e,z,Z,I,c),$e.mode&1&&wN(I,oe,c),c=$e,X=oe;var We=c.updateQueue;if(We===null){var Ze=new Set;Ze.add(X),c.updateQueue=Ze}else We.add(X);break e}else{if(!(c&1)){wN(I,oe,c),Xz();break e}X=Error(Yt(426))}}else if(vs&&Z.mode&1){var ct=bN(z);if(ct!==null){!(ct.flags&65536)&&(ct.flags|=256),CN(ct,z,Z,I,c),Lz(iw(X,Z));break e}}I=X=iw(X,Z),Fu!==4&&(Fu=2),v5===null?v5=[I]:v5.push(I),I=z;do{switch(I.tag){case 3:I.flags|=65536,c&=-c,I.lanes|=c;var Oe=BR(I,X,c);fN(I,Oe);break e;case 1:Z=X;var Be=I.type,Xe=I.stateNode;if(!(I.flags&128)&&(typeof Be.getDerivedStateFromError=="function"||Xe!==null&&typeof Xe.componentDidCatch=="function"&&(Bv===null||!Bv.has(Xe)))){I.flags|=65536,c&=-c,I.lanes|=c;var Et=FR(I,Z,c);fN(I,Et);break e}}I=I.return}while(I!==null)}iB(d)}catch(Ht){c=Ht,Ol===d&&d!==null&&(Ol=d=d.return);continue}break}while(1)}function rB(){var o=EE.current;return EE.current=TE,o===null?TE:o}function Xz(){(Fu===0||Fu===3||Fu===2)&&(Fu=4),qu===null||!(v2&268435455)&&!(sI&268435455)||Ev(qu,ep)}function ME(o,c){var d=To;To|=2;var _=rB();(qu!==o||ep!==c)&&(tv=null,p2(o,c));do try{eV();break}catch(C){tB(o,C)}while(1);if(Dz(),To=d,EE.current=_,Ol!==null)throw Error(Yt(261));return qu=null,ep=0,Fu}function eV(){for(;Ol!==null;)nB(Ol)}function tV(){for(;Ol!==null&&!Ej();)nB(Ol)}function nB(o){var c=aB(o.alternate,o,_f);o.memoizedProps=o.pendingProps,c===null?iB(o):Ol=c,Hz.current=null}function iB(o){var c=o;do{var d=c.alternate;if(o=c.return,c.flags&32768){if(d=YU(d,c),d!==null){d.flags&=32767,Ol=d;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Fu=6,Ol=null;return}}else if(d=WU(d,c,_f),d!==null){Ol=d;return}if(c=c.sibling,c!==null){Ol=c;return}Ol=c=o}while(c!==null);Fu===0&&(Fu=5)}function Qx(o,c,d){var _=ma,C=Rf.transition;try{Rf.transition=null,ma=1,rV(o,c,d,_)}finally{Rf.transition=C,ma=_}return null}function rV(o,c,d,_){do X2();while(Mv!==null);if(To&6)throw Error(Yt(327));d=o.finishedWork;var C=o.finishedLanes;if(d===null)return null;if(o.finishedWork=null,o.finishedLanes=0,d===o.current)throw Error(Yt(177));o.callbackNode=null,o.callbackPriority=0;var I=d.lanes|d.childLanes;if(Oj(o,I),o===qu&&(Ol=qu=null,ep=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||IT||(IT=!0,sB(cE,function(){return X2(),null})),I=(d.flags&15990)!==0,d.subtreeFlags&15990||I){I=Rf.transition,Rf.transition=null;var z=ma;ma=1;var Z=To;To|=4,Hz.current=null,$U(o,d),JR(d,o),bU(_D),hE=!!vD,_D=vD=null,o.current=d,XU(d),Ij(),To=Z,ma=z,Rf.transition=I}else o.current=d;if(IT&&(IT=!1,Mv=o,kE=C),I=o.pendingLanes,I===0&&(Bv=null),Aj(d.stateNode),Yh(o,Nl()),c!==null)for(_=o.onRecoverableError,d=0;d<c.length;d++)C=c[d],_(C.value,{componentStack:C.stack,digest:C.digest});if(IE)throw IE=!1,o=FD,FD=null,o;return kE&1&&o.tag!==0&&X2(),I=o.pendingLanes,I&1?o===jD?_5++:(_5=0,jD=o):_5=0,Hv(),null}function X2(){if(Mv!==null){var o=R7(kE),c=Rf.transition,d=ma;try{if(Rf.transition=null,ma=16>o?16:o,Mv===null)var _=!1;else{if(o=Mv,Mv=null,kE=0,To&6)throw Error(Yt(331));var C=To;for(To|=4,Mr=o.current;Mr!==null;){var I=Mr,z=I.child;if(Mr.flags&16){var Z=I.deletions;if(Z!==null){for(var X=0;X<Z.length;X++){var oe=Z[X];for(Mr=oe;Mr!==null;){var _e=Mr;switch(_e.tag){case 0:case 11:case 15:y5(8,_e,I)}var Se=_e.child;if(Se!==null)Se.return=_e,Mr=Se;else for(;Mr!==null;){_e=Mr;var Ne=_e.sibling,$e=_e.return;if(KR(_e),_e===oe){Mr=null;break}if(Ne!==null){Ne.return=$e,Mr=Ne;break}Mr=$e}}}var We=I.alternate;if(We!==null){var Ze=We.child;if(Ze!==null){We.child=null;do{var ct=Ze.sibling;Ze.sibling=null,Ze=ct}while(Ze!==null)}}Mr=I}}if(I.subtreeFlags&2064&&z!==null)z.return=I,Mr=z;else e:for(;Mr!==null;){if(I=Mr,I.flags&2048)switch(I.tag){case 0:case 11:case 15:y5(9,I,I.return)}var Oe=I.sibling;if(Oe!==null){Oe.return=I.return,Mr=Oe;break e}Mr=I.return}}var Be=o.current;for(Mr=Be;Mr!==null;){z=Mr;var Xe=z.child;if(z.subtreeFlags&2064&&Xe!==null)Xe.return=z,Mr=Xe;else e:for(z=Be;Mr!==null;){if(Z=Mr,Z.flags&2048)try{switch(Z.tag){case 0:case 11:case 15:aI(9,Z)}}catch(Ht){Ks(Z,Z.return,Ht)}if(Z===z){Mr=null;break e}var Et=Z.sibling;if(Et!==null){Et.return=Z.return,Mr=Et;break e}Mr=Z.return}}if(To=C,Hv(),Jg&&typeof Jg.onPostCommitFiberRoot=="function")try{Jg.onPostCommitFiberRoot(JE,o)}catch{}_=!0}return _}finally{ma=d,Rf.transition=c}}return!1}function ON(o,c,d){c=iw(d,c),c=BR(o,c,1),o=Rv(o,c,1),c=Oh(),o!==null&&(W5(o,1,c),Yh(o,c))}function Ks(o,c,d){if(o.tag===3)ON(o,o,d);else for(;c!==null;){if(c.tag===3){ON(c,o,d);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Bv===null||!Bv.has(_))){o=iw(d,o),o=FR(c,o,1),c=Rv(c,o,1),o=Oh(),c!==null&&(W5(c,1,o),Yh(c,o));break}}c=c.return}}function nV(o,c,d){var _=o.pingCache;_!==null&&_.delete(c),c=Oh(),o.pingedLanes|=o.suspendedLanes&d,qu===o&&(ep&d)===d&&(Fu===4||Fu===3&&(ep&130023424)===ep&&500>Nl()-Yz?p2(o,0):Wz|=d),Yh(o,c)}function oB(o,c){c===0&&(o.mode&1?(c=yT,yT<<=1,!(yT&130023424)&&(yT=4194304)):c=1);var d=Oh();o=hv(o,c),o!==null&&(W5(o,c,d),Yh(o,d))}function iV(o){var c=o.memoizedState,d=0;c!==null&&(d=c.retryLane),oB(o,d)}function oV(o,c){var d=0;switch(o.tag){case 13:var _=o.stateNode,C=o.memoizedState;C!==null&&(d=C.retryLane);break;case 19:_=o.stateNode;break;default:throw Error(Yt(314))}_!==null&&_.delete(c),oB(o,d)}var aB;aB=function(o,c,d){if(o!==null)if(o.memoizedProps!==c.pendingProps||Hh.current)Gh=!0;else{if(!(o.lanes&d)&&!(c.flags&128))return Gh=!1,HU(o,c,d);Gh=!!(o.flags&131072)}else Gh=!1,vs&&c.flags&1048576&&uR(c,_E,c.index);switch(c.lanes=0,c.tag){case 2:var _=c.type;GT(o,c),o=c.pendingProps;var C=ew(c,up.current);$2(c,d),C=Uz(null,c,_,o,C,d);var I=Vz();return c.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Wh(_)?(I=!0,yE(c)):I=!1,c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,Oz(c),C.updater=iI,c.stateNode=C,C._reactInternals=c,kD(c,_,o,d),c=LD(null,c,_,!0,I,d)):(c.tag=0,vs&&I&&Mz(c),zh(null,c,C,d),c=c.child),c;case 16:_=c.elementType;e:{switch(GT(o,c),o=c.pendingProps,C=_._init,_=C(_._payload),c.type=_,C=c.tag=sV(_),o=Ng(_,o),C){case 0:c=AD(null,c,_,o,d);break e;case 1:c=EN(null,c,_,o,d);break e;case 11:c=SN(null,c,_,o,d);break e;case 14:c=TN(null,c,_,Ng(_.type,o),d);break e}throw Error(Yt(306,_,""))}return c;case 0:return _=c.type,C=c.pendingProps,C=c.elementType===_?C:Ng(_,C),AD(o,c,_,C,d);case 1:return _=c.type,C=c.pendingProps,C=c.elementType===_?C:Ng(_,C),EN(o,c,_,C,d);case 3:e:{if(qR(c),o===null)throw Error(Yt(387));_=c.pendingProps,I=c.memoizedState,C=I.element,dR(o,c),bE(c,_,null,d);var z=c.memoizedState;if(_=z.element,I.isDehydrated)if(I={element:_,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},c.updateQueue.baseState=I,c.memoizedState=I,c.flags&256){C=iw(Error(Yt(423)),c),c=IN(o,c,_,d,C);break e}else if(_!==C){C=iw(Error(Yt(424)),c),c=IN(o,c,_,d,C);break e}else for(Tf=Ov(c.stateNode.containerInfo.firstChild),Ef=c,vs=!0,Rg=null,d=yR(c,null,_,d),c.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(tw(),_===C){c=dv(o,c,d);break e}zh(o,c,_,d)}c=c.child}return c;case 5:return vR(c),o===null&&TD(c),_=c.type,C=c.pendingProps,I=o!==null?o.memoizedProps:null,z=C.children,xD(_,C)?z=null:I!==null&&xD(_,I)&&(c.flags|=32),VR(o,c),zh(o,c,z,d),c.child;case 6:return o===null&&TD(c),null;case 13:return ZR(o,c,d);case 4:return Rz(c,c.stateNode.containerInfo),_=c.pendingProps,o===null?c.child=rw(c,null,_,d):zh(o,c,_,d),c.child;case 11:return _=c.type,C=c.pendingProps,C=c.elementType===_?C:Ng(_,C),SN(o,c,_,C,d);case 7:return zh(o,c,c.pendingProps,d),c.child;case 8:return zh(o,c,c.pendingProps.children,d),c.child;case 12:return zh(o,c,c.pendingProps.children,d),c.child;case 10:e:{if(_=c.type._context,C=c.pendingProps,I=c.memoizedProps,z=C.value,ja(xE,_._currentValue),_._currentValue=z,I!==null)if(jg(I.value,z)){if(I.children===C.children&&!Hh.current){c=dv(o,c,d);break e}}else for(I=c.child,I!==null&&(I.return=c);I!==null;){var Z=I.dependencies;if(Z!==null){z=I.child;for(var X=Z.firstContext;X!==null;){if(X.context===_){if(I.tag===1){X=av(-1,d&-d),X.tag=2;var oe=I.updateQueue;if(oe!==null){oe=oe.shared;var _e=oe.pending;_e===null?X.next=X:(X.next=_e.next,_e.next=X),oe.pending=X}}I.lanes|=d,X=I.alternate,X!==null&&(X.lanes|=d),ED(I.return,d,c),Z.lanes|=d;break}X=X.next}}else if(I.tag===10)z=I.type===c.type?null:I.child;else if(I.tag===18){if(z=I.return,z===null)throw Error(Yt(341));z.lanes|=d,Z=z.alternate,Z!==null&&(Z.lanes|=d),ED(z,d,c),z=I.sibling}else z=I.child;if(z!==null)z.return=I;else for(z=I;z!==null;){if(z===c){z=null;break}if(I=z.sibling,I!==null){I.return=z.return,z=I;break}z=z.return}I=z}zh(o,c,C.children,d),c=c.child}return c;case 9:return C=c.type,_=c.pendingProps.children,$2(c,d),C=Bf(C),_=_(C),c.flags|=1,zh(o,c,_,d),c.child;case 14:return _=c.type,C=Ng(_,c.pendingProps),C=Ng(_.type,C),TN(o,c,_,C,d);case 15:return jR(o,c,c.type,c.pendingProps,d);case 17:return _=c.type,C=c.pendingProps,C=c.elementType===_?C:Ng(_,C),GT(o,c),c.tag=1,Wh(_)?(o=!0,yE(c)):o=!1,$2(c,d),mR(c,_,C),kD(c,_,C,d),LD(null,c,_,!0,o,d);case 19:return GR(o,c,d);case 22:return UR(o,c,d)}throw Error(Yt(156,c.tag))};function sB(o,c){return D7(o,c)}function aV(o,c,d,_){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Of(o,c,d,_){return new aV(o,c,d,_)}function Jz(o){return o=o.prototype,!(!o||!o.isReactComponent)}function sV(o){if(typeof o=="function")return Jz(o)?1:0;if(o!=null){if(o=o.$$typeof,o===yz)return 11;if(o===vz)return 14}return 2}function jv(o,c){var d=o.alternate;return d===null?(d=Of(o.tag,c,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=c,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&14680064,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,c=o.dependencies,d.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d}function YT(o,c,d,_,C,I){var z=2;if(_=o,typeof o=="function")Jz(o)&&(z=1);else if(typeof o=="string")z=5;else e:switch(o){case N2:return h2(d.children,C,I,c);case gz:z=8,C|=8;break;case J8:return o=Of(12,d,c,C|2),o.elementType=J8,o.lanes=I,o;case Q8:return o=Of(13,d,c,C),o.elementType=Q8,o.lanes=I,o;case eD:return o=Of(19,d,c,C),o.elementType=eD,o.lanes=I,o;case g7:return lI(d,C,I,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case f7:z=10;break e;case m7:z=9;break e;case yz:z=11;break e;case vz:z=14;break e;case Cv:z=16,_=null;break e}throw Error(Yt(130,o==null?o:typeof o,""))}return c=Of(z,d,c,C),c.elementType=o,c.type=_,c.lanes=I,c}function h2(o,c,d,_){return o=Of(7,o,_,c),o.lanes=d,o}function lI(o,c,d,_){return o=Of(22,o,_,c),o.elementType=g7,o.lanes=d,o.stateNode={isHidden:!1},o}function I8(o,c,d){return o=Of(6,o,null,c),o.lanes=d,o}function k8(o,c,d){return c=Of(4,o.children!==null?o.children:[],o.key,c),c.lanes=d,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function lV(o,c,d,_,C){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=l8(0),this.expirationTimes=l8(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=l8(0),this.identifierPrefix=_,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function Qz(o,c,d,_,C,I,z,Z,X){return o=new lV(o,c,d,Z,X),c===1?(c=1,I===!0&&(c|=8)):c=0,I=Of(3,null,null,c),o.current=I,I.stateNode=o,I.memoizedState={element:_,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oz(I),o}function uV(o,c,d){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z2,key:_==null?null:""+_,children:o,containerInfo:c,implementation:d}}function lB(o){if(!o)return qv;o=o._reactInternals;e:{if(b2(o)!==o||o.tag!==1)throw Error(Yt(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Wh(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(Yt(171))}if(o.tag===1){var d=o.type;if(Wh(d))return sR(o,d,c)}return c}function uB(o,c,d,_,C,I,z,Z,X){return o=Qz(d,_,!0,o,C,I,z,Z,X),o.context=lB(null),d=o.current,_=Oh(),C=Fv(d),I=av(_,C),I.callback=c??null,Rv(d,I,C),o.current.lanes=C,W5(o,C,_),Yh(o,_),o}function uI(o,c,d,_){var C=c.current,I=Oh(),z=Fv(C);return d=lB(d),c.context===null?c.context=d:c.pendingContext=d,c=av(I,z),c.payload={element:o},_=_===void 0?null:_,_!==null&&(c.callback=_),o=Rv(C,c,z),o!==null&&(Fg(o,C,z,I),VT(o,C,z)),z}function AE(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function RN(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<c?d:c}}function e9(o,c){RN(o,c),(o=o.alternate)&&RN(o,c)}function cV(){return null}var cB=typeof reportError=="function"?reportError:function(o){console.error(o)};function t9(o){this._internalRoot=o}cI.prototype.render=t9.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(Yt(409));uI(o,c,null,null)};cI.prototype.unmount=t9.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;_2(function(){uI(null,o,null,null)}),c[pv]=null}};function cI(o){this._internalRoot=o}cI.prototype.unstable_scheduleHydration=function(o){if(o){var c=j7();o={blockedOn:null,target:o,priority:c};for(var d=0;d<Tv.length&&c!==0&&c<Tv[d].priority;d++);Tv.splice(d,0,o),d===0&&V7(o)}};function r9(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function pI(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function BN(){}function pV(o,c,d,_,C){if(C){if(typeof _=="function"){var I=_;_=function(){var oe=AE(z);I.call(oe)}}var z=uB(c,_,o,0,null,!1,!1,"",BN);return o._reactRootContainer=z,o[pv]=z.current,L5(o.nodeType===8?o.parentNode:o),_2(),z}for(;C=o.lastChild;)o.removeChild(C);if(typeof _=="function"){var Z=_;_=function(){var oe=AE(X);Z.call(oe)}}var X=Qz(o,0,!1,null,null,!1,!1,"",BN);return o._reactRootContainer=X,o[pv]=X.current,L5(o.nodeType===8?o.parentNode:o),_2(function(){uI(c,X,d,_)}),X}function hI(o,c,d,_,C){var I=d._reactRootContainer;if(I){var z=I;if(typeof C=="function"){var Z=C;C=function(){var X=AE(z);Z.call(X)}}uI(c,z,o,C)}else z=pV(d,c,o,C,_);return AE(z)}B7=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var d=i5(c.pendingLanes);d!==0&&(wz(c,d|1),Yh(c,Nl()),!(To&6)&&(ow=Nl()+500,Hv()))}break;case 13:_2(function(){var _=hv(o,1);if(_!==null){var C=Oh();Fg(_,o,1,C)}}),e9(o,1)}};bz=function(o){if(o.tag===13){var c=hv(o,134217728);if(c!==null){var d=Oh();Fg(c,o,134217728,d)}e9(o,134217728)}};F7=function(o){if(o.tag===13){var c=Fv(o),d=hv(o,c);if(d!==null){var _=Oh();Fg(d,o,c,_)}e9(o,c)}};j7=function(){return ma};U7=function(o,c){var d=ma;try{return ma=o,c()}finally{ma=d}};cD=function(o,c,d){switch(c){case"input":if(nD(o,d),c=d.name,d.type==="radio"&&c!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<d.length;c++){var _=d[c];if(_!==o&&_.form===o.form){var C=rI(_);if(!C)throw Error(Yt(90));v7(_),nD(_,C)}}}break;case"textarea":x7(o,d);break;case"select":c=d.value,c!=null&&H2(o,!!d.multiple,c,!1)}};I7=Kz;k7=_2;var hV={usingClientEntryPoint:!1,Events:[K5,F2,rI,T7,E7,Kz]},X4={findFiberByHostInstance:o2,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},dV={bundleType:X4.bundleType,version:X4.version,rendererPackageName:X4.rendererPackageName,rendererConfig:X4.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gv.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=L7(o),o===null?null:o.stateNode},findFiberByHostInstance:X4.findFiberByHostInstance||cV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kT.isDisabled&&kT.supportsFiber)try{JE=kT.inject(dV),Jg=kT}catch{}}kf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hV;kf.createPortal=function(o,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!r9(c))throw Error(Yt(200));return uV(o,c,null,d)};kf.createRoot=function(o,c){if(!r9(o))throw Error(Yt(299));var d=!1,_="",C=cB;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=Qz(o,1,!1,null,null,d,!1,_,C),o[pv]=c.current,L5(o.nodeType===8?o.parentNode:o),new t9(c)};kf.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(Yt(188)):(o=Object.keys(o).join(","),Error(Yt(268,o)));return o=L7(c),o=o===null?null:o.stateNode,o};kf.flushSync=function(o){return _2(o)};kf.hydrate=function(o,c,d){if(!pI(c))throw Error(Yt(200));return hI(null,o,c,!0,d)};kf.hydrateRoot=function(o,c,d){if(!r9(o))throw Error(Yt(405));var _=d!=null&&d.hydratedSources||null,C=!1,I="",z=cB;if(d!=null&&(d.unstable_strictMode===!0&&(C=!0),d.identifierPrefix!==void 0&&(I=d.identifierPrefix),d.onRecoverableError!==void 0&&(z=d.onRecoverableError)),c=uB(c,null,o,1,d??null,C,!1,I,z),o[pv]=c.current,L5(o),_)for(o=0;o<_.length;o++)d=_[o],C=d._getVersion,C=C(d._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[d,C]:c.mutableSourceEagerHydrationData.push(d,C);return new cI(c)};kf.render=function(o,c,d){if(!pI(c))throw Error(Yt(200));return hI(null,o,c,!1,d)};kf.unmountComponentAtNode=function(o){if(!pI(o))throw Error(Yt(40));return o._reactRootContainer?(_2(function(){hI(null,null,o,!1,function(){o._reactRootContainer=null,o[pv]=null})}),!0):!1};kf.unstable_batchedUpdates=Kz;kf.unstable_renderSubtreeIntoContainer=function(o,c,d,_){if(!pI(d))throw Error(Yt(200));if(o==null||o._reactInternals===void 0)throw Error(Yt(38));return hI(o,c,d,!1,_)};kf.version="18.2.0-next-9e3b772b8-20220608";(function(o){function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(d){console.error(d)}}c(),o.exports=kf})(cj);var FN=aE;K8.createRoot=FN.createRoot,K8.hydrateRoot=FN.hydrateRoot;/**
 * @remix-run/router v1.3.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function j5(){return j5=Object.assign?Object.assign.bind():function(o){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(o[_]=d[_])}return o},j5.apply(this,arguments)}var Av;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Av||(Av={}));const jN="popstate";function fV(o){o===void 0&&(o={});function c(_,C){let{pathname:I,search:z,hash:Z}=_.location;return qD("",{pathname:I,search:z,hash:Z},C.state&&C.state.usr||null,C.state&&C.state.key||"default")}function d(_,C){return typeof C=="string"?C:LE(C)}return gV(c,d,null,o)}function ju(o,c){if(o===!1||o===null||typeof o>"u")throw new Error(c)}function mV(){return Math.random().toString(36).substr(2,8)}function UN(o,c){return{usr:o.state,key:o.key,idx:c}}function qD(o,c,d,_){return d===void 0&&(d=null),j5({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof c=="string"?pw(c):c,{state:d,key:c&&c.key||_||mV()})}function LE(o){let{pathname:c="/",search:d="",hash:_=""}=o;return d&&d!=="?"&&(c+=d.charAt(0)==="?"?d:"?"+d),_&&_!=="#"&&(c+=_.charAt(0)==="#"?_:"#"+_),c}function pw(o){let c={};if(o){let d=o.indexOf("#");d>=0&&(c.hash=o.substr(d),o=o.substr(0,d));let _=o.indexOf("?");_>=0&&(c.search=o.substr(_),o=o.substr(0,_)),o&&(c.pathname=o)}return c}function gV(o,c,d,_){_===void 0&&(_={});let{window:C=document.defaultView,v5Compat:I=!1}=_,z=C.history,Z=Av.Pop,X=null,oe=_e();oe==null&&(oe=0,z.replaceState(j5({},z.state,{idx:oe}),""));function _e(){return(z.state||{idx:null}).idx}function Se(){Z=Av.Pop;let ct=_e(),Oe=ct==null?null:ct-oe;oe=ct,X&&X({action:Z,location:Ze.location,delta:Oe})}function Ne(ct,Oe){Z=Av.Push;let Be=qD(Ze.location,ct,Oe);d&&d(Be,ct),oe=_e()+1;let Xe=UN(Be,oe),Et=Ze.createHref(Be);try{z.pushState(Xe,"",Et)}catch{C.location.assign(Et)}I&&X&&X({action:Z,location:Ze.location,delta:1})}function $e(ct,Oe){Z=Av.Replace;let Be=qD(Ze.location,ct,Oe);d&&d(Be,ct),oe=_e();let Xe=UN(Be,oe),Et=Ze.createHref(Be);z.replaceState(Xe,"",Et),I&&X&&X({action:Z,location:Ze.location,delta:0})}function We(ct){let Oe=C.location.origin!=="null"?C.location.origin:C.location.href,Be=typeof ct=="string"?ct:LE(ct);return ju(Oe,"No window.location.(origin|href) available to create URL for href: "+Be),new URL(Be,Oe)}let Ze={get action(){return Z},get location(){return o(C,z)},listen(ct){if(X)throw new Error("A history only accepts one active listener");return C.addEventListener(jN,Se),X=ct,()=>{C.removeEventListener(jN,Se),X=null}},createHref(ct){return c(C,ct)},createURL:We,encodeLocation(ct){let Oe=We(ct);return{pathname:Oe.pathname,search:Oe.search,hash:Oe.hash}},push:Ne,replace:$e,go(ct){return z.go(ct)}};return Ze}var VN;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(VN||(VN={}));function yV(o,c,d){d===void 0&&(d="/");let _=typeof c=="string"?pw(c):c,C=dB(_.pathname||"/",d);if(C==null)return null;let I=pB(o);vV(I);let z=null;for(let Z=0;z==null&&Z<I.length;++Z)z=IV(I[Z],AV(C));return z}function pB(o,c,d,_){c===void 0&&(c=[]),d===void 0&&(d=[]),_===void 0&&(_="");let C=(I,z,Z)=>{let X={relativePath:Z===void 0?I.path||"":Z,caseSensitive:I.caseSensitive===!0,childrenIndex:z,route:I};X.relativePath.startsWith("/")&&(ju(X.relativePath.startsWith(_),'Absolute route path "'+X.relativePath+'" nested under path '+('"'+_+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),X.relativePath=X.relativePath.slice(_.length));let oe=Uv([_,X.relativePath]),_e=d.concat(X);I.children&&I.children.length>0&&(ju(I.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+oe+'".')),pB(I.children,c,_e,oe)),!(I.path==null&&!I.index)&&c.push({path:oe,score:TV(oe,I.index),routesMeta:_e})};return o.forEach((I,z)=>{var Z;if(I.path===""||!((Z=I.path)!=null&&Z.includes("?")))C(I,z);else for(let X of hB(I.path))C(I,z,X)}),c}function hB(o){let c=o.split("/");if(c.length===0)return[];let[d,..._]=c,C=d.endsWith("?"),I=d.replace(/\?$/,"");if(_.length===0)return C?[I,""]:[I];let z=hB(_.join("/")),Z=[];return Z.push(...z.map(X=>X===""?I:[I,X].join("/"))),C&&Z.push(...z),Z.map(X=>o.startsWith("/")&&X===""?"/":X)}function vV(o){o.sort((c,d)=>c.score!==d.score?d.score-c.score:EV(c.routesMeta.map(_=>_.childrenIndex),d.routesMeta.map(_=>_.childrenIndex)))}const _V=/^:\w+$/,xV=3,wV=2,bV=1,CV=10,SV=-2,qN=o=>o==="*";function TV(o,c){let d=o.split("/"),_=d.length;return d.some(qN)&&(_+=SV),c&&(_+=wV),d.filter(C=>!qN(C)).reduce((C,I)=>C+(_V.test(I)?xV:I===""?bV:CV),_)}function EV(o,c){return o.length===c.length&&o.slice(0,-1).every((_,C)=>_===c[C])?o[o.length-1]-c[c.length-1]:0}function IV(o,c){let{routesMeta:d}=o,_={},C="/",I=[];for(let z=0;z<d.length;++z){let Z=d[z],X=z===d.length-1,oe=C==="/"?c:c.slice(C.length)||"/",_e=kV({path:Z.relativePath,caseSensitive:Z.caseSensitive,end:X},oe);if(!_e)return null;Object.assign(_,_e.params);let Se=Z.route;I.push({params:_,pathname:Uv([C,_e.pathname]),pathnameBase:zV(Uv([C,_e.pathnameBase])),route:Se}),_e.pathnameBase!=="/"&&(C=Uv([C,_e.pathnameBase]))}return I}function kV(o,c){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[d,_]=MV(o.path,o.caseSensitive,o.end),C=c.match(d);if(!C)return null;let I=C[0],z=I.replace(/(.)\/+$/,"$1"),Z=C.slice(1);return{params:_.reduce((oe,_e,Se)=>{if(_e==="*"){let Ne=Z[Se]||"";z=I.slice(0,I.length-Ne.length).replace(/(.)\/+$/,"$1")}return oe[_e]=LV(Z[Se]||"",_e),oe},{}),pathname:I,pathnameBase:z,pattern:o}}function MV(o,c,d){c===void 0&&(c=!1),d===void 0&&(d=!0),n9(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let _=[],C="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(z,Z)=>(_.push(Z),"/([^\\/]+)"));return o.endsWith("*")?(_.push("*"),C+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?C+="\\/*$":o!==""&&o!=="/"&&(C+="(?:(?=\\/|$))"),[new RegExp(C,c?void 0:"i"),_]}function AV(o){try{return decodeURI(o)}catch(c){return n9(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+c+").")),o}}function LV(o,c){try{return decodeURIComponent(o)}catch(d){return n9(!1,'The value for the URL param "'+c+'" will not be decoded because'+(' the string "'+o+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+d+").")),o}}function dB(o,c){if(c==="/")return o;if(!o.toLowerCase().startsWith(c.toLowerCase()))return null;let d=c.endsWith("/")?c.length-1:c.length,_=o.charAt(d);return _&&_!=="/"?null:o.slice(d)||"/"}function n9(o,c){if(!o){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function PV(o,c){c===void 0&&(c="/");let{pathname:d,search:_="",hash:C=""}=typeof o=="string"?pw(o):o;return{pathname:d?d.startsWith("/")?d:DV(d,c):c,search:NV(_),hash:OV(C)}}function DV(o,c){let d=c.replace(/\/+$/,"").split("/");return o.split("/").forEach(C=>{C===".."?d.length>1&&d.pop():C!=="."&&d.push(C)}),d.length>1?d.join("/"):"/"}function M8(o,c,d,_){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+c+"` field ["+JSON.stringify(_)+"].  Please separate it out to the ")+("`to."+d+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fB(o){return o.filter((c,d)=>d===0||c.route.path&&c.route.path.length>0)}function mB(o,c,d,_){_===void 0&&(_=!1);let C;typeof o=="string"?C=pw(o):(C=j5({},o),ju(!C.pathname||!C.pathname.includes("?"),M8("?","pathname","search",C)),ju(!C.pathname||!C.pathname.includes("#"),M8("#","pathname","hash",C)),ju(!C.search||!C.search.includes("#"),M8("#","search","hash",C)));let I=o===""||C.pathname==="",z=I?"/":C.pathname,Z;if(_||z==null)Z=d;else{let Se=c.length-1;if(z.startsWith("..")){let Ne=z.split("/");for(;Ne[0]==="..";)Ne.shift(),Se-=1;C.pathname=Ne.join("/")}Z=Se>=0?c[Se]:"/"}let X=PV(C,Z),oe=z&&z!=="/"&&z.endsWith("/"),_e=(I||z===".")&&d.endsWith("/");return!X.pathname.endsWith("/")&&(oe||_e)&&(X.pathname+="/"),X}const Uv=o=>o.join("/").replace(/\/\/+/g,"/"),zV=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),NV=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,OV=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function RV(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const BV=["post","put","patch","delete"];[...BV];/**
 * React Router v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ZD(){return ZD=Object.assign?Object.assign.bind():function(o){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(o[_]=d[_])}return o},ZD.apply(this,arguments)}function FV(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}const jV=typeof Object.is=="function"?Object.is:FV,{useState:UV,useEffect:VV,useLayoutEffect:qV,useDebugValue:ZV}=J2;function GV(o,c,d){const _=c(),[{inst:C},I]=UV({inst:{value:_,getSnapshot:c}});return qV(()=>{C.value=_,C.getSnapshot=c,A8(C)&&I({inst:C})},[o,_,c]),VV(()=>(A8(C)&&I({inst:C}),o(()=>{A8(C)&&I({inst:C})})),[o]),ZV(_),_}function A8(o){const c=o.getSnapshot,d=o.value;try{const _=c();return!jV(d,_)}catch{return!0}}function HV(o,c,d){return c()}const WV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YV=!WV,KV=YV?HV:GV;"useSyncExternalStore"in J2&&(o=>o.useSyncExternalStore)(J2);const gB=Re.createContext(null),i9=Re.createContext(null),X5=Re.createContext(null),dI=Re.createContext(null),hw=Re.createContext({outlet:null,matches:[]}),yB=Re.createContext(null);function $V(o,c){let{relative:d}=c===void 0?{}:c;J5()||ju(!1);let{basename:_,navigator:C}=Re.useContext(X5),{hash:I,pathname:z,search:Z}=o9(o,{relative:d}),X=z;return _!=="/"&&(X=z==="/"?_:Uv([_,z])),C.createHref({pathname:X,search:Z,hash:I})}function J5(){return Re.useContext(dI)!=null}function dw(){return J5()||ju(!1),Re.useContext(dI).location}function XV(){J5()||ju(!1);let{basename:o,navigator:c}=Re.useContext(X5),{matches:d}=Re.useContext(hw),{pathname:_}=dw(),C=JSON.stringify(fB(d).map(Z=>Z.pathnameBase)),I=Re.useRef(!1);return Re.useEffect(()=>{I.current=!0}),Re.useCallback(function(Z,X){if(X===void 0&&(X={}),!I.current)return;if(typeof Z=="number"){c.go(Z);return}let oe=mB(Z,JSON.parse(C),_,X.relative==="path");o!=="/"&&(oe.pathname=oe.pathname==="/"?o:Uv([o,oe.pathname])),(X.replace?c.replace:c.push)(oe,X.state,X)},[o,c,C,_])}function o9(o,c){let{relative:d}=c===void 0?{}:c,{matches:_}=Re.useContext(hw),{pathname:C}=dw(),I=JSON.stringify(fB(_).map(z=>z.pathnameBase));return Re.useMemo(()=>mB(o,JSON.parse(I),C,d==="path"),[o,I,C,d])}function JV(o,c){J5()||ju(!1);let{navigator:d}=Re.useContext(X5),_=Re.useContext(i9),{matches:C}=Re.useContext(hw),I=C[C.length-1],z=I?I.params:{};I&&I.pathname;let Z=I?I.pathnameBase:"/";I&&I.route;let X=dw(),oe;if(c){var _e;let Ze=typeof c=="string"?pw(c):c;Z==="/"||(_e=Ze.pathname)!=null&&_e.startsWith(Z)||ju(!1),oe=Ze}else oe=X;let Se=oe.pathname||"/",Ne=Z==="/"?Se:Se.slice(Z.length)||"/",$e=yV(o,{pathname:Ne}),We=rq($e&&$e.map(Ze=>Object.assign({},Ze,{params:Object.assign({},z,Ze.params),pathname:Uv([Z,d.encodeLocation?d.encodeLocation(Ze.pathname).pathname:Ze.pathname]),pathnameBase:Ze.pathnameBase==="/"?Z:Uv([Z,d.encodeLocation?d.encodeLocation(Ze.pathnameBase).pathname:Ze.pathnameBase])})),C,_||void 0);return c&&We?Re.createElement(dI.Provider,{value:{location:ZD({pathname:"/",search:"",hash:"",state:null,key:"default"},oe),navigationType:Av.Pop}},We):We}function QV(){let o=aq(),c=RV(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),d=o instanceof Error?o.stack:null,C={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},I=null;return Re.createElement(Re.Fragment,null,Re.createElement("h2",null,"Unexpected Application Error!"),Re.createElement("h3",{style:{fontStyle:"italic"}},c),d?Re.createElement("pre",{style:C},d):null,I)}class eq extends Re.Component{constructor(c){super(c),this.state={location:c.location,error:c.error}}static getDerivedStateFromError(c){return{error:c}}static getDerivedStateFromProps(c,d){return d.location!==c.location?{error:c.error,location:c.location}:{error:c.error||d.error,location:d.location}}componentDidCatch(c,d){console.error("React Router caught the following error during render",c,d)}render(){return this.state.error?Re.createElement(hw.Provider,{value:this.props.routeContext},Re.createElement(yB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tq(o){let{routeContext:c,match:d,children:_}=o,C=Re.useContext(gB);return C&&C.static&&C.staticContext&&d.route.errorElement&&(C.staticContext._deepestRenderedBoundaryId=d.route.id),Re.createElement(hw.Provider,{value:c},_)}function rq(o,c,d){if(c===void 0&&(c=[]),o==null)if(d!=null&&d.errors)o=d.matches;else return null;let _=o,C=d==null?void 0:d.errors;if(C!=null){let I=_.findIndex(z=>z.route.id&&(C==null?void 0:C[z.route.id]));I>=0||ju(!1),_=_.slice(0,Math.min(_.length,I+1))}return _.reduceRight((I,z,Z)=>{let X=z.route.id?C==null?void 0:C[z.route.id]:null,oe=d?z.route.errorElement||Re.createElement(QV,null):null,_e=c.concat(_.slice(0,Z+1)),Se=()=>Re.createElement(tq,{match:z,routeContext:{outlet:I,matches:_e}},X?oe:z.route.element!==void 0?z.route.element:I);return d&&(z.route.errorElement||Z===0)?Re.createElement(eq,{location:d.location,component:oe,error:X,children:Se(),routeContext:{outlet:null,matches:_e}}):Se()},null)}var ZN;(function(o){o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator"})(ZN||(ZN={}));var PE;(function(o){o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator"})(PE||(PE={}));function nq(o){let c=Re.useContext(i9);return c||ju(!1),c}function iq(o){let c=Re.useContext(hw);return c||ju(!1),c}function oq(o){let c=iq(),d=c.matches[c.matches.length-1];return d.route.id||ju(!1),d.route.id}function aq(){var o;let c=Re.useContext(yB),d=nq(PE.UseRouteError),_=oq(PE.UseRouteError);return c||((o=d.errors)==null?void 0:o[_])}function Gg(o){ju(!1)}function sq(o){let{basename:c="/",children:d=null,location:_,navigationType:C=Av.Pop,navigator:I,static:z=!1}=o;J5()&&ju(!1);let Z=c.replace(/^\/*/,"/"),X=Re.useMemo(()=>({basename:Z,navigator:I,static:z}),[Z,I,z]);typeof _=="string"&&(_=pw(_));let{pathname:oe="/",search:_e="",hash:Se="",state:Ne=null,key:$e="default"}=_,We=Re.useMemo(()=>{let Ze=dB(oe,Z);return Ze==null?null:{pathname:Ze,search:_e,hash:Se,state:Ne,key:$e}},[Z,oe,_e,Se,Ne,$e]);return We==null?null:Re.createElement(X5.Provider,{value:X},Re.createElement(dI.Provider,{children:d,value:{location:We,navigationType:C}}))}function lq(o){let{children:c,location:d}=o,_=Re.useContext(gB),C=_&&!c?_.router.routes:GD(c);return JV(C,d)}var GN;(function(o){o[o.pending=0]="pending",o[o.success=1]="success",o[o.error=2]="error"})(GN||(GN={}));new Promise(()=>{});function GD(o,c){c===void 0&&(c=[]);let d=[];return Re.Children.forEach(o,(_,C)=>{if(!Re.isValidElement(_))return;if(_.type===Re.Fragment){d.push.apply(d,GD(_.props.children,c));return}_.type!==Gg&&ju(!1),!_.props.index||!_.props.children||ju(!1);let I=[...c,C],z={id:_.props.id||I.join("-"),caseSensitive:_.props.caseSensitive,element:_.props.element,index:_.props.index,path:_.props.path,loader:_.props.loader,action:_.props.action,errorElement:_.props.errorElement,hasErrorBoundary:_.props.errorElement!=null,shouldRevalidate:_.props.shouldRevalidate,handle:_.props.handle};_.props.children&&(z.children=GD(_.props.children,I)),d.push(z)}),d}/**
 * React Router DOM v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function DE(){return DE=Object.assign?Object.assign.bind():function(o){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(o[_]=d[_])}return o},DE.apply(this,arguments)}function vB(o,c){if(o==null)return{};var d={},_=Object.keys(o),C,I;for(I=0;I<_.length;I++)C=_[I],!(c.indexOf(C)>=0)&&(d[C]=o[C]);return d}function uq(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function cq(o,c){return o.button===0&&(!c||c==="_self")&&!uq(o)}const pq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],hq=["aria-current","caseSensitive","className","end","style","to","children"];function dq(o){let{basename:c,children:d,window:_}=o,C=Re.useRef();C.current==null&&(C.current=fV({window:_,v5Compat:!0}));let I=C.current,[z,Z]=Re.useState({action:I.action,location:I.location});return Re.useLayoutEffect(()=>I.listen(Z),[I]),Re.createElement(sq,{basename:c,children:d,location:z.location,navigationType:z.action,navigator:I})}const fq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ey=Re.forwardRef(function(c,d){let{onClick:_,relative:C,reloadDocument:I,replace:z,state:Z,target:X,to:oe,preventScrollReset:_e}=c,Se=vB(c,pq),Ne,$e=!1;if(fq&&typeof oe=="string"&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(oe)){Ne=oe;let Oe=new URL(window.location.href),Be=oe.startsWith("//")?new URL(Oe.protocol+oe):new URL(oe);Be.origin===Oe.origin?oe=Be.pathname+Be.search+Be.hash:$e=!0}let We=$V(oe,{relative:C}),Ze=mq(oe,{replace:z,state:Z,target:X,preventScrollReset:_e,relative:C});function ct(Oe){_&&_(Oe),Oe.defaultPrevented||Ze(Oe)}return Re.createElement("a",DE({},Se,{href:Ne||We,onClick:$e||I?_:ct,ref:d,target:X}))}),L2=Re.forwardRef(function(c,d){let{"aria-current":_="page",caseSensitive:C=!1,className:I="",end:z=!1,style:Z,to:X,children:oe}=c,_e=vB(c,hq),Se=o9(X,{relative:_e.relative}),Ne=dw(),$e=Re.useContext(i9),{navigator:We}=Re.useContext(X5),Ze=We.encodeLocation?We.encodeLocation(Se).pathname:Se.pathname,ct=Ne.pathname,Oe=$e&&$e.navigation&&$e.navigation.location?$e.navigation.location.pathname:null;C||(ct=ct.toLowerCase(),Oe=Oe?Oe.toLowerCase():null,Ze=Ze.toLowerCase());let Be=ct===Ze||!z&&ct.startsWith(Ze)&&ct.charAt(Ze.length)==="/",Xe=Oe!=null&&(Oe===Ze||!z&&Oe.startsWith(Ze)&&Oe.charAt(Ze.length)==="/"),Et=Be?_:void 0,Ht;typeof I=="function"?Ht=I({isActive:Be,isPending:Xe}):Ht=[I,Be?"active":null,Xe?"pending":null].filter(Boolean).join(" ");let Xt=typeof Z=="function"?Z({isActive:Be,isPending:Xe}):Z;return Re.createElement(ey,DE({},_e,{"aria-current":Et,className:Ht,ref:d,style:Xt,to:X}),typeof oe=="function"?oe({isActive:Be,isPending:Xe}):oe)});var HN;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmitImpl="useSubmitImpl",o.UseFetcher="useFetcher"})(HN||(HN={}));var WN;(function(o){o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(WN||(WN={}));function mq(o,c){let{target:d,replace:_,state:C,preventScrollReset:I,relative:z}=c===void 0?{}:c,Z=XV(),X=dw(),oe=o9(o,{relative:z});return Re.useCallback(_e=>{if(cq(_e,d)){_e.preventDefault();let Se=_!==void 0?_:LE(X)===LE(oe);Z(o,{replace:Se,state:C,preventScrollReset:I,relative:z})}},[X,Z,oe,_,C,d,o,I,z])}const gq="/assets/logo-6ecc1243.svg",yq="/assets/navBackground-4d4f4288.svg",vq=({sidebarOpen:o,setSidebarOpen:c})=>{const d=dw(),{pathname:_}=d,C=Re.useRef(null),I=Re.useRef(null),z=localStorage.getItem("sidebar-expanded"),[Z,X]=Re.useState(z===null?!1:z==="true");return Re.useEffect(()=>{const oe=({target:_e})=>{!I.current||!C.current||!o||I.current.contains(_e)||C.current.contains(_e)||c(!1)};return document.addEventListener("click",oe),()=>document.removeEventListener("click",oe)}),Re.useEffect(()=>{const oe=({keyCode:_e})=>{!o||_e!==27||c(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)}),Re.useEffect(()=>{localStorage.setItem("sidebar-expanded",Z),Z?document.querySelector("body").classList.add("sidebar-expanded"):document.querySelector("body").classList.remove("sidebar-expanded")},[Z]),rt("aside",{ref:I,className:`absolute left-0 top-0 z-9999 flex h-screen w-72.5 flex-col overflow-y-hidden bg-primary duration-300 ease-linear dark: lg:static lg:translate-x-0 ${o?"translate-x-0":"-translate-x-full"}`,children:[rt("div",{className:"flex items-center justify-between gap-2 px-6 py-5.5 lg:py-6.5",children:[pe(L2,{to:"/",className:"px-13 z-1",children:pe("img",{src:gq,alt:"Logo"})}),pe("img",{src:yq,alt:"nav-background",className:"absolute bottom-0 left-0 w-96 z-0"}),pe("button",{ref:C,onClick:()=>c(!o),"aria-controls":"sidebar","aria-expanded":o,className:"block lg:hidden z-1",children:pe("svg",{className:"fill-current text-white",width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pe("path",{d:"M19 8.175H2.98748L9.36248 1.6875C9.69998 1.35 9.69998 0.825 9.36248 0.4875C9.02498 0.15 8.49998 0.15 8.16248 0.4875L0.399976 8.3625C0.0624756 8.7 0.0624756 9.225 0.399976 9.5625L8.16248 17.4375C8.31248 17.5875 8.53748 17.7 8.76248 17.7C8.98748 17.7 9.17498 17.625 9.36248 17.475C9.69998 17.1375 9.69998 16.6125 9.36248 16.275L3.02498 9.8625H19C19.45 9.8625 19.825 9.4875 19.825 9.0375C19.825 8.55 19.45 8.175 19 8.175Z",fill:""})})})]}),pe("div",{className:"no-scrollbar flex flex-col overflow-y-auto duration-300 ease-linear",children:pe("nav",{className:"mt-5 py-4 px-4 lg:mt-9 lg:px-6",children:pe("div",{children:rt("ul",{className:"mb-6 flex flex-col gap-1.5 z-10",children:[pe("li",{children:rt(L2,{to:"/",className:`group relative flex items-center gap-2.5 rounded-sm py-2 px-4 font-medium text-bodydark1 duration-300 ease-in-out hover:bg-secondary dark:hover: ${_.includes("calendar")&&"bg-secondary dark:"}`,children:[pe("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pe("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.233 3.09651C10.0808 3.05219 9.91916 3.05219 9.76691 3.09651C9.72316 3.10927 9.64616 3.14119 9.48241 3.26516C9.31025 3.39554 9.09941 3.58214 8.77091 3.87415L4.40453 7.75535C3.86924 8.23118 3.71749 8.37469 3.61199 8.53335C3.51051 8.68602 3.4349 8.85435 3.38823 9.0316C3.3397 9.21594 3.33329 9.4246 3.33329 10.1409V13.3334C3.33329 14.1214 3.33375 14.6706 3.36307 15.1004C3.3919 15.5229 3.4458 15.7689 3.5236 15.9567C3.77733 16.5693 4.26401 17.056 4.87658 17.3097C5.06441 17.3875 5.3104 17.4414 5.73283 17.4703C6.16275 17.4996 6.71199 17.5 7.49996 17.5H12.5C13.2879 17.5 13.8372 17.4996 14.2671 17.4703C14.6895 17.4414 14.9355 17.3875 15.1233 17.3097C15.7359 17.056 16.2226 16.5693 16.4763 15.9567C16.5541 15.7689 16.608 15.5229 16.6368 15.1004C16.6662 14.6706 16.6667 14.1214 16.6667 13.3334V10.1409C16.6667 9.4246 16.6602 9.21594 16.6117 9.0316C16.565 8.85435 16.4894 8.68602 16.3879 8.53335C16.2824 8.37469 16.1307 8.23118 15.5954 7.75535L11.229 3.87415C10.9005 3.58214 10.6897 3.39554 10.5175 3.26516C10.3537 3.14119 10.2767 3.10927 10.233 3.09651ZM9.30091 1.49632C9.7575 1.36337 10.2424 1.36337 10.699 1.49632C11.0157 1.58858 11.2784 1.75081 11.5235 1.93638C11.7543 2.11114 12.0143 2.34222 12.3137 2.60831L16.7027 6.50968C16.7263 6.53068 16.7496 6.55139 16.7727 6.57184C17.2074 6.95786 17.5357 7.24948 17.7759 7.61066C17.9788 7.91599 18.1301 8.25269 18.2234 8.60727C18.3338 9.02669 18.3337 9.46585 18.3333 10.0472C18.3333 10.078 18.3333 10.1092 18.3333 10.1409V13.3629C18.3333 14.1144 18.3333 14.7206 18.2997 15.2139C18.265 15.7212 18.1921 16.1698 18.0162 16.5945C17.5932 17.6155 16.7821 18.4266 15.7612 18.8495C15.3364 19.0254 14.8878 19.0984 14.3805 19.133C13.8872 19.1667 13.281 19.1667 12.5296 19.1667H7.47036C6.71889 19.1667 6.11272 19.1667 5.61938 19.133C5.1121 19.0984 4.66353 19.0254 4.23878 18.8495C3.21783 18.4266 2.40669 17.6154 1.9838 16.5945C1.80786 16.1698 1.73489 15.7212 1.70027 15.2139C1.66661 14.7206 1.66662 14.1144 1.66662 13.3629V10.1409C1.66662 10.1092 1.66661 10.078 1.6666 10.0472C1.66629 9.46585 1.66606 9.02669 1.7765 8.60727C1.86986 8.25269 2.02106 7.91599 2.22403 7.61066C2.46413 7.24948 2.79254 6.95786 3.22726 6.57185C3.2503 6.55139 3.27362 6.53068 3.29726 6.50968L7.68628 2.60832C7.98561 2.34222 8.24555 2.11114 8.47641 1.93638C8.7215 1.75081 8.98416 1.58858 9.30091 1.49632Z",fill:"white"})}),"Home"]})}),pe("li",{children:rt(L2,{to:"/beacon-management",className:`group relative flex items-center gap-2.5 rounded-sm py-2 px-4 font-medium text-bodydark1 duration-300 ease-in-out hover:bg-secondary dark:hover: ${_.includes("profile")&&"bg-secondary dark:"}`,children:[rt("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[rt("g",{filter:"url(#filter0_d_906_15199)",children:[pe("path",{d:"M10.4167 9.16668C10.1695 9.16668 9.92778 9.23999 9.72222 9.37734C9.51665 9.51469 9.35644 9.70991 9.26183 9.93832C9.16722 10.1667 9.14247 10.4181 9.1907 10.6605C9.23893 10.903 9.35798 11.1257 9.53279 11.3006C9.70761 11.4754 9.93034 11.5944 10.1728 11.6427C10.4153 11.6909 10.6666 11.6661 10.895 11.5715C11.1234 11.4769 11.3187 11.3167 11.456 11.1111C11.5934 10.9056 11.6667 10.6639 11.6667 10.4167C11.6662 10.0853 11.5344 9.7676 11.3001 9.53328C11.0658 9.29895 10.7481 9.16712 10.4167 9.16668ZM6.59668 14.3492C5.57276 13.2962 4.99991 11.8854 4.99991 10.4167C4.99991 8.94795 5.57276 7.53714 6.59668 6.48418L7.19501 7.06501C6.32228 7.96243 5.83402 9.16487 5.83402 10.4167C5.83402 11.6685 6.32228 12.8709 7.19501 13.7683L6.59668 14.3492ZM4.22585 16.595C2.5897 14.9551 1.67084 12.7332 1.67084 10.4167C1.67084 8.10016 2.5897 5.87824 4.22585 4.23834L4.81501 4.82751C3.33509 6.31113 2.50399 8.32113 2.50399 10.4167C2.50399 12.5122 3.33509 14.5222 4.81501 16.0058L4.22585 16.595ZM14.2367 14.3492L13.6383 13.7683C14.5111 12.8709 14.9993 11.6685 14.9993 10.4167C14.9993 9.16487 14.5111 7.96243 13.6383 7.06501L14.2367 6.48418C15.2606 7.53714 15.8334 8.94795 15.8334 10.4167C15.8334 11.8854 15.2606 13.2962 14.2367 14.3492ZM16.6075 16.595L16.0183 16.0058C17.4983 14.5222 18.3294 12.5122 18.3294 10.4167C18.3294 8.32113 17.4983 6.31113 16.0183 4.82751L16.6075 4.23834C18.2437 5.87824 19.1625 8.10016 19.1625 10.4167C19.1625 12.7332 18.2437 14.9551 16.6075 16.595Z",fill:"white"}),pe("path",{d:"M10.4167 9.16668C10.1695 9.16668 9.92778 9.23999 9.72222 9.37734C9.51665 9.51469 9.35644 9.70991 9.26183 9.93832C9.16722 10.1667 9.14247 10.4181 9.1907 10.6605C9.23893 10.903 9.35798 11.1257 9.53279 11.3006C9.70761 11.4754 9.93034 11.5944 10.1728 11.6427C10.4153 11.6909 10.6666 11.6661 10.895 11.5715C11.1234 11.4769 11.3187 11.3167 11.456 11.1111C11.5934 10.9056 11.6667 10.6639 11.6667 10.4167C11.6662 10.0853 11.5344 9.7676 11.3001 9.53328C11.0658 9.29895 10.7481 9.16712 10.4167 9.16668ZM6.59668 14.3492C5.57276 13.2962 4.99991 11.8854 4.99991 10.4167C4.99991 8.94795 5.57276 7.53714 6.59668 6.48418L7.19501 7.06501C6.32228 7.96243 5.83402 9.16487 5.83402 10.4167C5.83402 11.6685 6.32228 12.8709 7.19501 13.7683L6.59668 14.3492ZM4.22585 16.595C2.5897 14.9551 1.67084 12.7332 1.67084 10.4167C1.67084 8.10016 2.5897 5.87824 4.22585 4.23834L4.81501 4.82751C3.33509 6.31113 2.50399 8.32113 2.50399 10.4167C2.50399 12.5122 3.33509 14.5222 4.81501 16.0058L4.22585 16.595ZM14.2367 14.3492L13.6383 13.7683C14.5111 12.8709 14.9993 11.6685 14.9993 10.4167C14.9993 9.16487 14.5111 7.96243 13.6383 7.06501L14.2367 6.48418C15.2606 7.53714 15.8334 8.94795 15.8334 10.4167C15.8334 11.8854 15.2606 13.2962 14.2367 14.3492ZM16.6075 16.595L16.0183 16.0058C17.4983 14.5222 18.3294 12.5122 18.3294 10.4167C18.3294 8.32113 17.4983 6.31113 16.0183 4.82751L16.6075 4.23834C18.2437 5.87824 19.1625 8.10016 19.1625 10.4167C19.1625 12.7332 18.2437 14.9551 16.6075 16.595Z",stroke:"white","stroke-width":"0.008"})]}),pe("path",{d:"M0 0H20V20H0V0Z",stroke:"white","stroke-width":"0.008"}),pe("defs",{children:rt("filter",{id:"filter0_d_906_15199",x:"-2.33319",y:"2.56256",width:"25.4997",height:"23.7088",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[pe("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),pe("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),pe("feOffset",{dy:"4"}),pe("feGaussianBlur",{stdDeviation:"2"}),pe("feComposite",{in2:"hardAlpha",operator:"out"}),pe("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),pe("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_906_15199"}),pe("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_906_15199",result:"shape"})]})})]}),"Beacon Management"]})}),pe("li",{children:rt(L2,{to:"/user-management",className:`group relative flex items-center gap-2.5 rounded-sm py-2 px-4 font-medium text-bodydark1 duration-300 ease-in-out hover:bg-secondary dark:hover: ${_.includes("tables")&&"bg-secondary dark:"}`,children:[pe("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pe("path",{d:"M12.3214 12.8571C13.209 12.8571 13.9286 13.5767 13.9286 14.4643V15.5371L13.923 15.6146C13.701 17.1333 12.3368 17.8636 10.0477 17.8636C7.76688 17.8636 6.38095 17.1416 6.08178 15.6404L6.07145 15.5357V14.4643C6.07145 13.5767 6.79099 12.8571 7.67859 12.8571H12.3214ZM12.3214 13.9285H7.67859C7.38272 13.9285 7.14287 14.1684 7.14287 14.4643V15.4788C7.34272 16.3363 8.25046 16.7921 10.0477 16.7921C11.8449 16.7921 12.7119 16.3412 12.8572 15.4951V14.4643C12.8572 14.1684 12.6173 13.9285 12.3214 13.9285ZM13.0311 8.57062L16.9643 8.5714C17.8519 8.5714 18.5714 9.29095 18.5714 10.1785V11.2514L18.5658 11.3289C18.3438 12.8476 16.9797 13.5779 14.6906 13.5779L14.4657 13.5755C14.2549 13.0658 13.868 12.6484 13.381 12.3982C13.7487 12.4703 14.1844 12.5064 14.6906 12.5064C16.4878 12.5064 17.3548 12.0555 17.5 11.2094V10.1785C17.5 9.88268 17.2602 9.64283 16.9643 9.64283H13.2143C13.2143 9.26686 13.1498 8.90596 13.0311 8.57062ZM3.03573 8.5714L6.96891 8.57062C6.87005 8.85007 6.80875 9.14727 6.79106 9.45615L6.78573 9.64283H3.03573C2.73986 9.64283 2.50002 9.88268 2.50002 10.1785V11.1931C2.69987 12.0505 3.60761 12.5064 5.40487 12.5064C5.8492 12.5064 6.23668 12.4789 6.57045 12.4246C6.10562 12.677 5.73713 13.0838 5.53312 13.5761L5.40487 13.5779C3.12403 13.5779 1.73809 12.8559 1.43892 11.3547L1.42859 11.25V10.1785C1.42859 9.29095 2.14813 8.5714 3.03573 8.5714ZM10 7.14283C11.3807 7.14283 12.5 8.26212 12.5 9.64283C12.5 11.0235 11.3807 12.1428 10 12.1428C8.61931 12.1428 7.50002 11.0235 7.50002 9.64283C7.50002 8.26212 8.61931 7.14283 10 7.14283ZM10 8.21426C9.21104 8.21426 8.57145 8.85385 8.57145 9.64283C8.57145 10.4318 9.21104 11.0714 10 11.0714C10.789 11.0714 11.4286 10.4318 11.4286 9.64283C11.4286 8.85385 10.789 8.21426 10 8.21426ZM14.6429 2.85712C16.0236 2.85712 17.1429 3.9764 17.1429 5.35712C17.1429 6.73783 16.0236 7.85712 14.6429 7.85712C13.2622 7.85712 12.1429 6.73783 12.1429 5.35712C12.1429 3.9764 13.2622 2.85712 14.6429 2.85712ZM5.35716 2.85712C6.73787 2.85712 7.85716 3.9764 7.85716 5.35712C7.85716 6.73783 6.73787 7.85712 5.35716 7.85712C3.97645 7.85712 2.85716 6.73783 2.85716 5.35712C2.85716 3.9764 3.97645 2.85712 5.35716 2.85712ZM14.6429 3.92855C13.8539 3.92855 13.2143 4.56814 13.2143 5.35712C13.2143 6.1461 13.8539 6.78569 14.6429 6.78569C15.4319 6.78569 16.0714 6.1461 16.0714 5.35712C16.0714 4.56814 15.4319 3.92855 14.6429 3.92855ZM5.35716 3.92855C4.56818 3.92855 3.92859 4.56814 3.92859 5.35712C3.92859 6.1461 4.56818 6.78569 5.35716 6.78569C6.14614 6.78569 6.78573 6.1461 6.78573 5.35712C6.78573 4.56814 6.14614 3.92855 5.35716 3.92855Z",fill:"white"})}),"User Management"]})}),pe("li",{children:rt(L2,{to:"/settings",className:`group relative flex items-center gap-2.5 rounded-sm py-2 px-4 font-medium text-bodydark1 duration-300 ease-in-out hover:bg-secondary dark:hover: ${_.includes("settings")&&"bg-secondary dark:"}`,children:[rt("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{d:"M9.00001 7.79065C11.0813 7.79065 12.7688 6.1594 12.7688 4.1344C12.7688 2.1094 11.0813 0.478149 9.00001 0.478149C6.91876 0.478149 5.23126 2.1094 5.23126 4.1344C5.23126 6.1594 6.91876 7.79065 9.00001 7.79065ZM9.00001 1.7719C10.3781 1.7719 11.5031 2.84065 11.5031 4.16252C11.5031 5.4844 10.3781 6.55315 9.00001 6.55315C7.62189 6.55315 6.49689 5.4844 6.49689 4.16252C6.49689 2.84065 7.62189 1.7719 9.00001 1.7719Z",fill:"#DEE4EE"}),pe("path",{d:"M10.8281 9.05627H7.17189C4.16251 9.05627 1.71564 11.5313 1.71564 14.5406V16.875C1.71564 17.2125 1.99689 17.5219 2.36251 17.5219C2.72814 17.5219 3.00939 17.2407 3.00939 16.875V14.5406C3.00939 12.2344 4.89376 10.3219 7.22814 10.3219H10.8563C13.1625 10.3219 15.075 12.2063 15.075 14.5406V16.875C15.075 17.2125 15.3563 17.5219 15.7219 17.5219C16.0875 17.5219 16.3688 17.2407 16.3688 16.875V14.5406C16.2844 11.5313 13.8375 9.05627 10.8281 9.05627Z",fill:"#DEE4EE"})]}),"Profile"]})}),pe("li",{children:rt(L2,{to:"/user-experience",className:`group relative flex items-center gap-2.5 rounded-sm py-2 px-4 font-medium text-bodydark1 duration-300 ease-in-out hover:bg-secondary dark:hover: ${_.includes("chart")&&"bg-secondary dark:"}`,children:[pe("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pe("path",{d:"M16.7069 6.18875C16.7038 6.16688 16.7 6.1475 16.695 6.12937L16.6956 6.1325C16.6762 6.04875 16.6369 5.97688 16.5819 5.91875L11.5819 0.91875C11.5244 0.864375 11.4525 0.825 11.3725 0.805625L11.3694 0.805C11.3525 0.8 11.3325 0.79625 11.3119 0.793125H11.31C11.2938 0.78875 11.2731 0.784375 11.2525 0.78125H11.25H3.75C3.49125 0.78125 3.28125 0.99125 3.28125 1.25V18.75C3.28125 19.0088 3.49125 19.2188 3.75 19.2188H16.25C16.5087 19.2188 16.7188 19.0088 16.7188 18.75V6.25C16.7156 6.22625 16.7112 6.20563 16.7062 6.18563L16.7069 6.18875ZM15.1181 5.78125H11.7188V2.38188L15.1181 5.78125ZM4.21875 18.2812V1.71875H10.7812V6.25C10.7812 6.50875 10.9913 6.71875 11.25 6.71875H15.7812V18.2812H4.21875ZM12.8969 10.6269C12.8969 10.625 12.8969 10.6225 12.8969 10.62C12.8969 9.02 11.6 7.72313 10 7.72313C8.4 7.72313 7.10312 9.02 7.10312 10.62C7.10312 11.4363 7.44063 12.1737 7.98375 12.7L7.98438 12.7006L7.03438 16.43C7.025 16.465 7.02 16.5044 7.02 16.5456C7.02 16.8044 7.23 17.0144 7.48875 17.0144C7.56063 17.0144 7.62937 16.9981 7.69 16.9688L7.68687 16.97L9.99875 15.885L12.3106 16.97C12.3688 16.9975 12.4375 17.0138 12.5094 17.0138C12.7681 17.0131 12.9775 16.8031 12.9775 16.5444C12.9775 16.5038 12.9725 16.4644 12.9625 16.4269L12.9631 16.43L12.0169 12.6962C12.5581 12.1712 12.8944 11.4375 12.895 10.625L12.8969 10.6269ZM10 8.6675C11.0825 8.6675 11.9594 9.545 11.9594 10.6269C11.9594 11.7087 11.0819 12.5863 10 12.5863C8.9175 12.5863 8.04062 11.7087 8.04062 10.6269C8.04187 9.54562 8.91813 8.66812 10 8.66687V8.6675ZM11.8125 15.7019L10.1988 14.9438C10.1406 14.9163 10.0719 14.9 10 14.9C9.92812 14.9 9.85938 14.9163 9.79813 14.945L9.80125 14.9438L8.18875 15.7006L8.81 13.2613C9.15875 13.4275 9.56812 13.5244 10 13.5244C10.4338 13.5244 10.8444 13.4269 11.2119 13.2519L11.195 13.2594L11.8125 15.7019Z",fill:"white"})}),"User Experience"]})})]})})})})]})},_q="/assets/logo-icon-ff114924.svg",xq="/assets/logo-icon-dark-949c3b68.svg",_B="/assets/user-01-b007ff3f.png",wq=({jsonData:o})=>{const[c,d]=Re.useState(!1),_=Re.useRef(null),C=Re.useRef(null);Re.useEffect(()=>{const z=({target:Z})=>{C.current&&(!c||C.current.contains(Z)||_.current.contains(Z)||d(!1))};return document.addEventListener("click",z),()=>document.removeEventListener("click",z)}),Re.useEffect(()=>{const z=({keyCode:Z})=>{!c||Z!==27||d(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)});const I=()=>{fetch("/clearCookies").then(z=>{if(!z.ok){alert("Error when log out");return}window.location.href="/auth/signin"})};return rt("div",{className:"relative",children:[rt(ey,{ref:_,onClick:()=>d(!c),className:"flex items-center gap-4",to:"#",children:[o?rt("span",{className:"sm:hidden xl:block text-black text-right",children:[pe("span",{className:"block text-sm font-medium text-black dark:text-white",children:o.nameUser}),pe("span",{className:"block text-xs dark:text-white",children:o.emailUser})," "]}):rt("span",{className:"sm:hidden xl:block text-black text-right",children:[pe("span",{className:"block text-sm font-medium text-black dark:text-white",children:"exemple name"}),pe("span",{className:"block text-xs dark:text-white",children:"example email"})]}),pe("span",{className:"h-12 w-12 rounded-full",children:pe("img",{src:_B,alt:"User"})}),pe("svg",{className:`hidden fill-current sm:block ${c?"rotate-180":""}`,width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.410765 0.910734C0.736202 0.585297 1.26384 0.585297 1.58928 0.910734L6.00002 5.32148L10.4108 0.910734C10.7362 0.585297 11.2638 0.585297 11.5893 0.910734C11.9147 1.23617 11.9147 1.76381 11.5893 2.08924L6.58928 7.08924C6.26384 7.41468 5.7362 7.41468 5.41077 7.08924L0.410765 2.08924C0.0853277 1.76381 0.0853277 1.23617 0.410765 0.910734Z",fill:""})})]}),pe("div",{ref:C,onFocus:()=>d(!0),onBlur:()=>d(!1),className:`absolute right-0 mt-4 flex w-62.5 flex-col rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark ${c===!0?"block":"hidden"}`,children:rt(ey,{to:"#",className:"flex items-center gap-3.5 py-4 px-6 text-sm font-medium duration-300 ease-in-out hover:text-primary lg:text-base",onClick:I,children:[rt("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{d:"M15.5375 0.618744H11.6531C10.7594 0.618744 10.0031 1.37499 10.0031 2.26874V4.64062C10.0031 5.05312 10.3469 5.39687 10.7594 5.39687C11.1719 5.39687 11.55 5.05312 11.55 4.64062V2.23437C11.55 2.16562 11.5844 2.13124 11.6531 2.13124H15.5375C16.3625 2.13124 17.0156 2.78437 17.0156 3.60937V18.3562C17.0156 19.1812 16.3625 19.8344 15.5375 19.8344H11.6531C11.5844 19.8344 11.55 19.8 11.55 19.7312V17.3594C11.55 16.9469 11.2062 16.6031 10.7594 16.6031C10.3125 16.6031 10.0031 16.9469 10.0031 17.3594V19.7312C10.0031 20.625 10.7594 21.3812 11.6531 21.3812H15.5375C17.2219 21.3812 18.5625 20.0062 18.5625 18.3562V3.64374C18.5625 1.95937 17.1875 0.618744 15.5375 0.618744Z",fill:""}),pe("path",{d:"M6.05001 11.7563H12.2031C12.6156 11.7563 12.9594 11.4125 12.9594 11C12.9594 10.5875 12.6156 10.2438 12.2031 10.2438H6.08439L8.21564 8.07813C8.52501 7.76875 8.52501 7.2875 8.21564 6.97812C7.90626 6.66875 7.42501 6.66875 7.11564 6.97812L3.67814 10.4844C3.36876 10.7938 3.36876 11.275 3.67814 11.5844L7.11564 15.0906C7.25314 15.2281 7.45939 15.3312 7.66564 15.3312C7.87189 15.3312 8.04376 15.2625 8.21564 15.125C8.52501 14.8156 8.52501 14.3344 8.21564 14.025L6.05001 11.7563Z",fill:""})]}),"Log Out"]})})]})},bq=(o,c)=>{const[d,_]=Re.useState(()=>{try{const C=window.localStorage.getItem(o);return C?JSON.parse(C):c}catch(C){return console.log(C),c}});return Re.useEffect(()=>{try{const C=typeof d=="function"?d(d):d;window.localStorage.setItem(o,JSON.stringify(C))}catch(C){console.log(C)}},[o,d]),[d,_]},Cq=()=>{const[o,c]=bq("color-theme","light");return Re.useEffect(()=>{const d="dark",_=window.document.body.classList;o==="dark"?_.add(d):_.remove(d)},[o]),[o,c]},Sq=()=>{const[o,c]=Cq();return pe("li",{children:rt("label",{className:`relative m-0 block h-7.5 w-14 rounded-full ${o==="dark"?"bg-primary":"bg-stroke"}`,children:[pe("input",{type:"checkbox",onChange:()=>c(o==="light"?"dark":"light"),className:"absolute top-0 z-50 m-0 h-full w-full cursor-pointer opacity-0 dur"}),rt("span",{className:`absolute top-1/2 left-[3px] flex h-6 w-6 -translate-y-1/2 translate-x-0 items-center justify-center rounded-full bg-white shadow-switcher duration-75 ease-linear ${o==="dark"&&"!right-[3px] !translate-x-full"}`,children:[pe("span",{className:"dark:hidden",children:rt("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{d:"M7.99992 12.6666C10.5772 12.6666 12.6666 10.5772 12.6666 7.99992C12.6666 5.42259 10.5772 3.33325 7.99992 3.33325C5.42259 3.33325 3.33325 5.42259 3.33325 7.99992C3.33325 10.5772 5.42259 12.6666 7.99992 12.6666Z",fill:"#969AA1"}),pe("path",{d:"M8.00008 15.3067C7.63341 15.3067 7.33342 15.0334 7.33342 14.6667V14.6134C7.33342 14.2467 7.63341 13.9467 8.00008 13.9467C8.36675 13.9467 8.66675 14.2467 8.66675 14.6134C8.66675 14.9801 8.36675 15.3067 8.00008 15.3067ZM12.7601 13.4267C12.5867 13.4267 12.4201 13.3601 12.2867 13.2334L12.2001 13.1467C11.9401 12.8867 11.9401 12.4667 12.2001 12.2067C12.4601 11.9467 12.8801 11.9467 13.1401 12.2067L13.2267 12.2934C13.4867 12.5534 13.4867 12.9734 13.2267 13.2334C13.1001 13.3601 12.9334 13.4267 12.7601 13.4267ZM3.24008 13.4267C3.06675 13.4267 2.90008 13.3601 2.76675 13.2334C2.50675 12.9734 2.50675 12.5534 2.76675 12.2934L2.85342 12.2067C3.11342 11.9467 3.53341 11.9467 3.79341 12.2067C4.05341 12.4667 4.05341 12.8867 3.79341 13.1467L3.70675 13.2334C3.58008 13.3601 3.40675 13.4267 3.24008 13.4267ZM14.6667 8.66675H14.6134C14.2467 8.66675 13.9467 8.36675 13.9467 8.00008C13.9467 7.63341 14.2467 7.33342 14.6134 7.33342C14.9801 7.33342 15.3067 7.63341 15.3067 8.00008C15.3067 8.36675 15.0334 8.66675 14.6667 8.66675ZM1.38675 8.66675H1.33341C0.966748 8.66675 0.666748 8.36675 0.666748 8.00008C0.666748 7.63341 0.966748 7.33342 1.33341 7.33342C1.70008 7.33342 2.02675 7.63341 2.02675 8.00008C2.02675 8.36675 1.75341 8.66675 1.38675 8.66675ZM12.6734 3.99341C12.5001 3.99341 12.3334 3.92675 12.2001 3.80008C11.9401 3.54008 11.9401 3.12008 12.2001 2.86008L12.2867 2.77341C12.5467 2.51341 12.9667 2.51341 13.2267 2.77341C13.4867 3.03341 13.4867 3.45341 13.2267 3.71341L13.1401 3.80008C13.0134 3.92675 12.8467 3.99341 12.6734 3.99341ZM3.32675 3.99341C3.15341 3.99341 2.98675 3.92675 2.85342 3.80008L2.76675 3.70675C2.50675 3.44675 2.50675 3.02675 2.76675 2.76675C3.02675 2.50675 3.44675 2.50675 3.70675 2.76675L3.79341 2.85342C4.05341 3.11342 4.05341 3.53341 3.79341 3.79341C3.66675 3.92675 3.49341 3.99341 3.32675 3.99341ZM8.00008 2.02675C7.63341 2.02675 7.33342 1.75341 7.33342 1.38675V1.33341C7.33342 0.966748 7.63341 0.666748 8.00008 0.666748C8.36675 0.666748 8.66675 0.966748 8.66675 1.33341C8.66675 1.70008 8.36675 2.02675 8.00008 2.02675Z",fill:"#969AA1"})]})}),pe("span",{className:"hidden dark:inline-block",children:pe("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pe("path",{d:"M14.3533 10.62C14.2466 10.44 13.9466 10.16 13.1999 10.2933C12.7866 10.3667 12.3666 10.4 11.9466 10.38C10.3933 10.3133 8.98659 9.6 8.00659 8.5C7.13993 7.53333 6.60659 6.27333 6.59993 4.91333C6.59993 4.15333 6.74659 3.42 7.04659 2.72666C7.33993 2.05333 7.13326 1.7 6.98659 1.55333C6.83326 1.4 6.47326 1.18666 5.76659 1.48C3.03993 2.62666 1.35326 5.36 1.55326 8.28666C1.75326 11.04 3.68659 13.3933 6.24659 14.28C6.85993 14.4933 7.50659 14.62 8.17326 14.6467C8.27993 14.6533 8.38659 14.66 8.49326 14.66C10.7266 14.66 12.8199 13.6067 14.1399 11.8133C14.5866 11.1933 14.4666 10.8 14.3533 10.62Z",fill:"#969AA1"})})})]})]})})},Tq=o=>{const[c,d]=Re.useState({nameUser:"",emailUser:""});return Re.useEffect(()=>{var Z;const _=(Z=document.cookie.split("; ").find(X=>X.startsWith("loginAtlasToken=")))==null?void 0:Z.split("=")[1];_||(window.location.href="/auth/signin");const C=decodeURIComponent(_),I=JSON.parse(C),z={userID:I.userID,token:I.token};fetch("/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)}).then(X=>X.json()).then(X=>{"status"in X&&(window.location.href="/auth/signin");const oe=new Date(X.expiryDate);new Date().getTime()<=oe.getTime()?d({...c,nameUser:I.nameUser,emailUser:I.emailUser}):window.location.href="/auth/signin"})},[]),pe("header",{className:"sticky top-0 z-999 flex w-full bg-white drop-shadow-1 dark:bg-boxdark dark:drop-shadow-none",children:rt("div",{className:"flex flex-grow items-center justify-between py-4 px-4 shadow-2 md:px-6 2xl:px-11",children:[rt("div",{className:"flex items-center gap-2 sm:gap-4 lg:hidden",children:[pe("button",{"aria-controls":"sidebar","aria-expanded":o.sidebarOpen,onClick:_=>{_.stopPropagation(),o.setSidebarOpen(!o.sidebarOpen)},className:"z-99999 block rounded-sm border border-stroke bg-white p-1.5 shadow-sm dark:border-strokedark dark:bg-boxdark lg:hidden",children:rt("span",{className:"relative block h-5.5 w-5.5 cursor-pointer",children:[rt("span",{className:"du-block absolute right-0 h-full w-full",children:[pe("span",{className:`relative top-0 left-0 my-1 block h-0.5 w-0 rounded-sm bg-black delay-[0] duration-200 ease-in-out dark:bg-white ${!o.sidebarOpen&&"!w-full delay-300"}`}),pe("span",{className:`relative top-0 left-0 my-1 block h-0.5 w-0 rounded-sm bg-black delay-150 duration-200 ease-in-out dark:bg-white ${!o.sidebarOpen&&"delay-400 !w-full"}`}),pe("span",{className:`relative top-0 left-0 my-1 block h-0.5 w-0 rounded-sm bg-black delay-200 duration-200 ease-in-out dark:bg-white ${!o.sidebarOpen&&"!w-full delay-500"}`})]}),rt("span",{className:"absolute right-0 h-full w-full rotate-45",children:[pe("span",{className:`absolute left-2.5 top-0 block h-full w-0.5 rounded-sm bg-black delay-300 duration-200 ease-in-out dark:bg-white ${!o.sidebarOpen&&"!h-0 !delay-[0]"}`}),pe("span",{className:`delay-400 absolute left-0 top-2.5 block h-0.5 w-full rounded-sm bg-black duration-200 ease-in-out dark:bg-white ${!o.sidebarOpen&&"!h-0 !delay-200"}`})]})]})}),pe(ey,{className:"block flex-shrink-0 lg:hidden dark:hidden",to:"/",children:pe("img",{src:_q,alt:"Logo"})}),pe(ey,{className:"block flex-shrink-0 lg:hidden hidden dark:block",to:"/",children:pe("img",{src:xq,alt:"Logo"})})]}),pe("div",{className:"sm:block  font-bold text-blackest dark:text-white",children:"ISEP Indoor Mapping"}),rt("div",{className:"flex items-center gap-3 2xsm:gap-7",children:[pe("ul",{className:"flex items-center gap-2 2xsm:gap-4",children:pe(Sq,{})}),pe(wq,{jsonData:c})]})]})})},Q5=({children:o})=>{const[c,d]=Re.useState(!1);return pe("div",{className:"dark:bg-boxdark-2 dark:text-bodydark",children:rt("div",{className:"flex h-screen overflow-hidden",children:[pe(vq,{sidebarOpen:c,setSidebarOpen:d}),rt("div",{className:"relative flex flex-1 flex-col overflow-y-auto overflow-x-hidden",children:[pe(Tq,{sidebarOpen:c,setSidebarOpen:d}),pe("main",{children:pe("div",{className:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10",children:o})})]})]})})},fI=o=>rt("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[pe("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:o.pageName}),pe("nav",{children:rt("ol",{className:"flex items-center gap-2",children:[pe("li",{children:pe(ey,{to:"/",children:"Home /"})}),pe("li",{className:"text-primary",children:o.pageName})]})})]});var Eq=function(){function o(c){if(!c)throw new TypeError("Invalid argument; `value` has no value.");this.value=o.EMPTY,c&&o.isGuid(c)&&(this.value=c)}return o.isGuid=function(c){var d=c.toString();return c&&(c instanceof o||o.validator.test(d))},o.create=function(){return new o([o.gen(2),o.gen(1),o.gen(1),o.gen(1),o.gen(3)].join("-"))},o.createEmpty=function(){return new o("emptyguid")},o.parse=function(c){return new o(c)},o.raw=function(){return[o.gen(2),o.gen(1),o.gen(1),o.gen(1),o.gen(3)].join("-")},o.gen=function(c){for(var d="",_=0;_<c;_++)d+=((1+Math.random())*65536|0).toString(16).substring(1);return d},o.prototype.equals=function(c){return o.isGuid(c)&&this.value===c.toString()},o.prototype.isEmpty=function(){return this.value===o.EMPTY},o.prototype.toString=function(){return this.value},o.prototype.toJSON=function(){return{value:this.value}},o.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),o.EMPTY="00000000-0000-0000-0000-000000000000",o}(),Iq=Eq;var fw={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xB=Re;function yi(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vh=Object.prototype.hasOwnProperty,kq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,YN={},KN={};function wB(o){return Vh.call(KN,o)?!0:Vh.call(YN,o)?!1:kq.test(o)?KN[o]=!0:(YN[o]=!0,!1)}function Fh(o,c,d,_,C,I,z){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=_,this.attributeNamespace=C,this.mustUseProperty=d,this.propertyName=o,this.type=c,this.sanitizeURL=I,this.removeEmptyString=z}var rp={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){rp[o]=new Fh(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];rp[c]=new Fh(c,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){rp[o]=new Fh(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){rp[o]=new Fh(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){rp[o]=new Fh(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){rp[o]=new Fh(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){rp[o]=new Fh(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){rp[o]=new Fh(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){rp[o]=new Fh(o,5,!1,o.toLowerCase(),null,!1,!1)});var a9=/[\-:]([a-z])/g;function s9(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(a9,s9);rp[c]=new Fh(c,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(a9,s9);rp[c]=new Fh(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(a9,s9);rp[c]=new Fh(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){rp[o]=new Fh(o,1,!1,o.toLowerCase(),null,!1,!1)});rp.xlinkHref=new Fh("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){rp[o]=new Fh(o,1,!1,o.toLowerCase(),null,!0,!0)});var KT={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mq=["Webkit","ms","Moz","O"];Object.keys(KT).forEach(function(o){Mq.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),KT[c]=KT[o]})});var Aq=/["'&<>]/;function Nh(o){if(typeof o=="boolean"||typeof o=="number")return""+o;o=""+o;var c=Aq.exec(o);if(c){var d="",_,C=0;for(_=c.index;_<o.length;_++){switch(o.charCodeAt(_)){case 34:c="&quot;";break;case 38:c="&amp;";break;case 39:c="&#x27;";break;case 60:c="&lt;";break;case 62:c="&gt;";break;default:continue}C!==_&&(d+=o.substring(C,_)),C=_+1,d+=c}o=C!==_?d+o.substring(C,_):d}return o}var Lq=/([A-Z])/g,Pq=/^ms-/,HD=Array.isArray;function ev(o,c){return{insertionMode:o,selectedValue:c}}function Dq(o,c,d){switch(c){case"select":return ev(1,d.value!=null?d.value:d.defaultValue);case"svg":return ev(2,null);case"math":return ev(3,null);case"foreignObject":return ev(1,null);case"table":return ev(4,null);case"thead":case"tbody":case"tfoot":return ev(5,null);case"colgroup":return ev(7,null);case"tr":return ev(6,null)}return 4<=o.insertionMode||o.insertionMode===0?ev(1,null):o}var $N=new Map;function bB(o,c,d){if(typeof d!="object")throw Error(yi(62));c=!0;for(var _ in d)if(Vh.call(d,_)){var C=d[_];if(C!=null&&typeof C!="boolean"&&C!==""){if(_.indexOf("--")===0){var I=Nh(_);C=Nh((""+C).trim())}else{I=_;var z=$N.get(I);z!==void 0||(z=Nh(I.replace(Lq,"-$1").toLowerCase().replace(Pq,"-ms-")),$N.set(I,z)),I=z,C=typeof C=="number"?C===0||Vh.call(KT,_)?""+C:C+"px":Nh((""+C).trim())}c?(c=!1,o.push(' style="',I,":",C)):o.push(";",I,":",C)}}c||o.push('"')}function yf(o,c,d,_){switch(d){case"style":bB(o,c,_);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N"){if(c=rp.hasOwnProperty(d)?rp[d]:null,c!==null){switch(typeof _){case"function":case"symbol":return;case"boolean":if(!c.acceptsBooleans)return}switch(d=c.attributeName,c.type){case 3:_&&o.push(" ",d,'=""');break;case 4:_===!0?o.push(" ",d,'=""'):_!==!1&&o.push(" ",d,'="',Nh(_),'"');break;case 5:isNaN(_)||o.push(" ",d,'="',Nh(_),'"');break;case 6:!isNaN(_)&&1<=_&&o.push(" ",d,'="',Nh(_),'"');break;default:c.sanitizeURL&&(_=""+_),o.push(" ",d,'="',Nh(_),'"')}}else if(wB(d)){switch(typeof _){case"function":case"symbol":return;case"boolean":if(c=d.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-")return}o.push(" ",d,'="',Nh(_),'"')}}}function $T(o,c,d){if(c!=null){if(d!=null)throw Error(yi(60));if(typeof c!="object"||!("__html"in c))throw Error(yi(61));c=c.__html,c!=null&&o.push(""+c)}}function zq(o){var c="";return xB.Children.forEach(o,function(d){d!=null&&(c+=d)}),c}function L8(o,c,d,_){o.push(Hg(d));var C=d=null,I;for(I in c)if(Vh.call(c,I)){var z=c[I];if(z!=null)switch(I){case"children":d=z;break;case"dangerouslySetInnerHTML":C=z;break;default:yf(o,_,I,z)}}return o.push(">"),$T(o,C,d),typeof d=="string"?(o.push(Nh(d)),null):d}var Nq=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,XN=new Map;function Hg(o){var c=XN.get(o);if(c===void 0){if(!Nq.test(o))throw Error(yi(65,o));c="<"+o,XN.set(o,c)}return c}function Oq(o,c,d,_,C){switch(c){case"select":o.push(Hg("select"));var I=null,z=null;for(_e in d)if(Vh.call(d,_e)){var Z=d[_e];if(Z!=null)switch(_e){case"children":I=Z;break;case"dangerouslySetInnerHTML":z=Z;break;case"defaultValue":case"value":break;default:yf(o,_,_e,Z)}}return o.push(">"),$T(o,z,I),I;case"option":z=C.selectedValue,o.push(Hg("option"));var X=Z=null,oe=null,_e=null;for(I in d)if(Vh.call(d,I)){var Se=d[I];if(Se!=null)switch(I){case"children":Z=Se;break;case"selected":oe=Se;break;case"dangerouslySetInnerHTML":_e=Se;break;case"value":X=Se;default:yf(o,_,I,Se)}}if(z!=null)if(d=X!==null?""+X:zq(Z),HD(z)){for(_=0;_<z.length;_++)if(""+z[_]===d){o.push(' selected=""');break}}else""+z===d&&o.push(' selected=""');else oe&&o.push(' selected=""');return o.push(">"),$T(o,_e,Z),Z;case"textarea":o.push(Hg("textarea")),_e=z=I=null;for(Z in d)if(Vh.call(d,Z)&&(X=d[Z],X!=null))switch(Z){case"children":_e=X;break;case"value":I=X;break;case"defaultValue":z=X;break;case"dangerouslySetInnerHTML":throw Error(yi(91));default:yf(o,_,Z,X)}if(I===null&&z!==null&&(I=z),o.push(">"),_e!=null){if(I!=null)throw Error(yi(92));if(HD(_e)&&1<_e.length)throw Error(yi(93));I=""+_e}return typeof I=="string"&&I[0]===`
`&&o.push(`
`),I!==null&&o.push(Nh(""+I)),null;case"input":o.push(Hg("input")),X=_e=Z=I=null;for(z in d)if(Vh.call(d,z)&&(oe=d[z],oe!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(yi(399,"input"));case"defaultChecked":X=oe;break;case"defaultValue":Z=oe;break;case"checked":_e=oe;break;case"value":I=oe;break;default:yf(o,_,z,oe)}return _e!==null?yf(o,_,"checked",_e):X!==null&&yf(o,_,"checked",X),I!==null?yf(o,_,"value",I):Z!==null&&yf(o,_,"value",Z),o.push("/>"),null;case"menuitem":o.push(Hg("menuitem"));for(var Ne in d)if(Vh.call(d,Ne)&&(I=d[Ne],I!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(yi(400));default:yf(o,_,Ne,I)}return o.push(">"),null;case"title":o.push(Hg("title")),I=null;for(Se in d)if(Vh.call(d,Se)&&(z=d[Se],z!=null))switch(Se){case"children":I=z;break;case"dangerouslySetInnerHTML":throw Error(yi(434));default:yf(o,_,Se,z)}return o.push(">"),I;case"listing":case"pre":o.push(Hg(c)),z=I=null;for(X in d)if(Vh.call(d,X)&&(Z=d[X],Z!=null))switch(X){case"children":I=Z;break;case"dangerouslySetInnerHTML":z=Z;break;default:yf(o,_,X,Z)}if(o.push(">"),z!=null){if(I!=null)throw Error(yi(60));if(typeof z!="object"||!("__html"in z))throw Error(yi(61));d=z.__html,d!=null&&(typeof d=="string"&&0<d.length&&d[0]===`
`?o.push(`
`,d):o.push(""+d))}return typeof I=="string"&&I[0]===`
`&&o.push(`
`),I;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":o.push(Hg(c));for(var $e in d)if(Vh.call(d,$e)&&(I=d[$e],I!=null))switch($e){case"children":case"dangerouslySetInnerHTML":throw Error(yi(399,c));default:yf(o,_,$e,I)}return o.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return L8(o,d,c,_);case"html":return C.insertionMode===0&&o.push("<!DOCTYPE html>"),L8(o,d,c,_);default:if(c.indexOf("-")===-1&&typeof d.is!="string")return L8(o,d,c,_);o.push(Hg(c)),z=I=null;for(oe in d)if(Vh.call(d,oe)&&(Z=d[oe],Z!=null))switch(oe){case"children":I=Z;break;case"dangerouslySetInnerHTML":z=Z;break;case"style":bB(o,_,Z);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:wB(oe)&&typeof Z!="function"&&typeof Z!="symbol"&&o.push(" ",oe,'="',Nh(Z),'"')}return o.push(">"),$T(o,z,I),I}}function JN(o,c,d){if(o.push('<!--$?--><template id="'),d===null)throw Error(yi(395));return o.push(d),o.push('"></template>')}function Rq(o,c,d,_){switch(d.insertionMode){case 0:case 1:return o.push('<div hidden id="'),o.push(c.segmentPrefix),c=_.toString(16),o.push(c),o.push('">');case 2:return o.push('<svg aria-hidden="true" style="display:none" id="'),o.push(c.segmentPrefix),c=_.toString(16),o.push(c),o.push('">');case 3:return o.push('<math aria-hidden="true" style="display:none" id="'),o.push(c.segmentPrefix),c=_.toString(16),o.push(c),o.push('">');case 4:return o.push('<table hidden id="'),o.push(c.segmentPrefix),c=_.toString(16),o.push(c),o.push('">');case 5:return o.push('<table hidden><tbody id="'),o.push(c.segmentPrefix),c=_.toString(16),o.push(c),o.push('">');case 6:return o.push('<table hidden><tr id="'),o.push(c.segmentPrefix),c=_.toString(16),o.push(c),o.push('">');case 7:return o.push('<table hidden><colgroup id="'),o.push(c.segmentPrefix),c=_.toString(16),o.push(c),o.push('">');default:throw Error(yi(397))}}function Bq(o,c){switch(c.insertionMode){case 0:case 1:return o.push("</div>");case 2:return o.push("</svg>");case 3:return o.push("</math>");case 4:return o.push("</table>");case 5:return o.push("</tbody></table>");case 6:return o.push("</tr></table>");case 7:return o.push("</colgroup></table>");default:throw Error(yi(397))}}var Fq=/[<\u2028\u2029]/g;function P8(o){return JSON.stringify(o).replace(Fq,function(c){switch(c){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function jq(o,c){return c=c===void 0?"":c,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:c+"P:",segmentPrefix:c+"S:",boundaryPrefix:c+"B:",idPrefix:c,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:o}}function QN(o,c,d,_){return d.generateStaticMarkup?(o.push(Nh(c)),!1):(c===""?o=_:(_&&o.push("<!-- -->"),o.push(Nh(c)),o=!0),o)}var x5=Object.assign,Uq=Symbol.for("react.element"),CB=Symbol.for("react.portal"),SB=Symbol.for("react.fragment"),TB=Symbol.for("react.strict_mode"),EB=Symbol.for("react.profiler"),IB=Symbol.for("react.provider"),kB=Symbol.for("react.context"),MB=Symbol.for("react.forward_ref"),AB=Symbol.for("react.suspense"),LB=Symbol.for("react.suspense_list"),PB=Symbol.for("react.memo"),l9=Symbol.for("react.lazy"),Vq=Symbol.for("react.scope"),qq=Symbol.for("react.debug_trace_mode"),Zq=Symbol.for("react.legacy_hidden"),Gq=Symbol.for("react.default_value"),eO=Symbol.iterator;function WD(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case SB:return"Fragment";case CB:return"Portal";case EB:return"Profiler";case TB:return"StrictMode";case AB:return"Suspense";case LB:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case kB:return(o.displayName||"Context")+".Consumer";case IB:return(o._context.displayName||"Context")+".Provider";case MB:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case PB:return c=o.displayName||null,c!==null?c:WD(o.type)||"Memo";case l9:c=o._payload,o=o._init;try{return WD(o(c))}catch{}}return null}var DB={};function tO(o,c){if(o=o.contextTypes,!o)return DB;var d={},_;for(_ in o)d[_]=c[_];return d}var l2=null;function mI(o,c){if(o!==c){o.context._currentValue2=o.parentValue,o=o.parent;var d=c.parent;if(o===null){if(d!==null)throw Error(yi(401))}else{if(d===null)throw Error(yi(401));mI(o,d)}c.context._currentValue2=c.value}}function zB(o){o.context._currentValue2=o.parentValue,o=o.parent,o!==null&&zB(o)}function NB(o){var c=o.parent;c!==null&&NB(c),o.context._currentValue2=o.value}function OB(o,c){if(o.context._currentValue2=o.parentValue,o=o.parent,o===null)throw Error(yi(402));o.depth===c.depth?mI(o,c):OB(o,c)}function RB(o,c){var d=c.parent;if(d===null)throw Error(yi(402));o.depth===d.depth?mI(o,d):RB(o,d),c.context._currentValue2=c.value}function zE(o){var c=l2;c!==o&&(c===null?NB(o):o===null?zB(c):c.depth===o.depth?mI(c,o):c.depth>o.depth?OB(c,o):RB(c,o),l2=o)}var rO={isMounted:function(){return!1},enqueueSetState:function(o,c){o=o._reactInternals,o.queue!==null&&o.queue.push(c)},enqueueReplaceState:function(o,c){o=o._reactInternals,o.replace=!0,o.queue=[c]},enqueueForceUpdate:function(){}};function nO(o,c,d,_){var C=o.state!==void 0?o.state:null;o.updater=rO,o.props=d,o.state=C;var I={queue:[],replace:!1};o._reactInternals=I;var z=c.contextType;if(o.context=typeof z=="object"&&z!==null?z._currentValue2:_,z=c.getDerivedStateFromProps,typeof z=="function"&&(z=z(d,C),C=z==null?C:x5({},C,z),o.state=C),typeof c.getDerivedStateFromProps!="function"&&typeof o.getSnapshotBeforeUpdate!="function"&&(typeof o.UNSAFE_componentWillMount=="function"||typeof o.componentWillMount=="function"))if(c=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),c!==o.state&&rO.enqueueReplaceState(o,o.state,null),I.queue!==null&&0<I.queue.length)if(c=I.queue,z=I.replace,I.queue=null,I.replace=!1,z&&c.length===1)o.state=c[0];else{for(I=z?c[0]:o.state,C=!0,z=z?1:0;z<c.length;z++){var Z=c[z];Z=typeof Z=="function"?Z.call(o,I,d,_):Z,Z!=null&&(C?(C=!1,I=x5({},I,Z)):x5(I,Z))}o.state=I}else I.queue=null}var Hq={id:1,overflow:""};function YD(o,c,d){var _=o.id;o=o.overflow;var C=32-XT(_)-1;_&=~(1<<C),d+=1;var I=32-XT(c)+C;if(30<I){var z=C-C%5;return I=(_&(1<<z)-1).toString(32),_>>=z,C-=z,{id:1<<32-XT(c)+C|d<<C|_,overflow:I+o}}return{id:1<<I|d<<C|_,overflow:o}}var XT=Math.clz32?Math.clz32:Kq,Wq=Math.log,Yq=Math.LN2;function Kq(o){return o>>>=0,o===0?32:31-(Wq(o)/Yq|0)|0}function $q(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Xq=typeof Object.is=="function"?Object.is:$q,fv=null,u9=null,JT=null,Ba=null,a5=!1,NE=!1,U5=0,Lv=null,gI=0;function t2(){if(fv===null)throw Error(yi(321));return fv}function iO(){if(0<gI)throw Error(yi(312));return{memoizedState:null,queue:null,next:null}}function c9(){return Ba===null?JT===null?(a5=!1,JT=Ba=iO()):(a5=!0,Ba=JT):Ba.next===null?(a5=!1,Ba=Ba.next=iO()):(a5=!0,Ba=Ba.next),Ba}function p9(){u9=fv=null,NE=!1,JT=null,gI=0,Ba=Lv=null}function BB(o,c){return typeof c=="function"?c(o):c}function oO(o,c,d){if(fv=t2(),Ba=c9(),a5){var _=Ba.queue;if(c=_.dispatch,Lv!==null&&(d=Lv.get(_),d!==void 0)){Lv.delete(_),_=Ba.memoizedState;do _=o(_,d.action),d=d.next;while(d!==null);return Ba.memoizedState=_,[_,c]}return[Ba.memoizedState,c]}return o=o===BB?typeof c=="function"?c():c:d!==void 0?d(c):c,Ba.memoizedState=o,o=Ba.queue={last:null,dispatch:null},o=o.dispatch=Jq.bind(null,fv,o),[Ba.memoizedState,o]}function aO(o,c){if(fv=t2(),Ba=c9(),c=c===void 0?null:c,Ba!==null){var d=Ba.memoizedState;if(d!==null&&c!==null){var _=d[1];e:if(_===null)_=!1;else{for(var C=0;C<_.length&&C<c.length;C++)if(!Xq(c[C],_[C])){_=!1;break e}_=!0}if(_)return d[0]}}return o=o(),Ba.memoizedState=[o,c],o}function Jq(o,c,d){if(25<=gI)throw Error(yi(301));if(o===fv)if(NE=!0,o={action:d,next:null},Lv===null&&(Lv=new Map),d=Lv.get(c),d===void 0)Lv.set(c,o);else{for(c=d;c.next!==null;)c=c.next;c.next=o}}function Qq(){throw Error(yi(394))}function MT(){}var sO={readContext:function(o){return o._currentValue2},useContext:function(o){return t2(),o._currentValue2},useMemo:aO,useReducer:oO,useRef:function(o){fv=t2(),Ba=c9();var c=Ba.memoizedState;return c===null?(o={current:o},Ba.memoizedState=o):c},useState:function(o){return oO(BB,o)},useInsertionEffect:MT,useLayoutEffect:function(){},useCallback:function(o,c){return aO(function(){return o},c)},useImperativeHandle:MT,useEffect:MT,useDebugValue:MT,useDeferredValue:function(o){return t2(),o},useTransition:function(){return t2(),[!1,Qq]},useId:function(){var o=u9.treeContext,c=o.overflow;o=o.id,o=(o&~(1<<32-XT(o)-1)).toString(32)+c;var d=QT;if(d===null)throw Error(yi(404));return c=U5++,o=":"+d.idPrefix+"R"+o,0<c&&(o+="H"+c.toString(32)),o+":"},useMutableSource:function(o,c){return t2(),c(o._source)},useSyncExternalStore:function(o,c,d){if(d===void 0)throw Error(yi(407));return d()}},QT=null,D8=xB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function eZ(o){return console.error(o),null}function s5(){}function tZ(o,c,d,_,C,I,z,Z,X){var oe=[],_e=new Set;return c={destination:null,responseState:c,progressiveChunkSize:_===void 0?12800:_,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:_e,pingedTasks:oe,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:C===void 0?eZ:C,onAllReady:I===void 0?s5:I,onShellReady:z===void 0?s5:z,onShellError:Z===void 0?s5:Z,onFatalError:X===void 0?s5:X},d=OE(c,0,null,d,!1,!1),d.parentFlushed=!0,o=h9(c,o,null,d,_e,DB,null,Hq),oe.push(o),c}function h9(o,c,d,_,C,I,z,Z){o.allPendingTasks++,d===null?o.pendingRootTasks++:d.pendingTasks++;var X={node:c,ping:function(){var oe=o.pingedTasks;oe.push(X),oe.length===1&&UB(o)},blockedBoundary:d,blockedSegment:_,abortSet:C,legacyContext:I,context:z,treeContext:Z};return C.add(X),X}function OE(o,c,d,_,C,I){return{status:0,id:-1,index:c,parentFlushed:!1,chunks:[],children:[],formatContext:_,boundary:d,lastPushedText:C,textEmbedded:I}}function V5(o,c){if(o=o.onError(c),o!=null&&typeof o!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof o+'" instead');return o}function RE(o,c){var d=o.onShellError;d(c),d=o.onFatalError,d(c),o.destination!==null?(o.status=2,o.destination.destroy(c)):(o.status=1,o.fatalError=c)}function lO(o,c,d,_,C){for(fv={},u9=c,U5=0,o=d(_,C);NE;)NE=!1,U5=0,gI+=1,Ba=null,o=d(_,C);return p9(),o}function uO(o,c,d,_){var C=d.render(),I=_.childContextTypes;if(I!=null){var z=c.legacyContext;if(typeof d.getChildContext!="function")_=z;else{d=d.getChildContext();for(var Z in d)if(!(Z in I))throw Error(yi(108,WD(_)||"Unknown",Z));_=x5({},z,d)}c.legacyContext=_,xf(o,c,C),c.legacyContext=z}else xf(o,c,C)}function cO(o,c){if(o&&o.defaultProps){c=x5({},c),o=o.defaultProps;for(var d in o)c[d]===void 0&&(c[d]=o[d]);return c}return c}function KD(o,c,d,_,C){if(typeof d=="function")if(d.prototype&&d.prototype.isReactComponent){C=tO(d,c.legacyContext);var I=d.contextType;I=new d(_,typeof I=="object"&&I!==null?I._currentValue2:C),nO(I,d,_,C),uO(o,c,I,d)}else{I=tO(d,c.legacyContext),C=lO(o,c,d,_,I);var z=U5!==0;if(typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0)nO(C,d,_,I),uO(o,c,C,d);else if(z){_=c.treeContext,c.treeContext=YD(_,1,0);try{xf(o,c,C)}finally{c.treeContext=_}}else xf(o,c,C)}else if(typeof d=="string"){switch(C=c.blockedSegment,I=Oq(C.chunks,d,_,o.responseState,C.formatContext),C.lastPushedText=!1,z=C.formatContext,C.formatContext=Dq(z,d,_),$D(o,c,I),C.formatContext=z,d){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:C.chunks.push("</",d,">")}C.lastPushedText=!1}else{switch(d){case Zq:case qq:case TB:case EB:case SB:xf(o,c,_.children);return;case LB:xf(o,c,_.children);return;case Vq:throw Error(yi(343));case AB:e:{d=c.blockedBoundary,C=c.blockedSegment,I=_.fallback,_=_.children,z=new Set;var Z={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:z,errorDigest:null},X=OE(o,C.chunks.length,Z,C.formatContext,!1,!1);C.children.push(X),C.lastPushedText=!1;var oe=OE(o,0,null,C.formatContext,!1,!1);oe.parentFlushed=!0,c.blockedBoundary=Z,c.blockedSegment=oe;try{if($D(o,c,_),o.responseState.generateStaticMarkup||oe.lastPushedText&&oe.textEmbedded&&oe.chunks.push("<!-- -->"),oe.status=1,BE(Z,oe),Z.pendingTasks===0)break e}catch(_e){oe.status=4,Z.forceClientRender=!0,Z.errorDigest=V5(o,_e)}finally{c.blockedBoundary=d,c.blockedSegment=C}c=h9(o,I,d,X,z,c.legacyContext,c.context,c.treeContext),o.pingedTasks.push(c)}return}if(typeof d=="object"&&d!==null)switch(d.$$typeof){case MB:if(_=lO(o,c,d.render,_,C),U5!==0){d=c.treeContext,c.treeContext=YD(d,1,0);try{xf(o,c,_)}finally{c.treeContext=d}}else xf(o,c,_);return;case PB:d=d.type,_=cO(d,_),KD(o,c,d,_,C);return;case IB:if(C=_.children,d=d._context,_=_.value,I=d._currentValue2,d._currentValue2=_,z=l2,l2=_={parent:z,depth:z===null?0:z.depth+1,context:d,parentValue:I,value:_},c.context=_,xf(o,c,C),o=l2,o===null)throw Error(yi(403));_=o.parentValue,o.context._currentValue2=_===Gq?o.context._defaultValue:_,o=l2=o.parent,c.context=o;return;case kB:_=_.children,_=_(d._currentValue2),xf(o,c,_);return;case l9:C=d._init,d=C(d._payload),_=cO(d,_),KD(o,c,d,_,void 0);return}throw Error(yi(130,d==null?d:typeof d,""))}}function xf(o,c,d){if(c.node=d,typeof d=="object"&&d!==null){switch(d.$$typeof){case Uq:KD(o,c,d.type,d.props,d.ref);return;case CB:throw Error(yi(257));case l9:var _=d._init;d=_(d._payload),xf(o,c,d);return}if(HD(d)){pO(o,c,d);return}if(d===null||typeof d!="object"?_=null:(_=eO&&d[eO]||d["@@iterator"],_=typeof _=="function"?_:null),_&&(_=_.call(d))){if(d=_.next(),!d.done){var C=[];do C.push(d.value),d=_.next();while(!d.done);pO(o,c,C)}return}throw o=Object.prototype.toString.call(d),Error(yi(31,o==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":o))}typeof d=="string"?(_=c.blockedSegment,_.lastPushedText=QN(c.blockedSegment.chunks,d,o.responseState,_.lastPushedText)):typeof d=="number"&&(_=c.blockedSegment,_.lastPushedText=QN(c.blockedSegment.chunks,""+d,o.responseState,_.lastPushedText))}function pO(o,c,d){for(var _=d.length,C=0;C<_;C++){var I=c.treeContext;c.treeContext=YD(I,_,C);try{$D(o,c,d[C])}finally{c.treeContext=I}}}function $D(o,c,d){var _=c.blockedSegment.formatContext,C=c.legacyContext,I=c.context;try{return xf(o,c,d)}catch(X){if(p9(),typeof X=="object"&&X!==null&&typeof X.then=="function"){d=X;var z=c.blockedSegment,Z=OE(o,z.chunks.length,null,z.formatContext,z.lastPushedText,!0);z.children.push(Z),z.lastPushedText=!1,o=h9(o,c.node,c.blockedBoundary,Z,c.abortSet,c.legacyContext,c.context,c.treeContext).ping,d.then(o,o),c.blockedSegment.formatContext=_,c.legacyContext=C,c.context=I,zE(I)}else throw c.blockedSegment.formatContext=_,c.legacyContext=C,c.context=I,zE(I),X}}function rZ(o){var c=o.blockedBoundary;o=o.blockedSegment,o.status=3,jB(this,c,o)}function FB(o,c,d){var _=o.blockedBoundary;o.blockedSegment.status=3,_===null?(c.allPendingTasks--,c.status!==2&&(c.status=2,c.destination!==null&&c.destination.push(null))):(_.pendingTasks--,_.forceClientRender||(_.forceClientRender=!0,o=d===void 0?Error(yi(432)):d,_.errorDigest=c.onError(o),_.parentFlushed&&c.clientRenderedBoundaries.push(_)),_.fallbackAbortableTasks.forEach(function(C){return FB(C,c,d)}),_.fallbackAbortableTasks.clear(),c.allPendingTasks--,c.allPendingTasks===0&&(_=c.onAllReady,_()))}function BE(o,c){if(c.chunks.length===0&&c.children.length===1&&c.children[0].boundary===null){var d=c.children[0];d.id=c.id,d.parentFlushed=!0,d.status===1&&BE(o,d)}else o.completedSegments.push(c)}function jB(o,c,d){if(c===null){if(d.parentFlushed){if(o.completedRootSegment!==null)throw Error(yi(389));o.completedRootSegment=d}o.pendingRootTasks--,o.pendingRootTasks===0&&(o.onShellError=s5,c=o.onShellReady,c())}else c.pendingTasks--,c.forceClientRender||(c.pendingTasks===0?(d.parentFlushed&&d.status===1&&BE(c,d),c.parentFlushed&&o.completedBoundaries.push(c),c.fallbackAbortableTasks.forEach(rZ,o),c.fallbackAbortableTasks.clear()):d.parentFlushed&&d.status===1&&(BE(c,d),c.completedSegments.length===1&&c.parentFlushed&&o.partialBoundaries.push(c)));o.allPendingTasks--,o.allPendingTasks===0&&(o=o.onAllReady,o())}function UB(o){if(o.status!==2){var c=l2,d=D8.current;D8.current=sO;var _=QT;QT=o.responseState;try{var C=o.pingedTasks,I;for(I=0;I<C.length;I++){var z=C[I],Z=o,X=z.blockedSegment;if(X.status===0){zE(z.context);try{xf(Z,z,z.node),Z.responseState.generateStaticMarkup||X.lastPushedText&&X.textEmbedded&&X.chunks.push("<!-- -->"),z.abortSet.delete(z),X.status=1,jB(Z,z.blockedBoundary,X)}catch(We){if(p9(),typeof We=="object"&&We!==null&&typeof We.then=="function"){var oe=z.ping;We.then(oe,oe)}else{z.abortSet.delete(z),X.status=4;var _e=z.blockedBoundary,Se=We,Ne=V5(Z,Se);if(_e===null?RE(Z,Se):(_e.pendingTasks--,_e.forceClientRender||(_e.forceClientRender=!0,_e.errorDigest=Ne,_e.parentFlushed&&Z.clientRenderedBoundaries.push(_e))),Z.allPendingTasks--,Z.allPendingTasks===0){var $e=Z.onAllReady;$e()}}}finally{}}}C.splice(0,I),o.destination!==null&&d9(o,o.destination)}catch(We){V5(o,We),RE(o,We)}finally{QT=_,D8.current=d,d===sO&&zE(c)}}}function AT(o,c,d){switch(d.parentFlushed=!0,d.status){case 0:var _=d.id=o.nextSegmentId++;return d.lastPushedText=!1,d.textEmbedded=!1,o=o.responseState,c.push('<template id="'),c.push(o.placeholderPrefix),o=_.toString(16),c.push(o),c.push('"></template>');case 1:d.status=2;var C=!0;_=d.chunks;var I=0;d=d.children;for(var z=0;z<d.length;z++){for(C=d[z];I<C.index;I++)c.push(_[I]);C=yI(o,c,C)}for(;I<_.length-1;I++)c.push(_[I]);return I<_.length&&(C=c.push(_[I])),C;default:throw Error(yi(390))}}function yI(o,c,d){var _=d.boundary;if(_===null)return AT(o,c,d);if(_.parentFlushed=!0,_.forceClientRender)return o.responseState.generateStaticMarkup||(_=_.errorDigest,c.push("<!--$!-->"),c.push("<template"),_&&(c.push(' data-dgst="'),_=Nh(_),c.push(_),c.push('"')),c.push("></template>")),AT(o,c,d),o=o.responseState.generateStaticMarkup?!0:c.push("<!--/$-->"),o;if(0<_.pendingTasks){_.rootSegmentID=o.nextSegmentId++,0<_.completedSegments.length&&o.partialBoundaries.push(_);var C=o.responseState,I=C.nextSuspenseID++;return C=C.boundaryPrefix+I.toString(16),_=_.id=C,JN(c,o.responseState,_),AT(o,c,d),c.push("<!--/$-->")}if(_.byteSize>o.progressiveChunkSize)return _.rootSegmentID=o.nextSegmentId++,o.completedBoundaries.push(_),JN(c,o.responseState,_.id),AT(o,c,d),c.push("<!--/$-->");if(o.responseState.generateStaticMarkup||c.push("<!--$-->"),d=_.completedSegments,d.length!==1)throw Error(yi(391));return yI(o,c,d[0]),o=o.responseState.generateStaticMarkup?!0:c.push("<!--/$-->"),o}function hO(o,c,d){return Rq(c,o.responseState,d.formatContext,d.id),yI(o,c,d),Bq(c,d.formatContext)}function dO(o,c,d){for(var _=d.completedSegments,C=0;C<_.length;C++)VB(o,c,d,_[C]);if(_.length=0,o=o.responseState,_=d.id,d=d.rootSegmentID,c.push(o.startInlineScript),o.sentCompleteBoundaryFunction?c.push('$RC("'):(o.sentCompleteBoundaryFunction=!0,c.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),_===null)throw Error(yi(395));return d=d.toString(16),c.push(_),c.push('","'),c.push(o.segmentPrefix),c.push(d),c.push('")<\/script>')}function VB(o,c,d,_){if(_.status===2)return!0;var C=_.id;if(C===-1){if((_.id=d.rootSegmentID)===-1)throw Error(yi(392));return hO(o,c,_)}return hO(o,c,_),o=o.responseState,c.push(o.startInlineScript),o.sentCompleteSegmentFunction?c.push('$RS("'):(o.sentCompleteSegmentFunction=!0,c.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),c.push(o.segmentPrefix),C=C.toString(16),c.push(C),c.push('","'),c.push(o.placeholderPrefix),c.push(C),c.push('")<\/script>')}function d9(o,c){try{var d=o.completedRootSegment;if(d!==null&&o.pendingRootTasks===0){yI(o,c,d),o.completedRootSegment=null;var _=o.responseState.bootstrapChunks;for(d=0;d<_.length-1;d++)c.push(_[d]);d<_.length&&c.push(_[d])}var C=o.clientRenderedBoundaries,I;for(I=0;I<C.length;I++){var z=C[I];_=c;var Z=o.responseState,X=z.id,oe=z.errorDigest,_e=z.errorMessage,Se=z.errorComponentStack;if(_.push(Z.startInlineScript),Z.sentClientRenderFunction?_.push('$RX("'):(Z.sentClientRenderFunction=!0,_.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),X===null)throw Error(yi(395));if(_.push(X),_.push('"'),oe||_e||Se){_.push(",");var Ne=P8(oe||"");_.push(Ne)}if(_e||Se){_.push(",");var $e=P8(_e||"");_.push($e)}if(Se){_.push(",");var We=P8(Se);_.push(We)}if(!_.push(")<\/script>")){o.destination=null,I++,C.splice(0,I);return}}C.splice(0,I);var Ze=o.completedBoundaries;for(I=0;I<Ze.length;I++)if(!dO(o,c,Ze[I])){o.destination=null,I++,Ze.splice(0,I);return}Ze.splice(0,I);var ct=o.partialBoundaries;for(I=0;I<ct.length;I++){var Oe=ct[I];e:{C=o,z=c;var Be=Oe.completedSegments;for(Z=0;Z<Be.length;Z++)if(!VB(C,z,Oe,Be[Z])){Z++,Be.splice(0,Z);var Xe=!1;break e}Be.splice(0,Z),Xe=!0}if(!Xe){o.destination=null,I++,ct.splice(0,I);return}}ct.splice(0,I);var Et=o.completedBoundaries;for(I=0;I<Et.length;I++)if(!dO(o,c,Et[I])){o.destination=null,I++,Et.splice(0,I);return}Et.splice(0,I)}finally{o.allPendingTasks===0&&o.pingedTasks.length===0&&o.clientRenderedBoundaries.length===0&&o.completedBoundaries.length===0&&c.push(null)}}function nZ(o,c){try{var d=o.abortableTasks;d.forEach(function(_){return FB(_,o,c)}),d.clear(),o.destination!==null&&d9(o,o.destination)}catch(_){V5(o,_),RE(o,_)}}function iZ(){}function qB(o,c,d,_){var C=!1,I=null,z="",Z={push:function(oe){return oe!==null&&(z+=oe),!0},destroy:function(oe){C=!0,I=oe}},X=!1;if(o=tZ(o,jq(d,c?c.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,iZ,void 0,function(){X=!0},void 0,void 0),UB(o),nZ(o,_),o.status===1)o.status=2,Z.destroy(o.fatalError);else if(o.status!==2&&o.destination===null){o.destination=Z;try{d9(o,Z)}catch(oe){V5(o,oe),RE(o,oe)}}if(C)throw I;if(!X)throw Error(yi(426));return z}fw.renderToNodeStream=function(){throw Error(yi(207))};fw.renderToStaticMarkup=function(o,c){return qB(o,c,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};fw.renderToStaticNodeStream=function(){throw Error(yi(208))};fw.renderToString=function(o,c){return qB(o,c,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};fw.version="18.2.0";var f9={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZB=Re;function ji(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wf=null,bf=0;function Gr(o,c){if(c.length!==0)if(512<c.length)0<bf&&(o.enqueue(new Uint8Array(wf.buffer,0,bf)),wf=new Uint8Array(512),bf=0),o.enqueue(c);else{var d=wf.length-bf;d<c.length&&(d===0?o.enqueue(wf):(wf.set(c.subarray(0,d),bf),o.enqueue(wf),c=c.subarray(d)),wf=new Uint8Array(512),bf=0),wf.set(c,bf),bf+=c.length}}function ds(o,c){return Gr(o,c),!0}function fO(o){wf&&0<bf&&(o.enqueue(new Uint8Array(wf.buffer,0,bf)),wf=null,bf=0)}var GB=new TextEncoder;function Vi(o){return GB.encode(o)}function gr(o){return GB.encode(o)}function HB(o,c){typeof o.error=="function"?o.error(c):o.close()}var qh=Object.prototype.hasOwnProperty,oZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mO={},gO={};function WB(o){return qh.call(gO,o)?!0:qh.call(mO,o)?!1:oZ.test(o)?gO[o]=!0:(mO[o]=!0,!1)}function jh(o,c,d,_,C,I,z){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=_,this.attributeNamespace=C,this.mustUseProperty=d,this.propertyName=o,this.type=c,this.sanitizeURL=I,this.removeEmptyString=z}var np={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){np[o]=new jh(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];np[c]=new jh(c,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){np[o]=new jh(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){np[o]=new jh(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){np[o]=new jh(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){np[o]=new jh(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){np[o]=new jh(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){np[o]=new jh(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){np[o]=new jh(o,5,!1,o.toLowerCase(),null,!1,!1)});var m9=/[\-:]([a-z])/g;function g9(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(m9,g9);np[c]=new jh(c,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(m9,g9);np[c]=new jh(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(m9,g9);np[c]=new jh(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){np[o]=new jh(o,1,!1,o.toLowerCase(),null,!1,!1)});np.xlinkHref=new jh("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){np[o]=new jh(o,1,!1,o.toLowerCase(),null,!0,!0)});var eE={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aZ=["Webkit","ms","Moz","O"];Object.keys(eE).forEach(function(o){aZ.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),eE[c]=eE[o]})});var sZ=/["'&<>]/;function Qc(o){if(typeof o=="boolean"||typeof o=="number")return""+o;o=""+o;var c=sZ.exec(o);if(c){var d="",_,C=0;for(_=c.index;_<o.length;_++){switch(o.charCodeAt(_)){case 34:c="&quot;";break;case 38:c="&amp;";break;case 39:c="&#x27;";break;case 60:c="&lt;";break;case 62:c="&gt;";break;default:continue}C!==_&&(d+=o.substring(C,_)),C=_+1,d+=c}o=C!==_?d+o.substring(C,_):d}return o}var lZ=/([A-Z])/g,uZ=/^ms-/,XD=Array.isArray,cZ=gr("<script>"),pZ=gr("<\/script>"),hZ=gr('<script src="'),dZ=gr('<script type="module" src="'),yO=gr('" async=""><\/script>'),fZ=/(<\/|<)(s)(cript)/gi;function mZ(o,c,d,_){return""+c+(d==="s"?"\\u0073":"\\u0053")+_}function gZ(o,c,d,_,C){o=o===void 0?"":o,c=c===void 0?cZ:gr('<script nonce="'+Qc(c)+'">');var I=[];if(d!==void 0&&I.push(c,Vi((""+d).replace(fZ,mZ)),pZ),_!==void 0)for(d=0;d<_.length;d++)I.push(hZ,Vi(Qc(_[d])),yO);if(C!==void 0)for(_=0;_<C.length;_++)I.push(dZ,Vi(Qc(C[_])),yO);return{bootstrapChunks:I,startInlineScript:c,placeholderPrefix:gr(o+"P:"),segmentPrefix:gr(o+"S:"),boundaryPrefix:o+"B:",idPrefix:o,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Wg(o,c){return{insertionMode:o,selectedValue:c}}function yZ(o){return Wg(o==="http://www.w3.org/2000/svg"?2:o==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function vZ(o,c,d){switch(c){case"select":return Wg(1,d.value!=null?d.value:d.defaultValue);case"svg":return Wg(2,null);case"math":return Wg(3,null);case"foreignObject":return Wg(1,null);case"table":return Wg(4,null);case"thead":case"tbody":case"tfoot":return Wg(5,null);case"colgroup":return Wg(7,null);case"tr":return Wg(6,null)}return 4<=o.insertionMode||o.insertionMode===0?Wg(1,null):o}var y9=gr("<!-- -->");function vO(o,c,d,_){return c===""?_:(_&&o.push(y9),o.push(Vi(Qc(c))),!0)}var _O=new Map,_Z=gr(' style="'),xO=gr(":"),xZ=gr(";");function YB(o,c,d){if(typeof d!="object")throw Error(ji(62));c=!0;for(var _ in d)if(qh.call(d,_)){var C=d[_];if(C!=null&&typeof C!="boolean"&&C!==""){if(_.indexOf("--")===0){var I=Vi(Qc(_));C=Vi(Qc((""+C).trim()))}else{I=_;var z=_O.get(I);z!==void 0||(z=gr(Qc(I.replace(lZ,"-$1").toLowerCase().replace(uZ,"-ms-"))),_O.set(I,z)),I=z,C=typeof C=="number"?C===0||qh.call(eE,_)?Vi(""+C):Vi(C+"px"):Vi(Qc((""+C).trim()))}c?(c=!1,o.push(_Z,I,xO,C)):o.push(xZ,I,xO,C)}}c||o.push(r2)}var wv=gr(" "),D2=gr('="'),r2=gr('"'),wO=gr('=""');function vf(o,c,d,_){switch(d){case"style":YB(o,c,_);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N"){if(c=np.hasOwnProperty(d)?np[d]:null,c!==null){switch(typeof _){case"function":case"symbol":return;case"boolean":if(!c.acceptsBooleans)return}switch(d=Vi(c.attributeName),c.type){case 3:_&&o.push(wv,d,wO);break;case 4:_===!0?o.push(wv,d,wO):_!==!1&&o.push(wv,d,D2,Vi(Qc(_)),r2);break;case 5:isNaN(_)||o.push(wv,d,D2,Vi(Qc(_)),r2);break;case 6:!isNaN(_)&&1<=_&&o.push(wv,d,D2,Vi(Qc(_)),r2);break;default:c.sanitizeURL&&(_=""+_),o.push(wv,d,D2,Vi(Qc(_)),r2)}}else if(WB(d)){switch(typeof _){case"function":case"symbol":return;case"boolean":if(c=d.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-")return}o.push(wv,Vi(d),D2,Vi(Qc(_)),r2)}}}var bv=gr(">"),bO=gr("/>");function tE(o,c,d){if(c!=null){if(d!=null)throw Error(ji(60));if(typeof c!="object"||!("__html"in c))throw Error(ji(61));c=c.__html,c!=null&&o.push(Vi(""+c))}}function wZ(o){var c="";return ZB.Children.forEach(o,function(d){d!=null&&(c+=d)}),c}var z8=gr(' selected=""');function N8(o,c,d,_){o.push(Yg(d));var C=d=null,I;for(I in c)if(qh.call(c,I)){var z=c[I];if(z!=null)switch(I){case"children":d=z;break;case"dangerouslySetInnerHTML":C=z;break;default:vf(o,_,I,z)}}return o.push(bv),tE(o,C,d),typeof d=="string"?(o.push(Vi(Qc(d))),null):d}var O8=gr(`
`),bZ=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,CO=new Map;function Yg(o){var c=CO.get(o);if(c===void 0){if(!bZ.test(o))throw Error(ji(65,o));c=gr("<"+o),CO.set(o,c)}return c}var CZ=gr("<!DOCTYPE html>");function SZ(o,c,d,_,C){switch(c){case"select":o.push(Yg("select"));var I=null,z=null;for(_e in d)if(qh.call(d,_e)){var Z=d[_e];if(Z!=null)switch(_e){case"children":I=Z;break;case"dangerouslySetInnerHTML":z=Z;break;case"defaultValue":case"value":break;default:vf(o,_,_e,Z)}}return o.push(bv),tE(o,z,I),I;case"option":z=C.selectedValue,o.push(Yg("option"));var X=Z=null,oe=null,_e=null;for(I in d)if(qh.call(d,I)){var Se=d[I];if(Se!=null)switch(I){case"children":Z=Se;break;case"selected":oe=Se;break;case"dangerouslySetInnerHTML":_e=Se;break;case"value":X=Se;default:vf(o,_,I,Se)}}if(z!=null)if(d=X!==null?""+X:wZ(Z),XD(z)){for(_=0;_<z.length;_++)if(""+z[_]===d){o.push(z8);break}}else""+z===d&&o.push(z8);else oe&&o.push(z8);return o.push(bv),tE(o,_e,Z),Z;case"textarea":o.push(Yg("textarea")),_e=z=I=null;for(Z in d)if(qh.call(d,Z)&&(X=d[Z],X!=null))switch(Z){case"children":_e=X;break;case"value":I=X;break;case"defaultValue":z=X;break;case"dangerouslySetInnerHTML":throw Error(ji(91));default:vf(o,_,Z,X)}if(I===null&&z!==null&&(I=z),o.push(bv),_e!=null){if(I!=null)throw Error(ji(92));if(XD(_e)&&1<_e.length)throw Error(ji(93));I=""+_e}return typeof I=="string"&&I[0]===`
`&&o.push(O8),I!==null&&o.push(Vi(Qc(""+I))),null;case"input":o.push(Yg("input")),X=_e=Z=I=null;for(z in d)if(qh.call(d,z)&&(oe=d[z],oe!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(ji(399,"input"));case"defaultChecked":X=oe;break;case"defaultValue":Z=oe;break;case"checked":_e=oe;break;case"value":I=oe;break;default:vf(o,_,z,oe)}return _e!==null?vf(o,_,"checked",_e):X!==null&&vf(o,_,"checked",X),I!==null?vf(o,_,"value",I):Z!==null&&vf(o,_,"value",Z),o.push(bO),null;case"menuitem":o.push(Yg("menuitem"));for(var Ne in d)if(qh.call(d,Ne)&&(I=d[Ne],I!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(ji(400));default:vf(o,_,Ne,I)}return o.push(bv),null;case"title":o.push(Yg("title")),I=null;for(Se in d)if(qh.call(d,Se)&&(z=d[Se],z!=null))switch(Se){case"children":I=z;break;case"dangerouslySetInnerHTML":throw Error(ji(434));default:vf(o,_,Se,z)}return o.push(bv),I;case"listing":case"pre":o.push(Yg(c)),z=I=null;for(X in d)if(qh.call(d,X)&&(Z=d[X],Z!=null))switch(X){case"children":I=Z;break;case"dangerouslySetInnerHTML":z=Z;break;default:vf(o,_,X,Z)}if(o.push(bv),z!=null){if(I!=null)throw Error(ji(60));if(typeof z!="object"||!("__html"in z))throw Error(ji(61));d=z.__html,d!=null&&(typeof d=="string"&&0<d.length&&d[0]===`
`?o.push(O8,Vi(d)):o.push(Vi(""+d)))}return typeof I=="string"&&I[0]===`
`&&o.push(O8),I;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":o.push(Yg(c));for(var $e in d)if(qh.call(d,$e)&&(I=d[$e],I!=null))switch($e){case"children":case"dangerouslySetInnerHTML":throw Error(ji(399,c));default:vf(o,_,$e,I)}return o.push(bO),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return N8(o,d,c,_);case"html":return C.insertionMode===0&&o.push(CZ),N8(o,d,c,_);default:if(c.indexOf("-")===-1&&typeof d.is!="string")return N8(o,d,c,_);o.push(Yg(c)),z=I=null;for(oe in d)if(qh.call(d,oe)&&(Z=d[oe],Z!=null))switch(oe){case"children":I=Z;break;case"dangerouslySetInnerHTML":z=Z;break;case"style":YB(o,_,Z);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:WB(oe)&&typeof Z!="function"&&typeof Z!="symbol"&&o.push(wv,Vi(oe),D2,Vi(Qc(Z)),r2)}return o.push(bv),tE(o,z,I),I}}var TZ=gr("</"),EZ=gr(">"),IZ=gr('<template id="'),kZ=gr('"></template>'),MZ=gr("<!--$-->"),AZ=gr('<!--$?--><template id="'),LZ=gr('"></template>'),PZ=gr("<!--$!-->"),DZ=gr("<!--/$-->"),zZ=gr("<template"),NZ=gr('"'),OZ=gr(' data-dgst="');gr(' data-msg="');gr(' data-stck="');var RZ=gr("></template>");function SO(o,c,d){if(Gr(o,AZ),d===null)throw Error(ji(395));return Gr(o,d),ds(o,LZ)}var BZ=gr('<div hidden id="'),FZ=gr('">'),jZ=gr("</div>"),UZ=gr('<svg aria-hidden="true" style="display:none" id="'),VZ=gr('">'),qZ=gr("</svg>"),ZZ=gr('<math aria-hidden="true" style="display:none" id="'),GZ=gr('">'),HZ=gr("</math>"),WZ=gr('<table hidden id="'),YZ=gr('">'),KZ=gr("</table>"),$Z=gr('<table hidden><tbody id="'),XZ=gr('">'),JZ=gr("</tbody></table>"),QZ=gr('<table hidden><tr id="'),eG=gr('">'),tG=gr("</tr></table>"),rG=gr('<table hidden><colgroup id="'),nG=gr('">'),iG=gr("</colgroup></table>");function oG(o,c,d,_){switch(d.insertionMode){case 0:case 1:return Gr(o,BZ),Gr(o,c.segmentPrefix),Gr(o,Vi(_.toString(16))),ds(o,FZ);case 2:return Gr(o,UZ),Gr(o,c.segmentPrefix),Gr(o,Vi(_.toString(16))),ds(o,VZ);case 3:return Gr(o,ZZ),Gr(o,c.segmentPrefix),Gr(o,Vi(_.toString(16))),ds(o,GZ);case 4:return Gr(o,WZ),Gr(o,c.segmentPrefix),Gr(o,Vi(_.toString(16))),ds(o,YZ);case 5:return Gr(o,$Z),Gr(o,c.segmentPrefix),Gr(o,Vi(_.toString(16))),ds(o,XZ);case 6:return Gr(o,QZ),Gr(o,c.segmentPrefix),Gr(o,Vi(_.toString(16))),ds(o,eG);case 7:return Gr(o,rG),Gr(o,c.segmentPrefix),Gr(o,Vi(_.toString(16))),ds(o,nG);default:throw Error(ji(397))}}function aG(o,c){switch(c.insertionMode){case 0:case 1:return ds(o,jZ);case 2:return ds(o,qZ);case 3:return ds(o,HZ);case 4:return ds(o,KZ);case 5:return ds(o,JZ);case 6:return ds(o,tG);case 7:return ds(o,iG);default:throw Error(ji(397))}}var sG=gr('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),lG=gr('$RS("'),uG=gr('","'),cG=gr('")<\/script>'),pG=gr('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),hG=gr('$RC("'),dG=gr('","'),fG=gr('")<\/script>'),mG=gr('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),gG=gr('$RX("'),yG=gr('"'),vG=gr(")<\/script>"),R8=gr(","),_G=/[<\u2028\u2029]/g;function B8(o){return JSON.stringify(o).replace(_G,function(c){switch(c){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var w5=Object.assign,xG=Symbol.for("react.element"),KB=Symbol.for("react.portal"),$B=Symbol.for("react.fragment"),XB=Symbol.for("react.strict_mode"),JB=Symbol.for("react.profiler"),QB=Symbol.for("react.provider"),eF=Symbol.for("react.context"),tF=Symbol.for("react.forward_ref"),rF=Symbol.for("react.suspense"),nF=Symbol.for("react.suspense_list"),iF=Symbol.for("react.memo"),v9=Symbol.for("react.lazy"),wG=Symbol.for("react.scope"),bG=Symbol.for("react.debug_trace_mode"),CG=Symbol.for("react.legacy_hidden"),SG=Symbol.for("react.default_value"),TO=Symbol.iterator;function JD(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case $B:return"Fragment";case KB:return"Portal";case JB:return"Profiler";case XB:return"StrictMode";case rF:return"Suspense";case nF:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case eF:return(o.displayName||"Context")+".Consumer";case QB:return(o._context.displayName||"Context")+".Provider";case tF:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case iF:return c=o.displayName||null,c!==null?c:JD(o.type)||"Memo";case v9:c=o._payload,o=o._init;try{return JD(o(c))}catch{}}return null}var oF={};function EO(o,c){if(o=o.contextTypes,!o)return oF;var d={},_;for(_ in o)d[_]=c[_];return d}var u2=null;function vI(o,c){if(o!==c){o.context._currentValue=o.parentValue,o=o.parent;var d=c.parent;if(o===null){if(d!==null)throw Error(ji(401))}else{if(d===null)throw Error(ji(401));vI(o,d)}c.context._currentValue=c.value}}function aF(o){o.context._currentValue=o.parentValue,o=o.parent,o!==null&&aF(o)}function sF(o){var c=o.parent;c!==null&&sF(c),o.context._currentValue=o.value}function lF(o,c){if(o.context._currentValue=o.parentValue,o=o.parent,o===null)throw Error(ji(402));o.depth===c.depth?vI(o,c):lF(o,c)}function uF(o,c){var d=c.parent;if(d===null)throw Error(ji(402));o.depth===d.depth?vI(o,d):uF(o,d),c.context._currentValue=c.value}function FE(o){var c=u2;c!==o&&(c===null?sF(o):o===null?aF(c):c.depth===o.depth?vI(c,o):c.depth>o.depth?lF(c,o):uF(c,o),u2=o)}var IO={isMounted:function(){return!1},enqueueSetState:function(o,c){o=o._reactInternals,o.queue!==null&&o.queue.push(c)},enqueueReplaceState:function(o,c){o=o._reactInternals,o.replace=!0,o.queue=[c]},enqueueForceUpdate:function(){}};function kO(o,c,d,_){var C=o.state!==void 0?o.state:null;o.updater=IO,o.props=d,o.state=C;var I={queue:[],replace:!1};o._reactInternals=I;var z=c.contextType;if(o.context=typeof z=="object"&&z!==null?z._currentValue:_,z=c.getDerivedStateFromProps,typeof z=="function"&&(z=z(d,C),C=z==null?C:w5({},C,z),o.state=C),typeof c.getDerivedStateFromProps!="function"&&typeof o.getSnapshotBeforeUpdate!="function"&&(typeof o.UNSAFE_componentWillMount=="function"||typeof o.componentWillMount=="function"))if(c=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),c!==o.state&&IO.enqueueReplaceState(o,o.state,null),I.queue!==null&&0<I.queue.length)if(c=I.queue,z=I.replace,I.queue=null,I.replace=!1,z&&c.length===1)o.state=c[0];else{for(I=z?c[0]:o.state,C=!0,z=z?1:0;z<c.length;z++){var Z=c[z];Z=typeof Z=="function"?Z.call(o,I,d,_):Z,Z!=null&&(C?(C=!1,I=w5({},I,Z)):w5(I,Z))}o.state=I}else I.queue=null}var TG={id:1,overflow:""};function QD(o,c,d){var _=o.id;o=o.overflow;var C=32-rE(_)-1;_&=~(1<<C),d+=1;var I=32-rE(c)+C;if(30<I){var z=C-C%5;return I=(_&(1<<z)-1).toString(32),_>>=z,C-=z,{id:1<<32-rE(c)+C|d<<C|_,overflow:I+o}}return{id:1<<I|d<<C|_,overflow:o}}var rE=Math.clz32?Math.clz32:kG,EG=Math.log,IG=Math.LN2;function kG(o){return o>>>=0,o===0?32:31-(EG(o)/IG|0)|0}function MG(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var AG=typeof Object.is=="function"?Object.is:MG,mv=null,_9=null,nE=null,Fa=null,l5=!1,jE=!1,q5=0,Pv=null,_I=0;function n2(){if(mv===null)throw Error(ji(321));return mv}function MO(){if(0<_I)throw Error(ji(312));return{memoizedState:null,queue:null,next:null}}function x9(){return Fa===null?nE===null?(l5=!1,nE=Fa=MO()):(l5=!0,Fa=nE):Fa.next===null?(l5=!1,Fa=Fa.next=MO()):(l5=!0,Fa=Fa.next),Fa}function w9(){_9=mv=null,jE=!1,nE=null,_I=0,Fa=Pv=null}function cF(o,c){return typeof c=="function"?c(o):c}function AO(o,c,d){if(mv=n2(),Fa=x9(),l5){var _=Fa.queue;if(c=_.dispatch,Pv!==null&&(d=Pv.get(_),d!==void 0)){Pv.delete(_),_=Fa.memoizedState;do _=o(_,d.action),d=d.next;while(d!==null);return Fa.memoizedState=_,[_,c]}return[Fa.memoizedState,c]}return o=o===cF?typeof c=="function"?c():c:d!==void 0?d(c):c,Fa.memoizedState=o,o=Fa.queue={last:null,dispatch:null},o=o.dispatch=LG.bind(null,mv,o),[Fa.memoizedState,o]}function LO(o,c){if(mv=n2(),Fa=x9(),c=c===void 0?null:c,Fa!==null){var d=Fa.memoizedState;if(d!==null&&c!==null){var _=d[1];e:if(_===null)_=!1;else{for(var C=0;C<_.length&&C<c.length;C++)if(!AG(c[C],_[C])){_=!1;break e}_=!0}if(_)return d[0]}}return o=o(),Fa.memoizedState=[o,c],o}function LG(o,c,d){if(25<=_I)throw Error(ji(301));if(o===mv)if(jE=!0,o={action:d,next:null},Pv===null&&(Pv=new Map),d=Pv.get(c),d===void 0)Pv.set(c,o);else{for(c=d;c.next!==null;)c=c.next;c.next=o}}function PG(){throw Error(ji(394))}function LT(){}var PO={readContext:function(o){return o._currentValue},useContext:function(o){return n2(),o._currentValue},useMemo:LO,useReducer:AO,useRef:function(o){mv=n2(),Fa=x9();var c=Fa.memoizedState;return c===null?(o={current:o},Fa.memoizedState=o):c},useState:function(o){return AO(cF,o)},useInsertionEffect:LT,useLayoutEffect:function(){},useCallback:function(o,c){return LO(function(){return o},c)},useImperativeHandle:LT,useEffect:LT,useDebugValue:LT,useDeferredValue:function(o){return n2(),o},useTransition:function(){return n2(),[!1,PG]},useId:function(){var o=_9.treeContext,c=o.overflow;o=o.id,o=(o&~(1<<32-rE(o)-1)).toString(32)+c;var d=iE;if(d===null)throw Error(ji(404));return c=q5++,o=":"+d.idPrefix+"R"+o,0<c&&(o+="H"+c.toString(32)),o+":"},useMutableSource:function(o,c){return n2(),c(o._source)},useSyncExternalStore:function(o,c,d){if(d===void 0)throw Error(ji(407));return d()}},iE=null,F8=ZB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function DG(o){return console.error(o),null}function u5(){}function zG(o,c,d,_,C,I,z,Z,X){var oe=[],_e=new Set;return c={destination:null,responseState:c,progressiveChunkSize:_===void 0?12800:_,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:_e,pingedTasks:oe,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:C===void 0?DG:C,onAllReady:I===void 0?u5:I,onShellReady:z===void 0?u5:z,onShellError:Z===void 0?u5:Z,onFatalError:X===void 0?u5:X},d=UE(c,0,null,d,!1,!1),d.parentFlushed=!0,o=b9(c,o,null,d,_e,oF,null,TG),oe.push(o),c}function b9(o,c,d,_,C,I,z,Z){o.allPendingTasks++,d===null?o.pendingRootTasks++:d.pendingTasks++;var X={node:c,ping:function(){var oe=o.pingedTasks;oe.push(X),oe.length===1&&dF(o)},blockedBoundary:d,blockedSegment:_,abortSet:C,legacyContext:I,context:z,treeContext:Z};return C.add(X),X}function UE(o,c,d,_,C,I){return{status:0,id:-1,index:c,parentFlushed:!1,chunks:[],children:[],formatContext:_,boundary:d,lastPushedText:C,textEmbedded:I}}function Z5(o,c){if(o=o.onError(c),o!=null&&typeof o!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof o+'" instead');return o}function VE(o,c){var d=o.onShellError;d(c),d=o.onFatalError,d(c),o.destination!==null?(o.status=2,HB(o.destination,c)):(o.status=1,o.fatalError=c)}function DO(o,c,d,_,C){for(mv={},_9=c,q5=0,o=d(_,C);jE;)jE=!1,q5=0,_I+=1,Fa=null,o=d(_,C);return w9(),o}function zO(o,c,d,_){var C=d.render(),I=_.childContextTypes;if(I!=null){var z=c.legacyContext;if(typeof d.getChildContext!="function")_=z;else{d=d.getChildContext();for(var Z in d)if(!(Z in I))throw Error(ji(108,JD(_)||"Unknown",Z));_=w5({},z,d)}c.legacyContext=_,Cf(o,c,C),c.legacyContext=z}else Cf(o,c,C)}function NO(o,c){if(o&&o.defaultProps){c=w5({},c),o=o.defaultProps;for(var d in o)c[d]===void 0&&(c[d]=o[d]);return c}return c}function ez(o,c,d,_,C){if(typeof d=="function")if(d.prototype&&d.prototype.isReactComponent){C=EO(d,c.legacyContext);var I=d.contextType;I=new d(_,typeof I=="object"&&I!==null?I._currentValue:C),kO(I,d,_,C),zO(o,c,I,d)}else{I=EO(d,c.legacyContext),C=DO(o,c,d,_,I);var z=q5!==0;if(typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0)kO(C,d,_,I),zO(o,c,C,d);else if(z){_=c.treeContext,c.treeContext=QD(_,1,0);try{Cf(o,c,C)}finally{c.treeContext=_}}else Cf(o,c,C)}else if(typeof d=="string"){switch(C=c.blockedSegment,I=SZ(C.chunks,d,_,o.responseState,C.formatContext),C.lastPushedText=!1,z=C.formatContext,C.formatContext=vZ(z,d,_),tz(o,c,I),C.formatContext=z,d){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:C.chunks.push(TZ,Vi(d),EZ)}C.lastPushedText=!1}else{switch(d){case CG:case bG:case XB:case JB:case $B:Cf(o,c,_.children);return;case nF:Cf(o,c,_.children);return;case wG:throw Error(ji(343));case rF:e:{d=c.blockedBoundary,C=c.blockedSegment,I=_.fallback,_=_.children,z=new Set;var Z={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:z,errorDigest:null},X=UE(o,C.chunks.length,Z,C.formatContext,!1,!1);C.children.push(X),C.lastPushedText=!1;var oe=UE(o,0,null,C.formatContext,!1,!1);oe.parentFlushed=!0,c.blockedBoundary=Z,c.blockedSegment=oe;try{if(tz(o,c,_),oe.lastPushedText&&oe.textEmbedded&&oe.chunks.push(y9),oe.status=1,qE(Z,oe),Z.pendingTasks===0)break e}catch(_e){oe.status=4,Z.forceClientRender=!0,Z.errorDigest=Z5(o,_e)}finally{c.blockedBoundary=d,c.blockedSegment=C}c=b9(o,I,d,X,z,c.legacyContext,c.context,c.treeContext),o.pingedTasks.push(c)}return}if(typeof d=="object"&&d!==null)switch(d.$$typeof){case tF:if(_=DO(o,c,d.render,_,C),q5!==0){d=c.treeContext,c.treeContext=QD(d,1,0);try{Cf(o,c,_)}finally{c.treeContext=d}}else Cf(o,c,_);return;case iF:d=d.type,_=NO(d,_),ez(o,c,d,_,C);return;case QB:if(C=_.children,d=d._context,_=_.value,I=d._currentValue,d._currentValue=_,z=u2,u2=_={parent:z,depth:z===null?0:z.depth+1,context:d,parentValue:I,value:_},c.context=_,Cf(o,c,C),o=u2,o===null)throw Error(ji(403));_=o.parentValue,o.context._currentValue=_===SG?o.context._defaultValue:_,o=u2=o.parent,c.context=o;return;case eF:_=_.children,_=_(d._currentValue),Cf(o,c,_);return;case v9:C=d._init,d=C(d._payload),_=NO(d,_),ez(o,c,d,_,void 0);return}throw Error(ji(130,d==null?d:typeof d,""))}}function Cf(o,c,d){if(c.node=d,typeof d=="object"&&d!==null){switch(d.$$typeof){case xG:ez(o,c,d.type,d.props,d.ref);return;case KB:throw Error(ji(257));case v9:var _=d._init;d=_(d._payload),Cf(o,c,d);return}if(XD(d)){OO(o,c,d);return}if(d===null||typeof d!="object"?_=null:(_=TO&&d[TO]||d["@@iterator"],_=typeof _=="function"?_:null),_&&(_=_.call(d))){if(d=_.next(),!d.done){var C=[];do C.push(d.value),d=_.next();while(!d.done);OO(o,c,C)}return}throw o=Object.prototype.toString.call(d),Error(ji(31,o==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":o))}typeof d=="string"?(_=c.blockedSegment,_.lastPushedText=vO(c.blockedSegment.chunks,d,o.responseState,_.lastPushedText)):typeof d=="number"&&(_=c.blockedSegment,_.lastPushedText=vO(c.blockedSegment.chunks,""+d,o.responseState,_.lastPushedText))}function OO(o,c,d){for(var _=d.length,C=0;C<_;C++){var I=c.treeContext;c.treeContext=QD(I,_,C);try{tz(o,c,d[C])}finally{c.treeContext=I}}}function tz(o,c,d){var _=c.blockedSegment.formatContext,C=c.legacyContext,I=c.context;try{return Cf(o,c,d)}catch(X){if(w9(),typeof X=="object"&&X!==null&&typeof X.then=="function"){d=X;var z=c.blockedSegment,Z=UE(o,z.chunks.length,null,z.formatContext,z.lastPushedText,!0);z.children.push(Z),z.lastPushedText=!1,o=b9(o,c.node,c.blockedBoundary,Z,c.abortSet,c.legacyContext,c.context,c.treeContext).ping,d.then(o,o),c.blockedSegment.formatContext=_,c.legacyContext=C,c.context=I,FE(I)}else throw c.blockedSegment.formatContext=_,c.legacyContext=C,c.context=I,FE(I),X}}function NG(o){var c=o.blockedBoundary;o=o.blockedSegment,o.status=3,hF(this,c,o)}function pF(o,c,d){var _=o.blockedBoundary;o.blockedSegment.status=3,_===null?(c.allPendingTasks--,c.status!==2&&(c.status=2,c.destination!==null&&c.destination.close())):(_.pendingTasks--,_.forceClientRender||(_.forceClientRender=!0,o=d===void 0?Error(ji(432)):d,_.errorDigest=c.onError(o),_.parentFlushed&&c.clientRenderedBoundaries.push(_)),_.fallbackAbortableTasks.forEach(function(C){return pF(C,c,d)}),_.fallbackAbortableTasks.clear(),c.allPendingTasks--,c.allPendingTasks===0&&(_=c.onAllReady,_()))}function qE(o,c){if(c.chunks.length===0&&c.children.length===1&&c.children[0].boundary===null){var d=c.children[0];d.id=c.id,d.parentFlushed=!0,d.status===1&&qE(o,d)}else o.completedSegments.push(c)}function hF(o,c,d){if(c===null){if(d.parentFlushed){if(o.completedRootSegment!==null)throw Error(ji(389));o.completedRootSegment=d}o.pendingRootTasks--,o.pendingRootTasks===0&&(o.onShellError=u5,c=o.onShellReady,c())}else c.pendingTasks--,c.forceClientRender||(c.pendingTasks===0?(d.parentFlushed&&d.status===1&&qE(c,d),c.parentFlushed&&o.completedBoundaries.push(c),c.fallbackAbortableTasks.forEach(NG,o),c.fallbackAbortableTasks.clear()):d.parentFlushed&&d.status===1&&(qE(c,d),c.completedSegments.length===1&&c.parentFlushed&&o.partialBoundaries.push(c)));o.allPendingTasks--,o.allPendingTasks===0&&(o=o.onAllReady,o())}function dF(o){if(o.status!==2){var c=u2,d=F8.current;F8.current=PO;var _=iE;iE=o.responseState;try{var C=o.pingedTasks,I;for(I=0;I<C.length;I++){var z=C[I],Z=o,X=z.blockedSegment;if(X.status===0){FE(z.context);try{Cf(Z,z,z.node),X.lastPushedText&&X.textEmbedded&&X.chunks.push(y9),z.abortSet.delete(z),X.status=1,hF(Z,z.blockedBoundary,X)}catch(We){if(w9(),typeof We=="object"&&We!==null&&typeof We.then=="function"){var oe=z.ping;We.then(oe,oe)}else{z.abortSet.delete(z),X.status=4;var _e=z.blockedBoundary,Se=We,Ne=Z5(Z,Se);if(_e===null?VE(Z,Se):(_e.pendingTasks--,_e.forceClientRender||(_e.forceClientRender=!0,_e.errorDigest=Ne,_e.parentFlushed&&Z.clientRenderedBoundaries.push(_e))),Z.allPendingTasks--,Z.allPendingTasks===0){var $e=Z.onAllReady;$e()}}}finally{}}}C.splice(0,I),o.destination!==null&&C9(o,o.destination)}catch(We){Z5(o,We),VE(o,We)}finally{iE=_,F8.current=d,d===PO&&FE(c)}}}function PT(o,c,d){switch(d.parentFlushed=!0,d.status){case 0:var _=d.id=o.nextSegmentId++;return d.lastPushedText=!1,d.textEmbedded=!1,o=o.responseState,Gr(c,IZ),Gr(c,o.placeholderPrefix),o=Vi(_.toString(16)),Gr(c,o),ds(c,kZ);case 1:d.status=2;var C=!0;_=d.chunks;var I=0;d=d.children;for(var z=0;z<d.length;z++){for(C=d[z];I<C.index;I++)Gr(c,_[I]);C=xI(o,c,C)}for(;I<_.length-1;I++)Gr(c,_[I]);return I<_.length&&(C=ds(c,_[I])),C;default:throw Error(ji(390))}}function xI(o,c,d){var _=d.boundary;if(_===null)return PT(o,c,d);if(_.parentFlushed=!0,_.forceClientRender)_=_.errorDigest,ds(c,PZ),Gr(c,zZ),_&&(Gr(c,OZ),Gr(c,Vi(Qc(_))),Gr(c,NZ)),ds(c,RZ),PT(o,c,d);else if(0<_.pendingTasks){_.rootSegmentID=o.nextSegmentId++,0<_.completedSegments.length&&o.partialBoundaries.push(_);var C=o.responseState,I=C.nextSuspenseID++;C=gr(C.boundaryPrefix+I.toString(16)),_=_.id=C,SO(c,o.responseState,_),PT(o,c,d)}else if(_.byteSize>o.progressiveChunkSize)_.rootSegmentID=o.nextSegmentId++,o.completedBoundaries.push(_),SO(c,o.responseState,_.id),PT(o,c,d);else{if(ds(c,MZ),d=_.completedSegments,d.length!==1)throw Error(ji(391));xI(o,c,d[0])}return ds(c,DZ)}function RO(o,c,d){return oG(c,o.responseState,d.formatContext,d.id),xI(o,c,d),aG(c,d.formatContext)}function BO(o,c,d){for(var _=d.completedSegments,C=0;C<_.length;C++)fF(o,c,d,_[C]);if(_.length=0,o=o.responseState,_=d.id,d=d.rootSegmentID,Gr(c,o.startInlineScript),o.sentCompleteBoundaryFunction?Gr(c,hG):(o.sentCompleteBoundaryFunction=!0,Gr(c,pG)),_===null)throw Error(ji(395));return d=Vi(d.toString(16)),Gr(c,_),Gr(c,dG),Gr(c,o.segmentPrefix),Gr(c,d),ds(c,fG)}function fF(o,c,d,_){if(_.status===2)return!0;var C=_.id;if(C===-1){if((_.id=d.rootSegmentID)===-1)throw Error(ji(392));return RO(o,c,_)}return RO(o,c,_),o=o.responseState,Gr(c,o.startInlineScript),o.sentCompleteSegmentFunction?Gr(c,lG):(o.sentCompleteSegmentFunction=!0,Gr(c,sG)),Gr(c,o.segmentPrefix),C=Vi(C.toString(16)),Gr(c,C),Gr(c,uG),Gr(c,o.placeholderPrefix),Gr(c,C),ds(c,cG)}function C9(o,c){wf=new Uint8Array(512),bf=0;try{var d=o.completedRootSegment;if(d!==null&&o.pendingRootTasks===0){xI(o,c,d),o.completedRootSegment=null;var _=o.responseState.bootstrapChunks;for(d=0;d<_.length-1;d++)Gr(c,_[d]);d<_.length&&ds(c,_[d])}var C=o.clientRenderedBoundaries,I;for(I=0;I<C.length;I++){var z=C[I];_=c;var Z=o.responseState,X=z.id,oe=z.errorDigest,_e=z.errorMessage,Se=z.errorComponentStack;if(Gr(_,Z.startInlineScript),Z.sentClientRenderFunction?Gr(_,gG):(Z.sentClientRenderFunction=!0,Gr(_,mG)),X===null)throw Error(ji(395));Gr(_,X),Gr(_,yG),(oe||_e||Se)&&(Gr(_,R8),Gr(_,Vi(B8(oe||"")))),(_e||Se)&&(Gr(_,R8),Gr(_,Vi(B8(_e||"")))),Se&&(Gr(_,R8),Gr(_,Vi(B8(Se)))),ds(_,vG)}C.splice(0,I);var Ne=o.completedBoundaries;for(I=0;I<Ne.length;I++)BO(o,c,Ne[I]);Ne.splice(0,I),fO(c),wf=new Uint8Array(512),bf=0;var $e=o.partialBoundaries;for(I=0;I<$e.length;I++){var We=$e[I];e:{C=o,z=c;var Ze=We.completedSegments;for(Z=0;Z<Ze.length;Z++)if(!fF(C,z,We,Ze[Z])){Z++,Ze.splice(0,Z);var ct=!1;break e}Ze.splice(0,Z),ct=!0}if(!ct){o.destination=null,I++,$e.splice(0,I);return}}$e.splice(0,I);var Oe=o.completedBoundaries;for(I=0;I<Oe.length;I++)BO(o,c,Oe[I]);Oe.splice(0,I)}finally{fO(c),o.allPendingTasks===0&&o.pingedTasks.length===0&&o.clientRenderedBoundaries.length===0&&o.completedBoundaries.length===0&&c.close()}}function FO(o,c){try{var d=o.abortableTasks;d.forEach(function(_){return pF(_,o,c)}),d.clear(),o.destination!==null&&C9(o,o.destination)}catch(_){Z5(o,_),VE(o,_)}}f9.renderToReadableStream=function(o,c){return new Promise(function(d,_){var C,I,z=new Promise(function(_e,Se){I=_e,C=Se}),Z=zG(o,gZ(c?c.identifierPrefix:void 0,c?c.nonce:void 0,c?c.bootstrapScriptContent:void 0,c?c.bootstrapScripts:void 0,c?c.bootstrapModules:void 0),yZ(c?c.namespaceURI:void 0),c?c.progressiveChunkSize:void 0,c?c.onError:void 0,I,function(){var _e=new ReadableStream({type:"bytes",pull:function(Se){if(Z.status===1)Z.status=2,HB(Se,Z.fatalError);else if(Z.status!==2&&Z.destination===null){Z.destination=Se;try{C9(Z,Se)}catch(Ne){Z5(Z,Ne),VE(Z,Ne)}}},cancel:function(){FO(Z)}},{highWaterMark:0});_e.allReady=z,d(_e)},function(_e){z.catch(function(){}),_(_e)},C);if(c&&c.signal){var X=c.signal,oe=function(){FO(Z,X.reason),X.removeEventListener("abort",oe)};X.addEventListener("abort",oe)}dF(Z)})};f9.version="18.2.0";var mw,mF;mw=fw,mF=f9;mw.version;mw.renderToString;var ZE=mw.renderToStaticMarkup;mw.renderToNodeStream;mw.renderToStaticNodeStream;mF.renderToReadableStream;var jO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function OG(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var RG,DT,gF=(function(o,c){/*!
MICROSOFT SOFTWARE LICENSE TERMS
MICROSOFT AZURE MAPS WEB SDK
These license terms are an agreement between you and Microsoft Corporation (or one of its affiliates). They apply to the software named above and any Microsoft services or software updates (except to the extent such services or updates are accompanied by new or additional terms, in which case those different terms apply prospectively and do not alter your or Microsofts rights relating to pre-updated software or services). IF YOU COMPLY WITH THESE LICENSE TERMS, YOU HAVE THE RIGHTS BELOW.  BY USING THE SOFTWARE, YOU ACCEPT THESE TERMS.
1. INSTALLATION AND USE RIGHTS.
  a) General. You may install and use any number of copies of the software to develop and test your applications.
  b) User Region Parameters. The software will allow you to select from a View list to set the map view within your application for a given customer. By default the View parameter (also referred to as user region parameter is set to Unified.  Countries/Regions that are not on the View list will default to the Unified View. It is your responsibility to determine the location of your users, and then set the View parameter correctly for that location. The View parameter must be used in compliance with applicable laws, including those regarding mapping, of the country where maps, images and other data and third party content that You are authorized to access via the software is made available. 
  c) Third Party Software. The software may include third party applications that Microsoft, not the third party, licenses to you under this agreement. Any included notices for third party applications are for your information only.
  d) Microsoft Online Subscription Agreement. Some features of the software provide access to, or rely on, Microsoft Azure Services. The use of those services (but not the software) is governed by the separate terms and privacy policies associated with your Microsoft Azure subscription. The services may not be available in all regions. For more information see https://go.microsoft.com/fwLink/?LinkID=522330&amp;clcid=0x9.
2. DISTRIBUTABLE CODE. The software is comprised of Distributable Code. Distributable Code is code that you are permitted to distribute in applications you develop if you comply with the terms below and otherwise set forth in these license terms. 
  a) Distribution Rights. 
    i. You may copy and distribute the object code form of the software.
    i. Third Party Distribution. You may permit distributors of your applications to copy and distribute any of this distributable code you elect to distribute with your applications.
  b) Distribution Requirements. For any code you distribute, you must:
    i. add significant primary functionality to it in your applications;
    ii. require distributors and external end users to agree to terms that protect it and Microsoft at least as much as this agreement; and
    iii. indemnify, defend, and hold harmless Microsoft from any claims, including attorneys fees, related to the distribution or use of your applications, except to the extent that any claim is based solely on the unmodified distributable code.
  c) Distribution Restrictions. You may not:
    i. use Microsofts trademarks or trade dress in your application in any way that suggests your application comes from or is endorsed by Microsoft; or
    ii. modify or distribute the source code of any distributable code so that any part of it becomes subject to any license that requires that the distributable code, any other part of the software, or any of Microsofts other intellectual property be disclosed or distributed in source code form, or that others have the right to modify it.
3. DATA COLLECTION. The software may collect information about you and your use of the software and send that to Microsoft. Microsoft may use this information to provide services and improve Microsofts products and services. Your opt-out rights, if any, are described in the product documentation. Some features in the software may enable collection of data from users of your applications that access or use the software. If you use these features to enable data collection in your applications, you must comply with applicable law, including getting any required user consent, and maintain a prominent privacy policy that accurately informs users about how you use, collect, and share their data. You can learn more about Microsofts data collection and use in the product documentation and the Microsoft Privacy Statement at https://go.microsoft.com/fwlink/?LinkId=512132. You agree to comply with all applicable provisions of the Microsoft Privacy Statement.
4. SCOPE OF LICENSE. The software is licensed, not sold. Microsoft reserves all other rights. Unless applicable law gives you more rights despite this limitation, you will not (and have no right to):
  a) work around any technical limitations in the software that only allow you to use it in certain ways;
  b) reverse engineer, decompile, or disassemble the software, or attempt to do so, except and only to the extent permitted by licensing terms governing the use of open-source components that may be included with the software;
  c) remove, minimize, block, or modify any notices of Microsoft or its suppliers in the software;
  d) use the software in any way that is against the law or to create or propagate malware; or
  e) share, publish, distribute, or lend the software (except for any distributable code, subject to the terms above), provide the software as a stand-alone hosted solution for others to use, or transfer the software or this agreement to any third party.
5. EXPORT RESTRICTIONS. You must comply with all domestic and international export laws and regulations that apply to the software, which include restrictions on destinations, end users, and end use. For further information on export restrictions, visit http://aka.ms/exporting.
6. SUPPORT SERVICES. Microsoft is not obligated under this agreement to provide any support services for the software. Any support provided is as is, with all faults, and without warranty of any kind.
7. UPDATES. The software may periodically check for updates, and download and install them for you. You may obtain updates only from Microsoft or authorized sources. Microsoft may need to update your system to provide you with updates. You agree to receive these automatic updates without any additional notice. Updates may not include or support all existing software features, services, or peripheral devices.
8. ENTIRE AGREEMENT. This agreement, and any other terms Microsoft may provide for supplements, updates, or third-party applications, is the entire agreement for the software.
9. APPLICABLE LAW AND PLACE TO RESOLVE DISPUTES. If you acquired the software in the United States or Canada, the laws of the state or province where you live (or, if a business, where your principal place of business is located) govern the interpretation of this agreement, claims for its breach, and all other claims (including consumer protection, unfair competition, and tort claims), regardless of conflict of laws principles. If you acquired the software in any other country, its laws apply. If U.S. federal jurisdiction exists, you and Microsoft consent to exclusive jurisdiction and venue in the federal court in King County, Washington for all disputes heard in court. If not, you and Microsoft consent to exclusive jurisdiction and venue in the Superior Court of King County, Washington for all disputes heard in court.
10. CONSUMER RIGHTS; REGIONAL VARIATIONS. This agreement describes certain legal rights. You may have other rights, including consumer rights, under the laws of your state or country. Separate and apart from your relationship with Microsoft, you may also have rights with respect to the party from which you acquired the software. This agreement does not change those other rights if the laws of your state or country do not permit it to do so. For example, if you acquired the software in one of the below regions, or mandatory country law applies, then the following provisions apply to you:
  a) Australia. You have statutory guarantees under the Australian Consumer Law and nothing in this agreement is intended to affect those rights.
  b) Canada. If you acquired this software in Canada, you may stop receiving updates by turning off the automatic update feature, disconnecting your device from the Internet (if and when you re-connect to the Internet, however, the software will resume checking for and installing updates), or uninstalling the software. The product documentation, if any, may also specify how to turn off updates for your specific device or software.
  c) Germany and Austria.
    i. Warranty. The properly licensed software will perform substantially as described in any Microsoft materials that accompany the software. However, Microsoft gives no contractual guarantee in relation to the licensed software.
    ii. Limitation of Liability. In case of intentional conduct, gross negligence, claims based on the Product Liability Act, as well as, in case of death or personal or physical injury, Microsoft is liable according to the statutory law.
  Subject to the foregoing clause ii., Microsoft will only be liable for slight negligence if Microsoft is in breach of such material contractual obligations, the fulfillment of which facilitate the due performance of this agreement, the breach of which would endanger the purpose of this agreement and the compliance with which a party may constantly trust in (so-called "cardinal obligations"). In other cases of slight negligence, Microsoft will not be liable for slight negligence.
11. DISCLAIMER OF WARRANTY. THE SOFTWARE IS LICENSED AS IS. YOU BEAR THE RISK OF USING IT. MICROSOFT GIVES NO EXPRESS WARRANTIES, GUARANTEES, OR CONDITIONS. TO THE EXTENT PERMITTED UNDER APPLICABLE LAWS, MICROSOFT EXCLUDES ALL IMPLIED WARRANTIES, INCLUDING MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.
12. LIMITATION ON AND EXCLUSION OF DAMAGES. IF YOU HAVE ANY BASIS FOR RECOVERING DAMAGES DESPITE THE PRECEDING DISCLAIMER OF WARRANTY, YOU CAN RECOVER FROM MICROSOFT AND ITS SUPPLIERS ONLY DIRECT DAMAGES UP TO U.S. $5.00. YOU CANNOT RECOVER ANY OTHER DAMAGES, INCLUDING CONSEQUENTIAL, LOST PROFITS, SPECIAL, INDIRECT, OR INCIDENTAL DAMAGES.
This limitation applies to (a) anything related to the software, services, content (including code) on third party Internet sites, or third party applications; and (b) claims for breach of contract, warranty, guarantee, or condition; strict liability, negligence, or other tort; or any other claim; in each case to the extent permitted by applicable law.
It also applies even if Microsoft knew or should have known about the possibility of the damages. The above limitation or exclusion may not apply to you because your state, province, or country may not allow the exclusion or limitation of incidental, consequential, or other damages.
Please note: As this software is distributed in Canada, some of the clauses in this agreement are provided below in French.
Remarque: Ce logiciel tant distribu au Canada, certaines des clauses dans ce contrat sont fournies ci-dessous en franais.
EXONRATION DE GARANTIE. Le logiciel vis par une licence est offert  tel quel . Toute utilisation de ce logiciel est  votre seule risque et pril. Microsoft naccorde aucune autre garantie expresse. Vous pouvez bnficier de droits additionnels en vertu du droit local sur la protection des consommateurs, que ce contrat ne peut modifier. La ou elles sont permises par le droit locale, les garanties implicites de qualit marchande, dadquation  un usage particulier et dabsence de contrefaon sont exclues.
LIMITATION DES DOMMAGES-INTRTS ET EXCLUSION DE RESPONSABILIT POUR LES DOMMAGES. Vous pouvez obtenir de Microsoft et de ses fournisseurs une indemnisation en cas de dommages directs uniquement  hauteur de 5,00 $ US. Vous ne pouvez prtendre  aucune indemnisation pour les autres dommages, y compris les dommages spciaux, indirects ou accessoires et pertes de bnfices.
Cette limitation concerne:
 tout ce qui est reli au logiciel, aux services ou au contenu (y compris le code) figurant sur des sites Internet tiers ou dans des programmes tiers; et
 les rclamations au titre de violation de contrat ou de garantie, ou au titre de responsabilit stricte, de ngligence ou dune autre faute dans la limite autorise par la loi en vigueur.
Elle sapplique galement, mme si Microsoft connaissait ou devrait connatre lventualit dun tel dommage. Si votre pays nautorise pas lexclusion ou la limitation de responsabilit pour les dommages indirects, accessoires ou de quelque nature que ce soit, il se peut que la limitation ou lexclusion ci-dessus ne sappliquera pas  votre gard.
EFFET JURIDIQUE. Le prsent contrat dcrit certains droits juridiques. Vous pourriez avoir dautres droits prvus par les lois de votre pays. Le prsent contrat ne modifie pas les droits que vous confrent les lois de votre pays si celles-ci ne le permettent pas.
*/(function(d){var _=typeof globalThis<"u"?globalThis:typeof window<"u"?window:jO!==void 0?jO:typeof self<"u"?self:{};function C(t,n){return t(n={exports:{}},n.exports),n.exports}var I=C(function(t,n){function a(u,A){if(h)if(y){var k="var sharedChunk = {}; ("+h+")(sharedChunk); ("+y+")(sharedChunk);",G={};h(G),b=A(G),typeof window<"u"&&(b.workerUrl=window.URL.createObjectURL(new Blob([k],{type:"text/javascript"})))}else y=A;else h=A}var h,y,b;t.exports=(a(0,function(u){function A(e,i){return e(i={exports:{}},i.exports),i.exports}var k=G;function G(e,i,s,p){this.cx=3*e,this.bx=3*(s-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=p,this.p2x=s,this.p2y=p}G.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},G.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},G.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},G.prototype.solveCurveX=function(e,i){var s,p,m,v,w;for(i===void 0&&(i=1e-6),m=e,w=0;w<8;w++){if(v=this.sampleCurveX(m)-e,Math.abs(v)<i)return m;var S=this.sampleCurveDerivativeX(m);if(Math.abs(S)<1e-6)break;m-=v/S}if((m=e)<(s=0))return s;if(m>(p=1))return p;for(;s<p;){if(v=this.sampleCurveX(m),Math.abs(v-e)<i)return m;v<e?s=m:p=m,m=.5*(p-s)+s}return m},G.prototype.solve=function(e,i){return this.sampleCurveY(this.solveCurveX(e,i))};var W=se;function se(e,i){this.x=e,this.y=i}se.prototype={clone:function(){return new se(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,i){return this.clone()._rotateAround(e,i)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var i=e.x-this.x,s=e.y-this.y;return i*i+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,i){return Math.atan2(this.x*i-this.y*e,this.x*e+this.y*i)},_matMult:function(e){var i=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var i=Math.cos(e),s=Math.sin(e),p=s*this.x+i*this.y;return this.x=i*this.x-s*this.y,this.y=p,this},_rotateAround:function(e,i){var s=Math.cos(e),p=Math.sin(e),m=i.y+p*(this.x-i.x)+s*(this.y-i.y);return this.x=i.x+s*(this.x-i.x)-p*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},se.convert=function(e){return e instanceof se||!Array.isArray(e)?e:new se(e[0],e[1])};var ne=typeof self<"u"?self:{};function Ee(e,i,s,p){var m=new k(e,i,s,p);return function(v){return m.solve(v)}}var Ge=Ee(.25,.1,.25,1);function pt(e,i,s){return Math.min(s,Math.max(i,e))}function Wt(e,i,s){var p=s-i,m=((e-i)%p+p)%p+i;return m===i?s:m}function nt(e){for(var i=[],s=arguments.length-1;0<s--;)i[s]=arguments[s+1];for(var p=0,m=i;p<m.length;p+=1){var v=m[p];for(var w in v)e[w]=v[w]}return e}var qt=1;function tn(){return qt++}function ho(){return function e(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function un(e){return e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function rn(e,i){e.forEach(function(s){i[s]&&(i[s]=i[s].bind(i))})}function qa(e,i){return e.indexOf(i,e.length-i.length)!==-1}function Wl(e,i,s){var p={};for(var m in e)p[m]=i.call(s||this,e[m],m,e);return p}function il(e,i,s){var p={};for(var m in e)i.call(s||this,e[m],m,e)&&(p[m]=e[m]);return p}function Rn(e){return Array.isArray(e)?e.map(Rn):typeof e=="object"&&e?Wl(e,Rn):e}var sc={};function nn(e){sc[e]||(typeof console<"u"&&console.warn(e),sc[e]=!0)}function fo(e,i,s){return(s.y-e.y)*(i.x-e.x)>(i.y-e.y)*(s.x-e.x)}function zm(e){for(var i=0,s=0,p=e.length,m=p-1,v=void 0,w=void 0;s<p;m=s++)i+=((w=e[m]).x-(v=e[s]).x)*(v.y+w.y);return i}function lc(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function mo(e){var i={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(p,m,v,w){var S=v||w;return i[m]=!S||S.toLowerCase(),""}),i["max-age"]){var s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i}var wa=null;function Op(e){if(wa==null){var i=e.navigator?e.navigator.userAgent:null;wa=!!e.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return wa}function Yl(e){try{var i=ne[e];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}var Ko,Za,$o,ba,uc=ne.performance&&ne.performance.now?ne.performance.now.bind(ne.performance):Date.now.bind(Date),Ga=ne.requestAnimationFrame||ne.mozRequestAnimationFrame||ne.webkitRequestAnimationFrame||ne.msRequestAnimationFrame,Jn=ne.cancelAnimationFrame||ne.mozCancelAnimationFrame||ne.webkitCancelAnimationFrame||ne.msCancelAnimationFrame,ol={now:uc,frame:function(e){var i=Ga(e);return{cancel:function(){return Jn(i)}}},getImageData:function(e,i){i===void 0&&(i=0);var s=ne.document.createElement("canvas"),p=s.getContext("2d");if(!p)throw new Error("failed to create canvas 2d context");return s.width=e.width,s.height=e.height,p.drawImage(e,0,0,e.width,e.height),p.getImageData(-i,-i,e.width+2*i,e.height+2*i)},resolveURL:function(e){return(Ko=Ko||ne.document.createElement("a")).href=e,Ko.href},hardwareConcurrency:ne.navigator&&ne.navigator.hardwareConcurrency||4,get devicePixelRatio(){return ne.devicePixelRatio},get prefersReducedMotion(){return!!ne.matchMedia&&(Za==null&&(Za=ne.matchMedia("(prefers-reduced-motion: reduce)")),Za.matches)}},Mn={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Kl={supported:!1,testSupport:function(e){!$l&&ba&&(bs?Xo(e):$o=e)}},$l=!1,bs=!1;function Xo(e){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,ba),e.isContextLost())return;Kl.supported=!0}catch{}e.deleteTexture(i),$l=!0}function no(e,i){this._transformRequestFn=e,this._customAccessToken=i,this._createSkuToken()}ne.document&&((ba=ne.document.createElement("img")).onload=function(){$o&&Xo($o),bs=!($o=null)},ba.onerror=function(){$l=!0,$o=null},ba.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Rp="01";function zo(e){return e.indexOf("mapbox:")===0}no.prototype._createSkuToken=function(){var e=function(){for(var i="",s=0;s<10;s++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Rp,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},no.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},no.prototype.transformRequest=function(e,i){return this._transformRequestFn&&this._transformRequestFn(e,i)||{url:e}},no.prototype.normalizeStyleURL=function(e,i){if(!zo(e))return e;var s=Hr(e);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},no.prototype.normalizeGlyphsURL=function(e,i){if(!zo(e))return e;var s=Hr(e);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},no.prototype.normalizeSourceURL=function(e,i){if(!zo(e))return e;var s=Hr(e);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||i)},no.prototype.normalizeSpriteURL=function(e,i,s,p){var m=Hr(e);return zo(e)?(m.path="/styles/v1"+m.path+"/sprite"+i+s,this._makeAPIURL(m,this._customAccessToken||p)):(m.path+=""+i+s,go(m))},no.prototype.normalizeTileURL=function(e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!zo(e))return e;var s=Hr(e);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=ol.devicePixelRatio||i===512?"@2x":"")+(Kl.supported?".webp":"$1")),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var p=this._customAccessToken||function(){for(var m=0,v=s.params;m<v.length;m+=1){var w=v[m].match(/^access_token=(.*)$/);if(w)return w[1]}return null}()||Mn.ACCESS_TOKEN;return Mn.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,p)},no.prototype.canonicalizeTileURL=function(e,i){var s=Hr(e);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return e;var p="mapbox://tiles/";p+=s.path.replace("/v4/","");var m=s.params;return i&&(m=m.filter(function(v){return!v.match(/^access_token=/)})),m.length&&(p+="?"+m.join("&")),p},no.prototype.canonicalizeTileset=function(e,i){for(var s=!!i&&zo(i),p=[],m=0,v=e.tiles||[];m<v.length;m+=1){var w=v[m];Qn(w)?p.push(this.canonicalizeTileURL(w,s)):p.push(w)}return p},no.prototype._makeAPIURL=function(e,i){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",p=Hr(Mn.API_URL);if(e.protocol=p.protocol,e.authority=p.authority,p.path!=="/"&&(e.path=""+p.path+e.path),!Mn.REQUIRE_ACCESS_TOKEN)return go(e);if(!(i=i||Mn.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+s);if(i[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return e.params=e.params.filter(function(m){return m.indexOf("access_token")===-1}),e.params.push("access_token="+i),go(e)};var zi=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Qn(e){return zi.test(e)}var Ni=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Hr(e){var i=e.match(Ni);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function go(e){var i=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+i}function bi(e){if(!e)return null;var i=e.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(ne.atob(i[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}function An(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}An.prototype.getStorageKey=function(e){var i,s=bi(Mn.ACCESS_TOKEN);return i=s&&s.u?ne.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,function(p,m){return String.fromCharCode(Number("0x"+m))})):Mn.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+i:"mapbox.eventData:"+i},An.prototype.fetchEventData=function(){var e=Yl("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(e)try{var p=ne.localStorage.getItem(i);p&&(this.eventData=JSON.parse(p));var m=ne.localStorage.getItem(s);m&&(this.anonId=m)}catch{nn("Unable to read from LocalStorage")}},An.prototype.saveEventData=function(){var e=Yl("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(e)try{ne.localStorage.setItem(s,this.anonId),1<=Object.keys(this.eventData).length&&ne.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{nn("Unable to write to LocalStorage")}},An.prototype.processRequests=function(e){},An.prototype.postEvent=function(e,i,s,p){var m=this;if(Mn.EVENTS_URL){var v=Hr(Mn.EVENTS_URL);v.params.push("access_token="+(p||Mn.ACCESS_TOKEN||""));var w={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.11.1",skuId:Rp,userId:this.anonId},S=i?nt(w,i):w,M={url:go(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=le(M,function(P){m.pendingRequest=null,s(P),m.saveEventData(),m.processRequests(p)})}},An.prototype.queueRequest=function(e,i){this.queue.push(e),this.processRequests(i)};var Jo,io,qi,Ha,Cs=(Sa.__proto__=Ha=An,((Sa.prototype=Object.create(Ha&&Ha.prototype)).constructor=Sa).prototype.postMapLoadEvent=function(e,i,s,p){this.skuToken=s,(Mn.EVENTS_URL&&p||Mn.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(m){return zo(m)||Qn(m)}))&&this.queueRequest({id:i,timestamp:Date.now()},p)},Sa.prototype.processRequests=function(e){var i=this;if(!this.pendingRequest&&this.queue.length!==0){var s=this.queue.shift(),p=s.id,m=s.timestamp;p&&this.success[p]||(this.anonId||this.fetchEventData(),un(this.anonId)||(this.anonId=ho()),this.postEvent(m,{skuToken:this.skuToken},function(v){v||p&&(i.success[p]=!0)},e))}},Sa),cc=(Ca.__proto__=qi=An,((Ca.prototype=Object.create(qi&&qi.prototype)).constructor=Ca).prototype.postTurnstileEvent=function(e,i){Mn.EVENTS_URL&&Mn.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(s){return zo(s)||Qn(s)})&&this.queueRequest(Date.now(),i)},Ca.prototype.processRequests=function(e){var i=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var s=bi(Mn.ACCESS_TOKEN),p=s?s.u:Mn.ACCESS_TOKEN,m=p!==this.eventData.tokenU;un(this.anonId)||(this.anonId=ho(),m=!0);var v=this.queue.shift();if(this.eventData.lastSuccess){var w=new Date(this.eventData.lastSuccess),S=new Date(v),M=(v-this.eventData.lastSuccess)/864e5;m=m||1<=M||M<-1||w.getDate()!==S.getDate()}else m=!0;if(!m)return this.processRequests();this.postEvent(v,{"enabled.telemetry":!1},function(P){P||(i.eventData.lastSuccess=v,i.eventData.tokenU=p)},e)}},new Ca),rr=cc.postTurnstileEvent.bind(cc),Bp=new Cs,pc=Bp.postMapLoadEvent.bind(Bp),al=500,Ss=50;function Ca(e){qi.call(this,"appUserTurnstile"),this._customAccessToken=e}function Sa(){Ha.call(this,"map.load"),this.success={},this.skuToken=""}function Ts(){ne.caches&&!Jo&&(Jo=ne.caches.open("mapbox-tiles"))}function Xl(e){var i=e.indexOf("?");return i<0?e:e.slice(0,i)}var Wa,Ya=1/0;function Es(){return Wa==null&&(Wa=ne.OffscreenCanvas&&new ne.OffscreenCanvas(1,1).getContext("2d")&&typeof ne.createImageBitmap=="function"),Wa}var Jl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Jl);var Nr,Ta=((Nr=Error)&&(ei.__proto__=Nr),((ei.prototype=Object.create(Nr&&Nr.prototype)).constructor=ei).prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},ei),sl=lc()?function(){return self.worker&&self.worker.referrer}:function(){return(ne.location.protocol==="blob:"?ne.parent:ne).location.href};function ei(e,i,s){i===401&&Qn(s)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),Nr.call(this,e),this.status=i,this.url=s,this.name=this.constructor.name,this.message=e}function N(e,i){if(!(/^file:/.test(s=e.url)||/^file:/.test(sl())&&!/^\w+:/.test(s))){if(ne.fetch&&ne.Request&&ne.AbortController&&ne.Request.prototype.hasOwnProperty("signal"))return function(p,m){var v,w=new ne.AbortController,S=new ne.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:sl(),signal:w.signal}),M=!1,P=!1,D=0<(v=S.url).indexOf("sku=")&&Qn(v);function R(F,Y,$){if(!P){if(F&&F.message!=="SecurityError"&&nn(F),Y&&$)return U(Y);var ie=Date.now();ne.fetch(S).then(function(te){if(te.ok){var xe=D?te.clone():null;return U(te,xe,ie)}return m(new Ta(te.statusText,te.status,p.url))}).catch(function(te){te.code!==20&&m(new Error(te.message))})}}p.type==="json"&&S.headers.set("Accept","application/json");var U=function(F,Y,$){(p.type==="arrayBuffer"?F.arrayBuffer():p.type==="json"?F.json():F.text()).then(function(ie){P||(Y&&$&&function(te,xe,be){if(Ts(),Jo){var Te={status:xe.status,statusText:xe.statusText,headers:new ne.Headers};xe.headers.forEach(function(Fe,Ye){return Te.headers.set(Ye,Fe)});var Me=mo(xe.headers.get("Cache-Control")||"");Me["no-store"]||(Me["max-age"]&&Te.headers.set("Expires",new Date(be+1e3*Me["max-age"]).toUTCString()),new Date(Te.headers.get("Expires")).getTime()-be<42e4||function(Fe,Ye){if(io===void 0)try{new Response(new ReadableStream),io=!0}catch{io=!1}io?Ye(Fe.body):Fe.blob().then(Ye)}(xe,function(Fe){var Ye=new ne.Response(Fe,Te);Ts(),Jo&&Jo.then(function(it){return it.put(Xl(te.url),Ye)}).catch(function(it){return nn(it.message)})}))}}(S,Y,$),M=!0,m(null,ie,F.headers.get("Cache-Control"),F.headers.get("Expires")))}).catch(function(ie){P||m(new Error(ie.message))})};return D?function(F,Y){if(Ts(),!Jo)return Y(null);var $=Xl(F.url);Jo.then(function(ie){ie.match($).then(function(te){var xe=function(be){if(!be)return!1;var Te=new Date(be.headers.get("Expires")||0),Me=mo(be.headers.get("Cache-Control")||"");return Te>Date.now()&&!Me["no-cache"]}(te);ie.delete($),xe&&ie.put($,te.clone()),Y(null,te,xe)}).catch(Y)}).catch(Y)}(S,R):R(null,null),{cancel:function(){P=!0,M||w.abort()}}}(e,i);if(lc()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,i,void 0,!0)}var s;return function(p,m){var v=new ne.XMLHttpRequest;for(var w in v.open(p.method||"GET",p.url,!0),p.type==="arrayBuffer"&&(v.responseType="arraybuffer"),p.headers)v.setRequestHeader(w,p.headers[w]);return p.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=p.credentials==="include",v.onerror=function(){m(new Error(v.statusText))},v.onload=function(){if((200<=v.status&&v.status<300||v.status===0)&&v.response!==null){var S=v.response;if(p.type==="json")try{S=JSON.parse(v.response)}catch(M){return m(M)}m(null,S,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else m(new Ta(v.statusText,v.status,p.url))},v.send(p.body),{cancel:function(){return v.abort()}}}(e,i)}function B(e,i){return N(nt(e,{type:"arrayBuffer"}),i)}var q,J,le=function(e,i){return N(nt(e,{method:"POST"}),i)};q=[],J=0;var de=function(e,i){if(Kl.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),J>=Mn.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:e,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return q.push(s),s}function p(){if(!m)for(m=!0,J--;q.length&&J<Mn.MAX_PARALLEL_IMAGE_REQUESTS;){var w=q.shift();w.cancelled||(w.cancel=de(w.requestParameters,w.callback).cancel)}}J++;var m=!1,v=B(e,function(w,S,M,P){var D,R,U;p(),w?i(w):S&&(Es()?(D=S,R=i,U=new ne.Blob([new Uint8Array(D)],{type:"image/png"}),ne.createImageBitmap(U).then(function(F){R(null,F)}).catch(function(F){R(new Error("Could not load image because of "+F.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(F,Y,$,ie){var te=new ne.Image,xe=ne.URL;te.onload=function(){Y(null,te),xe.revokeObjectURL(te.src)},te.onerror=function(){return Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var be=new ne.Blob([new Uint8Array(F)],{type:"image/png"});te.cacheControl=$,te.expires=ie,te.src=F.byteLength?xe.createObjectURL(be):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(S,i,M,P))});return{cancel:function(){v.cancel(),p()}}};function we(e,i,s){s[e]&&s[e].indexOf(i)!==-1||(s[e]=s[e]||[],s[e].push(i))}function ge(e,i,s){if(s&&s[e]){var p=s[e].indexOf(i);p!==-1&&s[e].splice(p,1)}}function ve(e,i){i===void 0&&(i={}),nt(this,i),this.type=e}function fe(){}var Pe,Ue=(Ie.__proto__=Pe=ve,(Ie.prototype=Object.create(Pe&&Pe.prototype)).constructor=Ie);function Ie(e,i){i===void 0&&(i={}),Pe.call(this,"error",nt({error:e},i))}fe.prototype.on=function(e,i){return this._listeners=this._listeners||{},we(e,i,this._listeners),this},fe.prototype.off=function(e,i){return ge(e,i,this._listeners),ge(e,i,this._oneTimeListeners),this},fe.prototype.once=function(e,i){return this._oneTimeListeners=this._oneTimeListeners||{},we(e,i,this._oneTimeListeners),this},fe.prototype.fire=function(e,i){typeof e=="string"&&(e=new ve(e,i||{}));var s=e.type;if(this.listens(s)){for(var p=0,m=(e.target=this)._listeners&&this._listeners[s]?this._listeners[s].slice():[];p<m.length;p+=1)m[p].call(this,e);for(var v=0,w=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];v<w.length;v+=1){var S=w[v];ge(s,S,this._oneTimeListeners),S.call(this,e)}var M=this._eventedParent;M&&(nt(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(e))}else e instanceof Ue&&console.error(e.error);return this},fe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&0<this._listeners[e].length||this._oneTimeListeners&&this._oneTimeListeners[e]&&0<this._oneTimeListeners[e].length||this._eventedParent&&this._eventedParent.listens(e)};var ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!(fe.prototype.setEventedParent=function(e,i){return this._eventedParent=e,this._eventedParentData=i,this})},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ae=function(e,i,s,p){this.message=(e?e+": ":"")+s,p&&(this.identifier=p),i!=null&&i.__line__&&(this.line=i.__line__)};function xt(e){var i=e.value;return i?[new Ae(e.key,i,"constants have been deprecated as of v8")]:[]}function wt(e){for(var i=[],s=arguments.length-1;0<s--;)i[s]=arguments[s+1];for(var p=0,m=i;p<m.length;p+=1){var v=m[p];for(var w in v)e[w]=v[w]}return e}function vt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Pt(e){if(Array.isArray(e))return e.map(Pt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var i={};for(var s in e)i[s]=Pt(e[s]);return i}return vt(e)}function Dt(e,i){i===void 0&&(i=[]),this.parent=e,this.bindings={};for(var s=0,p=i;s<p.length;s+=1){var m=p[s];this.bindings[m[0]]=m[1]}}var $t,Ft=(($t=Error)&&(nr.__proto__=$t),(nr.prototype=Object.create($t&&$t.prototype)).constructor=nr);function nr(e,i){$t.call(this,i),this.message=i,this.key=e}Dt.prototype.concat=function(e){return new Dt(this,e)},Dt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Dt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Cr={kind:"null"},je={kind:"number"},Ct={kind:"string"},kt={kind:"boolean"},Ci={kind:"color"},Qo={kind:"object"},Vt={kind:"value"},vn={kind:"collator"},Wr={kind:"formatted"},Ql={kind:"resolvedImage"};function Bn(e,i){return{kind:"array",itemType:e,N:i}}function on(e){if(e.kind!=="array")return e.kind;var i=on(e.itemType);return typeof e.N=="number"?"array<"+i+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+i+">"}var ox=[Cr,je,Ct,kt,Ci,Wr,Qo,Bn(Vt),Ql];function Fp(e,i){if(i.kind==="error")return null;if(e.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Fp(e.itemType,i.itemType))&&(typeof e.N!="number"||e.N===i.N))return null}else{if(e.kind===i.kind)return null;if(e.kind==="value"){for(var s=0,p=ox;s<p.length;s+=1)if(!Fp(p[s],i))return null}}return"Expected "+on(e)+" but found "+on(i)+" instead."}function Nm(e,i){return i.some(function(s){return s.kind===e.kind})}function jp(e,i){return i.some(function(s){return s==="null"?e===null:s==="array"?Array.isArray(e):s==="object"?e&&!Array.isArray(e)&&typeof e=="object":s===typeof e})}var Xy=A(function(e,i){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function p(S){return(S=Math.round(S))<0?0:255<S?255:S}function m(S){return p(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function v(S){return(M=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:1<M?1:M;var M}function w(S,M,P){return P<0?P+=1:1<P&&--P,6*P<1?S+(M-S)*P*6:2*P<1?M:3*P<2?S+(M-S)*(2/3-P)*6:S}try{i.parseCSSColor=function(S){var M,P=S.replace(/ /g,"").toLowerCase();if(P in s)return s[P].slice();if(P[0]==="#")return P.length===4?0<=(M=parseInt(P.substr(1),16))&&M<=4095?[(3840&M)>>4|(3840&M)>>8,240&M|(240&M)>>4,15&M|(15&M)<<4,1]:null:P.length===7&&0<=(M=parseInt(P.substr(1),16))&&M<=16777215?[(16711680&M)>>16,(65280&M)>>8,255&M,1]:null;var D=P.indexOf("("),R=P.indexOf(")");if(D!==-1&&R+1===P.length){var U=P.substr(0,D),F=P.substr(D+1,R-(D+1)).split(","),Y=1;switch(U){case"rgba":if(F.length!==4)return null;Y=v(F.pop());case"rgb":return F.length!==3?null:[m(F[0]),m(F[1]),m(F[2]),Y];case"hsla":if(F.length!==4)return null;Y=v(F.pop());case"hsl":if(F.length!==3)return null;var $=(parseFloat(F[0])%360+360)%360/360,ie=v(F[1]),te=v(F[2]),xe=te<=.5?te*(ie+1):te+ie-te*ie,be=2*te-xe;return[p(255*w(be,xe,$+1/3)),p(255*w(be,xe,$)),p(255*w(be,xe,$-1/3)),Y];default:return null}}return null}}catch{}}).parseCSSColor,Sr=function(e,i,s,p){p===void 0&&(p=1),this.r=e,this.g=i,this.b=s,this.a=p};Sr.parse=function(e){if(e){if(e instanceof Sr)return e;if(typeof e=="string"){var i=Xy(e);if(i)return new Sr(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},Sr.prototype.toString=function(){var e=this.toArray(),i=e[1],s=e[2],p=e[3];return"rgba("+Math.round(e[0])+","+Math.round(i)+","+Math.round(s)+","+p+")"},Sr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},Sr.black=new Sr(0,0,0,1),Sr.white=new Sr(1,1,1,1),Sr.transparent=new Sr(0,0,0,0),Sr.red=new Sr(1,0,0,1);var Up=function(e,i,s){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};function Om(e,i,s,p,m){this.text=e,this.image=i,this.scale=s,this.fontStack=p,this.textColor=m}Up.prototype.compare=function(e,i){return this.collator.compare(e,i)},Up.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Si=function(e){this.sections=e};Si.fromString=function(e){return new Si([new Om(e,null,null,null,null)])},Si.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Si.factory=function(e){return e instanceof Si?e:Si.fromString(e)},Si.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Si.prototype.serialize=function(){for(var e=["format"],i=0,s=this.sections;i<s.length;i+=1){var p=s[i];if(p.image)e.push(["image",p.image.name]);else{e.push(p.text);var m={};p.fontStack&&(m["text-font"]=["literal",p.fontStack.split(",")]),p.scale&&(m["font-scale"]=p.scale),p.textColor&&(m["text-color"]=["rgba"].concat(p.textColor.toArray())),e.push(m)}}return e};var yo=function(e){this.name=e.name,this.available=e.available};function Jy(e,i,s,p){return typeof e=="number"&&0<=e&&e<=255&&typeof i=="number"&&0<=i&&i<=255&&typeof s=="number"&&0<=s&&s<=255?p===void 0||typeof p=="number"&&0<=p&&p<=1?null:"Invalid rgba value ["+[e,i,s,p].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof p=="number"?[e,i,s,p]:[e,i,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function md(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof Sr||e instanceof Up||e instanceof Si||e instanceof yo)return 1;if(Array.isArray(e)){for(var i=0,s=e;i<s.length;i+=1)if(!md(s[i]))return;return 1}if(typeof e=="object"){for(var p in e)if(!md(e[p]))return;return 1}}function ti(e){if(e===null)return Cr;if(typeof e=="string")return Ct;if(typeof e=="boolean")return kt;if(typeof e=="number")return je;if(e instanceof Sr)return Ci;if(e instanceof Up)return vn;if(e instanceof Si)return Wr;if(e instanceof yo)return Ql;if(Array.isArray(e)){for(var i,s=e.length,p=0,m=e;p<m.length;p+=1){var v=ti(m[p]);if(i){if(i===v)continue;i=Vt;break}i=v}return Bn(i||Vt,s)}return Qo}function Vp(e){var i=typeof e;return e===null?"":i=="string"||i=="number"||i=="boolean"?String(e):e instanceof Sr||e instanceof Si||e instanceof yo?e.toString():JSON.stringify(e)}function Ea(e,i){this.type=e,this.value=i}yo.prototype.toString=function(){return this.name},yo.fromString=function(e){return e?new yo({name:e,available:!1}):null},yo.prototype.serialize=function(){return["image",this.name]},Ea.parse=function(e,i){if(e.length!==2)return i.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!md(e[1]))return i.error("invalid value");var s=e[1],p=ti(s),m=i.expectedType;return p.kind!=="array"||p.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(p=m),new Ea(p,s)},Ea.prototype.evaluate=function(){return this.value},Ea.prototype.eachChild=function(){},Ea.prototype.outputDefined=function(){return!0},Ea.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Sr?["rgba"].concat(this.value.toArray()):this.value instanceof Si?this.value.serialize():this.value};var ui=function(e){this.name="ExpressionEvaluationError",this.message=e};function oo(e,i){this.type=e,this.args=i}ui.prototype.toJSON=function(){return this.message};var Rm={string:Ct,number:je,boolean:kt,object:Qo};function ea(e){this.type=Wr,this.sections=e}function ta(e){this.type=Ql,this.input=e}function ao(e,i){this.type=e,this.args=i}oo.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var s,p=1,m=e[0];if(m==="array"){var v,w;if(2<e.length){var S=e[1];if(typeof S!="string"||!(S in Rm)||S==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);v=Rm[S],p++}else v=Vt;if(3<e.length){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);w=e[2],p++}s=Bn(v,w)}else s=Rm[m];for(var M=[];p<e.length;p++){var P=i.parse(e[p],p,Vt);if(!P)return null;M.push(P)}return new oo(s,M)},oo.prototype.evaluate=function(e){for(var i=0;i<this.args.length;i++){var s=this.args[i].evaluate(e);if(!Fp(this.type,ti(s)))return s;if(i===this.args.length-1)throw new ui("Expected value to be of type "+on(this.type)+", but found "+on(ti(s))+" instead.")}return null},oo.prototype.eachChild=function(e){this.args.forEach(e)},oo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},oo.prototype.serialize=function(){var e=this.type,i=[e.kind];if(e.kind==="array"){var s=e.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){i.push(s.kind);var p=e.N;(typeof p=="number"||1<this.args.length)&&i.push(p)}}return i.concat(this.args.map(function(m){return m.serialize()}))},ea.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var s=e[1];if(!Array.isArray(s)&&typeof s=="object")return i.error("First argument must be an image or text section.");for(var p=[],m=!1,v=1;v<=e.length-1;++v){var w=e[v];if(m&&typeof w=="object"&&!Array.isArray(w)){m=!1;var S=null;if(w["font-scale"]&&!(S=i.parse(w["font-scale"],1,je)))return null;var M=null;if(w["text-font"]&&!(M=i.parse(w["text-font"],1,Bn(Ct))))return null;var P=null;if(w["text-color"]&&!(P=i.parse(w["text-color"],1,Ci)))return null;var D=p[p.length-1];D.scale=S,D.font=M,D.textColor=P}else{var R=i.parse(e[v],1,Vt);if(!R)return null;var U=R.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,p.push({content:R,scale:null,font:null,textColor:null})}}return new ea(p)},ea.prototype.evaluate=function(e){return new Si(this.sections.map(function(i){var s=i.content.evaluate(e);return ti(s)===Ql?new Om("",s,null,null,null):new Om(Vp(s),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))},ea.prototype.eachChild=function(e){for(var i=0,s=this.sections;i<s.length;i+=1){var p=s[i];e(p.content),p.scale&&e(p.scale),p.font&&e(p.font),p.textColor&&e(p.textColor)}},ea.prototype.outputDefined=function(){return!1},ea.prototype.serialize=function(){for(var e=["format"],i=0,s=this.sections;i<s.length;i+=1){var p=s[i];e.push(p.content.serialize());var m={};p.scale&&(m["font-scale"]=p.scale.serialize()),p.font&&(m["text-font"]=p.font.serialize()),p.textColor&&(m["text-color"]=p.textColor.serialize()),e.push(m)}return e},ta.parse=function(e,i){if(e.length!==2)return i.error("Expected two arguments.");var s=i.parse(e[1],1,Ct);return s?new ta(s):i.error("No image name provided.")},ta.prototype.evaluate=function(e){var i=this.input.evaluate(e),s=yo.fromString(i);return s&&e.availableImages&&(s.available=-1<e.availableImages.indexOf(i)),s},ta.prototype.eachChild=function(e){e(this.input)},ta.prototype.outputDefined=function(){return!1},ta.prototype.serialize=function(){return["image",this.input.serialize()]};var qp={"to-boolean":kt,"to-color":Ci,"to-number":je,"to-string":Ct};function ra(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}ao.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var s=e[0];if((s==="to-boolean"||s==="to-string")&&e.length!==2)return i.error("Expected one argument.");for(var p=qp[s],m=[],v=1;v<e.length;v++){var w=i.parse(e[v],v,Vt);if(!w)return null;m.push(w)}return new ao(p,m)},ao.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var i,s,p=0,m=this.args;p<m.length;p+=1){if(s=null,(i=m[p].evaluate(e))instanceof Sr)return i;if(typeof i=="string"){var v=e.parseColor(i);if(v)return v}else if(Array.isArray(i)&&!(s=i.length<3||4<i.length?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":Jy(i[0],i[1],i[2],i[3])))return new Sr(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new ui(s||"Could not parse color from value '"+(typeof i=="string"?i:String(JSON.stringify(i)))+"'")}if(this.type.kind!=="number")return this.type.kind==="formatted"?Si.fromString(Vp(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?yo.fromString(Vp(this.args[0].evaluate(e))):Vp(this.args[0].evaluate(e));for(var w=null,S=0,M=this.args;S<M.length;S+=1){if((w=M[S].evaluate(e))===null)return 0;var P=Number(w);if(!isNaN(P))return P}throw new ui("Could not convert "+JSON.stringify(w)+" to number.")},ao.prototype.eachChild=function(e){this.args.forEach(e)},ao.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ao.prototype.serialize=function(){if(this.type.kind==="formatted")return new ea([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ta(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(i){e.push(i.serialize())}),e};var Zp=["Unknown","Point","LineString","Polygon"];ra.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ra.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Zp[this.feature.type]:this.feature.type:null},ra.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ra.prototype.canonicalID=function(){return this.canonical},ra.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ra.prototype.parseColor=function(e){var i=this._parseColorCache[e];return i||(this._parseColorCache[e]=Sr.parse(e))};var Un=function(e,i,s,p){this.name=e,this.type=i,this._evaluate=s,this.args=p};function na(e,i,s){this.type=vn,this.locale=s,this.caseSensitive=e,this.diacriticSensitive=i}function eu(e,i){e[0]=Math.min(e[0],i[0]),e[1]=Math.min(e[1],i[1]),e[2]=Math.max(e[2],i[0]),e[3]=Math.max(e[3],i[1])}function ll(e,i){return!(e[0]<=i[0]||e[2]>=i[2]||e[1]<=i[1]||e[3]>=i[3])}function tu(e,i){for(var s,p,m,v,w,S,M=!1,P=0,D=i.length;P<D;P++)for(var R=i[P],U=0,F=R.length;U<F-1;U++){if((m=e[0]-(s=R[U])[0])*(S=e[1]-(p=R[U+1])[1])-(w=e[0]-p[0])*(v=e[1]-s[1])==0&&m*w<=0&&v*S<=0)return;Y=e,$=R[U],ie=R[U+1],$[1]>Y[1]!=ie[1]>Y[1]&&Y[0]<(ie[0]-$[0])*(Y[1]-$[1])/(ie[1]-$[1])+$[0]&&(M=!M)}var Y,$,ie;return M}function Gp(e,i){for(var s=0;s<i.length;s++)if(tu(e,i[s]))return 1}function hc(e,i,s,p){var m=p[0]-s[0],v=p[1]-s[1],w=(e[0]-s[0])*v-m*(e[1]-s[1]),S=(i[0]-s[0])*v-m*(i[1]-s[1]);return 0<w&&S<0||w<0&&0<S}function Hp(e,i,s){for(var p=0,m=s;p<m.length;p+=1)for(var v=m[p],w=0;w<v.length-1;++w)if((P=[(M=v[w+1])[0]-(S=v[w])[0],M[1]-S[1]])[0]*(D=[i[0]-e[0],i[1]-e[1]])[1]-P[1]*D[0]!=0&&hc(e,i,S,M)&&hc(S,M,e,i))return 1;var S,M,P,D}function dc(e,i){for(var s=0;s<e.length;++s)if(!tu(e[s],i))return;for(var p=0;p<e.length-1;++p)if(Hp(e[p],e[p+1],i))return;return 1}function Wp(e,i){for(var s=0;s<i.length;s++)if(dc(e,i[s]))return 1}function ru(e,i,s){for(var p=[],m=0;m<e.length;m++){for(var v=[],w=0;w<e[m].length;w++){var S=(P=s,D=(180+(M=e[m][w])[0])/360,R=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M[1]*Math.PI/360)))/360,U=Math.pow(2,P.z),[Math.round(D*U*8192),Math.round(R*U*8192)]);eu(i,S),v.push(S)}p.push(v)}var M,P,D,R,U;return p}function fc(e,i,s){for(var p=[],m=0;m<e.length;m++){var v=ru(e[m],i,s);p.push(v)}return p}function mc(e,i,s,p){if(e[0]<s[0]||e[0]>s[2]){var m=.5*p,v=e[0]-s[0]>m?-p:s[0]-e[0]>m?p:0;v===0&&(v=e[0]-s[2]>m?-p:s[2]-e[0]>m?p:0),e[0]+=v}eu(i,e)}function gc(e,i,s,p){for(var m=8192*Math.pow(2,p.z),v=[8192*p.x,8192*p.y],w=[],S=0,M=e;S<M.length;S+=1)for(var P=0,D=M[S];P<D.length;P+=1){var R=D[P],U=[R.x+v[0],R.y+v[1]];mc(U,i,s,m),w.push(U)}return w}function yc(e,i,s,p){for(var m,v=8192*Math.pow(2,p.z),w=[8192*p.x,8192*p.y],S=[],M=0,P=e;M<P.length;M+=1){for(var D=[],R=0,U=P[M];R<U.length;R+=1){var F=U[R],Y=[F.x+w[0],F.y+w[1]];eu(i,Y),D.push(Y)}S.push(D)}if(i[2]-i[0]<=v/2){(m=i)[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var $=0,ie=S;$<ie.length;$+=1)for(var te=0,xe=ie[$];te<xe.length;te+=1)mc(xe[te],i,s,v)}return S}Un.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Un.prototype.eachChild=function(e){this.args.forEach(e)},Un.prototype.outputDefined=function(){return!1},Un.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Un.parse=function(e,i){var s,p=e[0],m=Un.definitions[p];if(!m)return i.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0);for(var v=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=w.filter(function(gt){var at=gt[0];return!Array.isArray(at)||at.length===e.length-1}),M=null,P=0,D=S;P<D.length;P+=1){var R=D[P],U=R[0],F=R[1];M=new oa(i.registry,i.path,null,i.scope);for(var Y=[],$=!1,ie=1;ie<e.length;ie++){var te=e[ie],xe=Array.isArray(U)?U[ie-1]:U.type,be=M.parse(te,1+Y.length,xe);if(!be){$=!0;break}Y.push(be)}if(!$)if(Array.isArray(U)&&U.length!==Y.length)M.error("Expected "+U.length+" arguments, but found "+Y.length+" instead.");else{for(var Te=0;Te<Y.length;Te++){var Me=Array.isArray(U)?U[Te]:U.type,Fe=Y[Te];M.concat(Te+1).checkSubtype(Me,Fe.type)}if(M.errors.length===0)return new Un(p,v,F,Y)}}if(S.length===1)(s=i.errors).push.apply(s,M.errors);else{for(var Ye=(S.length?S:w).map(function(gt){var at;return at=gt[0],Array.isArray(at)?"("+at.map(on).join(", ")+")":"("+on(at.type)+"...)"}).join(" | "),it=[],ft=1;ft<e.length;ft++){var tt=i.parse(e[ft],1+it.length);if(!tt)return null;it.push(on(tt.type))}i.error("Expected arguments of type "+Ye+", but found ("+it.join(", ")+") instead.")}return null},Un.register=function(e,i){for(var s in Un.definitions=i)e[s]=Un},na.parse=function(e,i){if(e.length!==2)return i.error("Expected one argument.");var s=e[1];if(typeof s!="object"||Array.isArray(s))return i.error("Collator options argument must be an object.");var p=i.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,kt);if(!p)return null;var m=i.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,kt);if(!m)return null;var v=null;return s.locale&&!(v=i.parse(s.locale,1,Ct))?null:new na(p,m,v)},na.prototype.evaluate=function(e){return new Up(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},na.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},na.prototype.outputDefined=function(){return!1},na.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var so=function(e,i){this.type=kt,this.geojson=e,this.geometries=i};function ul(e){if(e instanceof Un&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof so)return!1;var i=!0;return e.eachChild(function(s){i&&!ul(s)&&(i=!1)}),i}function Is(e){if(!(e instanceof Un&&e.name==="feature-state")){var i=!0;return e.eachChild(function(s){i&&!Is(s)&&(i=!1)}),i}}function cl(e,i){if(e instanceof Un&&0<=i.indexOf(e.name))return!1;var s=!0;return e.eachChild(function(p){s&&!cl(p,i)&&(s=!1)}),s}function ia(e,i){this.type=i.type,this.name=e,this.boundExpression=i}so.parse=function(e,i){if(e.length!==2)return i.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(md(e[1])){var s=e[1];if(s.type==="FeatureCollection")for(var p=0;p<s.features.length;++p){var m=s.features[p].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new so(s,s.features[p].geometry)}else if(s.type==="Feature"){var v=s.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new so(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new so(s,s)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},so.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(i,s){var p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=i.canonicalID();if(s.type==="Polygon"){var w=ru(s.coordinates,m,v),S=gc(i.geometry(),p,m,v);if(!ll(p,m))return!1;for(var M=0,P=S;M<P.length;M+=1)if(!tu(P[M],w))return!1}if(s.type==="MultiPolygon"){var D=fc(s.coordinates,m,v),R=gc(i.geometry(),p,m,v);if(!ll(p,m))return!1;for(var U=0,F=R;U<F.length;U+=1)if(!Gp(F[U],D))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(i,s){var p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=i.canonicalID();if(s.type==="Polygon"){var w=ru(s.coordinates,m,v),S=yc(i.geometry(),p,m,v);if(!ll(p,m))return!1;for(var M=0,P=S;M<P.length;M+=1)if(!dc(P[M],w))return!1}if(s.type==="MultiPolygon"){var D=fc(s.coordinates,m,v),R=yc(i.geometry(),p,m,v);if(!ll(p,m))return!1;for(var U=0,F=R;U<F.length;U+=1)if(!Wp(F[U],D))return!1}return!0}(e,this.geometries)}return!1},so.prototype.eachChild=function(){},so.prototype.outputDefined=function(){return!0},so.prototype.serialize=function(){return["within",this.geojson]},ia.parse=function(e,i){if(e.length!==2||typeof e[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");var s=e[1];return i.scope.has(s)?new ia(s,i.scope.get(s)):i.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},ia.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},ia.prototype.eachChild=function(){},ia.prototype.outputDefined=function(){return!1},ia.prototype.serialize=function(){return["var",this.name]};var oa=function(e,i,s,p,m){i===void 0&&(i=[]),p===void 0&&(p=new Dt),m===void 0&&(m=[]),this.registry=e,this.path=i,this.key=i.map(function(v){return"["+v+"]"}).join(""),this.scope=p,this.errors=m,this.expectedType=s};function pl(e,i){for(var s,p=e.length-1,m=0,v=p,w=0;m<=v;)if((s=e[w=Math.floor((m+v)/2)])<=i){if(w===p||i<e[w+1])return w;m=w+1}else{if(!(i<s))throw new ui("Input is not a number.");v=w-1}return 0}oa.prototype.parse=function(e,i,s,p,m){return m===void 0&&(m={}),i?this.concat(i,s,p)._parse(e,m):this._parse(e,m)},oa.prototype._parse=function(e,i){function s(P,D,R){return R==="assert"?new oo(D,[P]):R==="coerce"?new ao(D,[P]):P}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var p=e[0];if(typeof p!="string")return this.error("Expression name must be a string, but found "+typeof p+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var m=this.registry[p];if(m){var v=m.parse(e,this);if(!v)return null;if(this.expectedType){var w=this.expectedType,S=v.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||S.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(w,S))return null}else v=s(v,w,i.typeAnnotation||"coerce");else v=s(v,w,i.typeAnnotation||"assert")}if(!(v instanceof Ea)&&v.type.kind!=="resolvedImage"&&function P(D){if(D instanceof ia)return P(D.boundExpression);if(D instanceof Un&&D.name==="error"||D instanceof na||D instanceof so)return!1;var R=D instanceof ao||D instanceof oo,U=!0;return D.eachChild(function(F){U=R?U&&P(F):U&&F instanceof Ea}),!!U&&ul(D)&&cl(D,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(v)){var M=new ra;try{v=new Ea(v.type,v.evaluate(M))}catch(P){return this.error(P.message),null}}return v}return this.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},oa.prototype.concat=function(e,i,s){var p=typeof e=="number"?this.path.concat(e):this.path,m=s?this.scope.concat(s):this.scope;return new oa(this.registry,p,i||null,m,this.errors)},oa.prototype.error=function(e){for(var i=[],s=arguments.length-1;0<s--;)i[s]=arguments[s+1];var p=""+this.key+i.map(function(m){return"["+m+"]"}).join("");this.errors.push(new Ft(p,e))},oa.prototype.checkSubtype=function(e,i){var s=Fp(e,i);return s&&this.error(s),s};var aa=function(e,i,s){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(var p=0,m=s;p<m.length;p+=1){var v=m[p],w=v[1];this.labels.push(v[0]),this.outputs.push(w)}};function _n(e,i,s){return e*(1-s)+i*s}aa.parse=function(e,i){if(e.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");var s=i.parse(e[1],1,je);if(!s)return null;var p=[],m=null;i.expectedType&&i.expectedType.kind!=="value"&&(m=i.expectedType);for(var v=1;v<e.length;v+=2){var w=v===1?-1/0:e[v],S=e[v+1],M=v,P=v+1;if(typeof w!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(p.length&&p[p.length-1][0]>=w)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);var D=i.parse(S,P,m);if(!D)return null;m=m||D.type,p.push([w,D])}return new aa(m,s,p)},aa.prototype.evaluate=function(e){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(e);var p=this.input.evaluate(e);if(p<=i[0])return s[0].evaluate(e);var m=i.length;return p>=i[m-1]?s[m-1].evaluate(e):s[pl(i,p)].evaluate(e)},aa.prototype.eachChild=function(e){e(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)e(s[i])},aa.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},aa.prototype.serialize=function(){for(var e=["step",this.input.serialize()],i=0;i<this.labels.length;i++)0<i&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e};var hl=Object.freeze({__proto__:null,number:_n,color:function(e,i,s){return new Sr(_n(e.r,i.r,s),_n(e.g,i.g,s),_n(e.b,i.b,s),_n(e.a,i.a,s))},array:function(e,i,s){return e.map(function(p,m){return _n(p,i[m],s)})}}),vc=6/29*3*(6/29),Yp=Math.PI/180,Kp=180/Math.PI;function vr(e){return .008856451679035631<e?Math.pow(e,1/3):e/vc+4/29}function Ln(e){return 6/29<e?e*e*e:vc*(e-4/29)}function ri(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function xn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function vo(e){var i=xn(e.r),s=xn(e.g),p=xn(e.b),m=vr((.4124564*i+.3575761*s+.1804375*p)/.95047),v=vr(.2126729*i+.7151522*s+.072175*p);return{l:116*v-16,a:500*(m-v),b:200*(v-vr((.0193339*i+.119192*s+.9503041*p)/1.08883)),alpha:e.a}}function _c(e){var i=(e.l+16)/116,s=isNaN(e.a)?i:i+e.a/500,p=isNaN(e.b)?i:i-e.b/200;return i=+Ln(i),s=.95047*Ln(s),p=1.08883*Ln(p),new Sr(ri(3.2404542*s-1.5371385*i-.4985314*p),ri(-.969266*s+1.8760108*i+.041556*p),ri(.0556434*s-.2040259*i+1.0572252*p),e.alpha)}var ks={forward:vo,reverse:_c,interpolate:function(e,i,s){return{l:_n(e.l,i.l,s),a:_n(e.a,i.a,s),b:_n(e.b,i.b,s),alpha:_n(e.alpha,i.alpha,s)}}},jt={forward:function(e){var i=vo(e),s=i.l,p=i.a,m=i.b,v=Math.atan2(m,p)*Kp;return{h:v<0?360+v:v,c:Math.sqrt(p*p+m*m),l:s,alpha:e.a}},reverse:function(e){var i=e.h*Yp,s=e.c;return _c({l:e.l,a:Math.cos(i)*s,b:Math.sin(i)*s,alpha:e.alpha})},interpolate:function(e,i,s){return{h:(p=e.h,m=i.h,p+s*(180<(v=m-p)||v<-180?v-360*Math.round(v/360):v)),c:_n(e.c,i.c,s),l:_n(e.l,i.l,s),alpha:_n(e.alpha,i.alpha,s)};var p,m,v}},Bm=Object.freeze({__proto__:null,lab:ks,hcl:jt}),ci=function(e,i,s,p,m){this.type=e,this.operator=i,this.interpolation=s,this.input=p,this.labels=[],this.outputs=[];for(var v=0,w=m;v<w.length;v+=1){var S=w[v],M=S[1];this.labels.push(S[0]),this.outputs.push(M)}};function Fm(e,i,s,p){var m=p-s,v=e-s;return m==0?0:i===1?v/m:(Math.pow(i,v)-1)/(Math.pow(i,m)-1)}ci.interpolationFactor=function(e,i,s,p){var m=0;if(e.name==="exponential")m=Fm(i,e.base,s,p);else if(e.name==="linear")m=Fm(i,1,s,p);else if(e.name==="cubic-bezier"){var v=e.controlPoints;m=new k(v[0],v[1],v[2],v[3]).solve(Fm(i,1,s,p))}return m},ci.parse=function(e,i){var s=e[0],p=e[1],m=e[2],v=e.slice(3);if(!Array.isArray(p)||p.length===0)return i.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){var w=p[1];if(typeof w!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:w}}else{if(p[0]!=="cubic-bezier")return i.error("Unknown interpolation type "+String(p[0]),1,0);var S=p.slice(1);if(S.length!==4||S.some(function(ie){return typeof ie!="number"||ie<0||1<ie}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:S}}if(e.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(m=i.parse(m,2,je)))return null;var M=[],P=null;s==="interpolate-hcl"||s==="interpolate-lab"?P=Ci:i.expectedType&&i.expectedType.kind!=="value"&&(P=i.expectedType);for(var D=0;D<v.length;D+=2){var R=v[D],U=v[D+1],F=D+3,Y=D+4;if(typeof R!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(M.length&&M[M.length-1][0]>=R)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);var $=i.parse(U,Y,P);if(!$)return null;P=P||$.type,M.push([R,$])}return P.kind==="number"||P.kind==="color"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new ci(P,s,p,m,M):i.error("Type "+on(P)+" is not interpolatable.")},ci.prototype.evaluate=function(e){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(e);var p=this.input.evaluate(e);if(p<=i[0])return s[0].evaluate(e);var m=i.length;if(p>=i[m-1])return s[m-1].evaluate(e);var v=pl(i,p),w=ci.interpolationFactor(this.interpolation,p,i[v],i[v+1]),S=s[v].evaluate(e),M=s[v+1].evaluate(e);return this.operator==="interpolate"?hl[this.type.kind.toLowerCase()](S,M,w):this.operator==="interpolate-hcl"?jt.reverse(jt.interpolate(jt.forward(S),jt.forward(M),w)):ks.reverse(ks.interpolate(ks.forward(S),ks.forward(M),w))},ci.prototype.eachChild=function(e){e(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)e(s[i])},ci.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},ci.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,e,this.input.serialize()],s=0;s<this.labels.length;s++)i.push(this.labels[s],this.outputs[s].serialize());return i};var Ka=function(e,i){this.type=e,this.args=i};Ka.parse=function(e,i){if(e.length<2)return i.error("Expectected at least one argument.");var s=null,p=i.expectedType;p&&p.kind!=="value"&&(s=p);for(var m=[],v=0,w=e.slice(1);v<w.length;v+=1){var S=i.parse(w[v],1+m.length,s,void 0,{typeAnnotation:"omit"});if(!S)return null;s=s||S.type,m.push(S)}var M=p&&m.some(function(P){return Fp(p,P.type)});return new Ka(M?Vt:s,m)},Ka.prototype.evaluate=function(e){for(var i,s=null,p=0,m=0,v=this.args;m<v.length&&(p++,(s=v[m].evaluate(e))&&s instanceof yo&&!s.available&&(i=i||s.name,s=null,p===this.args.length&&(s=i)),s===null);m+=1);return s},Ka.prototype.eachChild=function(e){this.args.forEach(e)},Ka.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ka.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(i){e.push(i.serialize())}),e};var Zi=function(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i};function $a(e,i,s){this.type=e,this.index=i,this.input=s}function nu(e,i){this.type=kt,this.needle=e,this.haystack=i}function Ms(e,i,s){this.type=je,this.needle=e,this.haystack=i,this.fromIndex=s}function iu(e,i,s,p,m,v){this.inputType=e,this.type=i,this.input=s,this.cases=p,this.outputs=m,this.otherwise=v}function dl(e,i,s){this.type=e,this.branches=i,this.otherwise=s}function cr(e,i,s,p){this.type=e,this.input=i,this.beginIndex=s,this.endIndex=p}function jm(e,i){return e==="=="||e==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Um(e,i,s,p){return p.compare(i,s)===0}function xc(e,i,s){var p=e!=="=="&&e!=="!=";return m.parse=function(v,w){if(v.length!==3&&v.length!==4)return w.error("Expected two or three arguments.");var S=v[0],M=w.parse(v[1],1,Vt);if(!M)return null;if(!jm(S,M.type))return w.concat(1).error('"'+S+`" comparisons are not supported for type '`+on(M.type)+"'.");var P=w.parse(v[2],2,Vt);if(!P)return null;if(!jm(S,P.type))return w.concat(2).error('"'+S+`" comparisons are not supported for type '`+on(P.type)+"'.");if(M.type.kind!==P.type.kind&&M.type.kind!=="value"&&P.type.kind!=="value")return w.error("Cannot compare types '"+on(M.type)+"' and '"+on(P.type)+"'.");p&&(M.type.kind==="value"&&P.type.kind!=="value"?M=new oo(P.type,[M]):M.type.kind!=="value"&&P.type.kind==="value"&&(P=new oo(M.type,[P])));var D=null;if(v.length===4){if(M.type.kind!=="string"&&P.type.kind!=="string"&&M.type.kind!=="value"&&P.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(!(D=w.parse(v[3],3,vn)))return null}return new m(M,P,D)},m.prototype.evaluate=function(v){var w=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(p&&this.hasUntypedArgument){var M=ti(w),P=ti(S);if(M.kind!==P.kind||M.kind!=="string"&&M.kind!=="number")throw new ui('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+M.kind+", "+P.kind+") instead.")}if(this.collator&&!p&&this.hasUntypedArgument){var D=ti(w),R=ti(S);if(D.kind!=="string"||R.kind!=="string")return i(v,w,S)}return this.collator?s(v,w,S,this.collator.evaluate(v)):i(v,w,S)},m.prototype.eachChild=function(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)},m.prototype.outputDefined=function(){return!0},m.prototype.serialize=function(){var v=[e];return this.eachChild(function(w){v.push(w.serialize())}),v},m;function m(v,w,S){this.type=kt,this.lhs=v,this.rhs=w,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||w.type.kind==="value"}}function Xa(e,i,s,p,m){this.type=Ct,this.number=e,this.locale=i,this.currency=s,this.minFractionDigits=p,this.maxFractionDigits=m}Zi.prototype.evaluate=function(e){return this.result.evaluate(e)},Zi.prototype.eachChild=function(e){for(var i=0,s=this.bindings;i<s.length;i+=1)e(s[i][1]);e(this.result)},Zi.parse=function(e,i){if(e.length<4)return i.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var s=[],p=1;p<e.length-1;p+=2){var m=e[p];if(typeof m!="string")return i.error("Expected string, but found "+typeof m+" instead.",p);if(/[^a-zA-Z0-9_]/.test(m))return i.error("Variable names must contain only alphanumeric characters or '_'.",p);var v=i.parse(e[p+1],p+1);if(!v)return null;s.push([m,v])}var w=i.parse(e[e.length-1],e.length-1,i.expectedType,s);return w?new Zi(s,w):null},Zi.prototype.outputDefined=function(){return this.result.outputDefined()},Zi.prototype.serialize=function(){for(var e=["let"],i=0,s=this.bindings;i<s.length;i+=1){var p=s[i];e.push(p[0],p[1].serialize())}return e.push(this.result.serialize()),e},$a.parse=function(e,i){if(e.length!==3)return i.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var s=i.parse(e[1],1,je),p=i.parse(e[2],2,Bn(i.expectedType||Vt));return s&&p?new $a(p.type.itemType,s,p):null},$a.prototype.evaluate=function(e){var i=this.index.evaluate(e),s=this.input.evaluate(e);if(i<0)throw new ui("Array index out of bounds: "+i+" < 0.");if(i>=s.length)throw new ui("Array index out of bounds: "+i+" > "+(s.length-1)+".");if(i!==Math.floor(i))throw new ui("Array index must be an integer, but found "+i+" instead.");return s[i]},$a.prototype.eachChild=function(e){e(this.index),e(this.input)},$a.prototype.outputDefined=function(){return!1},$a.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]},nu.parse=function(e,i){if(e.length!==3)return i.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var s=i.parse(e[1],1,Vt),p=i.parse(e[2],2,Vt);return s&&p?Nm(s.type,[kt,Ct,je,Cr,Vt])?new nu(s,p):i.error("Expected first argument to be of type boolean, string, number or null, but found "+on(s.type)+" instead"):null},nu.prototype.evaluate=function(e){var i=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!s)return!1;if(!jp(i,["boolean","string","number","null"]))throw new ui("Expected first argument to be of type boolean, string, number or null, but found "+on(ti(i))+" instead.");if(!jp(s,["string","array"]))throw new ui("Expected second argument to be of type array or string, but found "+on(ti(s))+" instead.");return 0<=s.indexOf(i)},nu.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},nu.prototype.outputDefined=function(){return!0},nu.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]},Ms.parse=function(e,i){if(e.length<=2||5<=e.length)return i.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var s=i.parse(e[1],1,Vt),p=i.parse(e[2],2,Vt);if(!s||!p)return null;if(!Nm(s.type,[kt,Ct,je,Cr,Vt]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+on(s.type)+" instead");if(e.length!==4)return new Ms(s,p);var m=i.parse(e[3],3,je);return m?new Ms(s,p,m):null},Ms.prototype.evaluate=function(e){var i=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!jp(i,["boolean","string","number","null"]))throw new ui("Expected first argument to be of type boolean, string, number or null, but found "+on(ti(i))+" instead.");if(!jp(s,["string","array"]))throw new ui("Expected second argument to be of type array or string, but found "+on(ti(s))+" instead.");if(this.fromIndex){var p=this.fromIndex.evaluate(e);return s.indexOf(i,p)}return s.indexOf(i)},Ms.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Ms.prototype.outputDefined=function(){return!1},Ms.prototype.serialize=function(){if(this.fromIndex==null||this.fromIndex===void 0)return["index-of",this.needle.serialize(),this.haystack.serialize()];var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]},iu.parse=function(e,i){if(e.length<5)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return i.error("Expected an even number of arguments.");var s,p;i.expectedType&&i.expectedType.kind!=="value"&&(p=i.expectedType);for(var m={},v=[],w=2;w<e.length-1;w+=2){var S=e[w],M=e[w+1];Array.isArray(S)||(S=[S]);var P=i.concat(w);if(S.length===0)return P.error("Expected at least one branch label.");for(var D=0,R=S;D<R.length;D+=1){var U=R[D];if(typeof U!="number"&&typeof U!="string")return P.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return P.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof U=="number"&&Math.floor(U)!==U)return P.error("Numeric branch labels must be integer values.");if(s){if(P.checkSubtype(s,ti(U)))return null}else s=ti(U);if(m[String(U)]!==void 0)return P.error("Branch labels must be unique.");m[String(U)]=v.length}var F=i.parse(M,w,p);if(!F)return null;p=p||F.type,v.push(F)}var Y=i.parse(e[1],1,Vt);if(!Y)return null;var $=i.parse(e[e.length-1],e.length-1,p);return!$||Y.type.kind!=="value"&&i.concat(1).checkSubtype(s,Y.type)?null:new iu(s,p,Y,m,v,$)},iu.prototype.evaluate=function(e){var i=this.input.evaluate(e);return(ti(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)},iu.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},iu.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},iu.prototype.serialize=function(){for(var e=this,i=["match",this.input.serialize()],s=[],p={},m=0,v=Object.keys(this.cases).sort();m<v.length;m+=1){var w=v[m];(R=p[this.cases[w]])===void 0?(p[this.cases[w]]=s.length,s.push([this.cases[w],[w]])):s[R][1].push(w)}for(var S=function(F){return e.inputType.kind==="number"?Number(F):F},M=0,P=s;M<P.length;M+=1){var D=P[M],R=D[0],U=D[1];i.push(U.length===1?S(U[0]):U.map(S)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i},dl.parse=function(e,i){if(e.length<4)return i.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return i.error("Expected an odd number of arguments.");var s;i.expectedType&&i.expectedType.kind!=="value"&&(s=i.expectedType);for(var p=[],m=1;m<e.length-1;m+=2){var v=i.parse(e[m],m,kt);if(!v)return null;var w=i.parse(e[m+1],m+1,s);if(!w)return null;p.push([v,w]),s=s||w.type}var S=i.parse(e[e.length-1],e.length-1,s);return S?new dl(s,p,S):null},dl.prototype.evaluate=function(e){for(var i=0,s=this.branches;i<s.length;i+=1){var p=s[i],m=p[1];if(p[0].evaluate(e))return m.evaluate(e)}return this.otherwise.evaluate(e)},dl.prototype.eachChild=function(e){for(var i=0,s=this.branches;i<s.length;i+=1){var p=s[i],m=p[1];e(p[0]),e(m)}e(this.otherwise)},dl.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},dl.prototype.serialize=function(){var e=["case"];return this.eachChild(function(i){e.push(i.serialize())}),e},cr.parse=function(e,i){if(e.length<=2||5<=e.length)return i.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var s=i.parse(e[1],1,Vt),p=i.parse(e[2],2,je);if(!s||!p)return null;if(!Nm(s.type,[Bn(Vt),Ct,Vt]))return i.error("Expected first argument to be of type array or string, but found "+on(s.type)+" instead");if(e.length!==4)return new cr(s.type,s,p);var m=i.parse(e[3],3,je);return m?new cr(s.type,s,p,m):null},cr.prototype.evaluate=function(e){var i=this.input.evaluate(e),s=this.beginIndex.evaluate(e);if(!jp(i,["string","array"]))throw new ui("Expected first argument to be of type array or string, but found "+on(ti(i))+" instead.");if(this.endIndex){var p=this.endIndex.evaluate(e);return i.slice(s,p)}return i.slice(s)},cr.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},cr.prototype.outputDefined=function(){return!1},cr.prototype.serialize=function(){if(this.endIndex==null||this.endIndex===void 0)return["slice",this.input.serialize(),this.beginIndex.serialize()];var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]};var Qy=xc("==",function(e,i,s){return i===s},Um),e0=xc("!=",function(e,i,s){return i!==s},function(e,i,s,p){return!Um(0,i,s,p)}),Vm=xc("<",function(e,i,s){return i<s},function(e,i,s,p){return p.compare(i,s)<0}),pi=xc(">",function(e,i,s){return s<i},function(e,i,s,p){return 0<p.compare(i,s)}),qm=xc("<=",function(e,i,s){return i<=s},function(e,i,s,p){return p.compare(i,s)<=0}),t0=xc(">=",function(e,i,s){return s<=i},function(e,i,s,p){return 0<=p.compare(i,s)});function Ti(e){this.type=je,this.input=e}Xa.parse=function(e,i){if(e.length!==3)return i.error("Expected two arguments.");var s=i.parse(e[1],1,je);if(!s)return null;var p=e[2];if(typeof p!="object"||Array.isArray(p))return i.error("NumberFormat options argument must be an object.");var m=null;if(p.locale&&!(m=i.parse(p.locale,1,Ct)))return null;var v=null;if(p.currency&&!(v=i.parse(p.currency,1,Ct)))return null;var w=null;if(p["min-fraction-digits"]&&!(w=i.parse(p["min-fraction-digits"],1,je)))return null;var S=null;return p["max-fraction-digits"]&&!(S=i.parse(p["max-fraction-digits"],1,je))?null:new Xa(s,m,v,w,S)},Xa.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Xa.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Xa.prototype.outputDefined=function(){return!1},Xa.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]},Ti.parse=function(e,i){if(e.length!==2)return i.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var s=i.parse(e[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?i.error("Expected argument of type string or array, but found "+on(s.type)+" instead."):new Ti(s):null},Ti.prototype.evaluate=function(e){var i=this.input.evaluate(e);if(typeof i=="string"||Array.isArray(i))return i.length;throw new ui("Expected value to be of type string or array, but found "+on(ti(i))+" instead.")},Ti.prototype.eachChild=function(e){e(this.input)},Ti.prototype.outputDefined=function(){return!1},Ti.prototype.serialize=function(){var e=["length"];return this.eachChild(function(i){e.push(i.serialize())}),e};var fl={"==":Qy,"!=":e0,">":pi,"<":Vm,">=":t0,"<=":qm,array:oo,at:$a,boolean:oo,case:dl,coalesce:Ka,collator:na,format:ea,image:ta,in:nu,"index-of":Ms,interpolate:ci,"interpolate-hcl":ci,"interpolate-lab":ci,length:Ti,let:Zi,literal:Ea,match:iu,number:oo,"number-format":Xa,object:oo,slice:cr,step:aa,string:oo,"to-boolean":ao,"to-color":ao,"to-number":ao,"to-string":ao,var:ia,within:so};function r0(e,i){var s=i[0],p=i[1],m=i[2],v=i[3];s=s.evaluate(e),p=p.evaluate(e),m=m.evaluate(e);var w=v?v.evaluate(e):1,S=Jy(s,p,m,w);if(S)throw new ui(S);return new Sr(s/255*w,p/255*w,m/255*w,w)}function Zm(e,i){return e in i}function gd(e,i){var s=i[e];return s===void 0?null:s}function ml(e){return{type:e}}function Gm(e){return{result:"success",value:e}}function As(e){return{result:"error",value:e}}function wc(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function ou(e){return e.expression&&-1<e.expression.parameters.indexOf("zoom")}function yd(e){return e.expression&&e.expression.interpolated}function lr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Gi(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Hm(e){return e}function Ja(e,i,s){return e!==void 0?e:i!==void 0?i:s!==void 0?s:void 0}function n0(e,i,s,p,m){return Ja(typeof s===m?p[s]:void 0,e.default,i.default)}function ax(e,i,s){if(lr(s)!=="number")return Ja(e.default,i.default);var p=e.stops.length;if(p===1||s<=e.stops[0][0])return e.stops[0][1];if(s>=e.stops[p-1][0])return e.stops[p-1][1];var m=pl(e.stops.map(function(v){return v[0]}),s);return e.stops[m][1]}function i0(e,i,s){var p=e.base!==void 0?e.base:1;if(lr(s)!=="number")return Ja(e.default,i.default);var m=e.stops.length;if(m===1||s<=e.stops[0][0])return e.stops[0][1];if(s>=e.stops[m-1][0])return e.stops[m-1][1];var v,w,S,M,P=pl(e.stops.map(function($){return $[0]}),s),D=(v=p,M=s-(w=e.stops[P][0]),(S=e.stops[P+1][0]-w)==0?0:v===1?M/S:(Math.pow(v,M)-1)/(Math.pow(v,S)-1)),R=e.stops[P][1],U=e.stops[P+1][1],F=hl[i.type]||Hm;if(e.colorSpace&&e.colorSpace!=="rgb"){var Y=Bm[e.colorSpace];F=function($,ie){return Y.reverse(Y.interpolate(Y.forward($),Y.forward(ie),D))}}return typeof R.evaluate=="function"?{evaluate:function(){for(var $=[],ie=arguments.length;ie--;)$[ie]=arguments[ie];var te=R.evaluate.apply(void 0,$),xe=U.evaluate.apply(void 0,$);if(te!==void 0&&xe!==void 0)return F(te,xe,D)}}:F(R,U,D)}function o0(e,i,s){return i.type==="color"?s=Sr.parse(s):i.type==="formatted"?s=Si.fromString(s.toString()):i.type==="resolvedImage"?s=yo.fromString(s.toString()):lr(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0),Ja(s,e.default,i.default)}Un.register(fl,{error:[{kind:"error"},[Ct],function(e,i){throw new ui(i[0].evaluate(e))}],typeof:[Ct,[Vt],function(e,i){return on(ti(i[0].evaluate(e)))}],"to-rgba":[Bn(je,4),[Ci],function(e,i){return i[0].evaluate(e).toArray()}],rgb:[Ci,[je,je,je],r0],rgba:[Ci,[je,je,je,je],r0],has:{type:kt,overloads:[[[Ct],function(e,i){return Zm(i[0].evaluate(e),e.properties())}],[[Ct,Qo],function(e,i){var s=i[1];return Zm(i[0].evaluate(e),s.evaluate(e))}]]},get:{type:Vt,overloads:[[[Ct],function(e,i){return gd(i[0].evaluate(e),e.properties())}],[[Ct,Qo],function(e,i){var s=i[1];return gd(i[0].evaluate(e),s.evaluate(e))}]]},"feature-state":[Vt,[Ct],function(e,i){return gd(i[0].evaluate(e),e.featureState||{})}],properties:[Qo,[],function(e){return e.properties()}],"geometry-type":[Ct,[],function(e){return e.geometryType()}],id:[Vt,[],function(e){return e.id()}],zoom:[je,[],function(e){return e.globals.zoom}],"heatmap-density":[je,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[je,[],function(e){return e.globals.lineProgress||0}],accumulated:[Vt,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[je,ml(je),function(e,i){for(var s=0,p=0,m=i;p<m.length;p+=1)s+=m[p].evaluate(e);return s}],"*":[je,ml(je),function(e,i){for(var s=1,p=0,m=i;p<m.length;p+=1)s*=m[p].evaluate(e);return s}],"-":{type:je,overloads:[[[je,je],function(e,i){var s=i[1];return i[0].evaluate(e)-s.evaluate(e)}],[[je],function(e,i){return-i[0].evaluate(e)}]]},"/":[je,[je,je],function(e,i){var s=i[1];return i[0].evaluate(e)/s.evaluate(e)}],"%":[je,[je,je],function(e,i){var s=i[1];return i[0].evaluate(e)%s.evaluate(e)}],ln2:[je,[],function(){return Math.LN2}],pi:[je,[],function(){return Math.PI}],e:[je,[],function(){return Math.E}],"^":[je,[je,je],function(e,i){var s=i[1];return Math.pow(i[0].evaluate(e),s.evaluate(e))}],sqrt:[je,[je],function(e,i){return Math.sqrt(i[0].evaluate(e))}],log10:[je,[je],function(e,i){return Math.log(i[0].evaluate(e))/Math.LN10}],ln:[je,[je],function(e,i){return Math.log(i[0].evaluate(e))}],log2:[je,[je],function(e,i){return Math.log(i[0].evaluate(e))/Math.LN2}],sin:[je,[je],function(e,i){return Math.sin(i[0].evaluate(e))}],cos:[je,[je],function(e,i){return Math.cos(i[0].evaluate(e))}],tan:[je,[je],function(e,i){return Math.tan(i[0].evaluate(e))}],asin:[je,[je],function(e,i){return Math.asin(i[0].evaluate(e))}],acos:[je,[je],function(e,i){return Math.acos(i[0].evaluate(e))}],atan:[je,[je],function(e,i){return Math.atan(i[0].evaluate(e))}],min:[je,ml(je),function(e,i){return Math.min.apply(Math,i.map(function(s){return s.evaluate(e)}))}],max:[je,ml(je),function(e,i){return Math.max.apply(Math,i.map(function(s){return s.evaluate(e)}))}],abs:[je,[je],function(e,i){return Math.abs(i[0].evaluate(e))}],round:[je,[je],function(e,i){var s=i[0].evaluate(e);return s<0?-Math.round(-s):Math.round(s)}],floor:[je,[je],function(e,i){return Math.floor(i[0].evaluate(e))}],ceil:[je,[je],function(e,i){return Math.ceil(i[0].evaluate(e))}],"filter-==":[kt,[Ct,Vt],function(e,i){var s=i[0],p=i[1];return e.properties()[s.value]===p.value}],"filter-id-==":[kt,[Vt],function(e,i){var s=i[0];return e.id()===s.value}],"filter-type-==":[kt,[Ct],function(e,i){var s=i[0];return e.geometryType()===s.value}],"filter-<":[kt,[Ct,Vt],function(e,i){var s=i[0],p=i[1],m=e.properties()[s.value],v=p.value;return typeof m==typeof v&&m<v}],"filter-id-<":[kt,[Vt],function(e,i){var s=i[0],p=e.id(),m=s.value;return typeof p==typeof m&&p<m}],"filter->":[kt,[Ct,Vt],function(e,i){var s=i[0],p=i[1],m=e.properties()[s.value],v=p.value;return typeof m==typeof v&&v<m}],"filter-id->":[kt,[Vt],function(e,i){var s=i[0],p=e.id(),m=s.value;return typeof p==typeof m&&m<p}],"filter-<=":[kt,[Ct,Vt],function(e,i){var s=i[0],p=i[1],m=e.properties()[s.value],v=p.value;return typeof m==typeof v&&m<=v}],"filter-id-<=":[kt,[Vt],function(e,i){var s=i[0],p=e.id(),m=s.value;return typeof p==typeof m&&p<=m}],"filter->=":[kt,[Ct,Vt],function(e,i){var s=i[0],p=i[1],m=e.properties()[s.value],v=p.value;return typeof m==typeof v&&v<=m}],"filter-id->=":[kt,[Vt],function(e,i){var s=i[0],p=e.id(),m=s.value;return typeof p==typeof m&&m<=p}],"filter-has":[kt,[Vt],function(e,i){return i[0].value in e.properties()}],"filter-has-id":[kt,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[kt,[Bn(Ct)],function(e,i){return 0<=i[0].value.indexOf(e.geometryType())}],"filter-id-in":[kt,[Bn(Vt)],function(e,i){return 0<=i[0].value.indexOf(e.id())}],"filter-in-small":[kt,[Ct,Bn(Vt)],function(e,i){var s=i[0];return 0<=i[1].value.indexOf(e.properties()[s.value])}],"filter-in-large":[kt,[Ct,Bn(Vt)],function(e,i){var s=i[0],p=i[1];return function(m,v,w,S){for(;w<=S;){var M=w+S>>1;if(v[M]===m)return!0;v[M]>m?S=M-1:w=1+M}return!1}(e.properties()[s.value],p.value,0,p.value.length-1)}],all:{type:kt,overloads:[[[kt,kt],function(e,i){var s=i[1];return i[0].evaluate(e)&&s.evaluate(e)}],[ml(kt),function(e,i){for(var s=0,p=i;s<p.length;s+=1)if(!p[s].evaluate(e))return!1;return!0}]]},any:{type:kt,overloads:[[[kt,kt],function(e,i){var s=i[1];return i[0].evaluate(e)||s.evaluate(e)}],[ml(kt),function(e,i){for(var s=0,p=i;s<p.length;s+=1)if(p[s].evaluate(e))return!0;return!1}]]},"!":[kt,[kt],function(e,i){return!i[0].evaluate(e)}],"is-supported-script":[kt,[Ct],function(e,i){var s=e.globals&&e.globals.isSupportedScript;return!s||s(i[0].evaluate(e))}],upcase:[Ct,[Ct],function(e,i){return i[0].evaluate(e).toUpperCase()}],downcase:[Ct,[Ct],function(e,i){return i[0].evaluate(e).toLowerCase()}],concat:[Ct,ml(Vt),function(e,i){return i.map(function(s){return Vp(s.evaluate(e))}).join("")}],"resolved-locale":[Ct,[vn],function(e,i){return i[0].evaluate(e).resolvedLocale()}]});var bc=function(e,i){var s;this.expression=e,this._warningHistory={},this._evaluator=new ra,this._defaultValue=i?(s=i).type==="color"&&Gi(s.default)?new Sr(0,0,0,0):s.type==="color"?Sr.parse(s.default)||null:s.default===void 0?null:s.default:null,this._enumValues=i&&i.type==="enum"?i.values:null};function Cc(e){return Array.isArray(e)&&0<e.length&&typeof e[0]=="string"&&e[0]in fl}function Oi(e,i){var s,p=new oa(fl,[],i?(s={color:Ci,string:Ct,number:je,enum:Ct,boolean:kt,formatted:Wr,resolvedImage:Ql},i.type==="array"?Bn(s[i.value]||Vt,i.length):s[i.type]):void 0),m=p.parse(e,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Gm(new bc(m,i)):As(p.errors)}bc.prototype.evaluateWithoutErrorHandling=function(e,i,s,p,m,v){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=s,this._evaluator.canonical=p,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)},bc.prototype.evaluate=function(e,i,s,p,m,v){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=s||null,this._evaluator.canonical=p,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v||null;try{var w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new ui("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(w)+" instead.");return w}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var gl=function(e,i){this.kind=e,this._styleExpression=i,this.isStateDependent=e!=="constant"&&!Is(i.expression)};gl.prototype.evaluateWithoutErrorHandling=function(e,i,s,p,m,v){return this._styleExpression.evaluateWithoutErrorHandling(e,i,s,p,m,v)},gl.prototype.evaluate=function(e,i,s,p,m,v){return this._styleExpression.evaluate(e,i,s,p,m,v)};var Sc=function(e,i,s,p){this.kind=e,this.zoomStops=s,this._styleExpression=i,this.isStateDependent=e!=="camera"&&!Is(i.expression),this.interpolationType=p};function a0(e,i){if((e=Oi(e,i)).result==="error")return e;var s=e.value.expression,p=ul(s);if(!p&&!wc(i))return As([new Ft("","data expressions not supported")]);var m=cl(s,["zoom"]);if(!m&&!ou(i))return As([new Ft("","zoom expressions not supported")]);var v=function w(S){var M=null;if(S instanceof Zi)M=w(S.result);else if(S instanceof Ka)for(var P=0,D=S.args;P<D.length&&!(M=w(D[P]));P+=1);else(S instanceof aa||S instanceof ci)&&S.input instanceof Un&&S.input.name==="zoom"&&(M=S);return M instanceof Ft||S.eachChild(function(R){var U=w(R);U instanceof Ft?M=U:!M&&U?M=new Ft("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):M&&U&&M!==U&&(M=new Ft("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),M}(s);return v||m?v instanceof Ft?As([v]):v instanceof ci&&!yd(i)?As([new Ft("",'"interpolate" expressions cannot be used with this property')]):Gm(v?new Sc(p?"camera":"composite",e.value,v.labels,v instanceof ci?v.interpolation:void 0):new gl(p?"constant":"source",e.value)):As([new Ft("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function $p(e,i){this._parameters=e,this._specification=i,wt(this,function s(p,m){var v,w,S,M=m.type==="color",P=p.stops&&typeof p.stops[0][0]=="object",D=P||!(P||p.property!==void 0),R=p.type||(yd(m)?"exponential":"interval");if(M&&((p=wt({},p)).stops&&(p.stops=p.stops.map(function(tt){return[tt[0],Sr.parse(tt[1])]})),p.default=Sr.parse(p.default?p.default:m.default)),p.colorSpace&&p.colorSpace!=="rgb"&&!Bm[p.colorSpace])throw new Error("Unknown color space: "+p.colorSpace);if(R==="exponential")v=i0;else if(R==="interval")v=ax;else if(R==="categorical"){v=n0,w=Object.create(null);for(var U=0,F=p.stops;U<F.length;U+=1){var Y=F[U];w[Y[0]]=Y[1]}S=typeof p.stops[0][0]}else{if(R!=="identity")throw new Error('Unknown function type "'+R+'"');v=o0}if(P){for(var $={},ie=[],te=0;te<p.stops.length;te++){var xe=p.stops[te],be=xe[0].zoom;$[be]===void 0&&($[be]={zoom:be,type:p.type,property:p.property,default:p.default,stops:[]},ie.push(be)),$[be].stops.push([xe[0].value,xe[1]])}for(var Te=[],Me=0,Fe=ie;Me<Fe.length;Me+=1){var Ye=Fe[Me];Te.push([$[Ye].zoom,s($[Ye],m)])}var it={name:"linear"};return{kind:"composite",interpolationType:it,interpolationFactor:ci.interpolationFactor.bind(void 0,it),zoomStops:Te.map(function(tt){return tt[0]}),evaluate:function(tt,gt){var at=tt.zoom;return i0({stops:Te,base:p.base},m,at).evaluate(at,gt)}}}if(D){var ft=R==="exponential"?{name:"exponential",base:p.base!==void 0?p.base:1}:null;return{kind:"camera",interpolationType:ft,interpolationFactor:ci.interpolationFactor.bind(void 0,ft),zoomStops:p.stops.map(function(tt){return tt[0]}),evaluate:function(tt){return v(p,m,tt.zoom,w,S)}}}return{kind:"source",evaluate:function(tt,gt){var at=gt&&gt.properties?gt.properties[p.property]:void 0;return at===void 0?Ja(p.default,m.default):v(p,m,at,w,S)}}}(this._parameters,this._specification))}function Ia(e){var i=e.key,s=e.value,p=e.valueSpec||{},m=e.objectElementValidators||{},v=e.style,w=e.styleSpec,S=[],M=lr(s);if(M!=="object")return[new Ae(i,s,"object expected, "+M+" found")];for(var P in s){var D=P.split(".")[0],R=p[D]||p["*"],U=void 0;if(m[D])U=m[D];else if(p[D])U=ka;else if(m["*"])U=m["*"];else{if(!p["*"]){S.push(new Ae(i,s[P],'unknown property "'+P+'"'));continue}U=ka}S=S.concat(U({key:(i&&i+".")+P,value:s[P],valueSpec:R,style:v,styleSpec:w,object:s,objectKey:P},s))}for(var F in p)m[F]||p[F].required&&p[F].default===void 0&&s[F]===void 0&&S.push(new Ae(i,s,'missing required property "'+F+'"'));return S}function s0(e){var i=e.value,s=e.valueSpec,p=e.style,m=e.styleSpec,v=e.key,w=e.arrayElementValidator||ka;if(lr(i)!=="array")return[new Ae(v,i,"array expected, "+lr(i)+" found")];if(s.length&&i.length!==s.length)return[new Ae(v,i,"array length "+s.length+" expected, length "+i.length+" found")];if(s["min-length"]&&i.length<s["min-length"])return[new Ae(v,i,"array length at least "+s["min-length"]+" expected, length "+i.length+" found")];var S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),lr(s.value)==="object"&&(S=s.value);for(var M=[],P=0;P<i.length;P++)M=M.concat(w({array:i,arrayIndex:P,value:i[P],valueSpec:S,style:p,styleSpec:m,key:v+"["+P+"]"}));return M}function l0(e){var i=e.key,s=e.value,p=e.valueSpec,m=lr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new Ae(i,s,"number expected, "+m+" found")]:"minimum"in p&&s<p.minimum?[new Ae(i,s,s+" is less than the minimum value "+p.minimum)]:"maximum"in p&&s>p.maximum?[new Ae(i,s,s+" is greater than the maximum value "+p.maximum)]:[]}function u0(e){var i,s,p,m=e.valueSpec,v=vt(e.value.type),w={},S=v!=="categorical"&&e.value.property===void 0,M=!S,P=lr(e.value.stops)==="array"&&lr(e.value.stops[0])==="array"&&lr(e.value.stops[0][0])==="object",D=Ia({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(F){if(v==="identity")return[new Ae(F.key,F.value,'identity function may not have a "stops" property')];var Y=[],$=F.value;return Y=Y.concat(s0({key:F.key,value:$,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:R})),lr($)==="array"&&$.length===0&&Y.push(new Ae(F.key,$,"array must have at least one stop")),Y},default:function(F){return ka({key:F.key,value:F.value,valueSpec:m,style:F.style,styleSpec:F.styleSpec})}}});return v==="identity"&&S&&D.push(new Ae(e.key,e.value,'missing required property "property"')),v==="identity"||e.value.stops||D.push(new Ae(e.key,e.value,'missing required property "stops"')),v==="exponential"&&e.valueSpec.expression&&!yd(e.valueSpec)&&D.push(new Ae(e.key,e.value,"exponential functions not supported")),8<=e.styleSpec.$version&&(M&&!wc(e.valueSpec)?D.push(new Ae(e.key,e.value,"property functions not supported")):S&&!ou(e.valueSpec)&&D.push(new Ae(e.key,e.value,"zoom functions not supported"))),v!=="categorical"&&!P||e.value.property!==void 0||D.push(new Ae(e.key,e.value,'"property" property is required')),D;function R(F){var Y=[],$=F.value,ie=F.key;if(lr($)!=="array")return[new Ae(ie,$,"array expected, "+lr($)+" found")];if($.length!==2)return[new Ae(ie,$,"array length 2 expected, length "+$.length+" found")];if(P){if(lr($[0])!=="object")return[new Ae(ie,$,"object expected, "+lr($[0])+" found")];if($[0].zoom===void 0)return[new Ae(ie,$,"object stop key must have zoom")];if($[0].value===void 0)return[new Ae(ie,$,"object stop key must have value")];if(p&&p>vt($[0].zoom))return[new Ae(ie,$[0].zoom,"stop zoom values must appear in ascending order")];vt($[0].zoom)!==p&&(p=vt($[0].zoom),s=void 0,w={}),Y=Y.concat(Ia({key:ie+"[0]",value:$[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:l0,value:U}}))}else Y=Y.concat(U({key:ie+"[0]",value:$[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},$));return Cc(Pt($[1]))?Y.concat([new Ae(ie+"[1]",$[1],"expressions are not allowed in function stops.")]):Y.concat(ka({key:ie+"[1]",value:$[1],valueSpec:m,style:F.style,styleSpec:F.styleSpec}))}function U(F,Y){var $=lr(F.value),ie=vt(F.value),te=F.value!==null?F.value:Y;if(i){if($!==i)return[new Ae(F.key,te,$+" stop domain type must match previous stop domain type "+i)]}else i=$;if($!=="number"&&$!=="string"&&$!=="boolean")return[new Ae(F.key,te,"stop domain value must be a number, string, or boolean")];if($==="number"||v==="categorical")return v!=="categorical"||$!=="number"||isFinite(ie)&&Math.floor(ie)===ie?v!=="categorical"&&$==="number"&&s!==void 0&&ie<s?[new Ae(F.key,te,"stop domain values must appear in ascending order")]:(s=ie,v==="categorical"&&ie in w?[new Ae(F.key,te,"stop domain values must be unique")]:(w[ie]=!0,[])):[new Ae(F.key,te,"integer expected, found "+ie)];var xe="number expected, "+$+" found";return wc(m)&&v===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ae(F.key,te,xe)]}}function au(e){var i=(e.expressionContext==="property"?a0:Oi)(Pt(e.value),e.valueSpec);if(i.result==="error")return i.value.map(function(p){return new Ae(""+e.key+p.key,e.value,p.message)});var s=i.value.expression||i.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!s.outputDefined())return[new Ae(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Is(s))return[new Ae(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Is(s))return[new Ae(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!cl(s,["zoom","feature-state"]))return[new Ae(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!ul(s))return[new Ae(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xp(e){var i=e.key,s=e.value,p=e.valueSpec,m=[];return Array.isArray(p.values)?p.values.indexOf(vt(s))===-1&&m.push(new Ae(i,s,"expected one of ["+p.values.join(", ")+"], "+JSON.stringify(s)+" found")):Object.keys(p.values).indexOf(vt(s))===-1&&m.push(new Ae(i,s,"expected one of ["+Object.keys(p.values).join(", ")+"], "+JSON.stringify(s)+" found")),m}function Tc(e){if(e===!0||e===!1)return 1;if(Array.isArray(e)&&e.length!==0)switch(e[0]){case"has":return 2<=e.length&&e[1]!=="$id"&&e[1]!=="$type";case"in":return 3<=e.length&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var i=0,s=e.slice(1);i<s.length;i+=1){var p=s[i];if(!Tc(p)&&typeof p!="boolean")return}return 1;default:return 1}}Sc.prototype.evaluateWithoutErrorHandling=function(e,i,s,p,m,v){return this._styleExpression.evaluateWithoutErrorHandling(e,i,s,p,m,v)},Sc.prototype.evaluate=function(e,i,s,p,m,v){return this._styleExpression.evaluate(e,i,s,p,m,v)},Sc.prototype.interpolationFactor=function(e,i,s){return this.interpolationType?ci.interpolationFactor(this.interpolationType,e,i,s):0},$p.deserialize=function(e){return new $p(e._parameters,e._specification)};var vd={type:"boolean",default:!($p.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ec(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Tc(e)||(e=Jp(e));var i=Oi(e,vd);if(i.result==="error")throw new Error(i.value.map(function(s){return s.key+": "+s.message}).join(", "));return{filter:function(s,p,m){return i.value.evaluate(s,p,{},m)},needGeometry:function s(p){if(!Array.isArray(p))return!1;if(p[0]==="within")return!0;for(var m=1;m<p.length;m++)if(s(p[m]))return!0;return!1}(e)}}function sx(e,i){return e<i?-1:i<e?1:0}function Jp(e){if(!e)return!0;var i,s=e[0];return e.length<=1?s!=="any":s==="=="?su(e[1],e[2],"=="):s==="!="?yl(su(e[1],e[2],"==")):s==="<"||s===">"||s==="<="||s===">="?su(e[1],e[2],s):s==="any"?(i=e.slice(1),["any"].concat(i.map(Jp))):s==="all"?["all"].concat(e.slice(1).map(Jp)):s==="none"?["all"].concat(e.slice(1).map(Jp).map(yl)):s==="in"?Qp(e[1],e.slice(2)):s==="!in"?yl(Qp(e[1],e.slice(2))):s==="has"?eh(e[1]):s==="!has"?yl(eh(e[1])):s!=="within"||e}function su(e,i,s){switch(e){case"$type":return["filter-type-"+s,i];case"$id":return["filter-id-"+s,i];default:return["filter-"+s,e,i]}}function Qp(e,i){if(i.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return 200<i.length&&!i.some(function(s){return typeof s!=typeof i[0]})?["filter-in-large",e,["literal",i.sort(sx)]]:["filter-in-small",e,["literal",i]]}}function eh(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function yl(e){return["!",e]}function Wm(e){return Tc(Pt(e.value))?au(wt({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(s){var p=s.value,m=s.key;if(lr(p)!=="array")return[new Ae(m,p,"array expected, "+lr(p)+" found")];var v,w=s.styleSpec,S=[];if(p.length<1)return[new Ae(m,p,"filter array must have at least 1 element")];switch(S=S.concat(Xp({key:m+"[0]",value:p[0],valueSpec:w.filter_operator,style:s.style,styleSpec:s.styleSpec})),vt(p[0])){case"<":case"<=":case">":case">=":2<=p.length&&vt(p[1])==="$type"&&S.push(new Ae(m,p,'"$type" cannot be use with operator "'+p[0]+'"'));case"==":case"!=":p.length!==3&&S.push(new Ae(m,p,'filter array for operator "'+p[0]+'" must have 3 elements'));case"in":case"!in":2<=p.length&&(v=lr(p[1]))!=="string"&&S.push(new Ae(m+"[1]",p[1],"string expected, "+v+" found"));for(var M=2;M<p.length;M++)v=lr(p[M]),vt(p[1])==="$type"?S=S.concat(Xp({key:m+"["+M+"]",value:p[M],valueSpec:w.geometry_type,style:s.style,styleSpec:s.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&S.push(new Ae(m+"["+M+"]",p[M],"string, number, or boolean expected, "+v+" found"));break;case"any":case"all":case"none":for(var P=1;P<p.length;P++)S=S.concat(i({key:m+"["+P+"]",value:p[P],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":v=lr(p[1]),p.length!==2?S.push(new Ae(m,p,'filter array for "'+p[0]+'" operator must have 2 elements')):v!=="string"&&S.push(new Ae(m+"[1]",p[1],"string expected, "+v+" found"));break;case"within":v=lr(p[1]),p.length!==2?S.push(new Ae(m,p,'filter array for "'+p[0]+'" operator must have 2 elements')):v!=="object"&&S.push(new Ae(m+"[1]",p[1],"object expected, "+v+" found"))}return S}(e)}function c0(e,i){var s=e.key,p=e.style,m=e.styleSpec,v=e.value,w=e.objectKey,S=m[i+"_"+e.layerType];if(!S)return[];var M=w.match(/^(.*)-transition$/);if(i==="paint"&&M&&S[M[1]]&&S[M[1]].transition)return ka({key:s,value:v,valueSpec:m.transition,style:p,styleSpec:m});var P,D=e.valueSpec||S[w];if(!D)return[new Ae(s,v,'unknown property "'+w+'"')];if(lr(v)==="string"&&wc(D)&&!D.tokens&&(P=/^{([^}]+)}$/.exec(v)))return[new Ae(s,v,'"'+w+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(P[1])+" }`.")];var R=[];return e.layerType==="symbol"&&(w==="text-field"&&p&&!p.glyphs&&R.push(new Ae(s,v,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Gi(Pt(v))&&vt(v.type)==="identity"&&R.push(new Ae(s,v,'"text-font" does not support identity functions'))),R.concat(ka({key:e.key,value:v,valueSpec:D,style:p,styleSpec:m,expressionContext:"property",propertyType:i,propertyKey:w}))}function p0(e){return c0(e,"paint")}function lu(e){return c0(e,"layout")}function St(e){var i=[],s=e.value,p=e.key,m=e.style,v=e.styleSpec;s.type||s.ref||i.push(new Ae(p,s,'either "type" or "ref" is required'));var w,S=vt(s.type),M=vt(s.ref);if(s.id)for(var P=vt(s.id),D=0;D<e.arrayIndex;D++){var R=m.layers[D];vt(R.id)===P&&i.push(new Ae(p,s.id,'duplicate layer id "'+s.id+'", previously used at line '+R.id.__line__))}if("ref"in s)["type","source","source-layer","filter","layout"].forEach(function(Y){Y in s&&i.push(new Ae(p,s[Y],'"'+Y+'" is prohibited for ref layers'))}),m.layers.forEach(function(Y){vt(Y.id)===M&&(w=Y)}),w?w.ref?i.push(new Ae(p,s.ref,"ref cannot reference another ref layer")):S=vt(w.type):i.push(new Ae(p,s.ref,'ref layer "'+M+'" not found'));else if(S!=="background")if(s.source){var U=m.sources&&m.sources[s.source],F=U&&vt(U.type);U?F==="vector"&&S==="raster"?i.push(new Ae(p,s.source,'layer "'+s.id+'" requires a raster source')):F==="raster"&&S!=="raster"?i.push(new Ae(p,s.source,'layer "'+s.id+'" requires a vector source')):F!=="vector"||s["source-layer"]?F==="raster-dem"&&S!=="hillshade"?i.push(new Ae(p,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&U.lineMetrics||i.push(new Ae(p,s,'layer "'+s.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new Ae(p,s,'layer "'+s.id+'" must specify a "source-layer"')):i.push(new Ae(p,s.source,'source "'+s.source+'" not found'))}else i.push(new Ae(p,s,'missing required property "source"'));return i=i.concat(Ia({key:p,value:s,valueSpec:v.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ka({key:p+".type",value:s.type,valueSpec:v.layer.type,style:e.style,styleSpec:e.styleSpec,object:s,objectKey:"type"})},filter:Wm,layout:function(Y){return Ia({layer:s,key:Y.key,value:Y.value,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{"*":function($){return lu(wt({layerType:S},$))}}})},paint:function(Y){return Ia({layer:s,key:Y.key,value:Y.value,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{"*":function($){return p0(wt({layerType:S},$))}}})}}}))}function vl(e){var i=e.value,s=e.key,p=lr(i);return p!=="string"?[new Ae(s,i,"string expected, "+p+" found")]:[]}var _d={promoteId:function(e){var i=e.key,s=e.value;if(lr(s)==="string")return vl({key:i,value:s});var p=[];for(var m in s)p.push.apply(p,vl({key:i+"."+m,value:s[m]}));return p}};function h0(e){var i=e.value,s=e.key,p=e.styleSpec,m=e.style;if(!i.type)return[new Ae(s,i,'"type" is required')];var v,w=vt(i.type);switch(w){case"vector":case"raster":case"raster-dem":return Ia({key:s,value:i,valueSpec:p["source_"+w.replace("-","_")],style:e.style,styleSpec:p,objectElementValidators:_d});case"geojson":if(v=Ia({key:s,value:i,valueSpec:p.source_geojson,style:m,styleSpec:p,objectElementValidators:_d}),i.cluster)for(var S in i.clusterProperties){var M=i.clusterProperties[S],P=M[0],D=typeof P=="string"?[P,["accumulated"],["get",S]]:P;v.push.apply(v,au({key:s+"."+S+".map",value:M[1],expressionContext:"cluster-map"})),v.push.apply(v,au({key:s+"."+S+".reduce",value:D,expressionContext:"cluster-reduce"}))}return v;case"video":return Ia({key:s,value:i,valueSpec:p.source_video,style:m,styleSpec:p});case"image":return Ia({key:s,value:i,valueSpec:p.source_image,style:m,styleSpec:p});case"canvas":return[new Ae(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xp({key:s+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:p})}}function d0(e){var i=e.value,s=e.styleSpec,p=s.light,m=e.style,v=[],w=lr(i);if(i===void 0)return v;if(w!=="object")return v.concat([new Ae("light",i,"object expected, "+w+" found")]);for(var S in i){var M=S.match(/^(.*)-transition$/);v=v.concat(M&&p[M[1]]&&p[M[1]].transition?ka({key:S,value:i[S],valueSpec:s.transition,style:m,styleSpec:s}):p[S]?ka({key:S,value:i[S],valueSpec:p[S],style:m,styleSpec:s}):[new Ae(S,i[S],'unknown property "'+S+'"')])}return v}var f0={"*":function(){return[]},array:s0,boolean:function(e){var i=e.value,s=e.key,p=lr(i);return p!=="boolean"?[new Ae(s,i,"boolean expected, "+p+" found")]:[]},number:l0,color:function(e){var i=e.key,s=e.value,p=lr(s);return p!=="string"?[new Ae(i,s,"color expected, "+p+" found")]:Xy(s)===null?[new Ae(i,s,'color expected, "'+s+'" found')]:[]},constants:xt,enum:Xp,filter:Wm,function:u0,layer:St,object:Ia,source:h0,light:d0,string:vl,formatted:function(e){return vl(e).length===0?[]:au(e)},resolvedImage:function(e){return vl(e).length===0?[]:au(e)}};function ka(e){var i=e.value,s=e.valueSpec,p=e.styleSpec;return s.expression&&Gi(vt(i))?u0(e):s.expression&&Cc(Pt(i))?au(e):s.type&&f0[s.type]?f0[s.type](e):Ia(wt({},e,{valueSpec:s.type?p[s.type]:s}))}function lx(e){var i=e.value,s=e.key,p=vl(e);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new Ae(s,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new Ae(s,i,'"glyphs" url must include a "{range}" token'))),p}function uu(e,i){i===void 0&&(i=ce);var s=[];return s=s.concat(ka({key:"",value:e,valueSpec:i.$root,styleSpec:i,style:e,objectElementValidators:{glyphs:lx,"*":function(){return[]}}})),e.constants&&(s=s.concat(xt({key:"constants",value:e.constants,style:e,styleSpec:i}))),m0(s)}function m0(e){return[].concat(e).sort(function(i,s){return i.line-s.line})}function Ic(e){return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return m0(e.apply(this,i))}}uu.source=Ic(h0),uu.light=Ic(d0),uu.layer=Ic(St),uu.filter=Ic(Wm),uu.paintProperty=Ic(p0),uu.layoutProperty=Ic(lu);var th=uu,ux=th.light,cx=th.paintProperty,px=th.layoutProperty;function g0(e,i){var s=!1;if(i&&i.length)for(var p=0,m=i;p<m.length;p+=1)e.fire(new Ue(new Error(m[p].message))),s=!0;return s}var kc=Qa;function Qa(e,i,s){var p=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var m=new Int32Array(this.arrayBuffer);e=m[0],this.d=(i=m[1])+2*(s=m[2]);for(var v=0;v<this.d*this.d;v++){var w=m[3+v],S=m[3+v+1];p.push(w===S?null:m.subarray(w,S))}var M=m[3+p.length+1];this.keys=m.subarray(m[3+p.length],M),this.bboxes=m.subarray(M),this.insert=this._insertReadonly}else{this.d=i+2*s;for(var P=0;P<this.d*this.d;P++)p.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=e,this.padding=s,this.scale=i/e,this.uid=0;var D=s/i*e;this.min=-D,this.max=e+D}Qa.prototype.insert=function(e,i,s,p,m){this._forEachCell(i,s,p,m,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(i),this.bboxes.push(s),this.bboxes.push(p),this.bboxes.push(m)},Qa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Qa.prototype._insertCell=function(e,i,s,p,m,v){this.cells[m].push(v)},Qa.prototype.query=function(e,i,s,p,m){var v=this.min,w=this.max;if(e<=v&&i<=v&&w<=s&&w<=p&&!m)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(e,i,s,p,this._queryCell,S,{},m),S},Qa.prototype._queryCell=function(e,i,s,p,m,v,w,S){var M=this.cells[m];if(M!==null)for(var P=this.keys,D=this.bboxes,R=0;R<M.length;R++){var U=M[R];if(w[U]===void 0){var F=4*U;(S?S(D[0+F],D[1+F],D[2+F],D[3+F]):e<=D[2+F]&&i<=D[3+F]&&s>=D[0+F]&&p>=D[1+F])?(w[U]=!0,v.push(P[U])):w[U]=!1}}},Qa.prototype._forEachCell=function(e,i,s,p,m,v,w,S){for(var M=this._convertToCellCoord(e),P=this._convertToCellCoord(i),D=this._convertToCellCoord(s),R=this._convertToCellCoord(p),U=M;U<=D;U++)for(var F=P;F<=R;F++){var Y=this.d*F+U;if((!S||S(this._convertFromCellCoord(U),this._convertFromCellCoord(F),this._convertFromCellCoord(U+1),this._convertFromCellCoord(F+1)))&&m.call(this,e,i,s,p,Y,v,w,S))return}},Qa.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Qa.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Qa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,i=3+this.cells.length+1+1,s=0,p=0;p<this.cells.length;p++)s+=this.cells[p].length;var m=new Int32Array(i+s+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var v=i,w=0;w<e.length;w++){var S=e[w];m[3+w]=v,m.set(S,v),v+=S.length}return m[3+e.length]=v,m.set(this.keys,v),m[3+e.length+1]=v+=this.keys.length,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer};var y0=ne.ImageData,v0=ne.ImageBitmap,rh={};function yt(e,i,s){s===void 0&&(s={}),Object.defineProperty(i,"_classRegistryKey",{value:e,writeable:!1}),rh[e]={klass:i,omit:s.omit||[],shallow:s.shallow||[]}}for(var Ym in yt("Object",Object),kc.serialize=function(e,i){var s=e.toArrayBuffer();return i&&i.push(s),{buffer:s}},kc.deserialize=function(e){return new kc(e.buffer)},yt("Grid",kc),yt("Color",Sr),yt("Error",Error),yt("ResolvedImage",yo),yt("StylePropertyFunction",$p),yt("StyleExpression",bc,{omit:["_evaluator"]}),yt("ZoomDependentExpression",Sc),yt("ZoomConstantExpression",gl),yt("CompoundExpression",Un,{omit:["_evaluate"]}),fl)fl[Ym]._classRegistryKey||yt("Expression_"+Ym,fl[Ym]);function _0(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function x0(e){return v0&&e instanceof v0}function nh(e,i){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(_0(e)||x0(e))return i&&i.push(e),e;if(ArrayBuffer.isView(e)){var s=e;return i&&i.push(s.buffer),s}if(e instanceof y0)return i&&i.push(e.data.buffer),e;if(Array.isArray(e)){for(var p=[],m=0,v=e;m<v.length;m+=1)p.push(nh(v[m],i));return p}if(typeof e!="object")throw new Error("can't serialize object of type "+typeof e);var w=e.constructor,S=w._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var M=w.serialize?w.serialize(e,i):{};if(!w.serialize){for(var P in e)if(e.hasOwnProperty(P)&&!(0<=rh[S].omit.indexOf(P))){var D=e[P];M[P]=0<=rh[S].shallow.indexOf(P)?D:nh(D,i)}e instanceof Error&&(M.message=e.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(M.$name=S),M}function ih(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||_0(e)||x0(e)||ArrayBuffer.isView(e)||e instanceof y0)return e;if(Array.isArray(e))return e.map(ih);if(typeof e!="object")throw new Error("can't deserialize object of type "+typeof e);var i=e.$name||"Object",s=rh[i].klass;if(!s)throw new Error("can't deserialize unregistered class "+i);if(s.deserialize)return s.deserialize(e);for(var p=Object.create(s.prototype),m=0,v=Object.keys(e);m<v.length;m+=1){var w=v[m];if(w!=="$name"){var S=e[w];p[w]=0<=rh[i].shallow.indexOf(w)?S:ih(S)}}return p}function Km(){this.first=!0}Km.prototype.update=function(e,i){var s=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=i),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=s,!0))};var He={"Latin-1 Supplement":function(e){return 128<=e&&e<=255},Arabic:function(e){return 1536<=e&&e<=1791},"Arabic Supplement":function(e){return 1872<=e&&e<=1919},"Arabic Extended-A":function(e){return 2208<=e&&e<=2303},"Hangul Jamo":function(e){return 4352<=e&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return 5120<=e&&e<=5759},Khmer:function(e){return 6016<=e&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return 6320<=e&&e<=6399},"General Punctuation":function(e){return 8192<=e&&e<=8303},"Letterlike Symbols":function(e){return 8448<=e&&e<=8527},"Number Forms":function(e){return 8528<=e&&e<=8591},"Miscellaneous Technical":function(e){return 8960<=e&&e<=9215},"Control Pictures":function(e){return 9216<=e&&e<=9279},"Optical Character Recognition":function(e){return 9280<=e&&e<=9311},"Enclosed Alphanumerics":function(e){return 9312<=e&&e<=9471},"Geometric Shapes":function(e){return 9632<=e&&e<=9727},"Miscellaneous Symbols":function(e){return 9728<=e&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return 11008<=e&&e<=11263},"CJK Radicals Supplement":function(e){return 11904<=e&&e<=12031},"Kangxi Radicals":function(e){return 12032<=e&&e<=12255},"Ideographic Description Characters":function(e){return 12272<=e&&e<=12287},"CJK Symbols and Punctuation":function(e){return 12288<=e&&e<=12351},Hiragana:function(e){return 12352<=e&&e<=12447},Katakana:function(e){return 12448<=e&&e<=12543},Bopomofo:function(e){return 12544<=e&&e<=12591},"Hangul Compatibility Jamo":function(e){return 12592<=e&&e<=12687},Kanbun:function(e){return 12688<=e&&e<=12703},"Bopomofo Extended":function(e){return 12704<=e&&e<=12735},"CJK Strokes":function(e){return 12736<=e&&e<=12783},"Katakana Phonetic Extensions":function(e){return 12784<=e&&e<=12799},"Enclosed CJK Letters and Months":function(e){return 12800<=e&&e<=13055},"CJK Compatibility":function(e){return 13056<=e&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return 13312<=e&&e<=19903},"Yijing Hexagram Symbols":function(e){return 19904<=e&&e<=19967},"CJK Unified Ideographs":function(e){return 19968<=e&&e<=40959},"Yi Syllables":function(e){return 40960<=e&&e<=42127},"Yi Radicals":function(e){return 42128<=e&&e<=42191},"Hangul Jamo Extended-A":function(e){return 43360<=e&&e<=43391},"Hangul Syllables":function(e){return 44032<=e&&e<=55215},"Hangul Jamo Extended-B":function(e){return 55216<=e&&e<=55295},"Private Use Area":function(e){return 57344<=e&&e<=63743},"CJK Compatibility Ideographs":function(e){return 63744<=e&&e<=64255},"Arabic Presentation Forms-A":function(e){return 64336<=e&&e<=65023},"Vertical Forms":function(e){return 65040<=e&&e<=65055},"CJK Compatibility Forms":function(e){return 65072<=e&&e<=65103},"Small Form Variants":function(e){return 65104<=e&&e<=65135},"Arabic Presentation Forms-B":function(e){return 65136<=e&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return 65280<=e&&e<=65519}};function Mc(e){for(var i=0,s=e;i<s.length;i+=1)if($m(s[i].charCodeAt(0)))return!0;return!1}function $m(e){return e===746||e===747||!(e<4352)&&(He["Bopomofo Extended"](e)||He.Bopomofo(e)||He["CJK Compatibility Forms"](e)&&!(65097<=e&&e<=65103)||He["CJK Compatibility Ideographs"](e)||He["CJK Compatibility"](e)||He["CJK Radicals Supplement"](e)||He["CJK Strokes"](e)||!(!He["CJK Symbols and Punctuation"](e)||12296<=e&&e<=12305||12308<=e&&e<=12319||e===12336)||He["CJK Unified Ideographs Extension A"](e)||He["CJK Unified Ideographs"](e)||He["Enclosed CJK Letters and Months"](e)||He["Hangul Compatibility Jamo"](e)||He["Hangul Jamo Extended-A"](e)||He["Hangul Jamo Extended-B"](e)||He["Hangul Jamo"](e)||He["Hangul Syllables"](e)||He.Hiragana(e)||He["Ideographic Description Characters"](e)||He.Kanbun(e)||He["Kangxi Radicals"](e)||He["Katakana Phonetic Extensions"](e)||He.Katakana(e)&&e!==12540||!(!He["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||65306<=e&&e<=65310||e===65339||e===65341||e===65343||65371<=e&&e<=65503||e===65507||65512<=e&&e<=65519)||!(!He["Small Form Variants"](e)||65112<=e&&e<=65118||65123<=e&&e<=65126)||He["Unified Canadian Aboriginal Syllabics"](e)||He["Unified Canadian Aboriginal Syllabics Extended"](e)||He["Vertical Forms"](e)||He["Yijing Hexagram Symbols"](e)||He["Yi Syllables"](e)||He["Yi Radicals"](e))}function Xm(e){return!($m(e)||(i=e,He["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||He["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||He["Letterlike Symbols"](i)||He["Number Forms"](i)||He["Miscellaneous Technical"](i)&&(8960<=i&&i<=8967||8972<=i&&i<=8991||8996<=i&&i<=9e3||i===9003||9085<=i&&i<=9114||9150<=i&&i<=9165||i===9167||9169<=i&&i<=9179||9186<=i&&i<=9215)||He["Control Pictures"](i)&&i!==9251||He["Optical Character Recognition"](i)||He["Enclosed Alphanumerics"](i)||He["Geometric Shapes"](i)||He["Miscellaneous Symbols"](i)&&!(9754<=i&&i<=9759)||He["Miscellaneous Symbols and Arrows"](i)&&(11026<=i&&i<=11055||11088<=i&&i<=11097||11192<=i&&i<=11243)||He["CJK Symbols and Punctuation"](i)||He.Katakana(i)||He["Private Use Area"](i)||He["CJK Compatibility Forms"](i)||He["Small Form Variants"](i)||He["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||9984<=i&&i<=10087||10102<=i&&i<=10131||i===65532||i===65533));var i}function Jm(e){return 1424<=e&&e<=2303||He["Arabic Presentation Forms-A"](e)||He["Arabic Presentation Forms-B"](e)}function w0(e){for(var i=0,s=e;i<s.length;i+=1)if(Jm(s[i].charCodeAt(0)))return 1}function Qm(e){e&&typeof e=="string"&&-1<e.indexOf("NetworkError")&&(lo="error"),xd&&xd(e)}var xd=null,lo="unavailable",_l=null;function wd(){bd.fire(new ve("pluginStateChange",{pluginStatus:lo,pluginURL:_l}))}function oh(){return lo}function eg(){if(lo!=="deferred"||!_l)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");lo="loading",wd(),_l&&B({url:_l},function(e){e?Qm(e):(lo="loaded",wd())})}function Or(e,i){this.zoom=e,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Km,this.transition={})}var bd=new fe,No={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return lo==="loaded"||No.applyArabicShaping!=null},isLoading:function(){return lo==="loading"},setState:function(e){lo=e.pluginStatus,_l=e.pluginURL},isParsed:function(){return No.applyArabicShaping!=null&&No.processBidirectionalText!=null&&No.processStyledBidirectionalText!=null},getPluginURL:function(){return _l}};function cu(e,i){this.property=e,this.value=i,this.expression=function(s,p){if(Gi(s))return new $p(s,p);if(Cc(s)){var m=a0(s,p);if(m.result==="error")throw new Error(m.value.map(function(w){return w.key+": "+w.message}).join(", "));return m.value}var v=s;return typeof s=="string"&&p.type==="color"&&(v=Sr.parse(s)),{kind:"constant",evaluate:function(){return v}}}(i===void 0?e.specification.default:i,e.specification)}function Ac(e){this.property=e,this.value=new cu(e,void 0)}function sa(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}Or.prototype.isSupportedScript=function(e){return function(i,s){for(var p=0,m=i;p<m.length;p+=1)if(v=m[p].charCodeAt(0),!s&&Jm(v)||2304<=v&&v<=3583||3840<=v&&v<=4255||He.Khmer(v))return!1;var v;return!0}(e,No.isLoaded())},Or.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Or.prototype.getCrossfadeParameters=function(){var e=this.zoom,i=e-Math.floor(e),s=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*i}},cu.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},cu.prototype.possiblyEvaluate=function(e,i,s){return this.property.possiblyEvaluate(this,e,i,s)},Ac.prototype.transitioned=function(e,i){return new tg(this.property,this.value,i,nt({},e.transition,this.transition),e.now)},Ac.prototype.untransitioned=function(){return new tg(this.property,this.value,null,{},0)},sa.prototype.getValue=function(e){return Rn(this._values[e].value.value)},sa.prototype.setValue=function(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new Ac(this._values[e].property)),this._values[e].value=new cu(this._values[e].property,i===null?void 0:Rn(i))},sa.prototype.getTransition=function(e){return Rn(this._values[e].transition)},sa.prototype.setTransition=function(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new Ac(this._values[e].property)),this._values[e].transition=Rn(i)||void 0},sa.prototype.serialize=function(){for(var e={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var p=s[i],m=this.getValue(p);m!==void 0&&(e[p]=m);var v=this.getTransition(p);v!==void 0&&(e[p+"-transition"]=v)}return e},sa.prototype.transitioned=function(e,i){for(var s=new ah(this._properties),p=0,m=Object.keys(this._values);p<m.length;p+=1){var v=m[p];s._values[v]=this._values[v].transitioned(e,i._values[v])}return s},sa.prototype.untransitioned=function(){for(var e=new ah(this._properties),i=0,s=Object.keys(this._values);i<s.length;i+=1){var p=s[i];e._values[p]=this._values[p].untransitioned()}return e};var tg=function(e,i,s,p,m){this.property=e,this.value=i,this.begin=m+p.delay||0,this.end=this.begin+p.duration||0,e.specification.transition&&(p.delay||p.duration)&&(this.prior=s)};tg.prototype.possiblyEvaluate=function(e,i,s){var p=e.now||0,m=this.value.possiblyEvaluate(e,i,s),v=this.prior;if(v){if(p>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(p<this.begin)return v.possiblyEvaluate(e,i,s);var w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(e,i,s),m,function(){if(w<=0)return 0;if(1<=w)return 1;var S=w*w,M=S*w;return 4*(w<.5?M:3*(w-S)+M-.75)}())}return m};var ah=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};function sh(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}function Oo(e,i,s){this.property=e,this.value=i,this.parameters=s}ah.prototype.possiblyEvaluate=function(e,i,s){for(var p=new Lc(this._properties),m=0,v=Object.keys(this._values);m<v.length;m+=1){var w=v[m];p._values[w]=this._values[w].possiblyEvaluate(e,i,s)}return p},ah.prototype.hasTransition=function(){for(var e=0,i=Object.keys(this._values);e<i.length;e+=1)if(this._values[i[e]].prior)return!0;return!1},sh.prototype.getValue=function(e){return Rn(this._values[e].value)},sh.prototype.setValue=function(e,i){this._values[e]=new cu(this._values[e].property,i===null?void 0:Rn(i))},sh.prototype.serialize=function(){for(var e={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var p=s[i],m=this.getValue(p);m!==void 0&&(e[p]=m)}return e},sh.prototype.possiblyEvaluate=function(e,i,s){for(var p=new Lc(this._properties),m=0,v=Object.keys(this._values);m<v.length;m+=1){var w=v[m];p._values[w]=this._values[w].possiblyEvaluate(e,i,s)}return p},Oo.prototype.isConstant=function(){return this.value.kind==="constant"},Oo.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Oo.prototype.evaluate=function(e,i,s,p){return this.property.evaluate(this.value,this.parameters,e,i,s,p)};var Lc=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};function bt(e){this.specification=e}function Lt(e,i){this.specification=e,this.overrides=i}function xl(e){this.specification=e}Lc.prototype.get=function(e){return this._values[e]},bt.prototype.possiblyEvaluate=function(e,i){return e.expression.evaluate(i)},bt.prototype.interpolate=function(e,i,s){var p=hl[this.specification.type];return p?p(e,i,s):e},Lt.prototype.possiblyEvaluate=function(e,i,s,p){return new Oo(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(i,null,{},s,p)}:e.expression,i)},Lt.prototype.interpolate=function(e,i,s){if(e.value.kind!=="constant"||i.value.kind!=="constant")return e;if(e.value.value===void 0||i.value.value===void 0)return new Oo(this,{kind:"constant",value:void 0},e.parameters);var p=hl[this.specification.type];return p?new Oo(this,{kind:"constant",value:p(e.value.value,i.value.value,s)},e.parameters):e},Lt.prototype.evaluate=function(e,i,s,p,m,v){return e.kind==="constant"?e.value:e.evaluate(i,s,p,m,v)};var Cd,Sd=(pu.__proto__=Cd=Lt,((pu.prototype=Object.create(Cd&&Cd.prototype)).constructor=pu).prototype.possiblyEvaluate=function(e,i,s,p){if(e.value===void 0)return new Oo(this,{kind:"constant",value:void 0},i);if(e.expression.kind==="constant"){var m=e.expression.evaluate(i,null,{},s,p),v=e.property.specification.type==="resolvedImage"&&typeof m!="string"?m.name:m;return new Oo(this,{kind:"constant",value:this._calculate(v,v,v,i)},i)}return e.expression.kind!=="camera"?new Oo(this,e.expression,i):new Oo(this,{kind:"constant",value:this._calculate(e.expression.evaluate({zoom:i.zoom-1}),e.expression.evaluate({zoom:i.zoom}),e.expression.evaluate({zoom:i.zoom+1}),i)},i)},pu.prototype.evaluate=function(e,i,s,p,m,v){if(e.kind!=="source")return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(i.zoom)-1},s,p),e.evaluate({zoom:Math.floor(i.zoom)},s,p),e.evaluate({zoom:Math.floor(i.zoom)+1},s,p),i):e.value;var w=e.evaluate(i,s,p,m,v);return this._calculate(w,w,w,i)},pu.prototype._calculate=function(e,i,s,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:s,to:i}},pu.prototype.interpolate=function(e){return e},pu);function pu(){Cd.apply(this,arguments)}function lh(e){this.specification=e}function _o(e){for(var i in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var s=e[i];s.specification.overridable&&this.overridableProperties.push(i);var p=this.defaultPropertyValues[i]=new cu(s,void 0),m=this.defaultTransitionablePropertyValues[i]=new Ac(s);this.defaultTransitioningPropertyValues[i]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=p.possiblyEvaluate({})}}function Td(e,i){this._structArray=e,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function Rr(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}xl.prototype.possiblyEvaluate=function(e,i,s,p){if(e.value!==void 0){if(e.expression.kind!=="constant")return this._calculate(e.expression.evaluate(new Or(Math.floor(i.zoom-1),i)),e.expression.evaluate(new Or(Math.floor(i.zoom),i)),e.expression.evaluate(new Or(Math.floor(i.zoom+1),i)),i);var m=e.expression.evaluate(i,null,{},s,p);return this._calculate(m,m,m,i)}},xl.prototype._calculate=function(e,i,s,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:s,to:i}},xl.prototype.interpolate=function(e){return e},lh.prototype.possiblyEvaluate=function(e,i,s,p){return!!e.expression.evaluate(i,null,{},s,p)},lh.prototype.interpolate=function(){return!1},yt("DataDrivenProperty",Lt),yt("DataConstantProperty",bt),yt("CrossFadedDataDrivenProperty",Sd),yt("CrossFadedProperty",xl),yt("ColorRampProperty",lh);var Ed,Ma=(wn.__proto__=Ed=fe,((wn.prototype=Object.create(Ed&&Ed.prototype)).constructor=wn).prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},wn.prototype.getLayoutProperty=function(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)},wn.prototype.setLayoutProperty=function(e,i,s){s===void 0&&(s={}),i!=null&&this._validate(px,"layers."+this.id+".layout."+e,e,i,s)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,i):this.visibility=i)},wn.prototype.getPaintProperty=function(e){return qa(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)},wn.prototype.setPaintProperty=function(e,i,s){if(s===void 0&&(s={}),i!=null&&this._validate(cx,"layers."+this.id+".paint."+e,e,i,s))return!1;if(qa(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-11),i||void 0),!1;var p=this._transitionablePaint._values[e],m=p.property.specification["property-type"]==="cross-faded-data-driven",v=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(e,i),this._handleSpecialPaintPropertyUpdate(e);var S=this._transitionablePaint._values[e].value;return S.isDataDriven()||v||m||this._handleOverridablePaintPropertyUpdate(e,w,S)},wn.prototype._handleSpecialPaintPropertyUpdate=function(e){},wn.prototype._handleOverridablePaintPropertyUpdate=function(e,i,s){return!1},wn.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"},wn.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},wn.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},wn.prototype.recalculate=function(e,i){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,i)},wn.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),il(e,function(i,s){return!(i===void 0||s==="layout"&&!Object.keys(i).length||s==="paint"&&!Object.keys(i).length)})},wn.prototype._validate=function(e,i,s,p,m){return m===void 0&&(m={}),(!m||m.validate!==!1)&&g0(this,e.call(th,{key:i,layerType:this.type,objectKey:s,value:p,styleSpec:ce,style:{glyphs:!0,sprite:!0}}))},wn.prototype.is3D=function(){return!1},wn.prototype.isTileClipped=function(){return!1},wn.prototype.hasOffscreenPass=function(){return!1},wn.prototype.resize=function(){},wn.prototype.isStateDependent=function(){for(var e in this.paint._values){var i=this.paint.get(e);if(i instanceof Oo&&wc(i.property.specification)&&(i.value.kind==="source"||i.value.kind==="composite")&&i.value.isStateDependent)return!0}return!1},wn),b0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};function wn(e,i){if(Ed.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},e.type!=="custom"&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),i.layout&&(this._unevaluatedLayout=new sh(i.layout)),i.paint)){for(var s in this._transitionablePaint=new sa(i.paint),e.paint)this.setPaintProperty(s,e.paint[s],{validate:!1});for(var p in e.layout)this.setLayoutProperty(p,e.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Lc(i.paint)}}function Ei(e,i){i===void 0&&(i=1);var s=0,p=0;return{members:e.map(function(m){var v=b0[m.type].BYTES_PER_ELEMENT,w=s=Yr(s,Math.max(i,v)),S=m.components||1;return p=Math.max(p,v),s+=v*S,{name:m.name,type:m.type,components:S,offset:w}}),size:Yr(s,Math.max(p,i)),alignment:i}}function Yr(e,i){return Math.ceil(e/i)*i}Rr.serialize=function(e,i){return e._trim(),i&&(e.isTransferred=!0,i.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Rr.deserialize=function(e){var i=Object.create(this.prototype);return i.arrayBuffer=e.arrayBuffer,i.length=e.length,i.capacity=e.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},Rr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Rr.prototype.clear=function(){this.length=0},Rr.prototype.resize=function(e){this.reserve(e),this.length=e},Rr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},Rr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var uh,hu=(Aa.__proto__=uh=Rr,((Aa.prototype=Object.create(uh&&uh.prototype)).constructor=Aa).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Aa.prototype.emplaceBack=function(e,i){var s=this.length;return this.resize(s+1),this.emplace(s,e,i)},Aa.prototype.emplace=function(e,i,s){var p=2*e;return this.int16[0+p]=i,this.int16[1+p]=s,e},Aa);function Aa(){uh.apply(this,arguments)}hu.prototype.bytesPerElement=4,yt("StructArrayLayout2i4",hu);var es,_r=(fr.__proto__=es=Rr,((fr.prototype=Object.create(es&&es.prototype)).constructor=fr).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},fr.prototype.emplaceBack=function(e,i,s,p){var m=this.length;return this.resize(m+1),this.emplace(m,e,i,s,p)},fr.prototype.emplace=function(e,i,s,p,m){var v=4*e;return this.int16[0+v]=i,this.int16[1+v]=s,this.int16[2+v]=p,this.int16[3+v]=m,e},fr);function fr(){es.apply(this,arguments)}_r.prototype.bytesPerElement=8,yt("StructArrayLayout4i8",_r);var ts,du=(Ls.__proto__=ts=Rr,((Ls.prototype=Object.create(ts&&ts.prototype)).constructor=Ls).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Ls.prototype.emplaceBack=function(e,i,s,p,m,v){var w=this.length;return this.resize(w+1),this.emplace(w,e,i,s,p,m,v)},Ls.prototype.emplace=function(e,i,s,p,m,v,w){var S=6*e;return this.int16[0+S]=i,this.int16[1+S]=s,this.int16[2+S]=p,this.int16[3+S]=m,this.int16[4+S]=v,this.int16[5+S]=w,e},Ls);function Ls(){ts.apply(this,arguments)}du.prototype.bytesPerElement=12,yt("StructArrayLayout2i4i12",du);var Id,rg=(Pc.__proto__=Id=Rr,((Pc.prototype=Object.create(Id&&Id.prototype)).constructor=Pc).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Pc.prototype.emplaceBack=function(e,i,s,p,m,v){var w=this.length;return this.resize(w+1),this.emplace(w,e,i,s,p,m,v)},Pc.prototype.emplace=function(e,i,s,p,m,v,w){var S=4*e,M=8*e;return this.int16[0+S]=i,this.int16[1+S]=s,this.uint8[4+M]=p,this.uint8[5+M]=m,this.uint8[6+M]=v,this.uint8[7+M]=w,e},Pc);function Pc(){Id.apply(this,arguments)}rg.prototype.bytesPerElement=8,yt("StructArrayLayout2i4ub8",rg);var kd,La=(Ps.__proto__=kd=Rr,((Ps.prototype=Object.create(kd&&kd.prototype)).constructor=Ps).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Ps.prototype.emplaceBack=function(e,i,s,p,m,v,w,S,M,P){var D=this.length;return this.resize(D+1),this.emplace(D,e,i,s,p,m,v,w,S,M,P)},Ps.prototype.emplace=function(e,i,s,p,m,v,w,S,M,P,D){var R=10*e;return this.uint16[0+R]=i,this.uint16[1+R]=s,this.uint16[2+R]=p,this.uint16[3+R]=m,this.uint16[4+R]=v,this.uint16[5+R]=w,this.uint16[6+R]=S,this.uint16[7+R]=M,this.uint16[8+R]=P,this.uint16[9+R]=D,e},Ps);function Ps(){kd.apply(this,arguments)}La.prototype.bytesPerElement=20,yt("StructArrayLayout10ui20",La);var Vn,xo=(Ds.__proto__=Vn=Rr,((Ds.prototype=Object.create(Vn&&Vn.prototype)).constructor=Ds).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Ds.prototype.emplaceBack=function(e,i,s,p,m,v,w,S,M,P,D,R){var U=this.length;return this.resize(U+1),this.emplace(U,e,i,s,p,m,v,w,S,M,P,D,R)},Ds.prototype.emplace=function(e,i,s,p,m,v,w,S,M,P,D,R,U){var F=12*e;return this.int16[0+F]=i,this.int16[1+F]=s,this.int16[2+F]=p,this.int16[3+F]=m,this.uint16[4+F]=v,this.uint16[5+F]=w,this.uint16[6+F]=S,this.uint16[7+F]=M,this.int16[8+F]=P,this.int16[9+F]=D,this.int16[10+F]=R,this.int16[11+F]=U,e},Ds);function Ds(){Vn.apply(this,arguments)}xo.prototype.bytesPerElement=24,yt("StructArrayLayout4i4ui4i24",xo);var Md,la=(Hi.__proto__=Md=Rr,((Hi.prototype=Object.create(Md&&Md.prototype)).constructor=Hi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Hi.prototype.emplaceBack=function(e,i,s){var p=this.length;return this.resize(p+1),this.emplace(p,e,i,s)},Hi.prototype.emplace=function(e,i,s,p){var m=3*e;return this.float32[0+m]=i,this.float32[1+m]=s,this.float32[2+m]=p,e},Hi);function Hi(){Md.apply(this,arguments)}la.prototype.bytesPerElement=12,yt("StructArrayLayout3f12",la);var Dc,fu=(ua.__proto__=Dc=Rr,((ua.prototype=Object.create(Dc&&Dc.prototype)).constructor=ua).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},ua.prototype.emplaceBack=function(e){var i=this.length;return this.resize(i+1),this.emplace(i,e)},ua.prototype.emplace=function(e,i){return this.uint32[+e+0]=i,e},ua);function ua(){Dc.apply(this,arguments)}fu.prototype.bytesPerElement=4,yt("StructArrayLayout1ul4",fu);var Ro,uo=(zc.__proto__=Ro=Rr,((zc.prototype=Object.create(Ro&&Ro.prototype)).constructor=zc).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},zc.prototype.emplaceBack=function(e,i,s,p,m,v,w,S,M){var P=this.length;return this.resize(P+1),this.emplace(P,e,i,s,p,m,v,w,S,M)},zc.prototype.emplace=function(e,i,s,p,m,v,w,S,M,P){var D=10*e,R=5*e;return this.int16[0+D]=i,this.int16[1+D]=s,this.int16[2+D]=p,this.int16[3+D]=m,this.int16[4+D]=v,this.int16[5+D]=w,this.uint32[3+R]=S,this.uint16[8+D]=M,this.uint16[9+D]=P,e},zc);function zc(){Ro.apply(this,arguments)}uo.prototype.bytesPerElement=20,yt("StructArrayLayout6i1ul2ui20",uo);var wo,mu=(zs.__proto__=wo=Rr,((zs.prototype=Object.create(wo&&wo.prototype)).constructor=zs).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},zs.prototype.emplaceBack=function(e,i,s,p,m,v){var w=this.length;return this.resize(w+1),this.emplace(w,e,i,s,p,m,v)},zs.prototype.emplace=function(e,i,s,p,m,v,w){var S=6*e;return this.int16[0+S]=i,this.int16[1+S]=s,this.int16[2+S]=p,this.int16[3+S]=m,this.int16[4+S]=v,this.int16[5+S]=w,e},zs);function zs(){wo.apply(this,arguments)}mu.prototype.bytesPerElement=12,yt("StructArrayLayout2i2i2i12",mu);var wl,ng=(gu.__proto__=wl=Rr,((gu.prototype=Object.create(wl&&wl.prototype)).constructor=gu).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},gu.prototype.emplaceBack=function(e,i,s,p,m){var v=this.length;return this.resize(v+1),this.emplace(v,e,i,s,p,m)},gu.prototype.emplace=function(e,i,s,p,m,v){var w=4*e,S=8*e;return this.float32[0+w]=i,this.float32[1+w]=s,this.float32[2+w]=p,this.int16[6+S]=m,this.int16[7+S]=v,e},gu);function gu(){wl.apply(this,arguments)}ng.prototype.bytesPerElement=16,yt("StructArrayLayout2f1f2i16",ng);var ch,bl=(Pa.__proto__=ch=Rr,((Pa.prototype=Object.create(ch&&ch.prototype)).constructor=Pa).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Pa.prototype.emplaceBack=function(e,i,s,p){var m=this.length;return this.resize(m+1),this.emplace(m,e,i,s,p)},Pa.prototype.emplace=function(e,i,s,p,m){var v=12*e,w=3*e;return this.uint8[0+v]=i,this.uint8[1+v]=s,this.float32[1+w]=p,this.float32[2+w]=m,e},Pa);function Pa(){ch.apply(this,arguments)}bl.prototype.bytesPerElement=12,yt("StructArrayLayout2ub2f12",bl);var Ns,qn=(Os.__proto__=Ns=Rr,((Os.prototype=Object.create(Ns&&Ns.prototype)).constructor=Os).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Os.prototype.emplaceBack=function(e,i,s){var p=this.length;return this.resize(p+1),this.emplace(p,e,i,s)},Os.prototype.emplace=function(e,i,s,p){var m=3*e;return this.uint16[0+m]=i,this.uint16[1+m]=s,this.uint16[2+m]=p,e},Os);function Os(){Ns.apply(this,arguments)}qn.prototype.bytesPerElement=6,yt("StructArrayLayout3ui6",qn);var ph,yu=(Nc.__proto__=ph=Rr,((Nc.prototype=Object.create(ph&&ph.prototype)).constructor=Nc).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Nc.prototype.emplaceBack=function(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie){var te=this.length;return this.resize(te+1),this.emplace(te,e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie)},Nc.prototype.emplace=function(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie,te){var xe=24*e,be=12*e,Te=48*e;return this.int16[0+xe]=i,this.int16[1+xe]=s,this.uint16[2+xe]=p,this.uint16[3+xe]=m,this.uint32[2+be]=v,this.uint32[3+be]=w,this.uint32[4+be]=S,this.uint16[10+xe]=M,this.uint16[11+xe]=P,this.uint16[12+xe]=D,this.float32[7+be]=R,this.float32[8+be]=U,this.uint8[36+Te]=F,this.uint8[37+Te]=Y,this.uint8[38+Te]=$,this.uint32[10+be]=ie,this.int16[22+xe]=te,e},Nc);function Nc(){ph.apply(this,arguments)}yu.prototype.bytesPerElement=48,yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",yu);var Rs,Ad=(rs.__proto__=Rs=Rr,((rs.prototype=Object.create(Rs&&Rs.prototype)).constructor=rs).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},rs.prototype.emplaceBack=function(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie,te,xe,be,Te,Me,Fe,Ye,it,ft,tt,gt){var at=this.length;return this.resize(at+1),this.emplace(at,e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie,te,xe,be,Te,Me,Fe,Ye,it,ft,tt,gt)},rs.prototype.emplace=function(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie,te,xe,be,Te,Me,Fe,Ye,it,ft,tt,gt,at){var It=34*e,Nt=17*e;return this.int16[0+It]=i,this.int16[1+It]=s,this.int16[2+It]=p,this.int16[3+It]=m,this.int16[4+It]=v,this.int16[5+It]=w,this.int16[6+It]=S,this.int16[7+It]=M,this.uint16[8+It]=P,this.uint16[9+It]=D,this.uint16[10+It]=R,this.uint16[11+It]=U,this.uint16[12+It]=F,this.uint16[13+It]=Y,this.uint16[14+It]=$,this.uint16[15+It]=ie,this.uint16[16+It]=te,this.uint16[17+It]=xe,this.uint16[18+It]=be,this.uint16[19+It]=Te,this.uint16[20+It]=Me,this.uint16[21+It]=Fe,this.uint16[22+It]=Ye,this.uint32[12+Nt]=it,this.float32[13+Nt]=ft,this.float32[14+Nt]=tt,this.float32[15+Nt]=gt,this.float32[16+Nt]=at,e},rs);function rs(){Rs.apply(this,arguments)}Ad.prototype.bytesPerElement=68,yt("StructArrayLayout8i15ui1ul4f68",Ad);var Ld,ns=(Cl.__proto__=Ld=Rr,((Cl.prototype=Object.create(Ld&&Ld.prototype)).constructor=Cl).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Cl.prototype.emplaceBack=function(e){var i=this.length;return this.resize(i+1),this.emplace(i,e)},Cl.prototype.emplace=function(e,i){return this.float32[+e+0]=i,e},Cl);function Cl(){Ld.apply(this,arguments)}ns.prototype.bytesPerElement=4,yt("StructArrayLayout1f4",ns);var is,vu=(Oc.__proto__=is=Rr,((Oc.prototype=Object.create(is&&is.prototype)).constructor=Oc).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Oc.prototype.emplaceBack=function(e,i,s){var p=this.length;return this.resize(p+1),this.emplace(p,e,i,s)},Oc.prototype.emplace=function(e,i,s,p){var m=3*e;return this.int16[0+m]=i,this.int16[1+m]=s,this.int16[2+m]=p,e},Oc);function Oc(){is.apply(this,arguments)}vu.prototype.bytesPerElement=6,yt("StructArrayLayout3i6",vu);var Pd,Bs=(Rc.__proto__=Pd=Rr,((Rc.prototype=Object.create(Pd&&Pd.prototype)).constructor=Rc).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Rc.prototype.emplaceBack=function(e,i,s){var p=this.length;return this.resize(p+1),this.emplace(p,e,i,s)},Rc.prototype.emplace=function(e,i,s,p){var m=4*e;return this.uint32[2*e+0]=i,this.uint16[2+m]=s,this.uint16[3+m]=p,e},Rc);function Rc(){Pd.apply(this,arguments)}Bs.prototype.bytesPerElement=8,yt("StructArrayLayout1ul2ui8",Bs);var Ii,Fs=(ca.__proto__=Ii=Rr,((ca.prototype=Object.create(Ii&&Ii.prototype)).constructor=ca).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},ca.prototype.emplaceBack=function(e,i){var s=this.length;return this.resize(s+1),this.emplace(s,e,i)},ca.prototype.emplace=function(e,i,s){var p=2*e;return this.uint16[0+p]=i,this.uint16[1+p]=s,e},ca);function ca(){Ii.apply(this,arguments)}Fs.prototype.bytesPerElement=4,yt("StructArrayLayout2ui4",Fs);var Bo,_u=(os.__proto__=Bo=Rr,((os.prototype=Object.create(Bo&&Bo.prototype)).constructor=os).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},os.prototype.emplaceBack=function(e){var i=this.length;return this.resize(i+1),this.emplace(i,e)},os.prototype.emplace=function(e,i){return this.uint16[+e+0]=i,e},os);function os(){Bo.apply(this,arguments)}_u.prototype.bytesPerElement=2,yt("StructArrayLayout1ui2",_u);var as,xu=(ss.__proto__=as=Rr,((ss.prototype=Object.create(as&&as.prototype)).constructor=ss).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},ss.prototype.emplaceBack=function(e,i){var s=this.length;return this.resize(s+1),this.emplace(s,e,i)},ss.prototype.emplace=function(e,i,s){var p=2*e;return this.float32[0+p]=i,this.float32[1+p]=s,e},ss);function ss(){as.apply(this,arguments)}xu.prototype.bytesPerElement=8,yt("StructArrayLayout2f8",xu);var Dd,hh=(Sl.__proto__=Dd=Rr,((Sl.prototype=Object.create(Dd&&Dd.prototype)).constructor=Sl).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Sl.prototype.emplaceBack=function(e,i,s,p){var m=this.length;return this.resize(m+1),this.emplace(m,e,i,s,p)},Sl.prototype.emplace=function(e,i,s,p,m){var v=4*e;return this.float32[0+v]=i,this.float32[1+v]=s,this.float32[2+v]=p,this.float32[3+v]=m,e},Sl);function Sl(){Dd.apply(this,arguments)}hh.prototype.bytesPerElement=16,yt("StructArrayLayout4f16",hh);var Zn=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var s={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return s.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},s.x1.get=function(){return this._structArray.int16[this._pos2+2]},s.y1.get=function(){return this._structArray.int16[this._pos2+3]},s.x2.get=function(){return this._structArray.int16[this._pos2+4]},s.y2.get=function(){return this._structArray.int16[this._pos2+5]},s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.anchorPoint.get=function(){return new W(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,s),i}(Td);Zn.prototype.size=20;var Fo,wu=((Fo=uo)&&(zd.__proto__=Fo),((zd.prototype=Object.create(Fo&&Fo.prototype)).constructor=zd).prototype.get=function(e){return new Zn(this,e)},zd);function zd(){Fo.apply(this,arguments)}yt("CollisionBoxArray",wu);var Jt=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},s.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},s.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},s.segment.get=function(){return this._structArray.uint16[this._pos2+10]},s.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},s.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},s.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},s.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},s.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},s.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},s.placedOrientation.set=function(p){this._structArray.uint8[this._pos1+37]=p},s.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},s.hidden.set=function(p){this._structArray.uint8[this._pos1+38]=p},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},s.crossTileID.set=function(p){this._structArray.uint32[this._pos4+10]=p},s.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,s),i}(Td);Jt.prototype.size=48;var Da,Bc=((Da=yu)&&(Nd.__proto__=Da),((Nd.prototype=Object.create(Da&&Da.prototype)).constructor=Nd).prototype.get=function(e){return new Jt(this,e)},Nd);function Nd(){Da.apply(this,arguments)}yt("PlacedSymbolArray",Bc);var Od=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},s.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},s.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},s.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},s.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},s.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},s.key.get=function(){return this._structArray.uint16[this._pos2+8]},s.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},s.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},s.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},s.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},s.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},s.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},s.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},s.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},s.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},s.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},s.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},s.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},s.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},s.crossTileID.set=function(p){this._structArray.uint32[this._pos4+12]=p},s.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},s.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},s.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},s.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,s),i}(Td);Od.prototype.size=68;var dh,bu=((dh=Ad)&&(Rd.__proto__=dh),((Rd.prototype=Object.create(dh&&dh.prototype)).constructor=Rd).prototype.get=function(e){return new Od(this,e)},Rd);function Rd(){dh.apply(this,arguments)}yt("SymbolInstanceArray",bu);var fh,Bd=((fh=ns)&&(ls.__proto__=fh),((ls.prototype=Object.create(fh&&fh.prototype)).constructor=ls).prototype.getoffsetX=function(e){return this.float32[+e+0]},ls);function ls(){fh.apply(this,arguments)}yt("GlyphOffsetArray",Bd);var mh,jo=((mh=vu)&&(Cu.__proto__=mh),((Cu.prototype=Object.create(mh&&mh.prototype)).constructor=Cu).prototype.getx=function(e){return this.int16[3*e+0]},Cu.prototype.gety=function(e){return this.int16[3*e+1]},Cu.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},Cu);function Cu(){mh.apply(this,arguments)}yt("SymbolLineVertexArray",jo);var Fd=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var s={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,s),i}(Td);Fd.prototype.size=8;var Fc,Su=((Fc=Bs)&&(Tu.__proto__=Fc),((Tu.prototype=Object.create(Fc&&Fc.prototype)).constructor=Tu).prototype.get=function(e){return new Fd(this,e)},Tu);function Tu(){Fc.apply(this,arguments)}function bn(e){e===void 0&&(e=[]),this.segments=e}yt("FeatureIndexArray",Su);var gh=Ei([{name:"a_pos",components:2,type:"Int16"}],4).members;function jd(e,i){return 256*(e=pt(Math.floor(e),0,255))+pt(Math.floor(i),0,255)}bn.prototype.prepareSegment=function(e,i,s,p){var m=this.segments[this.segments.length-1];return bn.MAX_VERTEX_ARRAY_LENGTH<e&&nn("Max vertices per segment is "+bn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!m||m.vertexLength+e>bn.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==p)&&(m={vertexOffset:i.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},p!==void 0&&(m.sortKey=p),this.segments.push(m)),m},bn.prototype.get=function(){return this.segments},bn.prototype.destroy=function(){for(var e=0,i=this.segments;e<i.length;e+=1){var s=i[e];for(var p in s.vaos)s.vaos[p].destroy()}},bn.simpleSegment=function(e,i,s,p){return new bn([{vertexOffset:e,primitiveOffset:i,vertexLength:s,primitiveLength:p,vaos:{},sortKey:0}])},bn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yt("SegmentVector",bn);var Ud=Ei([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Vd=A(function(e){e.exports=function(i,s){var p,m,v,w,S,M,P,D;for(m=i.length-(p=3&i.length),v=s,S=3432918353,M=461845907,D=0;D<m;)P=255&i.charCodeAt(D)|(255&i.charCodeAt(++D))<<8|(255&i.charCodeAt(++D))<<16|(255&i.charCodeAt(++D))<<24,++D,v=27492+(65535&(w=5*(65535&(v=(v^=P=(65535&(P=(P=(65535&P)*S+(((P>>>16)*S&65535)<<16)&4294967295)<<15|P>>>17))*M+(((P>>>16)*M&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(P=0,p){case 3:P^=(255&i.charCodeAt(D+2))<<16;case 2:P^=(255&i.charCodeAt(D+1))<<8;case 1:v^=P=(65535&(P=(P=(65535&(P^=255&i.charCodeAt(D)))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<15|P>>>17))*M+(((P>>>16)*M&65535)<<16)&4294967295}return v^=i.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}}),qd=A(function(e){e.exports=function(i,s){for(var p,m=i.length,v=s^m,w=0;4<=m;)p=1540483477*(65535&(p=255&i.charCodeAt(w)|(255&i.charCodeAt(++w))<<8|(255&i.charCodeAt(++w))<<16|(255&i.charCodeAt(++w))<<24))+((1540483477*(p>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),m-=4,++w;switch(m){case 3:v^=(255&i.charCodeAt(w+2))<<16;case 2:v^=(255&i.charCodeAt(w+1))<<8;case 1:v=1540483477*(65535&(v^=255&i.charCodeAt(w)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}}),yh=Vd,hx=qd;function Pn(){this.ids=[],this.positions=[],this.indexed=!1}yh.murmur3=Vd,yh.murmur2=hx,Pn.prototype.add=function(e,i,s,p){this.ids.push(ig(e)),this.positions.push(i,s,p)},Pn.prototype.getPositions=function(e){for(var i=ig(e),s=0,p=this.ids.length-1;s<p;){var m=s+p>>1;this.ids[m]>=i?p=m:s=1+m}for(var v=[];this.ids[s]===i;)v.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return v},Pn.serialize=function(e,i){var s=new Float64Array(e.ids),p=new Uint32Array(e.positions);return function m(v,w,S,M){for(;S<M;){for(var P=v[S+M>>1],D=S-1,R=M+1;;){for(;v[++D]<P;);for(;v[--R]>P;);if(R<=D)break;Tl(v,D,R),Tl(w,3*D,3*R),Tl(w,3*D+1,3*R+1),Tl(w,3*D+2,3*R+2)}R-S<M-R?(m(v,w,S,R),S=R+1):(m(v,w,R+1,M),M=R)}}(s,p,0,s.length-1),i&&i.push(s.buffer,p.buffer),{ids:s,positions:p}},Pn.deserialize=function(e){var i=new Pn;return i.ids=e.ids,i.positions=e.positions,i.indexed=!0,i};var Kr=Math.pow(2,53)-1;function ig(e){var i=+e;return!isNaN(i)&&i<=Kr?i:yh(String(e))}function Tl(e,i,s){var p=e[i];e[i]=e[s],e[s]=p}function Wi(e,i){this.gl=e.gl,this.location=i}yt("FeaturePositionMap",Pn);var El,Zd,Gd,vh,$r,r,l,f=(ue.__proto__=l=Wi,((ue.prototype=Object.create(l&&l.prototype)).constructor=ue).prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},ue),g=(re.__proto__=r=Wi,((re.prototype=Object.create(r&&r.prototype)).constructor=re).prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},re),x=(ee.__proto__=$r=Wi,((ee.prototype=Object.create($r&&$r.prototype)).constructor=ee).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},ee),T=(Q.__proto__=vh=Wi,((Q.prototype=Object.create(vh&&vh.prototype)).constructor=Q).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},Q),E=(K.__proto__=Gd=Wi,((K.prototype=Object.create(Gd&&Gd.prototype)).constructor=K).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},K),L=(H.__proto__=Zd=Wi,((H.prototype=Object.create(Zd&&Zd.prototype)).constructor=H).prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},H),O=new Float32Array(16),j=(V.__proto__=El=Wi,((V.prototype=Object.create(El&&El.prototype)).constructor=V).prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var i=1;i<16;i++)if(e[i]!==this.current[i]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},V);function V(e,i){El.call(this,e,i),this.current=O}function H(e,i){Zd.call(this,e,i),this.current=Sr.transparent}function K(e,i){Gd.call(this,e,i),this.current=[0,0,0,0]}function Q(e,i){vh.call(this,e,i),this.current=[0,0,0]}function ee(e,i){$r.call(this,e,i),this.current=[0,0]}function re(e,i){r.call(this,e,i),this.current=0}function ue(e,i){l.call(this,e,i),this.current=0}function ae(e){return[jd(255*e.r,255*e.g),jd(255*e.b,255*e.a)]}function ye(e,i,s){this.value=e,this.uniformNames=i.map(function(p){return"u_"+p}),this.type=s}function he(e,i){this.uniformNames=i.map(function(s){return"u_"+s}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}function me(e,i,s,p){this.expression=e,this.type=s,this.maxValue=0,this.paintVertexAttributes=i.map(function(m){return{name:"a_"+m,type:"Float32",components:s==="color"?2:1,offset:0}}),this.paintVertexArray=new p}function Ce(e,i,s,p,m,v){this.expression=e,this.uniformNames=i.map(function(w){return"u_"+w+"_t"}),this.type=s,this.useIntegerZoom=p,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=i.map(function(w){return{name:"a_"+w,type:"Float32",components:s==="color"?4:2,offset:0}}),this.paintVertexArray=new v}function ke(e,i,s,p,m,v){this.expression=e,this.type=i,this.useIntegerZoom=s,this.zoom=p,this.layerId=v,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m}function De(e,i,s){this.binders={},this._buffers=[];var p,m,v=[];for(var w in e.paint._values)if(s(w)){var S=e.paint.get(w);if(S instanceof Oo&&wc(S.property.specification)){var M=(p=w,m=e.type,{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[p]||[p.replace(m+"-","").replace(/-/g,"_")]),P=S.value,D=S.property.specification.type,R=S.property.useIntegerZoom,U=S.property.specification["property-type"],F=U==="cross-faded"||U==="cross-faded-data-driven";if(P.kind==="constant")this.binders[w]=F?new he(P.value,M):new ye(P.value,M,D),v.push("/u_"+w);else if(P.kind==="source"||F){var Y=qe(w,D,"source");this.binders[w]=F?new ke(P,D,R,i,Y,e.id):new me(P,M,D,Y),v.push("/a_"+w)}else{var $=qe(w,D,"composite");this.binders[w]=new Ce(P,M,D,R,i,$),v.push("/z_"+w)}}}this.cacheKey=v.sort().join("")}function Ve(e,i,s){s===void 0&&(s=function(){return!0}),this.programConfigurations={};for(var p=0,m=e;p<m.length;p+=1){var v=m[p];this.programConfigurations[v.id]=new De(v,i,s)}this.needsUpload=!1,this._featureMap=new Pn,this._bufferOffset=0}function qe(e,i,s){var p={color:{source:xu,composite:hh},number:{source:ns,composite:xu}},m={"line-pattern":{source:La,composite:La},"fill-pattern":{source:La,composite:La},"fill-extrusion-pattern":{source:La,composite:La}}[e];return m&&m[s]||p[i][s]}ye.prototype.setUniform=function(e,i,s){e.set(s.constantOr(this.value))},ye.prototype.getBinding=function(e,i,s){return new(this.type==="color"?L:g)(e,i)},he.prototype.setConstantPatternPositions=function(e,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=e.tlbr},he.prototype.setUniform=function(e,i,s,p){var m=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;m&&e.set(m)},he.prototype.getBinding=function(e,i,s){return new(s.substr(0,9)==="u_pattern"?E:g)(e,i)},me.prototype.populatePaintArray=function(e,i,s,p,m){var v=this.paintVertexArray.length,w=this.expression.evaluate(new Or(0),i,{},p,[],m);this.paintVertexArray.resize(e),this._setPaintValue(v,e,w)},me.prototype.updatePaintArray=function(e,i,s,p){var m=this.expression.evaluate({zoom:0},s,p);this._setPaintValue(e,i,m)},me.prototype._setPaintValue=function(e,i,s){if(this.type==="color")for(var p=ae(s),m=e;m<i;m++)this.paintVertexArray.emplace(m,p[0],p[1]);else{for(var v=e;v<i;v++)this.paintVertexArray.emplace(v,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},me.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},me.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ce.prototype.populatePaintArray=function(e,i,s,p,m){var v=this.expression.evaluate(new Or(this.zoom),i,{},p,[],m),w=this.expression.evaluate(new Or(this.zoom+1),i,{},p,[],m),S=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(S,e,v,w)},Ce.prototype.updatePaintArray=function(e,i,s,p){var m=this.expression.evaluate({zoom:this.zoom},s,p),v=this.expression.evaluate({zoom:this.zoom+1},s,p);this._setPaintValue(e,i,m,v)},Ce.prototype._setPaintValue=function(e,i,s,p){if(this.type==="color")for(var m=ae(s),v=ae(p),w=e;w<i;w++)this.paintVertexArray.emplace(w,m[0],m[1],v[0],v[1]);else{for(var S=e;S<i;S++)this.paintVertexArray.emplace(S,s,p);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(p))}},Ce.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ce.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ce.prototype.setUniform=function(e,i){var s=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,p=pt(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);e.set(p)},Ce.prototype.getBinding=function(e,i,s){return new g(e,i)},ke.prototype.populatePaintArray=function(e,i,s){var p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(p,e,i.patterns&&i.patterns[this.layerId],s)},ke.prototype.updatePaintArray=function(e,i,s,p,m){this._setPaintValues(e,i,s.patterns&&s.patterns[this.layerId],m)},ke.prototype._setPaintValues=function(e,i,s,p){if(p&&s){var m=p[s.min],v=p[s.mid],w=p[s.max];if(m&&v&&w)for(var S=e;S<i;S++)this.zoomInPaintVertexArray.emplace(S,v.tl[0],v.tl[1],v.br[0],v.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1],v.pixelRatio,m.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,v.tl[0],v.tl[1],v.br[0],v.br[1],w.tl[0],w.tl[1],w.br[0],w.br[1],v.pixelRatio,w.pixelRatio)}},ke.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Ud.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Ud.members,this.expression.isStateDependent))},ke.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},De.prototype.getMaxValue=function(e){var i=this.binders[e];return i instanceof me||i instanceof Ce?i.maxValue:0},De.prototype.populatePaintArrays=function(e,i,s,p,m){for(var v in this.binders){var w=this.binders[v];(w instanceof me||w instanceof Ce||w instanceof ke)&&w.populatePaintArray(e,i,s,p,m)}},De.prototype.setConstantPatternPositions=function(e,i){for(var s in this.binders){var p=this.binders[s];p instanceof he&&p.setConstantPatternPositions(e,i)}},De.prototype.updatePaintArrays=function(e,i,s,p,m){var v=!1;for(var w in e)for(var S=0,M=i.getPositions(w);S<M.length;S+=1){var P=M[S],D=s.feature(P.index);for(var R in this.binders){var U=this.binders[R];if((U instanceof me||U instanceof Ce||U instanceof ke)&&U.expression.isStateDependent===!0){var F=p.paint.get(R);U.expression=F.value,U.updatePaintArray(P.start,P.end,D,e[w],m),v=!0}}}return v},De.prototype.defines=function(){var e=[];for(var i in this.binders){var s=this.binders[i];(s instanceof ye||s instanceof he)&&e.push.apply(e,s.uniformNames.map(function(p){return"#define HAS_UNIFORM_"+p}))}return e},De.prototype.getBinderAttributes=function(){var e=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof me||s instanceof Ce)for(var p=0;p<s.paintVertexAttributes.length;p++)e.push(s.paintVertexAttributes[p].name);else if(s instanceof ke)for(var m=0;m<Ud.members.length;m++)e.push(Ud.members[m].name)}return e},De.prototype.getBinderUniforms=function(){var e=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof ye||s instanceof he||s instanceof Ce)for(var p=0,m=s.uniformNames;p<m.length;p+=1)e.push(m[p])}return e},De.prototype.getPaintVertexBuffers=function(){return this._buffers},De.prototype.getUniforms=function(e,i){var s=[];for(var p in this.binders){var m=this.binders[p];if(m instanceof ye||m instanceof he||m instanceof Ce)for(var v=0,w=m.uniformNames;v<w.length;v+=1){var S=w[v];if(i[S]){var M=m.getBinding(e,i[S],S);s.push({name:S,property:p,binding:M})}}}return s},De.prototype.setUniforms=function(e,i,s,p){for(var m=0,v=i;m<v.length;m+=1){var w=v[m],S=w.name,M=w.property;this.binders[M].setUniform(w.binding,p,s.get(M),S)}},De.prototype.updatePaintBuffers=function(e){for(var i in this._buffers=[],this.binders){var s=this.binders[i];if(e&&s instanceof ke){var p=e.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(s instanceof me||s instanceof Ce)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},De.prototype.upload=function(e){for(var i in this.binders){var s=this.binders[i];(s instanceof me||s instanceof Ce||s instanceof ke)&&s.upload(e)}this.updatePaintBuffers()},De.prototype.destroy=function(){for(var e in this.binders){var i=this.binders[e];(i instanceof me||i instanceof Ce||i instanceof ke)&&i.destroy()}},Ve.prototype.populatePaintArrays=function(e,i,s,p,m,v){for(var w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(e,i,p,m,v);i.id!==void 0&&this._featureMap.add(i.id,s,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Ve.prototype.updatePaintArrays=function(e,i,s,p){for(var m=0,v=s;m<v.length;m+=1){var w=v[m];this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(e,this._featureMap,i,w,p)||this.needsUpload}},Ve.prototype.get=function(e){return this.programConfigurations[e]},Ve.prototype.upload=function(e){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(e);this.needsUpload=!1}},Ve.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},yt("ConstantBinder",ye),yt("CrossFadedConstantBinder",he),yt("SourceExpressionBinder",me),yt("CrossFadedCompositeBinder",ke),yt("CompositeExpressionBinder",Ce),yt("ProgramConfiguration",De,{omit:["_buffers"]}),yt("ProgramConfigurationSet",Ve);var Ke=Math.pow(2,14)-1,lt=-Ke-1;function ht(e){for(var i=8192/e.extent,s=e.loadGeometry(),p=0;p<s.length;p++)for(var m=s[p],v=0;v<m.length;v++){var w=m[v],S=Math.round(w.x*i),M=Math.round(w.y*i);w.x=pt(S,lt,Ke),w.y=pt(M,lt,Ke),(S<w.x||S>w.x+1||M<w.y||M>w.y+1)&&nn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}function dt(e,i,s,p,m){e.emplaceBack(2*i+(p+1)/2,2*s+(m+1)/2)}function Tt(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new hu,this.indexArray=new qn,this.segments=new bn,this.programConfigurations=new Ve(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})}function mt(e,i){for(var s=0;s<e.length;s++)if(Ot(i,e[s]))return!0;for(var p=0;p<i.length;p++)if(Ot(e,i[p]))return!0;return!!Rt(e,i)}function Mt(e,i){if(e.length===1)return er(i,e[0]);for(var s=0;s<i.length;s++)for(var p=i[s],m=0;m<p.length;m++)if(Ot(e,p[m]))return!0;for(var v=0;v<e.length;v++)if(er(i,e[v]))return!0;for(var w=0;w<i.length;w++)if(Rt(e,i[w]))return!0;return!1}function Ut(e,i,s){if(1<e.length){if(Rt(e,i))return 1;for(var p=0;p<i.length;p++)if(_t(i[p],e,s))return 1}for(var m=0;m<e.length;m++)if(_t(e[m],i,s))return 1}function Rt(e,i){var s,p,m,v;if(e.length!==0&&i.length!==0){for(var w=0;w<e.length-1;w++)for(var S=e[w],M=e[w+1],P=0;P<i.length-1;P++)if(p=M,fo(s=S,m=i[P],v=i[P+1])!==fo(p,m,v)&&fo(s,p,m)!==fo(s,p,v))return 1}}function _t(e,i,s){var p=s*s;if(i.length===1)return e.distSqr(i[0])<p;for(var m=1;m<i.length;m++)if(zt(e,i[m-1],i[m])<p)return 1}function zt(e,i,s){var p=i.distSqr(s);if(p===0)return e.distSqr(i);var m=((e.x-i.x)*(s.x-i.x)+(e.y-i.y)*(s.y-i.y))/p;return e.distSqr(m<0?i:1<m?s:s.sub(i)._mult(m)._add(i))}function er(e,i){for(var s,p,m,v=!1,w=0;w<e.length;w++)for(var S=0,M=(s=e[w]).length-1;S<s.length;M=S++)(p=s[S]).y>i.y!=(m=s[M]).y>i.y&&i.x<(m.x-p.x)*(i.y-p.y)/(m.y-p.y)+p.x&&(v=!v);return v}function Ot(e,i){for(var s=!1,p=0,m=e.length-1;p<e.length;m=p++){var v=e[p],w=e[m];v.y>i.y!=w.y>i.y&&i.x<(w.x-v.x)*(i.y-v.y)/(w.y-v.y)+v.x&&(s=!s)}return s}function Br(e,i,s){var p=s[0],m=s[2];if(!(e.x<p.x&&i.x<p.x||e.x>m.x&&i.x>m.x||e.y<p.y&&i.y<p.y||e.y>m.y&&i.y>m.y)){var v=fo(e,i,s[0]);return v!==fo(e,i,s[1])||v!==fo(e,i,s[2])||v!==fo(e,i,s[3])}}function ur(e,i,s){var p=i.paint.get(e).value;return p.kind==="constant"?p.value:s.programConfigurations.get(i.id).getMaxValue(e)}function Fn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ni(e,i,s,p,m){if(!i[0]&&!i[1])return e;var v=W.convert(i)._mult(m);s==="viewport"&&v._rotate(-p);for(var w=[],S=0;S<e.length;S++)w.push(e[S].sub(v));return w}Tt.prototype.populate=function(e,i,s){var p=this.layers[0],m=[],v=null;p.type==="circle"&&(v=p.layout.get("circle-sort-key"));for(var w=0,S=e;w<S.length;w+=1){var M=S[w],P=M.feature,D=M.id,R=M.index,U=M.sourceLayerIndex,F=this.layers[0]._featureFilter.needGeometry,Y={type:P.type,id:D,properties:P.properties,geometry:F?ht(P):[]};if(this.layers[0]._featureFilter.filter(new Or(this.zoom),Y,s)){F||(Y.geometry=ht(P));var $=v?v.evaluate(Y,{},s):void 0;m.push({id:D,properties:P.properties,type:P.type,sourceLayerIndex:U,index:R,geometry:Y.geometry,patterns:{},sortKey:$})}}v&&m.sort(function(Ye,it){return Ye.sortKey-it.sortKey});for(var ie=0,te=m;ie<te.length;ie+=1){var xe=te[ie],be=xe.geometry,Te=xe.index,Me=xe.sourceLayerIndex,Fe=e[Te].feature;this.addFeature(xe,be,Te,s),i.featureIndex.insert(Fe,be,Te,Me,this.index)}},Tt.prototype.update=function(e,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,s)},Tt.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Tt.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Tt.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Tt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Tt.prototype.addFeature=function(e,i,s,p){for(var m=0,v=i;m<v.length;m+=1)for(var w=0,S=v[m];w<S.length;w+=1){var M=S[w],P=M.x,D=M.y;if(!(P<0||8192<=P||D<0||8192<=D)){var R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),U=R.vertexLength;dt(this.layoutVertexArray,P,D,-1,-1),dt(this.layoutVertexArray,P,D,1,-1),dt(this.layoutVertexArray,P,D,1,1),dt(this.layoutVertexArray,P,D,-1,1),this.indexArray.emplaceBack(U,U+1,U+2),this.indexArray.emplaceBack(U,U+3,U+2),R.vertexLength+=4,R.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,{},p)},yt("CircleBucket",Tt,{omit:["layers"]});var Li=new _o({"circle-sort-key":new Lt(ce.layout_circle["circle-sort-key"])}),ki={paint:new _o({"circle-radius":new Lt(ce.paint_circle["circle-radius"]),"circle-color":new Lt(ce.paint_circle["circle-color"]),"circle-blur":new Lt(ce.paint_circle["circle-blur"]),"circle-opacity":new Lt(ce.paint_circle["circle-opacity"]),"circle-translate":new bt(ce.paint_circle["circle-translate"]),"circle-translate-anchor":new bt(ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bt(ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bt(ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Lt(ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Lt(ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Lt(ce.paint_circle["circle-stroke-opacity"])}),layout:Li},Tr=typeof Float32Array<"u"?Float32Array:Array;function Xi(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Pi(e,i,s){var p=i[0],m=i[1],v=i[2],w=i[3],S=i[4],M=i[5],P=i[6],D=i[7],R=i[8],U=i[9],F=i[10],Y=i[11],$=i[12],ie=i[13],te=i[14],xe=i[15],be=s[0],Te=s[1],Me=s[2],Fe=s[3];return e[0]=be*p+Te*S+Me*R+Fe*$,e[1]=be*m+Te*M+Me*U+Fe*ie,e[2]=be*v+Te*P+Me*F+Fe*te,e[3]=be*w+Te*D+Me*Y+Fe*xe,e[4]=(be=s[4])*p+(Te=s[5])*S+(Me=s[6])*R+(Fe=s[7])*$,e[5]=be*m+Te*M+Me*U+Fe*ie,e[6]=be*v+Te*P+Me*F+Fe*te,e[7]=be*w+Te*D+Me*Y+Fe*xe,e[8]=(be=s[8])*p+(Te=s[9])*S+(Me=s[10])*R+(Fe=s[11])*$,e[9]=be*m+Te*M+Me*U+Fe*ie,e[10]=be*v+Te*P+Me*F+Fe*te,e[11]=be*w+Te*D+Me*Y+Fe*xe,e[12]=(be=s[12])*p+(Te=s[13])*S+(Me=s[14])*R+(Fe=s[15])*$,e[13]=be*m+Te*M+Me*U+Fe*ie,e[14]=be*v+Te*P+Me*F+Fe*te,e[15]=be*w+Te*D+Me*Y+Fe*xe,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,i=0,s=arguments.length;s--;)i+=e[s]*e[s];return Math.sqrt(i)});var Pr,En,In=Pi;function Di(e,i,s){var p=i[0],m=i[1],v=i[2],w=i[3];return e[0]=s[0]*p+s[4]*m+s[8]*v+s[12]*w,e[1]=s[1]*p+s[5]*m+s[9]*v+s[13]*w,e[2]=s[2]*p+s[6]*m+s[10]*v+s[14]*w,e[3]=s[3]*p+s[7]*m+s[11]*v+s[15]*w,e}Pr=new Tr(3),Tr!=Float32Array&&(Pr[0]=0,Pr[1]=0,Pr[2]=0),En=new Tr(4),Tr!=Float32Array&&(En[0]=0,En[1]=0,En[2]=0,En[3]=0);var Ui,Eu,_h=(Eu=new Tr(2),Tr!=Float32Array&&(Eu[0]=0,Eu[1]=0),js.__proto__=Ui=Ma,((js.prototype=Object.create(Ui&&Ui.prototype)).constructor=js).prototype.createBucket=function(e){return new Tt(e)},js.prototype.queryRadius=function(e){var i=e;return ur("circle-radius",this,i)+ur("circle-stroke-width",this,i)+Fn(this.paint.get("circle-translate"))},js.prototype.queryIntersectsFeature=function(e,i,s,p,m,v,w,S){for(var M=ni(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,w),P=this.paint.get("circle-radius").evaluate(i,s)+this.paint.get("circle-stroke-width").evaluate(i,s),D=this.paint.get("circle-pitch-alignment")==="map",R=D?M:function(it){return M.map(function(ft){return xh(ft,it)})}(S),U=D?P*w:P,F=0,Y=p;F<Y.length;F+=1)for(var $=0,ie=Y[F];$<ie.length;$+=1){var te=ie[$],xe=D?te:xh(te,S),be=U,Te=Di([],[te.x,te.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=Te[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=v.cameraToCenterDistance/Te[3]),Ye=be,Ot(Me=R,Fe=xe)||_t(Fe,Me,Ye))return!0}var Me,Fe,Ye;return!1},js);function js(e){Ui.call(this,e,ki)}function xh(e,i){var s=Di([],[e.x,e.y,0,1],i);return new W(s[0]/s[3],s[1]/s[3])}var Il,jc=(Iu.__proto__=Il=Tt,(Iu.prototype=Object.create(Il&&Il.prototype)).constructor=Iu);function Iu(){Il.apply(this,arguments)}function ku(e,i,s,p){var m=i.width,v=i.height;if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==m*v*s)throw new RangeError("mismatched image size")}else p=new Uint8Array(m*v*s);return e.width=m,e.height=v,e.data=p,e}function us(e,i,s){var p=i.width,m=i.height;if(p!==e.width||m!==e.height){var v=ku({},{width:p,height:m},s);cs(e,v,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,p),height:Math.min(e.height,m)},s),e.width=p,e.height=m,e.data=v.data}}function cs(e,i,s,p,m,v){if(m.width===0||m.height===0)return i;if(m.width>e.width||m.height>e.height||s.x>e.width-m.width||s.y>e.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||p.x>i.width-m.width||p.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");for(var w=e.data,S=i.data,M=0;M<m.height;M++)for(var P=((s.y+M)*e.width+s.x)*v,D=((p.y+M)*i.width+p.x)*v,R=0;R<m.width*v;R++)S[D+R]=w[P+R];return i}yt("HeatmapBucket",jc,{omit:["layers"]});var Er=function(e,i){ku(this,e,1,i)};function Fr(e,i){ku(this,e,4,i)}Er.prototype.resize=function(e){us(this,e,1)},Er.prototype.clone=function(){return new Er({width:this.width,height:this.height},new Uint8Array(this.data))},Er.copy=function(e,i,s,p,m){cs(e,i,s,p,m,1)},Fr.prototype.resize=function(e){us(this,e,4)},Fr.prototype.replace=function(e,i){i?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Fr.prototype.clone=function(){return new Fr({width:this.width,height:this.height},new Uint8Array(this.data))},Fr.copy=function(e,i,s,p,m){cs(e,i,s,p,m,4)},yt("AlphaImage",Er),yt("RGBAImage",Fr);var Ri={paint:new _o({"heatmap-radius":new Lt(ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Lt(ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bt(ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lh(ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bt(ce.paint_heatmap["heatmap-opacity"])})};function kl(e,i){for(var s=new Uint8Array(1024),p={},m=0,v=0;m<256;m++,v+=4){p[i]=m/255;var w=e.evaluate(p);s[v+0]=Math.floor(255*w.r/w.a),s[v+1]=Math.floor(255*w.g/w.a),s[v+2]=Math.floor(255*w.b/w.a),s[v+3]=Math.floor(255*w.a)}return new Fr({width:256,height:1},s)}var Ml,Mu,wh=(Al.__proto__=Mu=Ma,((Al.prototype=Object.create(Mu&&Mu.prototype)).constructor=Al).prototype.createBucket=function(e){return new jc(e)},Al.prototype._handleSpecialPaintPropertyUpdate=function(e){e==="heatmap-color"&&this._updateColorRamp()},Al.prototype._updateColorRamp=function(){this.colorRamp=kl(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},Al.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},Al.prototype.queryRadius=function(){return 0},Al.prototype.queryIntersectsFeature=function(){return!1},Al.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},Al),hi={paint:new _o({"hillshade-illumination-direction":new bt(ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bt(ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new bt(ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bt(ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bt(ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bt(ce.paint_hillshade["hillshade-accent-color"])})},bh=(C0.__proto__=Ml=Ma,((C0.prototype=Object.create(Ml&&Ml.prototype)).constructor=C0).prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C0),Uc=Ei([{name:"a_pos",components:2,type:"Int16"}],4).members,Au=S0,FL=S0;function C0(e){Ml.call(this,e,hi)}function Al(e){Mu.call(this,e,Ri),this._updateColorRamp()}function S0(e,i,s){s=s||2;var p,m,v,w,S,M,P,D=i&&i.length,R=D?i[0]*s:e.length,U=CS(e,0,R,s,!0),F=[];if(!U||U.next===U.prev)return F;if(D&&(U=function($,ie,te,xe){var be,Te,Me,Fe=[];for(be=0,Te=ie.length;be<Te;be++)(Me=CS($,ie[be]*xe,be<Te-1?ie[be+1]*xe:$.length,xe,!1))===Me.next&&(Me.steiner=!0),Fe.push(HL(Me));for(Fe.sort(ZL),be=0;be<Fe.length;be++)GL(Fe[be],te),te=Vc(te,te.next);return te}(e,i,U,s)),e.length>80*s){p=v=e[0],m=w=e[1];for(var Y=s;Y<R;Y+=s)(S=e[Y])<p&&(p=S),(M=e[Y+1])<m&&(m=M),v<S&&(v=S),w<M&&(w=M);P=(P=Math.max(v-p,w-m))!==0?1/P:0}return og(U,F,s,p,m,P),F}function CS(e,i,s,p,m){var v,w;if(m===0<mx(e,i,s,p))for(v=i;v<s;v+=p)w=ES(v,e[v],e[v+1],w);else for(v=s-p;i<=v;v-=p)w=ES(v,e[v],e[v+1],w);return w&&T0(w,w.next)&&(sg(w),w=w.next),w}function Vc(e,i){if(!e)return e;i=i||e;var s,p=e;do if(s=!1,p.steiner||!T0(p,p.next)&&Gn(p.prev,p,p.next)!==0)p=p.next;else{if(sg(p),(p=i=p.prev)===p.next)break;s=!0}while(s||p!==i);return i}function og(e,i,s,p,m,v,w){if(e){!w&&v&&function(D,R,U,F){for(var Y=D;Y.z===null&&(Y.z=dx(Y.x,Y.y,R,U,F)),Y.prevZ=Y.prev,Y.nextZ=Y.next,(Y=Y.next)!==D;);Y.prevZ.nextZ=null,Y.prevZ=null,function($){var ie,te,xe,be,Te,Me,Fe,Ye,it=1;do{for(te=$,Te=$=null,Me=0;te;){for(Me++,xe=te,ie=Fe=0;ie<it&&(Fe++,xe=xe.nextZ);ie++);for(Ye=it;0<Fe||0<Ye&&xe;)Fe!==0&&(Ye===0||!xe||te.z<=xe.z)?(te=(be=te).nextZ,Fe--):(xe=(be=xe).nextZ,Ye--),Te?Te.nextZ=be:$=be,be.prevZ=Te,Te=be;te=xe}Te.nextZ=null,it*=2}while(1<Me)}(Y)}(e,p,m,v);for(var S,M,P=e;e.prev!==e.next;)if(S=e.prev,M=e.next,v?UL(e,p,m,v):jL(e))i.push(S.i/s),i.push(e.i/s),i.push(M.i/s),sg(e),e=M.next,P=M.next;else if((e=M)===P){w?w===1?og(e=VL(Vc(e),i,s),i,s,p,m,v,2):w===2&&qL(e,i,s,p,m,v):og(Vc(e),i,s,p,m,v,1);break}}}function jL(e){var i=e.prev,s=e,p=e.next;if(!(0<=Gn(i,s,p))){for(var m=e.next.next;m!==e.prev;){if(Hd(i.x,i.y,s.x,s.y,p.x,p.y,m.x,m.y)&&0<=Gn(m.prev,m,m.next))return;m=m.next}return 1}}function UL(e,i,s,p){var m=e.prev,v=e,w=e.next;if(!(0<=Gn(m,v,w))){for(var S=m.x>v.x?m.x>w.x?m.x:w.x:v.x>w.x?v.x:w.x,M=m.y>v.y?m.y>w.y?m.y:w.y:v.y>w.y?v.y:w.y,P=dx(m.x<v.x?m.x<w.x?m.x:w.x:v.x<w.x?v.x:w.x,m.y<v.y?m.y<w.y?m.y:w.y:v.y<w.y?v.y:w.y,i,s,p),D=dx(S,M,i,s,p),R=e.prevZ,U=e.nextZ;R&&R.z>=P&&U&&U.z<=D;){if(R!==e.prev&&R!==e.next&&Hd(m.x,m.y,v.x,v.y,w.x,w.y,R.x,R.y)&&0<=Gn(R.prev,R,R.next)||(R=R.prevZ,U!==e.prev&&U!==e.next&&Hd(m.x,m.y,v.x,v.y,w.x,w.y,U.x,U.y)&&0<=Gn(U.prev,U,U.next)))return;U=U.nextZ}for(;R&&R.z>=P;){if(R!==e.prev&&R!==e.next&&Hd(m.x,m.y,v.x,v.y,w.x,w.y,R.x,R.y)&&0<=Gn(R.prev,R,R.next))return;R=R.prevZ}for(;U&&U.z<=D;){if(U!==e.prev&&U!==e.next&&Hd(m.x,m.y,v.x,v.y,w.x,w.y,U.x,U.y)&&0<=Gn(U.prev,U,U.next))return;U=U.nextZ}return 1}}function VL(e,i,s){var p=e;do{var m=p.prev,v=p.next.next;!T0(m,v)&&SS(m,p,p.next,v)&&ag(m,v)&&ag(v,m)&&(i.push(m.i/s),i.push(p.i/s),i.push(v.i/s),sg(p),sg(p.next),p=e=v),p=p.next}while(p!==e);return Vc(p)}function qL(e,i,s,p,m,v){var w,S,M=e;do{for(var P=M.next.next;P!==M.prev;){if(M.i!==P.i&&(S=P,(w=M).next.i!==S.i&&w.prev.i!==S.i&&!function(R,U){var F=R;do{if(F.i!==R.i&&F.next.i!==R.i&&F.i!==U.i&&F.next.i!==U.i&&SS(F,F.next,R,U))return 1;F=F.next}while(F!==R)}(w,S)&&(ag(w,S)&&ag(S,w)&&function(R,U){for(var F=R,Y=!1,$=(R.x+U.x)/2,ie=(R.y+U.y)/2;F.y>ie!=F.next.y>ie&&F.next.y!==F.y&&$<(F.next.x-F.x)*(ie-F.y)/(F.next.y-F.y)+F.x&&(Y=!Y),(F=F.next)!==R;);return Y}(w,S)&&(Gn(w.prev,w,S.prev)||Gn(w,S.prev,S))||T0(w,S)&&0<Gn(w.prev,w,w.next)&&0<Gn(S.prev,S,S.next)))){var D=TS(M,P);return M=Vc(M,M.next),D=Vc(D,D.next),og(M,i,s,p,m,v),void og(D,i,s,p,m,v)}P=P.next}M=M.next}while(M!==e)}function ZL(e,i){return e.x-i.x}function GL(e,i){if(i=function(p,m){var v,w=m,S=p.x,M=p.y,P=-1/0;do{if(M<=w.y&&M>=w.next.y&&w.next.y!==w.y){var D=w.x+(M-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(D<=S&&P<D){if((P=D)===S){if(M===w.y)return w;if(M===w.next.y)return w.next}v=w.x<w.next.x?w:w.next}}w=w.next}while(w!==m);if(!v)return null;if(S===P)return v;var R,U,F,Y=v,$=v.x,ie=v.y,te=1/0;for(w=v;S>=w.x&&w.x>=$&&S!==w.x&&Hd(M<ie?S:P,M,$,ie,M<ie?P:S,M,w.x,w.y)&&(R=Math.abs(M-w.y)/(S-w.x),ag(w,p)&&(R<te||R===te&&(w.x>v.x||w.x===v.x&&(F=w,Gn((U=v).prev,U,F.prev)<0&&Gn(F.next,U,U.next)<0)))&&(v=w,te=R)),(w=w.next)!==Y;);return v}(e,i)){var s=TS(i,e);Vc(i,i.next),Vc(s,s.next)}}function dx(e,i,s,p,m){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)*m)|e<<8))|e<<4))|e<<2))|e<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-p)*m)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function HL(e){for(var i=e,s=e;(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),(i=i.next)!==e;);return s}function Hd(e,i,s,p,m,v,w,S){return 0<=(m-w)*(i-S)-(e-w)*(v-S)&&0<=(e-w)*(p-S)-(s-w)*(i-S)&&0<=(s-w)*(v-S)-(m-w)*(p-S)}function Gn(e,i,s){return(i.y-e.y)*(s.x-i.x)-(i.x-e.x)*(s.y-i.y)}function T0(e,i){return e.x===i.x&&e.y===i.y}function SS(e,i,s,p){var m=I0(Gn(e,i,s)),v=I0(Gn(e,i,p)),w=I0(Gn(s,p,e)),S=I0(Gn(s,p,i));return m!==v&&w!==S||m===0&&E0(e,s,i)||v===0&&E0(e,p,i)||w===0&&E0(s,e,p)||S===0&&E0(s,i,p)}function E0(e,i,s){return i.x<=Math.max(e.x,s.x)&&i.x>=Math.min(e.x,s.x)&&i.y<=Math.max(e.y,s.y)&&i.y>=Math.min(e.y,s.y)}function I0(e){return 0<e?1:e<0?-1:0}function ag(e,i){return Gn(e.prev,e,e.next)<0?0<=Gn(e,i,e.next)&&0<=Gn(e,e.prev,i):Gn(e,i,e.prev)<0||Gn(e,e.next,i)<0}function TS(e,i){var s=new fx(e.i,e.x,e.y),p=new fx(i.i,i.x,i.y),m=e.next,v=i.prev;return(e.next=i).prev=e,(s.next=m).prev=s,(p.next=s).prev=p,(v.next=p).prev=v,p}function ES(e,i,s,p){var m=new fx(e,i,s);return p?(m.next=p.next,(m.prev=p).next.prev=m,p.next=m):(m.prev=m).next=m,m}function sg(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function fx(e,i,s){this.i=e,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function mx(e,i,s,p){for(var m=0,v=i,w=s-p;v<s;v+=p)m+=(e[w]-e[v])*(e[v+1]+e[w+1]),w=v;return m}function lg(e,i,s){var p=e[i];e[i]=e[s],e[s]=p}function WL(e,i){return e<i?-1:i<e?1:0}function gx(e,i){var s,p,m=e.length;if(m<=1)return[e];for(var v,w,S=[],M=0;M<m;M++){var P=zm(e[M]);P!==0&&(e[M].area=Math.abs(P),w===void 0&&(w=P<0),w===P<0?(v&&S.push(v),v=[e[M]]):v.push(e[M]))}if(v&&S.push(v),1<i)for(var D=0;D<S.length;D++)S[D].length<=i||(p=YL,function R(U,F,Y,$,ie){for(;Y<$;){if(600<$-Y){var te=$-Y+1,xe=F-Y+1,be=Math.log(te),Te=.5*Math.exp(2*be/3),Me=.5*Math.sqrt(be*Te*(te-Te)/te)*(xe-te/2<0?-1:1);R(U,F,Math.max(Y,Math.floor(F-xe*Te/te+Me)),Math.min($,Math.floor(F+(te-xe)*Te/te+Me)),ie)}var Fe=U[F],Ye=Y,it=$;for(lg(U,Y,F),0<ie(U[$],Fe)&&lg(U,Y,$);Ye<it;){for(lg(U,Ye,it),Ye++,it--;ie(U[Ye],Fe)<0;)Ye++;for(;0<ie(U[it],Fe);)it--}ie(U[Y],Fe)===0?lg(U,Y,it):lg(U,++it,$),it<=F&&(Y=it+1),F<=it&&($=it-1)}}(s=S[D],i,1,S[D].length-1||s.length-1,p||WL),S[D]=S[D].slice(0,i));return S}function YL(e,i){return i.area-e.area}function yx(e,i,s){for(var p=s.patternDependencies,m=!1,v=0,w=i;v<w.length;v+=1){var S=w[v].paint.get(e+"-pattern");S.isConstant()||(m=!0);var M=S.constantOr(null);M&&(m=!0,p[M.to]=!0,p[M.from]=!0)}return m}function vx(e,i,s,p,m){for(var v=m.patternDependencies,w=0,S=i;w<S.length;w+=1){var M=S[w],P=M.paint.get(e+"-pattern").value;if(P.kind!=="constant"){var D=P.evaluate({zoom:p-1},s,{},m.availableImages),R=P.evaluate({zoom:p},s,{},m.availableImages),U=P.evaluate({zoom:p+1},s,{},m.availableImages);R=R&&R.name?R.name:R,U=U&&U.name?U.name:U,v[D=D&&D.name?D.name:D]=!0,v[R]=!0,v[U]=!0,s.patterns[M.id]={min:D,mid:R,max:U}}}return s}function Us(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hu,this.indexArray=new qn,this.indexArray2=new Fs,this.programConfigurations=new Ve(e.layers,e.zoom),this.segments=new bn,this.segments2=new bn,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})}S0.deviation=function(e,i,s,p){var m=i&&i.length,v=Math.abs(mx(e,0,m?i[0]*s:e.length,s));if(m)for(var w=0,S=i.length;w<S;w++)v-=Math.abs(mx(e,i[w]*s,w<S-1?i[w+1]*s:e.length,s));var M=0;for(w=0;w<p.length;w+=3){var P=p[w]*s,D=p[w+1]*s,R=p[w+2]*s;M+=Math.abs((e[P]-e[R])*(e[1+D]-e[1+P])-(e[P]-e[D])*(e[1+R]-e[1+P]))}return v===0&&M===0?0:Math.abs((M-v)/v)},S0.flatten=function(e){for(var i=e[0][0].length,s={vertices:[],holes:[],dimensions:i},p=0,m=0;m<e.length;m++){for(var v=0;v<e[m].length;v++)for(var w=0;w<i;w++)s.vertices.push(e[m][v][w]);0<m&&s.holes.push(p+=e[m-1].length)}return s},Au.default=FL,Us.prototype.populate=function(e,i,s){this.hasPattern=yx("fill",this.layers,i);for(var p=this.layers[0].layout.get("fill-sort-key"),m=[],v=0,w=e;v<w.length;v+=1){var S=w[v],M=S.feature,P=S.id,D=S.index,R=S.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,F={type:M.type,id:P,properties:M.properties,geometry:U?ht(M):[]};if(this.layers[0]._featureFilter.filter(new Or(this.zoom),F,s)){U||(F.geometry=ht(M));var Y=p?p.evaluate(F,{},s,i.availableImages):void 0;m.push({id:P,properties:M.properties,type:M.type,sourceLayerIndex:R,index:D,geometry:F.geometry,patterns:{},sortKey:Y})}}p&&m.sort(function(Fe,Ye){return Fe.sortKey-Ye.sortKey});for(var $=0,ie=m;$<ie.length;$+=1){var te=ie[$],xe=te.geometry,be=te.index,Te=te.sourceLayerIndex;if(this.hasPattern){var Me=vx("fill",this.layers,te,this.zoom,i);this.patternFeatures.push(Me)}else this.addFeature(te,xe,be,s,{});i.featureIndex.insert(e[be].feature,xe,be,Te,this.index)}},Us.prototype.update=function(e,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,s)},Us.prototype.addFeatures=function(e,i,s){for(var p=0,m=this.patternFeatures;p<m.length;p+=1){var v=m[p];this.addFeature(v,v.geometry,v.index,i,s)}},Us.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Us.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Us.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Uc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Us.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Us.prototype.addFeature=function(e,i,s,p,m){for(var v=0,w=gx(i,500);v<w.length;v+=1){for(var S=w[v],M=0,P=0,D=S;P<D.length;P+=1)M+=D[P].length;for(var R=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray),U=R.vertexLength,F=[],Y=[],$=0,ie=S;$<ie.length;$+=1){var te=ie[$];if(te.length!==0){te!==S[0]&&Y.push(F.length/2);var xe=this.segments2.prepareSegment(te.length,this.layoutVertexArray,this.indexArray2),be=xe.vertexLength;this.layoutVertexArray.emplaceBack(te[0].x,te[0].y),this.indexArray2.emplaceBack(be+te.length-1,be),F.push(te[0].x),F.push(te[0].y);for(var Te=1;Te<te.length;Te++)this.layoutVertexArray.emplaceBack(te[Te].x,te[Te].y),this.indexArray2.emplaceBack(be+Te-1,be+Te),F.push(te[Te].x),F.push(te[Te].y);xe.vertexLength+=te.length,xe.primitiveLength+=te.length}}for(var Me=Au(F,Y),Fe=0;Fe<Me.length;Fe+=3)this.indexArray.emplaceBack(U+Me[Fe],U+Me[Fe+1],U+Me[Fe+2]);R.vertexLength+=M,R.primitiveLength+=Me.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,p)},yt("FillBucket",Us,{omit:["layers","patternFeatures"]});var ug,KL=new _o({"fill-sort-key":new Lt(ce.layout_fill["fill-sort-key"])}),$L={paint:new _o({"fill-antialias":new bt(ce.paint_fill["fill-antialias"]),"fill-opacity":new Lt(ce.paint_fill["fill-opacity"]),"fill-color":new Lt(ce.paint_fill["fill-color"]),"fill-outline-color":new Lt(ce.paint_fill["fill-outline-color"]),"fill-translate":new bt(ce.paint_fill["fill-translate"]),"fill-translate-anchor":new bt(ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new Sd(ce.paint_fill["fill-pattern"])}),layout:KL},XL=(qc.__proto__=ug=Ma,((qc.prototype=Object.create(ug&&ug.prototype)).constructor=qc).prototype.recalculate=function(e,i){ug.prototype.recalculate.call(this,e,i);var s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},qc.prototype.createBucket=function(e){return new Us(e)},qc.prototype.queryRadius=function(){return Fn(this.paint.get("fill-translate"))},qc.prototype.queryIntersectsFeature=function(e,i,s,p,m,v,w){return Mt(ni(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,w),p)},qc.prototype.isTileClipped=function(){return!0},qc),JL=Ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,IS=Wd;function qc(e){ug.call(this,e,$L)}function Wd(e,i,s,p,m){this.properties={},this.extent=s,this.type=0,this._pbf=e,this._geometry=-1,this._keys=p,this._values=m,e.readFields(QL,this,i)}function QL(e,i,s){e==1?i.id=s.readVarint():e==2?function(p,m){for(var v=p.readVarint()+p.pos;p.pos<v;){var w=m._keys[p.readVarint()],S=m._values[p.readVarint()];m.properties[w]=S}}(s,i):e==3?i.type=s.readVarint():e==4&&(i._geometry=s.pos)}function eP(e){for(var i,s,p=0,m=0,v=e.length,w=v-1;m<v;w=m++)p+=((s=e[w]).x-(i=e[m]).x)*(i.y+s.y);return p}Wd.types=["Unknown","Point","LineString","Polygon"],Wd.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var i,s=e.readVarint()+e.pos,p=1,m=0,v=0,w=0,S=[];e.pos<s;){if(m<=0){var M=e.readVarint();p=7&M,m=M>>3}if(m--,p===1||p===2)v+=e.readSVarint(),w+=e.readSVarint(),p===1&&(i&&S.push(i),i=[]),i.push(new W(v,w));else{if(p!==7)throw new Error("unknown command "+p);i&&i.push(i[0].clone())}}return i&&S.push(i),S},Wd.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var i=e.readVarint()+e.pos,s=1,p=0,m=0,v=0,w=1/0,S=-1/0,M=1/0,P=-1/0;e.pos<i;){if(p<=0){var D=e.readVarint();s=7&D,p=D>>3}if(p--,s===1||s===2)(m+=e.readSVarint())<w&&(w=m),S<m&&(S=m),(v+=e.readSVarint())<M&&(M=v),P<v&&(P=v);else if(s!==7)throw new Error("unknown command "+s)}return[w,M,S,P]},Wd.prototype.toGeoJSON=function(e,i,s){var p,m,v=this.extent*Math.pow(2,s),w=this.extent*e,S=this.extent*i,M=this.loadGeometry(),P=Wd.types[this.type];function D(F){for(var Y=0;Y<F.length;Y++){var $=F[Y];F[Y]=[360*($.x+w)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*($.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(p=0;p<M.length;p++)R[p]=M[p][0];D(M=R);break;case 2:for(p=0;p<M.length;p++)D(M[p]);break;case 3:for(M=function(F){var Y=F.length;if(Y<=1)return[F];for(var $,ie,te=[],xe=0;xe<Y;xe++){var be=eP(F[xe]);be!==0&&(ie===void 0&&(ie=be<0),ie===be<0?($&&te.push($),$=[F[xe]]):$.push(F[xe]))}return $&&te.push($),te}(M),p=0;p<M.length;p++)for(m=0;m<M[p].length;m++)D(M[p][m])}M.length===1?M=M[0]:P="Multi"+P;var U={type:"Feature",geometry:{type:P,coordinates:M},properties:this.properties};return"id"in this&&(U.id=this.id),U};var kS=MS;function MS(e,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(tP,this,i),this.length=this._features.length}function tP(e,i,s){e===15?i.version=s.readVarint():e===1?i.name=s.readString():e===5?i.extent=s.readVarint():e===2?i._features.push(s.pos):e===3?i._keys.push(s.readString()):e===4&&i._values.push(function(p){for(var m=null,v=p.readVarint()+p.pos;p.pos<v;){var w=p.readVarint()>>3;m=w==1?p.readString():w==2?p.readFloat():w==3?p.readDouble():w==4?p.readVarint64():w==5?p.readVarint():w==6?p.readSVarint():w==7?p.readBoolean():null}return m}(s))}function rP(e,i,s){if(e===3){var p=new kS(s,s.readVarint()+s.pos);p.length&&(i[p.name]=p)}}MS.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var i=this._pbf.readVarint()+this._pbf.pos;return new IS(this._pbf,i,this.extent,this._keys,this._values)};var Yd={VectorTile:function(e,i){this.layers=e.readFields(rP,{},i)},VectorTileFeature:IS,VectorTileLayer:kS},nP=Yd.VectorTileFeature.types,_x=Math.pow(2,13);function cg(e,i,s,p,m,v,w,S){e.emplaceBack(i,s,2*Math.floor(p*_x)+w,m*_x*2,v*_x*2,Math.round(S))}function Vs(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new du,this.indexArray=new qn,this.programConfigurations=new Ve(e.layers,e.zoom),this.segments=new bn,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})}Vs.prototype.populate=function(e,i,s){this.features=[],this.hasPattern=yx("fill-extrusion",this.layers,i);for(var p=0,m=e;p<m.length;p+=1){var v=m[p],w=v.feature,S=v.id,M=v.index,P=v.sourceLayerIndex,D=this.layers[0]._featureFilter.needGeometry,R={type:w.type,id:S,properties:w.properties,geometry:D?ht(w):[]};if(this.layers[0]._featureFilter.filter(new Or(this.zoom),R,s)){var U={id:S,sourceLayerIndex:P,index:M,geometry:D?R.geometry:ht(w),properties:w.properties,type:w.type,patterns:{}};w.id!==void 0&&(U.id=w.id),this.hasPattern?this.features.push(vx("fill-extrusion",this.layers,U,this.zoom,i)):this.addFeature(U,U.geometry,M,s,{}),i.featureIndex.insert(w,U.geometry,M,P,this.index,!0)}}},Vs.prototype.addFeatures=function(e,i,s){for(var p=0,m=this.features;p<m.length;p+=1){var v=m[p];this.addFeature(v,v.geometry,v.index,i,s)}},Vs.prototype.update=function(e,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,s)},Vs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Vs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Vs.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,JL),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Vs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Vs.prototype.addFeature=function(e,i,s,p,m){for(var v=0,w=gx(i,500);v<w.length;v+=1){for(var S=w[v],M=0,P=0,D=S;P<D.length;P+=1)M+=D[P].length;for(var R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),U=0,F=S;U<F.length;U+=1){var Y=F[U];if(Y.length!==0&&!((At=Y).every(function(Gt){return Gt.x<0})||At.every(function(Gt){return 8192<Gt.x})||At.every(function(Gt){return Gt.y<0})||At.every(function(Gt){return 8192<Gt.y})))for(var $=0,ie=0;ie<Y.length;ie++){var te=Y[ie];if(1<=ie){var xe=Y[ie-1];if(Qt=xe,!((ir=te).x===Qt.x&&(ir.x<0||8192<ir.x)||ir.y===Qt.y&&(ir.y<0||8192<ir.y))){R.vertexLength+4>bn.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var be=te.sub(xe)._perp()._unit(),Te=xe.dist(te);32768<$+Te&&($=0),cg(this.layoutVertexArray,te.x,te.y,be.x,be.y,0,0,$),cg(this.layoutVertexArray,te.x,te.y,be.x,be.y,0,1,$),cg(this.layoutVertexArray,xe.x,xe.y,be.x,be.y,0,0,$+=Te),cg(this.layoutVertexArray,xe.x,xe.y,be.x,be.y,0,1,$);var Me=R.vertexLength;this.indexArray.emplaceBack(Me,Me+2,Me+1),this.indexArray.emplaceBack(Me+1,Me+2,Me+3),R.vertexLength+=4,R.primitiveLength+=2}}}}if(R.vertexLength+M>bn.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),nP[e.type]==="Polygon"){for(var Fe=[],Ye=[],it=R.vertexLength,ft=0,tt=S;ft<tt.length;ft+=1){var gt=tt[ft];if(gt.length!==0){gt!==S[0]&&Ye.push(Fe.length/2);for(var at=0;at<gt.length;at++){var It=gt[at];cg(this.layoutVertexArray,It.x,It.y,0,0,1,1,0),Fe.push(It.x),Fe.push(It.y)}}}for(var Nt=Au(Fe,Ye),Zt=0;Zt<Nt.length;Zt+=3)this.indexArray.emplaceBack(it+Nt[Zt],it+Nt[Zt+2],it+Nt[Zt+1]);R.primitiveLength+=Nt.length/3,R.vertexLength+=M}}var ir,Qt,At;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,p)},yt("FillExtrusionBucket",Vs,{omit:["layers","features"]});var k0,iP={paint:new _o({"fill-extrusion-opacity":new bt(ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Lt(ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bt(ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bt(ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Sd(ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Lt(ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Lt(ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new bt(ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},oP=(Ch.__proto__=k0=Ma,((Ch.prototype=Object.create(k0&&k0.prototype)).constructor=Ch).prototype.createBucket=function(e){return new Vs(e)},Ch.prototype.queryRadius=function(){return Fn(this.paint.get("fill-extrusion-translate"))},Ch.prototype.is3D=function(){return!0},Ch.prototype.queryIntersectsFeature=function(e,i,s,p,m,v,w,S){var M=ni(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,w),P=this.paint.get("fill-extrusion-height").evaluate(i,s),D=this.paint.get("fill-extrusion-base").evaluate(i,s),R=function(F){for(var Y=[],$=0,ie=M;$<ie.length;$+=1){var te=ie[$],xe=[te.x,te.y,0,1];Di(xe,xe,F),Y.push(new W(xe[0]/xe[3],xe[1]/xe[3]))}return Y}(S),U=function(F,Y){for(var $=[],ie=[],te=Y[8]*D,xe=Y[9]*D,be=Y[10]*D,Te=Y[11]*D,Me=Y[8]*P,Fe=Y[9]*P,Ye=Y[10]*P,it=Y[11]*P,ft=0,tt=F;ft<tt.length;ft+=1){for(var gt=[],at=[],It=0,Nt=tt[ft];It<Nt.length;It+=1){var Zt=Nt[It],ir=Zt.x,Qt=Zt.y,At=Y[0]*ir+Y[4]*Qt+Y[12],Gt=Y[1]*ir+Y[5]*Qt+Y[13],kr=Y[2]*ir+Y[6]*Qt+Y[14],cn=Y[3]*ir+Y[7]*Qt+Y[15],fi=kr+be,jn=cn+Te,an=At+Me,Cn=Gt+Fe,Ur=kr+Ye,Mi=cn+it,ii=new W((At+te)/jn,(Gt+xe)/jn);ii.z=fi/jn,gt.push(ii);var mi=new W(an/Mi,Cn/Mi);mi.z=Ur/Mi,at.push(mi)}$.push(gt),ie.push(at)}return[$,ie]}(p,S);return function(F,Y,$){var ie=1/0;Mt($,Y)&&(ie=AS($,Y[0]));for(var te=0;te<Y.length;te++)for(var xe=Y[te],be=F[te],Te=0;Te<xe.length-1;Te++){var Me=xe[Te],Fe=[Me,xe[Te+1],be[Te+1],be[Te],Me];mt($,Fe)&&(ie=Math.min(ie,AS($,Fe)))}return ie!==1/0&&ie}(U[0],U[1],R)},Ch);function Ch(e){k0.call(this,e,iP)}function pg(e,i){return e.x*i.x+e.y*i.y}function AS(e,i){if(e.length===1){for(var s,p=0,m=i[p++];!s||m.equals(s);)if(!(s=i[p++]))return 1/0;for(;p<i.length;p++){var v=i[p],w=e[0],S=s.sub(m),M=v.sub(m),P=w.sub(m),D=pg(S,S),R=pg(S,M),U=pg(M,M),F=pg(P,S),Y=pg(P,M),$=D*U-R*R,ie=(U*F-R*Y)/$,te=(D*Y-R*F)/$,xe=m.z*(1-ie-te)+s.z*ie+v.z*te;if(isFinite(xe))return xe}return 1/0}for(var be=1/0,Te=0,Me=i;Te<Me.length;Te+=1)be=Math.min(be,Me[Te].z);return be}function bo(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new rg,this.indexArray=new qn,this.programConfigurations=new Ve(e.layers,e.zoom),this.segments=new bn,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})}var aP=Ei([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,sP=Yd.VectorTileFeature.types,lP=Math.cos(Math.PI/180*37.5),LS=Math.pow(2,14)/.5;bo.prototype.populate=function(e,i,s){this.hasPattern=yx("line",this.layers,i);for(var p=this.layers[0].layout.get("line-sort-key"),m=[],v=0,w=e;v<w.length;v+=1){var S=w[v],M=S.feature,P=S.id,D=S.index,R=S.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,F={type:M.type,id:P,properties:M.properties,geometry:U?ht(M):[]};if(this.layers[0]._featureFilter.filter(new Or(this.zoom),F,s)){U||(F.geometry=ht(M));var Y=p?p.evaluate(F,{},s):void 0;m.push({id:P,properties:M.properties,type:M.type,sourceLayerIndex:R,index:D,geometry:F.geometry,patterns:{},sortKey:Y})}}p&&m.sort(function(Fe,Ye){return Fe.sortKey-Ye.sortKey});for(var $=0,ie=m;$<ie.length;$+=1){var te=ie[$],xe=te.geometry,be=te.index,Te=te.sourceLayerIndex;if(this.hasPattern){var Me=vx("line",this.layers,te,this.zoom,i);this.patternFeatures.push(Me)}else this.addFeature(te,xe,be,s,{});i.featureIndex.insert(e[be].feature,xe,be,Te,this.index)}},bo.prototype.update=function(e,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,s)},bo.prototype.addFeatures=function(e,i,s){for(var p=0,m=this.patternFeatures;p<m.length;p+=1){var v=m[p];this.addFeature(v,v.geometry,v.index,i,s)}},bo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,aP),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},bo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bo.prototype.addFeature=function(e,i,s,p,m){for(var v=this.layers[0].layout,w=v.get("line-join").evaluate(e,{}),S=v.get("line-cap"),M=v.get("line-miter-limit"),P=v.get("line-round-limit"),D=0,R=i;D<R.length;D+=1)this.addLine(R[D],e,w,S,M,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,p)},bo.prototype.addLine=function(e,i,s,p,m,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+i.properties.mapbox_clip_start,this.clipEnd=+i.properties.mapbox_clip_end;for(var w=0;w<e.length-1;w++)this.totalDistance+=e[w].dist(e[w+1]);this.updateScaledDistance()}for(var S=sP[i.type]==="Polygon",M=e.length;2<=M&&e[M-1].equals(e[M-2]);)M--;for(var P=0;P<M-1&&e[P].equals(e[P+1]);)P++;if(!(M<(S?3:2))){s==="bevel"&&(m=1.05);var D,R=this.overscaling<=16?122880/(512*this.overscaling):0,U=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray),F=void 0,Y=void 0,$=void 0,ie=void 0;this.e1=this.e2=-1,S&&(ie=e[P].sub(D=e[M-2])._unit()._perp());for(var te=P;te<M;te++)if(!(Y=te===M-1?S?e[P+1]:void 0:e[te+1])||!e[te].equals(Y)){ie&&($=ie),D&&(F=D),D=e[te],ie=Y?Y.sub(D)._unit()._perp():$;var xe=($=$||ie).add(ie);xe.x===0&&xe.y===0||xe._unit();var be=$.x*ie.x+$.y*ie.y,Te=xe.x*ie.x+xe.y*ie.y,Me=Te!=0?1/Te:1/0,Fe=2*Math.sqrt(2-2*Te),Ye=Te<lP&&F&&Y,it=0<$.x*ie.y-$.y*ie.x;if(Ye&&P<te){var ft=D.dist(F);if(2*R<ft){var tt=D.sub(D.sub(F)._mult(R/ft)._round());this.updateDistance(F,tt),this.addCurrentVertex(tt,$,0,0,U),F=tt}}var gt=F&&Y,at=gt?s:S?"butt":p;if(gt&&at==="round"&&(Me<v?at="miter":Me<=2&&(at="fakeround")),at==="miter"&&m<Me&&(at="bevel"),at==="bevel"&&(2<Me&&(at="flipbevel"),Me<m&&(at="miter")),F&&this.updateDistance(F,D),at==="miter")xe._mult(Me),this.addCurrentVertex(D,xe,0,0,U);else if(at==="flipbevel"){if(100<Me)xe=ie.mult(-1);else{var It=Me*$.add(ie).mag()/$.sub(ie).mag();xe._perp()._mult(It*(it?-1:1))}this.addCurrentVertex(D,xe,0,0,U),this.addCurrentVertex(D,xe.mult(-1),0,0,U)}else if(at==="bevel"||at==="fakeround"){var Nt=-Math.sqrt(Me*Me-1),Zt=it?Nt:0,ir=it?0:Nt;if(F&&this.addCurrentVertex(D,$,Zt,ir,U),at==="fakeround")for(var Qt=Math.round(180*Fe/Math.PI/20),At=1;At<Qt;At++){var Gt=At/Qt;if(Gt!==.5){var kr=Gt-.5;Gt+=Gt*kr*(Gt-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*kr*kr+(.848013+be*(.215638*be-1.06021)))}var cn=ie.sub($)._mult(Gt)._add($)._unit()._mult(it?-1:1);this.addHalfVertex(D,cn.x,cn.y,!1,it,0,U)}Y&&this.addCurrentVertex(D,ie,-Zt,-ir,U)}else if(at==="butt")this.addCurrentVertex(D,xe,0,0,U);else if(at==="square"){var fi=F?1:-1;this.addCurrentVertex(D,xe,fi,fi,U)}else at==="round"&&(F&&(this.addCurrentVertex(D,$,0,0,U),this.addCurrentVertex(D,$,1,1,U,!0)),Y&&(this.addCurrentVertex(D,ie,-1,-1,U,!0),this.addCurrentVertex(D,ie,0,0,U)));if(Ye&&te<M-1){var jn=D.dist(Y);if(2*R<jn){var an=D.add(Y.sub(D)._mult(R/jn)._round());this.updateDistance(D,an),this.addCurrentVertex(an,ie,0,0,U),D=an}}}}},bo.prototype.addCurrentVertex=function(e,i,s,p,m,v){v===void 0&&(v=!1);var w=i.y*p-i.x,S=-i.y-i.x*p;this.addHalfVertex(e,i.x+i.y*s,i.y-i.x*s,v,!1,s,m),this.addHalfVertex(e,w,S,v,!0,-p,m),this.distance>LS/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,i,s,p,m,v))},bo.prototype.addHalfVertex=function(e,i,s,p,m,v,w){var S=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((e.x<<1)+(p?1:0),(e.y<<1)+(m?1:0),Math.round(63*i)+128,Math.round(63*s)+128,1+(v===0?0:v<0?-1:1)|(63&S)<<2,S>>6);var M=w.vertexLength++;0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,M),w.primitiveLength++),m?this.e2=M:this.e1=M},bo.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(LS-1):this.distance},bo.prototype.updateDistance=function(e,i){this.distance+=e.dist(i),this.updateScaledDistance()},yt("LineBucket",bo,{omit:["layers","patternFeatures"]});var Kd,uP=new _o({"line-cap":new bt(ce.layout_line["line-cap"]),"line-join":new Lt(ce.layout_line["line-join"]),"line-miter-limit":new bt(ce.layout_line["line-miter-limit"]),"line-round-limit":new bt(ce.layout_line["line-round-limit"]),"line-sort-key":new Lt(ce.layout_line["line-sort-key"])}),PS={paint:new _o({"line-opacity":new Lt(ce.paint_line["line-opacity"]),"line-color":new Lt(ce.paint_line["line-color"]),"line-translate":new bt(ce.paint_line["line-translate"]),"line-translate-anchor":new bt(ce.paint_line["line-translate-anchor"]),"line-width":new Lt(ce.paint_line["line-width"]),"line-gap-width":new Lt(ce.paint_line["line-gap-width"]),"line-offset":new Lt(ce.paint_line["line-offset"]),"line-blur":new Lt(ce.paint_line["line-blur"]),"line-dasharray":new xl(ce.paint_line["line-dasharray"]),"line-pattern":new Sd(ce.paint_line["line-pattern"]),"line-gradient":new lh(ce.paint_line["line-gradient"])}),layout:uP},DS=(hg.__proto__=Kd=Lt,((hg.prototype=Object.create(Kd&&Kd.prototype)).constructor=hg).prototype.possiblyEvaluate=function(e,i){return i=new Or(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),Kd.prototype.possiblyEvaluate.call(this,e,i)},hg.prototype.evaluate=function(e,i,s,p){return i=nt({},i,{zoom:Math.floor(i.zoom)}),Kd.prototype.evaluate.call(this,e,i,s,p)},new hg(PS.paint.properties["line-width"].specification));function hg(){Kd.apply(this,arguments)}DS.useIntegerZoom=!0;var dg,cP=(Ll.__proto__=dg=Ma,((Ll.prototype=Object.create(dg&&dg.prototype)).constructor=Ll).prototype._handleSpecialPaintPropertyUpdate=function(e){e==="line-gradient"&&this._updateGradient()},Ll.prototype._updateGradient=function(){this.gradient=kl(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},Ll.prototype.recalculate=function(e,i){dg.prototype.recalculate.call(this,e,i),this.paint._values["line-floorwidth"]=DS.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},Ll.prototype.createBucket=function(e){return new bo(e)},Ll.prototype.queryRadius=function(e){var i=e,s=zS(ur("line-width",this,i),ur("line-gap-width",this,i)),p=ur("line-offset",this,i);return s/2+Math.abs(p)+Fn(this.paint.get("line-translate"))},Ll.prototype.queryIntersectsFeature=function(e,i,s,p,m,v,w){var S=ni(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,w),M=w/2*zS(this.paint.get("line-width").evaluate(i,s),this.paint.get("line-gap-width").evaluate(i,s)),P=this.paint.get("line-offset").evaluate(i,s);return P&&(p=function(D,R){for(var U=[],F=new W(0,0),Y=0;Y<D.length;Y++){for(var $=D[Y],ie=[],te=0;te<$.length;te++){var xe=$[te],be=$[te+1],Te=te===0?F:xe.sub($[te-1])._unit()._perp(),Me=te===$.length-1?F:be.sub(xe)._unit()._perp(),Fe=Te._add(Me)._unit();Fe._mult(1/(Fe.x*Me.x+Fe.y*Me.y)),ie.push(Fe._mult(R)._add(xe))}U.push(ie)}return U}(p,P*w)),function(D,R,U){for(var F=0;F<R.length;F++){var Y=R[F];if(3<=D.length){for(var $=0;$<Y.length;$++)if(Ot(D,Y[$]))return!0}if(Ut(D,Y,U))return!0}return!1}(S,p,M)},Ll.prototype.isTileClipped=function(){return!0},Ll);function Ll(e){dg.call(this,e,PS)}function zS(e,i){return 0<i?i+2*e:e}var pP=Ei([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hP=Ei([{name:"a_projected_pos",components:3,type:"Float32"}],4),dP=(Ei([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ei([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),NS=(Ei([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),fP=Ei([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function mP(e,i,s){return e.sections.forEach(function(p){var m,v,w;p.text=(m=p.text,v=s,(w=i.layout.get("text-transform").evaluate(v,{}))==="uppercase"?m=m.toLocaleUpperCase():w==="lowercase"&&(m=m.toLocaleLowerCase()),No.applyArabicShaping&&(m=No.applyArabicShaping(m)),m)}),e}function OS(e,i,s,p,m){var v,w,S=8*m-p-1,M=(1<<S)-1,P=M>>1,D=-7,R=s?m-1:0,U=s?-1:1,F=e[i+R];for(R+=U,v=F&(1<<-D)-1,F>>=-D,D+=S;0<D;v=256*v+e[i+R],R+=U,D-=8);for(w=v&(1<<-D)-1,v>>=-D,D+=p;0<D;w=256*w+e[i+R],R+=U,D-=8);if(v===0)v=1-P;else{if(v===M)return w?NaN:1/0*(F?-1:1);w+=Math.pow(2,p),v-=P}return(F?-1:1)*w*Math.pow(2,v-p)}function RS(e,i,s,p,m,v){var w,S,M,P=8*v-m-1,D=(1<<P)-1,R=D>>1,U=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=p?0:v-1,Y=p?1:-1,$=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(S=isNaN(i)?1:0,w=D):(w=Math.floor(Math.log(i)/Math.LN2),i*(M=Math.pow(2,-w))<1&&(w--,M*=2),2<=(i+=1<=w+R?U/M:U*Math.pow(2,1-R))*M&&(w++,M/=2),D<=w+R?(S=0,w=D):1<=w+R?(S=(i*M-1)*Math.pow(2,m),w+=R):(S=i*Math.pow(2,R-1)*Math.pow(2,m),w=0));8<=m;e[s+F]=255&S,F+=Y,S/=256,m-=8);for(w=w<<m|S,P+=m;0<P;e[s+F]=255&w,F+=Y,w/=256,P-=8);e[s+F-Y]|=128*$}Ei([{name:"triangle",components:3,type:"Uint16"}]),Ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ei([{type:"Float32",name:"offsetX"}]),Ei([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var fg={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},M0=jr;function jr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}jr.Varint=0,jr.Fixed64=1,jr.Bytes=2,jr.Fixed32=5;var BS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Lu(e){return e.type===jr.Bytes?e.readVarint()+e.pos:e.pos+1}function $d(e,i,s){return s?4294967296*i+(e>>>0):4294967296*(i>>>0)+(e>>>0)}function FS(e,i,s){var p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));s.realloc(p);for(var m=s.pos-1;e<=m;m--)s.buf[m+p]=s.buf[m]}function gP(e,i){for(var s=0;s<e.length;s++)i.writeVarint(e[s])}function yP(e,i){for(var s=0;s<e.length;s++)i.writeSVarint(e[s])}function vP(e,i){for(var s=0;s<e.length;s++)i.writeFloat(e[s])}function _P(e,i){for(var s=0;s<e.length;s++)i.writeDouble(e[s])}function xP(e,i){for(var s=0;s<e.length;s++)i.writeBoolean(e[s])}function wP(e,i){for(var s=0;s<e.length;s++)i.writeFixed32(e[s])}function bP(e,i){for(var s=0;s<e.length;s++)i.writeSFixed32(e[s])}function CP(e,i){for(var s=0;s<e.length;s++)i.writeFixed64(e[s])}function SP(e,i){for(var s=0;s<e.length;s++)i.writeSFixed64(e[s])}function A0(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+16777216*e[i+3]}function Xd(e,i,s){e[s]=i,e[s+1]=i>>>8,e[s+2]=i>>>16,e[s+3]=i>>>24}function jS(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+(e[i+3]<<24)}function TP(e,i,s){e===1&&s.readMessage(EP,i)}function EP(e,i,s){if(e===3){var p=s.readMessage(IP,{}),m=p.width,v=p.height,w=p.left,S=p.top,M=p.advance;i.push({id:p.id,bitmap:new Er({width:m+6,height:v+6},p.bitmap),metrics:{width:m,height:v,left:w,top:S,advance:M}})}}function IP(e,i,s){e===1?i.id=s.readVarint():e===2?i.bitmap=s.readBytes():e===3?i.width=s.readVarint():e===4?i.height=s.readVarint():e===5?i.left=s.readSVarint():e===6?i.top=s.readSVarint():e===7&&(i.advance=s.readVarint())}function US(e){for(var i=0,s=0,p=0,m=e;p<m.length;p+=1){var v=m[p];i+=v.w*v.h,s=Math.max(s,v.w)}e.sort(function($,ie){return ie.h-$.h});for(var w=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}],S=0,M=0,P=0,D=e;P<D.length;P+=1)for(var R=D[P],U=w.length-1;0<=U;U--){var F=w[U];if(!(R.w>F.w||R.h>F.h)){if(R.x=F.x,R.y=F.y,M=Math.max(M,R.y+R.h),S=Math.max(S,R.x+R.w),R.w===F.w&&R.h===F.h){var Y=w.pop();U<w.length&&(w[U]=Y)}else R.h===F.h?(F.x+=R.w,F.w-=R.w):(R.w===F.w||w.push({x:F.x+R.w,y:F.y,w:F.w-R.w,h:R.h}),F.y+=R.h,F.h-=R.h);break}}return{w:S,h:M,fill:i/(S*M)||0}}function L0(e,i){var s=i.pixelRatio,p=i.version,m=i.stretchX,v=i.stretchY,w=i.content;this.paddedRect=e,this.pixelRatio=s,this.stretchX=m,this.stretchY=v,this.content=w,this.version=p}jr.prototype={destroy:function(){this.buf=null},readFields:function(e,i,s){for(s=s||this.length;this.pos<s;){var p=this.readVarint(),m=p>>3,v=this.pos;this.type=7&p,e(m,i,this),this.pos===v&&this.skip(p)}return i},readMessage:function(e,i){return this.readFields(e,i,this.readVarint()+this.pos)},readFixed32:function(){var e=A0(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=jS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=A0(this.buf,this.pos)+4294967296*A0(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=A0(this.buf,this.pos)+4294967296*jS(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=OS(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=OS(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var i,s,p=this.buf;return i=127&(s=p[this.pos++]),s<128?i:(i|=(127&(s=p[this.pos++]))<<7,s<128?i:(i|=(127&(s=p[this.pos++]))<<14,s<128?i:(i|=(127&(s=p[this.pos++]))<<21,s<128?i:function(m,v,w){var S,M,P=w.buf;if(S=(112&(M=P[w.pos++]))>>4,M<128||(S|=(127&(M=P[w.pos++]))<<3,M<128)||(S|=(127&(M=P[w.pos++]))<<10,M<128)||(S|=(127&(M=P[w.pos++]))<<17,M<128)||(S|=(127&(M=P[w.pos++]))<<24,M<128)||(S|=(1&(M=P[w.pos++]))<<31,M<128))return $d(m,S,v);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(s=p[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e,i,s,p=this.readVarint()+this.pos,m=this.pos;return 12<=(this.pos=p)-m&&BS?(e=this.buf,i=m,s=p,BS.decode(e.subarray(i,s))):function(v,w){for(var S="",M=m;M<w;){var P,D,R,U=v[M],F=null,Y=239<U?4:223<U?3:191<U?2:1;if(w<M+Y)break;Y===1?U<128&&(F=U):Y===2?(192&(P=v[M+1]))==128&&(F=(31&U)<<6|63&P)<=127&&(F=null):Y===3?(D=v[M+2],(192&(P=v[M+1]))==128&&(192&D)==128&&((F=(15&U)<<12|(63&P)<<6|63&D)<=2047||55296<=F&&F<=57343)&&(F=null)):Y===4&&(D=v[M+2],R=v[M+3],(192&(P=v[M+1]))==128&&(192&D)==128&&(192&R)==128&&((F=(15&U)<<18|(63&P)<<12|(63&D)<<6|63&R)<=65535||1114112<=F)&&(F=null)),F===null?(F=65533,Y=1):65535<F&&(F-=65536,S+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),S+=String.fromCharCode(F),M+=Y}return S}(this.buf,p)},readBytes:function(){var e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i},readPackedVarint:function(e,i){if(this.type!==jr.Bytes)return e.push(this.readVarint(i));var s=Lu(this);for(e=e||[];this.pos<s;)e.push(this.readVarint(i));return e},readPackedSVarint:function(e){if(this.type!==jr.Bytes)return e.push(this.readSVarint());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==jr.Bytes)return e.push(this.readBoolean());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==jr.Bytes)return e.push(this.readFloat());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==jr.Bytes)return e.push(this.readDouble());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==jr.Bytes)return e.push(this.readFixed32());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==jr.Bytes)return e.push(this.readSFixed32());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==jr.Bytes)return e.push(this.readFixed64());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==jr.Bytes)return e.push(this.readSFixed64());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed64());return e},skip:function(e){var i=7&e;if(i===jr.Varint)for(;127<this.buf[this.pos++];);else if(i===jr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===jr.Fixed32)this.pos+=4;else{if(i!==jr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(e,i){this.writeVarint(e<<3|i)},realloc:function(e){for(var i=this.length||16;i<this.pos+e;)i*=2;if(i!==this.length){var s=new Uint8Array(i);s.set(this.buf),this.buf=s,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Xd(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Xd(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Xd(this.buf,-1&e,this.pos),Xd(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Xd(this.buf,-1&e,this.pos),Xd(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){268435455<(e=+e||0)||e<0?function(i){var s,p,m,v,w,S,M;if(0<=e?(s=e%4294967296|0,p=e/4294967296|0):(p=~(-e/4294967296),4294967295^(s=~(-e%4294967296))?s=s+1|0:p=p+1|(s=0)),18446744073709552e3<=e||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),S=s,(M=i).buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,M.buf[M.pos]=127&(S>>>=7),w=(7&(m=p))<<4,(v=i).buf[v.pos++]|=w|((m>>>=3)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m)))))}(this):(this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var i=this.pos;this.pos=function(p,m,v){for(var w,S,M=0;M<m.length;M++){if(55295<(w=m.charCodeAt(M))&&w<57344){if(!S){56319<w||M+1===m.length?(p[v++]=239,p[v++]=191,p[v++]=189):S=w;continue}if(w<56320){p[v++]=239,p[v++]=191,p[v++]=189,S=w;continue}w=S-55296<<10|w-56320|65536,S=null}else S&&(p[v++]=239,p[v++]=191,p[v++]=189,S=null);w<128?p[v++]=w:(w<2048?p[v++]=w>>6|192:(w<65536?p[v++]=w>>12|224:(p[v++]=w>>18|240,p[v++]=w>>12&63|128),p[v++]=w>>6&63|128),p[v++]=63&w|128)}return v}(this.buf,e,this.pos);var s=this.pos-i;128<=s&&FS(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeFloat:function(e){this.realloc(4),RS(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),RS(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var i=e.length;this.writeVarint(i),this.realloc(i);for(var s=0;s<i;s++)this.buf[this.pos++]=e[s]},writeRawMessage:function(e,i){this.pos++;var s=this.pos;e(i,this);var p=this.pos-s;128<=p&&FS(s,p,this),this.pos=s-1,this.writeVarint(p),this.pos+=p},writeMessage:function(e,i,s){this.writeTag(e,jr.Bytes),this.writeRawMessage(i,s)},writePackedVarint:function(e,i){i.length&&this.writeMessage(e,gP,i)},writePackedSVarint:function(e,i){i.length&&this.writeMessage(e,yP,i)},writePackedBoolean:function(e,i){i.length&&this.writeMessage(e,xP,i)},writePackedFloat:function(e,i){i.length&&this.writeMessage(e,vP,i)},writePackedDouble:function(e,i){i.length&&this.writeMessage(e,_P,i)},writePackedFixed32:function(e,i){i.length&&this.writeMessage(e,wP,i)},writePackedSFixed32:function(e,i){i.length&&this.writeMessage(e,bP,i)},writePackedFixed64:function(e,i){i.length&&this.writeMessage(e,CP,i)},writePackedSFixed64:function(e,i){i.length&&this.writeMessage(e,SP,i)},writeBytesField:function(e,i){this.writeTag(e,jr.Bytes),this.writeBytes(i)},writeFixed32Field:function(e,i){this.writeTag(e,jr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(e,i){this.writeTag(e,jr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(e,i){this.writeTag(e,jr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(e,i){this.writeTag(e,jr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(e,i){this.writeTag(e,jr.Varint),this.writeVarint(i)},writeSVarintField:function(e,i){this.writeTag(e,jr.Varint),this.writeSVarint(i)},writeStringField:function(e,i){this.writeTag(e,jr.Bytes),this.writeString(i)},writeFloatField:function(e,i){this.writeTag(e,jr.Fixed32),this.writeFloat(i)},writeDoubleField:function(e,i){this.writeTag(e,jr.Fixed64),this.writeDouble(i)},writeBooleanField:function(e,i){this.writeVarintField(e,Boolean(i))}};var mg={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};function gg(e,i){var s={},p={};this.haveRenderCallbacks=[];var m=[];this.addImages(e,s,m),this.addImages(i,p,m);var v=US(m),w=new Fr({width:v.w||1,height:v.h||1});for(var S in e){var M=e[S],P=s[S].paddedRect;Fr.copy(M.data,w,{x:0,y:0},{x:P.x+1,y:P.y+1},M.data)}for(var D in i){var R=i[D],U=p[D].paddedRect,F=U.x+1,Y=U.y+1,$=R.data.width,ie=R.data.height;Fr.copy(R.data,w,{x:0,y:0},{x:F,y:Y},R.data),Fr.copy(R.data,w,{x:0,y:ie-1},{x:F,y:Y-1},{width:$,height:1}),Fr.copy(R.data,w,{x:0,y:0},{x:F,y:Y+ie},{width:$,height:1}),Fr.copy(R.data,w,{x:$-1,y:0},{x:F-1,y:Y},{width:1,height:ie}),Fr.copy(R.data,w,{x:0,y:0},{x:F+$,y:Y},{width:1,height:ie})}this.image=w,this.iconPositions=s,this.patternPositions=p}function Jd(){this.scale=1,this.fontStack="",this.imageName=null}mg.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},mg.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},mg.tlbr.get=function(){return this.tl.concat(this.br)},mg.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(L0.prototype,mg),gg.prototype.addImages=function(e,i,s){for(var p in e){var m=e[p],v={x:0,y:0,w:m.data.width+2,h:m.data.height+2};s.push(v),i[p]=new L0(v,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(p)}},gg.prototype.patchUpdatedImages=function(e,i){for(var s in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[s],e.getImage(s),i),this.patchUpdatedImage(this.patternPositions[s],e.getImage(s),i)},gg.prototype.patchUpdatedImage=function(e,i,s){if(e&&i&&e.version!==i.version){e.version=i.version;var p=e.tl;s.update(i.data,void 0,{x:p[0],y:p[1]})}},yt("ImagePosition",L0),yt("ImageAtlas",gg);var pa={horizontal:1,vertical:2,horizontalOnly:3};function Yi(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}function P0(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$){var ie,te=Yi.fromFeature(e,m);R===pa.vertical&&te.verticalizePunctuation();var xe=No.processBidirectionalText,be=No.processStyledBidirectionalText;if(xe&&te.sections.length===1){ie=[];for(var Te=0,Me=xe(te.toString(),xx(te,P,v,i,p,F,Y));Te<Me.length;Te+=1){var Fe=Me[Te],Ye=new Yi;Ye.text=Fe,Ye.sections=te.sections;for(var it=0;it<Fe.length;it++)Ye.sectionIndex.push(0);ie.push(Ye)}}else if(be){ie=[];for(var ft=0,tt=be(te.text,te.sectionIndex,xx(te,P,v,i,p,F,Y));ft<tt.length;ft+=1){var gt=tt[ft],at=new Yi;at.text=gt[0],at.sectionIndex=gt[1],at.sections=te.sections,ie.push(at)}}else ie=function(Zt,ir){for(var Qt=[],At=Zt.text,Gt=0,kr=0,cn=ir;kr<cn.length;kr+=1){var fi=cn[kr];Qt.push(Zt.substring(Gt,fi)),Gt=fi}return Gt<At.length&&Qt.push(Zt.substring(Gt,At.length)),Qt}(te,xx(te,P,v,i,p,F,Y));var It=[],Nt={positionedLines:It,text:te.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:R,iconsInText:!1,verticalizable:!1};return function(Zt,ir,Qt,At,Gt,kr,cn,fi,jn,an,Cn){for(var Ur=0,Mi=-17,ii=0,mi=0,Co=M==="right"?1:M==="left"?0:.5,Ki=0,Bi=0,Io=Gt;Bi<Io.length;Bi+=1){var Yn=Io[Bi];Yn.trim();var Fi=Yn.getMaxScale(),Sn=24*(Fi-1),Kn={positionedGlyphs:[],lineOffset:0},pr=(Zt.positionedLines[Ki]=Kn).positionedGlyphs,xr=0;if(Yn.length()){for(var mr=0;mr<Yn.length();mr++){var or=Yn.getSection(mr),Vo=Yn.getSectionIndex(mr),sn=Yn.getCharCode(mr),Zs=0,Na=null,Gc=null,Ih=null,bg=24,zu=!(fi===pa.horizontal||!an&&!$m(sn)||an&&(D0[sn]||(Pl=sn,He.Arabic(Pl)||He["Arabic Supplement"](Pl)||He["Arabic Extended-A"](Pl)||He["Arabic Presentation Forms-A"](Pl)||He["Arabic Presentation Forms-B"](Pl))));if(or.imageName){var sf=At[or.imageName];if(!sf)continue;Ih=or.imageName,Zt.iconsInText=Zt.iconsInText||!0,Gc=sf.paddedRect;var ha=sf.displaySize;or.scale=24*or.scale/Cn,Zs=Sn+(24-ha[1]*or.scale),bg=(Na={width:ha[0],height:ha[1],left:1,top:-3,advance:zu?ha[1]:ha[0]}).advance;var Oa=zu?ha[0]*or.scale-24*Fi:ha[1]*or.scale-24*Fi;0<Oa&&xr<Oa&&(xr=Oa)}else{var Cg=Qt[or.fontStack],Hc=Cg&&Cg[sn];if(Hc&&Hc.rect)Gc=Hc.rect,Na=Hc.metrics;else{var Sg=ir[or.fontStack],lf=Sg&&Sg[sn];if(!lf)continue;Na=lf.metrics}Zs=24*(Fi-or.scale)}zu?(Zt.verticalizable=!0,pr.push({glyph:sn,imageName:Ih,x:Ur,y:Mi+Zs,vertical:zu,scale:or.scale,fontStack:or.fontStack,sectionIndex:Vo,metrics:Na,rect:Gc}),Ur+=bg*or.scale+jn):(pr.push({glyph:sn,imageName:Ih,x:Ur,y:Mi+Zs,vertical:zu,scale:or.scale,fontStack:or.fontStack,sectionIndex:Vo,metrics:Na,rect:Gc}),Ur+=Na.advance*or.scale+jn)}pr.length!==0&&(ii=Math.max(Ur-jn,ii),kP(pr,0,pr.length-1,Co,xr)),Ur=0;var kh=kr*Fi+xr;Kn.lineOffset=Math.max(xr,Sn),Mi+=kh,mi=Math.max(kh,mi),++Ki}else Mi+=kr,++Ki}var Pl,Wc=Mi- -17,Tg=wx(cn),Df=Tg.horizontalAlign,ip=Tg.verticalAlign;(function(Vg,qo,Eg,Yc,Ig,Px,G0){var H0,W0=(qo-Eg)*Yc;H0=Ig!==kr?-Px*ip+17:(-ip*G0+.5)*kr;for(var kg=0,Y0=Vg;kg<Y0.length;kg+=1)for(var uf=0,K0=Y0[kg].positionedGlyphs;uf<K0.length;uf+=1){var $0=K0[uf];$0.x+=W0,$0.y+=H0}})(Zt.positionedLines,Co,Df,ii,mi,Wc,Gt.length),Zt.top+=-ip*Wc,Zt.bottom=Zt.top+Wc,Zt.left+=-Df*ii,Zt.right=Zt.left+ii}(Nt,i,s,p,ie,w,S,R,P,U,$),!function(){for(var Zt=0,ir=It;Zt<ir.length;Zt+=1)if(ir[Zt].positionedGlyphs.length!==0)return;return 1}()&&Nt}Jd.forText=function(e,i){var s=new Jd;return s.scale=e||1,s.fontStack=i,s},Jd.forImage=function(e){var i=new Jd;return i.imageName=e,i},Yi.fromFeature=function(e,i){for(var s=new Yi,p=0;p<e.sections.length;p++){var m=e.sections[p];m.image?s.addImageSection(m):s.addTextSection(m,i)}return s},Yi.prototype.length=function(){return this.text.length},Yi.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Yi.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Yi.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Yi.prototype.verticalizePunctuation=function(){this.text=function(e){for(var i="",s=0;s<e.length;s++){var p=e.charCodeAt(s+1)||null,m=e.charCodeAt(s-1)||null;i+=p&&Xm(p)&&!fg[e[s+1]]||m&&Xm(m)&&!fg[e[s-1]]||!fg[e[s]]?e[s]:fg[e[s]]}return i}(this.text)},Yi.prototype.trim=function(){for(var e=0,i=0;i<this.text.length&&D0[this.text.charCodeAt(i)];i++)e++;for(var s=this.text.length,p=this.text.length-1;0<=p&&e<=p&&D0[this.text.charCodeAt(p)];p--)s--;this.text=this.text.substring(e,s),this.sectionIndex=this.sectionIndex.slice(e,s)},Yi.prototype.substring=function(e,i){var s=new Yi;return s.text=this.text.substring(e,i),s.sectionIndex=this.sectionIndex.slice(e,i),s.sections=this.sections,s},Yi.prototype.toString=function(){return this.text},Yi.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(i,s){return Math.max(i,e.sections[s].scale)},0)},Yi.prototype.addTextSection=function(e,i){this.text+=e.text,this.sections.push(Jd.forText(e.scale,e.fontStack||i));for(var s=this.sections.length-1,p=0;p<e.text.length;++p)this.sectionIndex.push(s)},Yi.prototype.addImageSection=function(e){var i=e.image?e.image.name:"";if(i.length!==0){var s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(Jd.forImage(i)),this.sectionIndex.push(this.sections.length-1)):nn("Reached maximum number of images 6401")}else nn("Can't add FormattedSection with an empty image.")},Yi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var D0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Uo={};function VS(e,i,s,p,m,v){if(i.imageName){var w=p[i.imageName];return w?w.displaySize[0]*i.scale*24/v+m:0}var S=s[i.fontStack],M=S&&S[e];return M?M.metrics.advance*i.scale+m:0}function qS(e,i,s,p){var m=Math.pow(e-i,2);return p?e<i?m/2:2*m:m+Math.abs(s)*s}function ZS(e,i,s,p,m,v){for(var w=null,S=qS(i,s,m,v),M=0,P=p;M<P.length;M+=1){var D=P[M],R=qS(i-D.x,s,m,v)+D.badness;R<=S&&(w=D,S=R)}return{index:e,x:i,priorBreak:w,badness:S}}function xx(e,i,s,p,m,v,w){if(v!=="point")return[];if(!e)return[];for(var S,M=[],P=function(be,Te,Me,Fe,Ye,it){for(var ft=0,tt=0;tt<be.length();tt++){var gt=be.getSection(tt);ft+=VS(be.getCharCode(tt),gt,Fe,Ye,Te,it)}return ft/Math.max(1,Math.ceil(ft/Me))}(e,i,s,p,m,w),D=0<=e.text.indexOf(""),R=0,U=0;U<e.length();U++){var F=e.getSection(U),Y=e.getCharCode(U);if(D0[Y]||(R+=VS(Y,F,p,m,i,w)),U<e.length()-1){var $=!((S=Y)<11904||!(He["Bopomofo Extended"](S)||He.Bopomofo(S)||He["CJK Compatibility Forms"](S)||He["CJK Compatibility Ideographs"](S)||He["CJK Compatibility"](S)||He["CJK Radicals Supplement"](S)||He["CJK Strokes"](S)||He["CJK Symbols and Punctuation"](S)||He["CJK Unified Ideographs Extension A"](S)||He["CJK Unified Ideographs"](S)||He["Enclosed CJK Letters and Months"](S)||He["Halfwidth and Fullwidth Forms"](S)||He.Hiragana(S)||He["Ideographic Description Characters"](S)||He["Kangxi Radicals"](S)||He["Katakana Phonetic Extensions"](S)||He.Katakana(S)||He["Vertical Forms"](S)||He["Yi Radicals"](S)||He["Yi Syllables"](S)));(Uo[Y]||$||F.imageName)&&M.push(ZS(U+1,R,P,M,(xe=void 0,xe=0,(ie=Y)===10&&(xe-=1e4),$&&D&&(xe+=150),ie!==40&&ie!==65288||(xe+=50),(te=e.getCharCode(U+1))!==41&&te!==65289||(xe+=50),xe),!1))}}var ie,te,xe;return function be(Te){return Te?be(Te.priorBreak).concat(Te.index):[]}(ZS(e.length(),R,P,M,0,!0))}function wx(e){var i=.5,s=.5;switch(e){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:i,verticalAlign:s}}function kP(e,i,s,p,m){if(p||m)for(var v=e[s],w=(e[s].x+v.metrics.advance*v.scale)*p,S=i;S<=s;S++)e[S].x-=w,e[S].y+=m}function GS(e,i,s,p,m,v){var w,S=e.image;if(S.content){var M=S.content,P=S.pixelRatio||1;w=[M[0]/P,M[1]/P,S.displaySize[0]-M[2]/P,S.displaySize[1]-M[3]/P]}var D,R,U,F,Y=i.left*v,$=i.right*v;R=s==="width"||s==="both"?(F=m[0]+Y-p[3],m[0]+$+p[1]):(F=m[0]+(Y+$-S.displaySize[0])/2)+S.displaySize[0];var ie=i.top*v,te=i.bottom*v;return U=s==="height"||s==="both"?(D=m[1]+ie-p[0],m[1]+te+p[2]):(D=m[1]+(ie+te-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:D,right:R,bottom:U,left:F,collisionPadding:w}}Uo[10]=!0,Uo[32]=!0,Uo[38]=!0,Uo[40]=!0,Uo[41]=!0,Uo[43]=!0,Uo[45]=!0,Uo[47]=!0,Uo[173]=!0,Uo[183]=!0,Uo[8203]=!0,Uo[8208]=!0,Uo[8211]=!0,Uo[8231]=!0;var yg,Qd=((yg=W)&&(vg.__proto__=yg),((vg.prototype=Object.create(yg&&yg.prototype)).constructor=vg).prototype.clone=function(){return new vg(this.x,this.y,this.angle,this.segment)},vg);function vg(e,i,s,p){yg.call(this,e,i),this.angle=s,p!==void 0&&(this.segment=p)}function bx(e,i){var s=i.expression;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Or(e+1))};if(s.kind==="source")return{kind:"source"};for(var p=s.zoomStops,m=s.interpolationType,v=0;v<p.length&&p[v]<=e;)v++;for(var w=v=Math.max(0,v-1);w<p.length&&p[w]<e+1;)w++;w=Math.min(p.length-1,w);var S=p[v],M=p[w];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:M,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:M,minSize:s.evaluate(new Or(S)),maxSize:s.evaluate(new Or(M)),interpolationType:m}}function HS(e,i,s){var p=i.uSize,m=s.lowerSize;return e.kind==="source"?m/128:e.kind==="composite"?_n(m/128,s.upperSize/128,i.uSizeT):p}function WS(e,i){var s=0,p=0;if(e.kind==="constant")p=e.layoutSize;else if(e.kind!=="source"){var m=e.interpolationType,v=m?pt(ci.interpolationFactor(m,i,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?p=_n(e.minSize,e.maxSize,v):s=v}return{uSizeT:s,uSize:p}}yt("Anchor",Qd);var MP=Object.freeze({__proto__:null,getSizeData:bx,evaluateSizeForFeature:HS,evaluateSizeForZoom:WS,SIZE_PACK_FACTOR:128});function YS(e,i,s,p,m){if(i.segment===void 0)return 1;for(var v=i,w=i.segment+1,S=0;-s/2<S;){if(--w<0)return;S-=e[w].dist(v),v=e[w]}S+=e[w].dist(e[w+1]),w++;for(var M=[],P=0;S<s/2;){var D=e[w],R=e[w+1];if(!R)return;var U=e[w-1].angleTo(D)-D.angleTo(R);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:S,angleDelta:U}),P+=U;S-M[0].distance>p;)P-=M.shift().angleDelta;if(m<P)return;w++,S+=D.dist(R)}return 1}function KS(e){for(var i=0,s=0;s<e.length-1;s++)i+=e[s].dist(e[s+1]);return i}function $S(e,i,s){return e?.6*i*s:0}function XS(e,i){return Math.max(e?e.right-e.left:0,i?i.right-i.left:0)}function AP(e,i,s,p,m,v){for(var w=$S(s,m,v),S=XS(s,p)*v,M=0,P=KS(e)/2,D=0;D<e.length-1;D++){var R=e[D],U=e[D+1],F=R.dist(U);if(P<M+F){var Y=(P-M)/F,$=_n(R.x,U.x,Y),ie=_n(R.y,U.y,Y),te=new Qd($,ie,U.angleTo(R),D);return te._round(),!w||YS(e,te,S,w,i)?te:void 0}M+=F}}function JS(e,i,s,p,m){for(var v=[],w=0;w<e.length;w++)for(var S=e[w],M=void 0,P=0;P<S.length-1;P++){var D=S[P],R=S[P+1];D.x<i&&R.x<i||(D.x<i?D=new W(i,D.y+(i-D.x)/(R.x-D.x)*(R.y-D.y))._round():R.x<i&&(R=new W(i,D.y+(i-D.x)/(R.x-D.x)*(R.y-D.y))._round()),D.y<s&&R.y<s||(D.y<s?D=new W(D.x+(s-D.y)/(R.y-D.y)*(R.x-D.x),s)._round():R.y<s&&(R=new W(D.x+(s-D.y)/(R.y-D.y)*(R.x-D.x),s)._round()),D.x>=p&&R.x>=p||(D.x>=p?D=new W(p,D.y+(p-D.x)/(R.x-D.x)*(R.y-D.y))._round():R.x>=p&&(R=new W(p,D.y+(p-D.x)/(R.x-D.x)*(R.y-D.y))._round()),D.y>=m&&R.y>=m||(D.y>=m?D=new W(D.x+(m-D.y)/(R.y-D.y)*(R.x-D.x),m)._round():R.y>=m&&(R=new W(D.x+(m-D.y)/(R.y-D.y)*(R.x-D.x),m)._round()),M&&D.equals(M[M.length-1])||v.push(M=[D]),M.push(R)))))}return v}function QS(e,i,s,p){function m(At,Gt){return At+Gt[1]-Gt[0]}var v=[],w=e.image,S=w.pixelRatio,M=w.paddedRect.w-2,P=w.paddedRect.h-2,D=e.right-e.left,R=e.bottom-e.top,U=w.stretchX||[[0,M]],F=w.stretchY||[[0,P]],Y=U.reduce(m,0),$=F.reduce(m,0),ie=M-Y,te=P-$,xe=0,be=Y,Te=0,Me=$,Fe=0,Ye=ie,it=0,ft=te;if(w.content&&p){var tt=w.content;xe=z0(U,0,tt[0]),Te=z0(F,0,tt[1]),be=z0(U,tt[0],tt[2]),Me=z0(F,tt[1],tt[3]),Fe=tt[0]-xe,it=tt[1]-Te,Ye=tt[2]-tt[0]-be,ft=tt[3]-tt[1]-Me}function gt(At,Gt,kr,cn){var fi=N0(At.stretch-xe,be,D,e.left),jn=O0(At.fixed-Fe,Ye,At.stretch,Y),an=N0(Gt.stretch-Te,Me,R,e.top),Cn=O0(Gt.fixed-it,ft,Gt.stretch,$),Ur=N0(kr.stretch-xe,be,D,e.left),Mi=O0(kr.fixed-Fe,Ye,kr.stretch,Y),ii=N0(cn.stretch-Te,Me,R,e.top),mi=O0(cn.fixed-it,ft,cn.stretch,$),Co=new W(fi,an),Ki=new W(Ur,an),Bi=new W(Ur,ii),Io=new W(fi,ii),Yn=new W(jn/S,Cn/S),Fi=new W(Mi/S,mi/S),Sn=i*Math.PI/180;if(Sn){var Kn=Math.sin(Sn),pr=Math.cos(Sn),xr=[pr,-Kn,Kn,pr];Co._matMult(xr),Ki._matMult(xr),Io._matMult(xr),Bi._matMult(xr)}var mr=At.stretch+At.fixed,or=Gt.stretch+Gt.fixed;return{tl:Co,tr:Ki,bl:Io,br:Bi,tex:{x:w.paddedRect.x+1+mr,y:w.paddedRect.y+1+or,w:kr.stretch+kr.fixed-mr,h:cn.stretch+cn.fixed-or},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yn,pixelOffsetBR:Fi,minFontScaleX:Ye/S/D,minFontScaleY:ft/S/R,isSDF:s}}if(p&&(w.stretchX||w.stretchY))for(var at=e4(U,ie,Y),It=e4(F,te,$),Nt=0;Nt<at.length-1;Nt++)for(var Zt=at[Nt],ir=at[Nt+1],Qt=0;Qt<It.length-1;Qt++)v.push(gt(Zt,It[Qt],ir,It[Qt+1]));else v.push(gt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:1+M},{fixed:0,stretch:1+P}));return v}function z0(e,i,s){for(var p=0,m=0,v=e;m<v.length;m+=1){var w=v[m];p+=Math.max(i,Math.min(s,w[1]))-Math.max(i,Math.min(s,w[0]))}return p}function e4(e,i,s){for(var p=[{fixed:-1,stretch:0}],m=0,v=e;m<v.length;m+=1){var w=v[m],S=w[0],M=w[1],P=p[p.length-1];p.push({fixed:S-P.stretch,stretch:P.stretch}),p.push({fixed:S-P.stretch,stretch:P.stretch+(M-S)})}return p.push({fixed:i+1,stretch:s}),p}function N0(e,i,s,p){return e/i*s+p}function O0(e,i,s,p){return e-i*s/p}function R0(e,i,s,p,m,v,w,S,M,P){if(this.boxStartIndex=e.length,M){var D=v.top,R=v.bottom,U=v.collisionPadding;U&&(D-=U[1],R+=U[3]);var F=R-D;0<F&&(F=Math.max(10,F),this.circleDiameter=F)}else{var Y=v.top*w-S,$=v.bottom*w+S,ie=v.left*w-S,te=v.right*w+S,xe=v.collisionPadding;if(xe&&(ie-=xe[0]*w,Y-=xe[1]*w,te+=xe[2]*w,$+=xe[3]*w),P){var be=new W(ie,Y),Te=new W(te,Y),Me=new W(ie,$),Fe=new W(te,$),Ye=P*Math.PI/180;be._rotate(Ye),Te._rotate(Ye),Me._rotate(Ye),Fe._rotate(Ye),ie=Math.min(be.x,Te.x,Me.x,Fe.x),te=Math.max(be.x,Te.x,Me.x,Fe.x),Y=Math.min(be.y,Te.y,Me.y,Fe.y),$=Math.max(be.y,Te.y,Me.y,Fe.y)}e.emplaceBack(i.x,i.y,ie,Y,te,$,s,p,m)}this.boxEndIndex=e.length}var ef=function(e,i){if(e===void 0&&(e=[]),i===void 0&&(i=LP),this.data=e,this.length=this.data.length,this.compare=i,0<this.length)for(var s=(this.length>>1)-1;0<=s;s--)this._down(s)};function LP(e,i){return e<i?-1:i<e?1:0}function PP(e,i,s){i===void 0&&(i=1),s===void 0&&(s=!1);for(var p=1/0,m=1/0,v=-1/0,w=-1/0,S=e[0],M=0;M<S.length;M++){var P=S[M];(!M||P.x<p)&&(p=P.x),(!M||P.y<m)&&(m=P.y),(!M||P.x>v)&&(v=P.x),(!M||P.y>w)&&(w=P.y)}var D=Math.min(v-p,w-m),R=D/2,U=new ef([],DP);if(D===0)return new W(p,m);for(var F=p;F<v;F+=D)for(var Y=m;Y<w;Y+=D)U.push(new tf(F+R,Y+R,R,e));for(var $=function(xe){for(var be=0,Te=0,Me=0,Fe=xe[0],Ye=0,it=Fe.length,ft=it-1;Ye<it;ft=Ye++){var tt=Fe[Ye],gt=Fe[ft],at=tt.x*gt.y-gt.x*tt.y;Te+=(tt.x+gt.x)*at,Me+=(tt.y+gt.y)*at,be+=3*at}return new tf(Te/be,Me/be,0,xe)}(e),ie=U.length;U.length;){var te=U.pop();(te.d>$.d||!$.d)&&($=te,s&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,ie)),te.max-$.d<=i||(U.push(new tf(te.p.x-(R=te.h/2),te.p.y-R,R,e)),U.push(new tf(te.p.x+R,te.p.y-R,R,e)),U.push(new tf(te.p.x-R,te.p.y+R,R,e)),U.push(new tf(te.p.x+R,te.p.y+R,R,e)),ie+=4)}return s&&(console.log("num probes: "+ie),console.log("best distance: "+$.d)),$.p}function DP(e,i){return i.max-e.max}function tf(e,i,s,p){this.p=new W(e,i),this.h=s,this.d=function(m,v){for(var w=!1,S=1/0,M=0;M<v.length;M++)for(var P=v[M],D=0,R=P.length,U=R-1;D<R;U=D++){var F=P[D],Y=P[U];F.y>m.y!=Y.y>m.y&&m.x<(Y.x-F.x)*(m.y-F.y)/(Y.y-F.y)+F.x&&(w=!w),S=Math.min(S,zt(m,F,Y))}return(w?1:-1)*Math.sqrt(S)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}ef.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},ef.prototype.pop=function(){if(this.length!==0){var e=this.data[0],i=this.data.pop();return this.length--,0<this.length&&(this.data[0]=i,this._down(0)),e}},ef.prototype.peek=function(){return this.data[0]},ef.prototype._up=function(e){for(var i=this.data,s=this.compare,p=i[e];0<e;){var m=e-1>>1,v=i[m];if(0<=s(p,v))break;i[e]=v,e=m}i[e]=p},ef.prototype._down=function(e){for(var i=this.data,s=this.compare,p=this.length>>1,m=i[e];e<p;){var v=1+(e<<1),w=i[v],S=v+1;if(S<this.length&&s(i[S],w)<0&&(w=i[v=S]),0<=s(w,m))break;i[e]=w,e=v}i[e]=m};var Cx=Number.POSITIVE_INFINITY;function t4(e,i){return i[1]!==Cx?function(s,p,m){var v=0,w=0;switch(p=Math.abs(p),m=Math.abs(m),s){case"top-right":case"top-left":case"top":w=m-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-m}switch(s){case"top-right":case"bottom-right":case"right":v=-p;break;case"top-left":case"bottom-left":case"left":v=p}return[v,w]}(e,i[0],i[1]):function(s,p){var m=0,v=0;p<0&&(p=0);var w=p/Math.sqrt(2);switch(s){case"top-right":case"top-left":v=w-7;break;case"bottom-right":case"bottom-left":v=7-w;break;case"bottom":v=7-p;break;case"top":v=p-7}switch(s){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=p;break;case"right":m=-p}return[m,v]}(e,i[0])}function Sx(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function r4(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y){var $=function(Te,Me,Fe,Ye,it,ft,tt){for(var gt=Fe.layout.get("text-rotate").evaluate(it,{})*Math.PI/180,at=[],It=0,Nt=Te.positionedLines;It<Nt.length;It+=1)for(var Zt=Nt[It],ir=0,Qt=Zt.positionedGlyphs;ir<Qt.length;ir+=1){var At=Qt[ir];if(At.rect){var Gt=At.rect||{},kr=4,cn=!0,fi=1,jn=0,an=(Ye||tt)&&At.vertical,Cn=At.metrics.advance*At.scale/2;if(tt&&Te.verticalizable&&(jn=Zt.lineOffset/2-(At.imageName?-(24-At.metrics.width*At.scale)/2:24*(At.scale-1))),At.imageName){var Ur=ft[At.imageName];cn=Ur.sdf,kr=1/(fi=Ur.pixelRatio)}var Mi=Ye?[At.x+Cn,At.y]:[0,0],ii=Ye?[0,0]:[At.x+Cn+Me[0],At.y+Me[1]-jn],mi=[0,0];an&&(mi=ii,ii=[0,0]);var Co=(At.metrics.left-kr)*At.scale-Cn+ii[0],Ki=(-At.metrics.top-kr)*At.scale+ii[1],Bi=Co+Gt.w*At.scale/fi,Io=Ki+Gt.h*At.scale/fi,Yn=new W(Co,Ki),Fi=new W(Bi,Ki),Sn=new W(Co,Io),Kn=new W(Bi,Io);if(an){var pr=new W(-Cn,17+Cn),xr=-Math.PI/2,mr=12-Cn,or=new W(22-mr,-(At.imageName?mr:0)),Vo=new(Function.prototype.bind.apply(W,[null].concat(mi)));Yn._rotateAround(xr,pr)._add(or)._add(Vo),Fi._rotateAround(xr,pr)._add(or)._add(Vo),Sn._rotateAround(xr,pr)._add(or)._add(Vo),Kn._rotateAround(xr,pr)._add(or)._add(Vo)}if(gt){var sn=Math.sin(gt),Zs=Math.cos(gt),Na=[Zs,-sn,sn,Zs];Yn._matMult(Na),Fi._matMult(Na),Sn._matMult(Na),Kn._matMult(Na)}var Gc=new W(0,0),Ih=new W(0,0);at.push({tl:Yn,tr:Fi,bl:Sn,br:Kn,tex:Gt,writingMode:Te.writingMode,glyphOffset:Mi,sectionIndex:At.sectionIndex,isSDF:cn,pixelOffsetTL:Gc,pixelOffsetBR:Ih,minFontScaleX:0,minFontScaleY:0})}}return at}(s,S,m,v,w,p,e.allowVerticalPlacement),ie=e.textSizeData,te=null;ie.kind==="source"?32640<(te=[128*m.layout.get("text-size").evaluate(w,{})])[0]&&nn(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ie.kind==="composite"&&(32640<(te=[128*F.compositeTextSizes[0].evaluate(w,{},Y),128*F.compositeTextSizes[1].evaluate(w,{},Y)])[0]||32640<te[1])&&nn(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,$,te,S,v,w,P,i,M.lineStartIndex,M.lineLength,U,Y);for(var xe=0,be=D;xe<be.length;xe+=1)R[be[xe]]=e.text.placedSymbolArray.length-1;return 4*$.length}function n4(e){for(var i in e)return e[i];return null}function zP(e,i,s,p){var m=e.compareText;if(i in m){for(var v=m[i],w=v.length-1;0<=w;w--)if(p.dist(v[w])<s)return 1}else m[i]=[];return m[i].push(p),0}var NP=Yd.VectorTileFeature.types,OP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function B0(e,i,s,p,m,v,w,S,M,P,D,R,U){var F=S?Math.min(32640,Math.round(S[0])):0,Y=S?Math.min(32640,Math.round(S[1])):0;e.emplaceBack(i,s,Math.round(32*p),Math.round(32*m),v,w,(F<<1)+(M?1:0),Y,16*P,16*D,256*R,256*U)}function Tx(e,i,s){e.emplaceBack(i.x,i.y,s),e.emplaceBack(i.x,i.y,s),e.emplaceBack(i.x,i.y,s),e.emplaceBack(i.x,i.y,s)}function RP(e){for(var i=0,s=e.sections;i<s.length;i+=1)if(w0(s[i].text))return 1}function rf(e){this.layoutVertexArray=new xo,this.indexArray=new qn,this.programConfigurations=e,this.segments=new bn,this.dynamicLayoutVertexArray=new la,this.opacityVertexArray=new fu,this.placedSymbolArray=new Bc}function _g(e,i,s){this.layoutVertexArray=new e,this.layoutAttributes=i,this.indexArray=new s,this.segments=new bn,this.collisionVertexArray=new bl}function Ir(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xi([]),this.placementViewportMatrix=Xi([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bx(this.zoom,i["text-size"]),this.iconSizeData=bx(this.zoom,i["icon-size"]);var s=this.layers[0].layout,p=s.get("symbol-sort-key"),m=s.get("symbol-z-order");this.sortFeaturesByKey=m!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&(s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement")),s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(function(v){return pa[v]})),this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id}),this.sourceID=e.sourceID}function nf(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Cr,this.defaultValue=e}rf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},rf.prototype.upload=function(e,i,s,p){this.isEmpty()||(s&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pP.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,hP.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,OP,!0),this.opacityVertexBuffer.itemSize=1),(s||p)&&this.programConfigurations.upload(e))},rf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},yt("SymbolBuffers",rf),_g.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,dP.members,!0)},_g.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},yt("CollisionBuffers",_g),Ir.prototype.createArrays=function(){this.text=new rf(new Ve(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new rf(new Ve(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new Bd,this.lineVertexArray=new jo,this.symbolInstances=new bu},Ir.prototype.calculateGlyphDependencies=function(e,i,s,p,m){for(var v=0;v<e.length;v++)if(i[e.charCodeAt(v)]=!0,(s||p)&&m){var w=fg[e.charAt(v)];w&&(i[w.charCodeAt(0)]=!0)}},Ir.prototype.populate=function(e,i,s){var p=this.layers[0],m=p.layout,v=m.get("text-font"),w=m.get("text-field"),S=m.get("icon-image"),M=(w.value.kind!=="constant"||w.value.value instanceof Si&&!w.value.value.isEmpty()||0<w.value.value.toString().length)&&(v.value.kind!=="constant"||0<v.value.value.length),P=S.value.kind!=="constant"||!!S.value.value||0<Object.keys(S.parameters).length,D=m.get("symbol-sort-key");if(this.features=[],M||P){for(var R=i.iconDependencies,U=i.glyphDependencies,F=i.availableImages,Y=new Or(this.zoom),$=0,ie=e;$<ie.length;$+=1){var te=ie[$],xe=te.feature,be=te.id,Te=te.index,Me=te.sourceLayerIndex,Fe=p._featureFilter.needGeometry,Ye={type:xe.type,id:be,properties:xe.properties,geometry:Fe?ht(xe):[]};if(p._featureFilter.filter(Y,Ye,s)){Fe||(Ye.geometry=ht(xe));var it=void 0;if(M){var ft=p.getValueAndResolveTokens("text-field",Ye,s,F),tt=Si.factory(ft);RP(tt)&&(this.hasRTLText=!0),(!this.hasRTLText||oh()==="unavailable"||this.hasRTLText&&No.isParsed())&&(it=mP(tt,p,Ye))}var gt=void 0;if(P){var at=p.getValueAndResolveTokens("icon-image",Ye,s,F);gt=at instanceof yo?at:yo.fromString(at)}if(it||gt){var It=this.sortFeaturesByKey?D.evaluate(Ye,{},s):void 0,Nt={id:be,text:it,icon:gt,index:Te,sourceLayerIndex:Me,geometry:ht(xe),properties:xe.properties,type:NP[xe.type],sortKey:It};if(this.features.push(Nt),gt&&(R[gt.name]=!0),it){var Zt=v.evaluate(Ye,{},s).join(","),ir=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(pa.vertical);for(var Qt=0,At=it.sections;Qt<At.length;Qt+=1){var Gt=At[Qt];if(Gt.image)R[Gt.image.name]=!0;else{var kr=Mc(it.toString()),cn=Gt.fontStack||Zt,fi=U[cn]=U[cn]||{};this.calculateGlyphDependencies(Gt.text,fi,ir,this.allowVerticalPlacement,kr)}}}}}}m.get("symbol-placement")==="line"&&(this.features=function(jn){var an={},Cn={},Ur=[],Mi=0;function ii(mr){Ur.push(jn[mr]),Mi++}function mi(mr,or,Vo){var sn=Cn[mr];return delete Cn[mr],Cn[or]=sn,Ur[sn].geometry[0].pop(),Ur[sn].geometry[0]=Ur[sn].geometry[0].concat(Vo[0]),sn}function Co(mr,or,Vo){var sn=an[or];return delete an[or],an[mr]=sn,Ur[sn].geometry[0].shift(),Ur[sn].geometry[0]=Vo[0].concat(Ur[sn].geometry[0]),sn}function Ki(mr,or,Vo){var sn=Vo?or[0][or[0].length-1]:or[0][0];return mr+":"+sn.x+":"+sn.y}for(var Bi=0;Bi<jn.length;Bi++){var Io=jn[Bi],Yn=Io.geometry,Fi=Io.text?Io.text.toString():null;if(Fi){var Sn=Ki(Fi,Yn),Kn=Ki(Fi,Yn,!0);if(Sn in Cn&&Kn in an&&Cn[Sn]!==an[Kn]){var pr=Co(Sn,Kn,Yn),xr=mi(Sn,Kn,Ur[pr].geometry);delete an[Sn],delete Cn[Kn],Cn[Ki(Fi,Ur[xr].geometry,!0)]=xr,Ur[pr].geometry=null}else Sn in Cn?mi(Sn,Kn,Yn):Kn in an?Co(Sn,Kn,Yn):(ii(Bi),an[Sn]=Mi-1,Cn[Kn]=Mi-1)}else ii(Bi)}return Ur.filter(function(mr){return mr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(jn,an){return jn.sortKey-an.sortKey})}},Ir.prototype.update=function(e,i,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,i,this.layers,s),this.icon.programConfigurations.updatePaintArrays(e,i,this.layers,s))},Ir.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ir.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ir.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ir.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ir.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ir.prototype.addToLineVertexArray=function(e,i){var s=this.lineVertexArray.length;if(e.segment!==void 0){for(var p=e.dist(i[e.segment+1]),m=e.dist(i[e.segment]),v={},w=e.segment+1;w<i.length;w++)v[w]={x:i[w].x,y:i[w].y,tileUnitDistanceFromAnchor:p},w<i.length-1&&(p+=i[w+1].dist(i[w]));for(var S=e.segment||0;0<=S;S--)v[S]={x:i[S].x,y:i[S].y,tileUnitDistanceFromAnchor:m},0<S&&(m+=i[S-1].dist(i[S]));for(var M=0;M<i.length;M++){var P=v[M];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},Ir.prototype.addSymbols=function(e,i,s,p,m,v,w,S,M,P,D,R){for(var U=e.indexArray,F=e.layoutVertexArray,Y=e.segments.prepareSegment(4*i.length,F,U,v.sortKey),$=this.glyphOffsetArray.length,ie=Y.vertexLength,te=this.allowVerticalPlacement&&w===pa.vertical?Math.PI/2:0,xe=v.text&&v.text.sections,be=0;be<i.length;be++){var Te=i[be],Me=Te.tl,Fe=Te.tr,Ye=Te.bl,it=Te.br,ft=Te.tex,tt=Te.pixelOffsetTL,gt=Te.pixelOffsetBR,at=Te.minFontScaleX,It=Te.minFontScaleY,Nt=Te.glyphOffset,Zt=Te.isSDF,ir=Te.sectionIndex,Qt=Y.vertexLength,At=Nt[1];B0(F,S.x,S.y,Me.x,At+Me.y,ft.x,ft.y,s,Zt,tt.x,tt.y,at,It),B0(F,S.x,S.y,Fe.x,At+Fe.y,ft.x+ft.w,ft.y,s,Zt,gt.x,tt.y,at,It),B0(F,S.x,S.y,Ye.x,At+Ye.y,ft.x,ft.y+ft.h,s,Zt,tt.x,gt.y,at,It),B0(F,S.x,S.y,it.x,At+it.y,ft.x+ft.w,ft.y+ft.h,s,Zt,gt.x,gt.y,at,It),Tx(e.dynamicLayoutVertexArray,S,te),U.emplaceBack(Qt,Qt+1,Qt+2),U.emplaceBack(Qt+1,Qt+2,Qt+3),Y.vertexLength+=4,Y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Nt[0]),be!==i.length-1&&ir===i[be+1].sectionIndex||e.programConfigurations.populatePaintArrays(F.length,v,v.index,{},R,xe&&xe[ir])}e.placedSymbolArray.emplaceBack(S.x,S.y,$,this.glyphOffsetArray.length-$,ie,M,P,S.segment,s?s[0]:0,s?s[1]:0,p[0],p[1],w,0,!1,0,D)},Ir.prototype._addCollisionDebugVertex=function(e,i,s,p,m,v){return i.emplaceBack(0,0),e.emplaceBack(s.x,s.y,p,m,Math.round(v.x),Math.round(v.y))},Ir.prototype.addCollisionDebugVertices=function(e,i,s,p,m,v,w){var S=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),M=S.vertexLength,P=m.layoutVertexArray,D=m.collisionVertexArray,R=w.anchorX,U=w.anchorY;this._addCollisionDebugVertex(P,D,v,R,U,new W(e,i)),this._addCollisionDebugVertex(P,D,v,R,U,new W(s,i)),this._addCollisionDebugVertex(P,D,v,R,U,new W(s,p)),this._addCollisionDebugVertex(P,D,v,R,U,new W(e,p)),S.vertexLength+=4;var F=m.indexArray;F.emplaceBack(M,M+1),F.emplaceBack(M+1,M+2),F.emplaceBack(M+2,M+3),F.emplaceBack(M+3,M),S.primitiveLength+=4},Ir.prototype.addDebugCollisionBoxes=function(e,i,s,p){for(var m=e;m<i;m++){var v=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,p?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,s)}},Ir.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _g(mu,NS.members,Fs),this.iconCollisionBox=new _g(mu,NS.members,Fs);for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},Ir.prototype._deserializeCollisionBoxesForSymbol=function(e,i,s,p,m,v,w,S,M){for(var P={},D=i;D<s;D++){var R=e.get(D);P.textBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},P.textFeatureIndex=R.featureIndex;break}for(var U=p;U<m;U++){var F=e.get(U);P.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},P.verticalTextFeatureIndex=F.featureIndex;break}for(var Y=v;Y<w;Y++){var $=e.get(Y);P.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},P.iconFeatureIndex=$.featureIndex;break}for(var ie=S;ie<M;ie++){var te=e.get(ie);P.verticalIconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},P.verticalIconFeatureIndex=te.featureIndex;break}return P},Ir.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var s=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},Ir.prototype.hasTextData=function(){return 0<this.text.segments.get().length},Ir.prototype.hasIconData=function(){return 0<this.icon.segments.get().length},Ir.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ir.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length},Ir.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length},Ir.prototype.addIndicesForPlacedSymbol=function(e,i){for(var s=e.placedSymbolArray.get(i),p=s.vertexStartIndex+4*s.numGlyphs,m=s.vertexStartIndex;m<p;m+=4)e.indexArray.emplaceBack(m,m+1,m+2),e.indexArray.emplaceBack(m+1,m+2,m+3)},Ir.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var i=Math.sin(e),s=Math.cos(e),p=[],m=[],v=[],w=0;w<this.symbolInstances.length;++w){v.push(w);var S=this.symbolInstances.get(w);p.push(0|Math.round(i*S.anchorX+s*S.anchorY)),m.push(S.featureIndex)}return v.sort(function(M,P){return p[M]-p[P]||m[P]-m[M]}),v},Ir.prototype.addToSortKeyRanges=function(e,i){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===i?s.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Ir.prototype.sortFeatures=function(e){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,p=this.symbolInstanceIndexes;s<p.length;s+=1){var m=this.symbolInstances.get(p[s]);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(function(v,w,S){0<=v&&S.indexOf(v)===w&&i.addIndicesForPlacedSymbol(i.text,v)}),0<=m.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),0<=m.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),0<=m.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},yt("SymbolBucket",Ir,{omit:["layers","collisionBoxArray","features","compareText"]}),Ir.MAX_GLYPHS=65535,Ir.addDynamicAttributes=Tx;var BP=new _o({"symbol-placement":new bt(ce.layout_symbol["symbol-placement"]),"symbol-spacing":new bt(ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bt(ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Lt(ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new bt(ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new bt(ce.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new bt(ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new bt(ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bt(ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new Lt(ce.layout_symbol["icon-size"]),"icon-text-fit":new bt(ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bt(ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new Lt(ce.layout_symbol["icon-image"]),"icon-rotate":new Lt(ce.layout_symbol["icon-rotate"]),"icon-padding":new bt(ce.layout_symbol["icon-padding"]),"icon-keep-upright":new bt(ce.layout_symbol["icon-keep-upright"]),"icon-offset":new Lt(ce.layout_symbol["icon-offset"]),"icon-anchor":new Lt(ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new bt(ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bt(ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bt(ce.layout_symbol["text-rotation-alignment"]),"text-field":new Lt(ce.layout_symbol["text-field"]),"text-font":new Lt(ce.layout_symbol["text-font"]),"text-size":new Lt(ce.layout_symbol["text-size"]),"text-max-width":new Lt(ce.layout_symbol["text-max-width"]),"text-line-height":new bt(ce.layout_symbol["text-line-height"]),"text-letter-spacing":new Lt(ce.layout_symbol["text-letter-spacing"]),"text-justify":new Lt(ce.layout_symbol["text-justify"]),"text-radial-offset":new Lt(ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new bt(ce.layout_symbol["text-variable-anchor"]),"text-anchor":new Lt(ce.layout_symbol["text-anchor"]),"text-max-angle":new bt(ce.layout_symbol["text-max-angle"]),"text-writing-mode":new bt(ce.layout_symbol["text-writing-mode"]),"text-rotate":new Lt(ce.layout_symbol["text-rotate"]),"text-padding":new bt(ce.layout_symbol["text-padding"]),"text-keep-upright":new bt(ce.layout_symbol["text-keep-upright"]),"text-transform":new Lt(ce.layout_symbol["text-transform"]),"text-offset":new Lt(ce.layout_symbol["text-offset"]),"text-allow-overlap":new bt(ce.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new bt(ce.layout_symbol["text-ignore-placement"]),"text-optional":new bt(ce.layout_symbol["text-optional"])}),Ex={paint:new _o({"icon-opacity":new Lt(ce.paint_symbol["icon-opacity"]),"icon-color":new Lt(ce.paint_symbol["icon-color"]),"icon-halo-color":new Lt(ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new Lt(ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Lt(ce.paint_symbol["icon-halo-blur"]),"icon-translate":new bt(ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new bt(ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new Lt(ce.paint_symbol["text-opacity"]),"text-color":new Lt(ce.paint_symbol["text-color"],{runtimeType:Ci,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new Lt(ce.paint_symbol["text-halo-color"]),"text-halo-width":new Lt(ce.paint_symbol["text-halo-width"]),"text-halo-blur":new Lt(ce.paint_symbol["text-halo-blur"]),"text-translate":new bt(ce.paint_symbol["text-translate"]),"text-translate-anchor":new bt(ce.paint_symbol["text-translate-anchor"])}),layout:BP};function Sh(e,i,s,p){this.context=e,this.format=s,this.texture=e.gl.createTexture(),this.update(i,p)}nf.prototype.evaluate=function(e){if(e.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(e.formattedSection))return i.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},nf.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},nf.prototype.outputDefined=function(){return!1},nf.prototype.serialize=function(){return null},yt("FormatSectionOverride",nf,{omit:["defaultValue"]});var F0,j0,U0,xg,FP=(za.__proto__=xg=Ma,((za.prototype=Object.create(xg&&xg.prototype)).constructor=za).prototype.recalculate=function(e,i){if(xg.prototype.recalculate.call(this,e,i),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var s=this.layout.get("text-writing-mode");if(s){for(var p=[],m=0,v=s;m<v.length;m+=1){var w=v[m];p.indexOf(w)<0&&p.push(w)}this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},za.prototype.getValueAndResolveTokens=function(e,i,s,p){var m,v=this.layout.get(e).evaluate(i,{},s,p),w=this._unevaluatedLayout._values[e];return w.isDataDriven()||Cc(w.value)||!v?v:(m=i.properties,v.replace(/{([^{}]+)}/g,function(S,M){return M in m?String(m[M]):""}))},za.prototype.createBucket=function(e){return new Ir(e)},za.prototype.queryRadius=function(){return 0},za.prototype.queryIntersectsFeature=function(){return!1},za.prototype._setPaintOverrides=function(){for(var e=0,i=Ex.paint.overridableProperties;e<i.length;e+=1){var s=i[e];if(za.hasPaintOverride(this.layout,s)){var p,m=this.paint.get(s),v=new nf(m),w=new bc(v,m.property.specification);p=m.value.kind==="constant"||m.value.kind==="source"?new gl("source",w):new Sc("composite",w,m.value.zoomStops,m.value._interpolationType),this.paint._values[s]=new Oo(m.property,p,m.parameters)}}},za.prototype._handleOverridablePaintPropertyUpdate=function(e,i,s){return!(!this.layout||i.isDataDriven()||s.isDataDriven())&&za.hasPaintOverride(this.layout,e)},za.hasPaintOverride=function(e,i){function s(M){for(var P=0,D=M;P<D.length;P+=1)if(m.overrides&&m.overrides.hasOverride(D[P]))return v=!0,0}var p=e.get("text-field"),m=Ex.paint.properties[i],v=!1;if(p.value.kind==="constant"&&p.value.value instanceof Si)s(p.value.value.sections);else if(p.value.kind==="source"){var w=function(M){v||(M instanceof Ea&&ti(M.value)===Wr?s(M.value.sections):M instanceof ea?s(M.sections):M.eachChild(w))},S=p.value;S._styleExpression&&w(S._styleExpression.expression)}return v},za),jP={paint:new _o({"background-color":new bt(ce.paint_background["background-color"]),"background-pattern":new xl(ce.paint_background["background-pattern"]),"background-opacity":new bt(ce.paint_background["background-opacity"])})},UP=(kx.__proto__=U0=Ma,(kx.prototype=Object.create(U0&&U0.prototype)).constructor=kx),VP={paint:new _o({"raster-opacity":new bt(ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new bt(ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bt(ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bt(ce.paint_raster["raster-brightness-max"]),"raster-saturation":new bt(ce.paint_raster["raster-saturation"]),"raster-contrast":new bt(ce.paint_raster["raster-contrast"]),"raster-resampling":new bt(ce.paint_raster["raster-resampling"]),"raster-fade-duration":new bt(ce.paint_raster["raster-fade-duration"])})},qP=(Ix.__proto__=j0=Ma,(Ix.prototype=Object.create(j0&&j0.prototype)).constructor=Ix),ZP=(qs.__proto__=F0=Ma,((qs.prototype=Object.create(F0&&F0.prototype)).constructor=qs).prototype.is3D=function(){return this.implementation.renderingMode==="3d"},qs.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},qs.prototype.recalculate=function(){},qs.prototype.updateTransitions=function(){},qs.prototype.hasTransition=function(){},qs.prototype.serialize=function(){},qs.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},qs.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},qs),GP={circle:_h,heatmap:wh,hillshade:bh,fill:XL,"fill-extrusion":oP,line:cP,symbol:FP,background:UP,raster:qP},i4=ne.HTMLImageElement,o4=ne.HTMLCanvasElement,a4=ne.HTMLVideoElement,s4=ne.ImageData,V0=ne.ImageBitmap;function qs(e){F0.call(this,e,{}),this.implementation=e}function Ix(e){j0.call(this,e,VP)}function kx(e){U0.call(this,e,jP)}function za(e){xg.call(this,e,Ex)}function Mx(e){var i=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})}function of(e,i,s){this.target=e,this.parent=i,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},rn(["receive","process"],this),this.invoker=new Mx(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=lc()?e:ne}function l4(e,i,s){var p=2*Math.PI*6378137/256/Math.pow(2,s);return[e*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}function Hn(e,i){e&&(i?this.setSouthWest(e).setNorthEast(i):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}Sh.prototype.update=function(e,i,s){var p=e.width,m=e.height,v=!(this.size&&this.size[0]===p&&this.size[1]===m||s),w=this.context,S=w.gl;if(this.useMipmap=Boolean(i&&i.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!i||i.premultiply!==!1)),v)this.size=[p,m],e instanceof i4||e instanceof o4||e instanceof a4||e instanceof s4||V0&&e instanceof V0?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,p,m,0,this.format,S.UNSIGNED_BYTE,e.data);else{var M=s||{x:0,y:0},P=M.x,D=M.y;e instanceof i4||e instanceof o4||e instanceof a4||e instanceof s4||V0&&e instanceof V0?S.texSubImage2D(S.TEXTURE_2D,0,P,D,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,P,D,p,m,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},Sh.prototype.bind=function(e,i,s){var p=this.context.gl;p.bindTexture(p.TEXTURE_2D,this.texture),s!==p.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=p.LINEAR),e!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,e),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,s||e),this.filter=e),i!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,i),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,i),this.wrap=i)},Sh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Sh.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},Mx.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Mx.prototype.remove=function(){delete this._channel,this._callback=function(){}},of.prototype.send=function(e,i,s,p,m){var v=this;m===void 0&&(m=!1);var w=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[w]=s);var S=Op(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:e,hasCallback:!!s,targetMapId:p,mustQueue:m,sourceMapId:this.mapId,data:nh(i,S)},S),{cancel:function(){s&&delete v.callbacks[w],v.target.postMessage({id:w,type:"<cancel>",targetMapId:p,sourceMapId:v.mapId})}}},of.prototype.receive=function(e){var i=e.data,s=i.id;if(s&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[s];var p=this.cancelCallbacks[s];delete this.cancelCallbacks[s],p&&p()}else lc()||i.mustQueue?(this.tasks[s]=i,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,i)},of.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),i=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(e,i)}},of.prototype.processTask=function(e,i){var s=this;if(i.type==="<response>"){var p=this.callbacks[e];delete this.callbacks[e],p&&(i.error?p(ih(i.error)):p(null,ih(i.data)))}else{var m=!1,v=Op(this.globalScope)?void 0:[],w=i.hasCallback?function(D,R){m=!0,delete s.cancelCallbacks[e],s.target.postMessage({id:e,type:"<response>",sourceMapId:s.mapId,error:D?nh(D):null,data:nh(R,v)},v)}:function(D){m=!0},S=null,M=ih(i.data);if(this.parent[i.type])S=this.parent[i.type](i.sourceMapId,M,w);else if(this.parent.getWorkerSource){var P=i.type.split(".");S=this.parent.getWorkerSource(i.sourceMapId,P[0],M.source)[P[1]](M,w)}else w(new Error("Could not find function "+i.type));!m&&S&&S.cancel&&(this.cancelCallbacks[e]=S.cancel)}},of.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)},Hn.prototype.setNorthEast=function(e){return this._ne=e instanceof Xr?new Xr(e.lng,e.lat):Xr.convert(e),this},Hn.prototype.setSouthWest=function(e){return this._sw=e instanceof Xr?new Xr(e.lng,e.lat):Xr.convert(e),this},Hn.prototype.extend=function(e){var i,s,p=this._sw,m=this._ne;if(e instanceof Xr)s=i=e;else{if(!(e instanceof Hn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Hn.convert(e)):this.extend(Xr.convert(e)):this;if(s=e._ne,!(i=e._sw)||!s)return this}return p||m?(p.lng=Math.min(i.lng,p.lng),p.lat=Math.min(i.lat,p.lat),m.lng=Math.max(s.lng,m.lng),m.lat=Math.max(s.lat,m.lat)):(this._sw=new Xr(i.lng,i.lat),this._ne=new Xr(s.lng,s.lat)),this},Hn.prototype.getCenter=function(){return new Xr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Hn.prototype.getSouthWest=function(){return this._sw},Hn.prototype.getNorthEast=function(){return this._ne},Hn.prototype.getNorthWest=function(){return new Xr(this.getWest(),this.getNorth())},Hn.prototype.getSouthEast=function(){return new Xr(this.getEast(),this.getSouth())},Hn.prototype.getWest=function(){return this._sw.lng},Hn.prototype.getSouth=function(){return this._sw.lat},Hn.prototype.getEast=function(){return this._ne.lng},Hn.prototype.getNorth=function(){return this._ne.lat},Hn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Hn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Hn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Hn.prototype.contains=function(e){var i=Xr.convert(e),s=i.lng,p=i.lat,m=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m},Hn.convert=function(e){return!e||e instanceof Hn?e:new Hn(e)};var Xr=function(e,i){if(isNaN(e)||isNaN(i))throw new Error("Invalid LngLat object: ("+e+", "+i+")");if(this.lng=+e,this.lat=+i,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Xr.prototype.wrap=function(){return new Xr(Wt(this.lng,-180,180),this.lat)},Xr.prototype.toArray=function(){return[this.lng,this.lat]},Xr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Xr.prototype.distanceTo=function(e){var i=Math.PI/180,s=this.lat*i,p=e.lat*i,m=Math.sin(s)*Math.sin(p)+Math.cos(s)*Math.cos(p)*Math.cos((e.lng-this.lng)*i);return 63710088e-1*Math.acos(Math.min(m,1))},Xr.prototype.toBounds=function(e){e===void 0&&(e=0);var i=360*e/40075017,s=i/Math.cos(Math.PI/180*this.lat);return new Hn(new Xr(this.lng-s,this.lat-i),new Xr(this.lng+s,this.lat+i))},Xr.convert=function(e){if(e instanceof Xr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Xr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Xr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var u4=2*Math.PI*63710088e-1;function c4(e){return u4*Math.cos(e*Math.PI/180)}function p4(e){return(180+e)/360}function h4(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function d4(e,i){return e/c4(i)}function Ax(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Th(e,i,s){s===void 0&&(s=0),this.x=+e,this.y=+i,this.z=+s}function Eh(e,i,s){this.z=e,this.x=i,this.y=s,this.key=wg(0,e,e,i,s)}function f4(e,i){this.wrap=e,this.canonical=i,this.key=wg(e,i.z,i.z,i.x,i.y)}function Wn(e,i,s,p,m){this.overscaledZ=e,this.wrap=i,this.canonical=new Eh(s,+p,+m),this.key=wg(i,e,s,p,m)}function wg(e,i,s,p,m){(e*=2)<0&&(e=-1*e-1);var v=1<<s;return(v*v*e+v*m+p).toString(36)+s.toString(36)+i.toString(36)}function Pu(e,i,s){if(this.uid=e,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(s&&s!=="mapbox"&&s!=="terrarium")return nn('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var p=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=s||"mapbox";for(var m=0;m<p;m++)this.data[this._idx(-1,m)]=this.data[this._idx(0,m)],this.data[this._idx(p,m)]=this.data[this._idx(p-1,m)],this.data[this._idx(m,-1)]=this.data[this._idx(m,0)],this.data[this._idx(m,p)]=this.data[this._idx(m,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)]}function q0(e){this._stringToNumber={},this._numberToString=[];for(var i=0;i<e.length;i++){var s=e[i];this._stringToNumber[s]=i,this._numberToString[i]=s}}function Z0(e,i,s,p,m){this.type="Feature",(this._vectorTileFeature=e)._z=i,e._x=s,e._y=p,this.properties=e.properties,this.id=m}Th.fromLngLat=function(e,i){i===void 0&&(i=0);var s=Xr.convert(e);return new Th(p4(s.lng),h4(s.lat),d4(i,s.lat))},Th.prototype.toLngLat=function(){return new Xr(360*this.x-180,Ax(this.y))},Th.prototype.toAltitude=function(){return this.z*c4(Ax(this.y))},Th.prototype.meterInMercatorCoordinateUnits=function(){return 1/u4*(e=Ax(this.y),1/Math.cos(e*Math.PI/180));var e},Eh.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Eh.prototype.url=function(e,i){var s,p,m,v,w,S=(p=this.y,m=this.z,v=l4(256*(s=this.x),256*(p=Math.pow(2,m)-p-1),m),w=l4(256*(s+1),256*(p+1),m),v[0]+","+v[1]+","+w[0]+","+w[1]),M=function(P,D,R){for(var U,F="",Y=P;0<Y;Y--)F+=(D&(U=1<<Y-1)?1:0)+(R&U?2:0);return F}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",M).replace("{bbox-epsg-3857}",S)},Eh.prototype.getTilePoint=function(e){var i=Math.pow(2,this.z);return new W(8192*(e.x*i-this.x),8192*(e.y*i-this.y))},Eh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},Wn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Wn.prototype.scaledTo=function(e){var i=this.canonical.z-e;return e>this.canonical.z?new Wn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wn(e,this.wrap,e,this.canonical.x>>i,this.canonical.y>>i)},Wn.prototype.calculateScaledKey=function(e,i){var s=this.canonical.z-e;return e>this.canonical.z?wg(this.wrap*i,e,this.canonical.z,this.canonical.x,this.canonical.y):wg(this.wrap*i,e,e,this.canonical.x>>s,this.canonical.y>>s)},Wn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var i=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>i&&e.canonical.y===this.canonical.y>>i},Wn.prototype.children=function(e){if(this.overscaledZ>=e)return[new Wn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,s=2*this.canonical.x,p=2*this.canonical.y;return[new Wn(i,this.wrap,i,s,p),new Wn(i,this.wrap,i,1+s,p),new Wn(i,this.wrap,i,s,1+p),new Wn(i,this.wrap,i,1+s,1+p)]},Wn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Wn.prototype.wrapped=function(){return new Wn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Wn.prototype.unwrapTo=function(e){return new Wn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Wn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Wn.prototype.toUnwrapped=function(){return new f4(this.wrap,this.canonical)},Wn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Wn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Th(e.x-this.wrap,e.y))},yt("CanonicalTileID",Eh),yt("OverscaledTileID",Wn,{omit:["posMatrix"]}),Pu.prototype.get=function(e,i){var s=new Uint8Array(this.data.buffer),p=4*this._idx(e,i);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(s[p],s[1+p],s[2+p])},Pu.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Pu.prototype._idx=function(e,i){if(e<-1||e>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(e+1)},Pu.prototype._unpackMapbox=function(e,i,s){return(256*e*256+256*i+s)/10-1e4},Pu.prototype._unpackTerrarium=function(e,i,s){return 256*e+i+s/256-32768},Pu.prototype.getPixels=function(){return new Fr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Pu.prototype.backfillBorder=function(e,i,s){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var p=i*this.dim,m=i*this.dim+this.dim,v=s*this.dim,w=s*this.dim+this.dim;switch(i){case-1:p=m-1;break;case 1:m=p+1}switch(s){case-1:v=w-1;break;case 1:w=v+1}for(var S=-i*this.dim,M=-s*this.dim,P=v;P<w;P++)for(var D=p;D<m;D++)this.data[this._idx(D,P)]=e.data[this._idx(D+S,P+M)]},yt("DEMData",Pu),q0.prototype.encode=function(e){return this._stringToNumber[e]},q0.prototype.decode=function(e){return this._numberToString[e]};var Lx={geometry:{configurable:!0}};function af(){this.state={},this.stateChanges={},this.deletedStates={}}function Du(e,i){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new kc(8192,16,0),this.grid3D=new kc(8192,16,0),this.featureIndexArray=new Su,this.promoteId=i}function m4(e,i,s,p,m){return Wl(e,function(v,w){var S=i instanceof Lc?i.get(w):null;return S&&S.evaluate?S.evaluate(s,p,m):S})}function g4(e){for(var i=1/0,s=1/0,p=-1/0,m=-1/0,v=0,w=e;v<w.length;v+=1){var S=w[v];i=Math.min(i,S.x),s=Math.min(s,S.y),p=Math.max(p,S.x),m=Math.max(m,S.y)}return{minX:i,minY:s,maxX:p,maxY:m}}function HP(e,i){return i-e}function di(e,i){this.tileID=e,this.uid=tn(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}function y4(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Zc.mark(this._marks.start)}Lx.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Lx.geometry.set=function(e){this._geometry=e},Z0.prototype.toJSON=function(){var e={geometry:this.geometry};for(var i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(e[i]=this[i]);return e},Object.defineProperties(Z0.prototype,Lx),af.prototype.updateState=function(e,i,s){var p=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][p]=this.stateChanges[e][p]||{},nt(this.stateChanges[e][p],s),this.deletedStates[e]===null)for(var m in this.deletedStates[e]={},this.state[e])m!==p&&(this.deletedStates[e][m]=null);else if(this.deletedStates[e]&&this.deletedStates[e][p]===null)for(var v in this.deletedStates[e][p]={},this.state[e][p])s[v]||(this.deletedStates[e][p][v]=null);else for(var w in s)this.deletedStates[e]&&this.deletedStates[e][p]&&this.deletedStates[e][p][w]===null&&delete this.deletedStates[e][p][w]},af.prototype.removeFeatureState=function(e,i,s){if(this.deletedStates[e]!==null){var p=String(i);if(this.deletedStates[e]=this.deletedStates[e]||{},s&&i!==void 0)this.deletedStates[e][p]!==null&&(this.deletedStates[e][p]=this.deletedStates[e][p]||{},this.deletedStates[e][p][s]=null);else if(i!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][p])for(s in this.deletedStates[e][p]={},this.stateChanges[e][p])this.deletedStates[e][p][s]=null;else this.deletedStates[e][p]=null;else this.deletedStates[e]=null}},af.prototype.getState=function(e,i){var s=String(i),p=nt({},(this.state[e]||{})[s],(this.stateChanges[e]||{})[s]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var m=this.deletedStates[e][i];if(m===null)return{};for(var v in m)delete p[v]}return p},af.prototype.initializeTileState=function(e,i){e.setFeatureState(this.state,i)},af.prototype.coalesceChanges=function(e,i){var s={};for(var p in this.stateChanges){this.state[p]=this.state[p]||{};var m={};for(var v in this.stateChanges[p])this.state[p][v]||(this.state[p][v]={}),nt(this.state[p][v],this.stateChanges[p][v]),m[v]=this.state[p][v];s[p]=m}for(var w in this.deletedStates){this.state[w]=this.state[w]||{};var S={};if(this.deletedStates[w]===null)for(var M in this.state[w])S[M]={},this.state[w][M]={};else for(var P in this.deletedStates[w]){if(this.deletedStates[w][P]===null)this.state[w][P]={};else for(var D=0,R=Object.keys(this.deletedStates[w][P]);D<R.length;D+=1)delete this.state[w][P][R[D]];S[P]=this.state[w][P]}s[w]=s[w]||{},nt(s[w],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(s).length!==0)for(var U in e)e[U].setFeatureState(s,i)},Du.prototype.insert=function(e,i,s,p,m,v){var w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,p,m);for(var S=v?this.grid3D:this.grid,M=0;M<i.length;M++){for(var P=i[M],D=[1/0,1/0,-1/0,-1/0],R=0;R<P.length;R++){var U=P[R];D[0]=Math.min(D[0],U.x),D[1]=Math.min(D[1],U.y),D[2]=Math.max(D[2],U.x),D[3]=Math.max(D[3],U.y)}D[0]<8192&&D[1]<8192&&0<=D[2]&&0<=D[3]&&S.insert(w,D[0],D[1],D[2],D[3])}},Du.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Yd.VectorTile(new M0(this.rawTileData)).layers,this.sourceLayerCoder=new q0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Du.prototype.query=function(e,i,s,p){var m=this;this.loadVTLayers();for(var v=e.params||{},w=8192/e.tileSize/e.scale,S=Ec(v.filter),M=e.queryGeometry,P=e.queryPadding*w,D=g4(M),R=this.grid.query(D.minX-P,D.minY-P,D.maxX+P,D.maxY+P),U=g4(e.cameraQueryGeometry),F=0,Y=this.grid3D.query(U.minX-P,U.minY-P,U.maxX+P,U.maxY+P,function(be,Te,Me,Fe){return function(Ye,it,ft,tt,gt){for(var at=0,It=Ye;at<It.length;at+=1){var Nt=It[at];if(it<=Nt.x&&ft<=Nt.y&&tt>=Nt.x&&gt>=Nt.y)return!0}var Zt=[new W(it,ft),new W(it,gt),new W(tt,gt),new W(tt,ft)];if(2<Ye.length){for(var ir=0,Qt=Zt;ir<Qt.length;ir+=1)if(Ot(Ye,Qt[ir]))return!0}for(var At=0;At<Ye.length-1;At++)if(Br(Ye[At],Ye[At+1],Zt))return!0;return!1}(e.cameraQueryGeometry,be-P,Te-P,Me+P,Fe+P)});F<Y.length;F+=1)R.push(Y[F]);R.sort(HP);for(var $,ie={},te=function(be){var Te=R[be];if(Te!==$){$=Te;var Me=m.featureIndexArray.get(Te),Fe=null;m.loadMatchingFeature(ie,Me.bucketIndex,Me.sourceLayerIndex,Me.featureIndex,S,v.layers,v.availableImages,i,s,p,function(Ye,it,ft){return Fe=Fe||ht(Ye),it.queryIntersectsFeature(M,Ye,ft,Fe,m.z,e.transform,w,e.pixelPosMatrix)})}},xe=0;xe<R.length;xe++)te(xe);return ie},Du.prototype.loadMatchingFeature=function(e,i,s,p,m,v,w,S,M,P,D){var R=this.bucketLayerIDs[i];if(!v||function(Ye,it){for(var ft=0;ft<Ye.length;ft++)if(0<=it.indexOf(Ye[ft]))return 1}(v,R)){var U=this.sourceLayerCoder.decode(s),F=this.vtLayers[U].feature(p);if(m.filter(new Or(this.tileID.overscaledZ),F))for(var Y=this.getId(F,U),$=0;$<R.length;$++){var ie=R[$];if(!(v&&v.indexOf(ie)<0)){var te=S[ie];if(te){var xe={};Y!==void 0&&P&&(xe=P.getState(te.sourceLayer||"_geojsonTileLayer",Y));var be=M[ie];be.paint=m4(be.paint,te.paint,F,xe,w),be.layout=m4(be.layout,te.layout,F,xe,w);var Te=!D||D(F,te,xe);if(Te){var Me=new Z0(F,this.z,this.x,this.y,Y);Me.layer=be;var Fe=e[ie];Fe===void 0&&(Fe=e[ie]=[]),Fe.push({featureIndex:p,feature:Me,intersectionZ:Te})}}}}}},Du.prototype.lookupSymbolFeatures=function(e,i,s,p,m,v,w,S){var M={};this.loadVTLayers();for(var P=Ec(m),D=0,R=e;D<R.length;D+=1)this.loadMatchingFeature(M,s,p,R[D],P,v,w,S,i);return M},Du.prototype.hasLayer=function(e){for(var i=0,s=this.bucketLayerIDs;i<s.length;i+=1)for(var p=0,m=s[i];p<m.length;p+=1)if(e===m[p])return!0;return!1},Du.prototype.getId=function(e,i){var s=e.id;return this.promoteId&&typeof(s=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]])=="boolean"&&(s=Number(s)),s},yt("FeatureIndex",Du,{omit:["rawTileData","sourceLayerCoder"]}),di.prototype.registerFadeDuration=function(e){var i=e+this.timeAdded;i<ol.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},di.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},di.prototype.loadVectorData=function(e,i,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var p in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(P,D){var R={};if(!D)return R;for(var U=function(){var $=Y[F],ie=$.layerIds.map(function(be){return D.getLayer(be)}).filter(Boolean);if(ie.length!==0){$.layers=ie,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map(function(be){return ie.filter(function(Te){return Te.id===be})[0]}));for(var te=0,xe=ie;te<xe.length;te+=1)R[xe[te].id]=$}},F=0,Y=P;F<Y.length;F+=1)U();return R}(e.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var m=this.buckets[p];if(m instanceof Ir){if(this.hasSymbolBuckets=!0,!s)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var v in this.buckets){var w=this.buckets[v];if(w instanceof Ir&&w.hasRTLText){this.hasRTLText=!0,No.isLoading()||No.isLoaded()||oh()!=="deferred"||eg();break}}for(var S in this.queryPadding=0,this.buckets){var M=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(S).queryRadius(M))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new wu},di.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},di.prototype.getBucket=function(e){return this.buckets[e.id]},di.prototype.upload=function(e){for(var i in this.buckets){var s=this.buckets[i];s.uploadPending()&&s.upload(e)}var p=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sh(e,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sh(e,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)},di.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},di.prototype.queryRenderedFeatures=function(e,i,s,p,m,v,w,S,M,P){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:m,scale:v,tileSize:this.tileSize,pixelPosMatrix:P,transform:S,params:w,queryPadding:this.queryPadding*M},e,i,s):{}},di.prototype.querySourceFeatures=function(e,i){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var p=s.loadVTLayers(),m=i?i.sourceLayer:"",v=p._geojsonTileLayer||p[m];if(v)for(var w=Ec(i&&i.filter),S=this.tileID.canonical,M=S.z,P=S.x,D=S.y,R={z:M,x:P,y:D},U=0;U<v.length;U++){var F=v.feature(U);if(w.filter(new Or(this.tileID.overscaledZ),F)){var Y=new Z0(F,M,P,D,s.getId(F,m));Y.tile=R,e.push(Y)}}}},di.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},di.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},di.prototype.setExpiryData=function(e){var i=this.expirationTime;if(e.cacheControl){var s=mo(e.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var p=Date.now(),m=!1;if(this.expirationTime>p)m=!1;else if(i)if(this.expirationTime<i)m=!0;else{var v=this.expirationTime-i;v?this.expirationTime=p+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},di.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},di.prototype.setFeatureState=function(e,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var s=this.latestFeatureIndex.loadVTLayers();for(var p in this.buckets)if(i.style.hasLayer(p)){var m=this.buckets[p],v=m.layers[0].sourceLayer||"_geojsonTileLayer",w=s[v],S=e[v];if(w&&S&&Object.keys(S).length!==0){m.update(S,w,this.imageAtlas&&this.imageAtlas.patternPositions||{});var M=i&&i.style&&i.style.getLayer(p);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(m)))}}}},di.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},di.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ol.now()},di.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},di.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=ol.now()+e},di.prototype.setDependencies=function(e,i){for(var s={},p=0,m=i;p<m.length;p+=1)s[m[p]]=!0;this.dependencies[e]=s},di.prototype.hasDependency=function(e,i){for(var s=0,p=e;s<p.length;s+=1){var m=this.dependencies[p[s]];if(m){for(var v=0,w=i;v<w.length;v+=1)if(m[w[v]])return!0}}return!1};var Zc=ne.performance;y4.prototype.finish=function(){Zc.mark(this._marks.end);var e=Zc.getEntriesByName(this._marks.measure);return e.length===0&&(Zc.measure(this._marks.measure,this._marks.start,this._marks.end),e=Zc.getEntriesByName(this._marks.measure),Zc.clearMarks(this._marks.start),Zc.clearMarks(this._marks.end),Zc.clearMeasures(this._marks.measure)),e},u.Actor=of,u.AlphaImage=Er,u.CanonicalTileID=Eh,u.CollisionBoxArray=wu,u.Color=Sr,u.DEMData=Pu,u.DataConstantProperty=bt,u.DictionaryCoder=q0,u.EXTENT=8192,u.ErrorEvent=Ue,u.EvaluationParameters=Or,u.Event=ve,u.Evented=fe,u.FeatureIndex=Du,u.FillBucket=Us,u.FillExtrusionBucket=Vs,u.ImageAtlas=gg,u.ImagePosition=L0,u.LineBucket=bo,u.LngLat=Xr,u.LngLatBounds=Hn,u.MercatorCoordinate=Th,u.ONE_EM=24,u.OverscaledTileID=Wn,u.Point=W,u.Point$1=W,u.Properties=_o,u.Protobuf=M0,u.RGBAImage=Fr,u.RequestManager=no,u.RequestPerformance=y4,u.ResourceType=Jl,u.SegmentVector=bn,u.SourceFeatureState=af,u.StructArrayLayout1ui2=_u,u.StructArrayLayout2f1f2i16=ng,u.StructArrayLayout2i4=hu,u.StructArrayLayout3ui6=qn,u.StructArrayLayout4i8=_r,u.SymbolBucket=Ir,u.Texture=Sh,u.Tile=di,u.Transitionable=sa,u.Uniform1f=g,u.Uniform1i=f,u.Uniform2f=x,u.Uniform3f=T,u.Uniform4f=E,u.UniformColor=L,u.UniformMatrix4f=j,u.UnwrappedTileID=f4,u.ValidationError=Ae,u.WritingMode=pa,u.ZoomHistory=Km,u.add=function(e,i,s){return e[0]=i[0]+s[0],e[1]=i[1]+s[1],e[2]=i[2]+s[2],e},u.addDynamicAttributes=Tx,u.asyncAll=function(e,i,s){if(!e.length)return s(null,[]);var p=e.length,m=new Array(e.length),v=null;e.forEach(function(w,S){i(w,function(M,P){M&&(v=M),m[S]=P,--p==0&&s(v,m)})})},u.bezier=Ee,u.bindAll=rn,u.browser=ol,u.cacheEntryPossiblyAdded=function(e){++Ya>Ss&&(e.getActor().send("enforceCacheSizeLimit",al),Ya=0)},u.clamp=pt,u.clearTileCache=function(e){var i=ne.caches.delete("mapbox-tiles");e&&i.catch(e).then(function(){return e()})},u.clipLine=JS,u.clone=function(e){var i=new Tr(16);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},u.clone$1=Rn,u.clone$2=function(e){var i=new Tr(3);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i},u.collisionCircleLayout=fP,u.config=Mn,u.create=function(){var e=new Tr(16);return Tr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},u.create$1=function(){var e=new Tr(9);return Tr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},u.create$2=function(){var e=new Tr(4);return Tr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},u.createCommonjsModule=A,u.createExpression=Oi,u.createLayout=Ei,u.createStyleLayer=function(e){return e.type==="custom"?new ZP(e):new GP[e.type](e)},u.cross=function(e,i,s){var p=i[0],m=i[1],v=i[2],w=s[0],S=s[1],M=s[2];return e[0]=m*M-v*S,e[1]=v*w-p*M,e[2]=p*S-m*w,e},u.deepEqual=function e(i,s){if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(var p=0;p<i.length;p++)if(!e(i[p],s[p]))return!1;return!0}if(typeof i!="object"||i===null||s===null)return i===s;if(typeof s!="object"||Object.keys(i).length!==Object.keys(s).length)return!1;for(var m in i)if(!e(i[m],s[m]))return!1;return!0},u.dot=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]},u.dot$1=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]},u.ease=Ge,u.emitValidationErrors=g0,u.endsWith=qa,u.enforceCacheSizeLimit=function(e){Ts(),Jo&&Jo.then(function(i){i.keys().then(function(s){for(var p=0;p<s.length-e;p++)i.delete(s[p])})})},u.evaluateSizeForFeature=HS,u.evaluateSizeForZoom=WS,u.evaluateVariableOffset=t4,u.evented=bd,u.extend=nt,u.featureFilter=Ec,u.filterObject=il,u.fromRotation=function(e,i){var s=Math.sin(i),p=Math.cos(i);return e[0]=p,e[1]=s,e[2]=0,e[3]=-s,e[4]=p,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},u.getAnchorAlignment=wx,u.getAnchorJustification=Sx,u.getArrayBuffer=B,u.getImage=de,u.getJSON=function(e,i){return N(nt(e,{type:"json"}),i)},u.getRTLTextPluginStatus=oh,u.getReferrer=sl,u.getVideo=function(e,i){var s,p,m=ne.document.createElement("video");m.muted=!0,m.onloadstart=function(){i(null,m)};for(var v=0;v<e.length;v++){var w=ne.document.createElement("source");s=e[v],p=void 0,(p=ne.document.createElement("a")).href=s,p.protocol===ne.document.location.protocol&&p.host===ne.document.location.host||(m.crossOrigin="Anonymous"),w.src=e[v],m.appendChild(w)}return{cancel:function(){}}},u.identity=Xi,u.invert=function(e,i){var s=i[0],p=i[1],m=i[2],v=i[3],w=i[4],S=i[5],M=i[6],P=i[7],D=i[8],R=i[9],U=i[10],F=i[11],Y=i[12],$=i[13],ie=i[14],te=i[15],xe=s*S-p*w,be=s*M-m*w,Te=s*P-v*w,Me=p*M-m*S,Fe=p*P-v*S,Ye=m*P-v*M,it=D*$-R*Y,ft=D*ie-U*Y,tt=D*te-F*Y,gt=R*ie-U*$,at=R*te-F*$,It=U*te-F*ie,Nt=xe*It-be*at+Te*gt+Me*tt-Fe*ft+Ye*it;return Nt?(e[0]=(S*It-M*at+P*gt)*(Nt=1/Nt),e[1]=(m*at-p*It-v*gt)*Nt,e[2]=($*Ye-ie*Fe+te*Me)*Nt,e[3]=(U*Fe-R*Ye-F*Me)*Nt,e[4]=(M*tt-w*It-P*ft)*Nt,e[5]=(s*It-m*tt+v*ft)*Nt,e[6]=(ie*Te-Y*Ye-te*be)*Nt,e[7]=(D*Ye-U*Te+F*be)*Nt,e[8]=(w*at-S*tt+P*it)*Nt,e[9]=(p*tt-s*at-v*it)*Nt,e[10]=(Y*Fe-$*Te+te*xe)*Nt,e[11]=(R*Te-D*Fe-F*xe)*Nt,e[12]=(S*ft-w*gt-M*it)*Nt,e[13]=(s*gt-p*ft+m*it)*Nt,e[14]=($*be-Y*Me-ie*xe)*Nt,e[15]=(D*Me-R*be+U*xe)*Nt,e):null},u.isChar=He,u.isMapboxURL=zo,u.keysDifference=function(e,i){var s=[];for(var p in e)p in i||s.push(p);return s},u.makeRequest=N,u.mapObject=Wl,u.mercatorXfromLng=p4,u.mercatorYfromLat=h4,u.mercatorZfromAltitude=d4,u.mul=In,u.multiply=Pi,u.mvt=Yd,u.normalize=function(e,i){var s=i[0],p=i[1],m=i[2],v=s*s+p*p+m*m;return 0<v&&(v=1/Math.sqrt(v)),e[0]=i[0]*v,e[1]=i[1]*v,e[2]=i[2]*v,e},u.number=_n,u.offscreenCanvasSupported=Es,u.ortho=function(e,i,s,p,m,v,w){var S=1/(i-s),M=1/(p-m),P=1/(v-w);return e[0]=-2*S,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*M,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*P,e[11]=0,e[12]=(i+s)*S,e[13]=(m+p)*M,e[14]=(w+v)*P,e[15]=1,e},u.parseGlyphPBF=function(e){return new M0(e).readFields(TP,[])},u.pbf=M0,u.performSymbolLayout=function(e,i,s,p,m,v,w){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var S=e.layers[0].layout,M=e.layers[0]._unevaluatedLayout._values,P={};if(e.textSizeData.kind==="composite"){var D=e.textSizeData,R=D.maxZoom;P.compositeTextSizes=[M["text-size"].possiblyEvaluate(new Or(D.minZoom),w),M["text-size"].possiblyEvaluate(new Or(R),w)]}if(e.iconSizeData.kind==="composite"){var U=e.iconSizeData,F=U.maxZoom;P.compositeIconSizes=[M["icon-size"].possiblyEvaluate(new Or(U.minZoom),w),M["icon-size"].possiblyEvaluate(new Or(F),w)]}P.layoutTextSize=M["text-size"].possiblyEvaluate(new Or(e.zoom+1),w),P.layoutIconSize=M["icon-size"].possiblyEvaluate(new Or(e.zoom+1),w),P.textMaxSize=M["text-size"].possiblyEvaluate(new Or(18));for(var Y=24*S.get("text-line-height"),$=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",ie=S.get("text-keep-upright"),te=S.get("text-size"),xe=function(){var Me=Te[be],Fe=S.get("text-font").evaluate(Me,{},w).join(","),Ye=te.evaluate(Me,{},w),it=P.layoutTextSize.evaluate(Me,{},w),ft=P.layoutIconSize.evaluate(Me,{},w),tt={horizontal:{},vertical:void 0},gt=Me.text,at=[0,0];if(gt){var It=gt.toString(),Nt=24*S.get("text-letter-spacing").evaluate(Me,{},w),Zt=function(){for(var pr=0,xr=It;pr<xr.length;pr+=1)if(mr=xr[pr].charCodeAt(0),He.Arabic(mr)||He["Arabic Supplement"](mr)||He["Arabic Extended-A"](mr)||He["Arabic Presentation Forms-A"](mr)||He["Arabic Presentation Forms-B"](mr))return;var mr;return 1}()?Nt:0,ir=S.get("text-anchor").evaluate(Me,{},w),Qt=S.get("text-variable-anchor");if(!Qt){var At=S.get("text-radial-offset").evaluate(Me,{},w);at=At?t4(ir,[24*At,Cx]):S.get("text-offset").evaluate(Me,{},w).map(function(pr){return 24*pr})}var Gt=$?"center":S.get("text-justify").evaluate(Me,{},w),kr=S.get("symbol-placement"),cn=kr==="point"?24*S.get("text-max-width").evaluate(Me,{},w):0,fi=function(){e.allowVerticalPlacement&&Mc(It)&&(tt.vertical=P0(gt,i,s,m,Fe,cn,Y,ir,"left",Zt,at,pa.vertical,!0,kr,it,Ye))};if(!$&&Qt){for(var jn=Gt==="auto"?Qt.map(function(pr){return Sx(pr)}):[Gt],an=!1,Cn=0;Cn<jn.length;Cn++){var Ur=jn[Cn];if(!tt.horizontal[Ur])if(an)tt.horizontal[Ur]=tt.horizontal[0];else{var Mi=P0(gt,i,s,m,Fe,cn,Y,"center",Ur,Zt,at,pa.horizontal,!1,kr,it,Ye);Mi&&(an=(tt.horizontal[Ur]=Mi).positionedLines.length===1)}}fi()}else{Gt==="auto"&&(Gt=Sx(ir));var ii=P0(gt,i,s,m,Fe,cn,Y,ir,Gt,Zt,at,pa.horizontal,!1,kr,it,Ye);ii&&(tt.horizontal[Gt]=ii),fi(),Mc(It)&&$&&ie&&(tt.vertical=P0(gt,i,s,m,Fe,cn,Y,ir,Gt,Zt,at,pa.vertical,!1,kr,it,Ye))}}var mi,Co,Ki,Bi,Io,Yn=void 0,Fi=!1;if(Me.icon&&Me.icon.name){var Sn=p[Me.icon.name];Sn&&(mi=m[Me.icon.name],Co=S.get("icon-offset").evaluate(Me,{},w),Ki=wx(S.get("icon-anchor").evaluate(Me,{},w)),Bi=Co[0]-mi.displaySize[0]*Ki.horizontalAlign,Yn={image:mi,top:Io=Co[1]-mi.displaySize[1]*Ki.verticalAlign,bottom:Io+mi.displaySize[1],left:Bi,right:Bi+mi.displaySize[0]},Fi=Sn.sdf,e.sdfIcons===void 0?e.sdfIcons=Sn.sdf:e.sdfIcons!==Sn.sdf&&nn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),Sn.pixelRatio===e.pixelRatio&&S.get("icon-rotate").constantOr(1)===0||(e.iconsNeedLinear=!0))}var Kn=n4(tt.horizontal)||tt.vertical;e.iconsInText=!!Kn&&Kn.iconsInText,(Kn||Yn)&&function(pr,xr,mr,or,Vo,sn,Zs,Na,Gc,Ih,bg){var zu=sn.textMaxSize.evaluate(xr,{});zu===void 0&&(zu=Zs);var sf,ha,Oa,Cg,Hc,Sg,lf,kh,Pl,Wc,Tg,Df,ip,Vg,qo=pr.layers[0].layout,Eg=qo.get("icon-offset").evaluate(xr,{},bg),Yc=n4(mr.horizontal),Ig=Zs/24,Px=pr.tilePixelRatio*Ig,G0=pr.tilePixelRatio*zu/24,H0=pr.tilePixelRatio*Na,W0=pr.tilePixelRatio*qo.get("symbol-spacing"),kg=qo.get("text-padding")*pr.tilePixelRatio,Y0=qo.get("icon-padding")*pr.tilePixelRatio,uf=qo.get("text-max-angle")/180*Math.PI,K0=qo.get("text-rotation-alignment")==="map"&&qo.get("symbol-placement")!=="point",$0=qo.get("icon-rotation-alignment")==="map"&&qo.get("symbol-placement")!=="point",v4=qo.get("symbol-placement"),WP=W0/2,Dx=qo.get("icon-text-fit");function Mg(Zx,ps){ps.x<0||8192<=ps.x||ps.y<0||8192<=ps.y||function(pn,So,Ag,Gs,Mh,Lg,cf,da,Ah,Lh,Nu,Ou,Kc,$c,Dl,Ph,pf,X0,Pg,hf,$i,Xc,L4,zl,YP){var P4,Dh,df,ff,mf,gf=pn.addToLineVertexArray(So,Ag),D4=0,z4=0,N4=0,O4=0,Gx=-1,Hx=-1,Ru={},R4=yh(""),Wx=0,B4=0;if(B4=da._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Wx=(P4=da.layout.get("text-offset").evaluate($i,{},zl).map(function(yv){return 24*yv}))[0],P4[1]):(Wx=24*da.layout.get("text-radial-offset").evaluate($i,{},zl),Cx),pn.allowVerticalPlacement&&Gs.vertical){var F4=da.layout.get("text-rotate").evaluate($i,{},zl)+90;ff=new R0(Ah,So,Lh,Nu,Ou,Gs.vertical,Kc,$c,Dl,F4),cf&&(mf=new R0(Ah,So,Lh,Nu,Ou,cf,pf,X0,Dl,F4))}if(Mh){var Yx=da.layout.get("icon-rotate").evaluate($i,{}),j4=da.layout.get("icon-text-fit")!=="none",U4=QS(Mh,Yx,L4,j4),Kx=cf?QS(cf,Yx,L4,j4):void 0;df=new R0(Ah,So,Lh,Nu,Ou,Mh,pf,X0,!1,Yx),D4=4*U4.length;var V4=pn.iconSizeData,Dg=null;V4.kind==="source"?32640<(Dg=[128*da.layout.get("icon-size").evaluate($i,{})])[0]&&nn(pn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):V4.kind==="composite"&&(32640<(Dg=[128*Xc.compositeIconSizes[0].evaluate($i,{},zl),128*Xc.compositeIconSizes[1].evaluate($i,{},zl)])[0]||32640<Dg[1])&&nn(pn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),pn.addSymbols(pn.icon,U4,Dg,hf,Pg,$i,!1,So,gf.lineStartIndex,gf.lineLength,-1,zl),Gx=pn.icon.placedSymbolArray.length-1,Kx&&(z4=4*Kx.length,pn.addSymbols(pn.icon,Kx,Dg,hf,Pg,$i,pa.vertical,So,gf.lineStartIndex,gf.lineLength,-1,zl),Hx=pn.icon.placedSymbolArray.length-1)}for(var q4 in Gs.horizontal){var J0=Gs.horizontal[q4];Dh||(R4=yh(J0.text),Dh=new R0(Ah,So,Lh,Nu,Ou,J0,Kc,$c,Dl,da.layout.get("text-rotate").evaluate($i,{},zl)));var pT=J0.positionedLines.length===1;if(N4+=r4(pn,So,J0,Lg,da,Dl,$i,Ph,gf,Gs.vertical?pa.horizontal:pa.horizontalOnly,pT?Object.keys(Gs.horizontal):[q4],Ru,Gx,Xc,zl),pT)break}function $x(yv,vv){return yv&&yv.circleDiameter?Math.max(yv.circleDiameter,vv):vv}Gs.vertical&&(O4+=r4(pn,So,Gs.vertical,Lg,da,Dl,$i,Ph,gf,pa.vertical,["vertical"],Ru,Hx,Xc,zl));var M2=Dh?Dh.boxStartIndex:pn.collisionBoxArray.length,KP=Dh?Dh.boxEndIndex:pn.collisionBoxArray.length,$P=ff?ff.boxStartIndex:pn.collisionBoxArray.length,XP=ff?ff.boxEndIndex:pn.collisionBoxArray.length,JP=df?df.boxStartIndex:pn.collisionBoxArray.length,QP=df?df.boxEndIndex:pn.collisionBoxArray.length,e8=mf?mf.boxStartIndex:pn.collisionBoxArray.length,t8=mf?mf.boxEndIndex:pn.collisionBoxArray.length,Q0=-1,qg=-1<(Q0=$x(mf,Q0=$x(df,Q0=$x(ff,Q0=$x(Dh,Q0)))))?1:0;qg&&(Q0*=YP/24),pn.glyphOffsetArray.length>=Ir.MAX_GLYPHS&&nn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$i.sortKey!==void 0&&pn.addToSortKeyRanges(pn.symbolInstances.length,$i.sortKey),pn.symbolInstances.emplaceBack(So.x,So.y,0<=Ru.right?Ru.right:-1,0<=Ru.center?Ru.center:-1,0<=Ru.left?Ru.left:-1,Ru.vertical||-1,Gx,Hx,R4,M2,KP,$P,XP,JP,QP,e8,t8,Lh,N4,O4,D4,z4,qg,0,Kc,Wx,B4,Q0)}(pr,ps,Zx,mr,or,Vo,sf,pr.layers[0],pr.collisionBoxArray,xr.index,xr.sourceLayerIndex,pr.index,Px,kg,K0,Gc,H0,Y0,$0,Eg,xr,sn,Ih,bg,Zs)}if(or&&Dx!=="none"&&(pr.allowVerticalPlacement&&mr.vertical&&(sf=GS(or,mr.vertical,Dx,qo.get("icon-text-fit-padding"),Eg,Ig)),Yc&&(or=GS(or,Yc,Dx,qo.get("icon-text-fit-padding"),Eg,Ig))),v4==="line")for(var zx=0,_4=JS(xr.geometry,0,0,8192,8192);zx<_4.length;zx+=1)for(var x4=_4[zx],Nx=0,w4=(ha=x4,Oa=W0,Cg=uf,Hc=mr.vertical||Yc,Sg=or,lf=24,kh=G0,Pl=pr.overscaling,Wc=8192,Tg=$S(Hc,lf,kh),Oa-(ip=(Df=XS(Hc,Sg))*kh)<Oa/4&&(Oa=ip+Oa/4),function Zx(ps,pn,So,Ag,Gs,Mh,Lg,cf,da){for(var Ah=Mh/2,Lh=KS(ps),Nu=0,Ou=pn-So,Kc=[],$c=0;$c<ps.length-1;$c++){for(var Dl=ps[$c],Ph=ps[$c+1],pf=Dl.dist(Ph),X0=Ph.angleTo(Dl);Ou+So<Nu+pf;){var Pg=((Ou+=So)-Nu)/pf,hf=_n(Dl.x,Ph.x,Pg),$i=_n(Dl.y,Ph.y,Pg);if(0<=hf&&hf<da&&0<=$i&&$i<da&&0<=Ou-Ah&&Ou+Ah<=Lh){var Xc=new Qd(hf,$i,X0,$c);Xc._round(),Ag&&!YS(ps,Xc,Mh,Ag,Gs)||Kc.push(Xc)}}Nu+=pf}return cf||Kc.length||Lg||(Kc=Zx(ps,Nu/2,So,Ag,Gs,Mh,Lg,!0,da)),Kc}(ha,(Vg=ha[0].x===0||ha[0].x===Wc||ha[0].y===0||ha[0].y===Wc)?Oa/2*Pl%Oa:(Df/2+2*lf)*kh*Pl%Oa,Oa,Tg,Cg,ip,Vg,!1,Wc));Nx<w4.length;Nx+=1){var b4=w4[Nx];Yc&&zP(pr,Yc.text,WP,b4)||Mg(x4,b4)}else if(v4==="line-center")for(var Ox=0,C4=xr.geometry;Ox<C4.length;Ox+=1){var Rx=C4[Ox];if(1<Rx.length){var S4=AP(Rx,uf,mr.vertical||Yc,or,24,G0);S4&&Mg(Rx,S4)}}else if(xr.type==="Polygon")for(var Bx=0,T4=gx(xr.geometry,0);Bx<T4.length;Bx+=1){var E4=T4[Bx],I4=PP(E4,16);Mg(E4[0],new Qd(I4.x,I4.y,0))}else if(xr.type==="LineString")for(var Fx=0,k4=xr.geometry;Fx<k4.length;Fx+=1){var jx=k4[Fx];Mg(jx,new Qd(jx[0].x,jx[0].y,0))}else if(xr.type==="Point")for(var Ux=0,M4=xr.geometry;Ux<M4.length;Ux+=1)for(var Vx=0,A4=M4[Ux];Vx<A4.length;Vx+=1){var qx=A4[Vx];Mg([qx],new Qd(qx.x,qx.y,0))}}(e,Me,tt,Yn,p,P,it,ft,at,Fi,w)},be=0,Te=e.features;be<Te.length;be+=1)xe();v&&e.generateCollisionDebugBuffers()},u.perspective=function(e,i,s,p,m){var v,w=1/Math.tan(i/2);return e[0]=w/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=w,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,m!=null&&m!==1/0?(e[10]=(m+p)*(v=1/(p-m)),e[14]=2*m*p*v):(e[10]=-1,e[14]=-2*p),e},u.pick=function(e,i){for(var s={},p=0;p<i.length;p++){var m=i[p];m in e&&(s[m]=e[m])}return s},u.plugin=No,u.polygonIntersectsPolygon=mt,u.postMapLoadEvent=pc,u.postTurnstileEvent=rr,u.potpack=US,u.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],u.register=yt,u.registerForPluginStateChange=function(e){return e({pluginStatus:lo,pluginURL:_l}),bd.on("pluginStateChange",e),e},u.rotate=function(e,i,s){var p=i[0],m=i[1],v=i[2],w=i[3],S=Math.sin(s),M=Math.cos(s);return e[0]=p*M+v*S,e[1]=m*M+w*S,e[2]=p*-S+v*M,e[3]=m*-S+w*M,e},u.rotateX=function(e,i,s){var p=Math.sin(s),m=Math.cos(s),v=i[4],w=i[5],S=i[6],M=i[7],P=i[8],D=i[9],R=i[10],U=i[11];return i!==e&&(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[4]=v*m+P*p,e[5]=w*m+D*p,e[6]=S*m+R*p,e[7]=M*m+U*p,e[8]=P*m-v*p,e[9]=D*m-w*p,e[10]=R*m-S*p,e[11]=U*m-M*p,e},u.rotateZ=function(e,i,s){var p=Math.sin(s),m=Math.cos(s),v=i[0],w=i[1],S=i[2],M=i[3],P=i[4],D=i[5],R=i[6],U=i[7];return i!==e&&(e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=v*m+P*p,e[1]=w*m+D*p,e[2]=S*m+R*p,e[3]=M*m+U*p,e[4]=P*m-v*p,e[5]=D*m-w*p,e[6]=R*m-S*p,e[7]=U*m-M*p,e},u.scale=function(e,i,s){var p=s[0],m=s[1],v=s[2];return e[0]=i[0]*p,e[1]=i[1]*p,e[2]=i[2]*p,e[3]=i[3]*p,e[4]=i[4]*m,e[5]=i[5]*m,e[6]=i[6]*m,e[7]=i[7]*m,e[8]=i[8]*v,e[9]=i[9]*v,e[10]=i[10]*v,e[11]=i[11]*v,e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},u.scale$1=function(e,i,s){return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=i[3]*s,e},u.scale$2=function(e,i,s){return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e},u.setCacheLimits=function(e,i){al=e,Ss=i},u.setRTLTextPlugin=function(e,i,s){if(s===void 0&&(s=!1),lo==="deferred"||lo==="loading"||lo==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");_l=ol.resolveURL(e),lo="deferred",xd=i,wd(),s||eg()},u.sphericalToCartesian=function(e){var i=e[0],s=e[1],p=e[2];return s+=90,s*=Math.PI/180,p*=Math.PI/180,{x:i*Math.cos(s)*Math.sin(p),y:i*Math.sin(s)*Math.sin(p),z:i*Math.cos(p)}},u.sqrLen=function(e){var i=e[0],s=e[1];return i*i+s*s},u.styleSpec=ce,u.sub=function(e,i,s){return e[0]=i[0]-s[0],e[1]=i[1]-s[1],e[2]=i[2]-s[2],e},u.symbolSize=MP,u.transformMat3=function(e,i,s){var p=i[0],m=i[1],v=i[2];return e[0]=p*s[0]+m*s[3]+v*s[6],e[1]=p*s[1]+m*s[4]+v*s[7],e[2]=p*s[2]+m*s[5]+v*s[8],e},u.transformMat4=Di,u.translate=function(e,i,s){var p,m,v,w,S,M,P,D,R,U,F,Y,$=s[0],ie=s[1],te=s[2];return i===e?(e[12]=i[0]*$+i[4]*ie+i[8]*te+i[12],e[13]=i[1]*$+i[5]*ie+i[9]*te+i[13],e[14]=i[2]*$+i[6]*ie+i[10]*te+i[14],e[15]=i[3]*$+i[7]*ie+i[11]*te+i[15]):(m=i[1],v=i[2],w=i[3],S=i[4],M=i[5],P=i[6],D=i[7],R=i[8],U=i[9],F=i[10],Y=i[11],e[0]=p=i[0],e[1]=m,e[2]=v,e[3]=w,e[4]=S,e[5]=M,e[6]=P,e[7]=D,e[8]=R,e[9]=U,e[10]=F,e[11]=Y,e[12]=p*$+S*ie+R*te+i[12],e[13]=m*$+M*ie+U*te+i[13],e[14]=v*$+P*ie+F*te+i[14],e[15]=w*$+D*ie+Y*te+i[15]),e},u.triggerPluginCompletionEvent=Qm,u.uniqueId=tn,u.validateCustomStyleLayer=function(e){var i=[],s=e.id;return s===void 0&&i.push({message:"layers."+s+': missing required property "id"'}),e.render===void 0&&i.push({message:"layers."+s+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&i.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),i},u.validateLight=ux,u.validateStyle=th,u.values=function(e){var i=[];for(var s in e)i.push(e[s]);return i},u.vectorTile=Yd,u.version="1.11.1",u.warnOnce=nn,u.webpSupported=Kl,u.window=ne,u.wrap=Wt}),a(0,function(u){function A(N){var B=typeof N;if(B=="number"||B=="boolean"||B=="string"||N==null)return JSON.stringify(N);if(Array.isArray(N)){for(var q="[",J=0,le=N;J<le.length;J+=1)q+=A(le[J])+",";return q+"]"}for(var de=Object.keys(N).sort(),we="{",ge=0;ge<de.length;ge++)we+=JSON.stringify(de[ge])+":"+A(N[de[ge]])+",";return we+"}"}function k(N){for(var B="",q=0,J=u.refProperties;q<J.length;q+=1)B+="/"+A(N[J[q]]);return B}function G(N){this.keyCache={},N&&this.replace(N)}function W(N){var B={},q=[];for(var J in N){var le=N[J],de=B[J]={};for(var we in le){var ge=le[+we];if(ge&&ge.bitmap.width!==0&&ge.bitmap.height!==0){var ve={x:0,y:0,w:ge.bitmap.width+2,h:ge.bitmap.height+2};q.push(ve),de[we]={rect:ve,metrics:ge.metrics}}}}var fe=u.potpack(q),Pe=new u.AlphaImage({width:fe.w||1,height:fe.h||1});for(var Ue in N){var Ie=N[Ue];for(var ce in Ie){var Ae=Ie[+ce];if(Ae&&Ae.bitmap.width!==0&&Ae.bitmap.height!==0){var xt=B[Ue][ce].rect;u.AlphaImage.copy(Ae.bitmap,Pe,{x:0,y:0},{x:xt.x+1,y:xt.y+1},Ae.bitmap)}}}this.image=Pe,this.positions=B}function se(N){this.tileID=new u.OverscaledTileID(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId}function ne(N,B,q){for(var J=new u.EvaluationParameters(B),le=0,de=N;le<de.length;le+=1)de[le].recalculate(J,q)}function Ee(N,B){var q=u.getArrayBuffer(N.request,function(J,le,de,we){J?B(J):le&&B(null,{vectorTile:new u.vectorTile.VectorTile(new u.pbf(le)),rawData:le,cacheControl:de,expires:we})});return function(){q.cancel(),B()}}function Ge(N,B,q,J){this.actor=N,this.layerIndex=B,this.availableImages=q,this.loadVectorData=J||Ee,this.loading={},this.loaded={}}function pt(){this.loaded={}}G.prototype.replace=function(N){this._layerConfigs={},this._layers={},this.update(N,[])},G.prototype.update=function(N,B){for(var q=this,J=0,le=N;J<le.length;J+=1){var de=le[J];this._layerConfigs[de.id]=de;var we=this._layers[de.id]=u.createStyleLayer(de);we._featureFilter=u.featureFilter(we.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(var ge=0,ve=B;ge<ve.length;ge+=1){var fe=ve[ge];delete this.keyCache[fe],delete this._layerConfigs[fe],delete this._layers[fe]}this.familiesBySource={};for(var Pe=0,Ue=function(Pt,Dt){for(var $t={},Ft=0;Ft<Pt.length;Ft++){var nr=Dt&&Dt[Pt[Ft].id]||k(Pt[Ft]);Dt&&(Dt[Pt[Ft].id]=nr);var Cr=$t[nr];(Cr=Cr||($t[nr]=[])).push(Pt[Ft])}var je=[];for(var Ct in $t)je.push($t[Ct]);return je}(u.values(this._layerConfigs),this.keyCache);Pe<Ue.length;Pe+=1){var Ie=Ue[Pe].map(function(Pt){return q._layers[Pt.id]}),ce=Ie[0];if(ce.visibility!=="none"){var Ae=ce.source||"",xt=this.familiesBySource[Ae];xt=xt||(this.familiesBySource[Ae]={});var wt=ce.sourceLayer||"_geojsonTileLayer",vt=xt[wt];(vt=vt||(xt[wt]=[])).push(Ie)}}},u.register("GlyphAtlas",W),se.prototype.parse=function(N,B,q,J,le){var de=this;this.status="parsing",this.data=N,this.collisionBoxArray=new u.CollisionBoxArray;var we=new u.DictionaryCoder(Object.keys(N.layers).sort()),ge=new u.FeatureIndex(this.tileID,this.promoteId);ge.bucketLayerIDs=[];var ve,fe,Pe,Ue,Ie={},ce={featureIndex:ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:q},Ae=B.familiesBySource[this.source];for(var xt in Ae){var wt=N.layers[xt];if(wt){wt.version===1&&u.warnOnce('Vector tile source "'+this.source+'" layer "'+xt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var vt=we.encode(xt),Pt=[],Dt=0;Dt<wt.length;Dt++){var $t=wt.feature(Dt),Ft=ge.getId($t,xt);Pt.push({feature:$t,id:Ft,index:Dt,sourceLayerIndex:vt})}for(var nr=0,Cr=Ae[xt];nr<Cr.length;nr+=1){var je=Cr[nr],Ct=je[0];Ct.minzoom&&this.zoom<Math.floor(Ct.minzoom)||Ct.maxzoom&&this.zoom>=Ct.maxzoom||Ct.visibility!=="none"&&(ne(je,this.zoom,q),(Ie[Ct.id]=Ct.createBucket({index:ge.bucketLayerIDs.length,layers:je,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vt,sourceID:this.source})).populate(Pt,ce,this.tileID.canonical),ge.bucketLayerIDs.push(je.map(function(vn){return vn.id})))}}}var kt=u.mapObject(ce.glyphDependencies,function(vn){return Object.keys(vn).map(Number)});Object.keys(kt).length?J.send("getGlyphs",{uid:this.uid,stacks:kt},function(vn,Wr){ve||(ve=vn,fe=Wr,Vt.call(de))}):fe={};var Ci=Object.keys(ce.iconDependencies);Ci.length?J.send("getImages",{icons:Ci,source:this.source,tileID:this.tileID,type:"icons"},function(vn,Wr){ve||(ve=vn,Pe=Wr,Vt.call(de))}):Pe={};var Qo=Object.keys(ce.patternDependencies);function Vt(){if(ve)return le(ve);if(fe&&Pe&&Ue){var vn=new W(fe),Wr=new u.ImageAtlas(Pe,Ue);for(var Ql in Ie){var Bn=Ie[Ql];Bn instanceof u.SymbolBucket?(ne(Bn.layers,this.zoom,q),u.performSymbolLayout(Bn,fe,vn.positions,Pe,Wr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Bn.hasPattern&&(Bn instanceof u.LineBucket||Bn instanceof u.FillBucket||Bn instanceof u.FillExtrusionBucket)&&(ne(Bn.layers,this.zoom,q),Bn.addFeatures(ce,this.tileID.canonical,Wr.patternPositions))}this.status="done",le(null,{buckets:u.values(Ie).filter(function(on){return!on.isEmpty()}),featureIndex:ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vn.image,imageAtlas:Wr,glyphMap:this.returnDependencies?fe:null,iconMap:this.returnDependencies?Pe:null,glyphPositions:this.returnDependencies?vn.positions:null})}}Qo.length?J.send("getImages",{icons:Qo,source:this.source,tileID:this.tileID,type:"patterns"},function(vn,Wr){ve||(ve=vn,Ue=Wr,Vt.call(de))}):Ue={},Vt.call(this)},Ge.prototype.loadTile=function(N,B){var q=this,J=N.uid;this.loading||(this.loading={});var le=!!(N&&N.request&&N.request.collectResourceTiming)&&new u.RequestPerformance(N.request),de=this.loading[J]=new se(N);de.abort=this.loadVectorData(N,function(we,ge){if(delete q.loading[J],we||!ge)return de.status="done",q.loaded[J]=de,B(we);var ve=ge.rawData,fe={};ge.expires&&(fe.expires=ge.expires),ge.cacheControl&&(fe.cacheControl=ge.cacheControl);var Pe={};if(le){var Ue=le.finish();Ue&&(Pe.resourceTiming=JSON.parse(JSON.stringify(Ue)))}de.vectorTile=ge.vectorTile,de.parse(ge.vectorTile,q.layerIndex,q.availableImages,q.actor,function(Ie,ce){if(Ie||!ce)return B(Ie);B(null,u.extend({rawTileData:ve.slice(0)},ce,fe,Pe))}),q.loaded=q.loaded||{},q.loaded[J]=de})},Ge.prototype.reloadTile=function(N,B){var q=this,J=this.loaded,le=N.uid,de=this;if(J&&J[le]){var we=J[le];we.showCollisionBoxes=N.showCollisionBoxes;var ge=function(ve,fe){var Pe=we.reloadCallback;Pe&&(delete we.reloadCallback,we.parse(we.vectorTile,de.layerIndex,q.availableImages,de.actor,Pe)),B(ve,fe)};we.status==="parsing"?we.reloadCallback=ge:we.status==="done"&&(we.vectorTile?we.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor,ge):ge())}},Ge.prototype.abortTile=function(N,B){var q=this.loading,J=N.uid;q&&q[J]&&q[J].abort&&(q[J].abort(),delete q[J]),B()},Ge.prototype.removeTile=function(N,B){var q=this.loaded,J=N.uid;q&&q[J]&&delete q[J],B()};var Wt=u.window.ImageBitmap;function nt(N,B){if(N.length!==0){qt(N[0],B);for(var q=1;q<N.length;q++)qt(N[q],!B)}}function qt(N,B){for(var q=0,J=0,le=N.length,de=le-1;J<le;de=J++)q+=(N[J][0]-N[de][0])*(N[de][1]+N[J][1]);0<=q!=!!B&&N.reverse()}function tn(N){this._feature=N,this.extent=u.EXTENT,this.type=N.type,this.properties=N.tags,"id"in N&&!isNaN(N.id)&&(this.id=parseInt(N.id,10))}pt.prototype.loadTile=function(N,B){var q=N.uid,J=N.encoding,le=N.rawImageData,de=Wt&&le instanceof Wt?this.getImageData(le):le,we=new u.DEMData(q,de,J);this.loaded=this.loaded||{},B(null,this.loaded[q]=we)},pt.prototype.getImageData=function(N){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(N.width,N.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=N.width,this.offscreenCanvas.height=N.height,this.offscreenCanvasContext.drawImage(N,0,0,N.width,N.height);var B=this.offscreenCanvasContext.getImageData(-1,-1,N.width+2,N.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new u.RGBAImage({width:B.width,height:B.height},B.data)},pt.prototype.removeTile=function(N){var B=this.loaded,q=N.uid;B&&B[q]&&delete B[q]};var ho=u.vectorTile.VectorTileFeature.prototype.toGeoJSON;tn.prototype.loadGeometry=function(){if(this._feature.type===1){for(var N=[],B=0,q=this._feature.geometry;B<q.length;B+=1){var J=q[B];N.push([new u.Point$1(J[0],J[1])])}return N}for(var le=[],de=0,we=this._feature.geometry;de<we.length;de+=1){for(var ge=[],ve=0,fe=we[de];ve<fe.length;ve+=1){var Pe=fe[ve];ge.push(new u.Point$1(Pe[0],Pe[1]))}le.push(ge)}return le},tn.prototype.toGeoJSON=function(N,B,q){return ho.call(this,N,B,q)};var un=function(N){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.EXTENT,this.length=N.length,this._features=N};un.prototype.feature=function(N){return new tn(this._features[N])};var rn=u.vectorTile.VectorTileFeature,qa=Wl;function Wl(N,B){this.options=B||{},this.features=N,this.length=N.length}function il(N,B){this.id=typeof N.id=="number"?N.id:void 0,this.type=N.type,this.rawGeometry=N.type===1?[N.geometry]:N.geometry,this.properties=N.tags,this.extent=B||4096}Wl.prototype.feature=function(N){return new il(this.features[N],this.options.extent)},il.prototype.loadGeometry=function(){var N=this.rawGeometry;this.geometry=[];for(var B=0;B<N.length;B++){for(var q=N[B],J=[],le=0;le<q.length;le++)J.push(new u.Point$1(q[le][0],q[le][1]));this.geometry.push(J)}return this.geometry},il.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var N=this.geometry,B=1/0,q=-1/0,J=1/0,le=-1/0,de=0;de<N.length;de++)for(var we=N[de],ge=0;ge<we.length;ge++){var ve=we[ge];B=Math.min(B,ve.x),q=Math.max(q,ve.x),J=Math.min(J,ve.y),le=Math.max(le,ve.y)}return[B,J,q,le]},il.prototype.toGeoJSON=rn.prototype.toGeoJSON;var Rn=nn,sc=qa;function nn(N){var B=new u.pbf;return function(q,J){for(var le in q.layers)J.writeMessage(3,fo,q.layers[le])}(N,B),B.finish()}function fo(N,B){var q;B.writeVarintField(15,N.version||1),B.writeStringField(1,N.name||""),B.writeVarintField(5,N.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<N.length;q++)J.feature=N.feature(q),B.writeMessage(2,zm,J);var le=J.keys;for(q=0;q<le.length;q++)B.writeStringField(3,le[q]);var de=J.values;for(q=0;q<de.length;q++)B.writeMessage(4,Yl,de[q])}function zm(N,B){var q=N.feature;q.id!==void 0&&B.writeVarintField(1,q.id),B.writeMessage(2,lc,N),B.writeVarintField(3,q.type),B.writeMessage(4,Op,q)}function lc(N,B){var q=N.feature,J=N.keys,le=N.values,de=N.keycache,we=N.valuecache;for(var ge in q.properties){var ve=de[ge];ve===void 0&&(J.push(ge),de[ge]=ve=J.length-1),B.writeVarint(ve);var fe=q.properties[ge],Pe=typeof fe;Pe!="string"&&Pe!="boolean"&&Pe!="number"&&(fe=JSON.stringify(fe));var Ue=Pe+":"+fe,Ie=we[Ue];Ie===void 0&&(le.push(fe),we[Ue]=Ie=le.length-1),B.writeVarint(Ie)}}function mo(N,B){return(B<<3)+(7&N)}function wa(N){return N<<1^N>>31}function Op(N,B){for(var q=N.loadGeometry(),J=N.type,le=0,de=0,we=q.length,ge=0;ge<we;ge++){var ve=q[ge],fe=1;J===1&&(fe=ve.length),B.writeVarint(mo(1,fe));for(var Pe=J===3?ve.length-1:ve.length,Ue=0;Ue<Pe;Ue++){Ue===1&&J!==1&&B.writeVarint(mo(2,Pe-1));var Ie=ve[Ue].x-le,ce=ve[Ue].y-de;B.writeVarint(wa(Ie)),B.writeVarint(wa(ce)),le+=Ie,de+=ce}J===3&&B.writeVarint(15)}}function Yl(N,B){var q=typeof N;q=="string"?B.writeStringField(1,N):q=="boolean"?B.writeBooleanField(7,N):q=="number"&&(N%1!=0?B.writeDoubleField(3,N):N<0?B.writeSVarintField(6,N):B.writeVarintField(5,N))}function Ko(N,B,q,J){Za(N,q,J),Za(B,2*q,2*J),Za(B,2*q+1,2*J+1)}function Za(N,B,q){var J=N[B];N[B]=N[q],N[q]=J}function $o(N,B,q,J){var le=N-q,de=B-J;return le*le+de*de}function ba(N){return N[0]}function uc(N){return N[1]}function Ga(N,B,q,J,le){B===void 0&&(B=ba),q===void 0&&(q=uc),J===void 0&&(J=64),le===void 0&&(le=Float64Array),this.nodeSize=J;for(var de=(this.points=N).length<65536?Uint16Array:Uint32Array,we=this.ids=new de(N.length),ge=this.coords=new le(2*N.length),ve=0;ve<N.length;ve++)ge[2*(we[ve]=ve)]=B(N[ve]),ge[2*ve+1]=q(N[ve]);(function fe(Pe,Ue,Ie,ce,Ae,xt){if(!(Ae-ce<=Ie)){var wt=ce+Ae>>1;(function vt(Pt,Dt,$t,Ft,nr,Cr){for(;Ft<nr;){if(600<nr-Ft){var je=nr-Ft+1,Ct=$t-Ft+1,kt=Math.log(je),Ci=.5*Math.exp(2*kt/3),Qo=.5*Math.sqrt(kt*Ci*(je-Ci)/je)*(Ct-je/2<0?-1:1);vt(Pt,Dt,$t,Math.max(Ft,Math.floor($t-Ct*Ci/je+Qo)),Math.min(nr,Math.floor($t+(je-Ct)*Ci/je+Qo)),Cr)}var Vt=Dt[2*$t+Cr],vn=Ft,Wr=nr;for(Ko(Pt,Dt,Ft,$t),Dt[2*nr+Cr]>Vt&&Ko(Pt,Dt,Ft,nr);vn<Wr;){for(Ko(Pt,Dt,vn,Wr),vn++,Wr--;Dt[2*vn+Cr]<Vt;)vn++;for(;Dt[2*Wr+Cr]>Vt;)Wr--}Dt[2*Ft+Cr]===Vt?Ko(Pt,Dt,Ft,Wr):Ko(Pt,Dt,++Wr,nr),Wr<=$t&&(Ft=Wr+1),$t<=Wr&&(nr=Wr-1)}})(Pe,Ue,wt,ce,Ae,xt%2),fe(Pe,Ue,Ie,ce,wt-1,xt+1),fe(Pe,Ue,Ie,1+wt,Ae,xt+1)}})(we,ge,J,0,we.length-1,0)}function Jn(N){this.options=Xo(Object.create(ol),N),this.trees=new Array(this.options.maxZoom+1)}Rn.fromVectorTileJs=nn,Rn.fromGeojsonVt=function(N,B){B=B||{};var q={};for(var J in N)q[J]=new qa(N[J].features,B),q[J].name=J,q[J].version=B.version,q[J].extent=B.extent;return nn({layers:q})},Rn.GeoJSONWrapper=sc,Ga.prototype.range=function(N,B,q,J){return function(le,de,we,ge,ve,fe,Pe){for(var Ue,Ie,ce=[0,le.length-1,0],Ae=[];ce.length;){var xt=ce.pop(),wt=ce.pop(),vt=ce.pop();if(wt-vt<=Pe)for(var Pt=vt;Pt<=wt;Pt++)Ie=de[2*Pt+1],(Ue=de[2*Pt])>=we&&Ue<=ve&&ge<=Ie&&Ie<=fe&&Ae.push(le[Pt]);else{var Dt=Math.floor((vt+wt)/2);Ie=de[2*Dt+1],(Ue=de[2*Dt])>=we&&Ue<=ve&&ge<=Ie&&Ie<=fe&&Ae.push(le[Dt]);var $t=(xt+1)%2;(xt===0?we<=Ue:ge<=Ie)&&(ce.push(vt),ce.push(Dt-1),ce.push($t)),(xt===0?Ue<=ve:Ie<=fe)&&(ce.push(Dt+1),ce.push(wt),ce.push($t))}}return Ae}(this.ids,this.coords,N,B,q,J,this.nodeSize)};var ol={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!(Ga.prototype.within=function(N,B,q){return function(J,le,de,we,ge,ve){for(var fe=[0,J.length-1,0],Pe=[],Ue=ge*ge;fe.length;){var Ie=fe.pop(),ce=fe.pop(),Ae=fe.pop();if(ce-Ae<=ve)for(var xt=Ae;xt<=ce;xt++)$o(le[2*xt],le[2*xt+1],de,we)<=Ue&&Pe.push(J[xt]);else{var wt=Math.floor((Ae+ce)/2),vt=le[2*wt],Pt=le[2*wt+1];$o(vt,Pt,de,we)<=Ue&&Pe.push(J[wt]);var Dt=(Ie+1)%2;(Ie===0?de-ge<=vt:we-ge<=Pt)&&(fe.push(Ae),fe.push(wt-1),fe.push(Dt)),(Ie===0?vt<=de+ge:Pt<=we+ge)&&(fe.push(wt+1),fe.push(ce),fe.push(Dt))}}return Pe}(this.ids,this.coords,N,B,q,this.nodeSize)}),generateId:!1,reduce:null,map:function(N){return N}};function Mn(N){return{type:"Feature",id:N.id,properties:Kl(N),geometry:{type:"Point",coordinates:[360*(N.x-.5),(B=(180-360*N.y)*Math.PI/180,360*Math.atan(Math.exp(B))/Math.PI-90)]}};var B}function Kl(N){var B=N.numPoints,q=1e4<=B?Math.round(B/1e3)+"k":1e3<=B?Math.round(B/100)/10+"k":B;return Xo(Xo({},N.properties),{cluster:!0,cluster_id:N.id,point_count:B,point_count_abbreviated:q})}function $l(N){return N/360+.5}function bs(N){var B=Math.sin(N*Math.PI/180),q=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return q<0?0:1<q?1:q}function Xo(N,B){for(var q in B)N[q]=B[q];return N}function no(N){return N.x}function Rp(N){return N.y}function zo(N,B,q,J,le,de){var we=le-q,ge=de-J;if(we!==0||ge!==0){var ve=((N-q)*we+(B-J)*ge)/(we*we+ge*ge);1<ve?(q=le,J=de):0<ve&&(q+=we*ve,J+=ge*ve)}return(we=N-q)*we+(ge=B-J)*ge}function zi(N,B,q,J){var le={id:N===void 0?null:N,type:B,geometry:q,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(de){var we=de.geometry,ge=de.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")Qn(de,we);else if(ge==="Polygon"||ge==="MultiLineString")for(var ve=0;ve<we.length;ve++)Qn(de,we[ve]);else if(ge==="MultiPolygon")for(ve=0;ve<we.length;ve++)for(var fe=0;fe<we[ve].length;fe++)Qn(de,we[ve][fe])}(le),le}function Qn(N,B){for(var q=0;q<B.length;q+=3)N.minX=Math.min(N.minX,B[q]),N.minY=Math.min(N.minY,B[q+1]),N.maxX=Math.max(N.maxX,B[q]),N.maxY=Math.max(N.maxY,B[q+1])}function Ni(N,B,q,J){if(B.geometry){var le=B.geometry.coordinates,de=B.geometry.type,we=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),ge=[],ve=B.id;if(q.promoteId?ve=B.properties[q.promoteId]:q.generateId&&(ve=J||0),de==="Point")Hr(le,ge);else if(de==="MultiPoint")for(var fe=0;fe<le.length;fe++)Hr(le[fe],ge);else if(de==="LineString")go(le,ge,we,!1);else if(de==="MultiLineString"){if(q.lineMetrics){for(fe=0;fe<le.length;fe++)go(le[fe],ge=[],we,!1),N.push(zi(ve,"LineString",ge,B.properties));return}bi(le,ge,we,!1)}else if(de==="Polygon")bi(le,ge,we,!0);else{if(de!=="MultiPolygon"){if(de!=="GeometryCollection")throw new Error("Input data is not a valid GeoJSON object.");for(fe=0;fe<B.geometry.geometries.length;fe++)Ni(N,{id:ve,geometry:B.geometry.geometries[fe],properties:B.properties},q,J);return}for(fe=0;fe<le.length;fe++){var Pe=[];bi(le[fe],Pe,we,!0),ge.push(Pe)}}N.push(zi(ve,de,ge,B.properties))}}function Hr(N,B){B.push(An(N[0])),B.push(Jo(N[1])),B.push(0)}function go(N,B,q,J){for(var le,de,we=0,ge=0;ge<N.length;ge++){var ve=An(N[ge][0]),fe=Jo(N[ge][1]);B.push(ve),B.push(fe),B.push(0),0<ge&&(we+=J?(le*fe-ve*de)/2:Math.sqrt(Math.pow(ve-le,2)+Math.pow(fe-de,2))),le=ve,de=fe}var Pe=B.length-3;B[2]=1,function Ue(Ie,ce,Ae,xt){for(var wt,vt=xt,Pt=Ae-ce>>1,Dt=Ae-ce,$t=Ie[ce],Ft=Ie[ce+1],nr=Ie[Ae],Cr=Ie[Ae+1],je=ce+3;je<Ae;je+=3){var Ct=zo(Ie[je],Ie[je+1],$t,Ft,nr,Cr);if(vt<Ct)wt=je,vt=Ct;else if(Ct===vt){var kt=Math.abs(je-Pt);kt<Dt&&(wt=je,Dt=kt)}}xt<vt&&(3<wt-ce&&Ue(Ie,ce,wt,xt),Ie[wt+2]=vt,3<Ae-wt&&Ue(Ie,wt,Ae,xt))}(B,0,Pe,q),B[2+Pe]=1,B.size=Math.abs(we),B.start=0,B.end=B.size}function bi(N,B,q,J){for(var le=0;le<N.length;le++){var de=[];go(N[le],de,q,J),B.push(de)}}function An(N){return N/360+.5}function Jo(N){var B=Math.sin(N*Math.PI/180),q=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return q<0?0:1<q?1:q}function io(N,B,q,J,le,de,we,ge){if(J/=B,de>=(q/=B)&&we<J)return N;if(we<q||J<=de)return null;for(var ve=[],fe=0;fe<N.length;fe++){var Pe=N[fe],Ue=Pe.geometry,Ie=Pe.type,ce=le===0?Pe.minX:Pe.minY,Ae=le===0?Pe.maxX:Pe.maxY;if(q<=ce&&Ae<J)ve.push(Pe);else if(!(Ae<q||J<=ce)){var xt=[];if(Ie==="Point"||Ie==="MultiPoint")qi(Ue,xt,q,J,le);else if(Ie==="LineString")Ha(Ue,xt,q,J,le,!1,ge.lineMetrics);else if(Ie==="MultiLineString")cc(Ue,xt,q,J,le,!1);else if(Ie==="Polygon")cc(Ue,xt,q,J,le,!0);else if(Ie==="MultiPolygon")for(var wt=0;wt<Ue.length;wt++){var vt=[];cc(Ue[wt],vt,q,J,le,!0),vt.length&&xt.push(vt)}if(xt.length){if(ge.lineMetrics&&Ie==="LineString"){for(wt=0;wt<xt.length;wt++)ve.push(zi(Pe.id,Ie,xt[wt],Pe.tags));continue}Ie!=="LineString"&&Ie!=="MultiLineString"||(xt.length===1?(Ie="LineString",xt=xt[0]):Ie="MultiLineString"),Ie!=="Point"&&Ie!=="MultiPoint"||(Ie=xt.length===3?"Point":"MultiPoint"),ve.push(zi(Pe.id,Ie,xt,Pe.tags))}}}return ve.length?ve:null}function qi(N,B,q,J,le){for(var de=0;de<N.length;de+=3){var we=N[de+le];q<=we&&we<=J&&(B.push(N[de]),B.push(N[de+1]),B.push(N[de+2]))}}function Ha(N,B,q,J,le,de,we){for(var ge,ve,fe=Cs(N),Pe=le===0?Bp:pc,Ue=N.start,Ie=0;Ie<N.length-3;Ie+=3){var ce=N[Ie],Ae=N[Ie+1],xt=N[Ie+2],wt=N[Ie+3],vt=N[Ie+4],Pt=le===0?ce:Ae,Dt=le===0?wt:vt,$t=!1;we&&(ge=Math.sqrt(Math.pow(ce-wt,2)+Math.pow(Ae-vt,2))),Pt<q?q<Dt&&(ve=Pe(fe,ce,Ae,wt,vt,q),we&&(fe.start=Ue+ge*ve)):J<Pt?Dt<J&&(ve=Pe(fe,ce,Ae,wt,vt,J),we&&(fe.start=Ue+ge*ve)):rr(fe,ce,Ae,xt),Dt<q&&q<=Pt&&(ve=Pe(fe,ce,Ae,wt,vt,q),$t=!0),J<Dt&&Pt<=J&&(ve=Pe(fe,ce,Ae,wt,vt,J),$t=!0),!de&&$t&&(we&&(fe.end=Ue+ge*ve),B.push(fe),fe=Cs(N)),we&&(Ue+=ge)}var Ft=N.length-3;ce=N[Ft],Ae=N[Ft+1],xt=N[Ft+2],(Pt=le===0?ce:Ae)>=q&&Pt<=J&&rr(fe,ce,Ae,xt),Ft=fe.length-3,de&&3<=Ft&&(fe[Ft]!==fe[0]||fe[Ft+1]!==fe[1])&&rr(fe,fe[0],fe[1],fe[2]),fe.length&&B.push(fe)}function Cs(N){var B=[];return B.size=N.size,B.start=N.start,B.end=N.end,B}function cc(N,B,q,J,le,de){for(var we=0;we<N.length;we++)Ha(N[we],B,q,J,le,de,!1)}function rr(N,B,q,J){N.push(B),N.push(q),N.push(J)}function Bp(N,B,q,J,le,de){var we=(de-B)/(J-B);return N.push(de),N.push(q+(le-q)*we),N.push(1),we}function pc(N,B,q,J,le,de){var we=(de-q)/(le-q);return N.push(B+(J-B)*we),N.push(de),N.push(1),we}function al(N,B){for(var q=[],J=0;J<N.length;J++){var le,de=N[J],we=de.type;if(we==="Point"||we==="MultiPoint"||we==="LineString")le=Ss(de.geometry,B);else if(we==="MultiLineString"||we==="Polygon"){le=[];for(var ge=0;ge<de.geometry.length;ge++)le.push(Ss(de.geometry[ge],B))}else if(we==="MultiPolygon")for(le=[],ge=0;ge<de.geometry.length;ge++){for(var ve=[],fe=0;fe<de.geometry[ge].length;fe++)ve.push(Ss(de.geometry[ge][fe],B));le.push(ve)}q.push(zi(de.id,we,le,de.tags))}return q}function Ss(N,B){var q=[];q.size=N.size,N.start!==void 0&&(q.start=N.start,q.end=N.end);for(var J=0;J<N.length;J+=3)q.push(N[J]+B,N[J+1],N[J+2]);return q}function Ca(N,B){if(N.transformed)return N;var q,J,le,de=1<<N.z,we=N.x,ge=N.y;for(q=0;q<N.features.length;q++){var ve=N.features[q],fe=ve.geometry,Pe=ve.type;if(ve.geometry=[],Pe===1)for(J=0;J<fe.length;J+=2)ve.geometry.push(Sa(fe[J],fe[J+1],B,de,we,ge));else for(J=0;J<fe.length;J++){var Ue=[];for(le=0;le<fe[J].length;le+=2)Ue.push(Sa(fe[J][le],fe[J][le+1],B,de,we,ge));ve.geometry.push(Ue)}}return N.transformed=!0,N}function Sa(N,B,q,J,le,de){return[Math.round(q*(N*J-le)),Math.round(q*(B*J-de))]}function Ts(N,B,q,J,le){for(var de=B===le.maxZoom?0:le.tolerance/((1<<B)*le.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:J,z:B,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ge=0;ge<N.length;ge++){we.numFeatures++,Xl(we,N[ge],de,le);var ve=N[ge].minX,fe=N[ge].minY,Pe=N[ge].maxX,Ue=N[ge].maxY;ve<we.minX&&(we.minX=ve),fe<we.minY&&(we.minY=fe),Pe>we.maxX&&(we.maxX=Pe),Ue>we.maxY&&(we.maxY=Ue)}return we}function Xl(N,B,q,J){var le=B.geometry,de=B.type,we=[];if(de==="Point"||de==="MultiPoint")for(var ge=0;ge<le.length;ge+=3)we.push(le[ge]),we.push(le[ge+1]),N.numPoints++,N.numSimplified++;else if(de==="LineString")Wa(we,le,N,q,!1,!1);else if(de==="MultiLineString"||de==="Polygon")for(ge=0;ge<le.length;ge++)Wa(we,le[ge],N,q,de==="Polygon",ge===0);else if(de==="MultiPolygon")for(var ve=0;ve<le.length;ve++){var fe=le[ve];for(ge=0;ge<fe.length;ge++)Wa(we,fe[ge],N,q,!0,ge===0)}if(we.length){var Pe=B.tags||null;if(de==="LineString"&&J.lineMetrics){for(var Ue in Pe={},B.tags)Pe[Ue]=B.tags[Ue];Pe.mapbox_clip_start=le.start/le.size,Pe.mapbox_clip_end=le.end/le.size}var Ie={geometry:we,type:de==="Polygon"||de==="MultiPolygon"?3:de==="LineString"||de==="MultiLineString"?2:1,tags:Pe};B.id!==null&&(Ie.id=B.id),N.features.push(Ie)}}function Wa(N,B,q,J,le,de){var we=J*J;if(0<J&&B.size<(le?we:J))q.numPoints+=B.length/3;else{for(var ge=[],ve=0;ve<B.length;ve+=3)(J===0||B[ve+2]>we)&&(q.numSimplified++,ge.push(B[ve]),ge.push(B[ve+1])),q.numPoints++;le&&function(fe,Pe){for(var Ue=0,Ie=0,ce=fe.length,Ae=ce-2;Ie<ce;Ae=Ie,Ie+=2)Ue+=(fe[Ie]-fe[Ae])*(fe[Ie+1]+fe[Ae+1]);if(0<Ue===Pe)for(Ie=0,ce=fe.length;Ie<ce/2;Ie+=2){var xt=fe[Ie],wt=fe[Ie+1];fe[Ie]=fe[ce-2-Ie],fe[Ie+1]=fe[ce-1-Ie],fe[ce-2-Ie]=xt,fe[ce-1-Ie]=wt}}(ge,de),N.push(ge)}}function Ya(N,B){var q=(B=this.options=function(Pe,Ue){for(var Ie in Ue)Pe[Ie]=Ue[Ie];return Pe}(Object.create(this.options),B)).debug;if(q&&console.time("preprocess data"),B.maxZoom<0||24<B.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(B.promoteId&&B.generateId)throw new Error("promoteId and generateId cannot be used together.");var J,le,de,we,ge,ve,fe=function(Pe,Ue){var Ie=[];if(Pe.type==="FeatureCollection")for(var ce=0;ce<Pe.features.length;ce++)Ni(Ie,Pe.features[ce],Ue,ce);else Ni(Ie,Pe.type==="Feature"?Pe:{geometry:Pe},Ue);return Ie}(N,B);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",B.indexMaxZoom,B.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ge=io(we=J=fe,1,-1-(de=(le=B).buffer/le.extent),de,0,-1,2,le),ve=io(J,1,1-de,2+de,0,-1,2,le),(ge||ve)&&(we=io(J,1,-de,1+de,0,-1,2,le)||[],ge&&(we=al(ge,1).concat(we)),ve&&(we=we.concat(al(ve,-1)))),(fe=we).length&&this.splitTile(fe,0,0,0),q&&(fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Es(N,B,q){return 32*((1<<N)*q+B)+N}function Jl(N,B){var q=N.tileID.canonical;if(!this._geoJSONIndex)return B(null,null);var J=this._geoJSONIndex.getTile(q.z,q.x,q.y);if(!J)return B(null,null);var le=new un(J.features),de=Rn(le);de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),B(null,{vectorTile:le,rawData:de.buffer})}function Nr(N){var B=this;this.self=N,this.actor=new u.Actor(N,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Ge,geojson:sl},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(q,J){if(B.workerSourceTypes[q])throw new Error('Worker source with name "'+q+'" already registered.');B.workerSourceTypes[q]=J},this.self.registerRTLTextPlugin=function(q){if(u.plugin.isParsed())throw new Error("RTL text plugin already registered.");u.plugin.applyArabicShaping=q.applyArabicShaping,u.plugin.processBidirectionalText=q.processBidirectionalText,u.plugin.processStyledBidirectionalText=q.processStyledBidirectionalText}}Jn.prototype.load=function(N){var B=this.options,q=B.log,J=B.minZoom,le=B.maxZoom,de=B.nodeSize;q&&console.time("total time");var we,ge,ve,fe="prepare "+N.length+" points";q&&console.time(fe),this.points=N;for(var Pe=[],Ue=0;Ue<N.length;Ue++)N[Ue].geometry&&Pe.push((we=Ue,ve=(ge=N[Ue].geometry.coordinates)[1],{x:$l(ge[0]),y:bs(ve),zoom:1/0,index:we,parentId:-1}));this.trees[le+1]=new Ga(Pe,no,Rp,de,Float32Array),q&&console.timeEnd(fe);for(var Ie=le;J<=Ie;Ie--){var ce=+Date.now();Pe=this._cluster(Pe,Ie),this.trees[Ie]=new Ga(Pe,no,Rp,de,Float32Array),q&&console.log("z%d: %d clusters in %dms",Ie,Pe.length,Date.now()-ce)}return q&&console.timeEnd("total time"),this},Jn.prototype.getClusters=function(N,B){var q=((N[0]+180)%360+360)%360-180,J=Math.max(-90,Math.min(90,N[1])),le=N[2]===180?180:((N[2]+180)%360+360)%360-180,de=Math.max(-90,Math.min(90,N[3]));if(360<=N[2]-N[0])q=-180,le=180;else if(le<q){var we=this.getClusters([q,J,180,de],B),ge=this.getClusters([-180,J,le,de],B);return we.concat(ge)}for(var ve=this.trees[this._limitZoom(B)],fe=[],Pe=0,Ue=ve.range($l(q),bs(de),$l(le),bs(J));Pe<Ue.length;Pe+=1){var Ie=ve.points[Ue[Pe]];fe.push(Ie.numPoints?Mn(Ie):this.points[Ie.index])}return fe},Jn.prototype.getChildren=function(N){var B=this._getOriginId(N),q=this._getOriginZoom(N),J="No cluster with the specified id.",le=this.trees[q];if(!le)throw new Error(J);var de=le.points[B];if(!de)throw new Error(J);for(var we=this.options.radius/(this.options.extent*Math.pow(2,q-1)),ge=[],ve=0,fe=le.within(de.x,de.y,we);ve<fe.length;ve+=1){var Pe=le.points[fe[ve]];Pe.parentId===N&&ge.push(Pe.numPoints?Mn(Pe):this.points[Pe.index])}if(ge.length===0)throw new Error(J);return ge},Jn.prototype.getLeaves=function(N,B,q){var J=[];return this._appendLeaves(J,N,B=B||10,q=q||0,0),J},Jn.prototype.getTile=function(N,B,q){var J=this.trees[this._limitZoom(N)],le=Math.pow(2,N),de=this.options,we=de.radius/de.extent,ge=(q-we)/le,ve=(q+1+we)/le,fe={features:[]};return this._addTileFeatures(J.range((B-we)/le,ge,(B+1+we)/le,ve),J.points,B,q,le,fe),B===0&&this._addTileFeatures(J.range(1-we/le,ge,1,ve),J.points,le,q,le,fe),B===le-1&&this._addTileFeatures(J.range(0,ge,we/le,ve),J.points,-1,q,le,fe),fe.features.length?fe:null},Jn.prototype.getClusterExpansionZoom=function(N){for(var B=this._getOriginZoom(N)-1;B<=this.options.maxZoom;){var q=this.getChildren(N);if(B++,q.length!==1)break;N=q[0].properties.cluster_id}return B},Jn.prototype._appendLeaves=function(N,B,q,J,le){for(var de=0,we=this.getChildren(B);de<we.length;de+=1){var ge=we[de],ve=ge.properties;if(ve&&ve.cluster?le+ve.point_count<=J?le+=ve.point_count:le=this._appendLeaves(N,ve.cluster_id,q,J,le):le<J?le++:N.push(ge),N.length===q)break}return le},Jn.prototype._addTileFeatures=function(N,B,q,J,le,de){for(var we=0,ge=N;we<ge.length;we+=1){var ve=B[ge[we]],fe=ve.numPoints,Pe={type:1,geometry:[[Math.round(this.options.extent*(ve.x*le-q)),Math.round(this.options.extent*(ve.y*le-J))]],tags:fe?Kl(ve):this.points[ve.index].properties},Ue=void 0;fe?Ue=ve.id:this.options.generateId?Ue=ve.index:this.points[ve.index].id&&(Ue=this.points[ve.index].id),Ue!==void 0&&(Pe.id=Ue),de.features.push(Pe)}},Jn.prototype._limitZoom=function(N){return Math.max(this.options.minZoom,Math.min(+N,this.options.maxZoom+1))},Jn.prototype._cluster=function(N,B){for(var q=[],J=this.options,le=J.reduce,de=J.minPoints,we=J.radius/(J.extent*Math.pow(2,B)),ge=0;ge<N.length;ge++){var ve=N[ge];if(!(ve.zoom<=B)){ve.zoom=B;for(var fe=this.trees[B+1],Pe=fe.within(ve.x,ve.y,we),Ue=ve.numPoints||1,Ie=Ue,ce=0,Ae=Pe;ce<Ae.length;ce+=1){var xt=fe.points[Ae[ce]];xt.zoom>B&&(Ie+=xt.numPoints||1)}if(de<=Ie){for(var wt=ve.x*Ue,vt=ve.y*Ue,Pt=le&&1<Ue?this._map(ve,!0):null,Dt=(ge<<5)+(B+1)+this.points.length,$t=0,Ft=Pe;$t<Ft.length;$t+=1){var nr=fe.points[Ft[$t]];if(!(nr.zoom<=B)){nr.zoom=B;var Cr=nr.numPoints||1;wt+=nr.x*Cr,vt+=nr.y*Cr,nr.parentId=Dt,le&&le(Pt=Pt||this._map(ve,!0),this._map(nr))}}ve.parentId=Dt,q.push({x:wt/Ie,y:vt/Ie,zoom:1/0,id:Dt,parentId:-1,numPoints:Ie,properties:Pt})}else if(q.push(ve),1<Ie)for(var je=0,Ct=Pe;je<Ct.length;je+=1){var kt=fe.points[Ct[je]];kt.zoom<=B||(kt.zoom=B,q.push(kt))}}}return q},Jn.prototype._getOriginId=function(N){return N-this.points.length>>5},Jn.prototype._getOriginZoom=function(N){return(N-this.points.length)%32},Ya.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!(Jn.prototype._map=function(N,B){if(N.numPoints)return B?Xo({},N.properties):N.properties;var q=this.points[N.index].properties,J=this.options.map(q);return B&&J===q?Xo({},J):J}),promoteId:null,generateId:!1,debug:0},Ya.prototype.splitTile=function(N,B,q,J,le,de,we){for(var ge=[N,B,q,J],ve=this.options,fe=ve.debug;ge.length;){J=ge.pop(),q=ge.pop(),B=ge.pop(),N=ge.pop();var Pe=1<<B,Ue=Es(B,q,J),Ie=this.tiles[Ue];if(!Ie&&(1<fe&&console.time("creation"),Ie=this.tiles[Ue]=Ts(N,B,q,J,ve),this.tileCoords.push({z:B,x:q,y:J}),fe)){1<fe&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",B,q,J,Ie.numFeatures,Ie.numPoints,Ie.numSimplified),console.timeEnd("creation"));var ce="z"+B;this.stats[ce]=(this.stats[ce]||0)+1,this.total++}if(Ie.source=N,le){if(B===ve.maxZoom||B===le)continue;var Ae=1<<le-B;if(q!==Math.floor(de/Ae)||J!==Math.floor(we/Ae))continue}else if(B===ve.indexMaxZoom||Ie.numPoints<=ve.indexMaxPoints)continue;if(Ie.source=null,N.length!==0){1<fe&&console.time("clipping");var xt,wt,vt,Pt,Dt,$t,Ft=.5*ve.buffer/ve.extent,nr=.5-Ft,Cr=.5+Ft,je=1+Ft;xt=wt=vt=Pt=null,Dt=io(N,Pe,q-Ft,q+Cr,0,Ie.minX,Ie.maxX,ve),$t=io(N,Pe,q+nr,q+je,0,Ie.minX,Ie.maxX,ve),N=null,Dt&&(xt=io(Dt,Pe,J-Ft,J+Cr,1,Ie.minY,Ie.maxY,ve),wt=io(Dt,Pe,J+nr,J+je,1,Ie.minY,Ie.maxY,ve),Dt=null),$t&&(vt=io($t,Pe,J-Ft,J+Cr,1,Ie.minY,Ie.maxY,ve),Pt=io($t,Pe,J+nr,J+je,1,Ie.minY,Ie.maxY,ve),$t=null),1<fe&&console.timeEnd("clipping"),ge.push(xt||[],B+1,2*q,2*J),ge.push(wt||[],B+1,2*q,2*J+1),ge.push(vt||[],B+1,2*q+1,2*J),ge.push(Pt||[],B+1,2*q+1,2*J+1)}}},Ya.prototype.getTile=function(N,B,q){var J=this.options,le=J.extent,de=J.debug;if(N<0||24<N)return null;var we=1<<N,ge=Es(N,B=(B%we+we)%we,q);if(this.tiles[ge])return Ca(this.tiles[ge],le);1<de&&console.log("drilling down to z%d-%d-%d",N,B,q);for(var ve,fe=N,Pe=B,Ue=q;!ve&&0<fe;)fe--,Pe=Math.floor(Pe/2),Ue=Math.floor(Ue/2),ve=this.tiles[Es(fe,Pe,Ue)];return ve&&ve.source?(1<de&&console.log("found parent tile z%d-%d-%d",fe,Pe,Ue),1<de&&console.time("drilling down"),this.splitTile(ve.source,fe,Pe,Ue,N,B,q),1<de&&console.timeEnd("drilling down"),this.tiles[ge]?Ca(this.tiles[ge],le):null):null};var Ta,sl=(ei.__proto__=Ta=Ge,((ei.prototype=Object.create(Ta&&Ta.prototype)).constructor=ei).prototype.loadData=function(N,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=B,this._pendingLoadDataParams=N,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ei.prototype._loadData=function(){var N=this;if(this._pendingCallback&&this._pendingLoadDataParams){var B=this._pendingCallback,q=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var J=!!(q&&q.request&&q.request.collectResourceTiming)&&new u.RequestPerformance(q.request);this.loadGeoJSON(q,function(le,de){if(le||!de)return B(le);if(typeof de!="object")return B(new Error("Input data given to '"+q.source+"' is not a valid GeoJSON object."));(function ve(fe,Pe){var Ue,Ie=fe&&fe.type;if(Ie==="FeatureCollection")for(Ue=0;Ue<fe.features.length;Ue++)ve(fe.features[Ue],Pe);else if(Ie==="GeometryCollection")for(Ue=0;Ue<fe.geometries.length;Ue++)ve(fe.geometries[Ue],Pe);else if(Ie==="Feature")ve(fe.geometry,Pe);else if(Ie==="Polygon")nt(fe.coordinates,Pe);else if(Ie==="MultiPolygon")for(Ue=0;Ue<fe.coordinates.length;Ue++)nt(fe.coordinates[Ue],Pe);return fe})(de,!0);try{N._geoJSONIndex=q.cluster?new Jn(function(){var ve=q.superclusterOptions,fe=q.clusterProperties;if(!fe||!ve)return ve;for(var Pe={},Ue={},Ie={accumulated:null,zoom:0},ce={properties:null},Ae=Object.keys(fe),xt=0,wt=Ae;xt<wt.length;xt+=1){var vt=wt[xt],Pt=fe[vt],Dt=Pt[0],$t=u.createExpression(Pt[1]),Ft=u.createExpression(typeof Dt=="string"?[Dt,["accumulated"],["get",vt]]:Dt);Pe[vt]=$t.value,Ue[vt]=Ft.value}return ve.map=function(nr){ce.properties=nr;for(var Cr={},je=0,Ct=Ae;je<Ct.length;je+=1){var kt=Ct[je];Cr[kt]=Pe[kt].evaluate(Ie,ce)}return Cr},ve.reduce=function(nr,Cr){ce.properties=Cr;for(var je=0,Ct=Ae;je<Ct.length;je+=1){var kt=Ct[je];Ie.accumulated=nr[kt],nr[kt]=Ue[kt].evaluate(Ie,ce)}},ve}()).load(de.features):new Ya(de,q.geojsonVtOptions)}catch(ve){return B(ve)}N.loaded={};var we={};if(J){var ge=J.finish();ge&&(we.resourceTiming={},we.resourceTiming[q.source]=JSON.parse(JSON.stringify(ge)))}B(null,we)})}},ei.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ei.prototype.reloadTile=function(N,B){var q=this.loaded;return q&&q[N.uid]?Ta.prototype.reloadTile.call(this,N,B):this.loadTile(N,B)},ei.prototype.loadGeoJSON=function(N,B){if(N.request)u.getJSON(N.request,B);else{if(typeof N.data!="string")return B(new Error("Input data given to '"+N.source+"' is not a valid GeoJSON object."));try{return B(null,JSON.parse(N.data))}catch{return B(new Error("Input data given to '"+N.source+"' is not a valid GeoJSON object."))}}},ei.prototype.removeSource=function(N,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),B()},ei.prototype.getClusterExpansionZoom=function(N,B){try{B(null,this._geoJSONIndex.getClusterExpansionZoom(N.clusterId))}catch(q){B(q)}},ei.prototype.getClusterChildren=function(N,B){try{B(null,this._geoJSONIndex.getChildren(N.clusterId))}catch(q){B(q)}},ei.prototype.getClusterLeaves=function(N,B){try{B(null,this._geoJSONIndex.getLeaves(N.clusterId,N.limit,N.offset))}catch(q){B(q)}},ei);function ei(N,B,q,J){Ta.call(this,N,B,q,Jl),J&&(this.loadGeoJSON=J)}return Nr.prototype.setReferrer=function(N,B){this.referrer=B},Nr.prototype.setImages=function(N,B,q){for(var J in this.availableImages[N]=B,this.workerSources[N]){var le=this.workerSources[N][J];for(var de in le)le[de].availableImages=B}q()},Nr.prototype.setLayers=function(N,B,q){this.getLayerIndex(N).replace(B),q()},Nr.prototype.updateLayers=function(N,B,q){this.getLayerIndex(N).update(B.layers,B.removedIds),q()},Nr.prototype.loadTile=function(N,B,q){this.getWorkerSource(N,B.type,B.source).loadTile(B,q)},Nr.prototype.loadDEMTile=function(N,B,q){this.getDEMWorkerSource(N,B.source).loadTile(B,q)},Nr.prototype.reloadTile=function(N,B,q){this.getWorkerSource(N,B.type,B.source).reloadTile(B,q)},Nr.prototype.abortTile=function(N,B,q){this.getWorkerSource(N,B.type,B.source).abortTile(B,q)},Nr.prototype.removeTile=function(N,B,q){this.getWorkerSource(N,B.type,B.source).removeTile(B,q)},Nr.prototype.removeDEMTile=function(N,B){this.getDEMWorkerSource(N,B.source).removeTile(B)},Nr.prototype.removeSource=function(N,B,q){if(this.workerSources[N]&&this.workerSources[N][B.type]&&this.workerSources[N][B.type][B.source]){var J=this.workerSources[N][B.type][B.source];delete this.workerSources[N][B.type][B.source],J.removeSource!==void 0?J.removeSource(B,q):q()}},Nr.prototype.loadWorkerSource=function(N,B,q){try{this.self.importScripts(B.url),q()}catch(J){q(J.toString())}},Nr.prototype.syncRTLPluginState=function(N,B,q){try{u.plugin.setState(B);var J=u.plugin.getPluginURL();if(u.plugin.isLoaded()&&!u.plugin.isParsed()&&J!=null){this.self.importScripts(J);var le=u.plugin.isParsed();q(le?void 0:new Error("RTL Text Plugin failed to import scripts from "+J),le)}}catch(de){q(de.toString())}},Nr.prototype.getAvailableImages=function(N){var B=this.availableImages[N];return B||[]},Nr.prototype.getLayerIndex=function(N){var B=this.layerIndexes[N];return B||(this.layerIndexes[N]=new G)},Nr.prototype.getWorkerSource=function(N,B,q){var J=this;return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][B]||(this.workerSources[N][B]={}),this.workerSources[N][B][q]||(this.workerSources[N][B][q]=new this.workerSourceTypes[B]({send:function(le,de,we){J.actor.send(le,de,we,N)}},this.getLayerIndex(N),this.getAvailableImages(N))),this.workerSources[N][B][q]},Nr.prototype.getDEMWorkerSource=function(N,B){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][B]||(this.demWorkerSources[N][B]=new pt),this.demWorkerSources[N][B]},Nr.prototype.enforceCacheSizeLimit=function(N,B){u.enforceCacheSizeLimit(B)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Nr(self)),Nr}),a(0,function(u){var A=u.createCommonjsModule(function(r){function l(x){return!f(x)}function f(x){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if("Worker"in window&&"Blob"in window&&"URL"in window){var E,L,O=new Blob([""],{type:"text/javascript"}),j=URL.createObjectURL(O);try{L=new Worker(j),E=!0}catch{E=!1}return L&&L.terminate(),URL.revokeObjectURL(j),E}}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var L=E.getContext("2d");if(L){var O=L.getImageData(0,0,1,1);return O&&O.width===E.width}}()?(g[T=x&&x.failIfMajorPerformanceCaveat]===void 0&&(g[T]=function(){var E,L,O,j=(E=T,L=document.createElement("canvas"),(O=Object.create(l.webGLContextAttributes)).failIfMajorPerformanceCaveat=E,L.probablySupportsContext?L.probablySupportsContext("webgl",O)||L.probablySupportsContext("experimental-webgl",O):L.supportsContext?L.supportsContext("webgl",O)||L.supportsContext("experimental-webgl",O):L.getContext("webgl",O)||L.getContext("experimental-webgl",O));if(!j)return!1;var V=j.createShader(j.VERTEX_SHADER);return!(!V||j.isContextLost())&&(j.shaderSource(V,"void main() {}"),j.compileShader(V),j.getShaderParameter(V,j.COMPILE_STATUS)===!0)}()),g[T]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var T}r.exports?r.exports=l:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=l,window.mapboxgl.notSupportedReason=f);var g={};l.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),k={create:function(r,l,f){var g=u.window.document.createElement(r);return l!==void 0&&(g.className=l),f&&f.appendChild(g),g},createNS:function(r,l){return u.window.document.createElementNS(r,l)}},G=u.window.document&&u.window.document.documentElement.style;function W(r){if(!G)return r[0];for(var l=0;l<r.length;l++)if(r[l]in G)return r[l];return r[0]}var se,ne=W(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);k.disableDrag=function(){G&&ne&&(se=G[ne],G[ne]="none")},k.enableDrag=function(){G&&ne&&(G[ne]=se)};var Ee=W(["transform","WebkitTransform"]),Ge=!(k.setTransform=function(r,l){r.style[Ee]=l});try{var pt=Object.defineProperty({},"passive",{get:function(){Ge=!0}});u.window.addEventListener("test",pt,pt),u.window.removeEventListener("test",pt,pt)}catch{Ge=!1}k.addEventListener=function(r,l,f,g){g===void 0&&(g={}),r.addEventListener(l,f,"passive"in g&&Ge?g:g.capture)},k.removeEventListener=function(r,l,f,g){g===void 0&&(g={}),r.removeEventListener(l,f,"passive"in g&&Ge?g:g.capture)};var Wt=function(r){r.preventDefault(),r.stopPropagation(),u.window.removeEventListener("click",Wt,!0)};k.suppressClick=function(){u.window.addEventListener("click",Wt,!0),u.window.setTimeout(function(){u.window.removeEventListener("click",Wt,!0)},0)},k.mousePos=function(r,l){var f=r.getBoundingClientRect();return new u.Point(l.clientX-f.left-r.clientLeft,l.clientY-f.top-r.clientTop)},k.touchPos=function(r,l){for(var f=r.getBoundingClientRect(),g=[],x=0;x<l.length;x++)g.push(new u.Point(l[x].clientX-f.left-r.clientLeft,l[x].clientY-f.top-r.clientTop));return g},k.mouseButton=function(r){return u.window.InstallTrigger!==void 0&&r.button===2&&r.ctrlKey&&0<=u.window.navigator.platform.toUpperCase().indexOf("MAC")?0:r.button},k.remove=function(r){r.parentNode&&r.parentNode.removeChild(r)};var nt,qt=((nt=u.Evented)&&(rn.__proto__=nt),((rn.prototype=Object.create(nt&&nt.prototype)).constructor=rn).prototype.isLoaded=function(){return this.loaded},rn.prototype.setLoaded=function(r){if(this.loaded!==r&&(this.loaded=r)){for(var l=0,f=this.requestors;l<f.length;l+=1){var g=f[l];this._notify(g.ids,g.callback)}this.requestors=[]}},rn.prototype.getImage=function(r){return this.images[r]},rn.prototype.addImage=function(r,l){this._validate(r,l)&&(this.images[r]=l)},rn.prototype._validate=function(r,l){var f=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new u.ErrorEvent(new Error('Image "'+r+'" has invalid "stretchX" value'))),f=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new u.ErrorEvent(new Error('Image "'+r+'" has invalid "stretchY" value'))),f=!1),this._validateContent(l.content,l)||(this.fire(new u.ErrorEvent(new Error('Image "'+r+'" has invalid "content" value'))),f=!1),f},rn.prototype._validateStretch=function(r,l){if(!r)return!0;for(var f=0,g=0,x=r;g<x.length;g+=1){var T=x[g];if(T[0]<f||T[1]<T[0]||l<T[1])return!1;f=T[1]}return!0},rn.prototype._validateContent=function(r,l){return!(r&&(r.length!==4||r[0]<0||l.data.width<r[0]||r[1]<0||l.data.height<r[1]||r[2]<0||l.data.width<r[2]||r[3]<0||l.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))},rn.prototype.updateImage=function(r,l){l.version=this.images[r].version+1,this.images[r]=l,this.updatedImages[r]=!0},rn.prototype.removeImage=function(r){var l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()},rn.prototype.listImages=function(){return Object.keys(this.images)},rn.prototype.getImages=function(r,l){var f=!0;if(!this.isLoaded())for(var g=0,x=r;g<x.length;g+=1)this.images[x[g]]||(f=!1);this.isLoaded()||f?this._notify(r,l):this.requestors.push({ids:r,callback:l})},rn.prototype._notify=function(r,l){for(var f={},g=0,x=r;g<x.length;g+=1){var T=x[g];this.images[T]||this.fire(new u.Event("styleimagemissing",{id:T}));var E=this.images[T];E?f[T]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:Boolean(E.userImage&&E.userImage.render)}:u.warnOnce('Image "'+T+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}l(null,f)},rn.prototype.getPixelSize=function(){var r=this.atlasImage;return{width:r.width,height:r.height}},rn.prototype.getPattern=function(r){var l=this.patterns[r],f=this.getImage(r);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{var g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},x=new u.ImagePosition(g,f);this.patterns[r]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[r].position},rn.prototype.bind=function(r){var l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new u.Texture(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)},rn.prototype._updatePatternAtlas=function(){var r=[];for(var l in this.patterns)r.push(this.patterns[l].bin);var f=u.potpack(r),g=f.w,x=f.h,T=this.atlasImage;for(var E in T.resize({width:g||1,height:x||1}),this.patterns){var L=this.patterns[E].bin,O=L.x+1,j=L.y+1,V=this.images[E].data,H=V.width,K=V.height;u.RGBAImage.copy(V,T,{x:0,y:0},{x:O,y:j},{width:H,height:K}),u.RGBAImage.copy(V,T,{x:0,y:K-1},{x:O,y:j-1},{width:H,height:1}),u.RGBAImage.copy(V,T,{x:0,y:0},{x:O,y:j+K},{width:H,height:1}),u.RGBAImage.copy(V,T,{x:H-1,y:0},{x:O-1,y:j},{width:1,height:K}),u.RGBAImage.copy(V,T,{x:0,y:0},{x:O+H,y:j},{width:1,height:K})}this.dirty=!0},rn.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},rn.prototype.dispatchRenderCallbacks=function(r){for(var l=0,f=r;l<f.length;l+=1){var g=f[l];if(!this.callbackDispatchedThisFrame[g]){this.callbackDispatchedThisFrame[g]=!0;var x=this.images[g];E=void 0,(E=(T=x).userImage)&&E.render&&E.render()&&(T.data.replace(new Uint8Array(E.data.buffer)),1)&&this.updateImage(g,x)}}var T,E},rn),tn=qa,ho=qa,un=1e20;function rn(){nt.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.RGBAImage({width:1,height:1}),this.dirty=!0}function qa(r,l,f,g,x,T){this.fontSize=r||24,this.buffer=l===void 0?3:l,this.cutoff=g||.25,this.fontFamily=x||"sans-serif",this.fontWeight=T||"normal",this.radius=f||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function Wl(r,l,f,g,x,T,E){for(var L=0;L<l;L++){for(var O=0;O<f;O++)g[O]=r[O*l+L];for(il(g,x,T,E,f),O=0;O<f;O++)r[O*l+L]=x[O]}for(O=0;O<f;O++){for(L=0;L<l;L++)g[L]=r[O*l+L];for(il(g,x,T,E,l),L=0;L<l;L++)r[O*l+L]=Math.sqrt(x[L])}}function il(r,l,f,g,x){g[f[0]=0]=-un,g[1]=+un;for(var T=1,E=0;T<x;T++){for(var L=(r[T]+T*T-(r[f[E]]+f[E]*f[E]))/(2*T-2*f[E]);L<=g[E];)E--,L=(r[T]+T*T-(r[f[E]]+f[E]*f[E]))/(2*T-2*f[E]);f[++E]=T,g[E]=L,g[E+1]=+un}for(E=T=0;T<x;T++){for(;g[E+1]<T;)E++;l[T]=(T-f[E])*(T-f[E])+r[f[E]]}}function Rn(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}function sc(){this.specification=u.styleSpec.light.position}function nn(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}qa.prototype.draw=function(r){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(r,this.buffer,this.middle);for(var l=this.ctx.getImageData(0,0,this.size,this.size),f=new Uint8ClampedArray(this.size*this.size),g=0;g<this.size*this.size;g++){var x=l.data[4*g+3]/255;this.gridOuter[g]=x==1?0:x==0?un:Math.pow(Math.max(0,.5-x),2),this.gridInner[g]=x==1?un:x==0?0:Math.pow(Math.max(0,x-.5),2)}for(Wl(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Wl(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),g=0;g<this.size*this.size;g++)f[g]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[g]-this.gridInner[g])/this.radius+this.cutoff))));return f},tn.default=ho,Rn.prototype.setURL=function(r){this.url=r},Rn.prototype.getGlyphs=function(r,l){var f=this,g=[];for(var x in r)for(var T=0,E=r[x];T<E.length;T+=1)g.push({stack:x,id:E[T]});u.asyncAll(g,function(L,O){var j=L.stack,V=L.id,H=f.entries[j],K=(H=H||(f.entries[j]={glyphs:{},requests:{},ranges:{}})).glyphs[V];if(K===void 0){if(K=f._tinySDF(H,j,V))return H.glyphs[V]=K,void O(null,{stack:j,id:V,glyph:K});var Q=Math.floor(V/256);if(65535<256*Q)O(new Error("glyphs > 65535 not supported"));else if(H.ranges[Q])O(null,{stack:j,id:V,glyph:K});else{var ee=H.requests[Q];ee||(ee=H.requests[Q]=[],Rn.loadGlyphRange(j,Q,f.url,f.requestManager,function(re,ue){if(ue){for(var ae in ue)f._doesCharSupportLocalGlyph(+ae)||(H.glyphs[+ae]=ue[+ae]);H.ranges[Q]=!0}for(var ye=0,he=ee;ye<he.length;ye+=1)(0,he[ye])(re,ue);delete H.requests[Q]})),ee.push(function(re,ue){re?O(re):ue&&O(null,{stack:j,id:V,glyph:ue[V]||null})})}}else O(null,{stack:j,id:V,glyph:K})},function(L,O){if(L)l(L);else if(O){for(var j={},V=0,H=O;V<H.length;V+=1){var K=H[V],Q=K.stack,ee=K.id,re=K.glyph;(j[Q]||(j[Q]={}))[ee]=re&&{id:re.id,bitmap:re.bitmap.clone(),metrics:re.metrics}}l(null,j)}})},Rn.prototype._doesCharSupportLocalGlyph=function(r){return!!this.localIdeographFontFamily&&(u.isChar["CJK Unified Ideographs"](r)||u.isChar["Hangul Syllables"](r)||u.isChar.Hiragana(r)||u.isChar.Katakana(r))},Rn.prototype._tinySDF=function(r,l,f){var g=this.localIdeographFontFamily;if(g&&this._doesCharSupportLocalGlyph(f)){var x=r.tinySDF;if(!x){var T="400";/bold/i.test(l)?T="900":/medium/i.test(l)?T="500":/light/i.test(l)&&(T="200"),x=r.tinySDF=new Rn.TinySDF(24,3,8,.25,g,T)}return{id:f,bitmap:new u.AlphaImage({width:30,height:30},x.draw(String.fromCharCode(f))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Rn.loadGlyphRange=function(r,l,f,g,x){var T=256*l,E=255+T,L=g.transformRequest(g.normalizeGlyphsURL(f).replace("{fontstack}",r).replace("{range}",T+"-"+E),u.ResourceType.Glyphs);u.getArrayBuffer(L,function(O,j){if(O)x(O);else if(j){for(var V={},H=0,K=u.parseGlyphPBF(j);H<K.length;H+=1){var Q=K[H];V[Q.id]=Q}x(null,V)}})},Rn.TinySDF=tn,sc.prototype.possiblyEvaluate=function(r,l){return u.sphericalToCartesian(r.expression.evaluate(l))},sc.prototype.interpolate=function(r,l,f){return{x:u.number(r.x,l.x,f),y:u.number(r.y,l.y,f),z:u.number(r.z,l.z,f)}};var fo,zm=new u.Properties({anchor:new u.DataConstantProperty(u.styleSpec.light.anchor),position:new sc,color:new u.DataConstantProperty(u.styleSpec.light.color),intensity:new u.DataConstantProperty(u.styleSpec.light.intensity)}),lc=((fo=u.Evented)&&(mo.__proto__=fo),((mo.prototype=Object.create(fo&&fo.prototype)).constructor=mo).prototype.getLight=function(){return this._transitionable.serialize()},mo.prototype.setLight=function(r,l){if(l===void 0&&(l={}),!this._validate(u.validateLight,r,l))for(var f in r){var g=r[f];u.endsWith(f,"-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}},mo.prototype.updateTransitions=function(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)},mo.prototype.hasTransition=function(){return this._transitioning.hasTransition()},mo.prototype.recalculate=function(r){this.properties=this._transitioning.possiblyEvaluate(r)},mo.prototype._validate=function(r,l,f){return(!f||f.validate!==!1)&&u.emitValidationErrors(this,r.call(u.validateStyle,u.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.styleSpec})))},mo);function mo(r){fo.call(this),this._transitionable=new u.Transitionable(zm),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}function wa(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=u.uniqueId();for(var f=this.workerPool.acquire(this.id),g=0;g<f.length;g++){var x=new wa.Actor(f[g],l,this.id);x.name="Worker "+g,this.actors.push(x)}}function Op(r,l,f){function g(x,T){if(x)return f(x);if(T){var E=u.pick(u.extend(T,r),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);T.vector_layers&&(E.vectorLayers=T.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(L){return L.id})),E.tiles=l.canonicalizeTileset(E,r.url),f(null,E)}}return r.url?u.getJSON(l.transformRequest(l.normalizeSourceURL(r.url),u.ResourceType.Source),g):u.browser.frame(function(){return g(null,r)})}function Yl(r,l,f){this.bounds=u.LngLatBounds.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=f||24}nn.prototype.getDash=function(r,l){var f=r.join(",")+String(l);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,l)),this.dashEntry[f]},nn.prototype.getDashRanges=function(r,l,f){var g=[],x=r.length%2==1?-r[r.length-1]*f:0,T=r[0]*f,E=!0;g.push({left:x,right:T,isDash:E,zeroLength:r[0]===0});for(var L=r[0],O=1;O<r.length;O++){var j=r[O];g.push({left:x=L*f,right:T=(L+=j)*f,isDash:E=!E,zeroLength:j===0})}return g},nn.prototype.addRoundDash=function(r,l,f){for(var g=l/2,x=-f;x<=f;x++)for(var T=this.width*(this.nextRow+f+x),E=0,L=r[E],O=0;O<this.width;O++){1<O/L.right&&(L=r[++E]);var j=Math.abs(O-L.left),V=Math.abs(O-L.right),H=Math.min(j,V),K=void 0,Q=x/f*(1+g);if(L.isDash){var ee=g-Math.abs(Q);K=Math.sqrt(H*H+ee*ee)}else K=g-Math.sqrt(H*H+Q*Q);this.data[T+O]=Math.max(0,Math.min(255,K+128))}},nn.prototype.addRegularDash=function(r){for(var l=r.length-1;0<=l;--l){var f=r[l],g=r[l+1];f.zeroLength?r.splice(l,1):g&&g.isDash===f.isDash&&(g.left=f.left,r.splice(l,1))}var x=r[0],T=r[r.length-1];x.isDash===T.isDash&&(x.left=T.left-this.width,T.right=x.right+this.width);for(var E=this.width*this.nextRow,L=0,O=r[L],j=0;j<this.width;j++){1<j/O.right&&(O=r[++L]);var V=Math.abs(j-O.left),H=Math.abs(j-O.right),K=Math.min(V,H);this.data[E+j]=Math.max(0,Math.min(255,(O.isDash?K:-K)+128))}},nn.prototype.addDash=function(r,l){var f=l?7:0,g=2*f+1;if(this.nextRow+g>this.height)return u.warnOnce("LineAtlas out of space"),null;for(var x=0,T=0;T<r.length;T++)x+=r[T];if(x!==0){var E=this.width/x,L=this.getDashRanges(r,this.width,E);l?this.addRoundDash(L,E,f):this.addRegularDash(L)}var O={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:x};return this.nextRow+=g,this.dirty=!0,O},nn.prototype.bind=function(r){var l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))},wa.prototype.broadcast=function(r,l,f){u.asyncAll(this.actors,function(g,x){g.send(r,l,x)},f=f||function(){})},wa.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},wa.prototype.remove=function(){this.actors.forEach(function(r){r.remove()}),this.actors=[],this.workerPool.release(this.id)},wa.Actor=u.Actor,Yl.prototype.validateBounds=function(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]},Yl.prototype.contains=function(r){var l=Math.pow(2,r.z),f=Math.floor(u.mercatorXfromLng(this.bounds.getWest())*l),g=Math.floor(u.mercatorYfromLat(this.bounds.getNorth())*l),x=Math.ceil(u.mercatorXfromLng(this.bounds.getEast())*l),T=Math.ceil(u.mercatorYfromLat(this.bounds.getSouth())*l);return r.x>=f&&r.x<x&&r.y>=g&&r.y<T};var Ko,Za,$o,ba,uc,Ga,Jn,ol=((Jn=u.Evented)&&(An.__proto__=Jn),((An.prototype=Object.create(Jn&&Jn.prototype)).constructor=An).prototype.load=function(){var r=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Op(this._options,this.map._requestManager,function(l,f){r._tileJSONRequest=null,r._loaded=!0,l?r.fire(new u.ErrorEvent(l)):f&&(u.extend(r,f),f.bounds&&(r.tileBounds=new Yl(f.bounds,r.minzoom,r.maxzoom)),u.postTurnstileEvent(f.tiles,r.map._requestManager._customAccessToken),u.postMapLoadEvent(f.tiles,r.map._getMapId(),r.map._requestManager._skuToken,r.map._requestManager._customAccessToken),r.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})},An.prototype.loaded=function(){return this._loaded},An.prototype.hasTile=function(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)},An.prototype.onAdd=function(r){this.map=r,this.load()},An.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},An.prototype.serialize=function(){return u.extend({},this._options)},An.prototype.loadTile=function(r,l){var f=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(f,u.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:u.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(T,E){return delete r.request,r.aborted?l(null):T&&T.status!==404?l(T):(E&&E.resourceTiming&&(r.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&E&&r.setExpiryData(E),r.loadVectorData(E,this.map.painter),u.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=l:r.request=r.actor.send("reloadTile",g,x.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",g,x.bind(this)))},An.prototype.abortTile=function(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)},An.prototype.unloadTile=function(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)},An.prototype.hasTransition=function(){return!1},An),Mn=((Ga=u.Evented)&&(bi.__proto__=Ga),((bi.prototype=Object.create(Ga&&Ga.prototype)).constructor=bi).prototype.load=function(){var r=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Op(this._options,this.map._requestManager,function(l,f){r._tileJSONRequest=null,r._loaded=!0,l?r.fire(new u.ErrorEvent(l)):f&&(u.extend(r,f),f.bounds&&(r.tileBounds=new Yl(f.bounds,r.minzoom,r.maxzoom)),u.postTurnstileEvent(f.tiles),u.postMapLoadEvent(f.tiles,r.map._getMapId(),r.map._requestManager._skuToken),r.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})},bi.prototype.loaded=function(){return this._loaded},bi.prototype.onAdd=function(r){this.map=r,this.load()},bi.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},bi.prototype.serialize=function(){return u.extend({},this._options)},bi.prototype.hasTile=function(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)},bi.prototype.loadTile=function(r,l){var f=this,g=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);r.request=u.getImage(this.map._requestManager.transformRequest(g,u.ResourceType.Tile),function(x,T){if(delete r.request,r.aborted)r.state="unloaded",l(null);else if(x)r.state="errored",l(x);else if(T){f.map._refreshExpiredTiles&&r.setExpiryData(T),delete T.cacheControl,delete T.expires;var E=f.map.painter.context,L=E.gl;r.texture=f.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new u.Texture(E,T,L.RGBA,{useMipmap:!0}),r.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),E.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax)),r.state="loaded",u.cacheEntryPossiblyAdded(f.dispatcher),l(null)}})},bi.prototype.abortTile=function(r,l){r.request&&(r.request.cancel(),delete r.request),l()},bi.prototype.unloadTile=function(r,l){r.texture&&this.map.painter.saveTileTexture(r.texture),l()},bi.prototype.hasTransition=function(){return!1},bi),Kl=(go.__proto__=uc=Mn,((go.prototype=Object.create(uc&&uc.prototype)).constructor=go).prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},go.prototype.loadTile=function(r,l){var f=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);r.request=u.getImage(this.map._requestManager.transformRequest(f,u.ResourceType.Tile),function(g,x){if(delete r.request,r.aborted)r.state="unloaded",l(null);else if(g)r.state="errored",l(g);else if(x){this.map._refreshExpiredTiles&&r.setExpiryData(x),delete x.cacheControl,delete x.expires;var T=u.window.ImageBitmap&&x instanceof u.window.ImageBitmap&&u.offscreenCanvasSupported()?x:u.browser.getImageData(x,1),E={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:T,encoding:this.encoding};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",E,function(L,O){L&&(r.state="errored",l(L)),O&&(r.dem=O,r.needsHillshadePrepare=!0,r.state="loaded",l(null))}.bind(this)))}}.bind(this)),r.neighboringTiles=this._getNeighboringTiles(r.tileID)},go.prototype._getNeighboringTiles=function(r){var l=r.canonical,f=Math.pow(2,l.z),g=(l.x-1+f)%f,x=l.x===0?r.wrap-1:r.wrap,T=(l.x+1+f)%f,E=l.x+1===f?r.wrap+1:r.wrap,L={};return L[new u.OverscaledTileID(r.overscaledZ,x,l.z,g,l.y).key]={backfilled:!1},L[new u.OverscaledTileID(r.overscaledZ,E,l.z,T,l.y).key]={backfilled:!1},0<l.y&&(L[new u.OverscaledTileID(r.overscaledZ,x,l.z,g,l.y-1).key]={backfilled:!1},L[new u.OverscaledTileID(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},L[new u.OverscaledTileID(r.overscaledZ,E,l.z,T,l.y-1).key]={backfilled:!1}),l.y+1<f&&(L[new u.OverscaledTileID(r.overscaledZ,x,l.z,g,l.y+1).key]={backfilled:!1},L[new u.OverscaledTileID(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},L[new u.OverscaledTileID(r.overscaledZ,E,l.z,T,l.y+1).key]={backfilled:!1}),L},go.prototype.unloadTile=function(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})},go),$l=((ba=u.Evented)&&(Hr.__proto__=ba),((Hr.prototype=Object.create(ba&&ba.prototype)).constructor=Hr).prototype.load=function(){var r=this;this.fire(new u.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(l){if(l)r.fire(new u.ErrorEvent(l));else{var f={dataType:"source",sourceDataType:"metadata"};r._collectResourceTiming&&r._resourceTiming&&0<r._resourceTiming.length&&(f.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new u.Event("data",f))}})},Hr.prototype.onAdd=function(r){this.map=r,this.load()},Hr.prototype.setData=function(r){var l=this;return this._data=r,this.fire(new u.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(f){if(f)l.fire(new u.ErrorEvent(f));else{var g={dataType:"source",sourceDataType:"content"};l._collectResourceTiming&&l._resourceTiming&&0<l._resourceTiming.length&&(g.resourceTiming=l._resourceTiming,l._resourceTiming=[]),l.fire(new u.Event("data",g))}}),this},Hr.prototype.getClusterExpansionZoom=function(r,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},l),this},Hr.prototype.getClusterChildren=function(r,l){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},l),this},Hr.prototype.getClusterLeaves=function(r,l,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:l,offset:f},g),this},Hr.prototype._updateWorkerData=function(r){var l=this;this._loaded=!1;var f=u.extend({},this.workerOptions),g=this._data;typeof g=="string"?(f.request=this.map._requestManager.transformRequest(u.browser.resolveURL(g),u.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(g),this.actor.send(this.type+".loadData",f,function(x,T){l._removed||T&&T.abandoned||(l._loaded=!0,T&&T.resourceTiming&&T.resourceTiming[l.id]&&(l._resourceTiming=T.resourceTiming[l.id].slice(0)),l.actor.send(l.type+".coalesce",{source:f.source},null),r(x))})},Hr.prototype.loaded=function(){return this._loaded},Hr.prototype.loadTile=function(r,l){var f=this,g=r.actor?"reloadTile":"loadTile";r.actor=this.actor,r.request=this.actor.send(g,{type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:u.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(x,T){return delete r.request,r.unloadVectorData(),r.aborted?l(null):x?l(x):(r.loadVectorData(T,f.map.painter,g=="reloadTile"),l(null))})},Hr.prototype.abortTile=function(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0},Hr.prototype.unloadTile=function(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})},Hr.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Hr.prototype.serialize=function(){return u.extend({},this._options,{type:this.type,data:this._data})},Hr.prototype.hasTransition=function(){return!1},Hr),bs=u.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Xo=(($o=u.Evented)&&(Ni.__proto__=$o),((Ni.prototype=Object.create($o&&$o.prototype)).constructor=Ni).prototype.load=function(r,l){var f=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this.url=this.options.url,u.getImage(this.map._requestManager.transformRequest(this.url,u.ResourceType.Image),function(g,x){f._loaded=!0,g?f.fire(new u.ErrorEvent(g)):x&&(f.image=x,r&&(f.coordinates=r),l&&l(),f._finishLoading())})},Ni.prototype.loaded=function(){return this._loaded},Ni.prototype.updateImage=function(r){var l=this;return this.image&&r.url&&(this.options.url=r.url,this.load(r.coordinates,function(){l.texture=null})),this},Ni.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Ni.prototype.onAdd=function(r){this.map=r,this.load()},Ni.prototype.setCoordinates=function(r){var l=this,f=(this.coordinates=r).map(u.MercatorCoordinate.fromLngLat);this.tileID=function(){for(var x=1/0,T=1/0,E=-1/0,L=-1/0,O=0,j=f;O<j.length;O+=1){var V=j[O];x=Math.min(x,V.x),T=Math.min(T,V.y),E=Math.max(E,V.x),L=Math.max(L,V.y)}var H=Math.max(E-x,L-T),K=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),Q=Math.pow(2,K);return new u.CanonicalTileID(K,Math.floor((x+E)/2*Q),Math.floor((T+L)/2*Q))}(),this.minzoom=this.maxzoom=this.tileID.z;var g=f.map(function(x){return l.tileID.getTilePoint(x)._round()});return this._boundsArray=new u.StructArrayLayout4i8,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,u.EXTENT,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,u.EXTENT),this._boundsArray.emplaceBack(g[2].x,g[2].y,u.EXTENT,u.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})),this},Ni.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var r=this.map.painter.context,l=r.gl;for(var f in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,bs.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new u.Texture(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[f];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},Ni.prototype.loadTile=function(r,l){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r).buckets={}:r.state="errored",l(null)},Ni.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Ni.prototype.hasTransition=function(){return!1},Ni),no=(Qn.__proto__=Za=Xo,((Qn.prototype=Object.create(Za&&Za.prototype)).constructor=Qn).prototype.load=function(){var r=this;this._loaded=!1;var l=this.options;this.urls=[];for(var f=0,g=l.urls;f<g.length;f+=1)this.urls.push(this.map._requestManager.transformRequest(g[f],u.ResourceType.Source).url);u.getVideo(this.urls,function(x,T){r._loaded=!0,x?r.fire(new u.ErrorEvent(x)):T&&(r.video=T,r.video.loop=!0,r.video.addEventListener("playing",function(){r.map.triggerRepaint()}),r.map&&r.video.play(),r._finishLoading())})},Qn.prototype.pause=function(){this.video&&this.video.pause()},Qn.prototype.play=function(){this.video&&this.video.play()},Qn.prototype.seek=function(r){if(this.video){var l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new u.ErrorEvent(new u.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+l.start(0)+" and "+l.end(0)+"-second mark."))):this.video.currentTime=r}},Qn.prototype.getVideo=function(){return this.video},Qn.prototype.onAdd=function(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Qn.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var r=this.map.painter.context,l=r.gl;for(var f in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,bs.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new u.Texture(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[f];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},Qn.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Qn.prototype.hasTransition=function(){return this.video&&!this.video.paused},Qn),Rp=(zi.__proto__=Ko=Xo,((zi.prototype=Object.create(Ko&&Ko.prototype)).constructor=zi).prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof u.window.HTMLCanvasElement?this.options.canvas:u.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},zi.prototype.getCanvas=function(){return this.canvas},zi.prototype.onAdd=function(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()},zi.prototype.onRemove=function(){this.pause()},zi.prototype.prepare=function(){var r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var l=this.map.painter.context,f=l.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,bs.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new u.Texture(l,this.canvas,f.RGBA,{premultiply:!0}),this.tiles){var x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture)}}},zi.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},zi.prototype.hasTransition=function(){return this._playing},zi.prototype._hasInvalidDimensions=function(){for(var r=0,l=[this.canvas.width,this.canvas.height];r<l.length;r+=1){var f=l[r];if(isNaN(f)||f<=0)return!0}return!1},zi),zo={vector:ol,raster:Mn,"raster-dem":Kl,geojson:$l,video:no,image:Xo,canvas:Rp};function zi(r,l,f,g){Ko.call(this,r,l,f,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(function(x){return!Array.isArray(x)||x.length!==2||x.some(function(T){return typeof T!="number"})})||this.fire(new u.ErrorEvent(new u.ValidationError("sources."+r,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.ErrorEvent(new u.ValidationError("sources."+r,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.ErrorEvent(new u.ValidationError("sources."+r,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof u.window.HTMLCanvasElement||this.fire(new u.ErrorEvent(new u.ValidationError("sources."+r,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.ErrorEvent(new u.ValidationError("sources."+r,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}function Qn(r,l,f,g){Za.call(this,r,l,f,g),this.roundZoom=!0,this.type="video",this.options=l}function Ni(r,l,f,g){$o.call(this),this.id=r,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l}function Hr(r,l,f,g){ba.call(this),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(g),this._data=l.data,this._options=u.extend({},l),this._collectResourceTiming=l.collectResourceTiming,this._resourceTiming=[],l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;var x=u.EXTENT/this.tileSize;this.workerOptions=u.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*x,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*x,extent:u.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?Math.min(l.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.EXTENT,radius:(l.clusterRadius||50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties},l.workerOptions)}function go(r,l,f,g){uc.call(this,r,l,f,g),this.type="raster-dem",this.maxzoom=22,this._options=u.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}function bi(r,l,f,g){Ga.call(this),this.id=r,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.extend({type:"raster"},l),u.extend(this,u.pick(l,["url","scheme","tileSize"]))}function An(r,l,f,g){if(Jn.call(this),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.extend(this,u.pick(l,["url","scheme","tileSize","promoteId"])),this._options=u.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}function Jo(r,l,f,g,x,T){var E,L,O,j=function(ye,he,me){if(ye)for(var Ce=0,ke=ye;Ce<ke.length;Ce+=1){var De=he[ke[Ce]];if(De&&De.source===me&&De.type==="fill-extrusion")return!0}else for(var Ve in he){var qe=he[Ve];if(qe.source===me&&qe.type==="fill-extrusion")return!0}return!1}(x&&x.layers,l,r.id),V=T.maxPitchScaleFactor(),H=r.tilesIn(g,V,j);H.sort(io);for(var K=[],Q=0,ee=H;Q<ee.length;Q+=1){var re=ee[Q];K.push({wrappedTileID:re.tileID.wrapped().key,queryResults:re.tile.queryRenderedFeatures(l,f,r._state,re.queryGeometry,re.cameraQueryGeometry,re.scale,x,T,V,(E=r.transform,L=re.tileID,O=u.identity([]),u.translate(O,O,[1,1,0]),u.scale(O,O,[.5*E.width,.5*E.height,1]),u.multiply(O,O,E.calculatePosMatrix(L.toUnwrapped()))))})}var ue=function(){for(var ye={},he={},me=0,Ce=K;me<Ce.length;me+=1){var ke=Ce[me],De=ke.queryResults,Ve=ke.wrappedTileID,qe=he[Ve]=he[Ve]||{};for(var Ke in De)for(var lt=De[Ke],ht=qe[Ke]=qe[Ke]||{},dt=ye[Ke]=ye[Ke]||[],Tt=0,mt=lt;Tt<mt.length;Tt+=1){var Mt=mt[Tt];ht[Mt.featureIndex]||(ht[Mt.featureIndex]=!0,dt.push(Mt))}}return ye}();for(var ae in ue)ue[ae].forEach(function(ye){var he=ye.feature,me=r.getFeatureState(he.layer["source-layer"],he.id);he.source=he.layer.source,he.layer["source-layer"]&&(he.sourceLayer=he.layer["source-layer"]),he.state=me});return ue}function io(r,l){var f=r.tileID,g=l.tileID;return f.overscaledZ-g.overscaledZ||f.canonical.y-g.canonical.y||f.wrap-g.wrap||f.canonical.x-g.canonical.x}function qi(r,l){this.max=r,this.onRemove=l,this.reset()}function Ha(r,l,f){var g=(this.context=r).gl;this.buffer=g.createBuffer(),this.dynamicDraw=Boolean(f),this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}function Cs(r,l,f,g){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=g;var x=(this.context=r).gl;this.buffer=x.createBuffer(),r.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}qi.prototype.reset=function(){for(var r in this.data)for(var l=0,f=this.data[r];l<f.length;l+=1){var g=f[l];g.timeout&&clearTimeout(g.timeout),this.onRemove(g.value)}return this.data={},this.order=[],this},qi.prototype.add=function(r,l,f){var g=this,x=r.wrapped().key;this.data[x]===void 0&&(this.data[x]=[]);var T={value:l,timeout:void 0};if(f!==void 0&&(T.timeout=setTimeout(function(){g.remove(r,T)},f)),this.data[x].push(T),this.order.push(x),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},qi.prototype.has=function(r){return r.wrapped().key in this.data},qi.prototype.getAndRemove=function(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null},qi.prototype._getAndRemoveByKey=function(r){var l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value},qi.prototype.getByKey=function(r){var l=this.data[r];return l?l[0].value:null},qi.prototype.get=function(r){return this.has(r)?this.data[r.wrapped().key][0].value:null},qi.prototype.remove=function(r,l){if(!this.has(r))return this;var f=r.wrapped().key,g=l===void 0?0:this.data[f].indexOf(l),x=this.data[f][g];return this.data[f].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this},qi.prototype.setMaxSize=function(r){for(this.max=r;this.order.length>this.max;){var l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this},qi.prototype.filter=function(r){var l=[];for(var f in this.data)for(var g=0,x=this.data[f];g<x.length;g+=1){var T=x[g];r(T.value)||l.push(T)}for(var E=0,L=l;E<L.length;E+=1){var O=L[E];this.remove(O.value.tileID,O)}},Ha.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ha.prototype.updateData=function(r){var l=this.context.gl;this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)},Ha.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var cc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};function rr(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}function Bp(r,l,f,g){this.context=r,this.width=l,this.height=f;var x=this.framebuffer=r.gl.createFramebuffer();this.colorAttachment=new oo(r,x),g&&(this.depthAttachment=new Rm(r,x))}Cs.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Cs.prototype.updateData=function(r){var l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)},Cs.prototype.enableAttributes=function(r,l){for(var f=0;f<this.attributes.length;f++){var g=l.attributes[this.attributes[f].name];g!==void 0&&r.enableVertexAttribArray(g)}},Cs.prototype.setVertexAttribPointers=function(r,l,f){for(var g=0;g<this.attributes.length;g++){var x=this.attributes[g],T=l.attributes[x.name];T!==void 0&&r.vertexAttribPointer(T,x.components,r[cc[x.type]],!1,this.itemSize,x.offset+this.itemSize*(f||0))}},Cs.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)},rr.prototype.get=function(){return this.current},rr.prototype.set=function(r){},rr.prototype.getDefault=function(){return this.default},rr.prototype.setDefault=function(){this.set(this.default)};var pc,al,Ss,Ca,Sa,Ts,Xl,Wa,Ya,Es,Jl,Nr,Ta,sl,ei,N,B,q,J,le,de,we,ge,ve,fe,Pe,Ue,Ie,ce,Ae,xt,wt,vt,Pt,Dt=(Kp.__proto__=Pt=rr,((Kp.prototype=Object.create(Pt&&Pt.prototype)).constructor=Kp).prototype.getDefault=function(){return u.Color.transparent},Kp.prototype.set=function(r){var l=this.current;r.r===l.r&&r.g===l.g&&r.b===l.b&&r.a===l.a&&!this.dirty||(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)},Kp),$t=(Yp.__proto__=vt=rr,((Yp.prototype=Object.create(vt&&vt.prototype)).constructor=Yp).prototype.getDefault=function(){return 1},Yp.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.clearDepth(r),this.current=r,this.dirty=!1)},Yp),Ft=(vc.__proto__=wt=rr,((vc.prototype=Object.create(wt&&wt.prototype)).constructor=vc).prototype.getDefault=function(){return 0},vc.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.clearStencil(r),this.current=r,this.dirty=!1)},vc),nr=(hl.__proto__=xt=rr,((hl.prototype=Object.create(xt&&xt.prototype)).constructor=hl).prototype.getDefault=function(){return[!0,!0,!0,!0]},hl.prototype.set=function(r){var l=this.current;r[0]===l[0]&&r[1]===l[1]&&r[2]===l[2]&&r[3]===l[3]&&!this.dirty||(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)},hl),Cr=(_n.__proto__=Ae=rr,((_n.prototype=Object.create(Ae&&Ae.prototype)).constructor=_n).prototype.getDefault=function(){return!0},_n.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.depthMask(r),this.current=r,this.dirty=!1)},_n),je=(aa.__proto__=ce=rr,((aa.prototype=Object.create(ce&&ce.prototype)).constructor=aa).prototype.getDefault=function(){return 255},aa.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.stencilMask(r),this.current=r,this.dirty=!1)},aa),Ct=(pl.__proto__=Ie=rr,((pl.prototype=Object.create(Ie&&Ie.prototype)).constructor=pl).prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},pl.prototype.set=function(r){var l=this.current;r.func===l.func&&r.ref===l.ref&&r.mask===l.mask&&!this.dirty||(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)},pl),kt=(oa.__proto__=Ue=rr,((oa.prototype=Object.create(Ue&&Ue.prototype)).constructor=oa).prototype.getDefault=function(){var r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]},oa.prototype.set=function(r){var l=this.current;r[0]===l[0]&&r[1]===l[1]&&r[2]===l[2]&&!this.dirty||(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)},oa),Ci=(ia.__proto__=Pe=rr,((ia.prototype=Object.create(Pe&&Pe.prototype)).constructor=ia).prototype.getDefault=function(){return!1},ia.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}},ia),Qo=(cl.__proto__=fe=rr,((cl.prototype=Object.create(fe&&fe.prototype)).constructor=cl).prototype.getDefault=function(){return[0,1]},cl.prototype.set=function(r){var l=this.current;r[0]===l[0]&&r[1]===l[1]&&!this.dirty||(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)},cl),Vt=(Is.__proto__=ve=rr,((Is.prototype=Object.create(ve&&ve.prototype)).constructor=Is).prototype.getDefault=function(){return!1},Is.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}},Is),vn=(ul.__proto__=ge=rr,((ul.prototype=Object.create(ge&&ge.prototype)).constructor=ul).prototype.getDefault=function(){return this.gl.LESS},ul.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.depthFunc(r),this.current=r,this.dirty=!1)},ul),Wr=(so.__proto__=we=rr,((so.prototype=Object.create(we&&we.prototype)).constructor=so).prototype.getDefault=function(){return!1},so.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}},so),Ql=(yc.__proto__=de=rr,((yc.prototype=Object.create(de&&de.prototype)).constructor=yc).prototype.getDefault=function(){var r=this.gl;return[r.ONE,r.ZERO]},yc.prototype.set=function(r){var l=this.current;r[0]===l[0]&&r[1]===l[1]&&!this.dirty||(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)},yc),Bn=(gc.__proto__=le=rr,((gc.prototype=Object.create(le&&le.prototype)).constructor=gc).prototype.getDefault=function(){return u.Color.transparent},gc.prototype.set=function(r){var l=this.current;r.r===l.r&&r.g===l.g&&r.b===l.b&&r.a===l.a&&!this.dirty||(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)},gc),on=(mc.__proto__=J=rr,((mc.prototype=Object.create(J&&J.prototype)).constructor=mc).prototype.getDefault=function(){return this.gl.FUNC_ADD},mc.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.blendEquation(r),this.current=r,this.dirty=!1)},mc),ox=(fc.__proto__=q=rr,((fc.prototype=Object.create(q&&q.prototype)).constructor=fc).prototype.getDefault=function(){return!1},fc.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}},fc),Fp=(ru.__proto__=B=rr,((ru.prototype=Object.create(B&&B.prototype)).constructor=ru).prototype.getDefault=function(){return this.gl.BACK},ru.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.cullFace(r),this.current=r,this.dirty=!1)},ru),Nm=(Wp.__proto__=N=rr,((Wp.prototype=Object.create(N&&N.prototype)).constructor=Wp).prototype.getDefault=function(){return this.gl.CCW},Wp.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.frontFace(r),this.current=r,this.dirty=!1)},Wp),jp=(dc.__proto__=ei=rr,((dc.prototype=Object.create(ei&&ei.prototype)).constructor=dc).prototype.getDefault=function(){return null},dc.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.useProgram(r),this.current=r,this.dirty=!1)},dc),Xy=(Hp.__proto__=sl=rr,((Hp.prototype=Object.create(sl&&sl.prototype)).constructor=Hp).prototype.getDefault=function(){return this.gl.TEXTURE0},Hp.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.activeTexture(r),this.current=r,this.dirty=!1)},Hp),Sr=(hc.__proto__=Ta=rr,((hc.prototype=Object.create(Ta&&Ta.prototype)).constructor=hc).prototype.getDefault=function(){var r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]},hc.prototype.set=function(r){var l=this.current;r[0]===l[0]&&r[1]===l[1]&&r[2]===l[2]&&r[3]===l[3]&&!this.dirty||(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)},hc),Up=(Gp.__proto__=Nr=rr,((Gp.prototype=Object.create(Nr&&Nr.prototype)).constructor=Gp).prototype.getDefault=function(){return null},Gp.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}},Gp),Om=(tu.__proto__=Jl=rr,((tu.prototype=Object.create(Jl&&Jl.prototype)).constructor=tu).prototype.getDefault=function(){return null},tu.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}},tu),Si=(ll.__proto__=Es=rr,((ll.prototype=Object.create(Es&&Es.prototype)).constructor=ll).prototype.getDefault=function(){return null},ll.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}},ll),yo=(eu.__proto__=Ya=rr,((eu.prototype=Object.create(Ya&&Ya.prototype)).constructor=eu).prototype.getDefault=function(){return null},eu.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}},eu),Jy=(na.__proto__=Wa=rr,((na.prototype=Object.create(Wa&&Wa.prototype)).constructor=na).prototype.getDefault=function(){return null},na.prototype.set=function(r){var l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1},na),md=(Un.__proto__=Xl=rr,((Un.prototype=Object.create(Xl&&Xl.prototype)).constructor=Un).prototype.getDefault=function(){return null},Un.prototype.set=function(r){this.vao&&(r!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(r),this.current=r,this.dirty=!1)},Un),ti=(Zp.__proto__=Ts=rr,((Zp.prototype=Object.create(Ts&&Ts.prototype)).constructor=Zp).prototype.getDefault=function(){return 4},Zp.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}},Zp),Vp=(ra.__proto__=Sa=rr,((ra.prototype=Object.create(Sa&&Sa.prototype)).constructor=ra).prototype.getDefault=function(){return!1},ra.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}},ra),Ea=(qp.__proto__=Ca=rr,((qp.prototype=Object.create(Ca&&Ca.prototype)).constructor=qp).prototype.getDefault=function(){return!1},qp.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}},qp),ui=(ao.__proto__=Ss=rr,((ao.prototype=Object.create(Ss&&Ss.prototype)).constructor=ao).prototype.getDefault=function(){return null},ao),oo=(ta.__proto__=al=ui,((ta.prototype=Object.create(al&&al.prototype)).constructor=ta).prototype.setDirty=function(){this.dirty=!0},ta.prototype.set=function(r){if(r!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}},ta),Rm=(ea.__proto__=pc=ui,((ea.prototype=Object.create(pc&&pc.prototype)).constructor=ea).prototype.set=function(r){if(r!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}},ea);function ea(){pc.apply(this,arguments)}function ta(){al.apply(this,arguments)}function ao(r,l){Ss.call(this,r),this.context=r,this.parent=l}function qp(){Ca.apply(this,arguments)}function ra(){Sa.apply(this,arguments)}function Zp(){Ts.apply(this,arguments)}function Un(r){Xl.call(this,r),this.vao=r.extVertexArrayObject}function na(){Wa.apply(this,arguments)}function eu(){Ya.apply(this,arguments)}function ll(){Es.apply(this,arguments)}function tu(){Jl.apply(this,arguments)}function Gp(){Nr.apply(this,arguments)}function hc(){Ta.apply(this,arguments)}function Hp(){sl.apply(this,arguments)}function dc(){ei.apply(this,arguments)}function Wp(){N.apply(this,arguments)}function ru(){B.apply(this,arguments)}function fc(){q.apply(this,arguments)}function mc(){J.apply(this,arguments)}function gc(){le.apply(this,arguments)}function yc(){de.apply(this,arguments)}function so(){we.apply(this,arguments)}function ul(){ge.apply(this,arguments)}function Is(){ve.apply(this,arguments)}function cl(){fe.apply(this,arguments)}function ia(){Pe.apply(this,arguments)}function oa(){Ue.apply(this,arguments)}function pl(){Ie.apply(this,arguments)}function aa(){ce.apply(this,arguments)}function _n(){Ae.apply(this,arguments)}function hl(){xt.apply(this,arguments)}function vc(){wt.apply(this,arguments)}function Yp(){vt.apply(this,arguments)}function Kp(){Pt.apply(this,arguments)}Bp.prototype.destroy=function(){var r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){var f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)};var vr=function(r,l,f){this.func=r,this.mask=l,this.range=f};vr.ReadOnly=!1,vr.ReadWrite=!0,vr.disabled=new vr(519,vr.ReadOnly,[0,1]);var Ln=function(r,l,f,g,x,T){this.test=r,this.ref=l,this.mask=f,this.fail=g,this.depthFail=x,this.pass=T};Ln.disabled=new Ln({func:519,mask:0},0,0,7680,7680,7680);var ri=function(r,l,f){this.blendFunction=r,this.blendColor=l,this.mask=f};ri.disabled=new ri(ri.Replace=[1,0],u.Color.transparent,[!1,!1,!1,!1]),ri.unblended=new ri(ri.Replace,u.Color.transparent,[!0,!0,!0,!0]),ri.alphaBlended=new ri([1,771],u.Color.transparent,[!0,!0,!0,!0]);var xn=function(r,l,f){this.enable=r,this.mode=l,this.frontFace=f};function vo(r){this.gl=r,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Dt(this),this.clearDepth=new $t(this),this.clearStencil=new Ft(this),this.colorMask=new nr(this),this.depthMask=new Cr(this),this.stencilMask=new je(this),this.stencilFunc=new Ct(this),this.stencilOp=new kt(this),this.stencilTest=new Ci(this),this.depthRange=new Qo(this),this.depthTest=new Vt(this),this.depthFunc=new vn(this),this.blend=new Wr(this),this.blendFunc=new Ql(this),this.blendColor=new Bn(this),this.blendEquation=new on(this),this.cullFace=new ox(this),this.cullFaceSide=new Fp(this),this.frontFace=new Nm(this),this.program=new jp(this),this.activeTexture=new Xy(this),this.viewport=new Sr(this),this.bindFramebuffer=new Up(this),this.bindRenderbuffer=new Om(this),this.bindTexture=new Si(this),this.bindVertexBuffer=new yo(this),this.bindElementBuffer=new Jy(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new md(this),this.pixelStoreUnpack=new ti(this),this.pixelStoreUnpackPremultiplyAlpha=new Vp(this),this.pixelStoreUnpackFlipY=new Ea(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=r.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(r.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query")}xn.disabled=new xn(!1,1029,2305),xn.backCCW=new xn(!0,1029,2305),vo.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},vo.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},vo.prototype.createIndexBuffer=function(r,l){return new Ha(this,r,l)},vo.prototype.createVertexBuffer=function(r,l,f){return new Cs(this,r,l,f)},vo.prototype.createRenderbuffer=function(r,l,f){var g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,r,l,f),this.bindRenderbuffer.set(null),x},vo.prototype.createFramebuffer=function(r,l,f){return new Bp(this,r,l,f)},vo.prototype.clear=function(r){var l=r.color,f=r.depth,g=this.gl,x=0;l&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),g.clear(x)},vo.prototype.setCullFace=function(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))},vo.prototype.setDepthMode=function(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)},vo.prototype.setStencilMode=function(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)},vo.prototype.setColorMode=function(r){u.deepEqual(r.blendFunction,ri.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)},vo.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var _c,ks=((_c=u.Evented)&&(jt.__proto__=_c),((jt.prototype=Object.create(_c&&_c.prototype)).constructor=jt).prototype.onAdd=function(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(r)},jt.prototype.onRemove=function(r){this._source&&this._source.onRemove&&this._source.onRemove(r)},jt.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var r in this._tiles){var l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0},jt.prototype.getSource=function(){return this._source},jt.prototype.pause=function(){this._paused=!0},jt.prototype.resume=function(){if(this._paused){var r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}},jt.prototype._loadTile=function(r,l){return this._source.loadTile(r,l)},jt.prototype._unloadTile=function(r){if(this._source.unloadTile)return this._source.unloadTile(r,function(){})},jt.prototype._abortTile=function(r){if(this._source.abortTile)return this._source.abortTile(r,function(){})},jt.prototype.serialize=function(){return this._source.serialize()},jt.prototype.prepare=function(r){for(var l in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var f=this._tiles[l];f.upload(r),f.prepare(this.map.style.imageManager)}},jt.prototype.getIds=function(){return u.values(this._tiles).map(function(r){return r.tileID}).sort(Bm).map(function(r){return r.key})},jt.prototype.getRenderableIds=function(r){var l=this,f=[];for(var g in this._tiles)this._isIdRenderable(g,r)&&f.push(this._tiles[g]);return r?f.sort(function(x,T){var E=x.tileID,L=T.tileID,O=new u.Point(E.canonical.x,E.canonical.y)._rotate(l.transform.angle),j=new u.Point(L.canonical.x,L.canonical.y)._rotate(l.transform.angle);return E.overscaledZ-L.overscaledZ||j.y-O.y||j.x-O.x}).map(function(x){return x.tileID.key}):f.map(function(x){return x.tileID}).sort(Bm).map(function(x){return x.key})},jt.prototype.hasRenderableParent=function(r){var l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)},jt.prototype._isIdRenderable=function(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())},jt.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var r in this._cache.reset(),this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")},jt.prototype._reloadTile=function(r,l){var f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=l),this._loadTile(f,this._tileLoaded.bind(this,f,r,l)))},jt.prototype._tileLoaded=function(r,l,f,g){if(g)return r.state="errored",void(g.status!==404?this._source.fire(new u.ErrorEvent(g,{tile:r})):this.update(this.transform));r.timeAdded=u.browser.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new u.Event("data",{dataType:"source",tile:r,coord:r.tileID}))},jt.prototype._backfillDEM=function(r){for(var l=this.getRenderableIds(),f=0;f<l.length;f++){var g=l[f];if(r.neighboringTiles&&r.neighboringTiles[g]){var x=this.getTileByID(g);T(r,x),T(x,r)}}function T(E,L){E.needsHillshadePrepare=!0;var O=L.tileID.canonical.x-E.tileID.canonical.x,j=L.tileID.canonical.y-E.tileID.canonical.y,V=Math.pow(2,E.tileID.canonical.z),H=L.tileID.key;O===0&&j==0||1<Math.abs(j)||(1<Math.abs(O)&&(Math.abs(O+V)===1?O+=V:Math.abs(O-V)===1&&(O-=V)),L.dem&&E.dem&&(E.dem.backfillBorder(L.dem,O,j),E.neighboringTiles&&E.neighboringTiles[H]&&(E.neighboringTiles[H].backfilled=!0)))}},jt.prototype.getTile=function(r){return this.getTileByID(r.key)},jt.prototype.getTileByID=function(r){return this._tiles[r]},jt.prototype._retainLoadedChildren=function(r,l,f,g){for(var x in this._tiles){var T=this._tiles[x];if(!(g[x]||!T.hasData()||T.tileID.overscaledZ<=l||T.tileID.overscaledZ>f)){for(var E=T.tileID;T&&T.tileID.overscaledZ>l+1;){var L=T.tileID.scaledTo(T.tileID.overscaledZ-1);(T=this._tiles[L.key])&&T.hasData()&&(E=L)}for(var O=E;O.overscaledZ>l;)if(r[(O=O.scaledTo(O.overscaledZ-1)).key]){g[E.key]=E;break}}}},jt.prototype.findLoadedParent=function(r,l){if(r.key in this._loadedParentTiles){var f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=l?f:null}for(var g=r.overscaledZ-1;l<=g;g--){var x=r.scaledTo(g),T=this._getLoadedTile(x);if(T)return T}},jt.prototype._getLoadedTile=function(r){var l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)},jt.prototype.updateCacheSize=function(r){var l=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(l*f*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)},jt.prototype.handleWrapJump=function(r){var l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){var f={};for(var g in this._tiles){var x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+l),f[x.tileID.key]=x}for(var T in this._tiles=f,this._timers)clearTimeout(this._timers[T]),delete this._timers[T];for(var E in this._tiles)this._setTileReloadTimer(E,this._tiles[E])}},jt.prototype.update=function(r){var l=this;if(this.transform=r,this._sourceLoaded&&!this._paused){var f;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ce){return new u.OverscaledTileID(Ce.canonical.z,Ce.wrap,Ce.canonical.z,Ce.canonical.x,Ce.canonical.y)}):(f=r.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(f=f.filter(function(Ce){return l._source.hasTile(Ce)}))):f=[];var g=r.coveringZoomLevel(this._source),x=Math.max(g-jt.maxOverzooming,this._source.minzoom),T=Math.max(g+jt.maxUnderzooming,this._source.minzoom),E=this._updateRetainedTiles(f,g);if(ci(this._source.type)){for(var L={},O={},j=0,V=Object.keys(E);j<V.length;j+=1){var H=V[j],K=E[H],Q=this._tiles[H];if(Q&&!(Q.fadeEndTime&&Q.fadeEndTime<=u.browser.now())){var ee=this.findLoadedParent(K,x);ee&&(this._addTile(ee.tileID),L[ee.tileID.key]=ee.tileID),O[H]=K}}for(var re in this._retainLoadedChildren(O,g,T,E),L)E[re]||(this._coveredTiles[re]=!0,E[re]=L[re])}for(var ue in E)this._tiles[ue].clearFadeHold();for(var ae=0,ye=u.keysDifference(this._tiles,E);ae<ye.length;ae+=1){var he=ye[ae],me=this._tiles[he];me.hasSymbolBuckets&&!me.holdingForFade()?me.setHoldDuration(this.map._fadeDuration):me.hasSymbolBuckets&&!me.symbolFadeFinished()||this._removeTile(he)}this._updateLoadedParentTileCache()}},jt.prototype.releaseSymbolFadeTiles=function(){for(var r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)},jt.prototype._updateRetainedTiles=function(r,l){for(var f={},g={},x=Math.max(l-jt.maxOverzooming,this._source.minzoom),T=Math.max(l+jt.maxUnderzooming,this._source.minzoom),E={},L=0,O=r;L<O.length;L+=1){var j=O[L],V=this._addTile(j);f[j.key]=j,V.hasData()||l<this._source.maxzoom&&(E[j.key]=j)}this._retainLoadedChildren(E,l,T,f);for(var H=0,K=r;H<K.length;H+=1){var Q=K[H],ee=this._tiles[Q.key];if(!ee.hasData()){if(l+1>this._source.maxzoom){var re=Q.children(this._source.maxzoom)[0],ue=this.getTile(re);if(ue&&ue.hasData()){f[re.key]=re;continue}}else{var ae=Q.children(this._source.maxzoom);if(f[ae[0].key]&&f[ae[1].key]&&f[ae[2].key]&&f[ae[3].key])continue}for(var ye=ee.wasRequested(),he=Q.overscaledZ-1;x<=he;--he){var me=Q.scaledTo(he);if(g[me.key]||(g[me.key]=!0,!(ee=this.getTile(me))&&ye&&(ee=this._addTile(me)),ee&&(f[me.key]=me,ye=ee.wasRequested(),ee.hasData())))break}}}return f},jt.prototype._updateLoadedParentTileCache=function(){for(var r in this._loadedParentTiles={},this._tiles){for(var l=[],f=void 0,g=this._tiles[r].tileID;0<g.overscaledZ;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}l.push(g.key);var x=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(x))break;g=x}for(var T=0,E=l;T<E.length;T+=1)this._loadedParentTiles[E[T]]=f}},jt.prototype._addTile=function(r){var l=this._tiles[r.key];if(l)return l;(l=this._cache.getAndRemove(r))&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));var f=Boolean(l);return f||(l=new u.Tile(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,this._tileLoaded.bind(this,l,r.key,l.state))),l?(l.uses++,this._tiles[r.key]=l,f||this._source.fire(new u.Event("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null},jt.prototype._setTileReloadTimer=function(r,l){var f=this;r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);var g=l.getExpiryTimeout();g&&(this._timers[r]=setTimeout(function(){f._reloadTile(r,"expired"),delete f._timers[r]},g))},jt.prototype._removeTile=function(r){var l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),0<l.uses||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))},jt.prototype.clearTiles=function(){for(var r in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(r);this._cache.reset()},jt.prototype.tilesIn=function(r,l,f){var g=this,x=[],T=this.transform;if(!T)return x;for(var E=f?T.getCameraQueryGeometry(r):r,L=r.map(function(he){return T.pointCoordinate(he)}),O=E.map(function(he){return T.pointCoordinate(he)}),j=this.getIds(),V=1/0,H=1/0,K=-1/0,Q=-1/0,ee=0,re=O;ee<re.length;ee+=1){var ue=re[ee];V=Math.min(V,ue.x),H=Math.min(H,ue.y),K=Math.max(K,ue.x),Q=Math.max(Q,ue.y)}for(var ae=function(he){var me=g._tiles[j[he]];if(!me.holdingForFade()){var Ce=me.tileID,ke=Math.pow(2,T.zoom-me.tileID.overscaledZ),De=l*me.queryPadding*u.EXTENT/me.tileSize/ke,Ve=[Ce.getTilePoint(new u.MercatorCoordinate(V,H)),Ce.getTilePoint(new u.MercatorCoordinate(K,Q))];if(Ve[0].x-De<u.EXTENT&&Ve[0].y-De<u.EXTENT&&0<=Ve[1].x+De&&0<=Ve[1].y+De){var qe=L.map(function(lt){return Ce.getTilePoint(lt)}),Ke=O.map(function(lt){return Ce.getTilePoint(lt)});x.push({tile:me,tileID:Ce,queryGeometry:qe,cameraQueryGeometry:Ke,scale:ke})}}},ye=0;ye<j.length;ye++)ae(ye);return x},jt.prototype.getVisibleCoordinates=function(r){for(var l=this,f=this.getRenderableIds(r).map(function(E){return l._tiles[E].tileID}),g=0,x=f;g<x.length;g+=1){var T=x[g];T.posMatrix=this.transform.calculatePosMatrix(T.toUnwrapped())}return f},jt.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ci(this._source.type))for(var r in this._tiles){var l=this._tiles[r];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=u.browser.now())return!0}return!1},jt.prototype.setFeatureState=function(r,l,f){this._state.updateState(r=r||"_geojsonTileLayer",l,f)},jt.prototype.removeFeatureState=function(r,l,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,f)},jt.prototype.getFeatureState=function(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)},jt.prototype.setDependencies=function(r,l,f){var g=this._tiles[r];g&&g.setDependencies(l,f)},jt.prototype.reloadTilesForDependencies=function(r,l){for(var f in this._tiles)this._tiles[f].hasDependency(r,l)&&this._reloadTile(f,"reloading");this._cache.filter(function(g){return!g.hasDependency(r,l)})},jt);function jt(r,l,f){var g=this;_c.call(this),this.id=r,this.dispatcher=f,this.on("data",function(x){x.dataType==="source"&&x.sourceDataType==="metadata"&&(g._sourceLoaded=!0),g._sourceLoaded&&!g._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(g.reload(),g.transform&&g.update(g.transform))}),this.on("error",function(){g._sourceErrored=!0}),this._source=function(x,T,E){var L=new zo[l.type](x,l,T,E);if(L.id!==x)throw new Error("Expected Source id to be "+x+" instead of "+L.id);return u.bindAll(["load","abort","unload","serialize","prepare"],L),L}(r,f,this),this._tiles={},this._cache=new qi(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new u.SourceFeatureState}function Bm(r,l){var f=Math.abs(2*r.wrap)-(r.wrap<0),g=Math.abs(2*l.wrap)-(l.wrap<0);return r.overscaledZ-l.overscaledZ||g-f||l.canonical.y-r.canonical.y||l.canonical.x-r.canonical.x}function ci(r){return r==="raster"||r==="image"||r==="video"}function Fm(){return new u.window.Worker(vh.workerUrl)}ks.maxOverzooming=10,ks.maxUnderzooming=3;var Ka="mapboxgl_preloaded_worker_pool",Zi=function(){this.active={}};Zi.prototype.acquire=function(r){if(!this.workers)for(this.workers=[];this.workers.length<Zi.workerCount;)this.workers.push(new Fm);return this.active[r]=!0,this.workers.slice()},Zi.prototype.release=function(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(function(l){l.terminate()}),this.workers=null)},Zi.prototype.isPreloaded=function(){return!!this.active[Ka]},Zi.prototype.numActive=function(){return Object.keys(this.active).length};var $a,nu=Math.floor(u.browser.hardwareConcurrency/2);function Ms(){return $a=$a||new Zi}function iu(r,l){var f={};for(var g in r)g!=="ref"&&(f[g]=r[g]);return u.refProperties.forEach(function(x){x in l&&(f[x]=l[x])}),f}function dl(r){r=r.slice();for(var l=Object.create(null),f=0;f<r.length;f++)l[r[f].id]=r[f];for(var g=0;g<r.length;g++)"ref"in r[g]&&(r[g]=iu(r[g],l[r[g].ref]));return r}Zi.workerCount=Math.max(Math.min(nu,6),1);var cr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jm(r,l,f){f.push({command:cr.addSource,args:[r,l[r]]})}function Um(r,l,f){l.push({command:cr.removeSource,args:[r]}),f[r]=!0}function xc(r,l,f){var g;for(g in r[f])if(r[f].hasOwnProperty(g)&&g!=="data"&&!u.deepEqual(r[f][g],l[f][g]))return;for(g in l[f])if(l[f].hasOwnProperty(g)&&g!=="data"&&!u.deepEqual(r[f][g],l[f][g]))return;return 1}function Xa(r,l,f,g,x,T){var E;for(E in l=l||{},r=r||{})r.hasOwnProperty(E)&&(u.deepEqual(r[E],l[E])||f.push({command:T,args:[g,E,l[E],x]}));for(E in l)l.hasOwnProperty(E)&&!r.hasOwnProperty(E)&&(u.deepEqual(r[E],l[E])||f.push({command:T,args:[g,E,l[E],x]}))}function Qy(r){return r.id}function e0(r,l){return r[l.id]=l,r}function Vm(r,l){this.reset(r,l)}function pi(r,l,f){var g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(l/f);for(var T=0;T<this.xCellCount*this.yCellCount;T++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}function qm(r,l,f,g,x){var T=u.create();return l?(u.scale(T,T,[1/x,1/x,1]),f||u.rotateZ(T,T,g.angle)):u.multiply(T,g.labelPlaneMatrix,r),T}function t0(r,l,f,g,x){if(l){var T=u.clone(r);return u.scale(T,T,[x,x,1]),f||u.rotateZ(T,T,-g.angle),T}return g.glCoordMatrix}function Ti(r,l){var f=[r.x,r.y,0,1];yd(f,f,l);var g=f[3];return{point:new u.Point(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function fl(r,l){return .5+r/l*.5}function r0(r,l,f,g,x,T,E,L){var O,j,V,H,K=g?r.textSizeData:r.iconSizeData,Q=u.evaluateSizeForZoom(K,f.transform.zoom),ee=[256/f.width*2+1,256/f.height*2+1],re=g?r.text.dynamicLayoutVertexArray:r.icon.dynamicLayoutVertexArray;re.clear();for(var ue=r.lineVertexArray,ae=g?r.text.placedSymbolArray:r.icon.placedSymbolArray,ye=f.transform.width/f.transform.height,he=!1,me=0;me<ae.length;me++){var Ce=ae.get(me);if(Ce.hidden||Ce.writingMode===u.WritingMode.vertical&&!he)ou(Ce.numGlyphs,re);else{he=!1;var ke=[Ce.anchorX,Ce.anchorY,0,1];if(u.transformMat4(ke,ke,l),j=ee,V=(O=ke)[0]/O[3],H=O[1]/O[3],V>=-j[0]&&V<=j[0]&&H>=-j[1]&&H<=j[1]){var De=fl(f.transform.cameraToCenterDistance,ke[3]),Ve=u.evaluateSizeForFeature(K,Q,Ce),qe=E?Ve/De:Ve*De,Ke=new u.Point(Ce.anchorX,Ce.anchorY),lt=Ti(Ke,x).point,ht={},dt=ml(Ce,qe,!1,L,l,x,T,r.glyphOffsetArray,ue,re,lt,Ke,ht,ye);he=dt.useVertical,(dt.notEnoughRoom||he||dt.needsFlipping&&ml(Ce,qe,!0,L,l,x,T,r.glyphOffsetArray,ue,re,lt,Ke,ht,ye).notEnoughRoom)&&ou(Ce.numGlyphs,re)}else ou(Ce.numGlyphs,re)}}g?r.text.dynamicLayoutVertexBuffer.updateData(re):r.icon.dynamicLayoutVertexBuffer.updateData(re)}function Zm(r,l,f,g,x,T,E,L,O,j,V){var H=L.glyphStartIndex+L.numGlyphs,K=L.lineStartIndex,Q=L.lineStartIndex+L.lineLength,ee=l.getoffsetX(L.glyphStartIndex),re=l.getoffsetX(H-1),ue=As(r*ee,f,g,x,T,E,L.segment,K,Q,O,j,V);if(!ue)return null;var ae=As(r*re,f,g,x,T,E,L.segment,K,Q,O,j,V);return ae?{first:ue,last:ae}:null}function gd(r,l,f,g){return r===u.WritingMode.horizontal&&Math.abs(f.y-l.y)>Math.abs(f.x-l.x)*g?{useVertical:!0}:(r===u.WritingMode.vertical?l.y<f.y:l.x>f.x)?{needsFlipping:!0}:null}function ml(r,l,f,g,x,T,E,L,O,j,V,H,K,Q){var ee,re=l/24,ue=r.lineOffsetX*re,ae=r.lineOffsetY*re;if(1<r.numGlyphs){var ye=r.glyphStartIndex+r.numGlyphs,he=r.lineStartIndex,me=r.lineStartIndex+r.lineLength,Ce=Zm(re,L,ue,ae,f,V,H,r,O,T,K);if(!Ce)return{notEnoughRoom:!0};var ke=Ti(Ce.first.point,E).point,De=Ti(Ce.last.point,E).point;if(g&&!f){var Ve=gd(r.writingMode,ke,De,Q);if(Ve)return Ve}ee=[Ce.first];for(var qe=r.glyphStartIndex+1;qe<ye-1;qe++)ee.push(As(re*L.getoffsetX(qe),ue,ae,f,V,H,r.segment,he,me,O,T,K));ee.push(Ce.last)}else{if(g&&!f){var Ke=Ti(H,x).point,lt=r.lineStartIndex+r.segment+1,ht=new u.Point(O.getx(lt),O.gety(lt)),dt=Ti(ht,x),Tt=0<dt.signedDistanceFromCamera?dt.point:Gm(H,ht,Ke,1,x),mt=gd(r.writingMode,Ke,Tt,Q);if(mt)return mt}var Mt=As(re*L.getoffsetX(r.glyphStartIndex),ue,ae,f,V,H,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,O,T,K);if(!Mt)return{notEnoughRoom:!0};ee=[Mt]}for(var Ut=0,Rt=ee;Ut<Rt.length;Ut+=1){var _t=Rt[Ut];u.addDynamicAttributes(j,_t.point,_t.angle)}return{}}function Gm(r,l,f,g,x){var T=Ti(r.add(r.sub(l)._unit()),x).point,E=f.sub(T);return f.add(E._mult(g/E.mag()))}function As(r,l,f,g,x,T,E,L,O,j,V,H){var K=g?r-l:r+l,Q=0<K?1:-1,ee=0;g&&(Q*=-1,ee=Math.PI),Q<0&&(ee+=Math.PI);for(var re=0<Q?L+E:L+E+1,ue=x,ae=x,ye=0,he=0,me=Math.abs(K),Ce=[];ye+he<=me;){if((re+=Q)<L||O<=re)return null;if(ae=ue,Ce.push(ue),(ue=H[re])===void 0){var ke=new u.Point(j.getx(re),j.gety(re)),De=Ti(ke,V);if(0<De.signedDistanceFromCamera)ue=H[re]=De.point;else{var Ve=re-Q;ue=Gm(ye===0?T:new u.Point(j.getx(Ve),j.gety(Ve)),ke,ae,me-ye+1,V)}}ye+=he,he=ae.dist(ue)}var qe=(me-ye)/he,Ke=ue.sub(ae),lt=Ke.mult(qe)._add(ae);lt._add(Ke._unit()._perp()._mult(f*Q));var ht=ee+Math.atan2(ue.y-ae.y,ue.x-ae.x);return Ce.push(lt),{point:lt,angle:ht,path:Ce}}Vm.prototype.reset=function(r,l){this.points=r||[],this._distances=[0];for(var f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Vm.prototype.lerp=function(r){if(this.points.length===1)return this.points[0];r=u.clamp(r,0,1);for(var l=1,f=this._distances[l],g=r*this.paddedLength+this.padding;f<g&&l<this._distances.length;)f=this._distances[++l];var x=l-1,T=this._distances[x],E=f-T,L=0<E?(g-T)/E:0;return this.points[x].mult(1-L).add(this.points[l].mult(L))},pi.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},pi.prototype.insert=function(r,l,f,g,x){this._forEachCell(l,f,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(x)},pi.prototype.insertCircle=function(r,l,f,g){this._forEachCell(l-g,f-g,l+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(f),this.circles.push(g)},pi.prototype._insertBoxCell=function(r,l,f,g,x,T){this.boxCells[x].push(T)},pi.prototype._insertCircleCell=function(r,l,f,g,x,T){this.circleCells[x].push(T)},pi.prototype._query=function(r,l,f,g,x,T){if(f<0||r>this.width||g<0||l>this.height)return!x&&[];var E=[];if(r<=0&&l<=0&&this.width<=f&&this.height<=g){if(x)return!0;for(var L=0;L<this.boxKeys.length;L++)E.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(var O=0;O<this.circleKeys.length;O++){var j=this.circles[3*O],V=this.circles[3*O+1],H=this.circles[3*O+2];E.push({key:this.circleKeys[O],x1:j-H,y1:V-H,x2:j+H,y2:V+H})}return T?E.filter(T):E}return this._forEachCell(r,l,f,g,this._queryCell,E,{hitTest:x,seenUids:{box:{},circle:{}}},T),x?0<E.length:E},pi.prototype._queryCircle=function(r,l,f,g,x){var T=r-f,E=r+f,L=l-f,O=l+f;if(E<0||T>this.width||O<0||L>this.height)return!g&&[];var j=[];return this._forEachCell(T,L,E,O,this._queryCellCircle,j,{hitTest:g,circle:{x:r,y:l,radius:f},seenUids:{box:{},circle:{}}},x),g?0<j.length:j},pi.prototype.query=function(r,l,f,g,x){return this._query(r,l,f,g,!1,x)},pi.prototype.hitTest=function(r,l,f,g,x){return this._query(r,l,f,g,!0,x)},pi.prototype.hitTestCircle=function(r,l,f,g){return this._queryCircle(r,l,f,!0,g)},pi.prototype._queryCell=function(r,l,f,g,x,T,E,L){var O=E.seenUids,j=this.boxCells[x];if(j!==null)for(var V=this.bboxes,H=0,K=j;H<K.length;H+=1){var Q=K[H];if(!O.box[Q]){O.box[Q]=!0;var ee=4*Q;if(r<=V[2+ee]&&l<=V[3+ee]&&f>=V[0+ee]&&g>=V[1+ee]&&(!L||L(this.boxKeys[Q]))){if(E.hitTest)return T.push(!0),!0;T.push({key:this.boxKeys[Q],x1:V[ee],y1:V[1+ee],x2:V[2+ee],y2:V[3+ee]})}}}var re=this.circleCells[x];if(re!==null)for(var ue=this.circles,ae=0,ye=re;ae<ye.length;ae+=1){var he=ye[ae];if(!O.circle[he]){O.circle[he]=!0;var me=3*he;if(this._circleAndRectCollide(ue[me],ue[1+me],ue[2+me],r,l,f,g)&&(!L||L(this.circleKeys[he]))){if(E.hitTest)return T.push(!0),!0;var Ce=ue[me],ke=ue[1+me],De=ue[2+me];T.push({key:this.circleKeys[he],x1:Ce-De,y1:ke-De,x2:Ce+De,y2:ke+De})}}}},pi.prototype._queryCellCircle=function(r,l,f,g,x,T,E,L){var O=E.circle,j=E.seenUids,V=this.boxCells[x];if(V!==null)for(var H=this.bboxes,K=0,Q=V;K<Q.length;K+=1){var ee=Q[K];if(!j.box[ee]){j.box[ee]=!0;var re=4*ee;if(this._circleAndRectCollide(O.x,O.y,O.radius,H[0+re],H[1+re],H[2+re],H[3+re])&&(!L||L(this.boxKeys[ee])))return T.push(!0),!0}}var ue=this.circleCells[x];if(ue!==null)for(var ae=this.circles,ye=0,he=ue;ye<he.length;ye+=1){var me=he[ye];if(!j.circle[me]){j.circle[me]=!0;var Ce=3*me;if(this._circlesCollide(ae[Ce],ae[1+Ce],ae[2+Ce],O.x,O.y,O.radius)&&(!L||L(this.circleKeys[me])))return T.push(!0),!0}}},pi.prototype._forEachCell=function(r,l,f,g,x,T,E,L){for(var O=this._convertToXCellCoord(r),j=this._convertToYCellCoord(l),V=this._convertToXCellCoord(f),H=this._convertToYCellCoord(g),K=O;K<=V;K++)for(var Q=j;Q<=H;Q++)if(x.call(this,r,l,f,g,this.xCellCount*Q+K,T,E,L))return},pi.prototype._convertToXCellCoord=function(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))},pi.prototype._convertToYCellCoord=function(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))},pi.prototype._circlesCollide=function(r,l,f,g,x,T){var E=g-r,L=x-l,O=f+T;return E*E+L*L<O*O},pi.prototype._circleAndRectCollide=function(r,l,f,g,x,T,E){var L=(T-g)/2,O=Math.abs(r-(g+L));if(L+f<O)return!1;var j=(E-x)/2,V=Math.abs(l-(x+j));if(j+f<V)return!1;if(O<=L||V<=j)return!0;var H=O-L,K=V-j;return H*H+K*K<=f*f};var wc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ou(r,l){for(var f=0;f<r;f++){var g=l.length;l.resize(g+4),l.float32.set(wc,3*g)}}function yd(r,l,f){var g=l[0],x=l[1];return r[0]=f[0]*g+f[4]*x+f[12],r[1]=f[1]*g+f[5]*x+f[13],r[3]=f[3]*g+f[7]*x+f[15],r}function lr(r,l,f){l===void 0&&(l=new pi(r.width+200,r.height+200,25)),f===void 0&&(f=new pi(r.width+200,r.height+200,25)),this.transform=r,this.grid=l,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+100,this.screenBottomBoundary=r.height+100,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200}function Gi(r,l,f){return l*(u.EXTENT/(r.tileSize*Math.pow(2,f-r.tileID.overscaledZ)))}function Hm(r,l,f,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):g&&f?1:0,this.placed=f}function Ja(r,l,f,g,x){this.text=new Hm(r?r.text:null,l,f,x),this.icon=new Hm(r?r.icon:null,l,g,x)}function n0(r,l,f){this.text=r,this.icon=l,this.skipFade=f}function ax(){this.invProjMatrix=u.create(),this.viewportMatrix=u.create(),this.circles=[]}function i0(r,l,f,g,x){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=x}function o0(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}function bc(r,l,f,g,x){var T=u.getAnchorAlignment(r),E=-(T.horizontalAlign-.5)*l,L=-(T.verticalAlign-.5)*f,O=u.evaluateVariableOffset(r,g);return new u.Point(E+O[0]*x,L+O[1]*x)}function Cc(r,l,f,g,x,T){var E=r.x1,L=r.x2,O=r.y1,j=r.y2,V=r.anchorPointX,H=r.anchorPointY,K=new u.Point(l,f);return g&&K._rotate(x?T:-T),{x1:E+K.x,y1:O+K.y,x2:L+K.x,y2:j+K.y,anchorPointX:V,anchorPointY:H}}function Oi(r,l,f,g){this.transform=r.clone(),this.collisionIndex=new lr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new o0(f),this.collisionCircleArrays={},(this.prevPlacement=g)&&(g.prevPlacement=void 0),this.placedOrientations={}}function gl(r,l,f,g,x){r.emplaceBack(l?1:0,f?1:0,g||0,x||0),r.emplaceBack(l?1:0,f?1:0,g||0,x||0),r.emplaceBack(l?1:0,f?1:0,g||0,x||0),r.emplaceBack(l?1:0,f?1:0,g||0,x||0)}lr.prototype.placeCollisionBox=function(r,l,f,g,x){var T=this.projectAndGetPerspectiveRatio(g,r.anchorPointX,r.anchorPointY),E=f*T.perspectiveRatio,L=r.x1*E+T.point.x,O=r.y1*E+T.point.y,j=r.x2*E+T.point.x,V=r.y2*E+T.point.y;return!this.isInsideGrid(L,O,j,V)||!l&&this.grid.hitTest(L,O,j,V,x)?{box:[],offscreen:!1}:{box:[L,O,j,V],offscreen:this.isOffscreen(L,O,j,V)}},lr.prototype.placeCollisionCircles=function(r,l,f,g,x,T,E,L,O,j,V,H,K){var Q=[],ee=new u.Point(l.anchorX,l.anchorY),re=Ti(ee,T),ue=fl(this.transform.cameraToCenterDistance,re.signedDistanceFromCamera),ae=(j?x/ue:x*ue)/u.ONE_EM,ye=Ti(ee,E).point,he=Zm(ae,g,l.lineOffsetX*ae,l.lineOffsetY*ae,!1,ye,ee,l,f,E,{}),me=!1,Ce=!1,ke=!0;if(he){for(var De=.5*H*ue+K,Ve=new u.Point(-100,-100),qe=new u.Point(this.screenRightBoundary,this.screenBottomBoundary),Ke=new Vm,lt=he.first,ht=he.last,dt=[],Tt=lt.path.length-1;1<=Tt;Tt--)dt.push(lt.path[Tt]);for(var mt=1;mt<ht.path.length;mt++)dt.push(ht.path[mt]);var Mt=2.5*De;if(L){var Ut=dt.map(function(In){return Ti(In,L)});dt=Ut.some(function(In){return In.signedDistanceFromCamera<=0})?[]:Ut.map(function(In){return In.point})}var Rt=[];if(0<dt.length){for(var _t=dt[0].clone(),zt=dt[0].clone(),er=1;er<dt.length;er++)_t.x=Math.min(_t.x,dt[er].x),_t.y=Math.min(_t.y,dt[er].y),zt.x=Math.max(zt.x,dt[er].x),zt.y=Math.max(zt.y,dt[er].y);Rt=_t.x>=Ve.x&&zt.x<=qe.x&&_t.y>=Ve.y&&zt.y<=qe.y?[dt]:zt.x<Ve.x||_t.x>qe.x||zt.y<Ve.y||_t.y>qe.y?[]:u.clipLine([dt],Ve.x,Ve.y,qe.x,qe.y)}for(var Ot=0,Br=Rt;Ot<Br.length;Ot+=1){var ur;Ke.reset(Br[Ot],.25*De),ur=Ke.length<=.5*De?1:Math.ceil(Ke.paddedLength/Mt)+1;for(var Fn=0;Fn<ur;Fn++){var ni=Fn/Math.max(ur-1,1),Li=Ke.lerp(ni),ki=Li.x+100,Tr=Li.y+100;Q.push(ki,Tr,De,0);var Xi=ki-De,Pi=Tr-De,Pr=ki+De,En=Tr+De;if(ke=ke&&this.isOffscreen(Xi,Pi,Pr,En),Ce=Ce||this.isInsideGrid(Xi,Pi,Pr,En),!r&&this.grid.hitTestCircle(ki,Tr,De,V)&&(me=!0,!O))return{circles:[],offscreen:!1,collisionDetected:me}}}}return{circles:!O&&me||!Ce?[]:Q,offscreen:ke,collisionDetected:me}},lr.prototype.queryRenderedSymbols=function(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var l=[],f=1/0,g=1/0,x=-1/0,T=-1/0,E=0,L=r;E<L.length;E+=1){var O=L[E],j=new u.Point(O.x+100,O.y+100);f=Math.min(f,j.x),g=Math.min(g,j.y),x=Math.max(x,j.x),T=Math.max(T,j.y),l.push(j)}for(var V={},H={},K=0,Q=this.grid.query(f,g,x,T).concat(this.ignoredGrid.query(f,g,x,T));K<Q.length;K+=1){var ee=Q[K],re=ee.key;if(V[re.bucketInstanceId]===void 0&&(V[re.bucketInstanceId]={}),!V[re.bucketInstanceId][re.featureIndex]){var ue=[new u.Point(ee.x1,ee.y1),new u.Point(ee.x2,ee.y1),new u.Point(ee.x2,ee.y2),new u.Point(ee.x1,ee.y2)];u.polygonIntersectsPolygon(l,ue)&&(V[re.bucketInstanceId][re.featureIndex]=!0,H[re.bucketInstanceId]===void 0&&(H[re.bucketInstanceId]=[]),H[re.bucketInstanceId].push(re.featureIndex))}}return H},lr.prototype.insertCollisionBox=function(r,l,f,g,x){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:g,collisionGroupID:x},r[0],r[1],r[2],r[3])},lr.prototype.insertCollisionCircles=function(r,l,f,g,x){for(var T=l?this.ignoredGrid:this.grid,E={bucketInstanceId:f,featureIndex:g,collisionGroupID:x},L=0;L<r.length;L+=4)T.insertCircle(E,r[L],r[L+1],r[L+2])},lr.prototype.projectAndGetPerspectiveRatio=function(r,l,f){var g=[l,f,0,1];return yd(g,g,r),{point:new u.Point((g[0]/g[3]+1)/2*this.transform.width+100,(-g[1]/g[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/g[3]*.5}},lr.prototype.isOffscreen=function(r,l,f,g){return f<100||r>=this.screenRightBoundary||g<100||l>this.screenBottomBoundary},lr.prototype.isInsideGrid=function(r,l,f,g){return 0<=f&&r<this.gridRightBoundary&&0<=g&&l<this.gridBottomBoundary},lr.prototype.getViewportMatrix=function(){var r=u.identity([]);return u.translate(r,r,[-100,-100,0]),r},Hm.prototype.isHidden=function(){return this.opacity===0&&!this.placed},Ja.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()},o0.prototype.get=function(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){var l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:function(f){return f.collisionGroupID===l}}}return this.collisionGroups[r]},Oi.prototype.getBucketParts=function(r,l,f,g){var x=f.getBucket(l),T=f.latestFeatureIndex;if(x&&T&&l.id===x.layerIds[0]){var E=f.collisionBoxArray,L=x.layers[0].layout,O=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),j=f.tileSize/u.EXTENT,V=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),H=L.get("text-pitch-alignment")==="map",K=L.get("text-rotation-alignment")==="map",Q=Gi(f,1,this.transform.zoom),ee=qm(V,H,K,this.transform,Q),re=null;if(H){var ue=t0(V,H,K,this.transform,Q);re=u.multiply([],this.transform.labelPlaneMatrix,ue)}this.retainedQueryData[x.bucketInstanceId]=new i0(x.bucketInstanceId,T,x.sourceLayerIndex,x.index,f.tileID);var ae={bucket:x,layout:L,posMatrix:V,textLabelPlaneMatrix:ee,labelToScreenMatrix:re,scale:O,textPixelRatio:j,holdingForFade:f.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:u.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(var ye=0,he=x.sortKeyRanges;ye<he.length;ye+=1){var me=he[ye];r.push({sortKey:me.sortKey,symbolInstanceStart:me.symbolInstanceStart,symbolInstanceEnd:me.symbolInstanceEnd,parameters:ae})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ae})}},Oi.prototype.attemptAnchorPlacement=function(r,l,f,g,x,T,E,L,O,j,V,H,K,Q,ee){var re,ue=[H.textOffset0,H.textOffset1],ae=bc(r,f,g,ue,x),ye=this.collisionIndex.placeCollisionBox(Cc(l,ae.x,ae.y,T,E,this.transform.angle),V,L,O,j.predicate);if(!ee||this.collisionIndex.placeCollisionBox(Cc(ee,ae.x,ae.y,T,E,this.transform.angle),V,L,O,j.predicate).box.length!==0)return 0<ye.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID].text&&(re=this.prevPlacement.variableOffsets[H.crossTileID].anchor),this.variableOffsets[H.crossTileID]={textOffset:ue,width:f,height:g,anchor:r,textBoxScale:x,prevAnchor:re},this.markUsedJustification(K,r,H,Q),K.allowVerticalPlacement&&(this.markUsedOrientation(K,Q,H),this.placedOrientations[H.crossTileID]=Q),{shift:ae,placedGlyphBoxes:ye}):void 0},Oi.prototype.placeLayerBucketPart=function(r,l,f){var g=this,x=r.parameters,T=x.bucket,E=x.layout,L=x.posMatrix,O=x.textLabelPlaneMatrix,j=x.labelToScreenMatrix,V=x.textPixelRatio,H=x.holdingForFade,K=x.collisionBoxArray,Q=x.partiallyEvaluatedTextSize,ee=x.collisionGroup,re=E.get("text-optional"),ue=E.get("icon-optional"),ae=E.get("text-allow-overlap"),ye=E.get("icon-allow-overlap"),he=E.get("text-rotation-alignment")==="map",me=E.get("text-pitch-alignment")==="map",Ce=E.get("icon-text-fit")!=="none",ke=E.get("symbol-z-order")==="viewport-y",De=ae&&(ye||!T.hasIconData()||ue),Ve=ye&&(ae||!T.hasTextData()||re);function qe(mt,Mt){if(!l[mt.crossTileID])if(H)g.placements[mt.crossTileID]=new n0(!1,!1,!1);else{var Ut,Rt=!1,_t=!1,zt=!0,er=null,Ot={box:null,offscreen:null},Br={box:null,offscreen:null},ur=null,Fn=null,ni=0,Li=0,ki=0;Mt.textFeatureIndex?ni=Mt.textFeatureIndex:mt.useRuntimeCollisionCircles&&(ni=mt.featureIndex),Mt.verticalTextFeatureIndex&&(Li=Mt.verticalTextFeatureIndex);var Tr=Mt.textBox;if(Tr){var Xi=function(Er){var Fr=u.WritingMode.horizontal;if(T.allowVerticalPlacement&&!Er&&g.prevPlacement){var Ri=g.prevPlacement.placedOrientations[mt.crossTileID];Ri&&(g.placedOrientations[mt.crossTileID]=Ri,g.markUsedOrientation(T,Fr=Ri,mt))}return Fr},Pi=function(Er,Fr){if(T.allowVerticalPlacement&&0<mt.numVerticalGlyphVertices&&Mt.verticalTextBox)for(var Ri=0,kl=T.writingModes;Ri<kl.length&&(kl[Ri]===u.WritingMode.vertical?(Ot=Fr(),Br=Ot):Ot=Er(),!(Ot&&Ot.box&&Ot.box.length));Ri+=1);else Ot=Er()};if(E.get("text-variable-anchor")){var Pr=E.get("text-variable-anchor");if(g.prevPlacement&&g.prevPlacement.variableOffsets[mt.crossTileID]){var En=g.prevPlacement.variableOffsets[mt.crossTileID];0<Pr.indexOf(En.anchor)&&(Pr=Pr.filter(function(Er){return Er!==En.anchor})).unshift(En.anchor)}var In=function(Er,Fr,Ri){for(var kl=Er.x2-Er.x1,Ml=Er.y2-Er.y1,Mu=mt.textBoxScale,wh=Ce&&!ye?Fr:null,hi={box:[],offscreen:!1},bh=ae?2*Pr.length:Pr.length,Uc=0;Uc<bh;++Uc){var Au=g.attemptAnchorPlacement(Pr[Uc%Pr.length],Er,kl,Ml,Mu,he,me,V,L,ee,Uc>=Pr.length,mt,T,Ri,wh);if(Au&&(hi=Au.placedGlyphBoxes)&&hi.box&&hi.box.length){Rt=!0,er=Au.shift;break}}return hi};Pi(function(){return In(Tr,Mt.iconBox,u.WritingMode.horizontal)},function(){var Er=Mt.verticalTextBox;return T.allowVerticalPlacement&&!(Ot&&Ot.box&&Ot.box.length)&&0<mt.numVerticalGlyphVertices&&Er?In(Er,Mt.verticalIconBox,u.WritingMode.vertical):{box:null,offscreen:null}}),Ot&&(Rt=Ot.box,zt=Ot.offscreen);var Di=Xi(Ot&&Ot.box);if(!Rt&&g.prevPlacement){var Ui=g.prevPlacement.variableOffsets[mt.crossTileID];Ui&&(g.variableOffsets[mt.crossTileID]=Ui,g.markUsedJustification(T,Ui.anchor,mt,Di))}}else{var Eu=function(Er,Fr){var Ri=g.collisionIndex.placeCollisionBox(Er,ae,V,L,ee.predicate);return Ri&&Ri.box&&Ri.box.length&&(g.markUsedOrientation(T,Fr,mt),g.placedOrientations[mt.crossTileID]=Fr),Ri};Pi(function(){return Eu(Tr,u.WritingMode.horizontal)},function(){var Er=Mt.verticalTextBox;return T.allowVerticalPlacement&&0<mt.numVerticalGlyphVertices&&Er?Eu(Er,u.WritingMode.vertical):{box:null,offscreen:null}}),Xi(Ot&&Ot.box&&Ot.box.length)}}if(Rt=(Ut=Ot)&&Ut.box&&0<Ut.box.length,zt=Ut&&Ut.offscreen,mt.useRuntimeCollisionCircles){var _h=T.text.placedSymbolArray.get(mt.centerJustifiedTextSymbolIndex),js=u.evaluateSizeForFeature(T.textSizeData,Q,_h),xh=E.get("text-padding");ur=g.collisionIndex.placeCollisionCircles(ae,_h,T.lineVertexArray,T.glyphOffsetArray,js,L,O,j,f,me,ee.predicate,mt.collisionCircleDiameter,xh),Rt=ae||0<ur.circles.length&&!ur.collisionDetected,zt=zt&&ur.offscreen}if(Mt.iconFeatureIndex&&(ki=Mt.iconFeatureIndex),Mt.iconBox){var Il=function(Er){var Fr=Ce&&er?Cc(Er,er.x,er.y,he,me,g.transform.angle):Er;return g.collisionIndex.placeCollisionBox(Fr,ye,V,L,ee.predicate)};_t=Br&&Br.box&&Br.box.length&&Mt.verticalIconBox?0<(Fn=Il(Mt.verticalIconBox)).box.length:0<(Fn=Il(Mt.iconBox)).box.length,zt=zt&&Fn.offscreen}var jc=re||mt.numHorizontalGlyphVertices===0&&mt.numVerticalGlyphVertices===0,Iu=ue||mt.numIconVertices===0;if(jc||Iu?Iu?jc||(_t=_t&&Rt):Rt=_t&&Rt:_t=Rt=_t&&Rt,Rt&&Ut&&Ut.box&&g.collisionIndex.insertCollisionBox(Ut.box,E.get("text-ignore-placement"),T.bucketInstanceId,Br&&Br.box&&Li?Li:ni,ee.ID),_t&&Fn&&g.collisionIndex.insertCollisionBox(Fn.box,E.get("icon-ignore-placement"),T.bucketInstanceId,ki,ee.ID),ur&&(Rt&&g.collisionIndex.insertCollisionCircles(ur.circles,E.get("text-ignore-placement"),T.bucketInstanceId,ni,ee.ID),f)){var ku=T.bucketInstanceId,us=g.collisionCircleArrays[ku];us===void 0&&(us=g.collisionCircleArrays[ku]=new ax);for(var cs=0;cs<ur.circles.length;cs+=4)us.circles.push(ur.circles[cs+0]),us.circles.push(ur.circles[cs+1]),us.circles.push(ur.circles[cs+2]),us.circles.push(ur.collisionDetected?1:0)}g.placements[mt.crossTileID]=new n0(Rt||De,_t||Ve,zt||T.justReloaded),l[mt.crossTileID]=!0}}if(!T.collisionArrays&&K&&T.deserializeCollisionBoxes(K),ke)for(var Ke=T.getSortedSymbolIndexes(this.transform.angle),lt=Ke.length-1;0<=lt;--lt){var ht=Ke[lt];qe(T.symbolInstances.get(ht),T.collisionArrays[ht])}else for(var dt=r.symbolInstanceStart;dt<r.symbolInstanceEnd;dt++)qe(T.symbolInstances.get(dt),T.collisionArrays[dt]);if(f&&T.bucketInstanceId in this.collisionCircleArrays){var Tt=this.collisionCircleArrays[T.bucketInstanceId];u.invert(Tt.invProjMatrix,L),Tt.viewportMatrix=this.collisionIndex.getViewportMatrix()}T.justReloaded=!1},Oi.prototype.markUsedJustification=function(r,l,f,g){var x;x=g===u.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.getAnchorJustification(l)];for(var T=0,E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];T<E.length;T+=1){var L=E[T];0<=L&&(r.text.placedSymbolArray.get(L).crossTileID=0<=x&&L!==x?0:f.crossTileID)}},Oi.prototype.markUsedOrientation=function(r,l,f){for(var g=l===u.WritingMode.horizontal||l===u.WritingMode.horizontalOnly?l:0,x=l===u.WritingMode.vertical?l:0,T=0,E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];T<E.length;T+=1)r.text.placedSymbolArray.get(E[T]).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=x)},Oi.prototype.commit=function(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;var l=this.prevPlacement,f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;var g=l?l.symbolFadeChange(r):1,x=l?l.opacities:{},T=l?l.variableOffsets:{},E=l?l.placedOrientations:{};for(var L in this.placements){var O=this.placements[L],j=x[L];f=j?(this.opacities[L]=new Ja(j,g,O.text,O.icon),f||O.text!==j.text.placed||O.icon!==j.icon.placed):(this.opacities[L]=new Ja(null,g,O.text,O.icon,O.skipFade),f||O.text||O.icon)}for(var V in x){var H=x[V];if(!this.opacities[V]){var K=new Ja(H,g,!1,!1);K.isHidden()||(this.opacities[V]=K,f=f||H.text.placed||H.icon.placed)}}for(var Q in T)this.variableOffsets[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.variableOffsets[Q]=T[Q]);for(var ee in E)this.placedOrientations[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.placedOrientations[ee]=E[ee]);f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)},Oi.prototype.updateLayerOpacities=function(r,l){for(var f={},g=0,x=l;g<x.length;g+=1){var T=x[g],E=T.getBucket(r);E&&T.latestFeatureIndex&&r.id===E.layerIds[0]&&this.updateBucketOpacities(E,f,T.collisionBoxArray)}},Oi.prototype.updateBucketOpacities=function(r,l,f){var g=this;r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();var x=r.layers[0].layout,T=new Ja(null,0,!1,!1,!0),E=x.get("text-allow-overlap"),L=x.get("icon-allow-overlap"),O=x.get("text-variable-anchor"),j=x.get("text-rotation-alignment")==="map",V=x.get("text-pitch-alignment")==="map",H=x.get("icon-text-fit")!=="none",K=new Ja(null,0,E&&(L||!r.hasIconData()||x.get("icon-optional")),L&&(E||!r.hasTextData()||x.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);for(var Q=function(ae,ye,he){for(var me=0;me<ye/4;me++)ae.opacityVertexArray.emplaceBack(he)},ee=function(ae){var ye=r.symbolInstances.get(ae),he=ye.numHorizontalGlyphVertices,me=ye.numVerticalGlyphVertices,Ce=ye.crossTileID,ke=g.opacities[Ce];l[Ce]?ke=T:ke||(g.opacities[Ce]=ke=K),l[Ce]=!0;var De=0<ye.numIconVertices,Ve=g.placedOrientations[ye.crossTileID],qe=Ve===u.WritingMode.vertical,Ke=Ve===u.WritingMode.horizontal||Ve===u.WritingMode.horizontalOnly;if(0<he||0<me){var lt=au(ke.text);Q(r.text,he,qe?Tc:lt),Q(r.text,me,Ke?Tc:lt);var ht=ke.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(function(Ot){0<=Ot&&(r.text.placedSymbolArray.get(Ot).hidden=ht||qe?1:0)}),0<=ye.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=ht||Ke?1:0);var dt=g.variableOffsets[ye.crossTileID];dt&&g.markUsedJustification(r,dt.anchor,ye,Ve);var Tt=g.placedOrientations[ye.crossTileID];Tt&&(g.markUsedJustification(r,"left",ye,Tt),g.markUsedOrientation(r,Tt,ye))}if(De){var mt=au(ke.icon),Mt=!(H&&ye.verticalPlacedIconSymbolIndex&&qe);0<=ye.placedIconSymbolIndex&&(Q(r.icon,ye.numIconVertices,Mt?mt:Tc),r.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=ke.icon.isHidden()),0<=ye.verticalPlacedIconSymbolIndex&&(Q(r.icon,ye.numVerticalIconVertices,Mt?Tc:mt),r.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){var Ut=r.collisionArrays[ae];if(Ut){var Rt=new u.Point(0,0);if(Ut.textBox||Ut.verticalTextBox){var _t=!0;if(O){var zt=g.variableOffsets[Ce];zt?(Rt=bc(zt.anchor,zt.width,zt.height,zt.textOffset,zt.textBoxScale),j&&Rt._rotate(V?g.transform.angle:-g.transform.angle)):_t=!1}Ut.textBox&&gl(r.textCollisionBox.collisionVertexArray,ke.text.placed,!_t||qe,Rt.x,Rt.y),Ut.verticalTextBox&&gl(r.textCollisionBox.collisionVertexArray,ke.text.placed,!_t||Ke,Rt.x,Rt.y)}var er=Boolean(!Ke&&Ut.verticalIconBox);Ut.iconBox&&gl(r.iconCollisionBox.collisionVertexArray,ke.icon.placed,er,H?Rt.x:0,H?Rt.y:0),Ut.verticalIconBox&&gl(r.iconCollisionBox.collisionVertexArray,ke.icon.placed,!er,H?Rt.x:0,H?Rt.y:0)}}},re=0;re<r.symbolInstances.length;re++)ee(re);if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.bucketInstanceId in this.collisionCircleArrays){var ue=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=ue.invProjMatrix,r.placementViewportMatrix=ue.viewportMatrix,r.collisionCircleArray=ue.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}},Oi.prototype.symbolFadeChange=function(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Oi.prototype.zoomAdjustment=function(r){return Math.max(0,(this.transform.zoom-r)/1.5)},Oi.prototype.hasTransitions=function(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration},Oi.prototype.stillRecent=function(r,l){var f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>r},Oi.prototype.setStale=function(){this.stale=!0};var Sc=Math.pow(2,25),a0=Math.pow(2,24),$p=Math.pow(2,17),Ia=Math.pow(2,16),s0=Math.pow(2,9),l0=Math.pow(2,8),u0=Math.pow(2,1);function au(r){if(r.opacity===0&&!r.placed)return 0;if(r.opacity===1&&r.placed)return 4294967295;var l=r.placed?1:0,f=Math.floor(127*r.opacity);return f*Sc+l*a0+f*$p+l*Ia+f*s0+l*l0+f*u0+l}function Xp(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&r.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}var Tc=0;function vd(r,l,f,g,x,T,E){this.placement=new Oi(r,x,T,E),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=g,this._done=!1}function Ec(r,l,f){this.tileID=r,this.indexedSymbolInstances={},this.bucketInstanceId=f;for(var g=0;g<l.length;g++){var x=l.get(g),T=x.key;this.indexedSymbolInstances[T]||(this.indexedSymbolInstances[T]=[]),this.indexedSymbolInstances[T].push({crossTileID:x.crossTileID,coord:this.getScaledCoordinates(x,r)})}}Xp.prototype.continuePlacement=function(r,l,f,g,x){for(var T=this._bucketParts;this._currentTileIndex<r.length;)if(l.getBucketParts(T,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort(function(E,L){return E.sortKey-L.sortKey}));this._currentPartIndex<T.length;)if(l.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,x())return!0;return!1},vd.prototype.isDone=function(){return this._done},vd.prototype.continuePlacement=function(r,l,f){for(var g=this,x=u.browser.now(),T=function(){var O=u.browser.now()-x;return!g._forceFullPlacement&&2<O};0<=this._currentPlacementIndex;){var E=l[r[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=L)&&(!E.maxzoom||E.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new Xp(E)),this._inProgressLayer.continuePlacement(f[E.source],this.placement,this._showCollisionBoxes,E,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},vd.prototype.commit=function(r){return this.placement.commit(r),this.placement};var sx=512/u.EXTENT/2;function Jp(){this.maxCrossTileID=0}function su(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}function Qp(){this.layerIndexes={},this.crossTileIDs=new Jp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}function eh(r,l){return u.emitValidationErrors(r,l&&l.filter(function(f){return f.identifier!=="source.canvas"}))}Ec.prototype.getScaledCoordinates=function(r,l){var f=sx/Math.pow(2,l.canonical.z-this.tileID.canonical.z);return{x:Math.floor((l.canonical.x*u.EXTENT+r.anchorX)*f),y:Math.floor((l.canonical.y*u.EXTENT+r.anchorY)*f)}},Ec.prototype.findMatches=function(r,l,f){for(var g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z),x=0;x<r.length;x++){var T=r.get(x);if(!T.crossTileID){var E=this.indexedSymbolInstances[T.key];if(E)for(var L=this.getScaledCoordinates(T,l),O=0,j=E;O<j.length;O+=1){var V=j[O];if(Math.abs(V.coord.x-L.x)<=g&&Math.abs(V.coord.y-L.y)<=g&&!f[V.crossTileID]){f[V.crossTileID]=!0,T.crossTileID=V.crossTileID;break}}}}},Jp.prototype.generate=function(){return++this.maxCrossTileID},su.prototype.handleWrapJump=function(r){var l=Math.round((r-this.lng)/360);if(l!==0)for(var f in this.indexes){var g=this.indexes[f],x={};for(var T in g){var E=g[T];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+l),x[E.tileID.key]=E}this.indexes[f]=x}this.lng=r},su.prototype.addBucket=function(r,l,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(var g=0;g<l.symbolInstances.length;g++)l.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});var x=this.usedCrossTileIDs[r.overscaledZ];for(var T in this.indexes){var E=this.indexes[T];if(Number(T)>r.overscaledZ)for(var L in E){var O=E[L];O.tileID.isChildOf(r)&&O.findMatches(l.symbolInstances,r,x)}else{var j=E[r.scaledTo(Number(T)).key];j&&j.findMatches(l.symbolInstances,r,x)}}for(var V=0;V<l.symbolInstances.length;V++){var H=l.symbolInstances.get(V);H.crossTileID||(H.crossTileID=f.generate(),x[H.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ec(r,l.symbolInstances,l.bucketInstanceId),!0},su.prototype.removeBucketCrossTileIDs=function(r,l){for(var f in l.indexedSymbolInstances)for(var g=0,x=l.indexedSymbolInstances[f];g<x.length;g+=1)delete this.usedCrossTileIDs[r][x[g].crossTileID]},su.prototype.removeStaleBuckets=function(r){var l=!1;for(var f in this.indexes){var g=this.indexes[f];for(var x in g)r[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[x]),delete g[x],l=!0)}return l},Qp.prototype.addLayer=function(r,l,f){var g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new su);var x=!1,T={};g.handleWrapJump(f);for(var E=0,L=l;E<L.length;E+=1){var O=L[E],j=O.getBucket(r);j&&r.id===j.layerIds[0]&&(j.bucketInstanceId||(j.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(O.tileID,j,this.crossTileIDs)&&(x=!0),T[j.bucketInstanceId]=!0)}return g.removeStaleBuckets(T)&&(x=!0),x},Qp.prototype.pruneUnusedLayers=function(r){var l={};for(var f in r.forEach(function(g){l[g]=!0}),this.layerIndexes)l[f]||delete this.layerIndexes[f]};var yl,Wm=u.pick(cr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),c0=u.pick(cr,["setCenter","setZoom","setBearing","setPitch"]),p0=function(){var r={},l=u.styleSpec.$version;for(var f in u.styleSpec.$root){var g,x=u.styleSpec.$root[f];x.required&&(g=f==="version"?l:x.type==="array"?[]:{})!=null&&(r[f]=g)}return r}(),lu=((yl=u.Evented)&&(St.__proto__=yl),((St.prototype=Object.create(yl&&yl.prototype)).constructor=St).prototype.loadURL=function(r,l){var f=this;l===void 0&&(l={}),this.fire(new u.Event("dataloading",{dataType:"style"}));var g=typeof l.validate=="boolean"?l.validate:!u.isMapboxURL(r);r=this.map._requestManager.normalizeStyleURL(r,l.accessToken);var x=this.map._requestManager.transformRequest(r,u.ResourceType.Style);this._request=u.getJSON(x,function(T,E){f._request=null,T?f.fire(new u.ErrorEvent(T)):E&&f._load(E,g)})},St.prototype.loadJSON=function(r,l){var f=this;l===void 0&&(l={}),this.fire(new u.Event("dataloading",{dataType:"style"})),this._request=u.browser.frame(function(){f._request=null,f._load(r,l.validate!==!1)})},St.prototype.loadEmpty=function(){this.fire(new u.Event("dataloading",{dataType:"style"})),this._load(p0,!1)},St.prototype._load=function(r,l){if(!l||!eh(this,u.validateStyle(r))){for(var f in this._loaded=!0,(this.stylesheet=r).sources)this.addSource(f,r.sources[f],{validate:!1});r.sprite?this._loadSprite(r.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(r.glyphs);var g=dl(this.stylesheet.layers);this._order=g.map(function(L){return L.id}),this._layers={},this._serializedLayers={};for(var x=0,T=g;x<T.length;x+=1){var E=T[x];(E=u.createStyleLayer(E)).setEventedParent(this,{layer:{id:E.id}}),this._layers[E.id]=E,this._serializedLayers[E.id]=E.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new lc(this.stylesheet.light),this.fire(new u.Event("data",{dataType:"style"})),this.fire(new u.Event("style.load"))}},St.prototype._loadSprite=function(r){var l,f,g,x,T,E,L,O,j,V=this;function H(){if(E)g(E);else if(x&&T){var K=u.browser.getImageData(T),Q={};for(var ee in x){var re=x[ee],ue=re.width,ae=re.height,ye=re.x,he=re.y,me=re.sdf,Ce=re.pixelRatio,ke=re.stretchX,De=re.stretchY,Ve=re.content,qe=new u.RGBAImage({width:ue,height:ae});u.RGBAImage.copy(K,qe,{x:ye,y:he},{x:0,y:0},{width:ue,height:ae}),Q[ee]={data:qe,pixelRatio:Ce,sdf:me,stretchX:ke,stretchY:De,content:Ve}}g(null,Q)}}this._spriteRequest=(l=r,f=this.map._requestManager,g=function(K,Q){if(V._spriteRequest=null,K)V.fire(new u.ErrorEvent(K));else if(Q)for(var ee in Q)V.imageManager.addImage(ee,Q[ee]);V.imageManager.setLoaded(!0),V._availableImages=V.imageManager.listImages(),V.dispatcher.broadcast("setImages",V._availableImages),V.fire(new u.Event("data",{dataType:"style"}))},L=1<u.browser.devicePixelRatio?"@2x":"",O=u.getJSON(f.transformRequest(f.normalizeSpriteURL(l,L,".json"),u.ResourceType.SpriteJSON),function(K,Q){O=null,E||(E=K,x=Q,H())}),j=u.getImage(f.transformRequest(f.normalizeSpriteURL(l,L,".png"),u.ResourceType.SpriteImage),function(K,Q){j=null,E||(E=K,T=Q,H())}),{cancel:function(){O&&(O.cancel(),O=null),j&&(j.cancel(),j=null)}})},St.prototype._validateLayer=function(r){var l=this.sourceCaches[r.source];if(l){var f=r.sourceLayer;if(f){var g=l.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new u.ErrorEvent(new Error('Source layer "'+f+'" does not exist on source "'+g.id+'" as specified by style layer "'+r.id+'"')))}}},St.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()},St.prototype._serializeLayers=function(r){for(var l=[],f=0,g=r;f<g.length;f+=1){var x=this._layers[g[f]];x.type!=="custom"&&l.push(x.serialize())}return l},St.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(var l in this._layers)if(this._layers[l].hasTransition())return!0;return!1},St.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},St.prototype.update=function(r){if(this._loaded){var l=this._changed;if(this._changed){var f=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);for(var x in(f.length||g.length)&&this._updateWorkerLayers(f,g),this._updatedSources){var T=this._updatedSources[x];T==="reload"?this._reloadSource(x):T==="clear"&&this._clearSource(x)}for(var E in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[E].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}for(var L in this.sourceCaches)this.sourceCaches[L].used=!1;for(var O=0,j=this._order;O<j.length;O+=1){var V=this._layers[j[O]];V.recalculate(r,this._availableImages),!V.isHidden(r.zoom)&&V.source&&(this.sourceCaches[V.source].used=!0)}this.light.recalculate(r),this.z=r.zoom,l&&this.fire(new u.Event("data",{dataType:"style"}))}},St.prototype._updateTilesForChangedImages=function(){var r=Object.keys(this._changedImages);if(r.length){for(var l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}},St.prototype._updateWorkerLayers=function(r,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(r),removedIds:l})},St.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},St.prototype.setState=function(r){var l=this;if(this._checkLoaded(),eh(this,u.validateStyle(r)))return!1;(r=u.clone$1(r)).layers=dl(r.layers);var f=function(x,T){if(!x)return[{command:cr.setStyle,args:[T]}];var E=[];try{if(!u.deepEqual(x.version,T.version))return[{command:cr.setStyle,args:[T]}];u.deepEqual(x.center,T.center)||E.push({command:cr.setCenter,args:[T.center]}),u.deepEqual(x.zoom,T.zoom)||E.push({command:cr.setZoom,args:[T.zoom]}),u.deepEqual(x.bearing,T.bearing)||E.push({command:cr.setBearing,args:[T.bearing]}),u.deepEqual(x.pitch,T.pitch)||E.push({command:cr.setPitch,args:[T.pitch]}),u.deepEqual(x.sprite,T.sprite)||E.push({command:cr.setSprite,args:[T.sprite]}),u.deepEqual(x.glyphs,T.glyphs)||E.push({command:cr.setGlyphs,args:[T.glyphs]}),u.deepEqual(x.transition,T.transition)||E.push({command:cr.setTransition,args:[T.transition]}),u.deepEqual(x.light,T.light)||E.push({command:cr.setLight,args:[T.light]});var L={},O=[];(function(V,H,K,Q){var ee,re,ue,ae;for(ee in H=H||{},V=V||{})V.hasOwnProperty(ee)&&(H.hasOwnProperty(ee)||Um(ee,K,Q));for(ee in H)H.hasOwnProperty(ee)&&(V.hasOwnProperty(ee)?u.deepEqual(V[ee],H[ee])||(V[ee].type==="geojson"&&H[ee].type==="geojson"&&xc(V,H,ee)?K.push({command:cr.setGeoJSONSourceData,args:[ee,H[ee].data]}):(ue=H,Um(re=ee,ae=K,Q),jm(re,ue,ae))):jm(ee,H,K))})(x.sources,T.sources,O,L);var j=[];x.layers&&x.layers.forEach(function(V){L[V.source]?E.push({command:cr.removeLayer,args:[V.id]}):j.push(V)}),E=E.concat(O),function(V,H,K){H=H||[];var Q,ee,re,ue,ae,ye,he,me=(V=V||[]).map(Qy),Ce=H.map(Qy),ke=V.reduce(e0,{}),De=H.reduce(e0,{}),Ve=me.slice(),qe=Object.create(null);for(ee=Q=0;Q<me.length;Q++)De.hasOwnProperty(re=me[Q])?ee++:(K.push({command:cr.removeLayer,args:[re]}),Ve.splice(Ve.indexOf(re,ee),1));for(ee=Q=0;Q<Ce.length;Q++)Ve[Ve.length-1-Q]!==(re=Ce[Ce.length-1-Q])&&(ke.hasOwnProperty(re)?(K.push({command:cr.removeLayer,args:[re]}),Ve.splice(Ve.lastIndexOf(re,Ve.length-ee),1)):ee++,K.push({command:cr.addLayer,args:[De[re],ye=Ve[Ve.length-Q]]}),Ve.splice(Ve.length-Q,0,re),qe[re]=!0);for(Q=0;Q<Ce.length;Q++)if(ue=ke[re=Ce[Q]],ae=De[re],!qe[re]&&!u.deepEqual(ue,ae))if(u.deepEqual(ue.source,ae.source)&&u.deepEqual(ue["source-layer"],ae["source-layer"])&&u.deepEqual(ue.type,ae.type)){for(he in Xa(ue.layout,ae.layout,K,re,null,cr.setLayoutProperty),Xa(ue.paint,ae.paint,K,re,null,cr.setPaintProperty),u.deepEqual(ue.filter,ae.filter)||K.push({command:cr.setFilter,args:[re,ae.filter]}),u.deepEqual(ue.minzoom,ae.minzoom)&&u.deepEqual(ue.maxzoom,ae.maxzoom)||K.push({command:cr.setLayerZoomRange,args:[re,ae.minzoom,ae.maxzoom]}),ue)ue.hasOwnProperty(he)&&he!=="layout"&&he!=="paint"&&he!=="filter"&&he!=="metadata"&&he!=="minzoom"&&he!=="maxzoom"&&(he.indexOf("paint.")===0?Xa(ue[he],ae[he],K,re,he.slice(6),cr.setPaintProperty):u.deepEqual(ue[he],ae[he])||K.push({command:cr.setLayerProperty,args:[re,he,ae[he]]}));for(he in ae)ae.hasOwnProperty(he)&&!ue.hasOwnProperty(he)&&he!=="layout"&&he!=="paint"&&he!=="filter"&&he!=="metadata"&&he!=="minzoom"&&he!=="maxzoom"&&(he.indexOf("paint.")===0?Xa(ue[he],ae[he],K,re,he.slice(6),cr.setPaintProperty):u.deepEqual(ue[he],ae[he])||K.push({command:cr.setLayerProperty,args:[re,he,ae[he]]}))}else K.push({command:cr.removeLayer,args:[re]}),ye=Ve[Ve.lastIndexOf(re)+1],K.push({command:cr.addLayer,args:[ae,ye]})}(j,T.layers,E)}catch(V){console.warn("Unable to compute style diff:",V),E=[{command:cr.setStyle,args:[T]}]}return E}(this.serialize(),r).filter(function(x){return!(x.command in c0)});if(f.length===0)return!1;var g=f.filter(function(x){return!(x.command in Wm)});if(0<g.length)throw new Error("Unimplemented: "+g.map(function(x){return x.command}).join(", ")+".");return f.forEach(function(x){x.command!=="setTransition"&&l[x.command].apply(l,x.args)}),this.stylesheet=r,!0},St.prototype.addImage=function(r,l){if(this.getImage(r))return this.fire(new u.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(r,l),this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.fire(new u.Event("data",{dataType:"style"}))},St.prototype.updateImage=function(r,l){this.imageManager.updateImage(r,l)},St.prototype.getImage=function(r){return this.imageManager.getImage(r)},St.prototype.removeImage=function(r){if(!this.getImage(r))return this.fire(new u.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(r),this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.fire(new u.Event("data",{dataType:"style"}))},St.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},St.prototype.addSource=function(r,l,f){var g=this;if(f===void 0&&(f={}),this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error("There is already a source with this ID");if(!l.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(l).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(l.type)&&this._validate(u.validateStyle.source,"sources."+r,l,null,f))){this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);var x=this.sourceCaches[r]=new ks(r,l,this.dispatcher);x.style=this,x.setEventedParent(this,function(){return{isSourceLoaded:g.loaded(),source:x.serialize(),sourceId:r}}),x.onAdd(this.map),this._changed=!0}},St.prototype.removeSource=function(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(var l in this._layers)if(this._layers[l].source===r)return this.fire(new u.ErrorEvent(new Error('Source "'+r+'" cannot be removed while layer "'+l+'" is using it.')));var f=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],f.fire(new u.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),f.setEventedParent(null),f.clearTiles(),f.onRemove&&f.onRemove(this.map),this._changed=!0},St.prototype.setGeoJSONSourceData=function(r,l){this._checkLoaded(),this.sourceCaches[r].getSource().setData(l),this._changed=!0},St.prototype.getSource=function(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()},St.prototype.addLayer=function(r,l,f){f===void 0&&(f={}),this._checkLoaded();var g=r.id;if(this.getLayer(g))this.fire(new u.ErrorEvent(new Error('Layer with id "'+g+'" already exists on this map')));else{var x;if(r.type==="custom"){if(eh(this,u.validateCustomStyleLayer(r)))return;x=u.createStyleLayer(r)}else{if(typeof r.source=="object"&&(this.addSource(g,r.source),r=u.clone$1(r),r=u.extend(r,{source:g})),this._validate(u.validateStyle.layer,"layers."+g,r,{arrayIndex:-1},f))return;x=u.createStyleLayer(r),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[x.id]=x.serialize()}var T=l?this._order.indexOf(l):this._order.length;if(l&&T===-1)this.fire(new u.ErrorEvent(new Error('Layer with id "'+l+'" does not exist on this map.')));else{if(this._order.splice(T,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){var E=this._removedLayers[g];delete this._removedLayers[g],E.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}},St.prototype.moveLayer=function(r,l){if(this._checkLoaded(),this._changed=!0,this._layers[r]){if(r!==l){var f=this._order.indexOf(r);this._order.splice(f,1);var g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new u.ErrorEvent(new Error('Layer with id "'+l+'" does not exist on this map.'))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}}else this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be moved.")))},St.prototype.removeLayer=function(r){this._checkLoaded();var l=this._layers[r];if(l){l.setEventedParent(null);var f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}else this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be removed.")))},St.prototype.getLayer=function(r){return this._layers[r]},St.prototype.hasLayer=function(r){return r in this._layers},St.prototype.setLayerZoomRange=function(r,l,f){this._checkLoaded();var g=this.getLayer(r);g?g.minzoom===l&&g.maxzoom===f||(l!=null&&(g.minzoom=l),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot have zoom extent.")))},St.prototype.setFilter=function(r,l,f){f===void 0&&(f={}),this._checkLoaded();var g=this.getLayer(r);if(g){if(!u.deepEqual(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.validateStyle.filter,"layers."+g.id+".filter",l,null,f)||(g.filter=u.clone$1(l),this._updateLayer(g)))}else this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be filtered.")))},St.prototype.getFilter=function(r){return u.clone$1(this.getLayer(r).filter)},St.prototype.setLayoutProperty=function(r,l,f,g){g===void 0&&(g={}),this._checkLoaded();var x=this.getLayer(r);x?u.deepEqual(x.getLayoutProperty(l),f)||(x.setLayoutProperty(l,f,g),this._updateLayer(x)):this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be styled.")))},St.prototype.getLayoutProperty=function(r,l){var f=this.getLayer(r);if(f)return f.getLayoutProperty(l);this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style.")))},St.prototype.setPaintProperty=function(r,l,f,g){g===void 0&&(g={}),this._checkLoaded();var x=this.getLayer(r);x?u.deepEqual(x.getPaintProperty(l),f)||(x.setPaintProperty(l,f,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be styled.")))},St.prototype.getPaintProperty=function(r,l){return this.getLayer(r).getPaintProperty(l)},St.prototype.setFeatureState=function(r,l){this._checkLoaded();var f=r.source,g=r.sourceLayer,x=this.sourceCaches[f];if(x!==void 0){var T=x.getSource().type;T==="geojson"&&g?this.fire(new u.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||g?(r.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,r.id,l)):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+f+"' does not exist in the map's style.")))},St.prototype.removeFeatureState=function(r,l){this._checkLoaded();var f=r.source,g=this.sourceCaches[f];if(g!==void 0){var x=g.getSource().type,T=x==="vector"?r.sourceLayer:void 0;x!=="vector"||T?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):g.removeFeatureState(T,r.id,l):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+f+"' does not exist in the map's style.")))},St.prototype.getFeatureState=function(r){this._checkLoaded();var l=r.source,f=r.sourceLayer,g=this.sourceCaches[l];if(g!==void 0){if(g.getSource().type!=="vector"||f)return r.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,r.id);this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+l+"' does not exist in the map's style.")))},St.prototype.getTransition=function(){return u.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},St.prototype.serialize=function(){return u.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:u.mapObject(this.sourceCaches,function(r){return r.serialize()}),layers:this._serializeLayers(this._order)},function(r){return r!==void 0})},St.prototype._updateLayer=function(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._changed=!0},St.prototype._flattenAndSortRenderedFeatures=function(r){for(var l=this,f=function(ke){return l._layers[ke].type==="fill-extrusion"},g={},x=[],T=this._order.length-1;0<=T;T--){var E=this._order[T];if(f(E)){g[E]=T;for(var L=0,O=r;L<O.length;L+=1){var j=O[L][E];if(j)for(var V=0,H=j;V<H.length;V+=1)x.push(H[V])}}}x.sort(function(ke,De){return De.intersectionZ-ke.intersectionZ});for(var K=[],Q=this._order.length-1;0<=Q;Q--){var ee=this._order[Q];if(f(ee))for(var re=x.length-1;0<=re;re--){var ue=x[re].feature;if(g[ue.layer.id]<Q)break;K.push(ue),x.pop()}else for(var ae=0,ye=r;ae<ye.length;ae+=1){var he=ye[ae][ee];if(he)for(var me=0,Ce=he;me<Ce.length;me+=1)K.push(Ce[me].feature)}}return K},St.prototype.queryRenderedFeatures=function(r,l,f){l&&l.filter&&this._validate(u.validateStyle.filter,"queryRenderedFeatures.filter",l.filter,null,l);var g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var x=0,T=l.layers;x<T.length;x+=1){var E=T[x],L=this._layers[E];if(!L)return this.fire(new u.ErrorEvent(new Error("The layer '"+E+"' does not exist in the map's style and cannot be queried for features."))),[];g[L.source]=!0}}var O=[];for(var j in l.availableImages=this._availableImages,this.sourceCaches)l.layers&&!g[j]||O.push(Jo(this.sourceCaches[j],this._layers,this._serializedLayers,r,l,f));return this.placement&&O.push(function(V,H,K,Q,ee,re,ue){for(var ae={},ye=re.queryRenderedSymbols(Q),he=[],me=0,Ce=Object.keys(ye).map(Number);me<Ce.length;me+=1)he.push(ue[Ce[me]]);he.sort(io);for(var ke=function(){var lt=Ve[De],ht=lt.featureIndex.lookupSymbolFeatures(ye[lt.bucketInstanceId],H,lt.bucketIndex,lt.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,V);for(var dt in ht){var Tt=ae[dt]=ae[dt]||[],mt=ht[dt];mt.sort(function(Rt,_t){var zt=lt.featureSortOrder;if(zt){var er=zt.indexOf(Rt.featureIndex);return zt.indexOf(_t.featureIndex)-er}return _t.featureIndex-Rt.featureIndex});for(var Mt=0,Ut=mt;Mt<Ut.length;Mt+=1)Tt.push(Ut[Mt])}},De=0,Ve=he;De<Ve.length;De+=1)ke();function qe(lt){ae[lt].forEach(function(ht){var dt=ht.feature,Tt=K[V[lt].source].getFeatureState(dt.layer["source-layer"],dt.id);dt.source=dt.layer.source,dt.layer["source-layer"]&&(dt.sourceLayer=dt.layer["source-layer"]),dt.state=Tt})}for(var Ke in ae)qe(Ke);return ae}(this._layers,this._serializedLayers,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(O)},St.prototype.querySourceFeatures=function(r,l){l&&l.filter&&this._validate(u.validateStyle.filter,"querySourceFeatures.filter",l.filter,null,l);var f=this.sourceCaches[r];return f?function(g,x){for(var T=g.getRenderableIds().map(function(H){return g.getTileByID(H)}),E=[],L={},O=0;O<T.length;O++){var j=T[O],V=j.tileID.canonical.key;L[V]||(L[V]=!0,j.querySourceFeatures(E,x))}return E}(f,l):[]},St.prototype.addSourceType=function(r,l,f){return St.getSourceType(r)?f(new Error('A source type called "'+r+'" already exists.')):(St.setSourceType(r,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:l.workerSourceURL},f):f(null,null))},St.prototype.getLight=function(){return this.light.getLight()},St.prototype.setLight=function(r,l){l===void 0&&(l={}),this._checkLoaded();var f=this.light.getLight(),g=!1;for(var x in r)if(!u.deepEqual(r[x],f[x])){g=!0;break}if(g){var T={now:u.browser.now(),transition:u.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(T)}},St.prototype._validate=function(r,l,f,g,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&eh(this,r.call(u.validateStyle,u.extend({key:l,style:this.serialize(),value:f,styleSpec:u.styleSpec},g)))},St.prototype._remove=function(){for(var r in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[r].setEventedParent(null);for(var l in this.sourceCaches)this.sourceCaches[l].clearTiles(),this.sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},St.prototype._clearSource=function(r){this.sourceCaches[r].clearTiles()},St.prototype._reloadSource=function(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()},St.prototype._updateSources=function(r){for(var l in this.sourceCaches)this.sourceCaches[l].update(r)},St.prototype._generateCollisionBoxes=function(){for(var r in this.sourceCaches)this._reloadSource(r)},St.prototype._updatePlacement=function(r,l,f,g,x){x===void 0&&(x=!1);for(var T=!1,E=!1,L={},O=0,j=this._order;O<j.length;O+=1){var V=this._layers[j[O]];if(V.type==="symbol"){if(!L[V.source]){var H=this.sourceCaches[V.source];L[V.source]=H.getRenderableIds(!0).map(function(ue){return H.getTileByID(ue)}).sort(function(ue,ae){return ae.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(ae.tileID)?-1:1)})}var K=this.crossTileSymbolIndex.addLayer(V,L[V.source],r.center.lng);T=T||K}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.browser.now(),r.zoom))&&(this.pauseablePlacement=new vd(r,this._order,x,l,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.browser.now()),E=!0),T&&this.pauseablePlacement.placement.setStale()),E||T)for(var Q=0,ee=this._order;Q<ee.length;Q+=1){var re=this._layers[ee[Q]];re.type==="symbol"&&this.placement.updateLayerOpacities(re,L[re.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.browser.now())},St.prototype._releaseSymbolFadeTiles=function(){for(var r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()},St.prototype.getImages=function(r,l,f){this.imageManager.getImages(l.icons,f),this._updateTilesForChangedImages();var g=this.sourceCaches[l.source];g&&g.setDependencies(l.tileID.key,l.type,l.icons)},St.prototype.getGlyphs=function(r,l,f){this.glyphManager.getGlyphs(l.stacks,f)},St.prototype.getResource=function(r,l,f){return u.makeRequest(l,f)},St);function St(r,l){var f=this;l===void 0&&(l={}),yl.call(this),this.map=r,this.dispatcher=new wa(Ms(),this),this.imageManager=new qt,this.imageManager.setEventedParent(this),this.glyphManager=new Rn(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new nn(256,512),this.crossTileSymbolIndex=new Qp,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.getReferrer());var g=this;this._rtlTextPluginCallback=St.registerForPluginStateChange(function(x){g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},function(T,E){if(u.triggerPluginCompletionEvent(T),E&&E.every(function(O){return O}))for(var L in g.sourceCaches)g.sourceCaches[L].reload()})}),this.on("data",function(x){if(x.dataType==="source"&&x.sourceDataType==="metadata"){var T=f.sourceCaches[x.sourceId];if(T){var E=T.getSource();if(E&&E.vectorLayerIds)for(var L in f._layers){var O=f._layers[L];O.source===E.id&&f._validateLayer(O)}}}})}lu.getSourceType=function(r){return zo[r]},lu.setSourceType=function(r,l){zo[r]=l},lu.registerForPluginStateChange=u.registerForPluginStateChange;var vl=u.createLayout([{name:"a_pos",type:"Int16",components:2}]),_d=He(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),h0=He(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),d0=He(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),f0=He(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),ka=He("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),lx=He(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),uu=He(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),m0=He("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ic=He("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),th=He("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ux=He(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),cx=He(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),px=He(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),g0=He(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),kc=He(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Qa=He(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),y0=He(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),v0=He(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),rh=He(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),yt=He(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ym=He(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),_0=He(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),x0=He(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),nh=He(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),ih=He(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Km=He(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function He(r,l){var f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=l.match(/attribute ([\w]+) ([\w]+)/g),x=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=T?T.concat(x):x,L={};return{fragmentSource:r=r.replace(f,function(O,j,V,H,K){return L[K]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_`+K+`
varying `+V+" "+H+" "+K+`;
#else
uniform `+V+" "+H+" u_"+K+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+K+`
    `+V+" "+H+" "+K+" = u_"+K+`;
#endif
`}),vertexSource:l=l.replace(f,function(O,j,V,H,K){var Q=H==="float"?"vec2":"vec4",ee=K.match(/color/)?"color":Q;return L[K]?j==="define"?`
#ifndef HAS_UNIFORM_u_`+K+`
uniform lowp float u_`+K+`_t;
attribute `+V+" "+Q+" a_"+K+`;
varying `+V+" "+H+" "+K+`;
#else
uniform `+V+" "+H+" u_"+K+`;
#endif
`:ee=="vec4"?`
#ifndef HAS_UNIFORM_u_`+K+`
    `+K+" = a_"+K+`;
#else
    `+V+" "+H+" "+K+" = u_"+K+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+K+`
    `+K+" = unpack_mix_"+ee+"(a_"+K+", u_"+K+`_t);
#else
    `+V+" "+H+" "+K+" = u_"+K+`;
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_`+K+`
uniform lowp float u_`+K+`_t;
attribute `+V+" "+Q+" a_"+K+`;
#else
uniform `+V+" "+H+" u_"+K+`;
#endif
`:ee=="vec4"?`
#ifndef HAS_UNIFORM_u_`+K+`
    `+V+" "+H+" "+K+" = a_"+K+`;
#else
    `+V+" "+H+" "+K+" = u_"+K+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+K+`
    `+V+" "+H+" "+K+" = unpack_mix_"+ee+"(a_"+K+", u_"+K+`_t);
#else
    `+V+" "+H+" "+K+" = u_"+K+`;
#endif
`}),staticAttributes:g,staticUniforms:E}}function Mc(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}var $m=Object.freeze({__proto__:null,prelude:_d,background:h0,backgroundPattern:d0,circle:f0,clippingMask:ka,heatmap:lx,heatmapTexture:uu,collisionBox:m0,collisionCircle:Ic,debug:th,fill:ux,fillOutline:cx,fillOutlinePattern:px,fillPattern:g0,fillExtrusion:kc,fillExtrusionPattern:Qa,hillshadePrepare:y0,hillshade:v0,line:rh,lineGradient:yt,linePattern:Ym,lineSDF:_0,raster:x0,symbolIcon:nh,symbolSDF:ih,symbolTextAndIcon:Km});function Xm(r){for(var l=[],f=0;f<r.length;f++)if(r[f]!==null){var g=r[f].split(" ");l.push(g.pop())}return l}function Jm(r,l,f,g,x,T){var E=r.gl;this.program=E.createProgram();for(var L=Xm(f.staticAttributes),O=g?g.getBinderAttributes():[],j=L.concat(O),V=f.staticUniforms?Xm(f.staticUniforms):[],H=g?g.getBinderUniforms():[],K=[],Q=0,ee=V.concat(H);Q<ee.length;Q+=1){var re=ee[Q];K.indexOf(re)<0&&K.push(re)}var ue=g?g.defines():[];T&&ue.push("#define OVERDRAW_INSPECTOR;");var ae=ue.concat(_d.fragmentSource,f.fragmentSource).join(`
`),ye=ue.concat(_d.vertexSource,f.vertexSource).join(`
`),he=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(he,ae),E.compileShader(he),E.attachShader(this.program,he);var me=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(me,ye),E.compileShader(me),E.attachShader(this.program,me),this.attributes={};var Ce={};this.numAttributes=j.length;for(var ke=0;ke<this.numAttributes;ke++)j[ke]&&(E.bindAttribLocation(this.program,ke,j[ke]),this.attributes[j[ke]]=ke);E.linkProgram(this.program),E.deleteShader(me),E.deleteShader(he);for(var De=0;De<K.length;De++){var Ve=K[De];if(Ve&&!Ce[Ve]){var qe=E.getUniformLocation(this.program,Ve);qe&&(Ce[Ve]=qe)}}this.fixedUniforms=x(r,Ce),this.binderUniforms=g?g.getUniforms(r,Ce):[]}}}function w0(r,l,f){var g=1/Gi(f,1,l.transform.tileZoom),x=Math.pow(2,f.tileID.overscaledZ),T=f.tileSize*Math.pow(2,l.transform.tileZoom)/x,E=T*(f.tileID.canonical.x+f.tileID.wrap*x),L=T*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[g,r.fromScale,r.toScale],u_fade:r.t,u_pixel_coord_upper:[E>>16,L>>16],u_pixel_coord_lower:[65535&E,65535&L]}}function Qm(r,l,f,g){var x=l.style.light,T=x.properties.get("position"),E=[T.x,T.y,T.z],L=u.create$1();x.properties.get("anchor")==="viewport"&&u.fromRotation(L,-l.transform.angle),u.transformMat3(E,E,L);var O=x.properties.get("color");return{u_matrix:r,u_lightpos:E,u_lightintensity:x.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+f,u_opacity:g}}function xd(r){return{u_matrix:r}}function lo(r,l,f,g){return u.extend(xd(r),w0(f,l,g))}function _l(r,l,f,g){var x,T,E=r.transform;if(g.paint.get("circle-pitch-alignment")==="map"){var L=Gi(f,1,E.zoom);x=!0,T=[L,L]}else x=!1,T=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:r.translatePosMatrix(l.posMatrix,f,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:u.browser.devicePixelRatio,u_extrude_scale:T}}function wd(r){return{u_matrix:r}}function oh(r,l,f){var g=r.transform;return{u_matrix:bd(r,l,f),u_ratio:1/Gi(l,1,g.zoom),u_device_pixel_ratio:u.browser.devicePixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}}Mc.prototype.bind=function(r,l,f,g,x,T,E,L){this.context=r;for(var O=this.boundPaintVertexBuffers.length!==g.length,j=0;!O&&j<g.length;j++)this.boundPaintVertexBuffers[j]!==g[j]&&(O=!0);r.extVertexArrayObject&&this.vao&&this.boundProgram===l&&this.boundLayoutVertexBuffer===f&&!O&&this.boundIndexBuffer===x&&this.boundVertexOffset===T&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===L?(r.bindVertexArrayOES.set(this.vao),E&&E.bind(),x&&x.dynamicDraw&&x.bind(),L&&L.bind()):this.freshBind(l,f,g,x,T,E,L)},Mc.prototype.freshBind=function(r,l,f,g,x,T,E){var L,O=r.numAttributes,j=this.context,V=j.gl;if(j.extVertexArrayObject)this.vao&&this.destroy(),this.vao=j.extVertexArrayObject.createVertexArrayOES(),j.bindVertexArrayOES.set(this.vao),L=0,this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=E;else{L=j.currentNumAttributes||0;for(var H=O;H<L;H++)V.disableVertexAttribArray(H)}l.enableAttributes(V,r);for(var K=0,Q=f;K<Q.length;K+=1)Q[K].enableAttributes(V,r);T&&T.enableAttributes(V,r),E&&E.enableAttributes(V,r),l.bind(),l.setVertexAttribPointers(V,r,x);for(var ee=0,re=f;ee<re.length;ee+=1){var ue=re[ee];ue.bind(),ue.setVertexAttribPointers(V,r,x)}T&&(T.bind(),T.setVertexAttribPointers(V,r,x)),g&&g.bind(),E&&(E.bind(),E.setVertexAttribPointers(V,r,x)),j.currentNumAttributes=O},Mc.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},Jm.prototype.draw=function(r,l,f,g,x,T,E,L,O,j,V,H,K,Q,ee,re){var ue,ae=r.gl;if(!this.failedToCreate){for(var ye in r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(g),r.setColorMode(x),r.setCullFace(T),this.fixedUniforms)this.fixedUniforms[ye].set(E[ye]);Q&&Q.setUniforms(r,this.binderUniforms,H,{zoom:K});for(var he=((ue={})[ae.LINES]=2,ue[ae.TRIANGLES]=3,ue[ae.LINE_STRIP]=1,ue[l]),me=0,Ce=V.get();me<Ce.length;me+=1){var ke=Ce[me],De=ke.vaos||(ke.vaos={});(De[L]||(De[L]=new Mc)).bind(r,this,O,Q?Q.getPaintVertexBuffers():[],j,ke.vertexOffset,ee,re),ae.drawElements(l,ke.primitiveLength*he,ae.UNSIGNED_SHORT,ke.primitiveOffset*he*2)}}};var eg=function(r,l,f){return f===void 0&&(f=1),{u_matrix:r,u_color:l,u_overlay:0,u_overlay_scale:f}};function Or(r,l){return 1/Gi(r,1,l.tileZoom)}function bd(r,l,f){return r.translatePosMatrix(l.tileID.posMatrix,l,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function No(r,l,f,g,x){return{u_matrix:r,u_tl_parent:l,u_scale_parent:f,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:0<(E=x.paint.get("raster-saturation"))?1-1/(1.001-E):-E,u_contrast_factor:0<(T=x.paint.get("raster-contrast"))?1/(1-T):1+T,u_spin_weights:function(L){L*=Math.PI/180;var O=Math.sin(L),j=Math.cos(L);return[(2*j+1)/3,(-Math.sqrt(3)*O-j+1)/3,(Math.sqrt(3)*O-j+1)/3]}(x.paint.get("raster-hue-rotate"))};var T,E}function cu(r,l,f,g,x,T,E,L,O,j){var V=x.transform;return{u_is_size_zoom_constant:+(r==="constant"||r==="source"),u_is_size_feature_constant:+(r==="constant"||r==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:V.cameraToCenterDistance,u_pitch:V.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:V.width/V.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:E,u_coord_matrix:L,u_is_text:+O,u_pitch_with_map:+g,u_texsize:j,u_texture:0}}function Ac(r,l,f,g,x,T,E,L,O,j,V){var H=x.transform;return u.extend(cu(r,l,f,g,x,T,E,L,O,j),{u_gamma_scale:g?Math.cos(H._pitch)*H.cameraToCenterDistance:1,u_device_pixel_ratio:u.browser.devicePixelRatio,u_is_halo:+V})}var sa,tg={fillExtrusion:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_lightpos:new u.Uniform3f(r,l.u_lightpos),u_lightintensity:new u.Uniform1f(r,l.u_lightintensity),u_lightcolor:new u.Uniform3f(r,l.u_lightcolor),u_vertical_gradient:new u.Uniform1f(r,l.u_vertical_gradient),u_opacity:new u.Uniform1f(r,l.u_opacity)}},fillExtrusionPattern:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_lightpos:new u.Uniform3f(r,l.u_lightpos),u_lightintensity:new u.Uniform1f(r,l.u_lightintensity),u_lightcolor:new u.Uniform3f(r,l.u_lightcolor),u_vertical_gradient:new u.Uniform1f(r,l.u_vertical_gradient),u_height_factor:new u.Uniform1f(r,l.u_height_factor),u_image:new u.Uniform1i(r,l.u_image),u_texsize:new u.Uniform2f(r,l.u_texsize),u_pixel_coord_upper:new u.Uniform2f(r,l.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(r,l.u_pixel_coord_lower),u_scale:new u.Uniform3f(r,l.u_scale),u_fade:new u.Uniform1f(r,l.u_fade),u_opacity:new u.Uniform1f(r,l.u_opacity)}},fill:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix)}},fillPattern:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_image:new u.Uniform1i(r,l.u_image),u_texsize:new u.Uniform2f(r,l.u_texsize),u_pixel_coord_upper:new u.Uniform2f(r,l.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(r,l.u_pixel_coord_lower),u_scale:new u.Uniform3f(r,l.u_scale),u_fade:new u.Uniform1f(r,l.u_fade)}},fillOutline:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_world:new u.Uniform2f(r,l.u_world)}},fillOutlinePattern:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_world:new u.Uniform2f(r,l.u_world),u_image:new u.Uniform1i(r,l.u_image),u_texsize:new u.Uniform2f(r,l.u_texsize),u_pixel_coord_upper:new u.Uniform2f(r,l.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(r,l.u_pixel_coord_lower),u_scale:new u.Uniform3f(r,l.u_scale),u_fade:new u.Uniform1f(r,l.u_fade)}},circle:function(r,l){return{u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_scale_with_map:new u.Uniform1i(r,l.u_scale_with_map),u_pitch_with_map:new u.Uniform1i(r,l.u_pitch_with_map),u_extrude_scale:new u.Uniform2f(r,l.u_extrude_scale),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_matrix:new u.UniformMatrix4f(r,l.u_matrix)}},collisionBox:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_pixels_to_tile_units:new u.Uniform1f(r,l.u_pixels_to_tile_units),u_extrude_scale:new u.Uniform2f(r,l.u_extrude_scale),u_overscale_factor:new u.Uniform1f(r,l.u_overscale_factor)}},collisionCircle:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_inv_matrix:new u.UniformMatrix4f(r,l.u_inv_matrix),u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_viewport_size:new u.Uniform2f(r,l.u_viewport_size)}},debug:function(r,l){return{u_color:new u.UniformColor(r,l.u_color),u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_overlay:new u.Uniform1i(r,l.u_overlay),u_overlay_scale:new u.Uniform1f(r,l.u_overlay_scale)}},clippingMask:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix)}},heatmap:function(r,l){return{u_extrude_scale:new u.Uniform1f(r,l.u_extrude_scale),u_intensity:new u.Uniform1f(r,l.u_intensity),u_matrix:new u.UniformMatrix4f(r,l.u_matrix)}},heatmapTexture:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_world:new u.Uniform2f(r,l.u_world),u_image:new u.Uniform1i(r,l.u_image),u_color_ramp:new u.Uniform1i(r,l.u_color_ramp),u_opacity:new u.Uniform1f(r,l.u_opacity)}},hillshade:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_image:new u.Uniform1i(r,l.u_image),u_latrange:new u.Uniform2f(r,l.u_latrange),u_light:new u.Uniform2f(r,l.u_light),u_shadow:new u.UniformColor(r,l.u_shadow),u_highlight:new u.UniformColor(r,l.u_highlight),u_accent:new u.UniformColor(r,l.u_accent)}},hillshadePrepare:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_image:new u.Uniform1i(r,l.u_image),u_dimension:new u.Uniform2f(r,l.u_dimension),u_zoom:new u.Uniform1f(r,l.u_zoom),u_maxzoom:new u.Uniform1f(r,l.u_maxzoom),u_unpack:new u.Uniform4f(r,l.u_unpack)}},line:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_ratio:new u.Uniform1f(r,l.u_ratio),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(r,l.u_units_to_pixels)}},lineGradient:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_ratio:new u.Uniform1f(r,l.u_ratio),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(r,l.u_units_to_pixels),u_image:new u.Uniform1i(r,l.u_image)}},linePattern:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_texsize:new u.Uniform2f(r,l.u_texsize),u_ratio:new u.Uniform1f(r,l.u_ratio),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_image:new u.Uniform1i(r,l.u_image),u_units_to_pixels:new u.Uniform2f(r,l.u_units_to_pixels),u_scale:new u.Uniform3f(r,l.u_scale),u_fade:new u.Uniform1f(r,l.u_fade)}},lineSDF:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_ratio:new u.Uniform1f(r,l.u_ratio),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(r,l.u_units_to_pixels),u_patternscale_a:new u.Uniform2f(r,l.u_patternscale_a),u_patternscale_b:new u.Uniform2f(r,l.u_patternscale_b),u_sdfgamma:new u.Uniform1f(r,l.u_sdfgamma),u_image:new u.Uniform1i(r,l.u_image),u_tex_y_a:new u.Uniform1f(r,l.u_tex_y_a),u_tex_y_b:new u.Uniform1f(r,l.u_tex_y_b),u_mix:new u.Uniform1f(r,l.u_mix)}},raster:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_tl_parent:new u.Uniform2f(r,l.u_tl_parent),u_scale_parent:new u.Uniform1f(r,l.u_scale_parent),u_buffer_scale:new u.Uniform1f(r,l.u_buffer_scale),u_fade_t:new u.Uniform1f(r,l.u_fade_t),u_opacity:new u.Uniform1f(r,l.u_opacity),u_image0:new u.Uniform1i(r,l.u_image0),u_image1:new u.Uniform1i(r,l.u_image1),u_brightness_low:new u.Uniform1f(r,l.u_brightness_low),u_brightness_high:new u.Uniform1f(r,l.u_brightness_high),u_saturation_factor:new u.Uniform1f(r,l.u_saturation_factor),u_contrast_factor:new u.Uniform1f(r,l.u_contrast_factor),u_spin_weights:new u.Uniform3f(r,l.u_spin_weights)}},symbolIcon:function(r,l){return{u_is_size_zoom_constant:new u.Uniform1i(r,l.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(r,l.u_is_size_feature_constant),u_size_t:new u.Uniform1f(r,l.u_size_t),u_size:new u.Uniform1f(r,l.u_size),u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_pitch:new u.Uniform1f(r,l.u_pitch),u_rotate_symbol:new u.Uniform1i(r,l.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(r,l.u_aspect_ratio),u_fade_change:new u.Uniform1f(r,l.u_fade_change),u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(r,l.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(r,l.u_coord_matrix),u_is_text:new u.Uniform1i(r,l.u_is_text),u_pitch_with_map:new u.Uniform1i(r,l.u_pitch_with_map),u_texsize:new u.Uniform2f(r,l.u_texsize),u_texture:new u.Uniform1i(r,l.u_texture)}},symbolSDF:function(r,l){return{u_is_size_zoom_constant:new u.Uniform1i(r,l.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(r,l.u_is_size_feature_constant),u_size_t:new u.Uniform1f(r,l.u_size_t),u_size:new u.Uniform1f(r,l.u_size),u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_pitch:new u.Uniform1f(r,l.u_pitch),u_rotate_symbol:new u.Uniform1i(r,l.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(r,l.u_aspect_ratio),u_fade_change:new u.Uniform1f(r,l.u_fade_change),u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(r,l.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(r,l.u_coord_matrix),u_is_text:new u.Uniform1i(r,l.u_is_text),u_pitch_with_map:new u.Uniform1i(r,l.u_pitch_with_map),u_texsize:new u.Uniform2f(r,l.u_texsize),u_texture:new u.Uniform1i(r,l.u_texture),u_gamma_scale:new u.Uniform1f(r,l.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(r,l.u_is_halo)}},symbolTextAndIcon:function(r,l){return{u_is_size_zoom_constant:new u.Uniform1i(r,l.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(r,l.u_is_size_feature_constant),u_size_t:new u.Uniform1f(r,l.u_size_t),u_size:new u.Uniform1f(r,l.u_size),u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_pitch:new u.Uniform1f(r,l.u_pitch),u_rotate_symbol:new u.Uniform1i(r,l.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(r,l.u_aspect_ratio),u_fade_change:new u.Uniform1f(r,l.u_fade_change),u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(r,l.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(r,l.u_coord_matrix),u_is_text:new u.Uniform1i(r,l.u_is_text),u_pitch_with_map:new u.Uniform1i(r,l.u_pitch_with_map),u_texsize:new u.Uniform2f(r,l.u_texsize),u_texsize_icon:new u.Uniform2f(r,l.u_texsize_icon),u_texture:new u.Uniform1i(r,l.u_texture),u_texture_icon:new u.Uniform1i(r,l.u_texture_icon),u_gamma_scale:new u.Uniform1f(r,l.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(r,l.u_is_halo)}},background:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_opacity:new u.Uniform1f(r,l.u_opacity),u_color:new u.UniformColor(r,l.u_color)}},backgroundPattern:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_opacity:new u.Uniform1f(r,l.u_opacity),u_image:new u.Uniform1i(r,l.u_image),u_pattern_tl_a:new u.Uniform2f(r,l.u_pattern_tl_a),u_pattern_br_a:new u.Uniform2f(r,l.u_pattern_br_a),u_pattern_tl_b:new u.Uniform2f(r,l.u_pattern_tl_b),u_pattern_br_b:new u.Uniform2f(r,l.u_pattern_br_b),u_texsize:new u.Uniform2f(r,l.u_texsize),u_mix:new u.Uniform1f(r,l.u_mix),u_pattern_size_a:new u.Uniform2f(r,l.u_pattern_size_a),u_pattern_size_b:new u.Uniform2f(r,l.u_pattern_size_b),u_scale_a:new u.Uniform1f(r,l.u_scale_a),u_scale_b:new u.Uniform1f(r,l.u_scale_b),u_pixel_coord_upper:new u.Uniform2f(r,l.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(r,l.u_pixel_coord_lower),u_tile_units_to_pixels:new u.Uniform1f(r,l.u_tile_units_to_pixels)}}};function ah(r,l,f,g,x,T,E){for(var L=r.context,O=L.gl,j=r.useProgram("collisionBox"),V=[],H=0,K=0,Q=0;Q<g.length;Q++){var ee=g[Q],re=l.getTile(ee),ue=re.getBucket(f);if(ue){var ae=ee.posMatrix;x[0]===0&&x[1]===0||(ae=r.translatePosMatrix(ee.posMatrix,re,x,T));var ye=E?ue.textCollisionBox:ue.iconCollisionBox,he=ue.collisionCircleArray;if(0<he.length){var me=u.create(),Ce=ae;u.mul(me,ue.placementInvProjMatrix,r.transform.glCoordMatrix),u.mul(me,me,ue.placementViewportMatrix),V.push({circleArray:he,circleOffset:K,transform:Ce,invTransform:me}),K=H+=he.length/4}ye&&j.draw(L,O.LINES,vr.disabled,Ln.disabled,r.colorModeForRenderPass(),xn.disabled,(ke=ae,qe=Gi(Ve=re,1,(De=r.transform).zoom),Ke=Math.pow(2,De.zoom-Ve.tileID.overscaledZ),lt=Ve.tileID.overscaleFactor(),{u_matrix:ke,u_camera_to_center_distance:De.cameraToCenterDistance,u_pixels_to_tile_units:qe,u_extrude_scale:[De.pixelsToGLUnits[0]/(qe*Ke),De.pixelsToGLUnits[1]/(qe*Ke)],u_overscale_factor:lt}),f.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,null,r.transform.zoom,null,null,ye.collisionVertexBuffer)}}var ke,De,Ve,qe,Ke,lt,ht;if(E&&V.length){var dt=r.useProgram("collisionCircle"),Tt=new u.StructArrayLayout2f1f2i16;Tt.resize(4*H),Tt._trim();for(var mt=0,Mt=0,Ut=V;Mt<Ut.length;Mt+=1)for(var Rt=Ut[Mt],_t=0;_t<Rt.circleArray.length/4;_t++){var zt=4*_t,er=Rt.circleArray[0+zt],Ot=Rt.circleArray[1+zt],Br=Rt.circleArray[2+zt],ur=Rt.circleArray[3+zt];Tt.emplace(mt++,er,Ot,Br,ur,0),Tt.emplace(mt++,er,Ot,Br,ur,1),Tt.emplace(mt++,er,Ot,Br,ur,2),Tt.emplace(mt++,er,Ot,Br,ur,3)}(!sa||sa.length<2*H)&&(sa=function(){var Pi=2*H,Pr=new u.StructArrayLayout3ui6;Pr.resize(Pi),Pr._trim();for(var En=0;En<Pi;En++){var In=6*En;Pr.uint16[0+In]=4*En+0,Pr.uint16[1+In]=4*En+1,Pr.uint16[2+In]=4*En+2,Pr.uint16[3+In]=4*En+2,Pr.uint16[4+In]=4*En+3,Pr.uint16[5+In]=4*En+0}return Pr}());for(var Fn=L.createIndexBuffer(sa,!0),ni=L.createVertexBuffer(Tt,u.collisionCircleLayout.members,!0),Li=0,ki=V;Li<ki.length;Li+=1){var Tr=ki[Li],Xi={u_matrix:Tr.transform,u_inv_matrix:Tr.invTransform,u_camera_to_center_distance:(ht=r.transform).cameraToCenterDistance,u_viewport_size:[ht.width,ht.height]};dt.draw(L,O.TRIANGLES,vr.disabled,Ln.disabled,r.colorModeForRenderPass(),xn.disabled,Xi,f.id,ni,Fn,u.SegmentVector.simpleSegment(0,2*Tr.circleOffset,Tr.circleArray.length,Tr.circleArray.length/2),null,r.transform.zoom,null,null,null)}ni.destroy(),Fn.destroy()}}var sh=u.identity(new Float32Array(16));function Oo(r,l,f,g,x,T,E,L,O,j,V){var H,K,Q,ee,re,ue,ae,ye,he,me,Ce=r.text.placedSymbolArray,ke=r.text.dynamicLayoutVertexArray,De=r.icon.dynamicLayoutVertexArray,Ve={};ke.clear();for(var qe=0;qe<Ce.length;qe++){var Ke=Ce.get(qe),lt=Ke.hidden||!Ke.crossTileID||r.allowVerticalPlacement&&!Ke.placedOrientation?null:g[Ke.crossTileID];if(lt){var ht=new u.Point(Ke.anchorX,Ke.anchorY),dt=Ti(ht,f?L:E),Tt=fl(T.cameraToCenterDistance,dt.signedDistanceFromCamera),mt=x.evaluateSizeForFeature(r.textSizeData,j,Ke)*Tt/u.ONE_EM;f&&(mt*=r.tilePixelRatio/O);for(var Mt=(H=lt.anchor,K=lt.width,Q=lt.height,ee=lt.textOffset,re=lt.textBoxScale,ue=mt,ye=-((ae=u.getAnchorAlignment(H)).horizontalAlign-.5)*K,he=-(ae.verticalAlign-.5)*Q,me=u.evaluateVariableOffset(H,ee),new u.Point((ye/re+me[0])*ue,(he/re+me[1])*ue)),Ut=f?Ti(ht.add(Mt),E).point:dt.point.add(l?Mt.rotate(-T.angle):Mt),Rt=r.allowVerticalPlacement&&Ke.placedOrientation===u.WritingMode.vertical?Math.PI/2:0,_t=0;_t<Ke.numGlyphs;_t++)u.addDynamicAttributes(ke,Ut,Rt);V&&0<=Ke.associatedIconIndex&&(Ve[Ke.associatedIconIndex]={shiftedAnchor:Ut,angle:Rt})}else ou(Ke.numGlyphs,ke)}if(V){De.clear();for(var zt=r.icon.placedSymbolArray,er=0;er<zt.length;er++){var Ot=zt.get(er);if(Ot.hidden)ou(Ot.numGlyphs,De);else{var Br=Ve[er];if(Br)for(var ur=0;ur<Ot.numGlyphs;ur++)u.addDynamicAttributes(De,Br.shiftedAnchor,Br.angle);else ou(Ot.numGlyphs,De)}}r.icon.dynamicLayoutVertexBuffer.updateData(De)}r.text.dynamicLayoutVertexBuffer.updateData(ke)}function Lc(r,l,f,g,x,T,E,L,O,j,V,H){for(var K=r.context,Q=K.gl,ee=r.transform,re=L==="map",ue=O==="map",ae=re&&f.layout.get("symbol-placement")!=="point",ye=re&&!ue&&!ae,he=f.layout.get("symbol-sort-key").constantOr(1)!==void 0,me=r.depthModeForSublayer(0,vr.ReadOnly),Ce=f.layout.get("text-variable-anchor"),ke=[],De=0,Ve=g;De<Ve.length;De+=1){var qe=Ve[De],Ke=l.getTile(qe),lt=Ke.getBucket(f);if(lt){var ht=x?lt.text:lt.icon;if(ht&&ht.segments.get().length){var dt=ht.programConfigurations.get(f.id),Tt=x||lt.sdfIcons,mt=x?lt.textSizeData:lt.iconSizeData,Mt=ue||ee.pitch!==0,Ut=r.useProgram((Ri=Tt,kl=x,lt.iconsInText&&kl?"symbolTextAndIcon":Ri?"symbolSDF":"symbolIcon"),dt),Rt=u.evaluateSizeForZoom(mt,ee.zoom),_t=void 0,zt=[0,0],er=void 0,Ot=void 0,Br=null,ur=void 0;if(x)er=Ke.glyphAtlasTexture,Ot=Q.LINEAR,_t=Ke.glyphAtlasTexture.size,lt.iconsInText&&(zt=Ke.imageAtlasTexture.size,Br=Ke.imageAtlasTexture,ur=Mt||r.options.rotating||r.options.zooming||mt.kind==="composite"||mt.kind==="camera"?Q.LINEAR:Q.NEAREST);else{var Fn=f.layout.get("icon-size").constantOr(0)!==1||lt.iconsNeedLinear;er=Ke.imageAtlasTexture,Ot=Tt||r.options.rotating||r.options.zooming||Fn||Mt?Q.LINEAR:Q.NEAREST,_t=Ke.imageAtlasTexture.size}var ni=Gi(Ke,1,r.transform.zoom),Li=qm(qe.posMatrix,ue,re,r.transform,ni),ki=t0(qe.posMatrix,ue,re,r.transform,ni),Tr=Ce&&lt.hasTextData(),Xi=f.layout.get("icon-text-fit")!=="none"&&Tr&&lt.hasIconData();ae&&r0(lt,qe.posMatrix,r,x,Li,ki,ue,j);var Pi=r.translatePosMatrix(qe.posMatrix,Ke,T,E),Pr=ae||x&&Ce||Xi?sh:Li,En=r.translatePosMatrix(ki,Ke,T,E,!0),In=Tt&&f.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Di={program:Ut,buffers:ht,uniformValues:Tt?lt.iconsInText?(js=mt.kind,xh=Rt,Il=ye,jc=ue,Iu=r,ku=Pi,us=Pr,cs=En,Er=_t,Fr=zt,u.extend(Ac(js,xh,Il,jc,Iu,ku,us,cs,!0,Er,!0),{u_texsize_icon:Fr,u_texture_icon:1})):Ac(mt.kind,Rt,ye,ue,r,Pi,Pr,En,x,_t,!0):cu(mt.kind,Rt,ye,ue,r,Pi,Pr,En,x,_t),atlasTexture:er,atlasTextureIcon:Br,atlasInterpolation:Ot,atlasInterpolationIcon:ur,isSDF:Tt,hasHalo:In};if(he)for(var Ui=0,Eu=ht.segments.get();Ui<Eu.length;Ui+=1){var _h=Eu[Ui];ke.push({segments:new u.SegmentVector([_h]),sortKey:_h.sortKey,state:Di})}else ke.push({segments:ht.segments,sortKey:0,state:Di})}}}var js,xh,Il,jc,Iu,ku,us,cs,Er,Fr,Ri,kl;he&&ke.sort(function(Uc,Au){return Uc.sortKey-Au.sortKey});for(var Ml=0,Mu=ke;Ml<Mu.length;Ml+=1){var wh=Mu[Ml],hi=wh.state;if(K.activeTexture.set(Q.TEXTURE0),hi.atlasTexture.bind(hi.atlasInterpolation,Q.CLAMP_TO_EDGE),hi.atlasTextureIcon&&(K.activeTexture.set(Q.TEXTURE1),hi.atlasTextureIcon&&hi.atlasTextureIcon.bind(hi.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),hi.isSDF){var bh=hi.uniformValues;hi.hasHalo&&(bh.u_is_halo=1,bt(hi.buffers,wh.segments,f,r,hi.program,me,V,H,bh)),bh.u_is_halo=0}bt(hi.buffers,wh.segments,f,r,hi.program,me,V,H,hi.uniformValues)}}function bt(r,l,f,g,x,T,E,L,O){var j=g.context;x.draw(j,j.gl.TRIANGLES,T,E,L,xn.disabled,O,f.id,r.layoutVertexBuffer,r.indexBuffer,l,f.paint,g.transform.zoom,r.programConfigurations.get(f.id),r.dynamicLayoutVertexBuffer,r.opacityVertexBuffer)}function Lt(r,l,f,g,x,T,E){var L,O,j,V,H,K,Q,ee,re,ue,ae=r.context.gl,ye=f.paint.get("fill-pattern"),he=ye&&ye.constantOr(1),me=f.getCrossfadeParameters();L=E?(O=he&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ae.LINES):(O=he?"fillPattern":"fill",ae.TRIANGLES);for(var Ce=0,ke=g;Ce<ke.length;Ce+=1){var De=ke[Ce],Ve=l.getTile(De);if(!he||Ve.patternsLoaded()){var qe=Ve.getBucket(f);if(qe){var Ke=qe.programConfigurations.get(f.id),lt=r.useProgram(O,Ke);he&&(r.context.activeTexture.set(ae.TEXTURE0),Ve.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Ke.updatePaintBuffers(me));var ht=ye.constantOr(null);if(ht&&Ve.imageAtlas){var dt=Ve.imageAtlas,Tt=dt.patternPositions[ht.to.toString()],mt=dt.patternPositions[ht.from.toString()];Tt&&mt&&Ke.setConstantPatternPositions(Tt,mt)}var Mt=r.translatePosMatrix(De.posMatrix,Ve,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(E){V=qe.indexBuffer2,H=qe.segments2;var Ut=[ae.drawingBufferWidth,ae.drawingBufferHeight];j=O==="fillOutlinePattern"&&he?(K=Mt,Q=r,ee=me,re=Ve,ue=Ut,u.extend(lo(K,Q,ee,re),{u_world:ue})):{u_matrix:Mt,u_world:Ut}}else V=qe.indexBuffer,H=qe.segments,j=he?lo(Mt,r,me,Ve):xd(Mt);lt.draw(r.context,L,x,r.stencilModeForClipping(De),T,xn.disabled,j,f.id,qe.layoutVertexBuffer,V,H,f.paint,r.transform.zoom,Ke)}}}}function xl(r,l,f,g,x,T,E){for(var L=r.context,O=L.gl,j=f.paint.get("fill-extrusion-pattern"),V=j.constantOr(1),H=f.getCrossfadeParameters(),K=f.paint.get("fill-extrusion-opacity"),Q=0,ee=g;Q<ee.length;Q+=1){var re=ee[Q],ue=l.getTile(re),ae=ue.getBucket(f);if(ae){var ye=ae.programConfigurations.get(f.id),he=r.useProgram(V?"fillExtrusionPattern":"fillExtrusion",ye);V&&(r.context.activeTexture.set(O.TEXTURE0),ue.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),ye.updatePaintBuffers(H));var me=j.constantOr(null);if(me&&ue.imageAtlas){var Ce=ue.imageAtlas,ke=Ce.patternPositions[me.to.toString()],De=Ce.patternPositions[me.from.toString()];ke&&De&&ye.setConstantPatternPositions(ke,De)}var Ve=r.translatePosMatrix(re.posMatrix,ue,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),qe=f.paint.get("fill-extrusion-vertical-gradient"),Ke=V?(lt=Ve,ht=r,dt=qe,Tt=K,mt=re,Mt=H,Ut=ue,u.extend(Qm(lt,ht,dt,Tt),w0(Mt,ht,Ut),{u_height_factor:-Math.pow(2,mt.overscaledZ)/Ut.tileSize/8})):Qm(Ve,r,qe,K);he.draw(L,L.gl.TRIANGLES,x,T,E,xn.backCCW,Ke,f.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,f.paint,r.transform.zoom,ye)}}var lt,ht,dt,Tt,mt,Mt,Ut}function Cd(r,l,f,g,x,T){var E=r.context,L=E.gl,O=l.fbo;if(O){var j=r.useProgram("hillshade");E.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,O.colorAttachment.get());var V=function(H,K,Q){var ee=Q.paint.get("hillshade-shadow-color"),re=Q.paint.get("hillshade-highlight-color"),ue=Q.paint.get("hillshade-accent-color"),ae=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(ae-=H.transform.angle);var ye,he,me,Ce=!H.options.moving;return{u_matrix:H.transform.calculatePosMatrix(K.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:(ye=K.tileID,he=Math.pow(2,ye.canonical.z),me=ye.canonical.y,[new u.MercatorCoordinate(0,me/he).toLngLat().lat,new u.MercatorCoordinate(0,(me+1)/he).toLngLat().lat]),u_light:[Q.paint.get("hillshade-exaggeration"),ae],u_shadow:ee,u_highlight:re,u_accent:ue}}(r,l,f);j.draw(E,L.TRIANGLES,g,x,T,xn.disabled,V,f.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments)}}function Sd(r,l,f,g,x,T,E){var L,O,j,V,H,K=r.context,Q=K.gl,ee=l.dem;if(ee&&ee.data){var re=ee.dim,ue=ee.stride,ae=ee.getPixels();if(K.activeTexture.set(Q.TEXTURE1),K.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||r.getTileTexture(ue),l.demTexture){var ye=l.demTexture;ye.update(ae,{premultiply:!1}),ye.bind(Q.NEAREST,Q.CLAMP_TO_EDGE)}else l.demTexture=new u.Texture(K,ae,Q.RGBA,{premultiply:!1}),l.demTexture.bind(Q.NEAREST,Q.CLAMP_TO_EDGE);K.activeTexture.set(Q.TEXTURE0);var he=l.fbo;if(!he){var me=new u.Texture(K,{width:re,height:re,data:null},Q.RGBA);me.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),(he=l.fbo=K.createFramebuffer(re,re,!0)).colorAttachment.set(me.texture)}K.bindFramebuffer.set(he.framebuffer),K.viewport.set([0,0,re,re]),r.useProgram("hillshadePrepare").draw(K,Q.TRIANGLES,x,T,E,xn.disabled,(L=l.tileID,j=g,V=(O=ee).stride,H=u.create(),u.ortho(H,0,u.EXTENT,-u.EXTENT,0,0,1),u.translate(H,H,[0,-u.EXTENT,0]),{u_matrix:H,u_image:1,u_dimension:[V,V],u_zoom:L.overscaledZ,u_maxzoom:j,u_unpack:O.getUnpackVector()}),f.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function pu(r,l,f,g,x){var T=g.paint.get("raster-fade-duration");if(0<T){var E=u.browser.now(),L=(E-r.timeAdded)/T,O=l?(E-l.timeAdded)/T:-1,j=f.getSource(),V=x.coveringZoomLevel({tileSize:j.tileSize,roundZoom:j.roundZoom}),H=!l||Math.abs(l.tileID.overscaledZ-V)>Math.abs(r.tileID.overscaledZ-V),K=H&&r.refreshedUponExpiration?1:u.clamp(H?L:1-O,0,1);return r.refreshedUponExpiration&&1<=L&&(r.refreshedUponExpiration=!1),l?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}var lh=new u.Color(1,0,0,1),_o=new u.Color(0,1,0,1),Td=new u.Color(0,0,1,1),Rr=new u.Color(1,0,1,1),Ed=new u.Color(0,1,1,1);function Ma(r,l,f,g){wn(r,0,l+f/2,r.transform.width,f,g)}function b0(r,l,f,g){wn(r,l-f/2,0,f,r.transform.height,g)}function wn(r,l,f,g,x,T){var E=r.context,L=E.gl;L.enable(L.SCISSOR_TEST),L.scissor(l*u.browser.devicePixelRatio,f*u.browser.devicePixelRatio,g*u.browser.devicePixelRatio,x*u.browser.devicePixelRatio),E.clear({color:T}),L.disable(L.SCISSOR_TEST)}function Ei(r,l,f){var g=r.context,x=g.gl,T=f.posMatrix,E=r.useProgram("debug"),L=vr.disabled,O=Ln.disabled,j=r.colorModeForRenderPass();g.activeTexture.set(x.TEXTURE0),r.emptyTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE),E.draw(g,x.LINE_STRIP,L,O,j,xn.disabled,eg(T,u.Color.red),"$debug",r.debugBuffer,r.tileBorderIndexBuffer,r.debugSegments);var V=l.getTileByID(f.key).latestRawTileData,H=Math.floor((V&&V.byteLength||0)/1024),K=l.getTile(f).tileSize,Q=512/Math.min(K,512)*(f.overscaledZ/r.transform.zoom)*.5,ee=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(ee+=" => "+f.overscaledZ),function(re,ue){re.initDebugOverlayCanvas();var ae=re.debugOverlayCanvas,ye=re.context.gl,he=re.debugOverlayCanvas.getContext("2d");he.clearRect(0,0,ae.width,ae.height),he.shadowColor="white",he.shadowBlur=2,he.lineWidth=1.5,he.strokeStyle="white",he.textBaseline="top",he.font="bold 36px Open Sans, sans-serif",he.fillText(ue,5,5),he.strokeText(ue,5,5),re.debugOverlayTexture.update(ae),re.debugOverlayTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)}(r,ee+" "+H+"kb"),E.draw(g,x.TRIANGLES,L,O,ri.alphaBlended,xn.disabled,eg(T,u.Color.transparent,Q),"$debug",r.debugBuffer,r.quadTriangleIndexBuffer,r.debugSegments)}function Yr(r,l){this.context=new vo(r),this.transform=l,this._tileTextures={},this.setup(),this.numSublayers=ks.maxUnderzooming+ks.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qp,this.gpuTimers={}}var uh={symbol:function(r,l,f,g,x){if(r.renderPass==="translucent"){var T=Ln.disabled,E=r.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(L,O,j,V,H,K,Q){for(var ee=O.transform,re=H==="map",ue=K==="map",ae=0,ye=L;ae<ye.length;ae+=1){var he=ye[ae],me=V.getTile(he),Ce=me.getBucket(j);if(Ce&&Ce.text&&Ce.text.segments.get().length){var ke=u.evaluateSizeForZoom(Ce.textSizeData,ee.zoom),De=Gi(me,1,O.transform.zoom),Ve=qm(he.posMatrix,ue,re,O.transform,De),qe=j.layout.get("icon-text-fit")!=="none"&&Ce.hasIconData();if(ke){var Ke=Math.pow(2,ee.zoom-me.tileID.overscaledZ);Oo(Ce,re,ue,Q,u.symbolSize,ee,Ve,he.posMatrix,Ke,ke,qe)}}}}(g,r,f,l,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),x),f.paint.get("icon-opacity").constantOr(1)!==0&&Lc(r,l,f,g,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),T,E),f.paint.get("text-opacity").constantOr(1)!==0&&Lc(r,l,f,g,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),T,E),l.map.showCollisionBoxes&&(ah(r,l,f,g,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),ah(r,l,f,g,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))}},circle:function(r,l,f,g){if(r.renderPass==="translucent"){var x=f.paint.get("circle-opacity"),T=f.paint.get("circle-stroke-width"),E=f.paint.get("circle-stroke-opacity"),L=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(x.constantOr(1)!==0||T.constantOr(1)!==0&&E.constantOr(1)!==0){for(var O=r.context,j=O.gl,V=r.depthModeForSublayer(0,vr.ReadOnly),H=Ln.disabled,K=r.colorModeForRenderPass(),Q=[],ee=0;ee<g.length;ee++){var re=g[ee],ue=l.getTile(re),ae=ue.getBucket(f);if(ae){var ye=ae.programConfigurations.get(f.id),he={programConfiguration:ye,program:r.useProgram("circle",ye),layoutVertexBuffer:ae.layoutVertexBuffer,indexBuffer:ae.indexBuffer,uniformValues:_l(r,re,ue,f)};if(L)for(var me=0,Ce=ae.segments.get();me<Ce.length;me+=1){var ke=Ce[me];Q.push({segments:new u.SegmentVector([ke]),sortKey:ke.sortKey,state:he})}else Q.push({segments:ae.segments,sortKey:0,state:he})}}L&&Q.sort(function(lt,ht){return lt.sortKey-ht.sortKey});for(var De=0,Ve=Q;De<Ve.length;De+=1){var qe=Ve[De],Ke=qe.state;Ke.program.draw(O,j.TRIANGLES,V,H,K,xn.disabled,Ke.uniformValues,f.id,Ke.layoutVertexBuffer,Ke.indexBuffer,qe.segments,f.paint,r.transform.zoom,Ke.programConfiguration)}}}},heatmap:function(r,l,f,g){if(f.paint.get("heatmap-opacity")!==0)if(r.renderPass==="offscreen"){var x=r.context,T=x.gl,E=Ln.disabled,L=new ri([T.ONE,T.ONE],u.Color.transparent,[!0,!0,!0,!0]);(function(ae,ye,he){var me=ae.gl;ae.activeTexture.set(me.TEXTURE1),ae.viewport.set([0,0,ye.width/4,ye.height/4]);var Ce,ke,De,Ve=he.heatmapFbo;if(Ve)me.bindTexture(me.TEXTURE_2D,Ve.colorAttachment.get()),ae.bindFramebuffer.set(Ve.framebuffer);else{var qe=me.createTexture();me.bindTexture(me.TEXTURE_2D,qe),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_S,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_T,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MIN_FILTER,me.LINEAR),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MAG_FILTER,me.LINEAR),Ce=qe,ke=Ve=he.heatmapFbo=ae.createFramebuffer(ye.width/4,ye.height/4,!1),(De=ae.gl).texImage2D(De.TEXTURE_2D,0,De.RGBA,ye.width/4,ye.height/4,0,De.RGBA,ae.extRenderToTextureHalfFloat?ae.extTextureHalfFloat.HALF_FLOAT_OES:De.UNSIGNED_BYTE,null),ke.colorAttachment.set(Ce)}})(x,r,f),x.clear({color:u.Color.transparent});for(var O=0;O<g.length;O++){var j=g[O];if(!l.hasRenderableParent(j)){var V=l.getTile(j),H=V.getBucket(f);if(H){var K=H.programConfigurations.get(f.id);r.useProgram("heatmap",K).draw(x,T.TRIANGLES,vr.disabled,E,L,xn.disabled,(Q=j.posMatrix,ee=V,re=r.transform.zoom,ue=f.paint.get("heatmap-intensity"),{u_matrix:Q,u_extrude_scale:Gi(ee,1,re),u_intensity:ue}),f.id,H.layoutVertexBuffer,H.indexBuffer,H.segments,f.paint,r.transform.zoom,K)}}}x.viewport.set([0,0,r.width,r.height])}else r.renderPass==="translucent"&&(r.context.setColorMode(r.colorModeForRenderPass()),function(ae,ye){var he=ae.context,me=he.gl,Ce=ye.heatmapFbo;if(Ce){he.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,Ce.colorAttachment.get()),he.activeTexture.set(me.TEXTURE1);var ke=ye.colorRampTexture;(ke=ke||(ye.colorRampTexture=new u.Texture(he,ye.colorRamp,me.RGBA))).bind(me.LINEAR,me.CLAMP_TO_EDGE),ae.useProgram("heatmapTexture").draw(he,me.TRIANGLES,vr.disabled,Ln.disabled,ae.colorModeForRenderPass(),xn.disabled,function(De,Ve){var qe=u.create();u.ortho(qe,0,De.width,De.height,0,0,1);var Ke=De.context.gl;return{u_matrix:qe,u_world:[Ke.drawingBufferWidth,Ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ve.paint.get("heatmap-opacity")}}(ae,ye),ye.id,ae.viewportBuffer,ae.quadTriangleIndexBuffer,ae.viewportSegments,ye.paint,ae.transform.zoom)}}(r,f));var Q,ee,re,ue},line:function(r,l,f,g){if(r.renderPass==="translucent"){var x=f.paint.get("line-opacity"),T=f.paint.get("line-width");if(x.constantOr(1)!==0&&T.constantOr(1)!==0){var E=r.depthModeForSublayer(0,vr.ReadOnly),L=r.colorModeForRenderPass(),O=f.paint.get("line-dasharray"),j=f.paint.get("line-pattern"),V=j.constantOr(1),H=f.paint.get("line-gradient"),K=f.getCrossfadeParameters(),Q=V?"linePattern":O?"lineSDF":H?"lineGradient":"line",ee=r.context,re=ee.gl,ue=!0;if(H){ee.activeTexture.set(re.TEXTURE0);var ae=f.gradientTexture;if(!f.gradient)return;(ae=ae||(f.gradientTexture=new u.Texture(ee,f.gradient,re.RGBA))).bind(re.LINEAR,re.CLAMP_TO_EDGE)}for(var ye=0,he=g;ye<he.length;ye+=1){var me=he[ye],Ce=l.getTile(me);if(!V||Ce.patternsLoaded()){var ke=Ce.getBucket(f);if(ke){var De=ke.programConfigurations.get(f.id),Ve=r.context.program.get(),qe=r.useProgram(Q,De),Ke=ue||qe.program!==Ve,lt=j.constantOr(null);if(lt&&Ce.imageAtlas){var ht=Ce.imageAtlas,dt=ht.patternPositions[lt.to.toString()],Tt=ht.patternPositions[lt.from.toString()];dt&&Tt&&De.setConstantPatternPositions(dt,Tt)}var mt=V?(En=f,In=K,Ui=Or(Pr=Ce,Di=(Pi=r).transform),{u_matrix:bd(Pi,Pr,En),u_texsize:Pr.imageAtlasTexture.size,u_ratio:1/Gi(Pr,1,Di.zoom),u_device_pixel_ratio:u.browser.devicePixelRatio,u_image:0,u_scale:[Ui,In.fromScale,In.toScale],u_fade:In.t,u_units_to_pixels:[1/Di.pixelsToGLUnits[0],1/Di.pixelsToGLUnits[1]]}):O?(zt=Ce,er=f,Ot=O,Br=K,ur=void 0,ur=(_t=r).lineAtlas,Fn=Or(zt,_t.transform),ni=er.layout.get("line-cap")==="round",Li=ur.getDash(Ot.from,ni),ki=ur.getDash(Ot.to,ni),Tr=Li.width*Br.fromScale,Xi=ki.width*Br.toScale,u.extend(oh(_t,zt,er),{u_patternscale_a:[Fn/Tr,-Li.height/2],u_patternscale_b:[Fn/Xi,-ki.height/2],u_sdfgamma:ur.width/(256*Math.min(Tr,Xi)*u.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Li.y,u_tex_y_b:ki.y,u_mix:Br.t})):H?(Mt=r,Ut=Ce,Rt=f,u.extend(oh(Mt,Ut,Rt),{u_image:0})):oh(r,Ce,f);V?(ee.activeTexture.set(re.TEXTURE0),Ce.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),De.updatePaintBuffers(K)):O&&(Ke||r.lineAtlas.dirty)&&(ee.activeTexture.set(re.TEXTURE0),r.lineAtlas.bind(ee)),qe.draw(ee,re.TRIANGLES,E,r.stencilModeForClipping(me),L,xn.disabled,mt,f.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,f.paint,r.transform.zoom,De),ue=!1}}}}}var Mt,Ut,Rt,_t,zt,er,Ot,Br,ur,Fn,ni,Li,ki,Tr,Xi,Pi,Pr,En,In,Di,Ui},fill:function(r,l,f,g){var x=f.paint.get("fill-color"),T=f.paint.get("fill-opacity");if(T.constantOr(1)!==0){var E=r.colorModeForRenderPass(),L=f.paint.get("fill-pattern"),O=r.opaquePassEnabledForLayer()&&!L.constantOr(1)&&x.constantOr(u.Color.transparent).a===1&&T.constantOr(0)===1?"opaque":"translucent";if(r.renderPass===O){var j=r.depthModeForSublayer(1,r.renderPass==="opaque"?vr.ReadWrite:vr.ReadOnly);Lt(r,l,f,g,j,E,!1)}if(r.renderPass==="translucent"&&f.paint.get("fill-antialias")){var V=r.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,vr.ReadOnly);Lt(r,l,f,g,V,E,!0)}}},"fill-extrusion":function(r,l,f,g){var x=f.paint.get("fill-extrusion-opacity");if(x!==0&&r.renderPass==="translucent"){var T=new vr(r.context.gl.LEQUAL,vr.ReadWrite,r.depthRangeFor3D);if(x!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))xl(r,l,f,g,T,Ln.disabled,ri.disabled),xl(r,l,f,g,T,r.stencilModeFor3D(),r.colorModeForRenderPass());else{var E=r.colorModeForRenderPass();xl(r,l,f,g,T,Ln.disabled,E)}}},hillshade:function(r,l,f,g){if(r.renderPass==="offscreen"||r.renderPass==="translucent"){for(var x=r.context,T=l.getSource().maxzoom,E=r.depthModeForSublayer(0,vr.ReadOnly),L=r.colorModeForRenderPass(),O=r.renderPass==="translucent"?r.stencilConfigForOverlap(g):[{},g],j=O[0],V=0,H=O[1];V<H.length;V+=1){var K=H[V],Q=l.getTile(K);Q.needsHillshadePrepare&&r.renderPass==="offscreen"?Sd(r,Q,f,T,E,Ln.disabled,L):r.renderPass==="translucent"&&Cd(r,Q,f,E,j[K.overscaledZ],L)}x.viewport.set([0,0,r.width,r.height])}},raster:function(r,l,f,g){if(r.renderPass==="translucent"&&f.paint.get("raster-opacity")!==0&&g.length)for(var x=r.context,T=x.gl,E=l.getSource(),L=r.useProgram("raster"),O=r.colorModeForRenderPass(),j=E instanceof Xo?[{},g]:r.stencilConfigForOverlap(g),V=j[0],H=j[1],K=H[H.length-1].overscaledZ,Q=!r.options.moving,ee=0,re=H;ee<re.length;ee+=1){var ue=re[ee],ae=r.depthModeForSublayer(ue.overscaledZ-K,f.paint.get("raster-opacity")===1?vr.ReadWrite:vr.ReadOnly,T.LESS),ye=l.getTile(ue),he=r.transform.calculatePosMatrix(ue.toUnwrapped(),Q);ye.registerFadeDuration(f.paint.get("raster-fade-duration"));var me=l.findLoadedParent(ue,0),Ce=pu(ye,me,l,f,r.transform),ke=void 0,De=void 0,Ve=f.paint.get("raster-resampling")==="nearest"?T.NEAREST:T.LINEAR;x.activeTexture.set(T.TEXTURE0),ye.texture.bind(Ve,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST),x.activeTexture.set(T.TEXTURE1),me?(me.texture.bind(Ve,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST),ke=Math.pow(2,me.tileID.overscaledZ-ye.tileID.overscaledZ),De=[ye.tileID.canonical.x*ke%1,ye.tileID.canonical.y*ke%1]):ye.texture.bind(Ve,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST);var qe=No(he,De||[0,0],ke||1,Ce,f);E instanceof Xo?L.draw(x,T.TRIANGLES,ae,Ln.disabled,O,xn.disabled,qe,f.id,E.boundsBuffer,r.quadTriangleIndexBuffer,E.boundsSegments):L.draw(x,T.TRIANGLES,ae,V[ue.overscaledZ],O,xn.disabled,qe,f.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments)}},background:function(r,l,f){var g,x,T,E,L,O,j,V,H,K,Q,ee,re,ue,ae,ye,he,me,Ce,ke=f.paint.get("background-color"),De=f.paint.get("background-opacity");if(De!==0){var Ve=r.context,qe=Ve.gl,Ke=r.transform,lt=Ke.tileSize,ht=f.paint.get("background-pattern");if(!r.isPatternMissing(ht)){var dt=!ht&&ke.a===1&&De===1&&r.opaquePassEnabledForLayer()?"opaque":"translucent";if(r.renderPass===dt){var Tt=Ln.disabled,mt=r.depthModeForSublayer(0,dt=="opaque"?vr.ReadWrite:vr.ReadOnly),Mt=r.colorModeForRenderPass(),Ut=r.useProgram(ht?"backgroundPattern":"background"),Rt=Ke.coveringTiles({tileSize:lt});ht&&(Ve.activeTexture.set(qe.TEXTURE0),r.imageManager.bind(r.context));for(var _t=f.getCrossfadeParameters(),zt=0,er=Rt;zt<er.length;zt+=1){var Ot=er[zt],Br=r.transform.calculatePosMatrix(Ot.toUnwrapped()),ur=ht?(g=Br,x=De,T=r,E=ht,L={tileID:Ot,tileSize:lt},O=_t,Ce=me=he=ye=ae=ue=re=ee=Q=K=H=V=j=void 0,u.extend((j=E,V=O,K=L,Q=(H=T).imageManager.getPattern(j.from.toString()),ee=H.imageManager.getPattern(j.to.toString()),ue=(re=H.imageManager.getPixelSize()).width,ae=re.height,ye=Math.pow(2,K.tileID.overscaledZ),me=(he=K.tileSize*Math.pow(2,H.transform.tileZoom)/ye)*(K.tileID.canonical.x+K.tileID.wrap*ye),Ce=he*K.tileID.canonical.y,{u_image:0,u_pattern_tl_a:Q.tl,u_pattern_br_a:Q.br,u_pattern_tl_b:ee.tl,u_pattern_br_b:ee.br,u_texsize:[ue,ae],u_mix:V.t,u_pattern_size_a:Q.displaySize,u_pattern_size_b:ee.displaySize,u_scale_a:V.fromScale,u_scale_b:V.toScale,u_tile_units_to_pixels:1/Gi(K,1,H.transform.tileZoom),u_pixel_coord_upper:[me>>16,Ce>>16],u_pixel_coord_lower:[65535&me,65535&Ce]}),{u_matrix:g,u_opacity:x})):{u_matrix:Br,u_opacity:De,u_color:ke};Ut.draw(Ve,qe.TRIANGLES,mt,Tt,Mt,xn.disabled,ur,f.id,r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}}}},debug:function(r,l,f){for(var g=0;g<f.length;g++)Ei(r,l,f[g])},custom:function(r,l,f){var g=r.context,x=f.implementation;if(r.renderPass==="offscreen"){var T=x.prerender;T&&(r.setCustomLayerDefaults(),g.setColorMode(r.colorModeForRenderPass()),T.call(x,g.gl,r.transform.customLayerMatrix()),g.setDirty(),r.setBaseState())}else if(r.renderPass==="translucent"){r.setCustomLayerDefaults(),g.setColorMode(r.colorModeForRenderPass()),g.setStencilMode(Ln.disabled);var E=x.renderingMode==="3d"?new vr(r.context.gl.LEQUAL,vr.ReadWrite,r.depthRangeFor3D):r.depthModeForSublayer(0,vr.ReadOnly);g.setDepthMode(E),x.render(g.gl,r.transform.customLayerMatrix()),g.setDirty(),r.setBaseState(),g.bindFramebuffer.set(null)}}};function hu(r,l){this.points=r,this.planes=l}function Aa(r,l){this.min=r,this.max=l,this.center=u.scale$2([],u.add([],this.min,this.max),.5)}function es(r,l,f,g){if(r===void 0&&(r=0),l===void 0&&(l=0),f===void 0&&(f=0),g===void 0&&(g=0),isNaN(r)||r<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=f,this.right=g}function _r(r,l,f,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=x===void 0||x,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=f??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new es,this._posMatrixCache={},this._alignedPosMatrixCache={}}Yr.prototype.resize=function(r,l){if(this.width=r*u.browser.devicePixelRatio,this.height=l*u.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var f=0,g=this.style._order;f<g.length;f+=1)this.style._layers[g[f]].resize()},Yr.prototype.setup=function(){var r=this.context,l=new u.StructArrayLayout2i4;l.emplaceBack(0,0),l.emplaceBack(u.EXTENT,0),l.emplaceBack(0,u.EXTENT),l.emplaceBack(u.EXTENT,u.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(l,vl.members),this.tileExtentSegments=u.SegmentVector.simpleSegment(0,0,4,2);var f=new u.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(u.EXTENT,0),f.emplaceBack(0,u.EXTENT),f.emplaceBack(u.EXTENT,u.EXTENT),this.debugBuffer=r.createVertexBuffer(f,vl.members),this.debugSegments=u.SegmentVector.simpleSegment(0,0,4,5);var g=new u.StructArrayLayout4i8;g.emplaceBack(0,0,0,0),g.emplaceBack(u.EXTENT,0,u.EXTENT,0),g.emplaceBack(0,u.EXTENT,0,u.EXTENT),g.emplaceBack(u.EXTENT,u.EXTENT,u.EXTENT,u.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(g,bs.members),this.rasterBoundsSegments=u.SegmentVector.simpleSegment(0,0,4,2);var x=new u.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(x,vl.members),this.viewportSegments=u.SegmentVector.simpleSegment(0,0,4,2);var T=new u.StructArrayLayout1ui2;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);var E=new u.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(E),this.emptyTexture=new u.Texture(r,{width:1,height:1,data:new Uint8Array([0,0,0,0])},r.gl.RGBA);var L=this.context.gl;this.stencilClearMode=new Ln({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO)},Yr.prototype.clearStencil=function(){var r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var f=u.create();u.ortho(f,0,this.width,this.height,0,0,1),u.scale(f,f,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,vr.disabled,this.stencilClearMode,ri.disabled,xn.disabled,wd(f),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Yr.prototype._renderTileClippingMasks=function(r,l){if(this.currentStencilSource!==r.source&&r.isTileClipped()&&l&&l.length){this.currentStencilSource=r.source;var f=this.context,g=f.gl;256<this.nextStencilID+l.length&&this.clearStencil(),f.setColorMode(ri.disabled),f.setDepthMode(vr.disabled);var x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var T=0,E=l;T<E.length;T+=1){var L=E[T],O=this._tileClippingMaskIDs[L.key]=this.nextStencilID++;x.draw(f,g.TRIANGLES,vr.disabled,new Ln({func:g.ALWAYS,mask:0},O,255,g.KEEP,g.KEEP,g.REPLACE),ri.disabled,xn.disabled,wd(L.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Yr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,256<this.nextStencilID+1&&this.clearStencil();var r=this.nextStencilID++,l=this.context.gl;return new Ln({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)},Yr.prototype.stencilModeForClipping=function(r){var l=this.context.gl;return new Ln({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)},Yr.prototype.stencilConfigForOverlap=function(r){var l,f=this.context.gl,g=r.sort(function(O,j){return j.overscaledZ-O.overscaledZ}),x=g[g.length-1].overscaledZ,T=g[0].overscaledZ-x+1;if(1<T){this.currentStencilSource=void 0,256<this.nextStencilID+T&&this.clearStencil();for(var E={},L=0;L<T;L++)E[L+x]=new Ln({func:f.GEQUAL,mask:255},L+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=T,[E,g]}return[((l={})[x]=Ln.disabled,l),g]},Yr.prototype.colorModeForRenderPass=function(){var r=this.context.gl;return this._showOverdrawInspector?new ri([r.CONSTANT_COLOR,r.ONE],new u.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ri.unblended:ri.alphaBlended},Yr.prototype.depthModeForSublayer=function(r,l,f){if(!this.opaquePassEnabledForLayer())return vr.disabled;var g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new vr(f||this.context.gl.LEQUAL,l,[g,g])},Yr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Yr.prototype.render=function(r,l){var f=this;this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(u.browser.now()),this.imageManager.beginFrame();var g=this.style._order,x=this.style.sourceCaches;for(var T in x){var E=x[T];E.used&&E.prepare(this.context)}var L,O,j={},V={},H={};for(var K in x){var Q=x[K];j[K]=Q.getVisibleCoordinates(),V[K]=j[K].slice().reverse(),H[K]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ee=0;ee<g.length;ee++)if(this.style._layers[g[ee]].is3D()){this.opaquePassCutoff=ee;break}this.renderPass="offscreen";for(var re=0,ue=g;re<ue.length;re+=1){var ae=this.style._layers[ue[re]];if(ae.hasOffscreenPass()&&!ae.isHidden(this.transform.zoom)){var ye=V[ae.source];ae.type!=="custom"&&!ye.length||this.renderLayer(this,x[ae.source],ae,ye)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.Color.black:u.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=g.length-1;0<=this.currentLayer;this.currentLayer--){var he=this.style._layers[g[this.currentLayer]],me=x[he.source],Ce=j[he.source];this._renderTileClippingMasks(he,Ce),this.renderLayer(this,me,he,Ce)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){var ke=this.style._layers[g[this.currentLayer]],De=x[ke.source],Ve=(ke.type==="symbol"?H:V)[ke.source];this._renderTileClippingMasks(ke,j[ke.source]),this.renderLayer(this,De,ke,Ve)}this.options.showTileBoundaries&&(u.values(this.style._layers).forEach(function(qe){qe.source&&!qe.isHidden(f.transform.zoom)&&(qe.source!==(O&&O.id)&&(O=f.style.sourceCaches[qe.source]),(!L||L.getSource().maxzoom<O.getSource().maxzoom)&&(L=O))}),L&&uh.debug(this,L,L.getVisibleCoordinates())),this.options.showPadding&&function(qe){var Ke=qe.transform.padding;Ma(qe,qe.transform.height-(Ke.top||0),3,lh),Ma(qe,Ke.bottom||0,3,_o),b0(qe,Ke.left||0,3,Td),b0(qe,qe.transform.width-(Ke.right||0),3,Rr);var lt,ht,dt,Tt,mt=qe.transform.centerPoint;wn(lt=qe,(ht=mt.x)-1,(dt=qe.transform.height-mt.y)-10,2,20,Tt=Ed),wn(lt,ht-10,dt-1,20,2,Tt)}(this),this.context.setDefault()},Yr.prototype.renderLayer=function(r,l,f,g){f.isHidden(this.transform.zoom)||f.type!=="background"&&f.type!=="custom"&&!g.length||(this.id=f.id,this.gpuTimingStart(f),uh[f.type](r,l,f,g,this.style.placement.variableOffsets),this.gpuTimingEnd())},Yr.prototype.gpuTimingStart=function(r){if(this.options.gpuTiming){var l=this.context.extTimerQuery,f=this.gpuTimers[r.id];(f=f||(this.gpuTimers[r.id]={calls:0,cpuTime:0,query:l.createQueryEXT()})).calls++,l.beginQueryEXT(l.TIME_ELAPSED_EXT,f.query)}},Yr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}},Yr.prototype.collectGpuTimers=function(){var r=this.gpuTimers;return this.gpuTimers={},r},Yr.prototype.queryGpuTimers=function(r){var l={};for(var f in r){var g=r[f],x=this.context.extTimerQuery,T=x.getQueryObjectEXT(g.query,x.QUERY_RESULT_EXT)/1e6;x.deleteQueryEXT(g.query),l[f]=T}return l},Yr.prototype.translatePosMatrix=function(r,l,f,g,x){if(!f[0]&&!f[1])return r;var T=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(T){var E=Math.sin(T),L=Math.cos(T);f=[f[0]*L-f[1]*E,f[0]*E+f[1]*L]}var O=[x?f[0]:Gi(l,f[0],this.transform.zoom),x?f[1]:Gi(l,f[1],this.transform.zoom),0],j=new Float32Array(16);return u.translate(j,r,O),j},Yr.prototype.saveTileTexture=function(r){var l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]},Yr.prototype.getTileTexture=function(r){var l=this._tileTextures[r];return l&&0<l.length?l.pop():null},Yr.prototype.isPatternMissing=function(r){if(!r)return!1;if(!r.from||!r.to)return!0;var l=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!l||!f},Yr.prototype.useProgram=function(r,l){this.cache=this.cache||{};var f=""+r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[f]||(this.cache[f]=new Jm(this.context,0,$m[r],l,tg[r],this._showOverdrawInspector)),this.cache[f]},Yr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Yr.prototype.setBaseState=function(){var r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)},Yr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=u.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new u.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Yr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()},hu.fromInvProjectionMatrix=function(r,l,f){var g=Math.pow(2,f),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return u.transformMat4([],E,r)}).map(function(E){return u.scale$1([],E,1/E[3]/l*g)}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var L=u.sub([],x[E[0]],x[E[1]]),O=u.sub([],x[E[2]],x[E[1]]),j=u.normalize([],u.cross([],L,O)),V=-u.dot(j,x[E[1]]);return j.concat(V)});return new hu(x,T)},Aa.prototype.quadrant=function(r){for(var l=[r%2==0,r<2],f=u.clone$2(this.min),g=u.clone$2(this.max),x=0;x<l.length;x++)f[x]=l[x]?this.min[x]:this.center[x],g[x]=l[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Aa(f,g)},Aa.prototype.distanceX=function(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]},Aa.prototype.distanceY=function(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]},Aa.prototype.intersects=function(r){for(var l=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],f=!0,g=0;g<r.planes.length;g++){for(var x=r.planes[g],T=0,E=0;E<l.length;E++)T+=0<=u.dot$1(x,l[E]);if(T===0)return 0;T!==l.length&&(f=!1)}if(f)return 2;for(var L=0;L<3;L++){for(var O=Number.MAX_VALUE,j=-Number.MAX_VALUE,V=0;V<r.points.length;V++){var H=r.points[V][L]-this.min[L];O=Math.min(O,H),j=Math.max(j,H)}if(j<0||O>this.max[L]-this.min[L])return 0}return 1},es.prototype.interpolate=function(r,l,f){return l.top!=null&&r.top!=null&&(this.top=u.number(r.top,l.top,f)),l.bottom!=null&&r.bottom!=null&&(this.bottom=u.number(r.bottom,l.bottom,f)),l.left!=null&&r.left!=null&&(this.left=u.number(r.left,l.left,f)),l.right!=null&&r.right!=null&&(this.right=u.number(r.right,l.right,f)),this},es.prototype.getCenter=function(r,l){var f=u.clamp((this.left+r-this.right)/2,0,r),g=u.clamp((this.top+l-this.bottom)/2,0,l);return new u.Point(f,g)},es.prototype.equals=function(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right},es.prototype.clone=function(){return new es(this.top,this.bottom,this.left,this.right)},es.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var fr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};function ts(r){var l,f,g,x;this._hashName=r&&encodeURIComponent(r),u.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(l=this._updateHashUnthrottled.bind(this),f=!1,g=null,x=function(){g=null,f&&(l(),g=setTimeout(x,300),f=!1)},function(){return f=!0,g||x(),g})}function du(r){this._map=r,this.clear()}_r.prototype.clone=function(){var r=new _r(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r._center=this._center,r.zoom=this.zoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._calcMatrices(),r},fr.minZoom.get=function(){return this._minZoom},fr.minZoom.set=function(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))},fr.maxZoom.get=function(){return this._maxZoom},fr.maxZoom.set=function(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))},fr.minPitch.get=function(){return this._minPitch},fr.minPitch.set=function(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))},fr.maxPitch.get=function(){return this._maxPitch},fr.maxPitch.set=function(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))},fr.renderWorldCopies.get=function(){return this._renderWorldCopies},fr.renderWorldCopies.set=function(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r},fr.worldSize.get=function(){return this.tileSize*this.scale},fr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},fr.size.get=function(){return new u.Point(this.width,this.height)},fr.bearing.get=function(){return-this.angle/Math.PI*180},fr.bearing.set=function(r){var l=-u.wrap(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=u.create$2(),u.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},fr.pitch.get=function(){return this._pitch/Math.PI*180},fr.pitch.set=function(r){var l=u.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())},fr.fov.get=function(){return this._fov/Math.PI*180},fr.fov.set=function(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())},fr.zoom.get=function(){return this._zoom},fr.zoom.set=function(r){var l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom,this._constrain(),this._calcMatrices())},fr.center.get=function(){return this._center},fr.center.set=function(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())},fr.padding.get=function(){return this._edgeInsets.toJSON()},fr.padding.set=function(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())},fr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},_r.prototype.isPaddingEqual=function(r){return this._edgeInsets.equals(r)},_r.prototype.interpolatePadding=function(r,l,f){this._unmodified=!1,this._edgeInsets.interpolate(r,l,f),this._constrain(),this._calcMatrices()},_r.prototype.coveringZoomLevel=function(r){var l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)},_r.prototype.getVisibleUnwrappedCoordinates=function(r){var l=[new u.UnwrappedTileID(0,r)];if(this._renderWorldCopies)for(var f=this.pointCoordinate(new u.Point(0,0)),g=this.pointCoordinate(new u.Point(this.width,0)),x=this.pointCoordinate(new u.Point(this.width,this.height)),T=this.pointCoordinate(new u.Point(0,this.height)),E=Math.floor(Math.min(f.x,g.x,x.x,T.x)),L=Math.floor(Math.max(f.x,g.x,x.x,T.x)),O=E-1;O<=L+1;O++)O!==0&&l.push(new u.UnwrappedTileID(O,r));return l},_r.prototype.coveringTiles=function(r){var l=this.coveringZoomLevel(r),f=l;if(r.minzoom!==void 0&&l<r.minzoom)return[];r.maxzoom!==void 0&&l>r.maxzoom&&(l=r.maxzoom);var g=u.MercatorCoordinate.fromLngLat(this.center),x=Math.pow(2,l),T=[x*g.x,x*g.y,0],E=hu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l),L=r.minzoom||0;function O(qe){return{aabb:new Aa([qe*x,0,0],[(qe+1)*x,x,0]),zoom:0,x:0,y:0,wrap:qe,fullyVisible:!1}}this.pitch<=60&&this._edgeInsets.top<.1&&(L=l);var j=[],V=[],H=l,K=r.reparseOverscaled?f:l;if(this._renderWorldCopies)for(var Q=1;Q<=3;Q++)j.push(O(-Q)),j.push(O(Q));for(j.push(O(0));0<j.length;){var ee=j.pop(),re=ee.x,ue=ee.y,ae=ee.fullyVisible;if(!ae){var ye=ee.aabb.intersects(E);if(ye===0)continue;ae=ye===2}var he=ee.aabb.distanceX(T),me=ee.aabb.distanceY(T),Ce=Math.max(Math.abs(he),Math.abs(me));if(ee.zoom===H||Ce>3+(1<<H-ee.zoom)-2&&ee.zoom>=L)V.push({tileID:new u.OverscaledTileID(ee.zoom===H?K:ee.zoom,ee.wrap,ee.zoom,re,ue),distanceSq:u.sqrLen([T[0]-.5-re,T[1]-.5-ue])});else for(var ke=0;ke<4;ke++){var De=(re<<1)+ke%2,Ve=(ue<<1)+(ke>>1);j.push({aabb:ee.aabb.quadrant(ke),zoom:ee.zoom+1,x:De,y:Ve,wrap:ee.wrap,fullyVisible:ae})}}return V.sort(function(qe,Ke){return qe.distanceSq-Ke.distanceSq}).map(function(qe){return qe.tileID})},_r.prototype.resize=function(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()},fr.unmodified.get=function(){return this._unmodified},_r.prototype.zoomScale=function(r){return Math.pow(2,r)},_r.prototype.scaleZoom=function(r){return Math.log(r)/Math.LN2},_r.prototype.project=function(r){var l=u.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.Point(u.mercatorXfromLng(r.lng)*this.worldSize,u.mercatorYfromLat(l)*this.worldSize)},_r.prototype.unproject=function(r){return new u.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()},fr.point.get=function(){return this.project(this.center)},_r.prototype.setLocationAtPoint=function(r,l){var f=this.pointCoordinate(l),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(r),T=new u.MercatorCoordinate(x.x-(f.x-g.x),x.y-(f.y-g.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())},_r.prototype.locationPoint=function(r){return this.coordinatePoint(this.locationCoordinate(r))},_r.prototype.pointLocation=function(r){return this.coordinateLocation(this.pointCoordinate(r))},_r.prototype.locationCoordinate=function(r){return u.MercatorCoordinate.fromLngLat(r)},_r.prototype.coordinateLocation=function(r){return r.toLngLat()},_r.prototype.pointCoordinate=function(r){var l=[r.x,r.y,0,1],f=[r.x,r.y,1,1];u.transformMat4(l,l,this.pixelMatrixInverse),u.transformMat4(f,f,this.pixelMatrixInverse);var g=l[3],x=f[3],T=l[1]/g,E=f[1]/x,L=l[2]/g,O=f[2]/x,j=L==O?0:(0-L)/(O-L);return new u.MercatorCoordinate(u.number(l[0]/g,f[0]/x,j)/this.worldSize,u.number(T,E,j)/this.worldSize)},_r.prototype.coordinatePoint=function(r){var l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.transformMat4(l,l,this.pixelMatrix),new u.Point(l[0]/l[3],l[1]/l[3])},_r.prototype.getBounds=function(){return new u.LngLatBounds().extend(this.pointLocation(new u.Point(0,0))).extend(this.pointLocation(new u.Point(this.width,0))).extend(this.pointLocation(new u.Point(this.width,this.height))).extend(this.pointLocation(new u.Point(0,this.height)))},_r.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new u.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},_r.prototype.setMaxBounds=function(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},_r.prototype.calculatePosMatrix=function(r,l){l===void 0&&(l=!1);var f=r.key,g=l?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];var x=r.canonical,T=this.worldSize/this.zoomScale(x.z),E=x.x+Math.pow(2,x.z)*r.wrap,L=u.identity(new Float64Array(16));return u.translate(L,L,[E*T,x.y*T,0]),u.scale(L,L,[T/u.EXTENT,T/u.EXTENT,1]),u.multiply(L,l?this.alignedProjMatrix:this.projMatrix,L),g[f]=new Float32Array(L),g[f]},_r.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},_r.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var r,l,f,g,x=-90,T=90,E=-180,L=180,O=this.size,j=this._unmodified;if(this.latRange){var V=this.latRange;x=u.mercatorYfromLat(V[1])*this.worldSize,r=(T=u.mercatorYfromLat(V[0])*this.worldSize)-x<O.y?O.y/(T-x):0}if(this.lngRange){var H=this.lngRange;E=u.mercatorXfromLng(H[0])*this.worldSize,l=(L=u.mercatorXfromLng(H[1])*this.worldSize)-E<O.x?O.x/(L-E):0}var K=this.point,Q=Math.max(l||0,r||0);if(Q)return this.center=this.unproject(new u.Point(l?(L+E)/2:K.x,r?(T+x)/2:K.y)),this.zoom+=this.scaleZoom(Q),this._unmodified=j,void(this._constraining=!1);if(this.latRange){var ee=K.y,re=O.y/2;ee-re<x&&(g=x+re),T<ee+re&&(g=T-re)}if(this.lngRange){var ue=K.x,ae=O.x/2;ue-ae<E&&(f=E+ae),L<ue+ae&&(f=L-ae)}f===void 0&&g===void 0||(this.center=this.unproject(new u.Point(f!==void 0?f:K.x,g!==void 0?g:K.y))),this._unmodified=j,this._constraining=!1}},_r.prototype._calcMatrices=function(){if(this.height){var r=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var l=Math.PI/2+this._pitch,f=this._fov*(.5+r.y/this.height),g=Math.sin(f)*this.cameraToCenterDistance/Math.sin(u.clamp(Math.PI-l-f,.01,Math.PI-.01)),x=this.point,T=x.x,E=x.y,L=1.01*(Math.cos(Math.PI/2-this._pitch)*g+this.cameraToCenterDistance),O=this.height/50,j=new Float64Array(16);u.perspective(j,this._fov,this.width/this.height,O,L),j[8]=2*-r.x/this.width,j[9]=2*r.y/this.height,u.scale(j,j,[1,-1,1]),u.translate(j,j,[0,0,-this.cameraToCenterDistance]),u.rotateX(j,j,this._pitch),u.rotateZ(j,j,this.angle),u.translate(j,j,[-T,-E,0]),this.mercatorMatrix=u.scale([],j,[this.worldSize,this.worldSize,this.worldSize]),u.scale(j,j,[1,1,u.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=j,this.invProjMatrix=u.invert([],this.projMatrix);var V=this.width%2/2,H=this.height%2/2,K=Math.cos(this.angle),Q=Math.sin(this.angle),ee=T-Math.round(T)+K*V+Q*H,re=E-Math.round(E)+K*H+Q*V,ue=new Float64Array(j);if(u.translate(ue,ue,[.5<ee?ee-1:ee,.5<re?re-1:re,0]),this.alignedProjMatrix=ue,j=u.create(),u.scale(j,j,[this.width/2,-this.height/2,1]),u.translate(j,j,[1,-1,0]),this.labelPlaneMatrix=j,j=u.create(),u.scale(j,j,[1,-1,1]),u.translate(j,j,[-1,-1,0]),u.scale(j,j,[2/this.width,2/this.height,1]),this.glCoordMatrix=j,this.pixelMatrix=u.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(j=u.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=j,this._posMatrixCache={},this._alignedPosMatrixCache={}}},_r.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var r=this.pointCoordinate(new u.Point(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.transformMat4(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance},_r.prototype.getCameraPoint=function(){var r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.Point(0,r))},_r.prototype.getCameraQueryGeometry=function(r){var l=this.getCameraPoint();if(r.length===1)return[r[0],l];for(var f=l.x,g=l.y,x=l.x,T=l.y,E=0,L=r;E<L.length;E+=1){var O=L[E];f=Math.min(f,O.x),g=Math.min(g,O.y),x=Math.max(x,O.x),T=Math.max(T,O.y)}return[new u.Point(f,g),new u.Point(x,g),new u.Point(x,T),new u.Point(f,T),new u.Point(f,g)]},Object.defineProperties(_r.prototype,fr),ts.prototype.addTo=function(r){return this._map=r,u.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ts.prototype.remove=function(){return u.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ts.prototype.getHashString=function(r){var l=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),T=Math.round(l.lng*x)/x,E=Math.round(l.lat*x)/x,L=this._map.getBearing(),O=this._map.getPitch(),j="";if(j+=r?"/"+T+"/"+E+"/"+f:f+"/"+E+"/"+T,(L||O)&&(j+="/"+Math.round(10*L)/10),O&&(j+="/"+Math.round(O)),this._hashName){var V=this._hashName,H=!1,K=u.window.location.hash.slice(1).split("&").map(function(Q){var ee=Q.split("=")[0];return ee===V?(H=!0,ee+"="+j):Q}).filter(function(Q){return Q});return H||K.push(V+"="+j),"#"+K.join("&")}return"#"+j},ts.prototype._getCurrentHash=function(){var r,l=this,f=u.window.location.hash.replace("#","");return this._hashName?(f.split("&").map(function(g){return g.split("=")}).forEach(function(g){g[0]===l._hashName&&(r=g)}),(r&&r[1]||"").split("/")):f.split("/")},ts.prototype._onHashChange=function(){var r=this._getCurrentHash();if(3<=r.length&&!r.some(function(f){return isNaN(f)})){var l=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:l,pitch:+(r[4]||0)}),!0}return!1},ts.prototype._updateHashUnthrottled=function(){var r=this.getHashString();try{u.window.history.replaceState(u.window.history.state,"",r)}catch{}};var Ls={linearity:.3,easing:u.bezier(0,0,.3,1)},Id=u.extend({deceleration:2500,maxSpeed:1400},Ls),rg=u.extend({deceleration:20,maxSpeed:1400},Ls),Pc=u.extend({deceleration:1e3,maxSpeed:360},Ls),kd=u.extend({deceleration:1e3,maxSpeed:90},Ls);function La(r,l){(!r.duration||r.duration<l.duration)&&(r.duration=l.duration,r.easing=l.easing)}function Ps(r,l,f){var g=f.maxSpeed,x=f.linearity,T=f.deceleration,E=u.clamp(r*x/(l/1e3),-g,g),L=Math.abs(E)/(T*x);return{easing:f.easing,duration:1e3*L,amount:E*(L/2)}}function Vn(r,l){this._map=r,this._clickTolerance=l.clickTolerance}du.prototype.clear=function(){this._inertiaBuffer=[]},du.prototype.record=function(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.browser.now(),settings:r})},du.prototype._drainInertiaBuffer=function(){for(var r=this._inertiaBuffer,l=u.browser.now();0<r.length&&160<l-r[0].time;)r.shift()},du.prototype._onMoveEnd=function(r){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var l={zoom:0,bearing:0,pitch:0,pan:new u.Point(0,0),pinchAround:void 0,around:void 0},f=0,g=this._inertiaBuffer;f<g.length;f+=1){var x=g[f].settings;l.zoom+=x.zoomDelta||0,l.bearing+=x.bearingDelta||0,l.pitch+=x.pitchDelta||0,x.panDelta&&l.pan._add(x.panDelta),x.around&&(l.around=x.around),x.pinchAround&&(l.pinchAround=x.pinchAround)}var T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(l.pan.mag()){var L=Ps(l.pan.mag(),T,u.extend({},Id,r||{}));E.offset=l.pan.mult(L.amount/l.pan.mag()),E.center=this._map.transform.center,La(E,L)}if(l.zoom){var O=Ps(l.zoom,T,rg);E.zoom=this._map.transform.zoom+O.amount,La(E,O)}if(l.bearing){var j=Ps(l.bearing,T,Pc);E.bearing=this._map.transform.bearing+u.clamp(j.amount,-179,179),La(E,j)}if(l.pitch){var V=Ps(l.pitch,T,kd);E.pitch=this._map.transform.pitch+V.amount,La(E,V)}if(E.zoom||E.bearing){var H=l.pinchAround===void 0?l.around:l.pinchAround;E.around=H?this._map.unproject(H):this._map.getCenter()}return this.clear(),u.extend(E,{noMoveStart:!0})}};var xo=function(r){function l(g,x,T,E){E===void 0&&(E={});var L=k.mousePos(x.getCanvasContainer(),T),O=x.unproject(L);r.call(this,g,u.extend({point:L,lngLat:O,originalEvent:T},E)),this._defaultPrevented=!1,this.target=x}r&&(l.__proto__=r);var f={defaultPrevented:{configurable:!0}};return((l.prototype=Object.create(r&&r.prototype)).constructor=l).prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(l.prototype,f),l}(u.Event),Ds=function(r){function l(g,x,T){var E=g==="touchend"?T.changedTouches:T.touches,L=k.touchPos(x.getCanvasContainer(),E),O=L.map(function(H){return x.unproject(H)}),j=L.reduce(function(H,K,Q,ee){return H.add(K.div(ee.length))},new u.Point(0,0)),V=x.unproject(j);r.call(this,g,{points:L,point:j,lngLats:O,lngLat:V,originalEvent:T}),this._defaultPrevented=!1}r&&(l.__proto__=r);var f={defaultPrevented:{configurable:!0}};return((l.prototype=Object.create(r&&r.prototype)).constructor=l).prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(l.prototype,f),l}(u.Event),Md=function(r){function l(g,x,T){r.call(this,g,{originalEvent:T}),this._defaultPrevented=!1}r&&(l.__proto__=r);var f={defaultPrevented:{configurable:!0}};return((l.prototype=Object.create(r&&r.prototype)).constructor=l).prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(l.prototype,f),l}(u.Event);function la(r){this._map=r}function Hi(r,l){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}function Dc(r,l){for(var f={},g=0;g<r.length;g++)f[r[g].identifier]=l[g];return f}function fu(r){this.reset(),this.numTouches=r.numTouches}function ua(r){this.singleTap=new fu(r),this.numTaps=r.numTaps,this.reset()}function Ro(){this._zoomIn=new ua({numTouches:1,numTaps:2}),this._zoomOut=new ua({numTouches:2,numTaps:1}),this.reset()}function uo(r){this.reset(),this._clickTolerance=r.clickTolerance||1}Vn.prototype.reset=function(){delete this._mousedownPos},Vn.prototype.wheel=function(r){return this._firePreventable(new Md(r.type,this._map,r))},Vn.prototype.mousedown=function(r,l){return this._mousedownPos=l,this._firePreventable(new xo(r.type,this._map,r))},Vn.prototype.mouseup=function(r){this._map.fire(new xo(r.type,this._map,r))},Vn.prototype.click=function(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new xo(r.type,this._map,r))},Vn.prototype.dblclick=function(r){return this._firePreventable(new xo(r.type,this._map,r))},Vn.prototype.mouseover=function(r){this._map.fire(new xo(r.type,this._map,r))},Vn.prototype.mouseout=function(r){this._map.fire(new xo(r.type,this._map,r))},Vn.prototype.touchstart=function(r){return this._firePreventable(new Ds(r.type,this._map,r))},Vn.prototype.touchmove=function(r){this._map.fire(new Ds(r.type,this._map,r))},Vn.prototype.touchend=function(r){this._map.fire(new Ds(r.type,this._map,r))},Vn.prototype.touchcancel=function(r){this._map.fire(new Ds(r.type,this._map,r))},Vn.prototype._firePreventable=function(r){if(this._map.fire(r),r.defaultPrevented)return{}},Vn.prototype.isEnabled=function(){return!0},Vn.prototype.isActive=function(){return!1},Vn.prototype.enable=function(){},Vn.prototype.disable=function(){},la.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},la.prototype.mousemove=function(r){this._map.fire(new xo(r.type,this._map,r))},la.prototype.mousedown=function(){this._delayContextMenu=!0},la.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},la.prototype.contextmenu=function(r){this._delayContextMenu?this._contextMenuEvent=r:this._map.fire(new xo(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()},la.prototype.isEnabled=function(){return!0},la.prototype.isActive=function(){return!1},la.prototype.enable=function(){},la.prototype.disable=function(){},Hi.prototype.isEnabled=function(){return!!this._enabled},Hi.prototype.isActive=function(){return!!this._active},Hi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Hi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Hi.prototype.mousedown=function(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(k.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)},Hi.prototype.mousemoveWindow=function(r,l){if(this._active){var f=l;if(!(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)){var g=this._startPos;this._lastPos=f,this._box||(this._box=k.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));var x=Math.min(g.x,f.x),T=Math.max(g.x,f.x),E=Math.min(g.y,f.y),L=Math.max(g.y,f.y);k.setTransform(this._box,"translate("+x+"px,"+E+"px)"),this._box.style.width=T-x+"px",this._box.style.height=L-E+"px"}}},Hi.prototype.mouseupWindow=function(r,l){var f=this;if(this._active&&r.button===0){var g=this._startPos,x=l;if(this.reset(),k.suppressClick(),g.x!==x.x||g.y!==x.y)return this._map.fire(new u.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:function(T){return T.fitScreenCoordinates(g,x,f._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",r)}},Hi.prototype.keydown=function(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))},Hi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos},Hi.prototype._fireEvent=function(r,l){return this._map.fire(new u.Event(r,{originalEvent:l}))},fu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},fu.prototype.touchstart=function(r,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){for(var x=new u.Point(0,0),T=0,E=g;T<E.length;T+=1)x._add(E[T]);return x.div(g.length)}(l),this.touches=Dc(f,l)))},fu.prototype.touchmove=function(r,l,f){if(!this.aborted&&this.centroid){var g=Dc(f,l);for(var x in this.touches){var T=g[x];(!T||30<T.dist(this.touches[x]))&&(this.aborted=!0)}}},fu.prototype.touchend=function(r,l,f){if((!this.centroid||500<r.timeStamp-this.startTime)&&(this.aborted=!0),f.length===0){var g=!this.aborted&&this.centroid;if(this.reset(),g)return g}},ua.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ua.prototype.touchstart=function(r,l,f){this.singleTap.touchstart(r,l,f)},ua.prototype.touchmove=function(r,l,f){this.singleTap.touchmove(r,l,f)},ua.prototype.touchend=function(r,l,f){var g=this.singleTap.touchend(r,l,f);if(g){var x=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(g)<30;if(x&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}},Ro.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ro.prototype.touchstart=function(r,l,f){this._zoomIn.touchstart(r,l,f),this._zoomOut.touchstart(r,l,f)},Ro.prototype.touchmove=function(r,l,f){this._zoomIn.touchmove(r,l,f),this._zoomOut.touchmove(r,l,f)},Ro.prototype.touchend=function(r,l,f){var g=this,x=this._zoomIn.touchend(r,l,f),T=this._zoomOut.touchend(r,l,f);return x?(this._active=!0,r.preventDefault(),setTimeout(function(){return g.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(x)},{originalEvent:r})}}):T?(this._active=!0,r.preventDefault(),setTimeout(function(){return g.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(T)},{originalEvent:r})}}):void 0},Ro.prototype.touchcancel=function(){this.reset()},Ro.prototype.enable=function(){this._enabled=!0},Ro.prototype.disable=function(){this._enabled=!1,this.reset()},Ro.prototype.isEnabled=function(){return this._enabled},Ro.prototype.isActive=function(){return this._active};var zc={0:1,2:2};function wo(r){this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset()}uo.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},uo.prototype._correctButton=function(r,l){return!1},uo.prototype._move=function(r,l){return{}},uo.prototype.mousedown=function(r,l){if(!this._lastPoint){var f=k.mouseButton(r);this._correctButton(r,f)&&(this._lastPoint=l,this._eventButton=f)}},uo.prototype.mousemoveWindow=function(r,l){var f,g,x=this._lastPoint;if(x){if(r.preventDefault(),f=this._eventButton,g=zc[f],r.buttons===void 0||(r.buttons&g)!==g)this.reset();else if(this._moved||!(l.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(x,l)}},uo.prototype.mouseupWindow=function(r){this._lastPoint&&k.mouseButton(r)===this._eventButton&&(this._moved&&k.suppressClick(),this.reset())},uo.prototype.enable=function(){this._enabled=!0},uo.prototype.disable=function(){this._enabled=!1,this.reset()},uo.prototype.isEnabled=function(){return this._enabled},uo.prototype.isActive=function(){return this._active};var mu,zs,wl,ng=(Ns.__proto__=wl=uo,((Ns.prototype=Object.create(wl&&wl.prototype)).constructor=Ns).prototype.mousedown=function(r,l){wl.prototype.mousedown.call(this,r,l),this._lastPoint&&(this._active=!0)},Ns.prototype._correctButton=function(r,l){return l===0&&!r.ctrlKey},Ns.prototype._move=function(r,l){return{around:l,panDelta:l.sub(r)}},Ns),gu=(Pa.__proto__=zs=uo,((Pa.prototype=Object.create(zs&&zs.prototype)).constructor=Pa).prototype._correctButton=function(r,l){return l===0&&r.ctrlKey||l===2},Pa.prototype._move=function(r,l){var f=.8*(l.x-r.x);if(f)return this._active=!0,{bearingDelta:f}},Pa.prototype.contextmenu=function(r){r.preventDefault()},Pa),ch=(bl.__proto__=mu=uo,((bl.prototype=Object.create(mu&&mu.prototype)).constructor=bl).prototype._correctButton=function(r,l){return l===0&&r.ctrlKey||l===2},bl.prototype._move=function(r,l){var f=-.5*(l.y-r.y);if(f)return this._active=!0,{pitchDelta:f}},bl.prototype.contextmenu=function(r){r.preventDefault()},bl);function bl(){mu.apply(this,arguments)}function Pa(){zs.apply(this,arguments)}function Ns(){wl.apply(this,arguments)}function qn(){this.reset()}function Os(r,l,f){for(var g=0;g<r.length;g++)if(r[g].identifier===f)return l[g]}function ph(r,l){return Math.log(r/l)/Math.LN2}wo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new u.Point(0,0)},wo.prototype.touchstart=function(r,l,f){return this._calculateTransform(r,l,f)},wo.prototype.touchmove=function(r,l,f){if(this._active)return r.preventDefault(),this._calculateTransform(r,l,f)},wo.prototype.touchend=function(r,l,f){this._calculateTransform(r,l,f),this._active&&f.length<this._minTouches&&this.reset()},wo.prototype.touchcancel=function(){this.reset()},wo.prototype._calculateTransform=function(r,l,f){0<f.length&&(this._active=!0);var g=Dc(f,l),x=new u.Point(0,0),T=new u.Point(0,0),E=0;for(var L in g){var O=g[L],j=this._touches[L];j&&(x._add(O),T._add(O.sub(j)),E++,g[L]=O)}if(this._touches=g,!(E<this._minTouches)&&T.mag()){var V=T.div(E);if(this._sum._add(V),!(this._sum.mag()<this._clickTolerance))return{around:x.div(E),panDelta:V}}},wo.prototype.enable=function(){this._enabled=!0},wo.prototype.disable=function(){this._enabled=!1,this.reset()},wo.prototype.isEnabled=function(){return this._enabled},wo.prototype.isActive=function(){return this._active},qn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},qn.prototype._start=function(r){},qn.prototype._move=function(r,l,f){return{}},qn.prototype.touchstart=function(r,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))},qn.prototype.touchmove=function(r,l,f){if(this._firstTwoTouches){r.preventDefault();var g=this._firstTwoTouches,x=g[1],T=Os(f,l,g[0]),E=Os(f,l,x);if(T&&E){var L=this._aroundCenter?null:T.add(E).div(2);return this._move([T,E],L,r)}}},qn.prototype.touchend=function(r,l,f){if(this._firstTwoTouches){var g=this._firstTwoTouches,x=g[1],T=Os(f,l,g[0]),E=Os(f,l,x);T&&E||(this._active&&k.suppressClick(),this.reset())}},qn.prototype.touchcancel=function(){this.reset()},qn.prototype.enable=function(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"},qn.prototype.disable=function(){this._enabled=!1,this.reset()},qn.prototype.isEnabled=function(){return this._enabled},qn.prototype.isActive=function(){return this._active};var yu,Nc=(Rs.__proto__=yu=qn,((Rs.prototype=Object.create(yu&&yu.prototype)).constructor=Rs).prototype.reset=function(){yu.prototype.reset.call(this),delete this._distance,delete this._startDistance},Rs.prototype._start=function(r){this._startDistance=this._distance=r[0].dist(r[1])},Rs.prototype._move=function(r,l){var f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(ph(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ph(this._distance,f),pinchAround:l}},Rs);function Rs(){yu.apply(this,arguments)}function Ad(r,l){return 180*r.angleWith(l)/Math.PI}var rs,Ld=(ns.__proto__=rs=qn,((ns.prototype=Object.create(rs&&rs.prototype)).constructor=ns).prototype.reset=function(){rs.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},ns.prototype._start=function(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])},ns.prototype._move=function(r,l){var f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ad(this._vector,f),pinchAround:l}},ns.prototype._isBelowThreshold=function(r){this._minDiameter=Math.min(this._minDiameter,r.mag());var l=25/(Math.PI*this._minDiameter)*360,f=Ad(r,this._startVector);return Math.abs(f)<l},ns);function ns(){rs.apply(this,arguments)}function Cl(r){return Math.abs(r.y)>Math.abs(r.x)}function is(){var r=Pd;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep}var vu,Oc=(Bs.__proto__=vu=qn,((Bs.prototype=Object.create(vu&&vu.prototype)).constructor=Bs).prototype.reset=function(){vu.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Bs.prototype._start=function(r){Cl((this._lastPoints=r)[0].sub(r[1]))&&(this._valid=!1)},Bs.prototype._move=function(r,l,f){var g=r[0].sub(this._lastPoints[0]),x=r[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(g,x,f.timeStamp),this._valid)return this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}},Bs.prototype.gestureBeginsVertically=function(r,l,f){if(this._valid!==void 0)return this._valid;var g=2<=r.mag(),x=2<=l.mag();if(g||x){if(!g||!x)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;var T=0<r.y==0<l.y;return Cl(r)&&Cl(l)&&T}},Bs),Pd={panStep:100,bearingStep:15,pitchStep:10};function Bs(){vu.apply(this,arguments)}function Rc(r){return r*(2-r)}function Ii(r,l){this._map=r,this._el=r.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,u.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)}function Fs(r,l){this._clickZoom=r,this._tapZoom=l}function ca(){this.reset()}function Bo(){this._tap=new ua({numTouches:1,numTaps:1}),this.reset()}function _u(r,l,f){this._el=r,this._mousePan=l,this._touchPan=f}function os(r,l,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=f}function as(r,l,f,g){this._el=r,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}function xu(r){return r.zoom||r.drag||r.pitch||r.rotate}is.prototype.reset=function(){this._active=!1},is.prototype.keydown=function(r){var l=this;if(!(r.altKey||r.ctrlKey||r.metaKey)){var f=0,g=0,x=0,T=0,E=0;switch(r.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:r.shiftKey?g=-1:(r.preventDefault(),T=-1);break;case 39:r.shiftKey?g=1:(r.preventDefault(),T=1);break;case 38:r.shiftKey?x=1:(r.preventDefault(),E=-1);break;case 40:r.shiftKey?x=-1:(r.preventDefault(),E=1);break;default:return}return{cameraAnimation:function(L){var O=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:Rc,zoom:f?Math.round(O)+f*(r.shiftKey?2:1):O,bearing:L.getBearing()+g*l._bearingStep,pitch:L.getPitch()+x*l._pitchStep,offset:[-T*l._panStep,-E*l._panStep],center:L.getCenter()},{originalEvent:r})}}}},is.prototype.enable=function(){this._enabled=!0},is.prototype.disable=function(){this._enabled=!1,this.reset()},is.prototype.isEnabled=function(){return this._enabled},is.prototype.isActive=function(){return this._active},Ii.prototype.setZoomRate=function(r){this._defaultZoomRate=r},Ii.prototype.setWheelZoomRate=function(r){this._wheelZoomRate=r},Ii.prototype.isEnabled=function(){return!!this._enabled},Ii.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ii.prototype.isZooming=function(){return!!this._zooming},Ii.prototype.enable=function(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&r.around==="center")},Ii.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ii.prototype.wheel=function(r){if(this.isEnabled()){var l=r.deltaMode===u.window.WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,f=u.browser.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%4.000244140625==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":400<g?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}},Ii.prototype._onTimeout=function(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)},Ii.prototype._start=function(r){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var l=k.mousePos(this._el,r);this._around=u.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(l)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ii.prototype.renderFrame=function(){return this._onScrollFrame()},Ii.prototype._onScrollFrame=function(){var r=this;if(this._frameId&&(this._frameId=null,this.isActive())){var l=this._map.transform;if(this._delta!==0){var f=this._type==="wheel"&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate,g=2/(1+Math.exp(-Math.abs(this._delta*f)));this._delta<0&&g!==0&&(g=1/g);var x=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(x*g))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var T,E=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,L=this._startZoom,O=this._easing,j=!1;if(this._type==="wheel"&&L&&O){var V=Math.min((u.browser.now()-this._lastWheelEventTime)/200,1),H=O(V);T=u.number(L,E,H),V<1?this._frameId||(this._frameId=!0):j=!0}else T=E,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(function(){r._zooming=!1,r._handler._triggerRenderFrame(),delete r._targetZoom,delete r._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:T-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ii.prototype._smoothOutEasing=function(r){var l=u.ease;if(this._prevEase){var f=this._prevEase,g=(u.browser.now()-f.start)/f.duration,x=f.easing(.01+g)-f.easing(g),T=.27/Math.sqrt(x*x+1e-4)*.01,E=Math.sqrt(.0729-T*T);l=u.bezier(T,E,.25,1)}return this._prevEase={start:u.browser.now(),duration:r,easing:l},l},Ii.prototype.reset=function(){this._active=!1},Fs.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Fs.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Fs.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Fs.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()},ca.prototype.reset=function(){this._active=!1},ca.prototype.dblclick=function(r,l){return r.preventDefault(),{cameraAnimation:function(f){f.easeTo({duration:300,zoom:f.getZoom()+(r.shiftKey?-1:1),around:f.unproject(l)},{originalEvent:r})}}},ca.prototype.enable=function(){this._enabled=!0},ca.prototype.disable=function(){this._enabled=!1,this.reset()},ca.prototype.isEnabled=function(){return this._enabled},ca.prototype.isActive=function(){return this._active},Bo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Bo.prototype.touchstart=function(r,l,f){this._swipePoint||(this._tapTime&&500<r.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<f.length&&(this._swipePoint=l[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(r,l,f))},Bo.prototype.touchmove=function(r,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;var g=l[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(r,l,f)},Bo.prototype.touchend=function(r,l,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(r,l,f)&&(this._tapTime=r.timeStamp)},Bo.prototype.touchcancel=function(){this.reset()},Bo.prototype.enable=function(){this._enabled=!0},Bo.prototype.disable=function(){this._enabled=!1,this.reset()},Bo.prototype.isEnabled=function(){return this._enabled},Bo.prototype.isActive=function(){return this._active},_u.prototype.enable=function(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},_u.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},_u.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},_u.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()},os.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},os.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},os.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},os.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()},as.prototype.enable=function(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},as.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},as.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},as.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},as.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},as.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ss,Dd=((ss=u.Event)&&(hh.__proto__=ss),(hh.prototype=Object.create(ss&&ss.prototype)).constructor=hh);function hh(){ss.apply(this,arguments)}function Sl(r){return r.panDelta&&r.panDelta.mag()||r.zoomDelta||r.bearingDelta||r.pitchDelta}function Zn(r,l){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new du(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l),u.bindAll(["handleEvent","handleWindowEvent"],this);var f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[u.window.document,"mousemove",{capture:!0}],[u.window.document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[u.window,"blur",void 0]];for(var g=0,x=this._listeners;g<x.length;g+=1){var T=x[g],E=T[0];k.addEventListener(E,T[1],E===u.window.document?this.handleWindowEvent:this.handleEvent,T[2])}}function Fo(r){r===void 0&&(r={}),this.options=r,u.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)}Zn.prototype.destroy=function(){for(var r=0,l=this._listeners;r<l.length;r+=1){var f=l[r],g=f[0];k.removeEventListener(g,f[1],g===u.window.document?this.handleWindowEvent:this.handleEvent,f[2])}},Zn.prototype._addDefaultHandlers=function(r){var l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new Vn(l,r));var g=l.boxZoom=new Hi(l,r);this._add("boxZoom",g);var x=new Ro,T=new ca;l.doubleClickZoom=new Fs(T,x),this._add("tapZoom",x),this._add("clickZoom",T);var E=new Bo;this._add("tapDragZoom",E);var L=l.touchPitch=new Oc;this._add("touchPitch",L);var O=new gu(r),j=new ch(r);l.dragRotate=new os(r,O,j),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",j,["mouseRotate"]);var V=new ng(r),H=new wo(r);l.dragPan=new _u(f,V,H),this._add("mousePan",V),this._add("touchPan",H,["touchZoom","touchRotate"]);var K=new Ld,Q=new Nc;l.touchZoomRotate=new as(f,Q,K,E),this._add("touchRotate",K,["touchPan","touchZoom"]),this._add("touchZoom",Q,["touchPan","touchRotate"]);var ee=l.scrollZoom=new Ii(l,this);this._add("scrollZoom",ee,["mousePan"]);var re=l.keyboard=new is;this._add("keyboard",re),this._add("blockableMapEvent",new la(l));for(var ue=0,ae=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ue<ae.length;ue+=1){var ye=ae[ue];r.interactive&&r[ye]&&l[ye].enable(r[ye])}},Zn.prototype._add=function(r,l,f){this._handlers.push({handlerName:r,handler:l,allowed:f}),this._handlersById[r]=l},Zn.prototype.stop=function(){if(!this._updatingCamera){for(var r=0,l=this._handlers;r<l.length;r+=1)l[r].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Zn.prototype.isActive=function(){for(var r=0,l=this._handlers;r<l.length;r+=1)if(l[r].handler.isActive())return!0;return!1},Zn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Zn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Zn.prototype.isMoving=function(){return Boolean(xu(this._eventsInProgress))||this.isZooming()},Zn.prototype._blockedByActive=function(r,l,f){for(var g in r)if(g!==f&&(!l||l.indexOf(g)<0))return!0;return!1},Zn.prototype.handleWindowEvent=function(r){this.handleEvent(r,r.type+"Window")},Zn.prototype._getMapTouches=function(r){for(var l=[],f=0,g=r;f<g.length;f+=1){var x=g[f];this._el.contains(x.target)&&l.push(x)}return l},Zn.prototype.handleEvent=function(r,l){if(r.type!=="blur"){this._updatingCamera=!0;for(var f=r.type==="renderFrame"?void 0:r,g={needsRenderFrame:!1},x={},T={},E=r.touches?this._getMapTouches(r.touches):void 0,L=E?k.touchPos(this._el,E):k.mousePos(this._el,r),O=0,j=this._handlers;O<j.length;O+=1){var V=j[O],H=V.handlerName,K=V.handler,Q=V.allowed;if(K.isEnabled()){var ee=void 0;this._blockedByActive(T,Q,H)?K.reset():K[l||r.type]&&(ee=K[l||r.type](r,L,E),this.mergeHandlerResult(g,x,ee,H,f),ee&&ee.needsRenderFrame&&this._triggerRenderFrame()),(ee||K.isActive())&&(T[H]=K)}}var re={};for(var ue in this._previousActiveHandlers)T[ue]||(re[ue]=f);this._previousActiveHandlers=T,(Object.keys(re).length||Sl(g))&&(this._changes.push([g,x,re]),this._triggerRenderFrame()),(Object.keys(T).length||Sl(g))&&this._map._stop(!0),this._updatingCamera=!1;var ae=g.cameraAnimation;ae&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],ae(this._map))}else this.stop()},Zn.prototype.mergeHandlerResult=function(r,l,f,g,x){if(f){u.extend(r,f);var T={handlerName:g,originalEvent:f.originalEvent||x};f.zoomDelta!==void 0&&(l.zoom=T),f.panDelta!==void 0&&(l.drag=T),f.pitchDelta!==void 0&&(l.pitch=T),f.bearingDelta!==void 0&&(l.rotate=T)}},Zn.prototype._applyChanges=function(){for(var r={},l={},f={},g=0,x=this._changes;g<x.length;g+=1){var T=x[g],E=T[0],L=T[1],O=T[2];E.panDelta&&(r.panDelta=(r.panDelta||new u.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(r.around=E.around),E.pinchAround!==void 0&&(r.pinchAround=E.pinchAround),E.noInertia&&(r.noInertia=E.noInertia),u.extend(l,L),u.extend(f,O)}this._updateMapTransform(r,l,f),this._changes=[]},Zn.prototype._updateMapTransform=function(r,l,f){var g=this._map,x=g.transform;if(!Sl(r))return this._fireEvents(l,f);var T=r.panDelta,E=r.zoomDelta,L=r.bearingDelta,O=r.pitchDelta,j=r.around,V=r.pinchAround;V!==void 0&&(j=V),g._stop(!0),j=j||g.transform.centerPoint;var H=x.pointLocation(T?j.sub(T):j);L&&(x.bearing+=L),O&&(x.pitch+=O),E&&(x.zoom+=E),x.setLocationAtPoint(H,j),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,f)},Zn.prototype._fireEvents=function(r,l){var f=this,g=xu(this._eventsInProgress),x=xu(r),T={};for(var E in r)this._eventsInProgress[E]||(T[E+"start"]=r[E].originalEvent),this._eventsInProgress[E]=r[E];for(var L in!g&&x&&this._fireEvent("movestart",x.originalEvent),T)this._fireEvent(L,T[L]);for(var O in r.rotate&&(this._bearingChanged=!0),x&&this._fireEvent("move",x.originalEvent),r)this._fireEvent(O,r[O].originalEvent);var j,V={};for(var H in this._eventsInProgress){var K=this._eventsInProgress[H],Q=K.handlerName,ee=K.originalEvent;this._handlersById[Q].isActive()||(delete this._eventsInProgress[H],V[H+"end"]=j=l[Q]||ee)}for(var re in V)this._fireEvent(re,V[re]);var ue=xu(this._eventsInProgress);if((g||x)&&!ue){this._updatingCamera=!0;var ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=function(he){return he!==0&&-f._bearingSnap<he&&he<f._bearingSnap};ae?(ye(ae.bearing||this._map.getBearing())&&(ae.bearing=0),this._map.easeTo(ae,{originalEvent:j})):(this._map.fire(new u.Event("moveend",{originalEvent:j})),ye(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Zn.prototype._fireEvent=function(r,l){this._map.fire(new u.Event(r,l?{originalEvent:l}:{}))},Zn.prototype._requestFrame=function(){var r=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(l){delete r._frameId,r.handleEvent(new Dd("renderFrame",{timeStamp:l})),r._applyChanges()})},Zn.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var wu,zd=((wu=u.Evented)&&(Jt.__proto__=wu),((Jt.prototype=Object.create(wu&&wu.prototype)).constructor=Jt).prototype.getCenter=function(){return new u.LngLat(this.transform.center.lng,this.transform.center.lat)},Jt.prototype.setCenter=function(r,l){return this.jumpTo({center:r},l)},Jt.prototype.panBy=function(r,l,f){return r=u.Point.convert(r).mult(-1),this.panTo(this.transform.center,u.extend({offset:r},l),f)},Jt.prototype.panTo=function(r,l,f){return this.easeTo(u.extend({center:r},l),f)},Jt.prototype.getZoom=function(){return this.transform.zoom},Jt.prototype.setZoom=function(r,l){return this.jumpTo({zoom:r},l),this},Jt.prototype.zoomTo=function(r,l,f){return this.easeTo(u.extend({zoom:r},l),f)},Jt.prototype.zoomIn=function(r,l){return this.zoomTo(this.getZoom()+1,r,l),this},Jt.prototype.zoomOut=function(r,l){return this.zoomTo(this.getZoom()-1,r,l),this},Jt.prototype.getBearing=function(){return this.transform.bearing},Jt.prototype.setBearing=function(r,l){return this.jumpTo({bearing:r},l),this},Jt.prototype.getPadding=function(){return this.transform.padding},Jt.prototype.setPadding=function(r,l){return this.jumpTo({padding:r},l),this},Jt.prototype.rotateTo=function(r,l,f){return this.easeTo(u.extend({bearing:r},l),f)},Jt.prototype.resetNorth=function(r,l){return this.rotateTo(0,u.extend({duration:1e3},r),l),this},Jt.prototype.resetNorthPitch=function(r,l){return this.easeTo(u.extend({bearing:0,pitch:0,duration:1e3},r),l),this},Jt.prototype.snapToNorth=function(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this},Jt.prototype.getPitch=function(){return this.transform.pitch},Jt.prototype.setPitch=function(r,l){return this.jumpTo({pitch:r},l),this},Jt.prototype.cameraForBounds=function(r,l){return r=u.LngLatBounds.convert(r),this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),0,l)},Jt.prototype._cameraForBoxAndBearing=function(r,l,f,g){var x={top:0,bottom:0,right:0,left:0};if(typeof(g=u.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){var T=g.padding;g.padding={top:T,bottom:T,right:T,left:T}}g.padding=u.extend(x,g.padding);var E=this.transform,L=E.padding,O=E.project(u.LngLat.convert(r)),j=E.project(u.LngLat.convert(l)),V=O.rotate(-f*Math.PI/180),H=j.rotate(-f*Math.PI/180),K=new u.Point(Math.max(V.x,H.x),Math.max(V.y,H.y)),Q=new u.Point(Math.min(V.x,H.x),Math.min(V.y,H.y)),ee=K.sub(Q),re=(E.width-(L.left+L.right+g.padding.left+g.padding.right))/ee.x,ue=(E.height-(L.top+L.bottom+g.padding.top+g.padding.bottom))/ee.y;if(!(ue<0||re<0)){var ae=Math.min(E.scaleZoom(E.scale*Math.min(re,ue)),g.maxZoom),ye=u.Point.convert(g.offset),he=new u.Point(ye.x+(g.padding.left-g.padding.right)/2,ye.y+(g.padding.top-g.padding.bottom)/2).mult(E.scale/E.zoomScale(ae));return{center:E.unproject(O.add(j).div(2).sub(he)),zoom:ae,bearing:f}}u.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Jt.prototype.fitBounds=function(r,l,f){return this._fitInternal(this.cameraForBounds(r,l),l,f)},Jt.prototype.fitScreenCoordinates=function(r,l,f,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.Point.convert(r)),this.transform.pointLocation(u.Point.convert(l)),f,g),g,x)},Jt.prototype._fitInternal=function(r,l,f){return r?(delete(l=u.extend(r,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this},Jt.prototype.jumpTo=function(r,l){this.stop();var f=this.transform,g=!1,x=!1,T=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(g=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=u.LngLat.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(x=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(T=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this.fire(new u.Event("movestart",l)).fire(new u.Event("move",l)),g&&this.fire(new u.Event("zoomstart",l)).fire(new u.Event("zoom",l)).fire(new u.Event("zoomend",l)),x&&this.fire(new u.Event("rotatestart",l)).fire(new u.Event("rotate",l)).fire(new u.Event("rotateend",l)),T&&this.fire(new u.Event("pitchstart",l)).fire(new u.Event("pitch",l)).fire(new u.Event("pitchend",l)),this.fire(new u.Event("moveend",l))},Jt.prototype.easeTo=function(r,l){var f=this;this._stop(!1,r.easeId),((r=u.extend({offset:[0,0],duration:500,easing:u.ease},r)).animate===!1||!r.essential&&u.browser.prefersReducedMotion)&&(r.duration=0);var g=this.transform,x=this.getZoom(),T=this.getBearing(),E=this.getPitch(),L=this.getPadding(),O="zoom"in r?+r.zoom:x,j="bearing"in r?this._normalizeBearing(r.bearing,T):T,V="pitch"in r?+r.pitch:E,H="padding"in r?r.padding:g.padding,K=u.Point.convert(r.offset),Q=g.centerPoint.add(K),ee=g.pointLocation(Q),re=u.LngLat.convert(r.center||ee);this._normalizeCenter(re);var ue,ae,ye=g.project(ee),he=g.project(re).sub(ye),me=g.zoomScale(O-x);r.around&&(ue=u.LngLat.convert(r.around),ae=g.locationPoint(ue));var Ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||O!==x,this._rotating=this._rotating||T!==j,this._pitching=this._pitching||V!==E,this._padding=!g.isPaddingEqual(H),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,Ce),clearTimeout(this._easeEndTimeoutID),this._ease(function(ke){if(f._zooming&&(g.zoom=u.number(x,O,ke)),f._rotating&&(g.bearing=u.number(T,j,ke)),f._pitching&&(g.pitch=u.number(E,V,ke)),f._padding&&(g.interpolatePadding(L,H,ke),Q=g.centerPoint.add(K)),ue)g.setLocationAtPoint(ue,ae);else{var De=g.zoomScale(g.zoom-x),Ve=x<O?Math.min(2,me):Math.max(.5,me),qe=Math.pow(Ve,1-ke),Ke=g.unproject(ye.add(he.mult(ke*qe)).mult(De));g.setLocationAtPoint(g.renderWorldCopies?Ke.wrap():Ke,Q)}f._fireMoveEvents(l)},function(ke){f._afterEase(l,ke)},r),this},Jt.prototype._prepareEase=function(r,l,f){f===void 0&&(f={}),this._moving=!0,l||f.moving||this.fire(new u.Event("movestart",r)),this._zooming&&!f.zooming&&this.fire(new u.Event("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new u.Event("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new u.Event("pitchstart",r))},Jt.prototype._fireMoveEvents=function(r){this.fire(new u.Event("move",r)),this._zooming&&this.fire(new u.Event("zoom",r)),this._rotating&&this.fire(new u.Event("rotate",r)),this._pitching&&this.fire(new u.Event("pitch",r))},Jt.prototype._afterEase=function(r,l){if(!this._easeId||!l||this._easeId!==l){delete this._easeId;var f=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new u.Event("zoomend",r)),g&&this.fire(new u.Event("rotateend",r)),x&&this.fire(new u.Event("pitchend",r)),this.fire(new u.Event("moveend",r))}},Jt.prototype.flyTo=function(r,l){var f=this;if(!r.essential&&u.browser.prefersReducedMotion){var g=u.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,l)}this.stop(),r=u.extend({offset:[0,0],speed:1.2,curve:1.42,easing:u.ease},r);var x=this.transform,T=this.getZoom(),E=this.getBearing(),L=this.getPitch(),O=this.getPadding(),j="zoom"in r?u.clamp(+r.zoom,x.minZoom,x.maxZoom):T,V="bearing"in r?this._normalizeBearing(r.bearing,E):E,H="pitch"in r?+r.pitch:L,K="padding"in r?r.padding:x.padding,Q=x.zoomScale(j-T),ee=u.Point.convert(r.offset),re=x.centerPoint.add(ee),ue=x.pointLocation(re),ae=u.LngLat.convert(r.center||ue);this._normalizeCenter(ae);var ye=x.project(ue),he=x.project(ae).sub(ye),me=r.curve,Ce=Math.max(x.width,x.height),ke=Ce/Q,De=he.mag();if("minZoom"in r){var Ve=u.clamp(Math.min(r.minZoom,T,j),x.minZoom,x.maxZoom),qe=Ce/x.zoomScale(Ve-T);me=Math.sqrt(qe/De*2)}var Ke=me*me;function lt(_t){var zt=(ke*ke-Ce*Ce+(_t?-1:1)*Ke*Ke*De*De)/(2*(_t?ke:Ce)*Ke*De);return Math.log(Math.sqrt(zt*zt+1)-zt)}function ht(_t){return(Math.exp(_t)-Math.exp(-_t))/2}function dt(_t){return(Math.exp(_t)+Math.exp(-_t))/2}var Tt=lt(0),mt=function(_t){return dt(Tt)/dt(Tt+me*_t)},Mt=function(_t){return Ce*((dt(Tt)*(ht(zt=Tt+me*_t)/dt(zt))-ht(Tt))/Ke)/De;var zt},Ut=(lt(1)-Tt)/me;if(Math.abs(De)<1e-6||!isFinite(Ut)){if(Math.abs(Ce-ke)<1e-6)return this.easeTo(r,l);var Rt=ke<Ce?-1:1;Ut=Math.abs(Math.log(ke/Ce))/me,Mt=function(){return 0},mt=function(_t){return Math.exp(Rt*me*_t)}}return r.duration="duration"in r?+r.duration:1e3*Ut/("screenSpeed"in r?r.screenSpeed/me:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=E!==V,this._pitching=H!==L,this._padding=!x.isPaddingEqual(K),this._prepareEase(l,!1),this._ease(function(_t){var zt=_t*Ut,er=1/mt(zt);x.zoom=_t===1?j:T+x.scaleZoom(er),f._rotating&&(x.bearing=u.number(E,V,_t)),f._pitching&&(x.pitch=u.number(L,H,_t)),f._padding&&(x.interpolatePadding(O,K,_t),re=x.centerPoint.add(ee));var Ot=_t===1?ae:x.unproject(ye.add(he.mult(Mt(zt))).mult(er));x.setLocationAtPoint(x.renderWorldCopies?Ot.wrap():Ot,re),f._fireMoveEvents(l)},function(){return f._afterEase(l)},r),this},Jt.prototype.isEasing=function(){return!!this._easeFrameId},Jt.prototype.stop=function(){return this._stop()},Jt.prototype._stop=function(r,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,l)}if(!r){var g=this.handlers;g&&g.stop()}return this},Jt.prototype._ease=function(r,l,f){f.animate===!1||f.duration===0?(r(1),l()):(this._easeStart=u.browser.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Jt.prototype._renderFrameCallback=function(){var r=Math.min((u.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Jt.prototype._normalizeBearing=function(r,l){r=u.wrap(r,-180,180);var f=Math.abs(r-l);return Math.abs(r-360-l)<f&&(r-=360),Math.abs(r+360-l)<f&&(r+=360),r},Jt.prototype._normalizeCenter=function(r){var l=this.transform;if(l.renderWorldCopies&&!l.lngRange){var f=r.lng-l.center.lng;r.lng+=180<f?-360:f<-180?360:0}},Jt);function Jt(r,l){wu.call(this),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,u.bindAll(["_renderFrameCallback"],this)}function Da(){u.bindAll(["_updateLogo"],this),u.bindAll(["_updateCompact"],this)}function Bc(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}Fo.prototype.getDefaultPosition=function(){return"bottom-right"},Fo.prototype.onAdd=function(r){var l=this.options&&this.options.compact;return this._map=r,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=k.create("div","mapboxgl-ctrl-attrib-inner",this._container),l&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),l===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Fo.prototype.onRemove=function(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Fo.prototype._updateEditLink=function(){var r=this._editLink;r=r||(this._editLink=this._container.querySelector(".mapbox-improve-map"));var l=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||u.config.ACCESS_TOKEN}];if(r){var f=l.reduce(function(g,x,T){return x.value&&(g+=x.key+"="+x.value+(T<l.length-1?"&":"")),g},"?");r.href=u.config.FEEDBACK_URL+"/"+f+(this._map._hash?this._map._hash.getHashString(!0):""),r.rel="noopener nofollow"}},Fo.prototype._updateData=function(r){!r||r.sourceDataType!=="metadata"&&r.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Fo.prototype._updateAttributions=function(){if(this._map.style){var r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(function(L){return typeof L!="string"?"":L})):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){var l=this._map.style.stylesheet;this.styleOwner=l.owner,this.styleId=l.id}var f=this._map.style.sourceCaches;for(var g in f){var x=f[g];if(x.used){var T=x.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r.sort(function(L,O){return L.length-O.length});var E=(r=r.filter(function(L,O){for(var j=O+1;j<r.length;j++)if(0<=r[j].indexOf(L))return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,r.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Fo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},Da.prototype.onAdd=function(r){this._map=r,this._container=k.create("div","mapboxgl-ctrl");var l=k.create("a","mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://www.mapbox.com/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Da.prototype.onRemove=function(){k.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Da.prototype.getDefaultPosition=function(){return"bottom-left"},Da.prototype._updateLogo=function(r){r&&r.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Da.prototype._logoRequired=function(){if(this._map.style){var r=this._map.style.sourceCaches;for(var l in r)if(r[l].getSource().mapbox_logo)return!0;return!1}},Da.prototype._updateCompact=function(){var r=this._container.children;if(r.length){var l=r[0];this._map.getCanvasContainer().offsetWidth<250?l.classList.add("mapboxgl-compact"):l.classList.remove("mapboxgl-compact")}},Bc.prototype.add=function(r){var l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l},Bc.prototype.remove=function(r){for(var l=this._currentlyRunning,f=0,g=l?this._queue.concat(l):this._queue;f<g.length;f+=1){var x=g[f];if(x.id===r)return void(x.cancelled=!0)}},Bc.prototype.run=function(r){r===void 0&&(r=0);var l=this._currentlyRunning=this._queue;this._queue=[];for(var f=0,g=l;f<g.length;f+=1){var x=g[f];if(!x.cancelled&&(x.callback(r),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Bc.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Nd={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Od=u.window.HTMLImageElement,dh=u.window.HTMLElement,bu=u.window.ImageBitmap,Rd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},fh=function(r){function l(g){var x=this;if((g=u.extend({},Rd,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&60<g.maxPitch)throw new Error("maxPitch must be less than or equal to 60");var T=new _r(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies);if(r.call(this,T,g),this._interactive=g.interactive,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new Bc,this._controls=[],this._mapId=u.uniqueId(),this._locale=u.extend({},Nd,g.locale),this._requestManager=new u.RequestManager(g.transformRequest,g.accessToken),typeof g.container=="string"){if(this._container=u.window.document.getElementById(g.container),!this._container)throw new Error("Container '"+g.container+"' not found.")}else{if(!(g.container instanceof dh))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),u.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return x._update(!1)}),this.on("moveend",function(){return x._update(!1)}),this.on("zoom",function(){return x._update(!0)}),u.window!==void 0&&(u.window.addEventListener("online",this._onWindowOnline,!1),u.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Zn(this,g),this._hash=g.hash&&new ts(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,u.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new Fo({customAttribution:g.customAttribution})),this.addControl(new Da,g.logoPosition),this.on("style.load",function(){x.transform.unmodified&&x.jumpTo(x.style.stylesheet)}),this.on("data",function(E){x._update(E.dataType==="style"),x.fire(new u.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){x.fire(new u.Event(E.dataType+"dataloading",E))})}r&&(l.__proto__=r);var f={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return((l.prototype=Object.create(r&&r.prototype)).constructor=l).prototype._getMapId=function(){return this._mapId},l.prototype.addControl=function(g,x){if(x===void 0&&g.getDefaultPosition&&(x=g.getDefaultPosition()),x===void 0&&(x="top-right"),!g||!g.onAdd)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var T=g.onAdd(this);this._controls.push(g);var E=this._controlPositions[x];return x.indexOf("bottom")!==-1?E.insertBefore(T,E.firstChild):E.appendChild(T),this},l.prototype.removeControl=function(g){if(!g||!g.onRemove)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var x=this._controls.indexOf(g);return-1<x&&this._controls.splice(x,1),g.onRemove(this),this},l.prototype.resize=function(g){var x=this._containerDimensions(),T=x[0],E=x[1];this._resizeCanvas(T,E),this.transform.resize(T,E),this.painter.resize(T,E);var L=!this._moving;return L&&(this.stop(),this.fire(new u.Event("movestart",g)).fire(new u.Event("move",g))),this.fire(new u.Event("resize",g)),L&&this.fire(new u.Event("moveend",g)),this},l.prototype.getBounds=function(){return this.transform.getBounds()},l.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},l.prototype.setMaxBounds=function(g){return this.transform.setMaxBounds(u.LngLatBounds.convert(g)),this._update()},l.prototype.setMinZoom=function(g){if(-2<=(g=g??-2)&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},l.prototype.getMinZoom=function(){return this.transform.minZoom},l.prototype.setMaxZoom=function(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")},l.prototype.getMaxZoom=function(){return this.transform.maxZoom},l.prototype.setMinPitch=function(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(0<=g&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},l.prototype.getMinPitch=function(){return this.transform.minPitch},l.prototype.setMaxPitch=function(g){if(60<(g=g??60))throw new Error("maxPitch must be less than or equal to 60");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")},l.prototype.getMaxPitch=function(){return this.transform.maxPitch},l.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},l.prototype.setRenderWorldCopies=function(g){return this.transform.renderWorldCopies=g,this._update()},l.prototype.project=function(g){return this.transform.locationPoint(u.LngLat.convert(g))},l.prototype.unproject=function(g){return this.transform.pointLocation(u.Point.convert(g))},l.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},l.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},l.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},l.prototype._createDelegatedListener=function(g,x,T){var E,L=this;if(g==="mouseenter"||g==="mouseover"){var O=!1;return{layer:x,listener:T,delegates:{mousemove:function(V){var H=L.getLayer(x)?L.queryRenderedFeatures(V.point,{layers:[x]}):[];H.length?O||(O=!0,T.call(L,new xo(g,L,V.originalEvent,{features:H}))):O=!1},mouseout:function(){O=!1}}}}if(g!=="mouseleave"&&g!=="mouseout")return{layer:x,listener:T,delegates:((E={})[g]=function(V){var H=L.getLayer(x)?L.queryRenderedFeatures(V.point,{layers:[x]}):[];H.length&&(V.features=H,T.call(L,V),delete V.features)},E)};var j=!1;return{layer:x,listener:T,delegates:{mousemove:function(V){(L.getLayer(x)?L.queryRenderedFeatures(V.point,{layers:[x]}):[]).length?j=!0:j&&(j=!1,T.call(L,new xo(g,L,V.originalEvent)))},mouseout:function(V){j&&(j=!1,T.call(L,new xo(g,L,V.originalEvent)))}}}},l.prototype.on=function(g,x,T){if(T===void 0)return r.prototype.on.call(this,g,x);var E=this._createDelegatedListener(g,x,T);for(var L in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(E),E.delegates)this.on(L,E.delegates[L]);return this},l.prototype.once=function(g,x,T){if(T===void 0)return r.prototype.once.call(this,g,x);var E=this._createDelegatedListener(g,x,T);for(var L in E.delegates)this.once(L,E.delegates[L]);return this},l.prototype.off=function(g,x,T){var E=this;return T===void 0?r.prototype.off.call(this,g,x):(this._delegatedListeners&&this._delegatedListeners[g]&&function(L){for(var O=L[g],j=0;j<O.length;j++){var V=O[j];if(V.layer===x&&V.listener===T){for(var H in V.delegates)E.off(H,V.delegates[H]);return O.splice(j,1)}}}(this._delegatedListeners),this)},l.prototype.queryRenderedFeatures=function(g,x){if(!this.style)return[];var T;if(x!==void 0||g===void 0||g instanceof u.Point||Array.isArray(g)||(x=g,g=void 0),x=x||{},(g=g||[[0,0],[this.transform.width,this.transform.height]])instanceof u.Point||typeof g[0]=="number")T=[u.Point.convert(g)];else{var E=u.Point.convert(g[0]),L=u.Point.convert(g[1]);T=[E,new u.Point(L.x,E.y),L,new u.Point(E.x,L.y),E]}return this.style.queryRenderedFeatures(T,x,this.transform)},l.prototype.querySourceFeatures=function(g,x){return this.style.querySourceFeatures(g,x)},l.prototype.setStyle=function(g,x){return(x=u.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},x)).diff!==!1&&x.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,x),this):(this._localIdeographFontFamily=x.localIdeographFontFamily,this._updateStyle(g,x))},l.prototype._getUIString=function(g){var x=this._locale[g];if(x==null)throw new Error("Missing UI string '"+g+"'");return x},l.prototype._updateStyle=function(g,x){return this.style&&(this.style.setEventedParent(null),this.style._remove()),g?(this.style=new lu(this,x||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g)):delete this.style,this},l.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new lu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},l.prototype._diffStyle=function(g,x){var T=this;if(typeof g=="string"){var E=this._requestManager.normalizeStyleURL(g),L=this._requestManager.transformRequest(E,u.ResourceType.Style);u.getJSON(L,function(O,j){O?T.fire(new u.ErrorEvent(O)):j&&T._updateDiff(j,x)})}else typeof g=="object"&&this._updateDiff(g,x)},l.prototype._updateDiff=function(g,x){try{this.style.setState(g)&&this._update(!0)}catch(T){u.warnOnce("Unable to perform style diff: "+(T.message||T.error||T)+".  Rebuilding the style from scratch."),this._updateStyle(g,x)}},l.prototype.getStyle=function(){if(this.style)return this.style.serialize()},l.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():u.warnOnce("There is no style added to the map.")},l.prototype.addSource=function(g,x){return this._lazyInitEmptyStyle(),this.style.addSource(g,x),this._update(!0)},l.prototype.isSourceLoaded=function(g){var x=this.style&&this.style.sourceCaches[g];if(x!==void 0)return x.loaded();this.fire(new u.ErrorEvent(new Error("There is no source with ID '"+g+"'")))},l.prototype.areTilesLoaded=function(){var g=this.style&&this.style.sourceCaches;for(var x in g){var T=g[x]._tiles;for(var E in T){var L=T[E];if(L.state!=="loaded"&&L.state!=="errored")return!1}}return!0},l.prototype.addSourceType=function(g,x,T){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,x,T)},l.prototype.removeSource=function(g){return this.style.removeSource(g),this._update(!0)},l.prototype.getSource=function(g){return this.style.getSource(g)},l.prototype.addImage=function(g,x,T){T===void 0&&(T={});var E=T.pixelRatio;E===void 0&&(E=1);var L=T.sdf;L===void 0&&(L=!1);var O=T.stretchX,j=T.stretchY,V=T.content;if(this._lazyInitEmptyStyle(),x instanceof Od||bu&&x instanceof bu){var H=u.browser.getImageData(x);this.style.addImage(g,{data:new u.RGBAImage({width:H.width,height:H.height},H.data),pixelRatio:E,stretchX:O,stretchY:j,content:V,sdf:L,version:0})}else{if(x.width===void 0||x.height===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var K=x;this.style.addImage(g,{data:new u.RGBAImage({width:x.width,height:x.height},new Uint8Array(x.data)),pixelRatio:E,stretchX:O,stretchY:j,content:V,sdf:L,version:0,userImage:K}),K.onAdd&&K.onAdd(this,g)}},l.prototype.updateImage=function(g,x){var T=this.style.getImage(g);if(!T)return this.fire(new u.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=x instanceof Od||bu&&x instanceof bu?u.browser.getImageData(x):x,L=E.width,O=E.height,j=E.data;return L===void 0||O===void 0?this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):L!==T.data.width||O!==T.data.height?this.fire(new u.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(T.data.replace(j,!(x instanceof Od||bu&&x instanceof bu)),void this.style.updateImage(g,T))},l.prototype.hasImage=function(g){return g?!!this.style.getImage(g):(this.fire(new u.ErrorEvent(new Error("Missing required image id"))),!1)},l.prototype.removeImage=function(g){this.style.removeImage(g)},l.prototype.loadImage=function(g,x){u.getImage(this._requestManager.transformRequest(g,u.ResourceType.Image),x)},l.prototype.listImages=function(){return this.style.listImages()},l.prototype.addLayer=function(g,x){return this._lazyInitEmptyStyle(),this.style.addLayer(g,x),this._update(!0)},l.prototype.moveLayer=function(g,x){return this.style.moveLayer(g,x),this._update(!0)},l.prototype.removeLayer=function(g){return this.style.removeLayer(g),this._update(!0)},l.prototype.getLayer=function(g){return this.style.getLayer(g)},l.prototype.setLayerZoomRange=function(g,x,T){return this.style.setLayerZoomRange(g,x,T),this._update(!0)},l.prototype.setFilter=function(g,x,T){return T===void 0&&(T={}),this.style.setFilter(g,x,T),this._update(!0)},l.prototype.getFilter=function(g){return this.style.getFilter(g)},l.prototype.setPaintProperty=function(g,x,T,E){return E===void 0&&(E={}),this.style.setPaintProperty(g,x,T,E),this._update(!0)},l.prototype.getPaintProperty=function(g,x){return this.style.getPaintProperty(g,x)},l.prototype.setLayoutProperty=function(g,x,T,E){return E===void 0&&(E={}),this.style.setLayoutProperty(g,x,T,E),this._update(!0)},l.prototype.getLayoutProperty=function(g,x){return this.style.getLayoutProperty(g,x)},l.prototype.setLight=function(g,x){return x===void 0&&(x={}),this._lazyInitEmptyStyle(),this.style.setLight(g,x),this._update(!0)},l.prototype.getLight=function(){return this.style.getLight()},l.prototype.setFeatureState=function(g,x){return this.style.setFeatureState(g,x),this._update()},l.prototype.removeFeatureState=function(g,x){return this.style.removeFeatureState(g,x),this._update()},l.prototype.getFeatureState=function(g){return this.style.getFeatureState(g)},l.prototype.getContainer=function(){return this._container},l.prototype.getCanvasContainer=function(){return this._canvasContainer},l.prototype.getCanvas=function(){return this._canvas},l.prototype._containerDimensions=function(){var g=0,x=0;return this._container&&(g=this._container.clientWidth||400,x=this._container.clientHeight||300),[g,x]},l.prototype._detectMissingCSS=function(){u.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&u.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},l.prototype._setupContainer=function(){var g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=k.create("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();var x=this._canvasContainer=k.create("div","mapboxgl-canvas-container",g);this._interactive&&x.classList.add("mapboxgl-interactive"),this._canvas=k.create("canvas","mapboxgl-canvas",x),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var T=this._containerDimensions();this._resizeCanvas(T[0],T[1]);var E=this._controlContainer=k.create("div","mapboxgl-control-container",g),L=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(O){L[O]=k.create("div","mapboxgl-ctrl-"+O,E)})},l.prototype._resizeCanvas=function(g,x){var T=u.browser.devicePixelRatio||1;this._canvas.width=T*g,this._canvas.height=T*x,this._canvas.style.width=g+"px",this._canvas.style.height=x+"px"},l.prototype._setupPainter=function(){var g=u.extend({},A.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),x=this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);x?(this.painter=new Yr(x,this.transform),u.webpSupported.testSupport(x)):this.fire(new u.ErrorEvent(new Error("Failed to initialize WebGL")))},l.prototype._contextLost=function(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.Event("webglcontextlost",{originalEvent:g}))},l.prototype._contextRestored=function(g){this._setupPainter(),this.resize(),this._update(),this.fire(new u.Event("webglcontextrestored",{originalEvent:g}))},l.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},l.prototype._update=function(g){return this.style&&(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint()),this},l.prototype._requestRenderFrame=function(g){return this._update(),this._renderTaskQueue.add(g)},l.prototype._cancelRenderFrame=function(g){this._renderTaskQueue.remove(g)},l.prototype._render=function(g){var x,T=this,E=0,L=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(x=L.createQueryEXT(),L.beginQueryEXT(L.TIME_ELAPSED_EXT,x),E=u.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),!this._removed){var O=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var j=this.transform.zoom,V=u.browser.now();this.style.zoomHistory.update(j,V);var H=new u.EvaluationParameters(j,{now:V,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),K=H.crossFadingFactor();K===1&&K===this._crossFadingFactor||(O=!0,this._crossFadingFactor=K),this.style.update(H)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new u.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new u.Event("load"))),this.style&&(this.style.hasTransitions()||O)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Q=u.browser.now()-E;L.endQueryEXT(L.TIME_ELAPSED_EXT,x),setTimeout(function(){var ue=L.getQueryObjectEXT(x,L.QUERY_RESULT_EXT)/1e6;L.deleteQueryEXT(x),T.fire(new u.Event("gpu-timing-frame",{cpuTime:Q,gpuTime:ue}))},50)}if(this.listens("gpu-timing-layer")){var ee=this.painter.collectGpuTimers();setTimeout(function(){var ue=T.painter.queryGpuTimers(ee);T.fire(new u.Event("gpu-timing-layer",{layerTimes:ue}))},50)}var re=this._sourcesDirty||this._styleDirty||this._placementDirty;return re||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.Event("idle")),!this._loaded||this._fullyLoaded||re||(this._fullyLoaded=!0),this}},l.prototype.remove=function(){this._hash&&this._hash.remove();for(var g=0,x=this._controls;g<x.length;g+=1)x[g].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),u.window!==void 0&&(u.window.removeEventListener("resize",this._onWindowResize,!1),u.window.removeEventListener("online",this._onWindowOnline,!1));var T=this.painter.context.gl.getExtension("WEBGL_lose_context");T&&T.loseContext(),Bd(this._canvasContainer),Bd(this._controlContainer),Bd(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new u.Event("remove"))},l.prototype.triggerRepaint=function(){var g=this;this.style&&!this._frame&&(this._frame=u.browser.frame(function(x){g._frame=null,g._render(x)}))},l.prototype._onWindowOnline=function(){this._update()},l.prototype._onWindowResize=function(g){this._trackResize&&this.resize({originalEvent:g})._update()},f.showTileBoundaries.get=function(){return!!this._showTileBoundaries},f.showTileBoundaries.set=function(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())},f.showPadding.get=function(){return!!this._showPadding},f.showPadding.set=function(g){this._showPadding!==g&&(this._showPadding=g,this._update())},f.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},f.showCollisionBoxes.set=function(g){this._showCollisionBoxes!==g&&((this._showCollisionBoxes=g)?this.style._generateCollisionBoxes():this._update())},f.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},f.showOverdrawInspector.set=function(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())},f.repaint.get=function(){return!!this._repaint},f.repaint.set=function(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())},f.vertices.get=function(){return!!this._vertices},f.vertices.set=function(g){this._vertices=g,this._update()},l.prototype._setCacheLimits=function(g,x){u.setCacheLimits(g,x)},f.version.get=function(){return u.version},Object.defineProperties(l.prototype,f),l}(zd);function Bd(r){r.parentNode&&r.parentNode.removeChild(r)}function ls(r){var l=this;this.options=u.extend({},mh,r),this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(f){return f.preventDefault()}),this.options.showZoom&&(u.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(f){return l._map.zoomIn({},{originalEvent:f})}),k.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(f){return l._map.zoomOut({},{originalEvent:f})}),k.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(u.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(f){l.options.visualizePitch?l._map.resetNorthPitch({},{originalEvent:f}):l._map.resetNorth({},{originalEvent:f})}),this._compassIcon=k.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}var mh={showCompass:!0,showZoom:!0,visualizePitch:!1};ls.prototype._updateZoomButtons=function(){var r=this._map.getZoom();this._zoomInButton.disabled=r===this._map.getMaxZoom(),this._zoomOutButton.disabled=r===this._map.getMinZoom()},ls.prototype._rotateCompassArrow=function(){var r=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=r},ls.prototype.onAdd=function(r){return this._map=r,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jo(this._map,this._compass,this.options.visualizePitch)),this._container},ls.prototype.onRemove=function(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ls.prototype._createButton=function(r,l){var f=k.create("button",r,this._container);return f.type="button",f.addEventListener("click",l),f},ls.prototype._setButtonTitle=function(r,l){var f=this._map._getUIString("NavigationControl."+l);r.title=f,r.setAttribute("aria-label",f)};var jo=function(r,l,f){f===void 0&&(f=!1),this._clickTolerance=10,this.element=l,this.mouseRotate=new gu({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,f&&(this.mousePitch=new ch({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),u.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),k.addEventListener(l,"mousedown",this.mousedown),k.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(l,"touchmove",this.touchmove),k.addEventListener(l,"touchend",this.touchend),k.addEventListener(l,"touchcancel",this.reset)};function Cu(r,l,f){if(r=new u.LngLat(r.lng,r.lat),l){var g=new u.LngLat(r.lng-360,r.lat),x=new u.LngLat(r.lng+360,r.lat),T=f.locationPoint(r).distSqr(l);f.locationPoint(g).distSqr(l)<T?r=g:f.locationPoint(x).distSqr(l)<T&&(r=x)}for(;180<Math.abs(r.lng-f.center.lng);){var E=f.locationPoint(r);if(0<=E.x&&0<=E.y&&E.x<=f.width&&E.y<=f.height)break;r.lng>f.center.lng?r.lng-=360:r.lng+=360}return r}jo.prototype.down=function(r,l){this.mouseRotate.mousedown(r,l),this.mousePitch&&this.mousePitch.mousedown(r,l),k.disableDrag()},jo.prototype.move=function(r,l){var f=this.map,g=this.mouseRotate.mousemoveWindow(r,l);if(g&&g.bearingDelta&&f.setBearing(f.getBearing()+g.bearingDelta),this.mousePitch){var x=this.mousePitch.mousemoveWindow(r,l);x&&x.pitchDelta&&f.setPitch(f.getPitch()+x.pitchDelta)}},jo.prototype.off=function(){var r=this.element;k.removeEventListener(r,"mousedown",this.mousedown),k.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(r,"touchmove",this.touchmove),k.removeEventListener(r,"touchend",this.touchend),k.removeEventListener(r,"touchcancel",this.reset),this.offTemp()},jo.prototype.offTemp=function(){k.enableDrag(),k.removeEventListener(u.window,"mousemove",this.mousemove),k.removeEventListener(u.window,"mouseup",this.mouseup)},jo.prototype.mousedown=function(r){this.down(u.extend({},r,{ctrlKey:!0,preventDefault:function(){return r.preventDefault()}}),k.mousePos(this.element,r)),k.addEventListener(u.window,"mousemove",this.mousemove),k.addEventListener(u.window,"mouseup",this.mouseup)},jo.prototype.mousemove=function(r){this.move(r,k.mousePos(this.element,r))},jo.prototype.mouseup=function(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()},jo.prototype.touchstart=function(r){r.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return r.preventDefault()}},this._startPos))},jo.prototype.touchmove=function(r){r.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,r.targetTouches)[0],this.move({preventDefault:function(){return r.preventDefault()}},this._lastPos))},jo.prototype.touchend=function(r){r.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},jo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Fd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Fc(r,l,f){var g=r.classList;for(var x in Fd)g.remove("mapboxgl-"+f+"-anchor-"+x);g.add("mapboxgl-"+f+"-anchor-"+l)}function Su(r){this.options=u.extend({},hx,r),u.bindAll(["_onMove","setUnit"],this)}var Tu,bn,gh,jd=((gh=u.Evented)&&(Kr.__proto__=gh),((Kr.prototype=Object.create(gh&&gh.prototype)).constructor=Kr).prototype.addTo=function(r){return this.remove(),(this._map=r).getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Kr.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this},Kr.prototype.getLngLat=function(){return this._lngLat},Kr.prototype.setLngLat=function(r){return this._lngLat=u.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Kr.prototype.getElement=function(){return this._element},Kr.prototype.setPopup=function(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){var l=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[l,-1*(24.6+l)],"bottom-right":[-l,-1*(24.6+l)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Kr.prototype._onKeyPress=function(r){var l=r.code,f=r.charCode||r.keyCode;l!=="Space"&&l!=="Enter"&&f!==32&&f!==13||this.togglePopup()},Kr.prototype._onMapClick=function(r){var l=r.originalEvent.target,f=this._element;this._popup&&(l===f||f.contains(l))&&this.togglePopup()},Kr.prototype.getPopup=function(){return this._popup},Kr.prototype.togglePopup=function(){var r=this._popup;return r&&(r.isOpen()?r.remove():r.addTo(this._map)),this},Kr.prototype._update=function(r){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Cu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var l="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?l="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(l="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var f="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?f="rotateX(0deg)":this._pitchAlignment==="map"&&(f="rotateX("+this._map.getPitch()+"deg)"),r&&r.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,Fd[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+f+" "+l)}},Kr.prototype.getOffset=function(){return this._offset},Kr.prototype.setOffset=function(r){return this._offset=u.Point.convert(r),this._update(),this},Kr.prototype._onMove=function(r){this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.Event("dragstart"))),this.fire(new u.Event("drag"))},Kr.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.Event("dragend")),this._state="inactive"},Kr.prototype._addDragHandler=function(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Kr.prototype.setDraggable=function(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Kr.prototype.isDraggable=function(){return this._draggable},Kr.prototype.setRotation=function(r){return this._rotation=r||0,this._update(),this},Kr.prototype.getRotation=function(){return this._rotation},Kr.prototype.setRotationAlignment=function(r){return this._rotationAlignment=r||"auto",this._update(),this},Kr.prototype.getRotationAlignment=function(){return this._rotationAlignment},Kr.prototype.setPitchAlignment=function(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this},Kr.prototype.getPitchAlignment=function(){return this._pitchAlignment},Kr),Ud={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Vd=0,qd=!1,yh=((bn=u.Evented)&&(Pn.__proto__=bn),((Pn.prototype=Object.create(bn&&bn.prototype)).constructor=Pn).prototype.onAdd=function(r){var l;return this._map=r,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),l=this._setupUI,Tu!==void 0?l(Tu):u.window.navigator.permissions!==void 0?u.window.navigator.permissions.query({name:"geolocation"}).then(function(f){l(Tu=f.state!=="denied")}):l(Tu=!!u.window.navigator.geolocation),this._container},Pn.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(u.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Vd=0,qd=!1},Pn.prototype._isOutOfMapMaxBounds=function(r){var l=this._map.getMaxBounds(),f=r.coords;return l&&(f.longitude<l.getWest()||f.longitude>l.getEast()||f.latitude<l.getSouth()||f.latitude>l.getNorth())},Pn.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Pn.prototype._onSuccess=function(r){if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.Event("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new u.Event("geolocate",r)),this._finish()}},Pn.prototype._updateCamera=function(r){var l=new u.LngLat(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,g=this._map.getBearing(),x=u.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(f),x,{geolocateSource:!0})},Pn.prototype._updateMarker=function(r){if(r){var l=new u.LngLat(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Pn.prototype._updateCircleRadius=function(){var r=this._map._container.clientHeight/2,l=this._map.unproject([0,r]),f=this._map.unproject([1,r]),g=l.distanceTo(f),x=Math.ceil(2*this._accuracy/g);this._circleElement.style.width=x+"px",this._circleElement.style.height=x+"px"},Pn.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Pn.prototype._onError=function(r){if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&qd)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new u.Event("error",r)),this._finish()}},Pn.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Pn.prototype._setupUI=function(r){var l=this;if(this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this._geolocateButton=k.create("button","mapboxgl-ctrl-geolocate",this._container),k.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),!(this._geolocateButton.type="button")===r){u.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{var g=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new jd(this._dotElement),this._circleElement=k.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(x){x.geolocateSource||l._watchState!=="ACTIVE_LOCK"||x.originalEvent&&x.originalEvent.type==="resize"||(l._watchState="BACKGROUND",l._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),l._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),l.fire(new u.Event("trackuserlocationend")))})},Pn.prototype.trigger=function(){if(!this._setup)return u.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vd--,qd=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new u.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var r;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),qd=1<++Vd?(r={maximumAge:6e5,timeout:0},!0):(r=this.options.positionOptions,!1),this._geolocationWatchID=u.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,r)}}else u.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Pn.prototype._clearWatch=function(){u.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Pn),hx={maxWidth:100,unit:"metric"};function Pn(r){bn.call(this),this.options=u.extend({},Ud,r),u.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}function Kr(r,l){var f=this;if(gh.call(this),(r instanceof u.window.HTMLElement||l)&&(r=u.extend({element:r},l)),u.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=u.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");var g=k.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","41px"),g.setAttributeNS(null,"width","27px"),g.setAttributeNS(null,"viewBox","0 0 27 41");var x=k.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");var T=k.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");var E=k.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");for(var L=0,O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];L<O.length;L+=1){var j=O[L],V=k.createNS("http://www.w3.org/2000/svg","ellipse");V.setAttributeNS(null,"opacity","0.04"),V.setAttributeNS(null,"cx","10.5"),V.setAttributeNS(null,"cy","5.80029008"),V.setAttributeNS(null,"rx",j.rx),V.setAttributeNS(null,"ry",j.ry),E.appendChild(V)}var H=k.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);var K=k.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(K);var Q=k.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"fill","#000000");var ee=k.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Q.appendChild(ee);var re=k.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),re.setAttributeNS(null,"fill","#FFFFFF");var ue=k.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ae=k.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");var ye=k.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),ue.appendChild(ae),ue.appendChild(ye),T.appendChild(E),T.appendChild(H),T.appendChild(Q),T.appendChild(re),T.appendChild(ue),g.appendChild(T),g.setAttributeNS(null,"height",41*this._scale+"px"),g.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(g),this._offset=u.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(he){he.preventDefault()}),this._element.addEventListener("mousedown",function(he){he.preventDefault()}),this._element.addEventListener("focus",function(){var he=f._map.getContainer();he.scrollTop=0,he.scrollLeft=0}),Fc(this._element,this._anchor,"marker"),this._popup=null}function ig(r,l,f){var g=f&&f.maxWidth||100,x=r._container.clientHeight/2,T=r.unproject([0,x]),E=r.unproject([g,x]),L=T.distanceTo(E);if(f&&f.unit==="imperial"){var O=3.2808*L;5280<O?Tl(l,g,O/5280,r._getUIString("ScaleControl.Miles")):Tl(l,g,O,r._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?Tl(l,g,L/1852,r._getUIString("ScaleControl.NauticalMiles")):1e3<=L?Tl(l,g,L/1e3,r._getUIString("ScaleControl.Kilometers")):Tl(l,g,L,r._getUIString("ScaleControl.Meters"))}function Tl(r,l,f,g){var x,T,E,L,O,j=(x=f,(T=Math.pow(10,(""+Math.floor(x)).length-1))*(E=10<=(E=x/T)?10:5<=E?5:3<=E?3:2<=E?2:1<=E?1:(L=E,O=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10)),Math.round(L*O)/O)));r.style.width=l*(j/f)+"px",r.innerHTML=j+"&nbsp;"+g}function Wi(r){this._fullscreen=!1,r&&r.container&&(r.container instanceof u.window.HTMLElement?this._container=r.container:u.warnOnce("Full screen control 'container' must be a DOM element.")),u.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in u.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in u.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in u.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in u.window.document&&(this._fullscreenchange="MSFullscreenChange")}Su.prototype.getDefaultPosition=function(){return"bottom-left"},Su.prototype._onMove=function(){ig(this._map,this._container,this.options)},Su.prototype.onAdd=function(r){return this._map=r,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",r.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Su.prototype.onRemove=function(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Su.prototype.setUnit=function(r){this.options.unit=r,ig(this._map,this._container,this.options)},Wi.prototype.onAdd=function(r){return this._map=r,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",u.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Wi.prototype.onRemove=function(){k.remove(this._controlContainer),this._map=null,u.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Wi.prototype._checkFullscreenSupport=function(){return!!(u.window.document.fullscreenEnabled||u.window.document.mozFullScreenEnabled||u.window.document.msFullscreenEnabled||u.window.document.webkitFullscreenEnabled)},Wi.prototype._setupUI=function(){var r=this._fullscreenButton=k.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);k.create("span","mapboxgl-ctrl-icon",r).setAttribute("aria-hidden",!0),r.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),u.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Wi.prototype._updateTitle=function(){var r=this._getTitle();this._fullscreenButton.setAttribute("aria-label",r),this._fullscreenButton.title=r},Wi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Wi.prototype._isFullscreen=function(){return this._fullscreen},Wi.prototype._changeIcon=function(){(u.window.document.fullscreenElement||u.window.document.mozFullScreenElement||u.window.document.webkitFullscreenElement||u.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Wi.prototype._onClickFullscreen=function(){this._isFullscreen()?u.window.document.exitFullscreen?u.window.document.exitFullscreen():u.window.document.mozCancelFullScreen?u.window.document.mozCancelFullScreen():u.window.document.msExitFullscreen?u.window.document.msExitFullscreen():u.window.document.webkitCancelFullScreen&&u.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var El,Zd={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Gd=((El=u.Evented)&&($r.__proto__=El),(($r.prototype=Object.create(El&&El.prototype)).constructor=$r).prototype.addTo=function(r){return this._map&&this.remove(),this._map=r,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new u.Event("open")),this},$r.prototype.isOpen=function(){return!!this._map},$r.prototype.remove=function(){return this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.Event("close")),this},$r.prototype.getLngLat=function(){return this._lngLat},$r.prototype.setLngLat=function(r){return this._lngLat=u.LngLat.convert(r),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},$r.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},$r.prototype.getElement=function(){return this._container},$r.prototype.setText=function(r){return this.setDOMContent(u.window.document.createTextNode(r))},$r.prototype.setHTML=function(r){var l,f=u.window.document.createDocumentFragment(),g=u.window.document.createElement("body");for(g.innerHTML=r;l=g.firstChild;)f.appendChild(l);return this.setDOMContent(f)},$r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},$r.prototype.setMaxWidth=function(r){return this.options.maxWidth=r,this._update(),this},$r.prototype.setDOMContent=function(r){return this._createContent(),this._content.appendChild(r),this._update(),this},$r.prototype.addClassName=function(r){this._container&&this._container.classList.add(r)},$r.prototype.removeClassName=function(r){this._container&&this._container.classList.remove(r)},$r.prototype.toggleClassName=function(r){if(this._container)return this._container.classList.toggle(r)},$r.prototype._createContent=function(){this._content&&k.remove(this._content),this._content=k.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=k.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},$r.prototype._onMouseUp=function(r){this._update(r.point)},$r.prototype._onMouseMove=function(r){this._update(r.point)},$r.prototype._onDrag=function(r){this._update(r.point)},$r.prototype._update=function(r){var l=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=k.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=k.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(j){return l._container.classList.add(j)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Cu(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||r)){var f=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat),g=this.options.anchor,x=function j(V){if(V){if(typeof V=="number"){var H=Math.round(Math.sqrt(.5*Math.pow(V,2)));return{center:new u.Point(0,0),top:new u.Point(0,V),"top-left":new u.Point(H,H),"top-right":new u.Point(-H,H),bottom:new u.Point(0,-V),"bottom-left":new u.Point(H,-H),"bottom-right":new u.Point(-H,-H),left:new u.Point(V,0),right:new u.Point(-V,0)}}if(V instanceof u.Point||Array.isArray(V)){var K=u.Point.convert(V);return{center:K,top:K,"top-left":K,"top-right":K,bottom:K,"bottom-left":K,"bottom-right":K,left:K,right:K}}return{center:u.Point.convert(V.center||[0,0]),top:u.Point.convert(V.top||[0,0]),"top-left":u.Point.convert(V["top-left"]||[0,0]),"top-right":u.Point.convert(V["top-right"]||[0,0]),bottom:u.Point.convert(V.bottom||[0,0]),"bottom-left":u.Point.convert(V["bottom-left"]||[0,0]),"bottom-right":u.Point.convert(V["bottom-right"]||[0,0]),left:u.Point.convert(V.left||[0,0]),right:u.Point.convert(V.right||[0,0])}}return j(new u.Point(0,0))}(this.options.offset);if(!g){var T,E=this._container.offsetWidth,L=this._container.offsetHeight;T=f.y+x.bottom.y<L?["top"]:f.y>this._map.transform.height-L?["bottom"]:[],f.x<E/2?T.push("left"):f.x>this._map.transform.width-E/2&&T.push("right"),g=T.length===0?"bottom":T.join("-")}var O=f.add(x[g]).round();k.setTransform(this._container,Fd[g]+" translate("+O.x+"px,"+O.y+"px)"),Fc(this._container,g,"popup")}},$r.prototype._onClose=function(){this.remove()},$r),vh={version:u.version,supported:A,setRTLTextPlugin:u.setRTLTextPlugin,getRTLTextPluginStatus:u.getRTLTextPluginStatus,Map:fh,NavigationControl:ls,GeolocateControl:yh,AttributionControl:Fo,ScaleControl:Su,FullscreenControl:Wi,Popup:Gd,Marker:jd,Style:lu,LngLat:u.LngLat,LngLatBounds:u.LngLatBounds,Point:u.Point,MercatorCoordinate:u.MercatorCoordinate,Evented:u.Evented,config:u.config,prewarm:function(){Ms().acquire(Ka)},clearPrewarmedResources:function(){var r=$a;r&&(r.isPreloaded()&&r.numActive()===1?(r.release(Ka),$a=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return u.config.ACCESS_TOKEN},set accessToken(r){u.config.ACCESS_TOKEN=r},get baseApiUrl(){return u.config.API_URL},set baseApiUrl(r){u.config.API_URL=r},get workerCount(){return Zi.workerCount},set workerCount(r){Zi.workerCount=r},get maxParallelImageRequests(){return u.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(r){u.config.MAX_PARALLEL_IMAGE_REQUESTS=r},clearStorage:function(r){u.clearTileCache(r)},workerUrl:""};function $r(r){El.call(this),this.options=u.extend(Object.create(Zd),r),u.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return vh}),b)}),z=(I.Map,I.setRTLTextPlugin),Z=(I.supported,I.Marker),X="atlas.microsoft.com",oe="atlas.microsoft.com",_e="styles/definitions/2019-10-16.json",Se="e96cb745-c6f5-409c-a775-c4313e468c1d",Ne="https://login.microsoftonline.com/",$e="Authorization",We="Bearer ",Ze="{azMapsDomain}",ct="Map-Agent",Oe="x-ms-client-id",Be="Ms-Am-Request-Origin",Xe="MapControl",Et="https://atlas.microsoft.com/",Ht="Session-Id",Xt=function(t,n){return(Xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,h){a.__proto__=h}||function(a,h){for(var y in h)h.hasOwnProperty(y)&&(a[y]=h[y])})(t,n)};function ze(t,n){function a(){this.constructor=t}Xt(t,n),t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var ot=function(){return(ot=Object.assign||function(t){for(var n,a=1,h=arguments.length;a<h;a++)for(var y in n=arguments[a])Object.prototype.hasOwnProperty.call(n,y)&&(t[y]=n[y]);return t}).apply(this,arguments)};function Zr(t,n,a,h){return new(a=a||Promise)(function(y,b){function u(G){try{k(h.next(G))}catch(W){b(W)}}function A(G){try{k(h.throw(G))}catch(W){b(W)}}function k(G){G.done?y(G.value):new a(function(W){W(G.value)}).then(u,A)}k((h=h.apply(t,n||[])).next())})}function yr(t,n){var a,h,y,b,u={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(k){return function(G){return function(W){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,h&&(y=2&W[0]?h.return:W[0]?h.throw||((y=h.return)&&y.call(h),0):h.next)&&!(y=y.call(h,W[1])).done)return y;switch(h=0,y&&(W=[2&W[0],y.value]),W[0]){case 0:case 1:y=W;break;case 4:return u.label++,{value:W[1],done:!1};case 5:u.label++,h=W[1],W=[0];continue;case 7:W=u.ops.pop(),u.trys.pop();continue;default:if(!(y=0<(y=u.trys).length&&y[y.length-1])&&(W[0]===6||W[0]===2)){u=0;continue}if(W[0]===3&&(!y||W[1]>y[0]&&W[1]<y[3])){u.label=W[1];break}if(W[0]===6&&u.label<y[1]){u.label=y[1],y=W;break}if(y&&u.label<y[2]){u.label=y[2],u.ops.push(W);break}y[2]&&u.ops.pop(),u.trys.pop();continue}W=n.call(t,u)}catch(se){W=[6,se],h=0}finally{a=y=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([k,G])}}}var sr=(_s.prototype.merge=function(){for(var t,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];for(var h=0,y=n;h<y.length;h++){var b=y[h];if(b)for(var u in b)b.hasOwnProperty(u)&&this.hasOwnProperty(u)&&(b[u]!==void 0&&b[u]!=null?this[u]instanceof _s?this[u].merge(b[u]):this[u]=b[u]:(t=t||new(Object.getPrototypeOf(this)).constructor,this[u]=t[u]))}return this},_s);function _s(){}var ms,Lf=(ze(Go,ms=sr),Go);function Go(){var t=ms!==null&&ms.apply(this,arguments)||this;return t.domain=void 0,t.headers={},t.path="",t.protocol="https",t.queryParams={},t.subdomain="",t}var gi=(Ra.prototype.get=function(){return fetch(this.toString(),{method:"GET",mode:"cors",headers:new Headers(this.options.headers)}).then(function(t){if(t.ok)return t.json();throw new Error("HTTP "+t.status+": "+t.statusText)})},Ra.prototype.toString=function(){var t=Object.entries(this.options.queryParams).map(function(h){return h[0]+"="+h[1]}).join("&"),n=[],a=this.options.path||"";return Ra.protoRegEx.test(a)?n.push(a):(this.options.domain&&(Ra.protoRegEx.test(this.options.domain)||(n.push(this.options.protocol+"://"),n.push(this.options.subdomain?this.options.subdomain+".":"")),n.push(this.options.domain)),n.push(this.options.path?"/"+a:"")),n.push(t?"?"+t:""),n.join("")},Ra.protoRegEx=new RegExp(/^(file|http|https|blob:http|blob:https):\/\//i),Ra);function Ra(t){this.options=new Lf().merge(t)}var ar,Vr="2.0.32",Tn=(Ai.getFullVersion=function(){return Vr},Ai.getEndpointVersion=function(){var t=Vr.indexOf(".");return(t=Vr.indexOf(".",t+1))===-1?Vr:Vr.substring(0,t)},Ai);function Ai(){}(ar=d.ControlPosition||(d.ControlPosition={})).TopLeft="top-left",ar.TopRight="top-right",ar.BottomLeft="bottom-left",ar.BottomRight="bottom-right",ar.NonFixed="non-fixed";var ga,Uf=(ze(cp,ga=sr),cp);function cp(){var t=ga!==null&&ga.apply(this,arguments)||this;return t.position=d.ControlPosition.NonFixed,t}var Eo,gs=(ko.prototype.getLuminosity=function(){for(var t=[this.r,this.g,this.b],n=[],a=0;a<t.length;a++){var h=t[a]/255;n[a]=h<=.03928?h/12.92:Math.pow((.055+h)/1.055,2.4)}return .2126*n[0]+.7152*n[1]+.0722*n[2]},ko.prototype.getRBGA=function(t){var n=document.createElement("canvas").getContext("2d");n.globalAlpha=1,n.fillStyle=t,n.fillRect(0,0,1,1);var a=n.getImageData(0,0,1,1).data;return[a[0],a[1],a[2],a[3]]},ko);function ko(t){if(t){var n=void 0;3<=(n=typeof t=="string"?this.getRBGA(t):t).length&&(this.r=n[0],this.g=n[1],this.b=n[2],3<n.length&&(this.a=n[3]))}}(Eo=d.ControlStyle||(d.ControlStyle={})).light="light",Eo.dark="dark",Eo.auto="auto";var ys=(Vf.prototype.onRemove=function(){this._container&&(this._container.remove(),delete this._container),this._map&&(this._map.events.remove("styledata",this._onStyleChange),delete this._map),this._observer&&(this._observer.disconnect(),delete this._observer),delete this._theme},Vf.prototype.buildContainer=function(t,n,a,h){var y=this;return this._map=t,this._container=document.createElement(h||"div"),this._container.classList.add("azure-maps-control-container"),typeof a=="string"&&this._container.setAttribute("aria-label",a),n.toLowerCase()===d.ControlStyle.auto?this._map.styles.initialize().then(function(){y._onStyleChange(),y._map.events.add("styledata",y._onStyleChange)}):this._container.classList.add(n),this._container},Vf.prototype._setTheme=function(t){this._theme!==t&&(this._container.classList.remove(this._theme),this._container.classList.add(t),this._theme=t)},Vf.activateClickDelay=100,Vf);function Vf(){var t=this;this._onStyleChange=function(){if(t._map.getStyle().style.toLowerCase().startsWith("blank"))t._observer||(t._onBackgroundChange(),t._observer=new MutationObserver(t._onBackgroundChange),t._observer.observe(t._map.getMapContainer(),{attributes:!0,attributeFilter:["style"]}));else{t._observer&&(t._observer.disconnect(),delete t._observer);var n=t._map.styles.getTheme(t._map.getStyle());t._setTheme(n)}},this._onBackgroundChange=function(){var n=new gs(t._map.getMapContainer().style.backgroundColor).getLuminosity(),a=isNaN(n)||.5<n?d.ControlStyle.light:d.ControlStyle.dark;t._setTheme(a)}}var Wv,II=(ze(_w,Wv=sr),_w);function _w(){var t=Wv!==null&&Wv.apply(this,arguments)||this;return t.rotationDegreesDelta=15,t.style=d.ControlStyle.light,t}var xw,ww=(ze(Mo,xw=ys),Mo.prototype.onAdd=function(t,n){var a=this,h=this.buildContainer(t,this.options.style,"Rotation Control"),y=this.constructRotationButton(t),b=this.constructRotationGrid(t,n);return h.addEventListener("mouseover",function(u){a.lastActiveTime=a.lastActiveTime||u.timeStamp,a.hasMouse=!0,h.classList.add("in-use"),b.classList.remove("hidden-accessible-element")}),h.addEventListener("focusin",function(u){a.lastActiveTime=a.lastActiveTime||u.timeStamp,a.hasFocus=!0,h.classList.add("in-use"),b.classList.remove("hidden-accessible-element")}),h.addEventListener("mouseleave",function(){a.hasMouse=!1,a.hasFocus||(delete a.lastActiveTime,h.classList.remove("in-use"),b.classList.add("hidden-accessible-element"))}),h.addEventListener("focusout",function(u){u.relatedTarget instanceof Node&&h.contains(u.relatedTarget)||(a.hasFocus=!1,a.hasMouse||(delete a.lastActiveTime,h.classList.remove("in-use"),b.classList.add("hidden-accessible-element")))}),n&&Mo.InvertOrderPositions.includes(n.position)?(h.appendChild(b),h.appendChild(y)):(h.appendChild(y),h.appendChild(b)),h},Mo.prototype.constructRotationGrid=function(t,n){var a=document.createElement("div");a.classList.add("sub-container"),a.classList.add("hidden-accessible-element");var h=this.constructRightRotationButton(t),y=this.constructLeftRotationButton(t);return n&&Mo.InvertOrderPositions.includes(n.position)?(a.appendChild(h),a.appendChild(y)):(a.appendChild(y),a.appendChild(h)),a},Mo.prototype.constructRotationButton=function(t){var n=this,a=document.createElement("button");a.classList.add("azure-maps-control-button"),a.classList.add("rotation"),a.setAttribute("title","Reset to Default Rotation"),a.setAttribute("alt","Reset to Default Rotation"),a.setAttribute("type","button");var h=document.createElement("div");return a.appendChild(h),a.addEventListener("click",function(y){y.timeStamp-n.lastActiveTime>ys.activateClickDelay&&t.setCamera({bearing:Mo.DefaultRotation},!0)}),t.events.add("rotate",function(y){h.style.transform="rotate("+-y.map.getCamera().bearing+"deg)"}),a},Mo.prototype.constructRightRotationButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("rotation-right"),a.setAttribute("title","Rotate Right"),a.setAttribute("alt","Rotate Right"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({bearing:t.getCamera().bearing+n.options.rotationDegreesDelta,duration:Mo.RotationDuration,type:"ease"},!0)}),a},Mo.prototype.constructLeftRotationButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("rotation-left"),a.setAttribute("title","Rotate Left"),a.setAttribute("alt","Rotate Left"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({bearing:t.getCamera().bearing-n.options.rotationDegreesDelta,duration:Mo.RotationDuration,type:"ease"},!0)}),a},Mo.DefaultRotation=0,Mo.RotationDuration=100,Mo.InvertOrderPositions=[d.ControlPosition.BottomRight,d.ControlPosition.TopRight],Mo);function Mo(t){var n=xw.call(this)||this;return n.hasMouse=!1,n.hasFocus=!1,n.options=new II().merge(t),n}var Yv,kI=(ze(bw,Yv=sr),bw);function bw(){var t=Yv!==null&&Yv.apply(this,arguments)||this;return t.pitchDegreesDelta=10,t.style=d.ControlStyle.light,t}var Cw,MI=(ze(Ao,Cw=ys),Ao.prototype.onAdd=function(t,n){var a=this,h=this.buildContainer(t,this.options.style,"Pitch Control"),y=this.constructPitchButton(t),b=this.constructPitchGrid(t,n);return h.addEventListener("mouseover",function(u){a.lastActiveTime=a.lastActiveTime||u.timeStamp,a.hasMouse=!0,h.classList.add("in-use"),b.classList.remove("hidden-accessible-element")}),h.addEventListener("focusin",function(u){a.lastActiveTime=a.lastActiveTime||u.timeStamp,a.hasFocus=!0,h.classList.add("in-use"),b.classList.remove("hidden-accessible-element")}),h.addEventListener("mouseleave",function(){a.hasMouse=!1,a.hasFocus||(delete a.lastActiveTime,h.classList.remove("in-use"),b.classList.add("hidden-accessible-element"))}),h.addEventListener("focusout",function(u){u.relatedTarget instanceof Node&&h.contains(u.relatedTarget)||(a.hasFocus=!1,a.hasMouse||(delete a.lastActiveTime,h.classList.remove("in-use"),b.classList.add("hidden-accessible-element")))}),n&&Ao.INVERT_ORDER_POSITIONS.includes(n.position)?(h.appendChild(b),h.appendChild(y)):(h.appendChild(y),h.appendChild(b)),h},Ao.prototype.constructPitchGrid=function(t,n){var a=document.createElement("div");a.classList.add("sub-container"),a.classList.add("hidden-accessible-element");var h=this.constructPitchIncrementButton(t),y=this.constructPitchDecrementButton(t);return n&&Ao.INVERT_ORDER_POSITIONS.includes(n.position)?(a.appendChild(y),a.appendChild(h)):(a.appendChild(h),a.appendChild(y)),a},Ao.prototype.constructPitchButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("pitch"),a.setAttribute("title","Reset to Default Pitch"),a.setAttribute("alt","Reset to Default Pitch"),a.setAttribute("type","button"),a.addEventListener("click",function(){event.timeStamp-n.lastActiveTime>ys.activateClickDelay&&t.setCamera({pitch:Ao.DEFAULT_PITCH},!0)}),a},Ao.prototype.constructPitchDecrementButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("pitch-down"),a.setAttribute("title","Decrease Pitch"),a.setAttribute("alt","Decrease Pitch"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({pitch:t.getCamera().pitch-n.options.pitchDegreesDelta,duration:Ao.PITCH_DURATION_MS,type:"ease"},!0)}),a},Ao.prototype.constructPitchIncrementButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("pitch-up"),a.setAttribute("title","Increase Pitch"),a.setAttribute("alt","Increase Pitch"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({pitch:t.getCamera().pitch+n.options.pitchDegreesDelta,duration:Ao.PITCH_DURATION_MS,type:"ease"},!0)}),a},Ao.PITCH_DURATION_MS=100,Ao.DEFAULT_PITCH=0,Ao.INVERT_ORDER_POSITIONS=[d.ControlPosition.BottomRight,d.ControlPosition.TopRight],Ao);function Ao(t){var n=Cw.call(this)||this;return n.hasMouse=!1,n.hasFocus=!1,n.options=new kI().merge(t),n}function AI(){this.__data__=[],this.size=0}var qf=function(t,n){return t===n||t!=t&&n!=n},ny=function(t,n){for(var a=t.length;a--;)if(qf(t[a][0],n))return a;return-1},LI=Array.prototype.splice;function PI(t){var n=this.__data__,a=ny(n,t);return!(a<0||(a==n.length-1?n.pop():LI.call(n,a,1),--this.size,0))}function DI(t){var n=this.__data__,a=ny(n,t);return a<0?void 0:n[a][1]}function zI(t){return-1<ny(this.__data__,t)}function NI(t,n){var a=this.__data__,h=ny(a,t);return h<0?(++this.size,a.push([t,n])):a[h][1]=n,this}function Kh(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var h=t[n];this.set(h[0],h[1])}}Kh.prototype.clear=AI,Kh.prototype.delete=PI,Kh.prototype.get=DI,Kh.prototype.has=zI,Kh.prototype.set=NI;var iy=Kh;function OI(){this.__data__=new iy,this.size=0}function RI(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}function BI(t){return this.__data__.get(t)}function FI(t){return this.__data__.has(t)}var Sw,nT=typeof _=="object"&&_&&_.Object===Object&&_,Pf=typeof self=="object"&&self&&self.Object===Object&&self,Rl=nT||Pf||Function("return this")(),Zf=Rl.Symbol,iT=Object.prototype,jI=iT.hasOwnProperty,Kv=iT.toString,$v=Zf?Zf.toStringTag:void 0,UI=function(t){var n=jI.call(t,$v),a=t[$v];try{var h=!(t[$v]=void 0)}catch{}var y=Kv.call(t);return h&&(n?t[$v]=a:delete t[$v]),y},VI=Object.prototype.toString,oT=function(t){return VI.call(t)},oy=Zf?Zf.toStringTag:void 0,pp=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":(oy&&oy in Object(t)?UI:oT)(t)},Gf=function(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")},Xv=function(t){if(!Gf(t))return!1;var n=pp(t);return n=="[object Function]"||n=="[object GeneratorFunction]"||n=="[object AsyncFunction]"||n=="[object Proxy]"},Jv=Rl["__core-js_shared__"],Tw=(Sw=/[^.]+$/.exec(Jv&&Jv.keys&&Jv.keys.IE_PROTO||""))?"Symbol(src)_1."+Sw:"",qI=function(t){return!!Tw&&Tw in t},ZI=Function.prototype.toString,hp=function(t){if(t!=null){try{return ZI.call(t)}catch{}try{return t+""}catch{}}return""},GI=/^\[object .+?Constructor\]$/,HI=Function.prototype,WI=Object.prototype,YI=HI.toString,KI=WI.hasOwnProperty,$I=RegExp("^"+YI.call(KI).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),XI=function(t){return!(!Gf(t)||qI(t))&&(Xv(t)?$I:GI).test(hp(t))},JI=function(t,n){return t==null?void 0:t[n]},dp=function(t,n){var a=JI(t,n);return XI(a)?a:void 0},Hf=dp(Rl,"Map"),Wf=dp(Object,"create");function QI(){this.__data__=Wf?Wf(null):{},this.size=0}function ek(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var tk=Object.prototype.hasOwnProperty;function rk(t){var n=this.__data__;if(Wf){var a=n[t];return a==="__lodash_hash_undefined__"?void 0:a}return tk.call(n,t)?n[t]:void 0}var nk=Object.prototype.hasOwnProperty;function ik(t){var n=this.__data__;return Wf?n[t]!==void 0:nk.call(n,t)}function ok(t,n){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Wf&&n===void 0?"__lodash_hash_undefined__":n,this}function $h(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var h=t[n];this.set(h[0],h[1])}}$h.prototype.clear=QI,$h.prototype.delete=ek,$h.prototype.get=rk,$h.prototype.has=ik,$h.prototype.set=ok;var Ew=$h,ak=function(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null},ay=function(t,n){var a=t.__data__;return ak(n)?a[typeof n=="string"?"string":"hash"]:a.map};function sk(t){var n=ay(this,t).delete(t);return this.size-=n?1:0,n}function lk(t){return ay(this,t).get(t)}function uk(t){return ay(this,t).has(t)}function ck(t,n){var a=ay(this,t),h=a.size;return a.set(t,n),this.size+=a.size==h?0:1,this}function Xh(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var h=t[n];this.set(h[0],h[1])}}Xh.prototype.clear=function(){this.size=0,this.__data__={hash:new Ew,map:new(Hf||iy),string:new Ew}},Xh.prototype.delete=sk,Xh.prototype.get=lk,Xh.prototype.has=uk,Xh.prototype.set=ck;var Iw=Xh;function pk(t,n){var a=this.__data__;if(a instanceof iy){var h=a.__data__;if(!Hf||h.length<199)return h.push([t,n]),this.size=++a.size,this;a=this.__data__=new Iw(h)}return a.set(t,n),this.size=a.size,this}function Jh(t){var n=this.__data__=new iy(t);this.size=n.size}Jh.prototype.clear=OI,Jh.prototype.delete=RI,Jh.prototype.get=BI,Jh.prototype.has=FI,Jh.prototype.set=pk;var Yf=Jh,hk=function(t,n){for(var a=-1,h=t==null?0:t.length;++a<h&&n(t[a],a,t)!==!1;);return t},sy=function(){try{var t=dp(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Qv=function(t,n,a){n=="__proto__"&&sy?sy(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a},dk=Object.prototype.hasOwnProperty,kw=function(t,n,a){var h=t[n];dk.call(t,n)&&qf(h,a)&&(a!==void 0||n in t)||Qv(t,n,a)},Kf=function(t,n,a,h){var y=!a;a=a||{};for(var b=-1,u=n.length;++b<u;){var A=n[b],k=h?h(a[A],t[A],A,a,t):void 0;k===void 0&&(k=t[A]),(y?Qv:kw)(a,A,k)}return a},fk=function(t,n){for(var a=-1,h=Array(t);++a<t;)h[a]=n(a);return h},$s=function(t){return t!=null&&typeof t=="object"},Mw=function(t){return $s(t)&&pp(t)=="[object Arguments]"},Aw=Object.prototype,mk=Aw.hasOwnProperty,gk=Aw.propertyIsEnumerable,e1=Mw(function(){return arguments}())?Mw:function(t){return $s(t)&&mk.call(t,"callee")&&!gk.call(t,"callee")},fp=Array.isArray;function yk(){return!1}var $f=C(function(t,n){var a=n&&!n.nodeType&&n,h=a&&t&&!t.nodeType&&t,y=h&&h.exports===a?Rl.Buffer:void 0,b=(y?y.isBuffer:void 0)||yk;t.exports=b}),vk=/^(?:0|[1-9]\d*)$/,Lw=function(t,n){var a=typeof t;return!!(n=n??9007199254740991)&&(a=="number"||a!="symbol"&&vk.test(t))&&-1<t&&t%1==0&&t<n},Pw=function(t){return typeof t=="number"&&-1<t&&t%1==0&&t<=9007199254740991},kn={};function _k(t){return $s(t)&&Pw(t.length)&&!!kn[pp(t)]}kn["[object Float32Array]"]=kn["[object Float64Array]"]=kn["[object Int8Array]"]=kn["[object Int16Array]"]=kn["[object Int32Array]"]=kn["[object Uint8Array]"]=kn["[object Uint8ClampedArray]"]=kn["[object Uint16Array]"]=kn["[object Uint32Array]"]=!0,kn["[object Arguments]"]=kn["[object Array]"]=kn["[object ArrayBuffer]"]=kn["[object Boolean]"]=kn["[object DataView]"]=kn["[object Date]"]=kn["[object Error]"]=kn["[object Function]"]=kn["[object Map]"]=kn["[object Number]"]=kn["[object Object]"]=kn["[object RegExp]"]=kn["[object Set]"]=kn["[object String]"]=kn["[object WeakMap]"]=!1;var t1=function(t){return function(n){return t(n)}},Qh=C(function(t,n){var a=n&&!n.nodeType&&n,h=a&&t&&!t.nodeType&&t,y=h&&h.exports===a&&nT.process,b=function(){try{var u=h&&h.require&&h.require("util").types;return u||y&&y.binding&&y.binding("util")}catch{}}();t.exports=b}),Dw=Qh&&Qh.isTypedArray,r1=Dw?t1(Dw):_k,xk=Object.prototype.hasOwnProperty,zw=function(t,n){var a=fp(t),h=!a&&e1(t),y=!a&&!h&&$f(t),b=!a&&!h&&!y&&r1(t),u=a||h||y||b,A=u?fk(t.length,String):[],k=A.length;for(var G in t)!n&&!xk.call(t,G)||u&&(G=="length"||y&&(G=="offset"||G=="parent")||b&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||Lw(G,k))||A.push(G);return A},wk=Object.prototype,n1=function(t){var n=t&&t.constructor;return t===(typeof n=="function"&&n.prototype||wk)},Nw=function(t,n){return function(a){return t(n(a))}},bk=Nw(Object.keys,Object),Ck=Object.prototype.hasOwnProperty,Sk=function(t){if(!n1(t))return bk(t);var n=[];for(var a in Object(t))Ck.call(t,a)&&a!="constructor"&&n.push(a);return n},ly=function(t){return t!=null&&Pw(t.length)&&!Xv(t)},i1=function(t){return(ly(t)?zw:Sk)(t)},Tk=function(t,n){return t&&Kf(n,i1(n),t)},Ek=function(t){var n=[];if(t!=null)for(var a in Object(t))n.push(a);return n},Ik=Object.prototype.hasOwnProperty,kk=function(t){if(!Gf(t))return Ek(t);var n=n1(t),a=[];for(var h in t)(h!="constructor"||!n&&Ik.call(t,h))&&a.push(h);return a},uy=function(t){return ly(t)?zw(t,!0):kk(t)},Mk=function(t,n){return t&&Kf(n,uy(n),t)},Ow=C(function(t,n){var a=n&&!n.nodeType&&n,h=a&&t&&!t.nodeType&&t,y=h&&h.exports===a?Rl.Buffer:void 0,b=y?y.allocUnsafe:void 0;t.exports=function(u,A){if(A)return u.slice();var k=u.length,G=b?b(k):new u.constructor(k);return u.copy(G),G}}),Rw=function(t,n){var a=-1,h=t.length;for(n=n||Array(h);++a<h;)n[a]=t[a];return n},Ak=function(t,n){for(var a=-1,h=t==null?0:t.length,y=0,b=[];++a<h;){var u=t[a];n(u,a,t)&&(b[y++]=u)}return b};function Bw(){return[]}var Lk=Object.prototype.propertyIsEnumerable,Fw=Object.getOwnPropertySymbols,o1=Fw?function(t){return t==null?[]:(t=Object(t),Ak(Fw(t),function(n){return Lk.call(t,n)}))}:Bw,Pk=function(t,n){return Kf(t,o1(t),n)},jw=function(t,n){for(var a=-1,h=n.length,y=t.length;++a<h;)t[y+a]=n[a];return t},a1=Nw(Object.getPrototypeOf,Object),Uw=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)jw(n,o1(t)),t=a1(t);return n}:Bw,Dk=function(t,n){return Kf(t,Uw(t),n)},Vw=function(t,n,a){var h=n(t);return fp(t)?h:jw(h,a(t))},s1=function(t){return Vw(t,i1,o1)},zk=function(t){return Vw(t,uy,Uw)},l1=dp(Rl,"DataView"),u1=dp(Rl,"Promise"),c1=dp(Rl,"Set"),p1=dp(Rl,"WeakMap"),qw="[object Map]",Zw="[object Promise]",Gw="[object Set]",Hw="[object WeakMap]",Ww="[object DataView]",Nk=hp(l1),Ok=hp(Hf),Rk=hp(u1),Bk=hp(c1),Fk=hp(p1),mp=pp;(l1&&mp(new l1(new ArrayBuffer(1)))!=Ww||Hf&&mp(new Hf)!=qw||u1&&mp(u1.resolve())!=Zw||c1&&mp(new c1)!=Gw||p1&&mp(new p1)!=Hw)&&(mp=function(t){var n=pp(t),a=n=="[object Object]"?t.constructor:void 0,h=a?hp(a):"";if(h)switch(h){case Nk:return Ww;case Ok:return qw;case Rk:return Zw;case Bk:return Gw;case Fk:return Hw}return n});var Xf=mp,jk=Object.prototype.hasOwnProperty,Uk=function(t){var n=t.length,a=new t.constructor(n);return n&&typeof t[0]=="string"&&jk.call(t,"index")&&(a.index=t.index,a.input=t.input),a},cy=Rl.Uint8Array,h1=function(t){var n=new t.constructor(t.byteLength);return new cy(n).set(new cy(t)),n},Vk=function(t,n){var a=n?h1(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)},qk=/\w*$/,Zk=function(t){var n=new t.constructor(t.source,qk.exec(t));return n.lastIndex=t.lastIndex,n},Yw=Zf?Zf.prototype:void 0,Kw=Yw?Yw.valueOf:void 0,Gk=function(t){return Kw?Object(Kw.call(t)):{}},$w=function(t,n){var a=n?h1(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)},Hk=function(t,n,a){var h=t.constructor;switch(n){case"[object ArrayBuffer]":return h1(t);case"[object Boolean]":case"[object Date]":return new h(+t);case"[object DataView]":return Vk(t,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return $w(t,a);case"[object Map]":return new h;case"[object Number]":case"[object String]":return new h(t);case"[object RegExp]":return Zk(t);case"[object Set]":return new h;case"[object Symbol]":return Gk(t)}},Xw=Object.create;function d1(){}var Wk=function(t){if(!Gf(t))return{};if(Xw)return Xw(t);d1.prototype=t;var n=new d1;return d1.prototype=void 0,n},Jw=function(t){return typeof t.constructor!="function"||n1(t)?{}:Wk(a1(t))};function Yk(t){return $s(t)&&Xf(t)=="[object Map]"}var Qw=Qh&&Qh.isMap,Kk=Qw?t1(Qw):Yk;function $k(t){return $s(t)&&Xf(t)=="[object Set]"}var eb=Qh&&Qh.isSet,Xk=eb?t1(eb):$k,Jk=1,Qk=2,eM=4,tb="[object Arguments]",rb="[object Function]",tM="[object GeneratorFunction]",nb="[object Object]",hn={};hn[tb]=hn["[object Array]"]=hn["[object ArrayBuffer]"]=hn["[object DataView]"]=hn["[object Boolean]"]=hn["[object Date]"]=hn["[object Float32Array]"]=hn["[object Float64Array]"]=hn["[object Int8Array]"]=hn["[object Int16Array]"]=hn["[object Int32Array]"]=hn["[object Map]"]=hn["[object Number]"]=hn[nb]=hn["[object RegExp]"]=hn["[object Set]"]=hn["[object String]"]=hn["[object Symbol]"]=hn["[object Uint8Array]"]=hn["[object Uint8ClampedArray]"]=hn["[object Uint16Array]"]=hn["[object Uint32Array]"]=!0,hn["[object Error]"]=hn[rb]=hn["[object WeakMap]"]=!1;var S2,T2=function t(n,a,h,y,b,u){var A,k=a&Jk,G=a&Qk,W=a&eM;if(h&&(A=b?h(n,y,b,u):h(n)),A!==void 0)return A;if(!Gf(n))return n;var se=fp(n);if(se){if(A=Uk(n),!k)return Rw(n,A)}else{var ne=Xf(n),Ee=ne==rb||ne==tM;if($f(n))return Ow(n,k);if(ne==nb||ne==tb||Ee&&!b){if(A=G||Ee?{}:Jw(n),!k)return G?Dk(n,Mk(A,n)):Pk(n,Tk(A,n))}else{if(!hn[ne])return b?n:{};A=Hk(n,ne,k)}}var Ge=(u=u||new Yf).get(n);if(Ge)return Ge;u.set(n,A),Xk(n)?n.forEach(function(nt){A.add(t(nt,a,h,nt,n,u))}):Kk(n)&&n.forEach(function(nt,qt){A.set(qt,t(nt,a,h,qt,n,u))});var pt=W?G?zk:s1:G?keysIn:i1,Wt=se?void 0:pt(n);return hk(Wt||n,function(nt,qt){Wt&&(nt=n[qt=nt]),kw(A,qt,t(nt,a,h,qt,n,u))}),A},vi=function(t){return T2(t,5)},Ua=Map,rM=(ze(ib,S2=sr),ib);function ib(){var t=S2!==null&&S2.apply(this,arguments)||this;return t.layout="icons",t.mapStyles=["road","grayscale_light","grayscale_dark","night","road_shaded_relief"],t.style=d.ControlStyle.light,t}var f1,nM=(ze($n,f1=ys),$n.prototype.onAdd=function(t,n){var a=this;this.map=t;var h=this.buildContainer(t,this.options.style,"Map Style Control"),y=this.buildStyleOpsGrid(h),b=this.buildCurrStyleBtn(h,y);return h.addEventListener("mouseover",function(){a.hasMouse=!0,h.classList.add($n.Css.inUse),y.classList.remove("hidden-accessible-element")}),h.addEventListener("focusin",function(){a.hasFocus=!0,h.classList.add($n.Css.inUse),y.classList.remove("hidden-accessible-element")}),h.addEventListener("mouseleave",function(){a.hasMouse=!1,a.hasFocus||(h.classList.remove($n.Css.inUse),y.classList.add("hidden-accessible-element"))}),h.addEventListener("focusout",function(u){u.relatedTarget instanceof Node&&h.contains(u.relatedTarget)||(a.hasFocus=!1,a.hasMouse||(h.classList.remove($n.Css.inUse),y.classList.add("hidden-accessible-element")))}),n&&$n.InvertOrderPositions.includes(n.position)?(h.appendChild(y),h.appendChild(b)):(h.appendChild(b),h.appendChild(y)),h},$n.prototype.onRemove=function(){f1.prototype.onRemove.call(this),this.map.events.remove("styledata",this.onStyleChange)},$n.prototype.buildSelectStyleBtn=function(t,n){var a=this,h=document.createElement("button"),y=this.mapToFriendlyStyleName(t);h.setAttribute("title",y),h.setAttribute("alt",y),h.setAttribute("type","button");var b=new Image;return b.src=n,b.alt=y,h.appendChild(b),this.options.layout==="icons"?h.classList.add($n.Css.button):h.appendChild(document.createTextNode(y)),h.addEventListener("click",function(){a.map.setStyle({style:t})}),h},$n.prototype.buildCurrStyleBtn=function(t,n){var a=document.createElement("button");a.classList.add($n.Css.button),a.classList.add($n.Css.currentStyle),a.setAttribute("title","Select Style"),a.setAttribute("alt","Select Style"),a.setAttribute("type","button"),this.currStyleImage=new Image,a.appendChild(this.currStyleImage);var h=document.createElement("div");return h.classList.add("icon"),a.appendChild(h),a},$n.prototype.buildStyleOpsGrid=function(t){var n=this,a=document.createElement("div");return a.classList.add($n.Css.styleOptions),a.classList.add(this.options.layout),a.setAttribute("aria-label","Style Options"),a.classList.add("hidden-accessible-element"),this.map.styles.initialize().then(function(){for(var h=n.map.styles.getDef(),y=n.map.getStyle().style,b=0,u=h.styles;b<u.length;b++){var A=u[b],k=new gi({domain:h.domain,path:A.iconPath}).toString();n.styleIcons.set(A.name,k),A.name===y&&(n.currStyleImage.src=k,n.currStyleImage.alt=n.mapToFriendlyStyleName(A.name))}n.options.mapStyles==="all"?n.styleIcons.forEach(function(G,W){var se=n.buildSelectStyleBtn(W,G);a.appendChild(se)}):n.options.mapStyles.filter(function(G){return n.styleIcons.has(G)}).forEach(function(G){var W=n.styleIcons.get(G),se=n.buildSelectStyleBtn(G,W);a.appendChild(se)}),n.map.events.add("styledata",n.onStyleChange)}),a},$n.prototype.mapToFriendlyStyleName=function(t){return $n.StyleNamesMap[t]?$n.StyleNamesMap[t]:t},$n.InvertOrderPositions=[d.ControlPosition.TopRight,d.ControlPosition.BottomRight],$n.Css={button:"azure-maps-control-button",currentStyle:"curr-style",inUse:"in-use",styleOptions:"style-options"},$n.StyleNamesMap={road:"Road",satellite:"Satellite",satellite_road_labels:"Hybrid",grayscale_dark:"Grayscale (Dark)",grayscale_light:"Grayscale (Light)",night:"Night",road_shaded_relief:"Terra",blank:"Blank",blank_accessible:"Blank (Accessible)",high_contrast_dark:"High contrast"},$n);function $n(t){var n=f1.call(this)||this;return n.hasMouse=!1,n.hasFocus=!1,n.styleIcons=new Ua,n.onStyleChange=function(){var a=n.map.getStyle().style;n.styleIcons.has(a)&&(n.currStyleImage.src=n.styleIcons.get(a),n.currStyleImage.alt=n.mapToFriendlyStyleName(a))},n.options=new rM().merge(vi(t)),n}var m1,iM=(ze(ob,m1=sr),ob);function ob(){var t=m1!==null&&m1.apply(this,arguments)||this;return t.flow="relative",t.incidents=!0,t.isActive=!1,t.style=d.ControlStyle.light,t}var ab,oM=(ze(Jf,ab=ys),Jf.prototype.onAdd=function(t){this.container=this.buildContainer(t,this.options.style,"Traffic Control"),this.container.style.flexDirection="column";var n=this.constructTrafficButton(t);return this.container.appendChild(n),this.container},Jf.prototype.getOptions=function(){return vi(this.options)},Jf.prototype.constructTrafficButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("traffic"),a.setAttribute("title","toggle traffic display"),a.setAttribute("alt","toggle traffic display"),a.setAttribute("type","button"),a.addEventListener("click",function(){var h=t.getTraffic();n.options.isActive=!(h.flow!=="none"||h.incidents),n.options.isActive?(t.setTraffic({flow:n.options.flow,incidents:n.options.incidents}),n.container.classList.add("in-use")):(t.setTraffic({flow:"none",incidents:!1}),n.container.classList.remove("in-use"))}),t.events.add("ready",function(){n.options.isActive&&a.dispatchEvent(new Event("click"))}),a},Jf);function Jf(t){var n=ab.call(this)||this;return n.hasMouse=!1,n.hasFocus=!1,n.options=new iM().merge(t),n}var sb,aM=(ze(py,sb=ys),py.prototype.onAdd=function(t){var n=this.buildContainer(t,d.ControlStyle.auto,"Traffic Legend"),a=this.buildTrafficLegendDiv(t);return n.appendChild(a),n},py.prototype.buildTrafficLegendDiv=function(t){var n=document.createElement("div");n.classList.add("traffic-legend","hidden"),n.setAttribute("title","Traffic Legend"),n.setAttribute("alt","Traffic Legend");var a=document.createElement("table"),h=document.createElement("tr"),y=document.createElement("td");y.setAttribute("title","Traffic"),y.setAttribute("alt","Traffic"),y.appendChild(document.createTextNode("Traffic")),y.classList.add("traffic-legend-title"),y.colSpan=6,h.appendChild(y),a.appendChild(h);for(var b=document.createElement("tr"),u=0,A=this.table;u<A.length;u++){var k=A[u],G=document.createElement("td");if(k==="Fast"||k==="Slow")G.setAttribute("title",k),G.setAttribute("alt",k),G.appendChild(document.createTextNode(k)),G.classList.add("traffic-legend-text");else{G.classList.add("traffic-legend-colors");for(var W=0,se=k;W<se.length;W++){var ne=se[W],Ee=document.createElement("div");Ee.classList.add(ne),G.appendChild(Ee)}}b.appendChild(G)}return a.appendChild(b),n.appendChild(a),t.events.add("sourceadded",function(Ge){Ge.getId()==="vectorTilesTraffic"&&n.classList.remove("hidden")}),t.events.add("sourceremoved",function(Ge){Ge.getId()==="vectorTilesTraffic"&&n.classList.add("hidden")}),n},py);function py(){var t=sb.call(this)||this;return t.table=["Fast",["green","yellow","red","dark-red"],"Slow"],t}var g1,sM=(ze(lb,g1=sr),lb);function lb(){var t=g1!==null&&g1.apply(this,arguments)||this;return t.zoomDelta=1,t.style=d.ControlStyle.light,t}var ub,lM=(ze(Zu,ub=ys),Zu.prototype.onAdd=function(t){var n=this.buildContainer(t,this.options.style,"Zoom Control");n.style.flexDirection="column";var a=this.constructZoomInButton(t),h=this.constructZoomOutButton(t);return n.appendChild(a),n.appendChild(h),n},Zu.prototype.constructZoomInButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("zoom-in"),a.setAttribute("title","Zoom In"),a.setAttribute("alt","Zoom In"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({zoom:t.getCamera().zoom+n.options.zoomDelta,duration:Zu.ZOOM_DURATION_MS,type:"ease"},!0)}),a},Zu.prototype.constructZoomOutButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("zoom-out"),a.setAttribute("title","Zoom Out"),a.setAttribute("alt","Zoom Out"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({zoom:t.getCamera().zoom-n.options.zoomDelta,duration:Zu.ZOOM_DURATION_MS,type:"ease"},!0)}),a},Zu.ZOOM_DURATION_MS=200,Zu);function Zu(t){var n=ub.call(this)||this;return n.options=new sM().merge(t),n}var uM=Object.freeze({__proto__:null,PitchControl:MI,CompassControl:ww,ZoomControl:lM,StyleControl:nM,TrafficControl:oM,TrafficLegendControl:aM});function cM(t){return this.__data__.has(t)}function hy(t){var n=-1,a=t==null?0:t.length;for(this.__data__=new Iw;++n<a;)this.add(t[n])}hy.prototype.add=hy.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},hy.prototype.has=cM;var pM=hy,hM=function(t,n){for(var a=-1,h=t==null?0:t.length;++a<h;)if(n(t[a],a,t))return!0;return!1},dM=function(t,n){return t.has(n)},cb=function(t,n,a,h,y,b){var u=1&a,A=t.length,k=n.length;if(A!=k&&!(u&&A<k))return!1;var G=b.get(t);if(G&&b.get(n))return G==n;var W=-1,se=!0,ne=2&a?new pM:void 0;for(b.set(t,n),b.set(n,t);++W<A;){var Ee=t[W],Ge=n[W];if(h)var pt=u?h(Ge,Ee,W,n,t,b):h(Ee,Ge,W,t,n,b);if(pt!==void 0){if(pt)continue;se=!1;break}if(ne){if(!hM(n,function(Wt,nt){if(!dM(ne,nt)&&(Ee===Wt||y(Ee,Wt,a,h,b)))return ne.push(nt)})){se=!1;break}}else if(Ee!==Ge&&!y(Ee,Ge,a,h,b)){se=!1;break}}return b.delete(t),b.delete(n),se};function fM(t){var n=-1,a=Array(t.size);return t.forEach(function(h,y){a[++n]=[y,h]}),a}function mM(t){var n=-1,a=Array(t.size);return t.forEach(function(h){a[++n]=h}),a}var E2,I2=Zf?Zf.prototype:void 0,pb=I2?I2.valueOf:void 0,gM=function(t,n,a,h,y,b,u){switch(a){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=n.byteLength||!b(new cy(t),new cy(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return qf(+t,+n);case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var A=fM;case"[object Set]":var k=1&h;if(A=A||mM,t.size!=n.size&&!k)return!1;var G=u.get(t);if(G)return G==n;h|=2,u.set(t,n);var W=cb(A(t),A(n),h,y,b,u);return u.delete(t),W;case"[object Symbol]":if(pb)return pb.call(t)==pb.call(n)}return!1},yM=Object.prototype.hasOwnProperty,aT=function(t,n,a,h,y,b){var u=1&a,A=s1(t),k=A.length;if(k!=s1(n).length&&!u)return!1;for(var G=k;G--;){var W=A[G];if(!(u?W in n:yM.call(n,W)))return!1}var se=b.get(t);if(se&&b.get(n))return se==n;var ne=!0;b.set(t,n),b.set(n,t);for(var Ee=u;++G<k;){var Ge=t[W=A[G]],pt=n[W];if(h)var Wt=u?h(pt,Ge,W,n,t,b):h(Ge,pt,W,t,n,b);if(!(Wt===void 0?Ge===pt||y(Ge,pt,a,h,b):Wt)){ne=!1;break}Ee=Ee||W=="constructor"}if(ne&&!Ee){var nt=t.constructor,qt=n.constructor;nt!=qt&&"constructor"in t&&"constructor"in n&&!(typeof nt=="function"&&nt instanceof nt&&typeof qt=="function"&&qt instanceof qt)&&(ne=!1)}return b.delete(t),b.delete(n),ne},hb="[object Arguments]",y1="[object Array]",v1="[object Object]",sT=Object.prototype.hasOwnProperty,vM=function(t,n,a,h,y,b){var u=fp(t),A=fp(n),k=u?y1:Xf(t),G=A?y1:Xf(n),W=(k=k==hb?v1:k)==v1,se=(G=G==hb?v1:G)==v1,ne=k==G;if(ne&&$f(t)){if(!$f(n))return!1;W=!(u=!0)}if(ne&&!W)return b=b||new Yf,u||r1(t)?cb(t,n,a,h,y,b):gM(t,n,k,a,h,y,b);if(!(1&a)){var Ee=W&&sT.call(t,"__wrapped__"),Ge=se&&sT.call(n,"__wrapped__");if(Ee||Ge)return y(Ee?t.value():t,Ge?n.value():n,a,h,b=b||new Yf)}return ne&&(b=b||new Yf,aT(t,n,a,h,y,b))},db=function t(n,a,h,y,b){return n===a||(n==null||a==null||!$s(n)&&!$s(a)?n!=n&&a!=a:vM(n,a,h,y,t,b))},Ho=function(t,n){return db(t,n)},_M=(E2=Object.freeze({__proto__:null,default:{}}))&&E2.default||E2,gp=C(function(t){(function(){var n,a,h,y=0,b=[];for(A.BUFFER_SIZE=512,A.bin=u,A.test=function(k){if(typeof k=="string")return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(k)},a=0;a<256;a++)b[a]=(a+256).toString(16).substr(1);function u(){var k=function(G){var W,se,ne;if(h!==void 0){if(n===void 0||A.BUFFER_SIZE<y+G)if(y=0,h.getRandomValues)n=new Uint8Array(A.BUFFER_SIZE),h.getRandomValues(n);else{if(!h.randomBytes)throw new Error("Non-standard crypto library");n=h.randomBytes(A.BUFFER_SIZE)}return n.slice(y,y+=G)}for(W=[],a=0;a<G;a++)W.push((se=0,ne=255,Math.floor(Math.random()*(ne-se))+se));return W}(16);return k[6]=15&k[6]|64,k[8]=63&k[8]|128,k}function A(){var k=u();return b[k[0]]+b[k[1]]+b[k[2]]+b[k[3]]+"-"+b[k[4]]+b[k[5]]+"-"+b[k[6]]+b[k[7]]+"-"+b[k[8]]+b[k[9]]+"-"+b[k[10]]+b[k[11]]+b[k[12]]+b[k[13]]+b[k[14]]+b[k[15]]}typeof crypto<"u"?h=crypto:typeof window<"u"&&window.msCrypto!==void 0&&(h=window.msCrypto),h=h||_M,t.exports=A})()}),xs=(_1.TYPE="Feature",_1);function _1(t,n,a,h){this.type="Feature",this.type=_1.TYPE,this.properties=n||{},this.id=a,this.geometry=t,this.bbox=h}var fb,Qi=(ze(_i,fb=Array),_i.fromData=function(t){var n=NaN,a=NaN,h=new Set(["y"]),y=new Set(["x"]);return Object.keys(t).forEach(function(b){var u=b.toLowerCase();isNaN(n)&&h.has(u)&&typeof t[b]=="number"?n=t[b]:isNaN(a)&&y.has(u)&&typeof t[b]=="number"&&(a=t[b])}),isNaN(n)||isNaN(a)?null:new _i(n,a)},_i.getX=function(t){return 0<t.length?t[0]:NaN},_i.getY=function(t){return 1<t.length?t[1]:NaN},_i.getDestination=function(t,n,a){return new _i(_i.getX(t)+a*Math.cos((n+270)*Math.PI/180),_i.getY(t)+a*Math.sin((n+270)*Math.PI/180))},_i.getDistance=function(t,n){var a=_i.getX(t)-_i.getX(n),h=_i.getY(t)-_i.getY(n);return Math.sqrt(a*a+h*h)},_i.getHeading=function(t,n){var a=_i.getX(n)-_i.getX(t),h=_i.getY(t)-_i.getY(n);return 180*(2.5*Math.PI-Math.atan2(h,a))/Math.PI%360},_i);function _i(t,n){return fb.call(this,t,n)||this}var Xs=(x1.TYPE="Point",x1);function x1(t){this.type="Point",this.type=x1.TYPE,this.coordinates=t}var dn,yp,wr,ed,Jr,Qf,Qr,td,br,Bl,dy=6378137,xM=Math.PI/180,mb=180/Math.PI,gb=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function eo(t){return t*xM}function em(t){return t*mb}function w1(t,n,a){return Math.min(Math.max(t,n),a)}function yb(t,n){var a=eo(n[1]-t[1]),h=eo(n[0]-t[0]),y=Math.pow(Math.sin(a/2),2)+Math.cos(eo(t[1]))*Math.cos(eo(n[1]))*Math.pow(Math.sin(h/2),2),b=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return Math.round(dy*b*100)/100}function b1(t){if(t)switch(t.toLowerCase()){case"feet":case"foot":case"ft":return wr.feet;case"kilometers":case"kilometer":case"kilometres":case"kilometre":case"km":case"kms":return wr.kilometers;case"miles":case"mile":case"mi":return wr.miles;case"nauticalmiles":case"nauticalmile":case"nms":case"nm":return wr.nauticalMiles;case"yards":case"yard":case"yds":case"yrd":case"yrds":return wr.yards;case"meters":case"metres":case"m":default:return wr.meters}return wr.meters}function vb(t){if(t)switch(t.toLowerCase()){case"milespersecondsquared":case"milepersecondsquared":case"mi/s^2":case"mi/s2":return br.milesPerSecondSquared;case"kilometerspersecondsquared":case"kilometrespersecondsquared":case"kilometerpersecondsquared":case"kilometrepersecondsquared":case"km/s^2":case"km/s2":return br.kilometersPerSecondSquared;case"knotspersecond":case"knotpersecond":case"knts/s":case"kn/s":case"kt/s":return br.knotsPerSecond;case"standardgravity":case"g":return br.standardGravity;case"feetpersecondsquared":case"footpersecondsquared":case"ft/s^2":case"ft/s2":return br.feetPerSecondSquared;case"yardspersecondsquared":case"yardpersecondsquared":case"yds/s^2":case"yds/s2":case"yd/s^2":case"yd/s2":return br.yardsPerSecondSquared;case"milesperhoursecond":case"mileperhoursecond":case"milesperhourseconds":case"mileperhourseconds":case"mi/h/s":return br.milesPerHourSecond;case"kilometersperhoursecond":case"kilometrespersoursecond":case"kilometerperhoursecond":case"kilometrepersoursecond":case"kilometersperhourssecond":case"kilometrespersourssecond":case"kilometerperhourssecond":case"kilometrepersourssecond":case"kmhs":case"km/h/s":return br.kilometersPerHourSecond;case"meterspersecondsquared":case"metrespersecondsquared":case"meterpersecondsquared":case"metrepersecondsquared":case"m/s^2":case"m/s2":default:return br.metersPerSecondSquared}return br.metersPerSecondSquared}function _b(t){if(t)switch(t){case"acres":case"ac":return dn.acres;case"hectares":case"ha":return dn.hectares;case"squareFeet":case"ft^2":case"ft2":return dn.squareFeet;case"squareYards":case"squareYard":case"yds^2":case"yds2":case"yd^2":case"yd2":return dn.squareYards;case"squareKilometers":case"squareKilometres":case"squareKilometer":case"squareKilometre":case"km^2":case"km2":return dn.squareKilometers;case"squareMiles":case"squareMile":case"mi^2":case"mi2":return dn.squareMiles;case"squareMeters":case"squareMetres":case"squareMeter":case"squareMetre":case"m^2":case"m2":default:return dn.squareMeters}return dn.squareMeters}function xb(t){if(t)switch(t.toLowerCase()){case"feetpersecond":case"footsecond":case"ftps":case"ft/s":return Qr.feetPerSecond;case"milesperhour":case"mileperhour":case"mph":case"mi/hr":case"mi/h":return Qr.milesPerHour;case"knots":case"knot":case"knts":case"knt":case"kn":case"kt":return Qr.knots;case"mach":case"m":return Qr.mach;case"kilometersperhour":case"kilometresperhour":case"kmperhour":case"kmph":case"km/hr":case"km/h":return Qr.kilometersPerHour;case"meterspersecond":case"metrespersecond":case"mps":case"ms":case"m/s":default:return Qr.metersPerSecond}return Qr.metersPerSecond}function wb(t){if(t)switch(t.toLowerCase()){case"milliseconds":case"ms":return Jr.ms;case"minutes":case"minute":case"mins":case"min":return Jr.minutes;case"hours":case"hour":case"hr":case"h":return Jr.hours;case"days":case"day":case"d":return Jr.days;case"seconds":case"second":case"secs":case"sec":case"s":default:return Jr.seconds}return Jr.seconds}function bb(t){var n=0;if(t&&0<t.length){n=Math.abs(Cb(t[0]));for(var a=1,h=t.length;a<h;a++)n-=Math.abs(Cb(t[a]))}return n}function Cb(t){var n=0;if(3<=t.length){for(var a=void 0,h=void 0,y=0,b=t.length;y<b;y++)n+=(eo(t[y===b-2?(a=b-2,h=b-1,0):y===b-1?(a=b-1,h=0,1):(h=(a=y)+1,y+2)][0])-eo(t[a][0]))*Math.sin(eo(t[h][1]));n=n*dy*dy/2}return n}function Sb(t,n,a){return(t[0]-a[0])*(n[1]-a[1])-(t[1]-a[1])*(n[0]-a[0])}function wM(t,n,a){if(2<=a.length){for(var h=1/0,y=void 0,b=null,u=tm(a,22),A=void 0,k=0,G=u.length-1;k<G;k++)A=bM(n,u[k],u[k+1]),(y=Qi.getDistance(n,A))<h&&(h=y,b=A);if(b){var W=S1([b],22)[0];return new xs(new Xs(W),{distance:ya(t,W)})}}else if(a.length===1)return new xs(new Xs(a[0]),{distance:ya(t,a[0])});return null}function bM(t,n,a){if(n[0]===a[0]&&n[1]===a[1])return n;var h=t[0]-n[0],y=t[1]-n[1],b=a[0]-n[0],u=a[1]-n[1],A=(b*h+u*y)/(b*b+u*u);return A<0?n:1<A?a:[n[0]+b*A,n[1]+u*A]}function Wo(t,n){if(!isNaN(t)&&typeof n=="number"&&0<=n){var a=void 0;a=n<gb.length?gb[n]:Math.pow(10,n),t=Math.round(t*a)/a}return t}function Gu(t,n,a,h){switch(b1(n)){case wr.meters:t/=1e3;break;case wr.feet:t/=3280.8399;break;case wr.miles:t/=.62137119;break;case wr.yards:t/=1093.6133;break;case wr.nauticalMiles:t/=.5399568;break;case wr.kilometers:}switch(b1(a)){case wr.meters:t*=1e3;break;case wr.feet:t*=3280.8399;break;case wr.miles:t*=.62137119;break;case wr.yards:t*=1093.6133;break;case wr.nauticalMiles:t*=.5399568;break;case wr.kilometers:}if(typeof h=="number"&&0<=h){var y=Math.pow(10,h);t=Math.round(t*y)/y}return t}function rd(t,n,a,h){h=h||"meters",t=Lo(t);var y=Tb(h),b=eo(t[1]),u=eo(t[0]),A=eo(n),k=a/y,G=Math.asin(Math.sin(b)*Math.cos(k)+Math.cos(b)*Math.sin(k)*Math.cos(A)),W=u+Math.atan2(Math.sin(A)*Math.sin(k)*Math.cos(b),Math.cos(k)-Math.sin(b)*Math.sin(G)),se=w1(xi(em(G)),-85,85);return[Dn(em(W)),se]}function ya(t,n,a){var h=yb(t=Lo(t),n=Lo(n));return a==="meters"?h:Gu(h,"meters",a||"meters")}function Tb(t){var n=b1(t);return Gu(dy,wr.meters,n)}function Hu(t,n){if(t=Lo(t),n=Lo(n),t&&2<=t.length&&n&&2<=n.length){var a=eo(t[1]),h=eo(n[1]),y=eo(n[0]-t[0]),b=Math.sin(y)*Math.cos(h),u=Math.cos(a)*Math.sin(h)-Math.sin(a)*Math.cos(h)*Math.cos(y);return(em(Math.atan2(b,u))+360)%360}return NaN}function C1(t,n){var a,h=0;Array.isArray(t)?a=t:t.type&&t.type==="LineString"&&(a=t.coordinates);for(var y=0,b=a.length-1;y<b;y++)h+=yb(a[y],a[y+1]);return Gu(h,"meters",n||"meters")}function Eb(t,n,a){a=a||"meters";var h,y,b=0;if(Array.isArray(t)?y=t:t.type&&t.type==="LineString"&&(y=t.coordinates),2<=y.length){for(var u=y.length,A=1;A<u;A++){if(n<=b+(h=ya(y[A-1],y[A],a))){var k=Hu(y[A-1],y[A]);return rd(y[A-1],k,n-b,a)}b+=h}return b<=n?y[u-1]:y[0]}return null}function Ib(t,n,a,h,y){h=h||"meters",y=y||0,t=Lo(t);for(var b=[],u=360/a,A=0;A<=a;A++)b.push(rd(t,(A*u+y)%360,n,h));return b}function xi(t){return 90<t?180<(t=(t+90)%360)?90-(t-180):t-90:t<-90?(t=(t-90)%360)<-180?-90-(t+180):t+90:t}function Dn(t){return 180<t?(t+180)%360-180:t<-180?(t-180)%360+180:t}function kb(t,n,a){if(a===0)return Object.assign({},t);n=Lo(n);for(var h,y,b=[],u=0,A=t.length;u<A;u++)h=ya(n,t[u]),y=Hu(n,t[u]),b.push(rd(n,y+a,h));return b}function S1(t,n){for(var a,h,y=512*Math.pow(2,n),b=[],u=0,A=t.length;u<A;u++)a=t[u][0]/y-.5,h=.5-t[u][1]/y,b.push([360*a,90-360*Math.atan(Math.exp(2*-h*Math.PI))/Math.PI]);return b}function tm(t,n){for(var a,h,y,b=512*Math.pow(2,n),u=[],A=0,k=t.length;A<k;A++)y=Math.sin(t[A][1]*Math.PI/180),a=(t[A][0]+180)/360,h=.5-Math.log((1+y)/(1-y))/(4*Math.PI),u.push([Math.round(a*b),Math.round(h*b)]);return u}function T1(t,n,a,h){switch(vb(n)){case br.kilometersPerHourSecond:t/=3.6;break;case br.milesPerHourSecond:t/=2.236936292054;break;case br.knotsPerSecond:t/=1.943844492441;break;case br.standardGravity:t/=.1019716212978;break;case br.kilometersPerSecondSquared:t/=.001;break;case br.milesPerSecondSquared:t/=.000621371192;break;case br.feetPerSecondSquared:t/=3.280839895012;break;case br.yardsPerSecondSquared:t/=1.093613298338;break;case br.metersPerSecondSquared:}switch(vb(a)){case br.kilometersPerHourSecond:t*=3.6;break;case br.milesPerHourSecond:t*=2.236936292054;break;case br.knotsPerSecond:t*=1.943844492441;break;case br.standardGravity:t*=.1019716212978;break;case br.kilometersPerSecondSquared:t*=.001;break;case br.milesPerSecondSquared:t*=.000621371192;break;case br.feetPerSecondSquared:t*=3.280839895012;break;case br.yardsPerSecondSquared:t*=1.093613298338;break;case br.metersPerSecondSquared:}return Wo(t,h)}function Mb(t,n,a,h){switch(_b(n)){case dn.acres:t*=4046.8564224;break;case dn.hectares:t*=1e4;break;case dn.squareFeet:t*=.09290304;break;case dn.squareKilometers:t*=1e6;break;case dn.squareMiles:t*=259e4;break;case dn.squareYards:t*=.83612736;break;case dn.squareMeters:}switch(_b(a)){case dn.acres:t/=4046.8564224;break;case dn.hectares:t/=1e4;break;case dn.squareFeet:t/=.09290304;break;case dn.squareKilometers:t/=1e6;break;case dn.squareMiles:t/=259e4;break;case dn.squareYards:t/=.83612736;break;case dn.squareMeters:}return Wo(t,h)}function rm(t,n,a,h){switch(xb(n)){case Qr.feetPerSecond:t*=1.09728;break;case Qr.milesPerHour:t*=1.6093;break;case Qr.knots:t*=1.852;break;case Qr.metersPerSecond:t*=3.6;break;case Qr.mach:t*=1234.8;break;case Qr.kilometersPerHour:}switch(xb(a)){case Qr.feetPerSecond:t/=1.09728;break;case Qr.milesPerHour:t/=1.6093;break;case Qr.knots:t/=1.852;break;case Qr.metersPerSecond:t/=3.6;break;case Qr.mach:t/=1234.8;break;case Qr.kilometersPerHour:}return Wo(t,h)}function nm(t,n,a,h){switch(wb(n)){case Jr.ms:t/=1e3;break;case Jr.hours:t*=3600;break;case Jr.minutes:t*=60;break;case Jr.days:t*=86400;break;case Jr.seconds:}switch(wb(a)){case Jr.ms:t*=1e3;break;case Jr.hours:t/=3600;break;case Jr.minutes:t/=60;break;case Jr.days:t/=86400;break;case Jr.seconds:}return Wo(t,h)}function Ab(t,n,a,h,y,b,u,A){var k=Gu(n,y,wr.meters),G=nm(a,b,Jr.seconds);return T1(2*(k-rm(t,h,Qr.metersPerSecond)*G)/(G*G),br.metersPerSecondSquared,u,A)}function Lb(t,n,a,h,y,b,u){var A=rm(t,h,Qr.metersPerSecond);return T1((rm(n,h,Qr.metersPerSecond)-A)/nm(a,y,Jr.seconds),br.metersPerSecondSquared,b,u)}function Pb(t,n,a,h){var y=E1(t),b=E1(n);return y!=null&&b!=null?nm(b.getTime()-y.getTime(),Jr.ms,a,h):NaN}function E1(t){if(Object.prototype.toString.call(t)==="[object Date]")return t;if(typeof t=="string"){var n=Date.parse(t);if(!isNaN(n))return new Date(n);if(0<=t.indexOf("Date(")){var a=0;return a=0<(t=t.replace("/Date(","").replace(")/","")).indexOf("+")?parseInt(t.substr(0,t.indexOf("+")),10):0<t.indexOf("-")?parseInt(t.substr(0,t.indexOf("-")),10):parseInt(t,10),new Date(a)}}else if(typeof t=="number")return new Date(t);return null}function vp(t){var n=[],a=null,h=null;if(Array.isArray(t)&&0<t.length)if(Array.isArray(t[0])&&typeof t[0][0]=="number")n=t;else for(var y=t.length,b=0;b<y;b++)n=n.concat(vp(t[b]));else if(t.type)switch(t.type){case"Point":n=[t.coordinates];break;case"LineString":n=t.coordinates;break;case"Polygon":a=t.coordinates;break;case"MultiPoint":n=t.coordinates;break;case"MultiLineString":a=t.coordinates;break;case"MultiPolygon":h=t.coordinates;break;case"Feature":var u=t;n=wi._isCircle(u)?wi._getCirclePositions(u):vp(u.geometry);break;case"FeatureCollection":n=vp(t.features);break;case"GeometryCollection":n=vp(t.geometries)}else if(t instanceof wi)return vp(t.toJson());if(a)for(y=a.length,b=0;b<y;b++)n=n.concat(a[b]);else if(h){var A=h.length;for(b=0;b<A;b++)for(var k=h[b].length,G=0;G<k;G++)n=n.concat(h[b][G])}return n}function Lo(t){if(Array.isArray(t)&&typeof t[0]=="number")return t;if(t.type){if(t.type==="Point")return t.coordinates;if(t.type==="Feature"&&t.geometry.type==="Point")return t.geometry.coordinates}else if(t instanceof wi&&t.getType()==="Point")return t.getCoordinates();return null}function Db(t,n,a){a=a||"meters";var h,y,b=0;if(Array.isArray(t)?y=t:t.type&&t.type==="LineString"&&(y=t.coordinates),2<=y.length){for(var u=y.length,A=1;A<u;A++){if(n<=b+(h=ya(y[A-1],y[A],a))){var k=Hu(y[A-1],y[A]),G=rd(y[A-1],k,n-b,a);return new xs(new Xs(G),{heading:k})}b+=h}return b<=n?new xs(new Xs(y[u-1]),{heading:Hu(y[u-2],y[u-1])}):new xs(new Xs(y[0]),{heading:Hu(y[0],y[1])})}return null}function fy(t,n,a,h){var y,b=Lo(t),u=tm([b],22)[0],A=null,k=1/0;switch((n=n instanceof wi?n.toJson():n).type){case"Feature":return fy(t,n.geometry,a);case"Point":y=[[n.coordinates]];break;case"MultiPoint":for(var G=void 0,W=n.coordinates,se=0,ne=W.length;se<ne;se++)(G=ya(b,W[se]))<k&&(k=G,A=new xs(new Xs(W[se]),{distance:G}));break;case"LineString":y=[n.coordinates];break;case"Polygon":case"MultiLineString":y=n.coordinates;break;case"MultiPolygon":var Ee=n.coordinates;if(0<Ee.length)for(y=Ee[0],se=1,ne=Ee.length;se<ne;se++)y=y.concat(Ee[se])}if(y){var Ge=void 0;for(se=0,ne=y.length;se<ne;se++)(Ge=wM(b,u,y[se]))&&Ge.properties.distance<k&&(k=Ge.properties.distance,A=Ge)}return A&&(A.properties.distance=Gu(A.properties.distance,"meters",a,h)),A}(yp=dn=dn||{}).squareMeters="squareMeters",yp.acres="acres",yp.hectares="hectares",yp.squareFeet="squareFeet",yp.squareKilometers="squareKilometers",yp.squareMiles="squareMiles",yp.squareYards="squareYards",(ed=wr=wr||{}).meters="meters",ed.kilometers="kilometers",ed.feet="feet",ed.miles="miles",ed.nauticalMiles="nauticalMiles",ed.yards="yards",(Qf=Jr=Jr||{}).seconds="seconds",Qf.hours="hours",Qf.ms="ms",Qf.minutes="minutes",Qf.days="days",(td=Qr=Qr||{}).metersPerSecond="metersPerSecond",td.kilometersPerHour="kilometersPerHour",td.feetPerSecond="feetPerSecond",td.milesPerHour="milesPerHour",td.knots="knots",td.mach="mach",(Bl=br=br||{}).milesPerSecondSquared="milesPerSecondSquared",Bl.kilometersPerSecondSquared="kilometersPerSecondSquared",Bl.knotsPerSecond="knotsPerSecond",Bl.standardGravity="standardGravity",Bl.feetPerSecondSquared="feetPerSecondSquared",Bl.yardsPerSecondSquared="yardsPerSecondSquared",Bl.milesPerHourSecond="milesPerHourSecond",Bl.kilometersPerHourSecond="kilometersPerHourSecond",Bl.metersPerSecondSquared="metersPerSecondSquared";var I1,Po=(ze(Js,I1=Array),Js.fromPosition=function(t){return t.length===2?new Js(t[0],t[1]):2<t.length?new Js(t[0],t[1],t[2]):null},Js.areEqual=function(t,n,a){if(a===void 0&&(a=6),t&&2<=t.length&&n&&2<=n.length){var h=Math.pow(10,a),y=xi(t[1]),b=xi(n[1]),u=Dn(t[0]),A=Dn(n[0]);if(Math.round((y-b)*h)/h!=0)return!1;var k=Math.round((u-A)*h)/h;return k==0||k==360}return!1},Js.fromLatLng=function(t,n,a){var h=[];if(typeof t=="number")h.push(t),typeof n=="number"&&h.push(n),typeof a=="number"&&h.push(a);else if(Array.isArray(t))2<=t.length&&typeof t[0]=="number"&&typeof t[1]=="number"&&(3<=t.length&&typeof t[2]=="number"?h.push(t[0],t[1],t[2]):h.push(t[0],t[1]));else if(typeof t=="object"){var y=["lat","latitude","y"],b=["lng","longitude","lon","x"],u=["elv","elevation","alt","altitude","z"],A=NaN,k=NaN,G=NaN;Object.keys(t).forEach(function(W,se,ne){var Ee=W.toLowerCase();isNaN(A)&&0<=y.indexOf(Ee)&&typeof t[W]=="number"?A=t[W]:isNaN(k)&&0<=b.indexOf(Ee)&&typeof t[W]=="number"?k=t[W]:isNaN(G)&&0<=u.indexOf(Ee)&&typeof t[W]=="number"&&(G=t[W])}),isNaN(A)||isNaN(k)||(h.push(k,A),isNaN(G)||h.push(G))}return 2<=h.length?h:null},Js.fromLatLngs=function(t){var n=[];if(Array.isArray(t))for(var a=0,h=t.length;a<h;a++){var y=Js.fromLatLng(t[a]);y&&n.push(y)}return n},Js._getDimensions=function(t){for(var n=0;Array.isArray(t);)t=t[0],n++;return typeof t=="number"&&n--,n},Js);function Js(t,n,a){return a?I1.call(this,t,n,a)||this:I1.call(this,t,n)||this}var my=(k1.TYPE="Polygon",k1);function k1(t,n){this.type="Polygon",this.type=k1.TYPE,Po._getDimensions(t)===1?this.coordinates=[t]:this.coordinates=t,this.bbox=n}var _p=(gy.prototype._addEventListener=function(t,n,a){this.listeners.has(t)||this.listeners.set(t,new Ua),this.listeners.get(t).set(n,a)},gy.prototype._removeEventListener=function(t,n){this.listeners.has(t)&&this.listeners.get(t).delete(n)},gy.prototype._invokeEvent=function(t,n){var a=this;this.listeners.has(t)&&this.listeners.get(t).forEach(function(h,y){h&&a._removeEventListener(t,y);try{y(n)}catch(b){console.error(b)}})},gy);function gy(){this.listeners=new Ua}var CM=Object.freeze({__proto__:null,EventEmitter:_p}),yy=(Fl.prototype.toTarget=function(t,n){return this.transformArray(t,this.M,n)},Fl.prototype.toSource=function(t,n){return this.transformArray(t,this.inverseM,n)},Fl.prototype.transformArray=function(t,n,a){if(t&&Array.isArray(t)&&Array.isArray(t[0])){for(var h=[],y=0,b=t;y<b.length;y++){var u=b[y];h.push(this.transform(u,n,a))}return h}return null},Fl.prototype.transform=function(t,n,a){var h=t[0]*n[0][3]+t[1]*n[1][3]+n[2][3],y=t[0]*n[0][4]+t[1]*n[1][4]+n[2][4];return typeof a=="number"&&0<=a?[Wo(h,a),Wo(y,a)]:[Wo(h,6),Wo(y,6)]},Fl._calculateAffineTransform=function(t,n){if(t.length!==n.length||t.length<1)throw new Error("Error: source and target arrays must have the same length.");var a=Math.min(t[0].length,n[0].length),h=a+1;if(t.length<a)throw new Error("Erorr: At least "+a+" reference points required.");for(var y=[],b=[],u=0;u<h;u++){b[u]=[];for(var A=0;A<h;A++){A<a&&(y[A]=0);for(var k=b[u][A]=0;k<t.length;k++)A<a&&(y[A]+=u<a?t[k][u]*n[k][A]:n[k][A]),b[u][A]+=a<=u&&a<=A?1:a<=u?t[k][A]:a<=A?t[k][u]:t[k][u]*t[k][A]}b[u]=b[u].concat(y)}if(!this._gaussJordanElimination(b))throw new Error("Error: Singular matrix. Points are likely coplanar.");return b},Fl._gaussJordanElimination=function(t){for(var n,a,h=t.length,y=2*h-1,b=0;b<h;b++){for(var u=b,A=b+1;A<h;A++)Math.abs(t[A][b])>Math.abs(t[u][b])&&(u=A);if(a=t[u],t[u]=t[b],t[b]=a,Math.abs(t[b][b])<=1e-10)return!1;for(var k=b+1;k<h;k++){n=t[k][b]/t[b][b];for(var G=b;G<y;G++)t[k][G]-=t[b][G]*n}}for(b=h-1;-1<b;b--){for(n=t[b][b],A=0;A<b;A++)for(var W=y-1;b-1<W;W--)t[A][W]-=t[b][W]*t[A][b]/n;t[b][b]/=n;for(var se=h;se<y;se++)t[b][se]/=n}return!0},Fl);function Fl(t,n){this.M=Fl._calculateAffineTransform(t,n),this.inverseM=Fl._calculateAffineTransform(n,t)}var zb,SM=Object.freeze({__proto__:null,AffineTransform:yy,_precision:Wo,get AreaUnits(){return dn},get DistanceUnits(){return wr},get TimeUnits(){return Jr},get SpeedUnits(){return Qr},get AccelerationUnits(){return br},boundingBoxToPolygon:function(t){var n=Dn(hr.getWest(t)),a=Dn(hr.getEast(t)),h=xi(hr.getNorth(t)),y=xi(hr.getSouth(t)),b=hr.getCenter(t),u=[[n,h],[n,y],[b[0],y],[a,y],[a,h],[b[0],h],[n,h]];return new my([u])},convertDistance:Gu,getCardinalSpline:function(t,n,a,h){var y;if(!t||t.length<=2)return y;typeof n!="number"&&(n=.5),(typeof a!="number"||a<=0)&&(a=15);var b=t.length;y=t.slice(0),h?(Po.areEqual(y[0],y[b-1])&&(y.pop(),b--),y.unshift(t[b-1]),y.push(t[0]),y.push(t[1]),b++):(y.unshift(t[0]),y.push(t[b-1]));var u,A,k,G=[];G.push([1,0,0,0]);for(var W=1;W<a-1;W++)k=(u=W/a)*(A=u*u),G.push([2*k-3*A+1,-2*k+3*A,k-2*A+u,k-A]);G.push([0,1,0,0]);var se,ne,Ee,Ge,pt,Wt,nt,qt=[];for(W=1;W<b;W++)for(ne=n*(y[W+1][0]-y[W-1][0]),Ee=n*(y[W+1][1]-y[W-1][1]),Ge=n*(y[W+2][0]-y[W][0]),pt=n*(y[W+2][1]-y[W][1]),u=0;u<a;u++)nt=(se=G[u])[0]*y[W][0]+se[1]*y[W+1][0]+se[2]*ne+se[3]*Ge,Wt=w1(Wt=se[0]*y[W][1]+se[1]*y[W+1][1]+se[2]*Ee+se[3]*pt,-85,85),qt.push([nt,Wt]);return qt},getDestination:rd,getDistanceTo:ya,getEarthRadius:Tb,getGeodesicPath:function(t,n){var a;(!n||n<=0)&&(n=15),Array.isArray(t)?a=t:t.type&&t.type==="LineString"&&(a=t.coordinates);for(var h=a.length-1,y=[],b=0;b<h;b++)for(var u=eo(a[b][1]),A=eo(a[b][0]),k=eo(a[b+1][1]),G=eo(a[b+1][0]),W=2*Math.asin(Math.sqrt(Math.pow(Math.sin((u-k)/2),2)+Math.cos(u)*Math.cos(k)*Math.pow(Math.sin((A-G)/2),2))),se=0;se<=n;se++){var ne=se/n,Ee=Math.sin((1-ne)*W)/Math.sin(W),Ge=Math.sin(ne*W)/Math.sin(W),pt=Ee*Math.cos(u)*Math.cos(A)+Ge*Math.cos(k)*Math.cos(G),Wt=Ee*Math.cos(u)*Math.sin(A)+Ge*Math.cos(k)*Math.sin(G),nt=Ee*Math.sin(u)+Ge*Math.sin(k),qt=Math.atan2(nt,Math.sqrt(Math.pow(pt,2)+Math.pow(Wt,2))),tn=Math.atan2(Wt,pt);qt=w1(em(qt),-85,85),tn=em(tn),y.push([tn,qt])}return y},getHeading:Hu,getLengthOfPath:C1,getPositionAlongPath:Eb,getRegularPolygonPath:Ib,interpolate:function(t,n,a){a=a===void 0?.5:a;var h=ya(t=Lo(t),n=Lo(n),"kilometers");return rd(t,Hu(t,n),h*a,"kilometers")},normalizeLatitude:xi,normalizeLongitude:Dn,rotatePositions:kb,getPixelHeading:function(t,n){var a=tm([t=Lo(t),n=Lo(n)],21),h=a[0],y=a[1],b=y[0]-h[0],u=h[1]-y[1];return(2.5*Math.PI-Math.atan2(u,b))*mb%360},mercatorPixelsToPositions:S1,mercatorPositionsToPixels:tm,convertAcceleration:T1,convertArea:Mb,convertSpeed:rm,convertTimespan:nm,getAcceleration:Ab,getAccelerationFromSpeeds:Lb,getAccelerationFromFeatures:function(t,n,a,h,y,b,u){if(typeof a=="string"&&t.type==="Feature"&&t.geometry.type==="Point"&&n.type==="Feature"&&n.geometry.type==="Point"){var A=Pb(t.properties[a],n.properties[a],Jr.seconds);if(!isNaN(A)){var k=0;if(h&&typeof h=="string"){var G=t.properties[h],W=n.properties[h];if(typeof G=="number"&&(k=G,typeof W=="number"))return Lb(G,W,A,y,Jr.seconds,b,u)}return Ab(k,ya(t.geometry.coordinates,n.geometry.coordinates,wr.meters),A,y,wr.meters,Jr.seconds,b,u)}}return NaN},getArea:function t(n,a,h){if(n){var y=0;switch((n=n instanceof wi?n.toJson():n).type){case"Feature":if(n.geometry)return t(n.geometry,a,h);break;case"Polygon":n.coordinates&&(y=bb(n.coordinates));break;case"MultiPolygon":var b=n;if(b.coordinates)for(var u=0,A=b.coordinates.length;u<A;u++)y+=bb(b.coordinates[u])}return Mb(y,dn.squareMeters,a,h)}return 0},getSpeed:function(t,n,a,h,y,b){var u=Lo(t),A=Lo(n);if(u&&A){var k=nm(a,h,Jr.seconds);return rm(ya(u,A,wr.meters)/k,Qr.metersPerSecond,y,b)}return 0},getSpeedFromFeatures:function(t,n,a,h,y){if(typeof a=="string"&&t.type==="Feature"&&t.geometry.type==="Point"&&n.type==="Feature"&&n.geometry.type==="Point"){var b=this.getTimespan(t.properties[a],n.properties[a],Jr.seconds);if(!isNaN(b)){var u=this.getDistanceTo(t.geometry.coordinates,n.geometry.coordinates,wr.meters);return this.convertSpeed(u/b,Qr.metersPerSecond,h,y)}}return NaN},getTimespan:Pb,getTravelDistance:function(t,n,a,h,y,b,u,A){n=this.convertTimespan(n,y,Jr.seconds);var k=(a=this.convertSpeed(a,b,Qr.metersPerSecond))*n;return typeof h=="number"&&(k+=.5*this.convertAcceleration(h,u,br.metersPerSecondSquared)*n*n),this.convertDistance(k,wr.meters,t,A)},parseTimestamp:E1,getConvexHull:function(t){var n=vp(t).map(function(k){return[Dn(k[0]),xi(k[1])]});n.sort(function(k,G){return k[0]===G[0]?k[1]-G[1]:k[0]-G[0]});for(var a=[],h=0,y=n;h<y.length;h++){for(var b=y[h];2<=a.length&&Sb(a[a.length-2],a[a.length-1],b)<=0;)a.pop();a.push(b)}for(var u=[],A=n.length-1;0<=A;A--){for(;2<=u.length&&Sb(u[u.length-2],u[u.length-1],n[A])<=0;)u.pop();u.push(n[A])}return new my([a.concat(u)])},getPositions:vp,getPosition:Lo,getPositionsAlongPath:function(t,n){if(n<2)return[];for(var a=[],h=C1(t,wr.meters)/(n-1),y=0;y<n;y++){var b=Eb(t,h*y,wr.meters);b!=null&&a.push(b)}return a},getPointWithHeadingAlongPath:Db,getPointsWithHeadingsAlongPath:function(t,n){if(n<=0)return[];for(var a=[],h=C1(t,wr.meters)/(n-1),y=0;y<n;y++){var b=Db(t,h*y,wr.meters);b!=null&&a.push(b)}return a},getClosestPointOnGeometry:fy}),wi=(ze(fn,zb=_p),fn.prototype.addProperty=function(t,n){Ho(this.data.properties[t],n)||(this.data.properties[t]=vi(n),t!=="subType"&&t!=="radius"||this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},fn.prototype.getBounds=function(){var t,n=this.getCoordinates(),a=this.getType();if(a==="Point")if(this.circlePolygon){var h=this.circlePolygon.geometry.coordinates;t=hr.fromPositions(h[0])}else t=new hr(h=n,h);else if(a==="MultiPoint"||a==="LineString")h=n,t=hr.fromPositions(h);else if(a==="Polygon")h=n,t=hr.fromPositions(h[0]);else if(a==="MultiLineString")for(var y=0,b=h=n;y<b.length;y++){var u=b[y];t=hr.merge(t,hr.fromPositions(u))}else if(a==="MultiPolygon")for(var A=0,k=h=n;A<k.length;A++){var G=k[A];t=hr.merge(t,hr.fromPositions(G[0]))}return t},fn.prototype.getCoordinates=function(){return vi(this.data.geometry.coordinates)},fn.prototype.getCircleCoordinates=function(){return this.circlePolygon?vi(this.circlePolygon.geometry.coordinates[0]):null},fn.prototype.getId=function(){return this.data.id},fn.prototype.getProperties=function(){return vi(this.data.properties)},fn.prototype.getType=function(){return this.data.geometry.type},fn.prototype.isCircle=function(){return fn._isCircle(this.data)},fn.prototype.isRectangle=function(){return fn._isRectangle(this.data)},fn.prototype.setCoordinates=function(t){var n;n=this.getType()==="Polygon"&&Po._getDimensions(t)===1?[t]:t,Ho(this.data.geometry.coordinates,n)||(this.data.geometry.coordinates=vi(n),this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},fn.prototype.setProperties=function(t){t[fn._shapeIdPropName]=this.data.id,Ho(this.data.properties,t)||(this.data.properties=vi(t),this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},fn.prototype.toJson=function(){return JSON.parse(JSON.stringify(this.data))},fn.prototype._toJson=function(){return this.circlePolygon||this.data},fn.prototype._setDataSource=function(t){t===void 0||t==null?delete this.dataSource:this.dataSource=t},fn.prototype._handleCircle=function(){if(this.isCircle()){var t=fn._getCirclePositions(this.data);this.circlePolygon=new xs(new my([t]),this.data.properties,this.data.id),this.data.properties.subType="Circle"}else delete this.circlePolygon},fn._isCircle=function(t){return t&&t.geometry&&t.geometry.type==="Point"&&t.geometry.coordinates&&t.properties&&typeof t.properties.subType=="string"&&t.properties.subType.toLowerCase()==="circle"&&typeof t.properties.radius=="number"},fn._isRectangle=function(t){if(t.geometry.type==="Polygon"&&t.geometry.coordinates&&typeof t.properties.subType=="string"&&t.properties.subType.toLowerCase()==="rectangle"){var n=t.geometry.coordinates;if(n.length===1){var a=n[0];if(a.length===5)return a[0][0]===a[4][0]&&a[0][1]===a[4][1];if(a.length===4)return!0}}return!1},fn._getCirclePositions=function(t){return Ib(t.geometry.coordinates,t.properties.radius,72,"meters")},fn._shapeIdPropName="_azureMapsShapeId",fn);function fn(t,n,a){var h,y=zb.call(this)||this;if(t.type==="Feature"){var b=t;h=vi(b.geometry),a=b.properties?vi(b.properties):{},n=b.id==null||b.id===""?gp():b.id}else h=vi(t),n=n==null||n===""?gp():n,a=a?vi(a):{};return a[fn._shapeIdPropName]=n,y.data=new xs(h,a,n),y._handleCircle(),y}var im,hr=(ze(ut,im=Array),ut.fromBoundingBox=function(t){var n=ut.getWest(t),a=ut.getSouth(t),h=ut.getEast(t),y=ut.getNorth(t);return new ut([n,a,h,y])},ut.fromDimensions=function(t,n,a){var h=t[0],y=t[1],b=Math.min(Math.max(y+a/2,-85.5),85.5),u=Math.min(Math.max(y-a/2,-85.5),85.5),A=Dn(h+n/2);return new ut([Dn(h-n/2),u,A,b])},ut.fromEdges=function(t,n,a,h){return new ut([t,n,a,h])},ut.containsPosition=function(t,n){var a=ut.getCenter(t),h=Math.abs(a[1]-n[1]),y=Math.abs(a[0]-n[0]);180<y&&(y=360-y);var b=ut.getHeight(t),u=ut.getWidth(t);return h<=b/2+1e-8&&y<=u/2+1e-8},ut.crossesAntimeridian=function(t){return Dn(ut.getEast(t))-Dn(ut.getWest(t))<0},ut.getCenter=function(t){var n=Dn(ut.getEast(t)),a=Dn(ut.getWest(t));n<a&&(n+=360);var h=Dn((a+n)/2),y=xi(ut.getSouth(t)),b=xi(ut.getNorth(t));return[h,xi((y+b)/2)]},ut.getHeight=function(t){var n=xi(ut.getNorth(t))-xi(ut.getSouth(t));return isNaN(n)?0:n},ut.getWidth=function(t){var n=Dn(ut.getEast(t))-Dn(ut.getWest(t));return isNaN(n)?0:n<0?n+=360:n},ut.getSouthWest=function(t){var n=this.getSouth(t),a=this.getWest(t);return isNaN(n)||isNaN(a)?null:[a,n]},ut.getNorthEast=function(t){var n=this.getNorth(t),a=this.getEast(t);return isNaN(n)||isNaN(a)?null:[a,n]},ut.getNorthWest=function(t){var n=this.getNorth(t),a=this.getWest(t);return isNaN(n)||isNaN(a)?null:[a,n]},ut.getSouthEast=function(t){var n=this.getSouth(t),a=this.getEast(t);return isNaN(n)||isNaN(a)?null:[a,n]},ut.getSouth=function(t){return t&&4<=t.length?Number(t[1]):NaN},ut.getWest=function(t){return t&&4<=t.length?Number(t[0]):NaN},ut.getNorth=function(t){if(t){if(t.length===4)return Number(t[3]);if(t.length===6)return Number(t[4])}return NaN},ut.getEast=function(t){if(t){if(t.length===4)return Number(t[2]);if(t.length===6)return Number(t[3])}return NaN},ut.intersect=function(t,n){var a=ut.getCenter(t),h=ut.getCenter(n),y=Math.abs(a[1]-h[1]),b=Math.abs(a[0]-h[0]);180<b&&(b=360-b);var u=ut.getHeight(t),A=ut.getWidth(t),k=ut.getHeight(n),G=ut.getWidth(n);return y<=u/2+k/2&&b<=A/2+G/2},ut.merge=function(t,n){var a=t&&t.length===4,h=n&&n.length===4;if(a&&!h)return t;if(h&&!a)return n;if(!a&&!h)return null;var y=Math.max(xi(ut.getNorth(t)),xi(ut.getNorth(n))),b=Math.min(xi(ut.getSouth(t)),xi(ut.getSouth(n))),u=[t,n],A=[],k=0;for(k=0;k<u.length;k++){var G=u[k],W=Dn(ut.getWest(G)),se=Dn(ut.getEast(G));ut.crossesAntimeridian(G)?(A.push([W,180]),A.push([-180,se])):A.push([W,se])}A.sort(function(tn,ho){return tn[0]===ho[0]?tn[1]-ho[1]:tn[0]-ho[0]});var ne=[],Ee=A[0];for(k=1;k<A.length;){var Ge=A[k];Ee[1]>=Ge[0]?Ee[1]=Math.max(Ee[1],Ge[1]):(ne.push(Ee),Ee=Ge),k++}ne.push(Ee);var pt=ne.length,Wt=ne[0][0]+360-ne[pt-1][1],nt=[ne[pt-1][1],ne[0][0]];for(k=1;k<pt;k++){var qt=ne[k][0]-ne[k-1][1];Wt<qt&&(Wt=qt,nt=[ne[k-1][1],ne[k][0]])}return new ut([nt[1],b],[nt[0],y])},ut.fromPositions=function(t){for(var n,a=NaN,h=NaN,y=NaN,b=NaN,u=t.length,A=new Array(u),k=0;u--;)if((n=t[u])&&2<=n.length){var G=xi(n[1]);a=isNaN(a)?G:Math.max(a,G),h=isNaN(h)?G:Math.min(h,G),A[k++]=Dn(n[0])}if(k){A.length=k,A.sort(function(Ee,Ge){return Ee-Ge});var W=A[0]+360-A[k-1],se=0;for(u=1;u<k;u++){var ne=A[u]-A[u-1];W<ne&&(W=ne,se=u)}y=A[se],b=A[(se||k)-1]}return isNaN(y)||isNaN(h)||isNaN(b)||isNaN(a)?null:new ut([y,h,b,a])},ut.fromLatLngs=function(t){return ut.fromPositions(Po.fromLatLngs(t))},ut.fromData=function(t){var n,a=null;if(Array.isArray(t)&&0<t.length){for(var h=0,y=t;h<y.length;h++){var b=y[h];(n=ut.fromData(b))!=null&&(a=a===null?n:ut.merge(a,n))}return a}if(t instanceof wi)return t.getBounds();if(t&&t.type){var u=t;if(u.bbox&&u.bbox.length===4)return u.bbox;switch(u.type){case"FeatureCollection":return ut.fromData(u.features);case"Feature":return wi._isCircle(u)?ut.fromPositions(wi._getCirclePositions(u)):ut.fromData(u.geometry);case"GeometryCollection":return ut.fromData(u.geometries);case"Point":var A=u.coordinates;if(A&&2<=A.length)return[A[0],A[1],A[0],A[1]];break;case"LineString":case"MultiPoint":return ut.fromPositions(u.coordinates);case"Polygon":case"MultiLineString":var k=u.coordinates;if(k&&0<k.length){for(var G=0,W=k.length;G<W;G++)(n=ut.fromPositions(k[G]))!=null&&(a=a===null?n:ut.merge(a,n));if(a!=null)return a}break;case"MultiPolygon":var se=u.coordinates;if(se&&0<se.length){for(G=0,W=se.length;G<W;G++)for(var ne=0,Ee=se[G].length;ne<Ee;ne++)(n=ut.fromPositions(se[G][ne]))!=null&&(a=a===null?n:ut.merge(a,n));return a}}}return null},ut.splitOnAntimeridian=function(t){var n=[];if(ut.crossesAntimeridian(t)){var a=void 0,h=void 0,y=Dn(ut.getWest(t)),b=Dn(ut.getEast(t)),u=xi(ut.getNorth(t)),A=xi(ut.getSouth(t));h=6<=t.length?(a=new ut([y,A,t[2],180,u,t[5]]),new ut([-180,A,t[2],b,u,t[5]])):(a=new ut([y,A,180,u]),new ut([-180,A,b,u])),n.push(a,h)}else n.push(new ut(t));return n},ut);function ut(t,n){var a=this;if(t&&n){var h=t;a=h[2]&&n[2]?im.call(this,h[0],h[1],h[2]||0,n[0],n[1],n[2]||0)||this:im.call(this,h[0],h[1],n[0],n[1])||this}else if(t){var y=t;y&&(y.length===4?a=im.call(this,y[0],y[1],y[2],y[3])||this:6<=y.length&&(a=im.call(this,y[0],y[1],y[2],y[3],y[4],y[5])||this))}return a}var xp=(M1.TYPE="FeatureCollection",M1);function M1(t,n){this.type="FeatureCollection",this.type=M1.TYPE,this.features=t,this.bbox=n}var TM=(A1.TYPE="GeometryCollection",A1);function A1(t){this.type="GeometryCollection",this.type=A1.TYPE,this.geometries=t}var EM=(L1.TYPE="LineString",L1);function L1(t,n){this.type="LineString",this.type=L1.TYPE,this.coordinates=t,this.bbox=n}var IM=(P1.TYPE="MultiLineString",P1);function P1(t,n){this.type="MultiLineString",this.type=P1.TYPE,this.coordinates=t,this.bbox=n}var kM=(D1.TYPE="MultiPoint",D1);function D1(t,n){this.type="MultiPoint",this.type=D1.TYPE,this.coordinates=t,this.bbox=n}var MM=(z1.TYPE="MultiPolygon",z1);function z1(t,n){this.type="MultiPolygon",this.type=z1.TYPE,this.coordinates=t,this.bbox=n}var Nb,Ob=Object.freeze({__proto__:null,Feature:xs,FeatureCollection:xp,LineString:EM,Point:Xs,Polygon:my,Position:Po,BoundingBox:hr,MultiLineString:IM,MultiPoint:kM,MultiPolygon:MM,GeometryCollection:TM}),Dr=function(t,n){return T2(t,5,n=typeof n=="function"?n:void 0)},Rb=(ze(Bb,Nb=sr),Bb);function Bb(){var t=Nb!==null&&Nb.apply(this,arguments)||this;return t.buffer=128,t.maxZoom=18,t.cluster=!1,t.clusterRadius=50,t.clusterMaxZoom=void 0,t.clusterProperties=void 0,t.lineMetrics=!1,t.tolerance=.375,t}var Fb,ai=(ze(vy,Fb=_p),vy.prototype.getId=function(){return this.id},vy.prototype._setMap=function(t){if(t==null||t===void 0){var n=this.map;delete this.map,this._invokeEvent("sourceremoved",this),n&&n.events.invoke("sourceremoved",this)}else this.map=t,this._invokeEvent("sourceadded",this),this.map.events.invoke("sourceadded",this)},vy);function vy(t){var n=Fb.call(this)||this;return n.id=t||gp(),n}var jb,Qs=(ze(ln,jb=ai),ln.prototype.add=function(t,n){this._addNoUpdate(t,n),this._updateSource()},ln.prototype.clear=function(){this._clearNoUpdate(),this._updateSource()},ln.prototype.dispose=function(){this.options=null,this.shapes=null,this.shapesMap=null,this.map=null},ln.prototype.getClusterExpansionZoom=function(t){var n=this;return new Promise(function(a,h){if(n.map){var y=n.map._getMap().getSource(n.getId());y&&y.type==="geojson"&&y.getClusterExpansionZoom(t,function(b,u){b?h(b):typeof u!="number"||a(u)})}else h("The DataSource hasn't been added to a map.")})},ln.prototype.getClusterChildren=function(t){var n=this;return new Promise(function(a,h){if(n.map){var y=n.map._getMap().getSource(n.getId());y&&y.type==="geojson"&&y.getClusterChildren(t,function(b,u){b?h(b):u&&a(n.map.sources._mapFeaturesToShapes(u,!1,n))})}else h("The DataSource hasn't been added to a map.")})},ln.prototype.getClusterLeaves=function(t,n,a){var h=this;return new Promise(function(y,b){if(h.map){var u=h.map._getMap().getSource(h.getId());u&&u.type==="geojson"&&u.getClusterLeaves(t,n,a,function(A,k){A?b(A):k&&y(h.map.sources._mapFeaturesToShapes(k,!1,h))})}else b("The DataSource hasn't been added to a map.")})},ln.prototype.getOptions=function(){return vi(this.options)},ln.prototype.getShapes=function(){return Array.from(this.shapes)},ln.prototype.importDataFromUrl=function(t){var n=this;return fetch(t,{method:"GET",mode:"cors"}).then(function(a){if(a.ok)return a.json();throw new Error("HTTP "+a.status+": "+a.statusText)}).then(function(a){n.add(a)})},ln.prototype.getShapeById=function(t){return this.shapes[this.shapesMap.get(t)]||null},ln.prototype.remove=function(t){for(var n=0,a=Array.isArray(t)?t:[t];n<a.length;n++){var h=a[n];typeof h=="number"?this._removeByIndex(h):this._removeById(h)}this._updateSource()},ln.prototype.removeById=function(t){for(var n=0,a=Array.isArray(t)?t:[t];n<a.length;n++){var h=a[n];this._removeById(h)}this._updateSource()},ln.prototype.setOptions=function(t){var n=new Rb().merge(this.options,vi(t));Ho(this.options,n)||(this._invokeEvent("datasourceupdated",this),this.options=n,this.map&&this.map._rebuildStyle())},ln.prototype.setShapes=function(t){this._clearNoUpdate(),this.add(t)},ln.prototype.toJson=function(){return new xp(this.shapes.map(function(t){return t.toJson()}))},ln.prototype._toJson=function(){return new xp(this.shapes.map(function(t){return t._toJson()}))},ln.prototype._buildSource=function(){var t={type:"geojson",data:this._toJson(),maxzoom:this.options.maxZoom,cluster:this.options.cluster,clusterRadius:this.options.clusterRadius,tolerance:this.options.tolerance,lineMetrics:this.options.lineMetrics,clusterProperties:this.options.clusterProperties,buffer:this.options.buffer};return typeof this.options.clusterMaxZoom=="number"&&(t.clusterMaxZoom=this.options.clusterMaxZoom),t},ln.prototype._addNoUpdate=function(t,n){var a;if(t instanceof wi)this._addToSources(t,n),a=[t];else if(Array.isArray(t))a=t.map(function(y){return y instanceof wi?y:new wi(y)}),this._addToSources(a,n);else if(t.type==="FeatureCollection")a=t.features.map(function(y){return new wi(y)}),this._addToSources(a,n);else if(t.type==="GeometryCollection")a=t.geometries.map(function(y){return new wi(y)}),this._addToSources(a,n);else{var h=new wi(t);this._addToSources(h,n),a=[h]}this._invokeEvent("dataadded",a)},ln.prototype._clearNoUpdate=function(){var t=this.shapes;this.shapes=[],this.shapesMap=new Ua,t&&0<t.length&&this._invokeEvent("dataremoved",t)},ln.prototype._updateSource=function(){var t=this;this.requestId===void 0&&(this.requestId=requestAnimationFrame(function(){t._updateMboxSource(),t.requestId=void 0}))},ln.prototype._addToSources=function(t,n){if(t=Array.isArray(t)?t:[t],typeof n!="number")for(var a=0,h=t;a<h.length;a++){var y=h[a];this.shapes.push(y),this.shapesMap.set(y.getId(),this.shapes.length-1)}else for(var b=t.length-1;0<=b;b--)this.shapes.splice(n,0,t[b]),this._updateShapesMap(n);for(var u=0,A=t;u<A.length;u++)(y=A[u])._setDataSource(this)},ln.prototype._removeById=function(t){var n,a=t instanceof wi?t.getId():typeof t=="string"||typeof t=="number"?t:t.id;(n=this.shapes[this.shapesMap.get(a)])&&(n._setDataSource(null),this.shapes.splice(this.shapesMap.get(a),1),this._updateShapesMap(this.shapesMap.get(a)),this.shapesMap.delete(a),this._invokeEvent("dataremoved",[n]))},ln.prototype._removeByIndex=function(t){var n;if(t>=this.shapes.length)throw new Error("The specified remove index '"+t+"' is greater than the maximum possible index '"+(this.shapes.length-1)+"'");n=this.shapes[t],this.shapesMap.delete(n.getId()),n._setDataSource(null),this.shapes.splice(t,1),this._updateShapesMap(t),this._invokeEvent("dataremoved",[n])},ln.prototype._updateShapesMap=function(t){for(var n=t;n<this.shapes.length;n++)this.shapesMap.set(this.shapes[n].getId(),n)},ln.prototype._updateMboxSource=function(){if(this.map&&this.map._getMap()){var t=this.map._getMap().getSource(this.getId());t&&t.type==="geojson"&&t.setData(this._toJson())}},ln);function ln(t,n){var a=jb.call(this,t)||this;return a.requestId=void 0,a.options=new Rb().merge(vi(n)),a.shapes=[],a.shapesMap=new Ua,a}var N1,AM=(ze(Ub,N1=sr),Ub);function Ub(){var t=N1!==null&&N1.apply(this,arguments)||this;return t.bounds=void 0,t.minZoom=0,t.maxZoom=22,t.isTMS=!1,t.tiles=void 0,t.tileSize=512,t.url=void 0,t}var Vb,LM=(ze(om,Vb=ai),om.prototype.getOptions=function(){return vi(this.options)},om.prototype.getShape=function(t,n){return this.map._getMap().querySourceFeatures(this.getId(),{sourceLayer:t,filter:n})},om.prototype._buildSource=function(){var t={type:"vector"};return this.options.bounds&&(t.bounds=this.options.bounds),this.options.tiles?(t.tiles=this.options.tiles,t.minzoom=this.options.minZoom,t.maxzoom=this.options.maxZoom):this.options.url&&(t.url=this.options.url),this.options.isTMS&&(t.scheme="tms"),this.options.tileSize&&(t.tileSize=this.options.tileSize),t},om);function om(t,n){var a=Vb.call(this,t)||this;return a.options=new AM().merge(vi(n)),a}var qb,PM=Object.freeze({__proto__:null,Source:ai,DataSource:Qs,VectorTileSource:LM}),zn=(ze(va,qb=_p),va.prototype.getId=function(){return this.id},va.prototype.getMap=function(){return this.map||null},va.prototype.onAdd=function(t){this.map=t,this._invokeEvent("layeradded",this),this.map.events.invoke("layeradded",this)},va.prototype.onRemove=function(){var t=this.map;delete this.map,this._invokeEvent("layerremoved",this),t&&t.events.invoke("layerremoved",this)},va._isMBoxEvent=function(t){return!this.LayerEvents.hasOwnProperty(t)},va.prototype._updateBaseProperties=function(t,n){this._updateFilter(t.filter,n.filter),this._updateZoomRange(t.minZoom,n.minZoom,t.maxZoom,n.maxZoom),this._updateLayoutProperty("visibility",t.visible,n.visible,t.visible?"visible":"none")},va.prototype._updateFilter=function(t,n){Ho(t,n)||this.map._getMap().setFilter(this.id,t)},va.prototype._updatePaintProperty=function(t,n,a,h){Ho(n,a)||this.map._getMap().setPaintProperty(this.id,t,h||n)},va.prototype._updateLayoutProperty=function(t,n,a,h){Ho(n,a)||this.map._getMap().setLayoutProperty(this.id,t,h||n)},va.prototype._updateZoomRange=function(t,n,a,h){t===n&&h===a||this.map._getMap().setLayerZoomRange(this.id,t,a)},va.LayerEvents={layeradded:void 0,layerremoved:void 0},va);function va(t){var n=qb.call(this)||this;return n.id=t||gp(),n}var O1,wp=(ze(R1,O1=sr),R1._cloneCustomizer=function(t){if(t instanceof ai)return t},R1);function R1(){var t=O1!==null&&O1.apply(this,arguments)||this;return t.filter=void 0,t.minZoom=0,t.maxZoom=24,t.visible=!0,t}var B1,am=(ze(Zb,B1=wp),Zb);function Zb(){var t=B1!==null&&B1.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.color="#1A73AA",t.blur=0,t.opacity=1,t.strokeColor="#FFFFFF",t.strokeOpacity=1,t.strokeWidth=2,t.pitchAlignment="viewport",t.radius=8,t}var Gb,F1=(ze(Wu,Gb=zn),Wu.prototype.getOptions=function(){return Dr(this.options,am._cloneCustomizer)},Wu.prototype.getSource=function(){return this.options.source},Wu.prototype.setOptions=function(t){var n=new am().merge(this.options,Dr(t,am._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("circle-blur",n.blur,this.options.blur),this._updatePaintProperty("circle-color",n.color,this.options.color),this._updatePaintProperty("circle-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("circle-radius",n.radius,this.options.radius),this._updatePaintProperty("circle-stroke-color",n.strokeColor,this.options.strokeColor),this._updatePaintProperty("circle-stroke-opacity",n.strokeOpacity,this.options.strokeOpacity),this._updatePaintProperty("circle-stroke-width",n.strokeWidth,this.options.strokeWidth),this._updatePaintProperty("circle-pitch-alignment",n.pitchAlignment,this.options.pitchAlignment)}this.options=n},Wu.prototype._buildLayers=function(){var t={id:this.id,type:"circle",source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"circle-color":this.options.color,"circle-blur":this.options.blur,"circle-opacity":this.options.opacity,"circle-stroke-color":this.options.strokeColor,"circle-stroke-opacity":this.options.strokeOpacity,"circle-stroke-width":this.options.strokeWidth,"circle-pitch-alignment":this.options.pitchAlignment,"circle-radius":this.options.radius},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(t.filter=this.options.filter),this.options.sourceLayer&&(t["source-layer"]=this.options.sourceLayer),[t]},Wu.prototype._getLayerIds=function(){return[this.id]},Wu.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},Wu);function Wu(t,n,a){var h=Gb.call(this,n)||this;return h.options=new am().merge(Dr(a,am._cloneCustomizer)),h.options.source=t||h.options.source,h}var j1,sm=(ze(U1,j1=wp),U1._cloneCustomizer=function(t){if(t instanceof ai)return t},U1);function U1(){var t=j1!==null&&j1.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.color=["interpolate",["linear"],["heatmap-density"],0,"rgba(0,0, 255,0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],t.intensity=1,t.opacity=1,t.radius=30,t.weight=1,t}var Hb,DM=(ze(Yu,Hb=zn),Yu.prototype.getOptions=function(){return Dr(this.options,sm._cloneCustomizer)},Yu.prototype.getSource=function(){return this.options.source},Yu.prototype.setOptions=function(t){var n=new sm().merge(this.options,Dr(t,sm._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("heatmap-color",n.color,this.options.color),this._updatePaintProperty("heatmap-intensity",n.intensity,this.options.intensity),this._updatePaintProperty("heatmap-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("heatmap-radius",n.radius,this.options.radius),this._updatePaintProperty("heatmap-weight",n.weight,this.options.weight)}this.options=n},Yu.prototype._buildLayers=function(){var t={id:this.id,type:"heatmap",source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"heatmap-color":this.options.color,"heatmap-intensity":this.options.intensity,"heatmap-opacity":this.options.opacity,"heatmap-radius":this.options.radius,"heatmap-weight":this.options.weight},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(t.filter=this.options.filter),this.options.sourceLayer&&(t["source-layer"]=this.options.sourceLayer),[t]},Yu.prototype._getLayerIds=function(){return[this.id]},Yu.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},Yu);function Yu(t,n,a){var h=Hb.call(this,n)||this;return h.options=new sm().merge(Dr(a,sm._cloneCustomizer)),h.options.source=t||h.options.source,h}var V1,Wb=(ze(Yb,V1=wp),Yb);function Yb(){var t=V1!==null&&V1.apply(this,arguments)||this;return t.contrast=0,t.fadeDuration=300,t.hueRotation=0,t.maxBrightness=1,t.minBrightness=0,t.opacity=1,t.saturation=0,t}var q1,lm=(ze(Z1,q1=Wb),Z1._cloneCustomizer=function(t){if(t instanceof ai)return t},Z1);function Z1(){var t=q1!==null&&q1.apply(this,arguments)||this;return t.url=void 0,t.coordinates=void 0,t}var G1,um=(ze(H1,G1=zn),H1.prototype._getSourceIds=function(){var t=new Set;return t.add(this._getSourceId()),t},H1);function H1(){return G1!==null&&G1.apply(this,arguments)||this}var Kb,zM=(ze(Yo,Kb=um),Yo.prototype.getOptions=function(){return Dr(this.options,lm._cloneCustomizer)},Yo.prototype.setOptions=function(t){var n=new lm().merge(this.options,Dr(t,lm._cloneCustomizer)),a=typeof t.url=="string"&&t.url!==this.getOptions().url,h=t.coordinates!==void 0&&t.coordinates!==this.getOptions().coordinates;if(this.map){this._updateBaseProperties(n,this.options),this._updatePaintProperty("raster-contrast",n.contrast,this.options.contrast),this._updatePaintProperty("raster-fade-duration",n.fadeDuration,this.options.fadeDuration),this._updatePaintProperty("raster-hue-rotate",n.hueRotation,this.options.hueRotation),this._updatePaintProperty("raster-brightness-max",n.maxBrightness,this.options.maxBrightness),this._updatePaintProperty("raster-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("raster-saturation",n.saturation,this.options.saturation);var y=this.map._getMap().getSource(this._getSourceId());y&&y.updateImage(n)}this.options=n,a?this.reloadImage():h&&this.updateTransform()},Yo.prototype.getPositions=function(t){return this.transform.then(function(n){return n.toTarget(t)})},Yo.prototype.getPixels=function(t){return this.transform.then(function(n){return n.toSource(t)})},Yo.getCoordinatesFromRefPoints=function(t,n,a,h){return new yy(a,h).toTarget([[0,0],[t,0],[t,n],[0,n]])},Yo.getCoordinatesFromEdges=function(t,n,a,h,y){typeof y!="number"&&(y=0);var b=[Math.min(h,a),n,Math.max(h,a),t],u=hr.getCenter(b);return kb([hr.getNorthWest(b),hr.getNorthEast(b),hr.getSouthEast(b),hr.getSouthWest(b)],u,y)},Yo.prototype._buildLayers=function(){var t={id:this.id,type:"raster",source:this._getSourceId(),layout:{visibility:this.options.visible?"visible":"none"},paint:{"raster-opacity":this.options.opacity,"raster-hue-rotate":this.options.hueRotation,"raster-brightness-min":this.options.minBrightness,"raster-brightness-max":this.options.maxBrightness,"raster-saturation":this.options.saturation,"raster-contrast":this.options.contrast,"raster-fade-duration":this.options.fadeDuration},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(t.filter=this.options.filter),[t]},Yo.prototype._getLayerIds=function(){return[this.id]},Yo.prototype._buildSource=function(){return{type:"image",url:this.options.url,coordinates:this.options.coordinates}},Yo.prototype._getSourceId=function(){return this.getId()+"-ImageSource"},Yo.prototype.reloadImage=function(){var t=this;this.options.url&&(this.transform=new Promise(function(n,a){t.img.onload=function(){var h=[[0,0],[t.img.width,0],[t.img.width,t.img.height],[0,t.img.height]];n(new yy(h,t.options.coordinates)),t.isLoading=!1},t.img.onerror=t.img.onabort=function(){a("Failed to load image")},t.isLoading=!0,t.img.src=t.options.url}))},Yo.prototype.updateTransform=function(){if(!this.isLoading){var t=[[0,0],[this.img.width,0],[this.img.width,this.img.height],[0,this.img.height]];this.transform=Promise.resolve(new yy(t,this.options.coordinates))}},Yo);function Yo(t,n){var a=Kb.call(this,n)||this;return a.isLoading=!1,a.options=new lm().merge(Dr(t,lm._cloneCustomizer)),a.img=new Image,a.reloadImage(),a}var W1,cm=(ze($b,W1=wp),$b);function $b(){var t=W1!==null&&W1.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.lineCap="round",t.lineJoin="round",t.blur=0,t.strokeColor="#1E90FF",t.strokeDashArray=void 0,t.strokeGradient=void 0,t.offset=0,t.strokeOpacity=1,t.translate=new Qi(0,0),t.translateAnchor="map",t.strokeWidth=2,t}var Xb,Y1=(ze(Ku,Xb=zn),Ku.prototype.getOptions=function(){return Dr(this.options,cm._cloneCustomizer)},Ku.prototype.getSource=function(){return this.options.source},Ku.prototype.setOptions=function(t){var n=new cm().merge(this.options,Dr(t,cm._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("line-blur",n.blur,this.options.blur),this._updateLayoutProperty("line-cap",n.lineCap,this.options.lineCap),this._updateLayoutProperty("line-join",n.lineJoin,this.options.lineJoin),this._updatePaintProperty("line-offset",n.offset,this.options.offset),this._updatePaintProperty("line-color",n.strokeColor,this.options.strokeColor),this._updatePaintProperty("line-dasharray",n.strokeDashArray,this.options.strokeDashArray),this._updatePaintProperty("line-gradient",n.strokeGradient,this.options.strokeGradient),this._updatePaintProperty("line-opacity",n.strokeOpacity,this.options.strokeOpacity),this._updatePaintProperty("line-width",n.strokeWidth,this.options.strokeWidth),this._updatePaintProperty("line-translate",n.translate,this.options.translate),this._updatePaintProperty("line-translate-anchor",n.translateAnchor,this.options.translateAnchor)}this.options=n},Ku.prototype._buildLayers=function(){return[ot(ot(ot(ot({id:this.id,type:"line"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none","line-cap":this.options.lineCap,"line-join":this.options.lineJoin},paint:ot(ot(ot({"line-blur":this.options.blur,"line-color":this.options.strokeColor},this.options.strokeDashArray&&{"line-dasharray":this.options.strokeDashArray}),this.options.strokeGradient&&{"line-gradient":this.options.strokeGradient}),{"line-offset":this.options.offset,"line-opacity":this.options.strokeOpacity,"line-translate":this.options.translate,"line-translate-anchor":this.options.translateAnchor,"line-width":this.options.strokeWidth})}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},Ku.prototype._getLayerIds=function(){return[this.id]},Ku.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},Ku);function Ku(t,n,a){var h=Xb.call(this,n)||this;return h.options=new cm().merge(Dr(a,cm._cloneCustomizer)),h.options.source=t||h.options.source,h}var K1,pm=(ze(Jb,K1=wp),Jb);function Jb(){var t=K1!==null&&K1.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.base=0,t.fillColor="#1E90FF",t.height=0,t.fillOpacity=1,t.fillPattern=void 0,t.translate=new Qi(0,0),t.translateAnchor="map",t.verticalGradient=!0,t}var Qb,NM=(ze($u,Qb=zn),$u.prototype.getOptions=function(){return Dr(this.options,pm._cloneCustomizer)},$u.prototype.getSource=function(){return this.options.source},$u.prototype.setOptions=function(t){var n=new pm().merge(this.options,Dr(t,pm._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("fill-extrusion-base",n.base,this.options.base),this._updatePaintProperty("fill-extrusion-color",n.fillColor,this.options.fillColor),this._updatePaintProperty("fill-extrusion-height",n.height,this.options.height),this._updatePaintProperty("fill-extrusion-opacity",n.fillOpacity,this.options.fillOpacity),this._updatePaintProperty("fill-extrusion-pattern",n.fillPattern,this.options.fillPattern),this._updatePaintProperty("fill-extrusion-translate",n.translate,this.options.translate),this._updatePaintProperty("fill-extrusion-translate-anchor",n.translateAnchor,this.options.translateAnchor),this._updatePaintProperty("fill-extrusion-vertical-gradient",n.verticalGradient,this.options.verticalGradient)}this.options=n},$u.prototype._buildLayers=function(){return[ot(ot(ot(ot({id:this.id,type:"fill-extrusion"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:ot(ot({"fill-extrusion-base":this.options.base,"fill-extrusion-height":this.options.height,"fill-extrusion-opacity":this.options.fillOpacity},this.options.fillPattern?{"fill-extrusion-pattern":this.options.fillPattern}:{"fill-extrusion-color":this.options.fillColor}),{"fill-extrusion-translate":this.options.translate,"fill-extrusion-translate-anchor":this.options.translateAnchor,"fill-extrusion-vertical-gradient":this.options.verticalGradient})}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},$u.prototype._getLayerIds=function(){return[this.id]},$u.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},$u);function $u(t,n,a){var h=Qb.call(this,n)||this;return h.options=new pm().merge(Dr(a,pm._cloneCustomizer)),h.options.source=t||h.options.source,h}var _y,hm=(ze($1,_y=wp),$1.prototype.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=!1,h=!1,y=0,b=t;y<b.length;y++){var u=b[y];u&&(u.hasOwnProperty("fillColor")?h=!(a=!0):u.hasOwnProperty("fillPattern")&&(a=!(h=!0)))}var A=_y.prototype.merge.apply(this,t);return a?A.fillPattern=void 0:h&&(A.fillColor=void 0),A},$1);function $1(){var t=_y!==null&&_y.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.fillColor="#1E90FF",t.fillOpacity=.5,t.fillPattern=void 0,t}var e3,X1=(ze(Xu,e3=zn),Xu.prototype.getOptions=function(){return Dr(this.options,hm._cloneCustomizer)},Xu.prototype.getSource=function(){return this.options.source},Xu.prototype.setOptions=function(t){var n=new hm().merge(this.options,Dr(t,hm._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("fill-color",n.fillColor,this.options.fillColor),this._updatePaintProperty("fill-opacity",n.fillOpacity,this.options.fillOpacity),this._updatePaintProperty("fill-pattern",n.fillPattern,this.options.fillPattern)}this.options=n},Xu.prototype._buildLayers=function(){var t={id:this.id,type:"fill",source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"fill-opacity":this.options.fillOpacity},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(t.filter=this.options.filter),this.options.sourceLayer&&(t["source-layer"]=this.options.sourceLayer),this.options.fillPattern?t.paint["fill-pattern"]=this.options.fillPattern:t.paint["fill-color"]=this.options.fillColor,[t]},Xu.prototype._getLayerIds=function(){return[this.id]},Xu.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},Xu);function Xu(t,n,a){var h=e3.call(this,n)||this;return h.options=new hm().merge(Dr(a,hm._cloneCustomizer)),h.options.source=t||h.options.source,h}var J1,OM=(ze(t3,J1=sr),t3);function t3(){var t=J1!==null&&J1.apply(this,arguments)||this;return t.allowOverlap=!1,t.anchor="bottom",t.ignorePlacement=!1,t.image="marker-blue",t.offset=new Qi(0,0),t.optional=!1,t.pitchAlignment="auto",t.rotation=0,t.rotationAlignment="auto",t.size=1,t.opacity=1,t}var Q1,RM=(ze(r3,Q1=sr),r3);function r3(){var t=Q1!==null&&Q1.apply(this,arguments)||this;return t.allowOverlap=!1,t.anchor="center",t.textField=void 0,t.font=["StandardFont-Regular"],t.ignorePlacement=!1,t.offset=new Qi(0,0),t.optional=!1,t.pitchAlignment="auto",t.rotation=0,t.rotationAlignment="auto",t.size=16,t.color="#000000",t.haloBlur=0,t.haloColor="rgba(0,0,0,0)",t.haloWidth=0,t.opacity=1,t}var e_,dm=(ze(n3,e_=wp),n3);function n3(){var t=e_!==null&&e_.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.iconOptions=new OM,t.textOptions=new RM,t.placement="point",t.lineSpacing=250,t}var i3,t_=(ze(Ju,i3=zn),Ju.prototype.getOptions=function(){return Dr(this.options,dm._cloneCustomizer)},Ju.prototype.getSource=function(){return this.options.source},Ju.prototype.setOptions=function(t){var n=new dm().merge(this.options,Dr(t,dm._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updateLayoutProperty("symbol-spacing",n.lineSpacing,this.options.lineSpacing),this._updateLayoutProperty("symbol-placement",n.placement,this.options.placement),this._updateLayoutProperty("icon-allow-overlap",n.iconOptions.allowOverlap,this.options.iconOptions.allowOverlap),this._updateLayoutProperty("icon-anchor",n.iconOptions.anchor,this.options.iconOptions.anchor),this._updateLayoutProperty("icon-ignore-placement",n.iconOptions.ignorePlacement,this.options.iconOptions.ignorePlacement),this._updateLayoutProperty("icon-image",n.iconOptions.image,this.options.iconOptions.image),this._updateLayoutProperty("icon-offset",n.iconOptions.offset,this.options.iconOptions.offset),this._updatePaintProperty("icon-opacity",n.iconOptions.opacity,this.options.iconOptions.opacity),this._updateLayoutProperty("icon-optional",n.iconOptions.optional,this.options.iconOptions.optional),this._updateLayoutProperty("icon-pitch-alignment",n.iconOptions.pitchAlignment,this.options.iconOptions.pitchAlignment),this._updateLayoutProperty("icon-rotate",n.iconOptions.rotation,this.options.iconOptions.rotation),this._updateLayoutProperty("icon-rotation-alignment",n.iconOptions.rotationAlignment,this.options.iconOptions.rotationAlignment),this._updateLayoutProperty("icon-size",n.iconOptions.size,this.options.iconOptions.size),this._updateLayoutProperty("text-allow-overlap",n.textOptions.allowOverlap,this.options.textOptions.allowOverlap),this._updateLayoutProperty("text-anchor",n.textOptions.anchor,this.options.textOptions.anchor),this._updatePaintProperty("text-color",n.textOptions.color,this.options.textOptions.color),this._updateLayoutProperty("text-font",n.textOptions.font,this.options.textOptions.font),this._updateLayoutProperty("text-ignore-placement",n.textOptions.ignorePlacement,this.options.textOptions.ignorePlacement),this._updatePaintProperty("text-halo-blur",n.textOptions.haloBlur,this.options.textOptions.haloBlur),this._updatePaintProperty("text-halo-color",n.textOptions.haloColor,this.options.textOptions.haloColor),this._updatePaintProperty("text-halo-width",n.textOptions.haloWidth,this.options.textOptions.haloWidth),this._updateLayoutProperty("text-offset",n.textOptions.offset,this.options.textOptions.offset),this._updatePaintProperty("text-opacity",n.textOptions.opacity,this.options.textOptions.opacity),this._updateLayoutProperty("text-optional",n.textOptions.optional,this.options.textOptions.optional),this._updateLayoutProperty("text-pitch-alignment",n.textOptions.pitchAlignment,this.options.textOptions.pitchAlignment),this._updateLayoutProperty("text-rotate",n.textOptions.rotation,this.options.textOptions.rotation),this._updateLayoutProperty("text-rotation-alignment",n.textOptions.rotationAlignment,this.options.textOptions.rotationAlignment),this._updateLayoutProperty("text-size",n.textOptions.size,this.options.textOptions.size),this._updateLayoutProperty("text-field",n.textOptions.textField,this.options.textOptions.textField)}this.options=n},Ju.prototype._buildLayers=function(){return[ot(ot(ot(ot({id:this.id,type:"symbol"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:ot(ot({visibility:this.options.visible?"visible":"none","symbol-placement":this.options.placement,"symbol-spacing":this.options.lineSpacing,"text-allow-overlap":this.options.textOptions.allowOverlap,"text-anchor":this.options.textOptions.anchor},this.options.textOptions.textField&&{"text-field":this.options.textOptions.textField}),{"text-font":this.options.textOptions.font,"text-ignore-placement":this.options.textOptions.ignorePlacement,"text-offset":this.options.textOptions.offset,"text-optional":this.options.textOptions.optional,"text-pitch-alignment":this.options.textOptions.pitchAlignment,"text-rotate":this.options.textOptions.rotation,"text-rotation-alignment":this.options.textOptions.rotationAlignment,"text-size":this.options.textOptions.size,"icon-allow-overlap":this.options.iconOptions.allowOverlap,"icon-anchor":this.options.iconOptions.anchor,"icon-ignore-placement":this.options.iconOptions.ignorePlacement,"icon-image":this.options.iconOptions.image,"icon-offset":this.options.iconOptions.offset,"icon-optional":this.options.iconOptions.optional,"icon-pitch-alignment":this.options.iconOptions.pitchAlignment,"icon-rotate":this.options.iconOptions.rotation,"icon-rotation-alignment":this.options.iconOptions.rotationAlignment,"icon-size":this.options.iconOptions.size}),paint:{"text-color":this.options.textOptions.color,"text-halo-blur":this.options.textOptions.haloBlur,"text-halo-color":this.options.textOptions.haloColor,"text-halo-width":this.options.textOptions.haloWidth,"text-opacity":this.options.textOptions.opacity,"icon-opacity":this.options.iconOptions.opacity}}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},Ju.prototype._getLayerIds=function(){return[this.id]},Ju.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},Ju);function Ju(t,n,a){var h=i3.call(this,n)||this;return h.options=new dm().merge(Dr(a,dm._cloneCustomizer)),h.options.source=t||h.options.source,h}var r_,fm=(ze(o3,r_=Wb),o3);function o3(){var t=r_!==null&&r_.apply(this,arguments)||this;return t.bounds=[-180,-85.0511,180,85.0511],t.minSourceZoom=0,t.maxSourceZoom=22,t.tileSize=512,t.isTMS=!1,t.subdomains=void 0,t.tileUrl=void 0,t}var a3,xy=(ze(jl,a3=um),jl.prototype.getOptions=function(){return Dr(this.options,fm._cloneCustomizer)},jl.prototype.setOptions=function(t){var n=new fm().merge(this.options,Dr(t,fm._cloneCustomizer));if(this.map){if(!Ho(n.bounds,this.options.bounds)||n.isTMS!==this.options.isTMS||n.maxSourceZoom!==this.options.maxSourceZoom||n.minSourceZoom!==this.options.minSourceZoom||!Ho(n.subdomains,this.options.subdomains)||n.tileSize!==this.options.tileSize||n.tileUrl!==this.options.tileUrl)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("raster-contrast",n.contrast,this.options.contrast),this._updatePaintProperty("raster-fade-duration",n.fadeDuration,this.options.fadeDuration),this._updatePaintProperty("raster-hue-rotate",n.hueRotation,this.options.hueRotation),this._updatePaintProperty("raster-brightness-max",n.maxBrightness,this.options.maxBrightness),this._updatePaintProperty("raster-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("raster-saturation",n.saturation,this.options.saturation)}this.options=n},jl.prototype._setOptionsNoUpdate=function(t){this.options=new fm().merge(this.options,Dr(t,fm._cloneCustomizer))},jl.prototype._buildLayers=function(){return[ot(ot({id:this.id,type:"raster",source:this._getSourceId(),layout:{visibility:this.options.visible?"visible":"none"},paint:{"raster-contrast":this.options.contrast,"raster-fade-duration":this.options.fadeDuration,"raster-hue-rotate":this.options.hueRotation,"raster-brightness-max":this.options.maxBrightness,"raster-brightness-min":this.options.minBrightness,"raster-opacity":this.options.opacity,"raster-saturation":this.options.saturation}},this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},jl.prototype._getLayerIds=function(){return[this.id]},jl.prototype._buildSource=function(){var t;if(this.options.tileUrl){if(this.options.tileUrl.indexOf("{")===-1)return{type:"raster",url:this.options.tileUrl};if(this.options.tileUrl.indexOf("{subdomain}")!==-1){if(!(this.options.subdomains&&0<this.options.subdomains.length))throw new Error("The {subdomain} placeholder was included in the tileUrl but no subdomains were specified");for(var n=[],a=0,h=this.options.subdomains;a<h.length;a++){var y=h[a];n.push(this.options.tileUrl.replace(/{subdomain}/g,y))}t=n}else t=[this.options.tileUrl]}return ot({type:"raster",bounds:this.options.bounds,maxzoom:this.options.maxSourceZoom,minzoom:this.options.minSourceZoom,scheme:this.options.isTMS?"tms":"xyz",tileSize:this.options.tileSize},t&&{tiles:t})},jl.prototype._getSourceId=function(){return this.getId()+"-RasterSource"},jl);function jl(t,n){var a=a3.call(this,n)||this;return t&&a.setOptions(t),a}var BM=Object.freeze({__proto__:null,BubbleLayer:F1,Layer:zn,LineLayer:Y1,PolygonExtrusionLayer:NM,PolygonLayer:X1,SymbolLayer:t_,TileLayer:xy,HeatMapLayer:DM,ImageLayer:zM}),s3=(l3.convertHtmlString=function(t){if(typeof t!="string")return t;var n=document.createElement("div");return n.innerHTML=t,n},l3);function l3(){}var u3,FM=Function.prototype,lT=Object.prototype,uT=FM.toString,jM=lT.hasOwnProperty,cT=uT.call(Object),k2=function(t){if(!$s(t)||pp(t)!="[object Object]")return!1;var n=a1(t);if(n===null)return!0;var a=jM.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&uT.call(a)==cT},c3=function(t){return $s(t)&&t.nodeType===1&&!k2(t)},mm=(ze(n_,u3=sr),n_._cloneCustomizer=function(t){if(c3(t))return t},n_);function n_(){var t=u3!==null&&u3.apply(this,arguments)||this;return t.anchor="none",t.draggable=!1,t.closeButton=!0,t.content=document.createElement("span"),t.fillColor="#FFFFFF",t.pixelOffset=new Qi(0,0),t.position=new Po(0,0),t.showPointer=!0,t}var p3,i_=(ze(mn,p3=_p),mn.prototype.setPopupOptions=function(t){this.setOptions(t)},mn.prototype.setOptions=function(t){var n=new mm().merge(this.options,Dr(t,mm._cloneCustomizer));n.content!==this.options.content?(this.htmlContent.remove(),this.htmlContent=this._createHtmlContent(n),this.contentDiv.prepend(this.htmlContent)):n.draggable!==this.options.draggable&&this._setDraggable(this.htmlContent,n.draggable),n.closeButton&&!this.closeBtn?(this.closeBtn=this._createCloseButton(),this.contentDiv.appendChild(this.closeBtn)):!n.closeButton&&this.closeBtn&&(this.contentDiv.removeChild(this.closeBtn),delete this.closeBtn),n.showPointer&&!this.arrowDiv?(this.arrowDiv=this._createArrowDiv(),this.containerDiv.appendChild(this.arrowDiv)):!n.showPointer&&this.arrowDiv&&(this.containerDiv.removeChild(this.arrowDiv),delete this.arrowDiv),n.fillColor!==this.options.fillColor&&(this.containerDiv.style.borderColor=n.fillColor,this.contentDiv.style.backgroundColor=n.fillColor),this.marker&&(n.anchor!==this.options.anchor?this.options.anchor==="none"?(this.autoAnchor!==n.anchor&&this._replaceMarker(this.map,n),this.map.events.remove("move",this._onMove),delete this.autoAnchor):(this._replaceMarker(this.map,n),n.anchor==="none"&&this.map.events.add("move",this._onMove)):(Ho(n.position,this.options.position)||this.marker.setLngLat(n.position),Ho(n.pixelOffset,this.options.pixelOffset)||this.marker.setOffset(n.pixelOffset))),this.options=n},mn.prototype.getPopupOptions=function(){return this.getOptions()},mn.prototype.getOptions=function(){return Dr(this.options,mm._cloneCustomizer)},mn.prototype._dragToPixel=function(t){this.dragging||(this.dragging=!0,this.contentDiv.style.pointerEvents="none",this._invokeEvent("dragstart",{type:"dragstart",target:this}));var n=[t[0]+this.dragOffset[0],t[1]+this.dragOffset[1]],a=this.map.pixelsToPositions([n])[0];this.options.position=a,this.marker.setLngLat(this.options.position),this._invokeEvent("drag",{type:"drag",target:this})},mn.prototype._onUp=function(){this.dragging&&(this.contentDiv.style.pointerEvents="",this._invokeEvent("dragend",{type:"dragend",target:this}),this.options.anchor==="none"&&this._onMove()),delete this.dragOffset,delete this.dragging},mn.prototype._createContainerDiv=function(t){var n=this,a=document.createElement("div");a.classList.add(mn.Css.container),a.classList.add(mn.Css.hidden),a.style.borderColor=t.fillColor,a.setAttribute("role","dialog"),a.setAttribute("aria-label","Map Information Window");var h=!1;return a.addEventListener("keydown",function(y){y.key!=="Tab"&&y.key!=="Escape"&&y.key!=="Esc"||(h=!0)}),a.addEventListener("keyup",function(y){y.key!=="Tab"&&y.key!=="Escape"&&y.key!=="Esc"||(h=!1)}),a.addEventListener("focusin",function(y){n.map&&!n.isOpen()&&(n.open(n.map),y.target instanceof HTMLElement&&y.target.focus())}),a.addEventListener("focusout",function(y){h&&y.relatedTarget instanceof Node&&!a.contains(y.relatedTarget)&&(h=!1,n.isOpen()&&n.close())}),a},mn.prototype._createContentDiv=function(t){var n=document.createElement("div");return n.classList.add(mn.Css.content),n.style.backgroundColor=t.fillColor,n.setAttribute("tabindex","0"),this.htmlContent=this._createHtmlContent(t),n.appendChild(this.htmlContent),n},mn.prototype._createArrowDiv=function(){var t=document.createElement("div");return t.classList.add(mn.Css.arrow),t},mn.prototype._createCloseButton=function(){var t=document.createElement("button");return t.addEventListener("click",this.close),t.classList.add(mn.Css.close),t.setAttribute("aria-label","close"),t.setAttribute("title","close"),t.setAttribute("tabindex","0"),t.innerHTML="&times;",t},mn.prototype._createHtmlContent=function(t){var n=s3.convertHtmlString(t.content);return t.draggable&&this._setDraggable(n,t.draggable),n},mn.prototype._createMarker=function(t,n){var a=this.marker?this.marker.getLngLat():t.position;return t.anchor==="none"?(this.autoAnchor=n||"bottom",this.containerDiv.classList.add(this.autoAnchor),new Z({anchor:this.autoAnchor,element:this.containerDiv,offset:t.pixelOffset}).setLngLat(a)):(this.containerDiv.classList.add(t.anchor),new Z({anchor:t.anchor,element:this.containerDiv,offset:t.pixelOffset}).setLngLat(a))},mn.prototype._getAutoAnchor=function(t,n){var a,h,y=this.containerDiv.offsetWidth,b=this.containerDiv.offsetHeight;if(this.marker){var u=t._getMap().project(this.marker.getLngLat());a=u.x,h=u.y}else{var A=t.positionsToPixels([n.position])[0];a=A[0],h=A[1]}var k=[];return h<b?k.push("top"):h>t.getCanvas().offsetHeight-b&&k.push("bottom"),a<y/2?k.push("left"):a>t.getCanvas().offsetWidth-y/2&&k.push("right"),0<k.length?k.join("-"):"bottom"},mn.prototype._replaceMarker=function(t,n,a){var h=this.containerDiv.nextElementSibling;this.marker.remove(),this.containerDiv.classList.remove(this.autoAnchor||this.options.anchor),this.marker=this._createMarker(n,a),this.marker.addTo(t._getMap()),t.popups._getCollectionDiv().insertBefore(this.containerDiv,h||null)},mn.prototype._setDraggable=function(t,n){n?(t.addEventListener("mousedown",this._onDown),t.addEventListener("touchstart",this._onDown),t.addEventListener("dragstart",this._onDragStart)):(t.removeEventListener("mousedown",this._onDown),t.removeEventListener("touchstart",this._onDown),t.removeEventListener("dragstart",this._onDragStart))},mn.Css={arrow:"popup-arrow",close:"popup-close",container:"popup-container",content:"popup-content-container",hidden:"hidden-accessible-element"},mn);function mn(t){var n=p3.call(this)||this;return n.attach=function(a){n.map!==a&&(n.map&&n.remove(),n.map=a,n.marker=n._createMarker(n.options),n.marker.addTo(n.map._getMap()),n.map.popups._getCollectionDiv().appendChild(n.containerDiv),n.map.popups.add(n))},n.open=function(a){if(!a&&!n.map)throw new Error("Must specify a map to open on or attach to a map in advance");n.attach(a||n.map),n.containerDiv.classList.remove(mn.Css.hidden),n.map.events.add("move",n._onMove),n._onMove(),n._invokeEvent("open",{target:n,type:"open"})},n.close=function(){n.map&&n.map.events.remove("move",n._onMove),n.containerDiv.classList.add(mn.Css.hidden),n._invokeEvent("close",{target:n,type:"close"})},n.remove=function(){n.map&&(n.marker.remove(),n.containerDiv.classList.remove(n.autoAnchor||n.options.anchor),n.map.events.remove("move",n._onMove),n.map.popups.remove(n),delete n.map,delete n.marker,delete n.autoAnchor)},n.isOpen=function(){return n.map&&!n.containerDiv.classList.contains(mn.Css.hidden)},n._onMove=function(){var a=n._getAutoAnchor(n.map,n.options);a!==n.autoAnchor&&(n._replaceMarker(n.map,n.options,a),n.map.events.add("move",n._onMove))},n._onDown=function(a){n.map.popups._addDraggedPopup(n);var h=n.map.positionsToPixels([n.options.position])[0];a.type==="mousedown"?(a=a,n.dragOffset=[h[0]-a.clientX,h[1]-a.clientY]):a.type==="touchstart"&&(a=a,n.dragOffset=[h[0]-a.touches[0].clientX,h[1]-a.touches[0].clientY])},n._onDragStart=function(a){a.preventDefault()},n.options=new mm().merge(Dr(t,mm._cloneCustomizer)),n.containerDiv=n._createContainerDiv(n.options),n.contentDiv=n._createContentDiv(n.options),n.containerDiv.appendChild(n.contentDiv),n.options.showPointer&&(n.arrowDiv=n._createArrowDiv(),n.containerDiv.appendChild(n.arrowDiv)),n.options.closeButton&&(n.closeBtn=n._createCloseButton(),n.contentDiv.appendChild(n.closeBtn)),n}var o_,gm=(ze(a_,o_=sr),a_._cloneCustomizer=function(t){if(t instanceof i_||c3(t))return t},a_);function a_(){var t=o_!==null&&o_.apply(this,arguments)||this;return t.anchor="bottom",t.color="#1A73AA",t.draggable=!1,t.htmlContent='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24.5 36.5" id="marker_'+gp()+'" width="24.5" height="36.5" display="block"><path d="M12.25.25a12.2543,12.2543,0,0,0-12,12.4937c0,6.4436,6.4879,12.1093,11.059,22.5641.5493,1.2563,1.3327,1.2563,1.882,0C17.7621,24.8529,24.25,19.1857,24.25,12.7437A12.2543,12.2543,0,0,0,12.25.25Z"   fill="{color}" stroke="{secondaryColor}" stroke-width="0.5"/><text style="font-family: Arial, Helvetica, sans-serif; font-size: 14px; fill: white;" text-anchor="middle" x="12" y="18">{text}</text></svg>',t.pixelOffset=new Qi(0,0),t.position=new Po(0,0),t.popup=void 0,t.secondaryColor="white",t.text=void 0,t.visible=!0,t}var h3,s_=(ze(si,h3=_p),si.prototype.getOptions=function(){return Dr(this.options,gm._cloneCustomizer)},si.prototype.setOptions=function(t){var n=new gm().merge(this.options,Dr(t,gm._cloneCustomizer));Ho(n.htmlContent,this.options.htmlContent)&&n.anchor===this.options.anchor?(typeof n.htmlContent!="string"||n.color===this.options.color&&n.text===this.options.text&&n.secondaryColor===this.options.secondaryColor||(this.element.innerHTML=this._getSubbedHtmlString(n)),n.draggable!==this.options.draggable&&(this._setDraggable(n.draggable),this.marker.setDraggable(n.draggable)),Ho(n.pixelOffset,this.options.pixelOffset)||this.marker.setOffset(n.pixelOffset),Ho(n.position,this.options.position)||this.marker.setLngLat(n.position),n.visible!==this.options.visible&&(n.visible?this.element.classList.remove(si.hiddenClass):this.element.classList.add(si.hiddenClass))):(this.marker.remove(),this._buildMarker(n),this.map&&(this.marker.addTo(this.map._getMap()),this._getCollectionContainer().appendChild(this.element))),this.options=n},si.prototype.togglePopup=function(){if(this.options.popup)if(this.options.popup.isOpen())this.options.popup.close();else{if(!this.map)throw new Error("The marker must be added to a map before calling togglePopup().");this.options.popup.setOptions({position:this.options.position}),this.options.popup.open(this.map)}},si.prototype._addToMap=function(t,n){this.map&&this.map!==t&&this._removeFromMap(),n&&(this.options.position=vi(n),this.marker.setLngLat(this.options.position)),this.map!==t&&(this.map=t,this.marker.addTo(t._getMap()),this._getCollectionContainer().appendChild(this.element))},si.prototype._removeFromMap=function(){this.map&&(this.marker.remove(),delete this.map)},si.prototype._getId=function(){if(this.element)return typeof this.options.htmlContent=="string"?this.element.firstChild.id:this.element.id},si.prototype._buildMarker=function(t){if(typeof t.htmlContent=="string"){var n=this._getSubbedHtmlString(t);this.element=s3.convertHtmlString(n)}else this.element=t.htmlContent;this.element.classList.add(si.containerClass),t.draggable&&this._setDraggable(!0),t.visible||this.element.classList.add(si.hiddenClass),this.marker=new Z({element:this.element,offset:t.pixelOffset,draggable:t.draggable,anchor:t.anchor}).setLngLat(t.position),this.marker.on("drag",this._onDrag),this.marker.on("dragstart",this._onDragStart),this.marker.on("dragend",this._onDragEnd),this.element.addEventListener("click",this._bubbleElementEvent),this.element.addEventListener("dblclick",this._bubbleElementEvent),this.element.addEventListener("contextmenu",this._bubbleElementEvent),this.element.addEventListener("keydown",this._bubbleElementEvent),this.element.addEventListener("keypress",this._bubbleElementEvent),this.element.addEventListener("keyup",this._bubbleElementEvent),this.element.addEventListener("mousedown",this._bubbleElementEvent),this.element.addEventListener("mouseenter",this._bubbleElementEvent),this.element.addEventListener("mouseleave",this._bubbleElementEvent),this.element.addEventListener("mousemove",this._bubbleElementEvent),this.element.addEventListener("mouseout",this._bubbleElementEvent),this.element.addEventListener("mouseover",this._bubbleElementEvent),this.element.addEventListener("mouseup",this._bubbleElementEvent)},si.prototype._getSubbedHtmlString=function(t){if(typeof t.htmlContent=="string")return t.htmlContent.replace(/{color}/gi,t.color||"").replace(/{secondaryColor}/gi,t.secondaryColor||"").replace(/{text}/gi,t.text||"")},si.prototype._getCollectionContainer=function(){var t=this.map.getCanvasContainer().querySelector("."+si.collectionContainerClass);return t||((t=document.createElement("div")).classList.add(si.collectionContainerClass),this.map.getCanvasContainer().appendChild(t)),t},si.prototype._setDraggable=function(t){t?this.element.addEventListener("dragstart",this._onEleDragStart):this.element.removeEventListener("dragstart",this._onEleDragStart)},si.collectionContainerClass="marker-collection-container",si.hiddenClass="hidden-accessible-element",si.containerClass="marker-container",si);function si(t){var n=h3.call(this)||this;return n._onDrag=function(){var a=n.marker.getLngLat().wrap();n.options.position=new Po(a.lng,a.lat),n._invokeEvent("drag",{type:"drag",target:n})},n._onDragStart=function(){n._invokeEvent("dragstart",{type:"dragstart",target:n})},n._onDragEnd=function(){n._invokeEvent("dragend",{type:"dragend",target:n})},n._bubbleElementEvent=function(a){n._invokeEvent(a.type,{type:a.type,target:n})},n._onEleDragStart=function(a){a.preventDefault()},n.options=new gm().merge(Dr(t,gm._cloneCustomizer)),n._buildMarker(n.options),n}var l_=function(t,n,a){(a===void 0||qf(t[n],a))&&(a!==void 0||n in t)||Qv(t,n,a)},UM=function(t){return function(n,a,h){for(var y=-1,b=Object(n),u=h(n),A=u.length;A--;){var k=u[t?A:++y];if(a(b[k],k,b)===!1)break}return n}}(),VM=function(t){return $s(t)&&ly(t)},u_=function(t,n){if((n!=="constructor"||typeof t[n]!="function")&&n!="__proto__")return t[n]},qM=function(t){return Kf(t,uy(t))},ZM=function(t,n,a,h,y,b,u){var A=u_(t,a),k=u_(n,a),G=u.get(k);if(G)l_(t,a,G);else{var W=b?b(A,k,a+"",t,n,u):void 0,se=W===void 0;if(se){var ne=fp(k),Ee=!ne&&$f(k),Ge=!ne&&!Ee&&r1(k);W=k,ne||Ee||Ge?W=fp(A)?A:VM(A)?Rw(A):Ee?Ow(k,!(se=!1)):Ge?$w(k,!(se=!1)):[]:k2(k)||e1(k)?e1(W=A)?W=qM(A):Gf(A)&&!Xv(A)||(W=Jw(k)):se=!1}se&&(u.set(k,W),y(W,k,h,b,u),u.delete(k)),l_(t,a,W)}},GM=function t(n,a,h,y,b){n!==a&&UM(a,function(u,A){if(b=b||new Yf,Gf(u))ZM(n,a,A,h,t,y,b);else{var k=y?y(u_(n,A),u,A+"",n,a,b):void 0;k===void 0&&(k=u),l_(n,A,k)}},uy)};function d3(t){return t}var HM=function(t,n,a){switch(a.length){case 0:return t.call(n);case 1:return t.call(n,a[0]);case 2:return t.call(n,a[0],a[1]);case 3:return t.call(n,a[0],a[1],a[2])}return t.apply(n,a)},f3=Math.max,WM=function(t,n,a){return n=f3(n===void 0?t.length-1:n,0),function(){for(var h=arguments,y=-1,b=f3(h.length-n,0),u=Array(b);++y<b;)u[y]=h[n+y];y=-1;for(var A=Array(n+1);++y<n;)A[y]=h[y];return A[n]=a(u),HM(t,this,A)}},YM=function(t){return function(){return t}},KM=sy?function(t,n){return sy(t,"toString",{configurable:!0,enumerable:!1,value:YM(n),writable:!0})}:d3,$M=Date.now,XM=function(t){var n=0,a=0;return function(){var h=$M(),y=16-(h-a);if(a=h,0<y){if(800<=++n)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}(KM),JM=function(t,n){return XM(WM(t,n,d3),t+"")},QM=function(t,n,a){if(!Gf(a))return!1;var h=typeof n;return!!(h=="number"?ly(a)&&Lw(n,a.length):h=="string"&&n in a)&&qf(a[n],t)},e6=function(t){return JM(function(n,a){var h=-1,y=a.length,b=1<y?a[y-1]:void 0,u=2<y?a[2]:void 0;for(b=3<t.length&&typeof b=="function"?(y--,b):void 0,u&&QM(a[0],a[1],u)&&(b=y<3?void 0:b,y=1),n=Object(n);++h<y;){var A=a[h];A&&t(n,A,h,b)}return n})}(function(t,n,a){GM(t,n,a)}),m3=(g3.parse=function(t){var n=(t=t.toLowerCase()).lastIndexOf("-");return n!==-1?{code:t,language:t.substring(0,n),region:t.substring(n+1)}:{code:t,language:t}},g3);function g3(){}var bp={localizationsPath:"locs/mapcontrol/2019-3-12",sensitiveUserRegions:["il","kr","pk","in","cn","ar","bh","eg","jo","sa","kw","om","qa","ma","ae"],locales:{defaultLanguage:{defaultRegion:{code:"NGT",strings:"en/resource.json"}},ar:{defaultRegion:{code:"ar",strings:"ar-sa/resource.json"}},bg:{defaultRegion:{code:"bg-BG",strings:"bg-bg/resource.json"}},cs:{defaultRegion:{code:"cs-CZ",strings:"cs-cz/resource.json"}},da:{defaultRegion:{code:"da-DK",strings:"da-dk/resource.json"}},de:{defaultRegion:{code:"de-DE",strings:"de-de/resource.json"}},el:{defaultRegion:{code:"el-GR",strings:"el-gr/resource.json"}},en:{defaultRegion:{code:"en",strings:"en/resource.json"},us:{code:"en-US",strings:"en/resource.json"}},es:{defaultRegion:{code:"es-ES",strings:"es-es/resource.json"},mx:{code:"es-MX",strings:"es-mx/resource.json"}},fi:{defaultRegion:{code:"fi-FI",strings:"fi-fi/resource.json"}},fr:{defaultRegion:{code:"fr-FR",strings:"fr-fr/resource.json"}},hu:{defaultRegion:{code:"hu-HU",strings:"hu-hu/resource.json"}},id:{defaultRegion:{code:"id-ID",strings:"id-id/resource.json"}},it:{defaultRegion:{code:"it-IT",strings:"it-it/resource.json"}},ko:{defaultRegion:{code:"ko-KR",strings:"ko-kr/resource.json"}},lt:{defaultRegion:{code:"lt-LT",strings:"lt-lt/resource.json"}},ms:{defaultRegion:{code:"ms-MY",strings:"ms-my/resource.json"}},nb:{defaultRegion:{code:"nb-NO",strings:"nb-no/resource.json"}},nl:{defaultRegion:{code:"nl-NL",strings:"nl-nl/resource.json"}},pl:{defaultRegion:{code:"pl-PL",strings:"pl-pl/resource.json"}},pt:{defaultRegion:{code:"pt-PT",strings:"pt-pt/resource.json"},br:{code:"pt-BR",strings:"pt-br/resource.json"}},ru:{defaultRegion:{code:"ru-RU",strings:"ru-ru/resource.json"}},sk:{defaultRegion:{code:"sk-SK",strings:"sk-sk/resource.json"}},sl:{defaultRegion:{code:"sl-SL",strings:"sl-sl/resource.json"}},sv:{defaultRegion:{code:"sv-SE",strings:"sv-se/resource.json"}},th:{defaultRegion:{code:"th-TH",strings:"th-th/resource.json"}},tr:{defaultRegion:{code:"tr-TR",strings:"tr-tr/resource.json"}},zh:{defaultRegion:{code:"zh-Hant",strings:"zh-tw/resource.json"}},"zh-hant":{defaultRegion:{code:"zh-Hant",strings:"zh-tw/resource.json"}}}},t6=function(){this.Unknown="Unknown",this.Accident="Accident",this.Fog="Fog",this.Danger="Danger",this.Rain="Rain",this.Ice="Ice",this.Jam="Jam",this.LaneClosed="Lane Closed",this.RoadClosed="Road Closed",this.RoadWorks="Road Works",this.Wind="Wind",this.Flood="Flood",this.Detour="Detour"},wy=(by.getCode=function(t){var n=m3.parse(t);return bp.sensitiveUserRegions.indexOf(n.region)===-1?this.getLocaleData(n).code:t},by.getStrings=function(t){var n=this.getLocaleData(t);return new gi({domain:oe,path:bp.localizationsPath+"/"+n.strings}).get().then(function(a){return a},function(){return new t6})},by.getLocaleData=function(t){if(typeof t=="string"&&(t=m3.parse(t)),bp.locales[t.code])return bp.locales[t.code].defaultRegion;var n;if(bp.locales[t.language])n=bp.locales[t.language];else{if(t.language.indexOf("-")!==-1)return this.getLocaleData(t.language);n=bp.locales.defaultLanguage}return t.region&&n[t.region]?n[t.region]:n.defaultRegion},by);function by(){}var c_,r6=(Cy.getEdgeOrIEVersion=function(){var t=window.navigator.userAgent,n=t.indexOf("MSIE ");if(0<n)return parseInt(t.substring(n+5,t.indexOf(".",n)),10);if(0<t.indexOf("Trident/")){var a=t.indexOf("rv:");return parseInt(t.substring(a+3,t.indexOf(".",a)),10)}var h=t.indexOf("Edge/");return 0<h?parseInt(t.substring(h+5,t.indexOf(".",h)),10):-1},Cy.isEdgeOrIE=function(){return this.getEdgeOrIEVersion()!==-1},Cy.isIE=function(){var t=this.getEdgeOrIEVersion();return t!==-1&&t<=11},Cy);function Cy(){}(c_=d.AuthenticationType||(d.AuthenticationType={})).subscriptionKey="subscriptionKey",c_.aad="aad",c_.anonymous="anonymous";var Sy,Ty,y3=(ze(nd,Sy=sr),nd.prototype.setSubscriptionKey=function(t){this.authType=d.AuthenticationType.subscriptionKey,this.subscriptionKey=t},nd.prototype.setAadProperties=function(t,n,a,h,y){this.authType=d.AuthenticationType.aad,this.authContext=y||this.authContext,this.aadInstance=h||this.aadInstance,this.clientId=t,this.aadAppId=n,this.aadTenant=a},nd.prototype.setTokenCallbackFunction=function(t){this.authType=d.AuthenticationType.anonymous,this.getToken=t},nd.prototype.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=Sy.prototype.merge.apply(this,t);return a.authType===d.AuthenticationType.subscriptionKey?a.authContext=a.aadAppId=a.getToken=void 0:a.authType===d.AuthenticationType.aad?a.subscriptionKey=a.getToken=void 0:a.authType===d.AuthenticationType.anonymous&&(a.subscriptionKey=a.authContext=a.aadAppId=void 0),a},nd);function nd(){var t=Sy!==null&&Sy.apply(this,arguments)||this;return t.authType=void 0,t.subscriptionKey=void 0,t.clientId=void 0,t.aadAppId=void 0,t.aadTenant=void 0,t.aadInstance=void 0,t.getToken=void 0,t.authContext=void 0,t}var v3="NGT",_3=gp(),x3=X,w3=_e,id=new y3,p_=!1,b3=!1,C3=!1,S3=!1,T3=!1,h_=!1;function E3(){return Object.assign({},id)}function d_(){return x3}function I3(){return w3}function k3(){return v3}function M3(){return _3}function A3(){return id.authType===d.AuthenticationType.subscriptionKey?id.subscriptionKey:void 0}function L3(){return Ty}function f_(t){return!r6.isIE()&&I.supported({failIfMajorPerformanceCaveat:t})}function P3(t){id=new y3().merge(id,t),h_=!0}function D3(t){x3=t,b3=!0}function z3(t){w3=t,C3=!0}function N3(t){v3=wy.getCode(t),S3=!0}function O3(t){_3=t,T3=!0}function R3(t){id.setSubscriptionKey(t),h_=!0}function B3(t){Ty=t,p_=!0}function F3(t,n){if(n=Math.abs(n||1),typeof t=="string"&&ym[t.toLowerCase()]){for(var a=ym[t.toLowerCase()],h=/calc\(([0-9.]+)[px]*\s*\*\s*\{scale\}\)/gi,y=a,b=h.exec(a);b;)y=y.replace(b[0],parseFloat(b[1])*n+""),b=h.exec(a);return y.replace("{scale}",n+"")}throw new Error("Invalid templateName.")}function m_(){return h_}function j3(){return b3}function U3(){return C3}function V3(){return S3}function q3(){return T3}function Z3(){return p_}var Cp,Ey,et,Qu,Sp,od,ym={marker:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 26 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:1"/><text x="12.5" y="17.5" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 27 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:2"/><text x="12.5" y="18.5" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-circle":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 27 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:1"/><circle cx="12.5" cy="12.5" r="9" fill="{secondaryColor}"/><text x="12" y="17.5" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(24 * {scale})" height="calc(28 * {scale})" viewBox="0 0 24 28"><path d="m11.988 16.615a5.15 5.15 0 0 1-2.268-.525 4.909 4.909 0 0 1-2.805-4.442 5.019 5.019 0 0 1 5.072-4.936h.012a5.03 5.03 0 0 1 5.085 4.961 4.907 4.907 0 0 1-.549 2.224 5.114 5.114 0 0 1-4.548 2.718zm0-8.06a3.173 3.173 0 0 0-3.226 3.099 3.081 3.081 0 0 0 1.77 2.782 3.299 3.299 0 0 0 4.365-1.386 3.049 3.049 0 0 0 .342-1.381 3.184 3.184 0 0 0-3.239-3.114h-.012z" fill="{secondaryColor}"/><path d="m11.999.922a10.908 10.908 0 0 0-11.076 10.732 10.639 10.639 0 0 0 4.418 8.598l6.658 6.464 6.658-6.463a10.537 10.537 0 0 0 2.198-15.041 11.182 11.182 0 0 0-8.856-4.289zm1.873 14.341a4.221 4.221 0 0 1-5.589-1.789 3.945 3.945 0 0 1-.445-1.8 4.164 4.164 0 0 1 8.323-.037 4.028 4.028 0 0 1-2.289 3.626Z" fill="{color}"/><path d="m11.999 28-7.256-7.044a11.611 11.611 0 0 1-4.743-9.303 11.844 11.844 0 0 1 11.988-11.652.102 .102 0 0 1 .02 0 12.164 12.164 0 0 1 9.577 4.647 11.357 11.357 0 0 1 2.299 8.614 11.521 11.521 0 0 1-4.63 7.695zm-.01-26.157a9.997 9.997 0 0 0-10.143 9.812 9.769 9.769 0 0 0 4.04 7.853l.099.083 6.014 5.838 6.113-5.922a9.7 9.7 0 0 0 3.945-6.505 9.533 9.533 0 0 0-1.933-7.229 10.305 10.305 0 0 0-8.116-3.931h-.021zm.021 14.772a5.11 5.11 0 0 1-4.547-2.718 4.868 4.868 0 0 1 .932-5.743 5.118 5.118 0 0 1 3.58-1.46h.024a5.031 5.031 0 0 1 5.084 4.938 4.92 4.92 0 0 1-2.805 4.457h0a5.152 5.152 0 0 1-2.269.525zm-.011-8.079h-.015a3.277 3.277 0 0 0-2.295.933 3.029 3.029 0 0 0-.587 3.58 3.297 3.297 0 0 0 4.364 1.386h0a3.092 3.092 0 0 0 1.772-2.795 3.185 3.185 0 0 0-3.239-3.105z" fill="{secondaryColor}"/><text x="12" y="17" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',"pin-round":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(25 * {scale})" height="calc(25 * {scale})" viewBox="0 0 25 25"><g transform="translate(0 1)"><circle cx="12.25" cy="11.5833" r="11" fill="{color}"/><path d="m12.25 23.583a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-22a10 10 0 1 0 10 10 10 10 0 0 0-10-10z" fill="{secondaryColor}"/><circle cx="12.25" cy="11.5833" r="4.2386" fill="{secondaryColor}"/></g><text x="12.5" y="17" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',"marker-flat":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(42.8 * {scale})"  viewBox="0 0 1600 2570"><g fill="{color}"><path d="M691 2419c-409-575-641-1086-683-1504-10-106-10-136 5-224 31-188 105-330 241-458 129-124 270-190 453-214 69-9 113-10 182-1 373 46 655 326 703 698 40 308-120 801-424 1309-134 224-348 535-369 535-4 0-53-63-108-141z"/></g><g fill="rgba(0,0,0,0.15)" style="transform:scale(-1,1);transform-origin:center"><path d="M691 2419c-407-571-639-1083-682-1498-14-139-3-249 37-371 69-208 254-402 459-481 68-27 217-59 271-59h24v160 180 940 635c0 349-2 635-5 635-2 0-49-63-104-141z"/></g><circle cx="800" cy="800" r="600" fill="{secondaryColor}"/><text x="800" y="1100" style="font-size:800px;fill:#000;text-anchor:middle">{text}</text></svg>',"marker-arrow":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(25.47 * {scale})" height="calc(35.18 * {scale})" viewBox="0 0 4330 5980"><g fill="{color}"><path d="m2080 5969c-49-20-93-63-115-113-25-55-1928-5486-1953-5573-40-138 67-282 210-283 36 0 246 73 987 345 518 190 947 345 955 345 8 0 438-155 955-345 615-226 954-345 979-345 87 0 165 47 204 123 46 91 107-95-957 2942-537 1535-986 2805-997 2823-11 18-43 46-72 62-41 24-62 30-111 29-33 0-71-5-85-10z"/></g><g fill="{secondaryColor}"><path d="m2200 1600c-36 10-83 2-484-84-243-53-451-94-461-91-11 4-22 18-25 31-5 19 114 371 436 1292 244 697 448 1273 454 1281 19 24 50 30 71 12z"/><path d="m2200 1600c-36 10-83 2-484-84-243-53-451-94-461-91-11 4-22 18-25 31-5 19 114 371 436 1292 244 697 448 1273 454 1281 19 24 50 30 71 12z" style="transform:scale(-1,1);transform-origin:center"/></g><g fill="rgba(0,0,0,0.2)" ><path d="m2165 685c8 0 438-155 955-345 615-226 954-345 979-345 87 0 165 47 204 123 46 91 107-95-957 2942-537 1535-986 2805-997 2823-11 18-43 46-72 62-41 24-62 30-111 29z"/></g><text x="2165" y="3300" style="font-size:2500px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-ball-pin":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15.67 * {scale})" height="calc(33.33 * {scale})" viewBox="0 0 235 452"><g transform="translate(-135 10)"><path fill="{secondaryColor}" d="m256 442 0 0c-13 0-18-11-18-24l-6-323c0-13 11-24 24-24h0c13 0 24 11 24 24l-6 323c0 13-5 24-18 24z"/><circle style="fill:{color};stroke-width:10;stroke:{secondaryColor}" cx="256" cy="112" r="111"/><ellipse transform="matrix(0.834 0.5518 -0.5518 0.834 65.7916 -97.18)" fill="rgba(255,255,255,0.3)" cx="194.399" cy="60.749" rx="19.076" ry="32.428"/></g><text x="117.5" y="160" style="font-size:160px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(26.67 * {scale})" height="calc(32.27 * {scale})" viewBox="0 0 2000 2420"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="M845 2152c-22-37-58-95-80-129-22-35-62-99-90-143l-50-80-312 0-313 0 0-900 0-900 900 0 900 0 0 900 0 900-313 0-313 0-34 58c-19 31-38 59-42 60-5 2-8 8-8 12 0 9-69 123-88 145-5 6-11 15-13 21-16 39-77 123-89 124-8 0-33-31-55-68z"/></g><text x="1000" y="1300" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-cluster":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(33.33 * {scale})" height="calc(38.8 * {scale})" viewBox="0 0 2500 2910"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="m866 2652c-17-31-37-68-46-82-9-14-32-54-51-90-19-36-50-92-70-125l-36-60-332-3-331-2 0-905 0-905 660 0 660 0 0-38c0-71 50-196 102-258 71-85 189-164 244-164 12 0 26-4 29-10 8-13 222-13 230 0 3 6 17 10 30 10 25 0 117 45 154 76 130 107 191 232 191 392 0 155-63 284-190 386-36 29-129 76-150 76-11 0-22 5-25 10-3 6-31 10-61 10l-54 0 0 660 0 660-332 2-332 3-29 50c-17 28-48 84-70 125-22 41-47 86-56 100-9 14-30 51-46 83-17 32-36 57-45 57-8 0-28-25-44-58z"/></g><text x="1650" y="900" style="font-size:1000px;fill:#fff">+</text><text x="1000" y="1800" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-rounded":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(26.8 * {scale})" height="calc(32.27 * {scale})" viewBox="0 0 2010 2410"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="M856 2155c-20-30-36-59-36-65 0-5-4-10-10-10-5 0-10-5-10-11 0-5-18-37-40-69-22-32-40-64-40-69 0-6-4-11-10-11-5 0-10-5-10-10 0-6-15-33-32-60l-33-50-127 0c-74 0-129-4-133-10-3-5-17-10-30-10-25 0-116-45-155-76-87-69-142-151-178-265-15-46-17-1075-2-1084 5-3 10-17 10-30 0-13 5-27 10-30 6-3 10-13 10-22 0-22 83-135 122-168 57-46 62-50 112-75l50-25 585 0 586 0 63 34c84 46 169 133 212 218l35 68 0 565 0 565-28 59c-32 69-100 157-139 180-15 9-33 22-40 29-23 22-99 57-123 57-13 0-27 5-30 10-4 6-60 10-135 10l-128 0-128 205c-84 136-133 205-144 205-10 0-33-24-54-55z"/></g><text x="1000" y="1300" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-rounded-cluster":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(33.33 * {scale})" height="calc(32.13 * {scale})" viewBox="0 0 2500 2900"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="m874 2669c-9-18-26-49-37-68-11-20-30-55-43-78-13-24-36-64-51-90-14-27-38-69-52-95l-26-48-142 0c-84 0-144-4-148-10-3-5-17-10-30-10-25 0-118-46-154-76-91-76-136-142-175-254-13-38-16-119-16-554 0-358 3-520 12-545 40-125 106-219 195-278 127-84 116-83 646-83l467 0 0-42c0-46 11-87 45-163 54-121 169-220 306-264 46-14 232-14 278 0 165 53 284 175 340 350 19 61 14 204-10 273-32 91-94 178-169 240-38 31-130 76-155 76-13 0-27 5-30 10-3 6-28 10-56 10l-49 0 0 462c0 446-1 464-21 522-32 91-94 178-169 240-38 31-130 76-155 76-13 0-27 5-30 10-4 6-65 10-149 10-138 0-143 1-154 23-12 23-62 114-112 202-16 28-44 79-63 115-42 77-67 88-93 39z"/></g><text x="1650" y="900" style="font-size:1000px;fill:#fff">+</text><text x="1000" y="1800" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',flag:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(23.5 * {scale})" height="calc(40 * {scale})" viewBox="34 28 198 308"><path style="stroke:{secondaryColor};stroke-width:15;stroke-linecap:round;" d="M42 327l0 -291"/><path style="fill:{color};stroke:{secondaryColor};stroke-width:10;stroke-linejoin:round;" d="M49 50c70 30 104 28 178 2-21 42-21 74 0 116-72 25-101 25-178 0l0-118z"/><text x="130" y="165" style="font-size:100px;fill:#fff;text-anchor:middle">{text}</text></svg>',"flag-triangle":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(35.33 * {scale})" viewBox="0 0 40.5 53"><g transform="translate(-31 -20)"><path fill="{secondaryColor}" d="M34.7,73.3V48.4l34.6-10.1c0.7-0.2,1.2-0.8,1.2-1.5s-0.4-1.4-1-1.7L33.7,20.5c-0.5-0.2-1.1-0.2-1.6,0.2 c-0.5,0.3-0.7,0.8-0.7,1.4v51.2H34.7z"/><polygon points="34.7,24.5 66,36.5 34.7,45 34.7,10" fill="{color}"/></g><text x="11" y="21" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"rounded-square":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(34 * {scale})" height="calc(34 * {scale})" viewBox="0 0 34 34"><g transform="translate(2 2)"><rect x="0" y="0" rx="8" ry="8" width="30" height="30" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17" y="22" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"rounded-square-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(38 * {scale})" height="calc(38 * {scale})" viewBox="0 0 38 38"><g transform="translate(4 4)"><rect x="0" y="0" rx="8" ry="8" width="30" height="30" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19" y="24" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',triangle:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(36 * {scale})" height="calc(36 * {scale})" viewBox="0 0 36 36"><g transform="translate(2 2)"><polygon points="16,0 32,32 0,32 16,0" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17.5" y="30" style="font-size:12px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 40 40"><g transform="translate(4 4)"><polygon points="16,0 32,32 0,32 16,0" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19.5" y="32" style="font-size:12px;fill:#fff;text-anchor:middle">{text}</text></svg>',hexagon:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(35 * {scale})" height="calc(40 * {scale})" viewBox="0 0 35 40"><g transform="translate(2 2)"><path d="M31 9 15.5 0 0 9 0 27 15.5 36 31 27 31 9Z" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17.5" y="25" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(39 * {scale})" height="calc(44 * {scale})" viewBox="0 0 39 44"><g transform="translate(4 4)"><path d="M31 9 15.5 0 0 9 0 27 15.5 36 31 27 31 9Z" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19.5" y="27" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-rounded":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 1100 1100"><g transform="translate(50 50)"><path style="stroke:{secondaryColor};stroke-width:50;fill:{color}" d="M881 210 561 25c-33-19-88-19-121 0L119 210c-33 19-61 67-61 105v370c0 39 27 86 61 105l321 185c33 19 88 19 122 0l321-185c33-19 61-67 61-105V315C942 276 915 229 881 210z"/></g><text x="550" y="700" style="font-size:400px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-rounded-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 1200 1200"><g transform="translate(100 100)"><path style="stroke:{secondaryColor};stroke-width:100;fill:{color}" d="M881 210 561 25c-33-19-88-19-121 0L119 210c-33 19-61 67-61 105v370c0 39 27 86 61 105l321 185c33 19 88 19 122 0l321-185c33-19 61-67 61-105V315C942 276 915 229 881 210z"/></g><text x="600" y="750" style="font-size:400px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(28 * {scale})" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="12,0 0,24 12,17 24,24" stroke-width="2" stroke="{secondaryColor}" fill="{color}"/></g><text x="14" y="17" style="font-size:8px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-arrow-left":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(28 * {scale})" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="24,12 0,0 7,12 0,24" stroke-width="2" stroke="{secondaryColor}" fill="{color}"/></g><text x="14" y="16.5" style="font-size:8px;fill:#fff;text-anchor:middle">{text}</text></svg>',"arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(12.16 * {scale})" height="calc(30.1 * {scale})" viewBox="0 0 902 364"><g fill="{color}" transform="matrix(0,2.4,-2.4,0,897,-930)"><polygon points="902,222 233,222 233,364 0,182 233,0 233,141 902,141 902,222"/></g><text x="450" y="700" style="font-size:900px;fill:#000;text-anchor:middle">{text}</text></svg>',"arrow-up-thin":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(33.33 * {scale})" viewBox="0 0 12 25"><g transform="translate(-136.91823 -751.91998)"><path fill="{color}" d="m148.271 760.71c-1.641-.547-3.186-1.47-4.633-2.769l0 18.07-1.675 0 0-18.07c-1.447 1.299-2.986 2.222-4.616 2.769l0-1.231c2.325-1.596 4.006-3.812 5.043-6.65l.838 0c1.037 2.838 2.718 5.055 5.043 6.65l0 1.231z"/></g><text x="6" y="20" style="font-size:10px;fill:#000;text-anchor:middle">{text}</text></svg>',car:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(21.93 * {scale})" height="calc(40.9 * {scale})" viewBox="0 0 6580 12270"><g transform="translate(0 12270) rotate(-90)"><path fill="{secondaryColor}" d="M7045 6566c-42-13-105-44-105-51 0-2 23-105 50-228 28-123 50-230 50-236 0-8-241-11-907-11-855 0-1145 6-1513 30-85 6-189 13-230 15-41 3-133 10-205 15-286 21-430 32-705 50-953 63-1459 18-2335-205-304-77-746-209-799-238-131-72-221-408-285-1062-34-345-42-532-48-1130-16-1557 108-2532 336-2649 32-17 469-149 676-205 409-110 819-191 1205-238 116-14 224-18 540-18 395 1 494 5 1140 50 1124 79 1224 82 2496 78l641-3-53-237c-29-131-52-238-51-239 1-1 31-14 66-29 56-23 76-26 142-23 67 3 83 7 120 33 23 17 50 41 61 55 10 14 51 117 91 230l73 205 674 3 675 2 90-39c98-43 198-72 315-93 122-21 829-18 990 5 321 45 626 143 849 270 293 168 516 378 704 662 266 402 416 893 467 1527 15 174 8 882-9 998-6 41-18 127-27 190-69 502-253 969-523 1325-79 105-262 284-381 374-189 142-355 229-574 300-336 110-526 139-952 148-457 9-685-23-887-124l-47-24-678-6-678-6-64 179c-79 224-92 253-121 284-67 70-177 97-274 66zm-2752-5073c-23-2-64-2-90 0-26 2-7 3 42 3 50 0 71-1 48-3zm395 0c-21-2-55-2-75 0-21 2-4 4 37 4 41 0 58-2 38-4z"/><path fill="{color}" d="M7043 6498c-13-6-23-19-23-28 0-9 23-117 50-240 28-123 50-230 50-237 0-22-2126-13-2465 10-132 10-400 28-595 42-661 47-824 55-1160 62-435 7-656-8-1040-73-415-70-865-183-1447-365-168-53-272-556-325-1569-16-319-16-1311 0-1630 45-872 129-1366 257-1518 22-26 51-39 172-77 557-177 1122-310 1563-369 271-36 351-40 690-40 361 1 463 6 1165 54 1122 78 1288 83 2337 79 460-2 840-7 843-11 4-4-17-117-47-252l-55-245 39-16c76-30 180-8 224 47 10 13 54 124 98 246l79 222 709 0 709 0 47-24c74-37 219-83 322-101 122-22 606-32 802-16 374 29 658 102 933 238 124 62 271 155 361 230l61 51 6 100c19 278 103 497 247 643 88 89 173 136 278 152l70 11 41 131c116 369 159 673 168 1170 10 584-38 984-167 1397l-40 126-70 12c-193 33-348 175-441 405-56 139-89 302-89 445 0 43-3 47-58 91-290 235-644 384-1068 450-191 29-796 39-974 16-135-18-263-54-368-102l-75-35-701 0-701 0-79 223c-82 232-102 267-163 293-38 16-138 17-170 2zm-2023-820c332-15 1155-12 1835 6 308 8 563 12 566 8 4-4 10-21 13-38 7-30 6-31-92-77-518-244-1197-396-2112-474-295-25-1282-25-1579 0-231 20-473 46-479 51-6 7 49 110 93 171 160 226 416 335 855 365 142 10 539 5 900-12zm3304-263c525-111 899-887 934-1935 19-557-37-1023-172-1435-186-563-521-900-896-899-81 0-158 14-525 92-426 91-431 92-540 146-195 96-287 207-306 368-12 104-11 2985 1 3078 22 170 135 291 365 389 49 21 191 55 480 115 226 47 419 87 430 89 45 10 164 6 229-8zm-5570-485c112-43 197-156 216-291 12-83 13-2623 1-2706-23-158-125-273-270-304-44-9-100-1-542 75-272 47-514 91-539 98-266 68-487 424-594 958-56 280-70 548-40 800 56 484 207 878 414 1081 115 114 122 116 702 218 277 49 524 90 550 90 26 1 72-8 102-19zm2111-3440c1023-44 1884-213 2462-486l113-53-7-33c-3-18-8-35-10-37-2-3-236 1-521 7-993 24-1271 26-1708 11-541-18-1128-18-1249-1-377 56-588 181-734 437-32 55-41 79-32 84 12 8 246 32 491 51 356 28 815 36 1195 20z"/></g><text x="3250" y="8250" style="font-size:3000px;fill:#fff;text-anchor:middle">{text}</text></svg>',checker:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(16 * {scale})" viewBox="0 0 16 16"><pattern id="p" x="0" y="0" width="16" height="16" patternUnits="userSpaceOnUse"><rect fill="{color}" x="0" width="8" height="8" y="0"/><rect fill="{color}" x="8" width="8" height="8" y="8"/></pattern><rect x="0" y="0" width="16" height="16" fill="{secondaryColor}"/><rect x="0" y="0" width="16" height="16" fill="url(#p)"/></svg>',"checker-rotated":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(16 * {scale})" viewBox="0 0 60 60"><rect width="60" height="60" fill="{secondaryColor}"/><rect width="42.42" height="42.42" transform="translate(30 0) rotate(45)" fill="{color}"/></svg>',"zig-zag":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15 * {scale})" height="calc(15 * {scale})" viewBox="0 0 120 120"><rect x="0" y="0" width="120" height="120" fill="{secondaryColor}"/><polygon fill="{color}" points="120 120 60 120 90 90 120 60 120 0 120 0 60 60 0 0 0 60 30 90 60 120 120 120"/></svg>',"zig-zag-vertical":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15 * {scale})" height="calc(15 * {scale})" viewBox="0 0 120 120"><rect x="0" y="0" width="120" height="120" fill="{secondaryColor}"/><polygon fill="{color}" points="120 0 120 60 90 30 60 0 0 0 0 0 60 60 0 120 60 120 90 90 120 60 120 0"/></svg>',"circles-spaced":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 20 20"><defs><pattern id="p" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="2" stroke="none" fill="{color}"/></pattern></defs><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><rect x="0" y="0" width="100" height="100" fill="url(#p)"/></svg>',circles:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(7 * {scale})" height="calc(7 * {scale})" viewBox="0 0 20 20"><defs><pattern id="p" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="6" stroke="none" fill="{color}"/></pattern></defs><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><rect x="0" y="0" width="100" height="100" fill="url(#p)"/></svg>',"diagonal-lines-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"diagonal-lines-down":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(90 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"diagonal-stripes-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"diagonal-stripes-down":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g transform="rotate(90 20 20)" fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"grid-lines":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(14 * {scale})" height="calc(14 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(45 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g><g fill="{color}" transform="rotate(-45 3 3)"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"rotated-grid-lines":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(90 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g><g fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"rotated-grid-stripes":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g transform="rotate(90 20 20)" fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g><g fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"x-fill":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="45.3" height="45.3" fill="{secondaryColor}"/><g fill="{color}"><path d="M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z"/></g></svg>',dots:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(13 * {scale})" height="calc(13 * {scale})" viewBox="0 0 20 20"><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><g fill="{color}"><circle cx="3" cy="3" r="3"/><circle cx="13" cy="13" r="3"/></g></svg>'},n6=(G3.getHighContrastMode=function(){return matchMedia("(-ms-high-contrast: white-on-black)").matches?"dark":matchMedia("(-ms-high-contrast: black-on-white)").matches?"light":matchMedia("(-ms-high-contrast: active)").matches?"dark":matchMedia("(inverted-colors: inverted)").matches?"invert":null},G3);function G3(){}(Ey=Cp=Cp||{})[Ey.LocalStorage=0]="LocalStorage",Ey[Ey.SessionStorage=1]="SessionStorage",(Qu=et=et||{})[Qu.Default=0]="Default",Qu[Qu.Required=1]="Required",Qu[Qu.Array=2]="Array",Qu[Qu.Hidden=4]="Hidden",(od=Sp=Sp||{})[od.AI=0]="AI",od[od.AI_AND_W3C=1]="AI_AND_W3C",od[od.W3C=2]="W3C";var i6=2,st=(vm.isNullOrUndefined=function(t){return t==null},vm.disableCookies=function(){vm._canUseCookies=!1},vm.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(o6,function(t){var n=16*Math.random()|0;return(t==="x"?n:3&n|8).toString(16)})},vm);function vm(){}var Qe,Iy,o6=/[xy]/g,a6=(_m.prototype.addNotificationListener=function(t){this.listeners.push(t)},_m.prototype.removeNotificationListener=function(t){for(var n=this.listeners.indexOf(t);-1<n;)this.listeners.splice(n,1),n=this.listeners.indexOf(t)},_m.prototype.eventsSent=function(t){for(var n=this,a=function(b){h.listeners[b].eventsSent&&setTimeout(function(){return n.listeners[b].eventsSent(t)},0)},h=this,y=0;y<this.listeners.length;++y)a(y)},_m.prototype.eventsDiscarded=function(t,n){for(var a=this,h=function(u){y.listeners[u].eventsDiscarded&&setTimeout(function(){return a.listeners[u].eventsDiscarded(t,n)},0)},y=this,b=0;b<this.listeners.length;++b)h(b)},_m);function _m(){this.listeners=[]}(Iy=Qe=Qe||{})[Iy.CRITICAL=1]="CRITICAL",Iy[Iy.WARNING=2]="WARNING";var s6=0,l6=1,u6=2,c6=3,p6=4,h6=5,d6=6,f6=7,m6=8,g6=9,y6=10,v6=11,_6=12,x6=13,g_=14,y_=15,w6=16,b6=17,ky=18,C6=19,S6=20,T6=22,E6=23,I6=24,k6=25,M6=26,A6=27,L6=28,P6=29,D6=30,z6=31,N6=32,O6=33,R6=35,B6=36,H3=37,F6=38,W3=39,ad=40,j6=41,U6=42,V6=43,q6=45,Tp=46,Z6=47,Y3=48,K3=49,G6=50,H6=52,W6=54,Y6=55,K6=56,$6=57,X6=58,J6=60,Q6=61,eA=62,tA=63,$3=64,rA=66,X3=67,nA=68,iA=69,oA=70,aA=71,v_=(Ul.sanitizeDiagnosticText=function(t){return'"'+t.replace(/\"/g,"")+'"'},Ul.dataType="MessageData",Ul.AiNonUserActionablePrefix="AI (Internal): ",Ul.AiUserActionablePrefix="AI: ",Ul);function Ul(t,n,a,h){a===void 0&&(a=!1),this.messageId=t,this.message=(a?Ul.AiUserActionablePrefix:Ul.AiNonUserActionablePrefix)+t;var y=(n?" message:"+Ul.sanitizeDiagnosticText(n):"")+(h?" props:"+Ul.sanitizeDiagnosticText(JSON.stringify(h)):"");this.message+=y}var __=(sd.prototype.throwInternal=function(t,n,a,h,y){y===void 0&&(y=!1);var b=new v_(n,a,y,h);if(this.enableDebugExceptions())throw b;if(b!==void 0&&b&&b.message!==void 0){if(y){var u=+b.messageId;(!this._messageLogged[u]||this.consoleLoggingLevel()>=Qe.WARNING)&&(this.warnToConsole(b.message),this._messageLogged[u]=!0)}else this.consoleLoggingLevel()>=Qe.WARNING&&this.warnToConsole(b.message);this.logInternalMessage(t,b)}},sd.prototype.warnToConsole=function(t){typeof console<"u"&&console&&(typeof console.warn=="function"?console.warn(t):typeof console.log=="function"&&console.log(t))},sd.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},sd.prototype.logInternalMessage=function(t,n){if(!this._areInternalMessagesThrottled()){var a=!0,h=this.AIInternalMessagePrefix+n.messageId;if(this._messageLogged[h]?a=!1:this._messageLogged[h]=!0,a&&(t<=this.telemetryLoggingLevel()&&(this.queue.push(n),this._messageCount++),this._messageCount==this.maxInternalMessageLimit())){var y="Internal events throttle limit per PageView reached for this app.",b=new v_(E6,y,!1);this.queue.push(b),this.warnToConsole(y)}}},sd.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},sd);function sd(t){this.AIInternalMessagePrefix="AITR_",this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 0},this.telemetryLoggingLevel=function(){return 1},this.maxInternalMessageLimit=function(){return 25},this.queue=[],this._messageCount=0,this._messageLogged={},st.isNullOrUndefined(t)||(st.isNullOrUndefined(t.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return t.loggingLevelConsole}),st.isNullOrUndefined(t.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return t.loggingLevelTelemetry}),st.isNullOrUndefined(t.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return t.maxMessageLimit}),st.isNullOrUndefined(t.enableDebugExceptions)||(this.enableDebugExceptions=function(){return t.enableDebugExceptions}))}var sA=(My.prototype.processTelemetry=function(t){this.channelQueue.forEach(function(n){0<n.length&&n[0].processTelemetry(t)})},Object.defineProperty(My.prototype,"ChannelControls",{get:function(){return this.channelQueue},enumerable:!0,configurable:!0}),My.prototype.initialize=function(t,n,a){var h=this;if(t.isCookieUseDisabled&&st.disableCookies(),this.channelQueue=new Array,t.channels){var y=void 0;t.channels.forEach(function(k){if(k&&0<k.length){k=k.sort(function(W,se){return W.priority-se.priority});for(var G=1;G<k.length;G++)k[G-1].setNextPlugin(k[G]);if(k.forEach(function(W){W.priority<500&&(y=W.identifier),W.initialize(t,n,a)}),y)throw Error("Channel has invalid priority"+y);h.channelQueue.push(k)}})}for(var b=new Array,u=0;u<a.length;u++){var A=a[u];500<A.priority&&b.push(A)}if(0<b.length){for(b=b.sort(function(k,G){return k.priority-G.priority}),u=1;u<b.length;u++)b[u-1].setNextPlugin(b[u]);b.forEach(function(k){return k.initialize(t,n,a)}),this.channelQueue.push(b)}},My);function My(){this.identifier="ChannelControllerPlugin",this.priority=500}var lA=(Vl.prototype.initialize=function(t,n){var a=this;if(this._isInitialized)throw Error("Core should not be initialized more than once");if(!t||st.isNullOrUndefined(t.instrumentationKey))throw Error("Please provide instrumentation key");this.config=t,this._notificationManager=new a6,this.config.extensions=st.isNullOrUndefined(this.config.extensions)?[]:this.config.extensions,this.config.extensionConfig=st.isNullOrUndefined(this.config.extensionConfig)?{}:this.config.extensionConfig,this.config.extensionConfig.NotificationManager=this._notificationManager,this.logger=new __(t),(y=this._extensions).push.apply(y,n.concat(this.config.extensions)),this._extensions.forEach(function(k){var G=!0;if((st.isNullOrUndefined(k)||st.isNullOrUndefined(k.initialize))&&(G=!1),!G)throw Error("Extensions must provide callback to initialize")}),this._extensions.push(this._channelController),this._extensions=this._extensions.sort(function(k,G){var W=typeof k.processTelemetry,se=typeof G.processTelemetry;return W=="function"&&se=="function"?k.priority-G.priority:W=="function"&&se!="function"?1:W!="function"&&se=="function"?-1:void 0});var h={};this._extensions.forEach(function(k){var G=k;G&&G.priority&&(st.isNullOrUndefined(h[G.priority])?h[G.priority]=G.identifier:a.logger.warnToConsole("Two extensions have same priority"+h[G.priority]+", "+G.identifier))});for(var y,b=-1,u=0;u<this._extensions.length-1;u++){var A=this._extensions[u];if(!A||typeof A.processTelemetry=="function"){if(A.priority===this._channelController.priority){b=u+1;break}this._extensions[u].setNextPlugin(this._extensions[u+1])}}if(this._channelController.initialize(this.config,this,this._extensions),this._extensions.forEach(function(k){k&&k.priority<a._channelController.priority&&k.initialize(a.config,a,a._extensions)}),b<this._extensions.length&&this._extensions.splice(b),this.getTransmissionControls().length===0)throw new Error("No channels available");this._isInitialized=!0},Vl.prototype.getTransmissionControls=function(){return this._channelController.ChannelControls},Vl.prototype.track=function(t){if(t===null)throw this._notifyInvalidEvent(t),Error("Invalid telemetry item");t.iKey||(t.iKey=this.config.instrumentationKey),t.time||(t.time=new Date().toISOString()),st.isNullOrUndefined(t.ver)&&(t.ver="4.0"),this._validateTelmetryItem(t),this._extensions.length==0&&this._channelController.processTelemetry(t);for(var n=0;n<this._extensions.length;){if(this._extensions[n].processTelemetry){this._extensions[n].processTelemetry(t);break}n++}},Vl.prototype.addNotificationListener=function(t){this._notificationManager.addNotificationListener(t)},Vl.prototype.removeNotificationListener=function(t){this._notificationManager.removeNotificationListener(t)},Vl.prototype.pollInternalLogs=function(t){var n=this,a=this.config.diagnosticLogInterval;return 0<a||(a=1e4),setInterval(function(){var h=n.logger.queue;h.forEach(function(y){var b={name:t||"InternalMessageId: "+y.messageId,iKey:n.config.instrumentationKey,time:new Date().toISOString(),baseType:v_.dataType,baseData:{message:y.message}};n.track(b)}),h.length=0},a)},Vl.prototype._validateTelmetryItem=function(t){if(st.isNullOrUndefined(t.name))throw this._notifyInvalidEvent(t),Error("telemetry name required");if(st.isNullOrUndefined(t.time))throw this._notifyInvalidEvent(t),Error("telemetry timestamp required");if(st.isNullOrUndefined(t.iKey))throw this._notifyInvalidEvent(t),Error("telemetry instrumentationKey required")},Vl.prototype._notifyInvalidEvent=function(t){this._notificationManager.eventsDiscarded([t],i6)},Vl);function Vl(){this._isInitialized=!1,this._extensions=new Array,this._channelController=new sA}var Xn=(ql.requestContextHeader="Request-Context",ql.requestContextTargetKey="appId",ql.requestContextAppIdFormat="appId=cid-v1:",ql.requestIdHeader="Request-Id",ql.traceParentHeader="traceparent",ql.sdkContextHeader="Sdk-Context",ql.sdkContextHeaderAppIdRequest="appId",ql.requestContextHeaderLowerCase="request-context",ql);function ql(){}var Ar=(Kt.sanitizeKeyAndAddUniqueness=function(t,n,a){var h=n.length,y=Kt.sanitizeKey(t,n);if(y.length!==h){for(var b=0,u=y;a[u]!==void 0;)b++,u=y.substring(0,Kt.MAX_NAME_LENGTH-3)+Kt.padNumber(b);y=u}return y},Kt.sanitizeKey=function(t,n){var a;return n&&(n=Kt.trim(n.toString())).length>Kt.MAX_NAME_LENGTH&&(a=n.substring(0,Kt.MAX_NAME_LENGTH),t.throwInternal(Qe.WARNING,$6,"name is too long.  It has been truncated to "+Kt.MAX_NAME_LENGTH+" characters.",{name:n},!0)),a||n},Kt.sanitizeString=function(t,n,a){var h;return a===void 0&&(a=Kt.MAX_STRING_LENGTH),n&&(a=a||Kt.MAX_STRING_LENGTH,(n=Kt.trim(n)).toString().length>a&&(h=n.toString().substring(0,a),t.throwInternal(Qe.WARNING,Q6,"string value is too long. It has been truncated to "+a+" characters.",{value:n},!0))),h||n},Kt.sanitizeUrl=function(t,n){return Kt.sanitizeInput(t,n,Kt.MAX_URL_LENGTH,rA)},Kt.sanitizeMessage=function(t,n){var a;return n&&n.length>Kt.MAX_MESSAGE_LENGTH&&(a=n.substring(0,Kt.MAX_MESSAGE_LENGTH),t.throwInternal(Qe.WARNING,K6,"message is too long, it has been truncated to "+Kt.MAX_MESSAGE_LENGTH+" characters.",{message:n},!0)),a||n},Kt.sanitizeException=function(t,n){var a;return n&&n.length>Kt.MAX_EXCEPTION_LENGTH&&(a=n.substring(0,Kt.MAX_EXCEPTION_LENGTH),t.throwInternal(Qe.WARNING,H6,"exception is too long, it has been truncated to "+Kt.MAX_EXCEPTION_LENGTH+" characters.",{exception:n},!0)),a||n},Kt.sanitizeProperties=function(t,n){if(n){var a={};for(var h in n){var y=n[h];if(typeof y=="object"&&typeof JSON<"u")try{y=JSON.stringify(y)}catch(b){t.throwInternal(Qe.WARNING,K3,"custom property is not valid",{exception:b},!0)}y=Kt.sanitizeString(t,y,Kt.MAX_PROPERTY_LENGTH),a[h=Kt.sanitizeKeyAndAddUniqueness(t,h,a)]=y}n=a}return n},Kt.sanitizeMeasurements=function(t,n){if(n){var a={};for(var h in n){var y=n[h];a[h=Kt.sanitizeKeyAndAddUniqueness(t,h,a)]=y}n=a}return n},Kt.sanitizeId=function(t,n){return n&&Kt.sanitizeInput(t,n,Kt.MAX_ID_LENGTH,iA).toString()},Kt.sanitizeInput=function(t,n,a,h){var y;return n&&(n=Kt.trim(n)).length>a&&(y=n.substring(0,a),t.throwInternal(Qe.WARNING,h,"input is too long, it has been truncated to "+a+" characters.",{data:n},!0)),y||n},Kt.padNumber=function(t){var n="00"+t;return n.substr(n.length-3)},Kt.trim=function(t){return typeof t!="string"?t:t.replace(/^\s+|\s+$/g,"")},Kt.MAX_NAME_LENGTH=150,Kt.MAX_ID_LENGTH=128,Kt.MAX_PROPERTY_LENGTH=8192,Kt.MAX_STRING_LENGTH=1024,Kt.MAX_URL_LENGTH=2048,Kt.MAX_MESSAGE_LENGTH=32768,Kt.MAX_EXCEPTION_LENGTH=32768,Kt);function Kt(){}var Le=(Je.createDomEvent=function(t){var n=null;return typeof Event=="function"?n=new Event(t):(n=document.createEvent("Event")).initEvent(t,!0,!0),n},Je.disableStorage=function(){Je._canUseLocalStorage=!1,Je._canUseSessionStorage=!1},Je._getLocalStorageObject=function(){return Je.canUseLocalStorage()?Je._getVerifiedStorageObject(Cp.LocalStorage):null},Je._getVerifiedStorageObject=function(t){var n,a,h=null;try{if(typeof window>"u")return null;a=new Date,(h=t===Cp.LocalStorage?window.localStorage:window.sessionStorage).setItem(a,a),n=h.getItem(a)!=a,h.removeItem(a),n&&(h=null)}catch{h=null}return h},Je.isInternalApplicationInsightsEndpoint=function(t){return Je._internalEndpoints.indexOf(t.toLowerCase())!==-1},Je.canUseLocalStorage=function(){return Je._canUseLocalStorage===void 0&&(Je._canUseLocalStorage=!!Je._getVerifiedStorageObject(Cp.LocalStorage)),Je._canUseLocalStorage},Je.getStorage=function(t,n){var a=Je._getLocalStorageObject();if(a!==null)try{return a.getItem(n)}catch(h){Je._canUseLocalStorage=!1,t.throwInternal(Qe.WARNING,l6,"Browser failed read of local storage. "+Je.getExceptionName(h),{exception:Je.dump(h)})}return null},Je.setStorage=function(t,n,a){var h=Je._getLocalStorageObject();if(h!==null)try{return h.setItem(n,a),!0}catch(y){Je._canUseLocalStorage=!1,t.throwInternal(Qe.WARNING,c6,"Browser failed write to local storage. "+Je.getExceptionName(y),{exception:Je.dump(y)})}return!1},Je.removeStorage=function(t,n){var a=Je._getLocalStorageObject();if(a!==null)try{return a.removeItem(n),!0}catch(h){Je._canUseLocalStorage=!1,t.throwInternal(Qe.WARNING,h6,"Browser failed removal of local storage item. "+Je.getExceptionName(h),{exception:Je.dump(h)})}return!1},Je._getSessionStorageObject=function(){return Je.canUseSessionStorage()?Je._getVerifiedStorageObject(Cp.SessionStorage):null},Je.canUseSessionStorage=function(){return Je._canUseSessionStorage===void 0&&(Je._canUseSessionStorage=!!Je._getVerifiedStorageObject(Cp.SessionStorage)),Je._canUseSessionStorage},Je.getSessionStorageKeys=function(){var t=[];if(Je.canUseSessionStorage())for(var n in window.sessionStorage)t.push(n);return t},Je.getSessionStorage=function(t,n){var a=Je._getSessionStorageObject();if(a!==null)try{return a.getItem(n)}catch(h){Je._canUseSessionStorage=!1,t.throwInternal(Qe.WARNING,u6,"Browser failed read of session storage. "+Je.getExceptionName(h),{exception:Je.dump(h)})}return null},Je.setSessionStorage=function(t,n,a){var h=Je._getSessionStorageObject();if(h!==null)try{return h.setItem(n,a),!0}catch(y){Je._canUseSessionStorage=!1,t.throwInternal(Qe.WARNING,p6,"Browser failed write to session storage. "+Je.getExceptionName(y),{exception:Je.dump(y)})}return!1},Je.removeSessionStorage=function(t,n){var a=Je._getSessionStorageObject();if(a!==null)try{return a.removeItem(n),!0}catch(h){Je._canUseSessionStorage=!1,t.throwInternal(Qe.WARNING,d6,"Browser failed removal of session storage item. "+Je.getExceptionName(h),{exception:Je.dump(h)})}return!1},Je.disableCookies=function(){st.disableCookies()},Je.canUseCookies=function(t){if(st._canUseCookies===void 0){st._canUseCookies=!1;try{st._canUseCookies=Je.document.cookie!==void 0}catch(n){t.throwInternal(Qe.WARNING,nA,"Cannot access document.cookie - "+Je.getExceptionName(n),{exception:Je.dump(n)})}}return st._canUseCookies},Je.setCookie=function(t,n,a,h){var y="",b="";h&&(y=";domain="+h),Je.document.location&&Je.document.location.protocol==="https:"&&(b=";secure"),Je.canUseCookies(t)&&(Je.document.cookie=n+"="+a+y+";path=/"+b)},Je.stringToBoolOrDefault=function(t,n){return n===void 0&&(n=!1),t==null?n:t.toString().toLowerCase()==="true"},Je.getCookie=function(t,n){if(Je.canUseCookies(t)){var a="";if(n&&n.length)for(var h=n+"=",y=Je.document.cookie.split(";"),b=0;b<y.length;b++){var u=y[b];if((u=Je.trim(u))&&u.indexOf(h)===0){a=u.substring(h.length,y[b].length);break}}return a}},Je.deleteCookie=function(t,n){Je.canUseCookies(t)&&(Je.document.cookie=n+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},Je.trim=function(t){return typeof t!="string"?t:t.replace(/^\s+|\s+$/g,"")},Je.newId=function(){for(var t="",n=1073741824*Math.random();0<n;)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n%64),n=Math.floor(n/64);return t},Je.random32=function(){return 4294967296*Math.random()|0},Je.generateW3CId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],a="",h=0;h<4;h++)a+=n[15&(t=Je.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var y=n[8+4*Math.random()|0];return a.substr(0,8)+a.substr(9,4)+"4"+a.substr(13,3)+y+a.substr(16,3)+a.substr(19,12)},Je.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"},Je.isError=function(t){return Object.prototype.toString.call(t)==="[object Error]"},Je.isDate=function(t){return Object.prototype.toString.call(t)==="[object Date]"},Je.toISOStringForIE8=function(t){if(Je.isDate(t)){if(Date.prototype.toISOString)return t.toISOString();var n=function(a){var h=String(a);return h.length===1&&(h="0"+h),h};return t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},Je.getIEVersion=function(t){t===void 0&&(t=null);var n=t?t.toLowerCase():navigator.userAgent.toLowerCase();return n.indexOf("msie")!=-1?parseInt(n.split("msie")[1]):null},Je.msToTimeSpan=function(t){(isNaN(t)||t<0)&&(t=0);var n=""+(t=Math.round(t))%1e3,a=""+Math.floor(t/1e3)%60,h=""+Math.floor(t/6e4)%60,y=""+Math.floor(t/36e5)%24,b=Math.floor(t/864e5);return n=n.length===1?"00"+n:n.length===2?"0"+n:n,a=a.length<2?"0"+a:a,h=h.length<2?"0"+h:h,(0<b?b+".":"")+(y=y.length<2?"0"+y:y)+":"+h+":"+a+"."+n},Je.isCrossOriginError=function(t,n,a,h,y){return(t==="Script error."||t==="Script error")&&!y},Je.dump=function(t){var n=Object.prototype.toString.call(t),a=JSON.stringify(t);return n==="[object Error]"&&(a="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'"),n+a},Je.getExceptionName=function(t){return Object.prototype.toString.call(t)==="[object Error]"?t.name:""},Je.addEventHandler=function(t,n){if(typeof window>"u"||!window||typeof t!="string"||typeof n!="function")return!1;var a="on"+t;if(window.addEventListener)window.addEventListener(t,n,!1);else{if(!window.attachEvent)return!1;window.attachEvent(a,n)}return!0},Je.IsBeaconApiSupported=function(){return"sendBeacon"in navigator&&navigator.sendBeacon},Je.getExtension=function(t,n){for(var a=null,h=0;!a&&h<t.length;)t[h]&&t[h].identifier===n&&(a=t[h]),h++;return a},Je.document=typeof document<"u"?document:{},Je._canUseLocalStorage=void 0,Je._canUseSessionStorage=void 0,Je._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],Je.NotSpecified="not_specified",Je);function Je(){}var Ay=(co.parseUrl=function(t){return co.htmlAnchorElement||(co.htmlAnchorElement=co.document.createElement?co.document.createElement("a"):{host:co.parseHost(t)}),co.htmlAnchorElement.href=t,co.htmlAnchorElement},co.getAbsoluteUrl=function(t){var n,a=co.parseUrl(t);return a&&(n=a.href),n},co.getPathName=function(t){var n,a=co.parseUrl(t);return a&&(n=a.pathname),n},co.getCompleteUrl=function(t,n){return t?t.toUpperCase()+" "+n:n},co.parseHost=function(t){var n=t.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return n!=null&&2<n.length&&typeof n[2]=="string"&&0<n[2].length?n[2]:null},co.document=typeof document<"u"?document:{},co);function co(){}var Ly=(Ep.canIncludeCorrelationHeader=function(t,n,a){if(t&&t.disableCorrelationHeaders||!n)return!1;var h=Ay.parseUrl(n).host.toLowerCase();if(!(t&&t.enableCorsCorrelation||h===a))return!1;var y,b=t&&t.correlationHeaderDomains;if(b&&(b.forEach(function(k){var G=new RegExp(k.toLowerCase().replace(/\./g,".").replace(/\*/g,".*"));y=y||G.test(h)}),!y))return!1;var u=t&&t.correlationHeaderExcludedDomains;if(!u||u.length==0)return!0;for(var A=0;A<u.length;A++)if(new RegExp(u[A].toLowerCase().replace(/\./g,".").replace(/\*/g,".*")).test(h))return!1;return!0},Ep.getCorrelationContext=function(t){if(t){var n=Ep.getCorrelationContextValue(t,Xn.requestContextTargetKey);if(n&&n!==Ep.correlationIdPrefix)return n}},Ep.getCorrelationContextValue=function(t,n){if(t)for(var a=t.split(","),h=0;h<a.length;++h){var y=a[h].split("=");if(y.length==2&&y[0]==n)return y[1]}},Ep.correlationIdPrefix="cid-v1:",Ep);function Ep(){}var uA=(J3.ParseDependencyPath=function(t,n,a,h){var y,b=h,u=h;if(n&&0<n.length){var A=Ay.parseUrl(n);if(y=A.host,!b)if(A.pathname!=null){var k=A.pathname.length===0?"/":A.pathname;k.charAt(0)!=="/"&&(k="/"+k),u=A.pathname,b=Ar.sanitizeString(t,a?a+" "+k:k)}else b=Ar.sanitizeString(t,n)}else b=y=h;return{target:y,name:b,data:u}},J3);function J3(){}var to=(x_.Now=typeof window<"u"&&window.performance&&window.performance.now&&window.performance.timing?function(){return window.performance.now()+window.performance.timing.navigationStart}:function(){return new Date().getTime()},x_.GetDuration=function(t,n){var a=null;return t===0||n===0||st.isNullOrUndefined(t)||st.isNullOrUndefined(n)||(a=n-t),a},x_);function x_(){}var Q3,xm="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",w_="ProcessLegacy",eC="http.method",cA=(ze(tC,Q3=function(){}),tC);function tC(){return Q3.call(this)||this}var rC,pA=(ze(nC,rC=function(){this.ver=1,this.sampleRate=100,this.tags={}}),nC);function nC(t,n,a){var h=rC.call(this)||this;return h.name=Ar.sanitizeString(t,a)||Le.NotSpecified,h.data=n,h.time=Le.toISOStringForIE8(new Date),h.aiDataContract={time:et.Required,iKey:et.Required,name:et.Required,sampleRate:function(){return h.sampleRate==100?et.Hidden:et.Required},tags:et.Required,data:et.Required},h}function wm(){}var iC,oC=(ze(aC,iC=wm),aC);function aC(){var t=iC.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}var sC,ec=(ze(Py,sC=oC),Py.envelopeType="Microsoft.ApplicationInsights.{0}.Event",Py.dataType="EventData",Py);function Py(t,n,a,h){var y=sC.call(this)||this;return y.aiDataContract={ver:et.Required,name:et.Required,properties:et.Default,measurements:et.Default},y.name=Ar.sanitizeString(t,n)||Le.NotSpecified,y.properties=Ar.sanitizeProperties(t,a),y.measurements=Ar.sanitizeMeasurements(t,h),y}function hA(){}var lC,dA=(ze(uC,lC=wm),uC);function uC(){var t=lC.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}function fA(){this.hasFullStack=!0,this.parsedStack=[]}var cC,Zl=(ze(tc,cC=dA),tc.CreateFromInterface=function(t,n){var a=n.exceptions&&n.exceptions.map(function(h){return hC.CreateFromInterface(t,h)});return new tc(t,ot({},n,{exceptions:a}))},tc.prototype.toInterface=function(){var t=this.exceptions,n=this.properties,a=this.measurements,h=this.severityLevel,y=this.ver,b=this.problemGroup,u=this.id,A=this.isManual;return{ver:y,exceptions:t instanceof Array&&t.map(function(k){return k.toInterface()})||void 0,severityLevel:h,properties:n,measurements:a,problemGroup:b,id:u,isManual:A}},tc.CreateSimpleException=function(t,n,a,h,y,b){return{exceptions:[{hasFullStack:!0,message:t,stack:y,typeName:n}]}},tc.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",tc.dataType="ExceptionData",tc);function tc(t,n,a,h,y,b){var u=cC.call(this)||this;return u.aiDataContract={ver:et.Required,exceptions:et.Required,severityLevel:et.Default,properties:et.Default,measurements:et.Default},n instanceof Error?(u.exceptions=[new hC(t,n)],u.properties=Ar.sanitizeProperties(t,a),u.measurements=Ar.sanitizeMeasurements(t,h),y&&(u.severityLevel=y),b&&(u.id=b)):(u.exceptions=n.exceptions,u.properties=n.properties,u.measurements=n.measurements,n.severityLevel&&(u.severityLevel=n.severityLevel),n.id&&(u.id=n.id),n.problemGroup&&(u.problemGroup=n.problemGroup),st.isNullOrUndefined(n.ver)||(u.ver=n.ver),st.isNullOrUndefined(n.isManual)||(u.isManual=n.isManual)),u}var pC,hC=(ze(Ip,pC=fA),Ip.prototype.toInterface=function(){var t=this.parsedStack instanceof Array&&this.parsedStack.map(function(n){return n.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:t||void 0}},Ip.CreateFromInterface=function(t,n){var a=n.parsedStack instanceof Array&&n.parsedStack.map(function(h){return b_.CreateFromInterface(h)})||n.parsedStack;return new Ip(t,ot({},n,{parsedStack:a}))},Ip.parseStack=function(t){var n=void 0;if(typeof t=="string"){var a=t.split(`
`);n=[];for(var h=0,y=0,b=0;b<=a.length;b++){var u=a[b];if(b_.regex.test(u)){var A=new b_(a[b],h++);y+=A.sizeInBytes,n.push(A)}}if(32768<y)for(var k=0,G=n.length-1,W=0,se=k,ne=G;k<G;){if(32768<(W+=n[k].sizeInBytes+n[G].sizeInBytes)){var Ee=ne-se+1;n.splice(se,Ee);break}se=k,ne=G,k++,G--}}return n},Ip);function Ip(t,n){var a=pC.call(this)||this;if(a.aiDataContract={id:et.Default,outerId:et.Default,typeName:et.Required,message:et.Required,hasFullStack:et.Default,stack:et.Default,parsedStack:et.Array},n instanceof Error){a.typeName=Ar.sanitizeString(t,n.name)||Le.NotSpecified,a.message=Ar.sanitizeMessage(t,n.message)||Le.NotSpecified;var h=n.stack;a.parsedStack=Ip.parseStack(h),a.stack=Ar.sanitizeException(t,h),a.hasFullStack=Le.isArray(a.parsedStack)&&0<a.parsedStack.length}else a.typeName=n.typeName,a.message=n.message,a.stack=n.stack,a.parsedStack=n.parsedStack,a.hasFullStack=n.hasFullStack;return a}var dC,b_=(ze(Gl,dC=hA),Gl.CreateFromInterface=function(t){return new Gl(t,null)},Gl.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},Gl.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,Gl.baseSize=58,Gl);function Gl(t,n){var a=dC.call(this)||this;if(a.sizeInBytes=0,a.aiDataContract={level:et.Required,method:et.Required,assembly:et.Default,fileName:et.Default,line:et.Default},typeof t=="string"){var h=t;a.level=n,a.method="<no_method>",a.assembly=Le.trim(h),a.fileName="",a.line=0;var y=h.match(Gl.regex);y&&5<=y.length&&(a.method=Le.trim(y[2])||a.method,a.fileName=Le.trim(y[4]),a.line=parseInt(y[5])||0)}else a.level=t.level,a.method=t.method,a.assembly=t.assembly,a.fileName=t.fileName,a.line=t.line,a.sizeInBytes=0;return a.sizeInBytes+=a.method.length,a.sizeInBytes+=a.fileName.length,a.sizeInBytes+=a.assembly.length,a.sizeInBytes+=Gl.baseSize,a.sizeInBytes+=a.level.toString().length,a.sizeInBytes+=a.line.toString().length,a}var fC,C_,Dy,mA=(ze(mC,fC=wm),mC);function mC(){var t=fC.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}(Dy=C_=C_||{})[Dy.Measurement=0]="Measurement",Dy[Dy.Aggregation=1]="Aggregation";var S_,gA=(ze(gC,S_=function(){this.kind=C_.Measurement}),gC);function gC(){var t=S_!==null&&S_.apply(this,arguments)||this;return t.aiDataContract={name:et.Required,kind:et.Default,value:et.Required,count:et.Default,min:et.Default,max:et.Default,stdDev:et.Default},t}var yC,kp=(ze(zy,yC=mA),zy.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",zy.dataType="MetricData",zy);function zy(t,n,a,h,y,b,u){var A=yC.call(this)||this;A.aiDataContract={ver:et.Required,metrics:et.Required,properties:et.Default};var k=new gA;return k.count=0<h?h:void 0,k.max=isNaN(b)||b===null?void 0:b,k.min=isNaN(y)||y===null?void 0:y,k.name=Ar.sanitizeString(t,n)||Le.NotSpecified,k.value=a,A.metrics=[k],A.properties=Ar.sanitizeProperties(t,u),A}var vC,_C=(ze(xC,vC=oC),xC);function xC(){var t=vC.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}var wC,Mp=(ze(Ny,wC=_C),Ny.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",Ny.dataType="PageviewData",Ny);function Ny(t,n,a,h,y,b,u){var A=wC.call(this)||this;return A.aiDataContract={ver:et.Required,name:et.Default,url:et.Default,duration:et.Default,properties:et.Default,measurements:et.Default,id:et.Default},A.id=Ar.sanitizeId(t,u),A.url=Ar.sanitizeUrl(t,a),A.name=Ar.sanitizeString(t,n)||Le.NotSpecified,isNaN(h)||(A.duration=Le.msToTimeSpan(h)),A.properties=Ar.sanitizeProperties(t,y),A.measurements=Ar.sanitizeMeasurements(t,b),A}var bC,yA=(ze(CC,bC=wm),CC);function CC(){var t=bC.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}var SC,Ap=(ze(Oy,SC=yA),Oy.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",Oy.dataType="RemoteDependencyData",Oy);function Oy(t,n,a,h,y,b,u,A,k,G,W,se){k===void 0&&(k="Ajax");var ne=SC.call(this)||this;ne.aiDataContract={id:et.Required,ver:et.Required,name:et.Default,resultCode:et.Default,duration:et.Default,success:et.Default,data:et.Default,target:et.Default,type:et.Default,properties:et.Default,measurements:et.Default,kind:et.Default,value:et.Default,count:et.Default,min:et.Default,max:et.Default,stdDev:et.Default,dependencyKind:et.Default,dependencySource:et.Default,commandName:et.Default,dependencyTypeName:et.Default},ne.id=n,ne.duration=Le.msToTimeSpan(y),ne.success=b,ne.resultCode=u+"",ne.type=Ar.sanitizeString(t,k);var Ee=uA.ParseDependencyPath(t,a,A,h);return ne.data=Ar.sanitizeUrl(t,h)||Ee.data,ne.target=Ar.sanitizeString(t,Ee.target),G&&(ne.target=ne.target+" | "+G),ne.name=Ar.sanitizeString(t,Ee.name),ne.properties=Ar.sanitizeProperties(t,W),ne.measurements=Ar.sanitizeMeasurements(t,se),ne}var TC,vA=(ze(EC,TC=wm),EC);function EC(){var t=TC.call(this)||this;return t.ver=2,t.properties={},t}var IC,ld=(ze(Ry,IC=vA),Ry.envelopeType="Microsoft.ApplicationInsights.{0}.Message",Ry.dataType="MessageData",Ry);function Ry(t,n,a,h){var y=IC.call(this)||this;return y.aiDataContract={ver:et.Required,message:et.Required,severityLevel:et.Default,properties:et.Default},n=n||Le.NotSpecified,y.message=Ar.sanitizeMessage(t,n),y.properties=Ar.sanitizeProperties(t,h),a&&(y.severityLevel=a),y}var kC,_A=(ze(MC,kC=_C),MC);function MC(){var t=kC.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}var AC,ud=(ze(By,AC=_A),By.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",By.dataType="PageviewPerformanceData",By);function By(t,n,a,h,y,b,u){var A=AC.call(this)||this;return A.aiDataContract={ver:et.Required,name:et.Default,url:et.Default,duration:et.Default,perfTotal:et.Default,networkConnect:et.Default,sentRequest:et.Default,receivedResponse:et.Default,domProcessing:et.Default,properties:et.Default,measurements:et.Default},A.url=Ar.sanitizeUrl(t,a),A.name=Ar.sanitizeString(t,n)||Le.NotSpecified,A.properties=Ar.sanitizeProperties(t,y),A.measurements=Ar.sanitizeMeasurements(t,b),u&&(A.domProcessing=u.domProcessing,A.duration=u.duration,A.networkConnect=u.networkConnect,A.perfTotal=u.perfTotal,A.receivedResponse=u.receivedResponse,A.sentRequest=u.sentRequest),A}var LC,T_,el,Lp=(ze(PC,LC=cA),PC);function PC(t,n){var a=LC.call(this)||this;return a.aiDataContract={baseType:et.Required,baseData:et.Required},a.baseType=t,a.baseData=n,a}(el=T_=T_||{})[el.Verbose=0]="Verbose",el[el.Information=1]="Information",el[el.Warning=2]="Warning",el[el.Error=3]="Error",el[el.Critical=4]="Critical";var Fy=(DC.getConfig=function(t,n,a,h){var y;return h===void 0&&(h=!1),y=a&&t.extensionConfig&&t.extensionConfig[a]&&!st.isNullOrUndefined(t.extensionConfig[a][n])?t.extensionConfig[a][n]:t[n],st.isNullOrUndefined(y)?h:y},DC);function DC(){}var zC=function(){this.applicationVersion="ai.application.ver",this.applicationBuild="ai.application.build",this.applicationTypeId="ai.application.typeId",this.applicationId="ai.application.applicationId",this.applicationLayer="ai.application.layer",this.deviceId="ai.device.id",this.deviceIp="ai.device.ip",this.deviceLanguage="ai.device.language",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceFriendlyName="ai.device.friendlyName",this.deviceNetwork="ai.device.network",this.deviceNetworkName="ai.device.networkName",this.deviceOEMName="ai.device.oemName",this.deviceOS="ai.device.os",this.deviceOSVersion="ai.device.osVersion",this.deviceRoleInstance="ai.device.roleInstance",this.deviceRoleName="ai.device.roleName",this.deviceScreenResolution="ai.device.screenResolution",this.deviceType="ai.device.type",this.deviceMachineName="ai.device.machineName",this.deviceVMName="ai.device.vmName",this.deviceBrowser="ai.device.browser",this.deviceBrowserVersion="ai.device.browserVersion",this.locationIp="ai.location.ip",this.locationCountry="ai.location.country",this.locationProvince="ai.location.province",this.locationCity="ai.location.city",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationRootId="ai.operation.rootId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.sessionIsNew="ai.session.isNew",this.userAccountAcquisitionDate="ai.user.accountAcquisitionDate",this.userAccountId="ai.user.accountId",this.userAgent="ai.user.userAgent",this.userId="ai.user.id",this.userStoreRegion="ai.user.storeRegion",this.userAuthUserId="ai.user.authUserId",this.userAnonymousUserAcquisitionDate="ai.user.anonUserAcquisitionDate",this.userAuthenticatedUserAcquisitionDate="ai.user.authUserAcquisitionDate",this.cloudName="ai.cloud.name",this.cloudRole="ai.cloud.role",this.cloudRoleVer="ai.cloud.roleVer",this.cloudRoleInstance="ai.cloud.roleInstance",this.cloudEnvironment="ai.cloud.environment",this.cloudLocation="ai.cloud.location",this.cloudDeploymentUnit="ai.cloud.deploymentUnit",this.internalNodeName="ai.internal.nodeName",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion"},rc=(NC.create=function(t,n,a,h,y,b){if(a=Ar.sanitizeString(h,a)||Le.NotSpecified,st.isNullOrUndefined(t)||st.isNullOrUndefined(n)||st.isNullOrUndefined(a))throw Error("Input doesn't contain all required fields");var u={name:a,time:new Date().toISOString(),iKey:"",ext:b||{},tags:[],data:{},baseType:n,baseData:t};if(!st.isNullOrUndefined(y))for(var A in y)y.hasOwnProperty(A)&&(u.data[A]=y[A]);return u},NC);function NC(){}var qr=(Hl.UserExt="user",Hl.DeviceExt="device",Hl.TraceExt="trace",Hl.WebExt="web",Hl.AppExt="app",Hl.OSExt="os",Hl.SessionExt="ses",Hl.SDKExt="sdk",Hl);function Hl(){}var Nn=new zC,jy="AppInsightsPropertiesPlugin",OC="AppInsightsChannelPlugin",xA=(RC.prototype.trackPageView=function(t,n){var a=this,h=t.name;!st.isNullOrUndefined(h)&&typeof h=="string"||(t.name=window.document&&window.document.title||"");var y=t.uri;if(!st.isNullOrUndefined(y)&&typeof y=="string"||(t.uri=window.location&&window.location.href||""),!this._pageViewPerformanceManager.isPerformanceTimingSupported())return this.appInsights.sendPageViewInternal(t,n),this._channel().forEach(function(W){W.forEach(function(se){return se.flush(!0)})}),void this._logger.throwInternal(Qe.WARNING,k6,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var b=!1,u=void 0,A=this._pageViewPerformanceManager.getPerformanceTiming().navigationStart;u=to.GetDuration(A,+new Date),this._pageViewPerformanceManager.shouldCollectDuration(u)||(u=void 0);var k=void 0;st.isNullOrUndefined(n)||st.isNullOrUndefined(n.duration)||(k=n.duration),!this.overridePageViewDuration&&isNaN(k)||(isNaN(k)&&((n=n||{}).duration=u),this.appInsights.sendPageViewInternal(t,n),this._channel().forEach(function(W){W.forEach(function(se){return se.flush(!0)})}),b=!0),n=n||{};var G=setInterval(function(){try{if(a._pageViewPerformanceManager.isPerformanceTimingDataReady()){clearInterval(G);var W={name:h,uri:y};a._pageViewPerformanceManager.populatePageViewPerformanceEvent(W),W.isValid||b?(b||(n.duration=W.durationMs,a.appInsights.sendPageViewInternal(t,n)),a.pageViewPerformanceSent||(a.appInsights.sendPageViewPerformanceInternal(W,n),a.pageViewPerformanceSent=!0),a._channel().forEach(function(se){se.forEach(function(ne){return ne.flush(!0)})})):(n.duration=u,a.appInsights.sendPageViewInternal(t,n),a._channel().forEach(function(se){se.forEach(function(ne){return ne.flush(!0)})}))}else 6e4<to.GetDuration(A,+new Date)&&(clearInterval(G),b||(n.duration=6e4,a.appInsights.sendPageViewInternal(t,n),a._channel().forEach(function(se){se.forEach(function(ne){return ne.flush(!0)})})))}catch(se){a._logger.throwInternal(Qe.CRITICAL,F6,"trackPageView failed on page load calculation: "+Le.getExceptionName(se),{exception:Le.dump(se)})}},100)},RC);function RC(t,n,a,h){this.pageViewPerformanceSent=!1,this.overridePageViewDuration=!1,this.overridePageViewDuration=n,this.appInsights=t,this._pageViewPerformanceManager=h,a&&(this._channel=function(){return a.getTransmissionControls()},this._logger=a.logger)}var wA=(bm.prototype.trackPreviousPageVisit=function(t,n){try{var a=this.restartPageVisitTimer(t,n);a&&this.pageVisitTimeTrackingHandler(a.pageName,a.pageUrl,a.pageVisitTime)}catch(h){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+Le.dump(h))}},bm.prototype.restartPageVisitTimer=function(t,n){try{var a=this.stopPageVisitTimer();return this.startPageVisitTimer(t,n),a}catch(h){return this._logger.warnToConsole("Call to restart failed: "+Le.dump(h)),null}},bm.prototype.startPageVisitTimer=function(t,n){try{if(Le.canUseSessionStorage()){if(Le.getSessionStorage(this._logger,this.prevPageVisitDataKeyName)!=null)throw new Error("Cannot call startPageVisit consecutively without first calling stopPageVisit");var a=new bA(t,n),h=JSON.stringify(a);Le.setSessionStorage(this._logger,this.prevPageVisitDataKeyName,h)}}catch(y){this._logger.warnToConsole("Call to start failed: "+Le.dump(y))}},bm.prototype.stopPageVisitTimer=function(){try{if(Le.canUseSessionStorage()){var t=Date.now(),n=Le.getSessionStorage(this._logger,this.prevPageVisitDataKeyName);if(n){var a=JSON.parse(n);return a.pageVisitTime=t-a.pageVisitStartTime,Le.removeSessionStorage(this._logger,this.prevPageVisitDataKeyName),a}return null}return null}catch(h){return this._logger.warnToConsole("Stop page visit timer failed: "+Le.dump(h)),null}},bm);function bm(t,n){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=n,this._logger=t}var bA=function(t,n){this.pageVisitStartTime=Date.now(),this.pageName=t,this.pageUrl=n},CA=(cd.prototype.populatePageViewPerformanceEvent=function(t){t.isValid=!1;var n=this.getPerformanceTiming();if(n){var a=to.GetDuration(n.navigationStart,n.loadEventEnd),h=to.GetDuration(n.navigationStart,n.connectEnd),y=to.GetDuration(n.requestStart,n.responseStart),b=to.GetDuration(n.responseStart,n.responseEnd),u=to.GetDuration(n.responseEnd,n.loadEventEnd);a==0?this._logger.throwInternal(Qe.WARNING,y6,"error calculating page view performance.",{total:a,network:h,request:y,response:b,dom:u}):this.shouldCollectDuration(a,h,y,b,u)?a<Math.floor(h)+Math.floor(y)+Math.floor(b)+Math.floor(u)?this._logger.throwInternal(Qe.WARNING,m6,"client performance math error.",{total:a,network:h,request:y,response:b,dom:u}):(t.durationMs=a,t.perfTotal=t.duration=Le.msToTimeSpan(a),t.networkConnect=Le.msToTimeSpan(h),t.sentRequest=Le.msToTimeSpan(y),t.receivedResponse=Le.msToTimeSpan(b),t.domProcessing=Le.msToTimeSpan(u),t.isValid=!0):this._logger.throwInternal(Qe.WARNING,q6,"Invalid page load duration value. Browser perf data won't be sent.",{total:a,network:h,request:y,response:b,dom:u})}},cd.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?window.performance.timing:null},cd.prototype.isPerformanceTimingSupported=function(){return typeof window<"u"&&window.performance&&window.performance.timing},cd.prototype.isPerformanceTimingDataReady=function(){var t=window.performance.timing;return 0<t.domainLookupStart&&0<t.navigationStart&&0<t.responseStart&&0<t.requestStart&&0<t.loadEventEnd&&0<t.responseEnd&&0<t.connectEnd&&0<t.domLoading},cd.prototype.shouldCollectDuration=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=["googlebot","adsbot-google","apis-google","mediapartners-google"],h=navigator.userAgent,y=!1;if(h)for(var b=0;b<a.length;b++)y=y||h.toLowerCase().indexOf(a[b])!==-1;if(y)return!1;for(var u=0;u<t.length;u++)if(t[u]>=this.MAX_DURATION_ALLOWED)return!1;return!0},cd);function cd(t){this.MAX_DURATION_ALLOWED=36e5,t&&(this._logger=t.logger)}var BC="duration",FC=(gn.getDefaultConfig=function(t){return(t=t||{}).sessionRenewalMs=18e5,t.sessionExpirationMs=864e5,t.disableExceptionTracking=Le.stringToBoolOrDefault(t.disableExceptionTracking),t.autoTrackPageVisitTime=Le.stringToBoolOrDefault(t.autoTrackPageVisitTime),t.overridePageViewDuration=Le.stringToBoolOrDefault(t.overridePageViewDuration),(isNaN(t.samplingPercentage)||t.samplingPercentage<=0||100<=t.samplingPercentage)&&(t.samplingPercentage=100),t.isCookieUseDisabled=Le.stringToBoolOrDefault(t.isCookieUseDisabled),t.isStorageUseDisabled=Le.stringToBoolOrDefault(t.isStorageUseDisabled),t.isBrowserLinkTrackingEnabled=Le.stringToBoolOrDefault(t.isBrowserLinkTrackingEnabled),t.enableAutoRouteTracking=Le.stringToBoolOrDefault(t.enableAutoRouteTracking),t.namePrefix=t.namePrefix||"",t},gn.prototype.processTelemetry=function(t){for(var n=!1,a=this._telemetryInitializers.length,h=0;h<a;++h){var y=this._telemetryInitializers[h];if(y)try{if(y.apply(null,[t])===!1){n=!0;break}}catch(b){this._logger.throwInternal(Qe.CRITICAL,$3,"One of telemetry initializers failed, telemetry item will not be sent: "+Le.getExceptionName(b),{exception:Le.dump(b)},!0)}}n||st.isNullOrUndefined(this._nextPlugin)||this._nextPlugin.processTelemetry(t)},gn.prototype.setNextPlugin=function(t){this._nextPlugin=t},gn.prototype.trackEvent=function(t,n){try{var a=rc.create(t,ec.dataType,ec.envelopeType,this._logger,n);this.core.track(a)}catch(h){this._logger.throwInternal(Qe.WARNING,W3,"trackTrace failed, trace will not be collected: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},gn.prototype.startTrackEvent=function(t){try{this._eventTracking.start(t)}catch(n){this._logger.throwInternal(Qe.CRITICAL,P6,"startTrackEvent failed, event will not be collected: "+Le.getExceptionName(n),{exception:Le.dump(n)})}},gn.prototype.stopTrackEvent=function(t,n,a){try{this._eventTracking.stop(t,void 0,n)}catch(h){this._logger.throwInternal(Qe.CRITICAL,D6,"stopTrackEvent failed, event will not be collected: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},gn.prototype.trackTrace=function(t,n){try{var a=rc.create(t,ld.dataType,ld.envelopeType,this._logger,n);this.core.track(a)}catch(h){this._logger.throwInternal(Qe.WARNING,W3,"trackTrace failed, trace will not be collected: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},gn.prototype.trackMetric=function(t,n){try{var a=rc.create(t,kp.dataType,kp.envelopeType,this._logger,n);this.core.track(a)}catch(h){this._logger.throwInternal(Qe.CRITICAL,B6,"trackMetric failed, metric will not be collected: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},gn.prototype.trackPageView=function(t,n){try{var a=t||{};this._pageViewManager.trackPageView(a,ot({},a.properties,a.measurements,n)),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(a.name,a.uri)}catch(h){this._logger.throwInternal(Qe.CRITICAL,H3,"trackPageView failed, page view will not be collected: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},gn.prototype.sendPageViewInternal=function(t,n,a){typeof document<"u"&&(t.refUri=t.refUri===void 0?document.referrer:t.refUri);var h=rc.create(t,Mp.dataType,Mp.envelopeType,this._logger,n,a);this.core.track(h),this._trackAjaxAttempts=0},gn.prototype.sendPageViewPerformanceInternal=function(t,n,a){var h=rc.create(t,ud.dataType,ud.envelopeType,this._logger,n,a);this.core.track(h)},gn.prototype.trackPageViewPerformance=function(t,n){try{this._pageViewPerformanceManager.populatePageViewPerformanceEvent(t),this.sendPageViewPerformanceInternal(t,n)}catch(a){this._logger.throwInternal(Qe.CRITICAL,H3,"trackPageViewPerformance failed, page view will not be collected: "+Le.getExceptionName(a),{exception:Le.dump(a)})}},gn.prototype.startTrackPage=function(t){try{typeof t!="string"&&(t=window.document&&window.document.title||""),this._pageTracking.start(t)}catch(n){this._logger.throwInternal(Qe.CRITICAL,z6,"startTrackPage failed, page view may not be collected: "+Le.getExceptionName(n),{exception:Le.dump(n)})}},gn.prototype.stopTrackPage=function(t,n,a,h){try{typeof t!="string"&&(t=window.document&&window.document.title||""),typeof n!="string"&&(n=window.location&&window.location.href||""),this._pageTracking.stop(t,n,a,h),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(t,n)}catch(y){this._logger.throwInternal(Qe.CRITICAL,N6,"stopTrackPage failed, page view will not be collected: "+Le.getExceptionName(y),{exception:Le.dump(y)})}},gn.prototype.sendExceptionInternal=function(t,n,a){var h=new Zl(this._logger,t.exception||new Error(Le.NotSpecified),t.properties,t.measurements,t.severityLevel,t.id).toInterface(),y=rc.create(h,Zl.dataType,Zl.envelopeType,this._logger,n,a);this.core.track(y)},gn.prototype.trackException=function(t,n){try{this.sendExceptionInternal(t,n)}catch(a){this._logger.throwInternal(Qe.CRITICAL,R6,"trackException failed, exception will not be collected: "+Le.getExceptionName(a),{exception:Le.dump(a)})}},gn.prototype._onerror=function(t){try{var n={url:t&&t.url||document.URL,lineNumber:t.lineNumber,columnNumber:t.columnNumber,message:t.message};if(Le.isCrossOriginError(t.message,t.url,t.lineNumber,t.columnNumber,t.error))this._sendCORSException(n.url);else{if(!Le.isError(t.error)){var a="window.onerror@"+n.url+":"+t.lineNumber+":"+(t.columnNumber||0);t.error=new Error(t.message),t.error.stack=a}this.trackException({exception:t.error,severityLevel:T_.Error},n)}}catch(y){var h=t.error?t.error.name+", "+t.error.message:"null";this._logger.throwInternal(Qe.CRITICAL,v6,"_onError threw exception while logging error, error will not be collected: "+Le.getExceptionName(y),{exception:Le.dump(y),errorString:h})}},gn.prototype.addTelemetryInitializer=function(t){this._telemetryInitializers.push(t)},gn.prototype._initialize=function(t,n,a){var h=this;if(!this._isInitialized){if(st.isNullOrUndefined(n))throw Error("Error initializing");this.core=n,this._logger=n.logger,this._globalconfig={instrumentationKey:t.instrumentationKey,endpointUrl:t.endpointUrl||"https://dc.services.visualstudio.com/v2/track"},this.config=t.extensionConfig&&t.extensionConfig[this.identifier]?t.extensionConfig[this.identifier]:{};var y=gn.getDefaultConfig();if(y!==void 0){for(var b in y)this.config[b]=Fy.getConfig(t,b,this.identifier,y[b]);if(this._globalconfig)for(var b in y)this._globalconfig[b]===void 0&&(this._globalconfig[b]=y[b])}this.config.isCookieUseDisabled&&Le.disableCookies(),this.config.isStorageUseDisabled&&Le.disableStorage();var u={instrumentationKey:function(){return t.instrumentationKey},accountId:function(){return h.config.accountId||t.accountId},sessionRenewalMs:function(){return h.config.sessionRenewalMs||t.sessionRenewalMs},sessionExpirationMs:function(){return h.config.sessionExpirationMs||t.sessionExpirationMs},sampleRate:function(){return h.config.samplingPercentage||t.samplingPercentage},cookieDomain:function(){return h.config.cookieDomain||t.cookieDomain},sdkExtension:function(){return h.config.sdkExtension||t.sdkExtension},isBrowserLinkTrackingEnabled:function(){return h.config.isBrowserLinkTrackingEnabled||t.isBrowserLinkTrackingEnabled},appId:function(){return h.config.appId||t.appId}};this._pageViewPerformanceManager=new CA(this.core),this._pageViewManager=new xA(this,this.config.overridePageViewDuration,this.core,this._pageViewPerformanceManager),this._pageVisitTimeManager=new wA(this._logger,function(ne,Ee,Ge){return h.trackPageVisitTime(ne,Ee,Ge)}),this._telemetryInitializers=[],this._addDefaultTelemetryInitializers(u),this._eventTracking=new jC(this._logger,"trackEvent"),this._eventTracking.action=function(ne,Ee,Ge,pt){(pt=pt||{})[BC]=Ge.toString(),h.trackEvent({name:ne,properties:pt})},this._pageTracking=new jC(this._logger,"trackPageView"),this._pageTracking.action=function(ne,Ee,Ge,pt,Wt){st.isNullOrUndefined(pt)&&(pt={}),pt[BC]=Ge.toString();var nt={name:ne,uri:Ee,properties:pt,measurements:Wt};h.sendPageViewInternal(nt)};var A,k,G=this;if(this.config.disableExceptionTracking===!1&&!this.config.autoExceptionInstrumented){var W=window.onerror;window.onerror=function(ne,Ee,Ge,pt,Wt){var nt=W&&W(ne,Ee,Ge,pt,Wt);return nt!==!0&&G._onerror({message:ne,url:Ee,lineNumber:Ge,columnNumber:pt,error:Wt}),nt},this.config.autoExceptionInstrumented=!0}if(this.config.enableAutoRouteTracking===!0&&typeof history=="object"&&typeof history.pushState=="function"&&typeof history.replaceState=="function"&&typeof window=="object"&&typeof Event<"u"){var se=this;a.forEach(function(ne){ne.identifier===jy&&(h._properties=ne)}),history.pushState=(k=history.pushState,function(){var ne=k.apply(this,arguments);return window.dispatchEvent(Le.createDomEvent(se.config.namePrefix+"pushState")),window.dispatchEvent(Le.createDomEvent(se.config.namePrefix+"locationchange")),ne}),history.replaceState=(A=history.replaceState,function(){var ne=A.apply(this,arguments);return window.dispatchEvent(Le.createDomEvent(se.config.namePrefix+"replaceState")),window.dispatchEvent(Le.createDomEvent(se.config.namePrefix+"locationchange")),ne}),window.addEventListener(se.config.namePrefix+"popstate",function(){window.dispatchEvent(Le.createDomEvent(se.config.namePrefix+"locationchange"))}),window.addEventListener(se.config.namePrefix+"locationchange",function(){se._properties&&se._properties.context&&se._properties.context.telemetryTrace&&(se._properties.context.telemetryTrace.traceID=Le.generateW3CId(),se._properties.context.telemetryTrace.name=window.location&&window.location.pathname||"_unknown_"),h._currUri&&(h._prevUri=h._currUri),h._currUri=window.location&&window.location.href||"",setTimeout(function(ne){se.trackPageView({refUri:ne,properties:{duration:0}})}.bind(h,h._prevUri),se.autoRoutePVDelay)})}this._isInitialized=!0}},gn.prototype.trackPageVisitTime=function(t,n,a){var h={PageName:t,PageUrl:n};this.trackMetric({name:"PageVisitTime",average:a,max:a,min:a,sampleCount:1},h)},gn.prototype._addDefaultTelemetryInitializers=function(t){if(!t.isBrowserLinkTrackingEnabled()){var n=["/browserLinkSignalR/","/__browserLink/"];this._addTelemetryInitializer(function(a){if(a.baseType===Ap.dataType){var h=a.baseData;if(h){for(var y=0;y<n.length;y++)if(h.target&&0<=h.target.indexOf(n[y]))return!1}}return!0})}},gn.prototype._addTelemetryInitializer=function(t){this._telemetryInitializers.push(t)},gn.prototype._sendCORSException=function(t){var n={message:"Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",url:t,lineNumber:0,columnNumber:0,error:void 0},a=rc.create(n,Zl.dataType,Zl.envelopeType,this._logger,{url:t});this.core.track(a)},gn.Version="2.2.2",gn);function gn(){this.identifier="ApplicationInsightsAnalytics",this.priority=180,this.autoRoutePVDelay=500,this._isInitialized=!1,this._trackAjaxAttempts=0,this._prevUri=typeof window=="object"&&window.location&&window.location.href||"",this.initialize=this._initialize.bind(this)}var jC=(E_.prototype.start=function(t){this._events[t]!==void 0&&this._logger.throwInternal(Qe.WARNING,eA,"start was called more than once for this event without calling stop.",{name:this._name,key:t},!0),this._events[t]=+new Date},E_.prototype.stop=function(t,n,a,h){var y=this._events[t];if(isNaN(y))this._logger.throwInternal(Qe.WARNING,tA,"stop was called without a corresponding start.",{name:this._name,key:t},!0);else{var b=+new Date,u=to.GetDuration(y,b);this.action(t,n,u,a,h)}delete this._events[t],this._events[t]=void 0},E_);function E_(t,n){this._name=n,this._events={},this._logger=t}var SA=(nc.prototype.enqueue=function(t){this._buffer.push(t)},nc.prototype.count=function(){return this._buffer.length},nc.prototype.clear=function(){this._buffer.length=0},nc.prototype.getItems=function(){return this._buffer.slice(0)},nc.prototype.batchPayloads=function(t){return t&&0<t.length?this._config.emitLineDelimitedJson()?t.join(`
`):"["+t.join(",")+"]":null},nc.prototype.markAsSent=function(t){this.clear()},nc.prototype.clearSent=function(t){},nc);function nc(t){this._config=t,this._buffer=[]}var TA=(zr.prototype.enqueue=function(t){this._buffer.length>=zr.MAX_BUFFER_SIZE?this._bufferFullMessageSent||(this._logger.throwInternal(Qe.WARNING,X3,"Maximum buffer size reached: "+this._buffer.length,!0),this._bufferFullMessageSent=!0):(this._buffer.push(t),this.setBuffer(zr.BUFFER_KEY,this._buffer))},zr.prototype.count=function(){return this._buffer.length},zr.prototype.clear=function(){this._buffer.length=0,this.setBuffer(zr.BUFFER_KEY,[]),this.setBuffer(zr.SENT_BUFFER_KEY,[]),this._bufferFullMessageSent=!1},zr.prototype.getItems=function(){return this._buffer.slice(0)},zr.prototype.batchPayloads=function(t){return t&&0<t.length?this._config.emitLineDelimitedJson()?t.join(`
`):"["+t.join(",")+"]":null},zr.prototype.markAsSent=function(t){this._buffer=this.removePayloadsFromBuffer(t,this._buffer),this.setBuffer(zr.BUFFER_KEY,this._buffer);var n=this.getBuffer(zr.SENT_BUFFER_KEY);n instanceof Array&&t instanceof Array&&((n=n.concat(t)).length>zr.MAX_BUFFER_SIZE&&(this._logger.throwInternal(Qe.CRITICAL,X3,"Sent buffer reached its maximum size: "+n.length,!0),n.length=zr.MAX_BUFFER_SIZE),this.setBuffer(zr.SENT_BUFFER_KEY,n))},zr.prototype.clearSent=function(t){var n=this.getBuffer(zr.SENT_BUFFER_KEY);n=this.removePayloadsFromBuffer(t,n),this.setBuffer(zr.SENT_BUFFER_KEY,n)},zr.prototype.removePayloadsFromBuffer=function(t,n){var a=[];for(var h in n){var y=!1;for(var b in t)if(t[b]===n[h]){y=!0;break}y||a.push(n[h])}return a},zr.prototype.getBuffer=function(t){var n=t;try{n=this._config.namePrefix&&this._config.namePrefix()?this._config.namePrefix()+"_"+n:n;var a=Le.getSessionStorage(this._logger,n);if(a){var h=JSON.parse(a);if(h)return h}}catch(y){this._logger.throwInternal(Qe.CRITICAL,U6," storage key: "+n+", "+Le.getExceptionName(y),{exception:Le.dump(y)})}return[]},zr.prototype.setBuffer=function(t,n){var a=t;try{a=this._config.namePrefix&&this._config.namePrefix()?this._config.namePrefix()+"_"+a:a;var h=JSON.stringify(n);Le.setSessionStorage(this._logger,a,h)}catch(y){Le.setSessionStorage(this._logger,a,JSON.stringify([])),this._logger.throwInternal(Qe.WARNING,j6," storage key: "+a+", "+Le.getExceptionName(y)+". Buffer cleared",{exception:Le.dump(y)})}},zr.BUFFER_KEY="AI_buffer",zr.SENT_BUFFER_KEY="AI_sentBuffer",zr.MAX_BUFFER_SIZE=2e3,zr);function zr(t,n){this._bufferFullMessageSent=!1,this._logger=t,this._config=n;var a=this.getBuffer(zr.BUFFER_KEY),h=this.getBuffer(zr.SENT_BUFFER_KEY);this._buffer=a.concat(h),this._buffer.length>zr.MAX_BUFFER_SIZE&&(this._buffer.length=zr.MAX_BUFFER_SIZE),this.setBuffer(zr.SENT_BUFFER_KEY,[]),this.setBuffer(zr.BUFFER_KEY,this._buffer)}var li=(ic.extractProperties=function(t){var n=null;for(var a in t)if(t.hasOwnProperty(a)){var h=t[a];typeof h!="number"&&((n=n||{})[a]=h)}return n},ic.extractPropsAndMeasurements=function(t,n,a){if(!st.isNullOrUndefined(t)){for(var h in t)if(t.hasOwnProperty(h)){var y=t[h];typeof y=="number"?a[h]=y:n[h]=typeof y=="string"?y:JSON.stringify(y)}}},ic.createEnvelope=function(t,n,a,h){var y=new pA(t,h,n);y.iKey=a.iKey;var b=a.iKey.replace(/-/g,"");return y.name=y.name.replace("{0}",b),ic.extractPartAExtensions(a,y),a.tags||(a.tags=[]),y},ic.extractPartAExtensions=function(t,n){if(n.tags||(n.tags={}),t.ext||(t.ext={}),t.tags||(t.tags=[]),t.ext.user){t.ext.user.authId&&(n.tags[Nn.userAuthUserId]=t.ext.user.authId);var a=t.ext.user.id||t.ext.user.localId;a&&(n.tags[Nn.userId]=a)}if(t.ext.app&&t.ext.app.sesId&&(n.tags[Nn.sessionId]=t.ext.app.sesId),t.ext.device&&((t.ext.device.id||t.ext.device.localId)&&(n.tags[Nn.deviceId]=t.ext.device.id||t.ext.device.localId),t.ext.device.deviceClass&&(n.tags[Nn.deviceType]=t.ext.device.deviceClass),t.ext.device.ip&&(n.tags[Nn.deviceIp]=t.ext.device.ip)),t.ext.web){var h=t.ext.web;h.browserLang&&(n.tags[Nn.deviceLanguage]=h.browserLang),h.browserVer&&(n.tags[Nn.deviceBrowserVersion]=h.browserVer),h.browser&&(n.tags[Nn.deviceBrowser]=h.browser),n.data=n.data||{},n.data.baseData=n.data.baseData||{},n.data.baseData.properties=n.data.baseData.properties||{},h.domain&&(n.data.baseData.properties.domain=h.domain),h.isManual&&(n.data.baseData.properties.isManual=h.isManual.toString()),h.screenRes&&(n.data.baseData.properties.screenRes=h.screenRes),h.userConsent&&(n.data.baseData.properties.userConsent=h.userConsent.toString())}t.ext.device&&t.ext.device.model&&(n.tags[Nn.deviceModel]=t.ext.device.model),t.ext.os&&t.ext.os.name&&(n.tags[Nn.deviceOS]=t.ext.os.name),t.ext.device&&t.ext.device.deviceType&&(n.tags[Nn.deviceType]=t.ext.device.deviceType),t.ext.trace&&(t.ext.trace.parentID&&(n.tags[Nn.operationParentId]=t.ext.trace.parentID),t.ext.trace.name&&(n.tags[Nn.operationName]=t.ext.trace.name),t.ext.trace.traceID&&(n.tags[Nn.operationId]=t.ext.trace.traceID));for(var y={},b=function(k){var G=t.tags[k];Object.keys(G).forEach(function(W){y[W]=G[W]}),t.tags.splice(k,1)},u=t.tags.length-1;0<=u;u--)b(u);for(var A in t.tags)y[A]=t.tags[A];n.tags=ot({},n.tags,y),n.tags[Nn.internalSdkVersion]||(n.tags[Nn.internalSdkVersion]="javascript:"+ic.Version)},ic.Version="2.2.2",ic);function ic(){}var I_,EA=(ze(Cm,I_=li),Cm.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=n.baseData.measurements||{},h=n.baseData.properties||{};li.extractPropsAndMeasurements(n.data,h,a);var y=n.baseData;if(st.isNullOrUndefined(y))return t.warnToConsole("Invalid input for dependency data"),null;var b=y.id,u=y.target,A=y.name,k=y.duration,G=y.success,W=y.responseCode,se=y.type,ne=y.correlationContext,Ee=y.properties&&y.properties[eC]?y.properties[eC]:"GET",Ge=new Ap(t,b,u,A,k,G,W,Ee,se,ne,h,a),pt=new Lp(Ap.dataType,Ge);return li.createEnvelope(t,Ap.envelopeType,n,pt)},Cm.DependencyEnvelopeCreator=new Cm,Cm);function Cm(){return I_!==null&&I_.apply(this,arguments)||this}var k_,UC=(ze(Sm,k_=li),Sm.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a={},h={};n.baseType!==ec.dataType&&(a.baseTypeSource=n.baseType),n.baseType===ec.dataType?(a=n.baseData.properties||{},h=n.baseData.measurements||{}):n.baseData&&li.extractPropsAndMeasurements(n.baseData,a,h),li.extractPropsAndMeasurements(n.data,a,h);var y=n.baseData.name,b=new ec(t,y,a,h),u=new Lp(ec.dataType,b);return li.createEnvelope(t,ec.envelopeType,n,u)},Sm.EventEnvelopeCreator=new Sm,Sm);function Sm(){return k_!==null&&k_.apply(this,arguments)||this}var M_,IA=(ze(Tm,M_=li),Tm.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=n.baseData,h=Zl.CreateFromInterface(t,a),y=new Lp(Zl.dataType,h);return li.createEnvelope(t,Zl.envelopeType,n,y)},Tm.ExceptionEnvelopeCreator=new Tm,Tm);function Tm(){return M_!==null&&M_.apply(this,arguments)||this}var A_,kA=(ze(Em,A_=li),Em.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=n.baseData.properties||{},h=li.extractProperties(n.data);h=ot({},a,h);var y=n.baseData.name,b=n.baseData.average,u=n.baseData.sampleCount,A=n.baseData.min,k=n.baseData.max,G=new kp(t,y,b,u,A,k,h),W=new Lp(kp.dataType,G);return li.createEnvelope(t,kp.envelopeType,n,W)},Em.MetricEnvelopeCreator=new Em,Em);function Em(){return A_!==null&&A_.apply(this,arguments)||this}var L_,MA=(ze(Im,L_=li),Im.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=void 0;st.isNullOrUndefined(n.baseData)||st.isNullOrUndefined(n.baseData.properties)||st.isNullOrUndefined(n.baseData.properties.duration)?st.isNullOrUndefined(n.data)||st.isNullOrUndefined(n.data.duration)||(a=n.data.duration,delete n.data.duration):(a=n.baseData.properties.duration,delete n.baseData.properties.duration);var h,y=n.baseData;n.ext&&n.ext.trace&&n.ext.trace.traceID&&(h=n.ext.trace.traceID);var b=y.id||h,u=y.name,A=y.uri,k=y.properties||{},G=y.measurements||{};if(st.isNullOrUndefined(y.refUri)||(k.refUri=y.refUri),st.isNullOrUndefined(y.pageType)||(k.pageType=y.pageType),st.isNullOrUndefined(y.isLoggedIn)||(k.isLoggedIn=y.isLoggedIn.toString()),!st.isNullOrUndefined(y.properties)){var W=y.properties;for(var se in W)W.hasOwnProperty(se)&&(k[se]=W[se])}li.extractPropsAndMeasurements(n.data,k,G);var ne=new Mp(t,u,A,a,k,G,b),Ee=new Lp(Mp.dataType,ne);return li.createEnvelope(t,Mp.envelopeType,n,Ee)},Im.PageViewEnvelopeCreator=new Im,Im);function Im(){return L_!==null&&L_.apply(this,arguments)||this}var P_,AA=(ze(km,P_=li),km.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=n.baseData,h=a.name,y=a.uri||a.url,b=a.properties||{},u=a.measurements||{};li.extractPropsAndMeasurements(n.data,b,u);var A=new ud(t,h,y,void 0,b,u,a),k=new Lp(ud.dataType,A);return li.createEnvelope(t,ud.envelopeType,n,k)},km.PageViewPerformanceEnvelopeCreator=new km,km);function km(){return P_!==null&&P_.apply(this,arguments)||this}var D_,LA=(ze(Mm,D_=li),Mm.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=n.baseData.message,h=n.baseData.severityLevel,y=li.extractProperties(n.data),b=ot({},y,n.baseData.properties),u=new ld(t,a,h,b),A=new Lp(ld.dataType,u);return li.createEnvelope(t,ld.envelopeType,n,A)},Mm.TraceEnvelopeCreator=new Mm,Mm);function Mm(){return D_!==null&&D_.apply(this,arguments)||this}var PA=(Am.prototype.serialize=function(t){var n=this._serializeObject(t,"root");return JSON.stringify(n)},Am.prototype._serializeObject=function(t,n){var a="__aiCircularRefCheck",h={};if(!t)return this._logger.throwInternal(Qe.CRITICAL,Y3,"cannot serialize object because it is null or undefined",{name:n},!0),h;if(t[a])return this._logger.throwInternal(Qe.WARNING,G6,"Circular reference detected while serializing object",{name:n},!0),h;if(!t.aiDataContract){if(n==="measurements")h=this._serializeStringMap(t,"number",n);else if(n==="properties")h=this._serializeStringMap(t,"string",n);else if(n==="tags")h=this._serializeStringMap(t,"string",n);else if(Le.isArray(t))h=this._serializeArray(t,n);else{this._logger.throwInternal(Qe.WARNING,K3,"Attempting to serialize an object which does not implement ISerializable",{name:n},!0);try{JSON.stringify(t),h=t}catch(ne){this._logger.throwInternal(Qe.CRITICAL,Y3,ne&&typeof ne.toString=="function"?ne.toString():"Error serializing object",null,!0)}}return h}for(var y in t[a]=!0,t.aiDataContract){var b,u=t.aiDataContract[y],A=typeof u=="function"?u()&et.Required:u&et.Required,k=typeof u=="function"?u()&et.Hidden:u&et.Hidden,G=u&et.Array,W=t[y]!==void 0,se=typeof t[y]=="object"&&t[y]!==null;!A||W||G?k||(b=se?G?this._serializeArray(t[y],y):this._serializeObject(t[y],y):t[y])!==void 0&&(h[y]=b):this._logger.throwInternal(Qe.CRITICAL,I6,"Missing required field specification. The field is required but not present on source",{field:y,name:n})}return delete t[a],h},Am.prototype._serializeArray=function(t,n){var a=void 0;if(t)if(Le.isArray(t)){a=[];for(var h=0;h<t.length;h++){var y=t[h],b=this._serializeObject(y,n+"["+h+"]");a.push(b)}}else this._logger.throwInternal(Qe.CRITICAL,W6,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:n},!0);return a},Am.prototype._serializeStringMap=function(t,n,a){var h=void 0;if(t)for(var y in h={},t){var b=t[y];if(n==="string")b===void 0?h[y]="undefined":b===null?h[y]="null":b.toString?h[y]=b.toString():h[y]="invalid field: toString() is not defined.";else if(n==="number")if(b===void 0)h[y]="undefined";else if(b===null)h[y]="null";else{var u=parseFloat(b);isNaN(u)?h[y]="NaN":h[y]=u}else h[y]="invalid field: "+a+" is of unknown type.",this._logger.throwInternal(Qe.CRITICAL,h[y],null,!0)}return h},Am);function Am(t){this._logger=t}function Pp(){this._onlineStatus=!0;try{typeof window>"u"?this.isListening=!1:window&&window.addEventListener?(window.addEventListener("online",this._setOnline.bind(this),!1),window.addEventListener("offline",this._setOffline.bind(this),!1),this.isListening=!0):document&&document.body?(document.body.ononline=this._setOnline.bind(this),document.body.onoffline=this._setOffline.bind(this),this.isListening=!0):document?(document.ononline=this._setOnline.bind(this),document.onoffline=this._setOffline.bind(this),this.isListening=!0):this.isListening=!1}catch{this.isListening=!1}}var VC=(Pp.prototype._setOnline=function(){this._onlineStatus=!0},Pp.prototype._setOffline=function(){this._onlineStatus=!1},Pp.prototype.isOnline=function(){return this.isListening?this._onlineStatus:!(navigator&&!st.isNullOrUndefined(navigator.onLine))||navigator.onLine},Pp.prototype.isOffline=function(){return!this.isOnline()},Pp.Offline=new Pp,Pp).Offline,DA=(Dp.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/Dp.INT_MAX_VALUE*100},Dp.prototype.getHashCode=function(t){if(t=="")return 0;for(;t.length<Dp.MIN_INPUT_LENGTH;)t=t.concat(t);for(var n=5381,a=0;a<t.length;++a)n=(n<<5)+n+t.charCodeAt(a),n&=n;return Math.abs(n)},Dp.INT_MAX_VALUE=2147483647,Dp.MIN_INPUT_LENGTH=8,Dp);function Dp(){}var zA=(qC.prototype.getSamplingScore=function(t){return t.tags&&t.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(t.tags[this.keys.userId]):t.ext&&t.ext.user&&t.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(t.ext.user.id):t.tags&&t.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(t.tags[this.keys.operationId]):t.ext&&t.ext.telemetryTrace&&t.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(t.ext.telemetryTrace.traceID):100*Math.random()},qC);function qC(){this.hashCodeGeneragor=new DA,this.keys=new zC}var NA=(ZC.prototype.isSampledIn=function(t){var n=this.sampleRate;return n==null||100<=n||t.baseType===kp.dataType||this.samplingScoreGenerator.getSamplingScore(t)<n},ZC);function ZC(t,n){this.INT_MAX_VALUE=2147483647,st.isNullOrUndefined(n)?this._logger=new __:this._logger=n,(100<t||t<0)&&(this._logger.throwInternal(Qe.WARNING,X6,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:t},!0),this.sampleRate=100),this.sampleRate=t,this.samplingScoreGenerator=new zA}var OA=(Lr.prototype.pause=function(){throw new Error("Method not implemented.")},Lr.prototype.resume=function(){throw new Error("Method not implemented.")},Lr.prototype.flush=function(){try{this.triggerSend()}catch(t){this._logger.throwInternal(Qe.CRITICAL,T6,"flush failed, telemetry will not be collected: "+Le.getExceptionName(t),{exception:Le.dump(t)})}},Lr.prototype.onunloadFlush=function(){if(this._config.onunloadDisableBeacon()!==!1&&this._config.isBeaconApiDisabled()!==!1||!Le.IsBeaconApiSupported())this.flush();else try{this.triggerSend(!0,this._beaconSender)}catch(t){this._logger.throwInternal(Qe.CRITICAL,S6,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Le.getExceptionName(t),{exception:Le.dump(t)})}},Lr.prototype.teardown=function(){throw new Error("Method not implemented.")},Lr.prototype.initialize=function(t,n,a){var h=this;this._logger=n.logger,this._serializer=new PA(n.logger),this._consecutiveErrors=0,this._retryAt=null,this._lastSend=0,this._sender=null;var y=Lr._getDefaultAppInsightsChannelConfig();function b(k){u._config[k]=function(){return Fy.getConfig(t,k,h.identifier,y[k]())}}this._config=Lr._getEmptyAppInsightsChannelConfig();var u=this;for(var A in y)b(A);this._buffer=this._config.enableSessionStorageBuffer&&Le.canUseSessionStorage()?new TA(this._logger,this._config):new SA(this._config),this._sample=new NA(this._config.samplingPercentage(),this._logger),!this._config.isBeaconApiDisabled()&&Le.IsBeaconApiSupported()?this._sender=this._beaconSender:typeof XMLHttpRequest<"u"&&("withCredentials"in new XMLHttpRequest?(this._sender=this._xhrSender,this._XMLHttpRequestSupported=!0):typeof XDomainRequest<"u"&&(this._sender=this._xdrSender))},Lr.prototype.processTelemetry=function(t){var n=this;try{if(this._config.disableTelemetry())return;if(!t)return void this._logger.throwInternal(Qe.CRITICAL,f6,"Cannot send empty telemetry");if(t.baseData&&!t.baseType)return void this._logger.throwInternal(Qe.CRITICAL,oA,"Cannot send telemetry without baseData and baseType");if(t.baseType||(t.baseType="EventData"),!this._sender)return void this._logger.throwInternal(Qe.CRITICAL,L6,"Sender was not initialized");if(!this._isSampledIn(t))return void this._logger.throwInternal(Qe.WARNING,O6,"Telemetry item was sampled out and not sent",{SampleRate:this._sample.sampleRate});t.tags=t.tags||{},t.tags.sampleRate=this._sample.sampleRate;var a=Lr.constructEnvelope(t,this._config.instrumentationKey(),this._logger);if(!a)return void this._logger.throwInternal(Qe.CRITICAL,Z6,"Unable to create an AppInsights envelope");var h=!1;if(t.tags&&t.tags[w_]&&(t.tags[w_].forEach(function(A){try{A&&A(a)===!1&&(h=!0,n._logger.warnToConsole("Telemetry processor check returns false"))}catch(k){n._logger.throwInternal(Qe.CRITICAL,$3,"One of telemetry initializers failed, telemetry item will not be sent: "+Le.getExceptionName(k),{exception:Le.dump(k)},!0)}}),delete t.tags[w_]),h)return;var y=this._serializer.serialize(a),b=this._buffer.getItems(),u=this._buffer.batchPayloads(b);u&&u.length+y.length>this._config.maxBatchSizeInBytes()&&this.triggerSend(),this._buffer.enqueue(y),this._setupTimer()}catch(A){this._logger.throwInternal(Qe.WARNING,_6,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Le.getExceptionName(A),{exception:Le.dump(A)})}st.isNullOrUndefined(this._nextPlugin)||this._nextPlugin.processTelemetry(t)},Lr.prototype.setNextPlugin=function(t){this._nextPlugin=t},Lr.prototype._xhrReadyStateChange=function(t,n,a){if(t.readyState===4){var h=null;this._appId||(h=this._parseResponse(t.responseText||t.response))&&h.appId&&(this._appId=h.appId),(t.status<200||300<=t.status)&&t.status!==0?!this._config.isRetryDisabled()&&this._isRetriable(t.status)?(this._resendPayload(n),this._logger.throwInternal(Qe.WARNING,ad,". Response code "+t.status+". Will retry to send "+n.length+" items.")):this._onError(n,this._formatErrorMessageXhr(t)):VC.isOffline()?this._config.isRetryDisabled()||(this._resendPayload(n,10),this._logger.throwInternal(Qe.WARNING,ad,". Offline - Response Code: "+t.status+". Offline status: "+VC.isOffline()+". Will retry to send "+n.length+" items.")):t.status===206?(h=h||this._parseResponse(t.responseText||t.response))&&!this._config.isRetryDisabled()?this._onPartialSuccess(n,h):this._onError(n,this._formatErrorMessageXhr(t)):(this._consecutiveErrors=0,this._onSuccess(n,a))}},Lr.prototype.triggerSend=function(t,n){t===void 0&&(t=!0);try{if(this._config.disableTelemetry())this._buffer.clear();else{if(0<this._buffer.count()){var a=this._buffer.getItems();n?n.call(this,a,t):this._sender(a,t)}this._lastSend=+new Date}clearTimeout(this._timeoutHandle),this._timeoutHandle=null,this._retryAt=null}catch(h){(!Le.getIEVersion()||9<Le.getIEVersion())&&this._logger.throwInternal(Qe.CRITICAL,ad,"Telemetry transmission failed, some telemetry will be lost: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},Lr.prototype._onError=function(t,n,a){this._logger.throwInternal(Qe.WARNING,M6,"Failed to send telemetry.",{message:n}),this._buffer.clearSent(t)},Lr.prototype._onPartialSuccess=function(t,n){for(var a=[],h=[],y=0,b=n.errors.reverse();y<b.length;y++){var u=b[y],A=t.splice(u.index,1)[0];this._isRetriable(u.statusCode)?h.push(A):a.push(A)}0<t.length&&this._onSuccess(t,n.itemsAccepted),0<a.length&&this._onError(a,this._formatErrorMessageXhr(null,["partial success",n.itemsAccepted,"of",n.itemsReceived].join(" "))),0<h.length&&(this._resendPayload(h),this._logger.throwInternal(Qe.WARNING,ad,"Partial success. Delivered: "+t.length+", Failed: "+a.length+". Will retry to send "+h.length+" our of "+n.itemsReceived+" items"))},Lr.prototype._onSuccess=function(t,n){this._buffer.clearSent(t)},Lr.prototype._xdrOnLoad=function(t,n){if(!t||t.responseText+""!="200"&&t.responseText!==""){var a=this._parseResponse(t.responseText);a&&a.itemsReceived&&a.itemsReceived>a.itemsAccepted&&!this._config.isRetryDisabled()?this._onPartialSuccess(n,a):this._onError(n,this._formatErrorMessageXdr(t))}else this._consecutiveErrors=0,this._onSuccess(n,0)},Lr.constructEnvelope=function(t,n,a){var h;switch((h=n===t.iKey||st.isNullOrUndefined(n)?t:ot({},t,{iKey:n})).baseType){case ec.dataType:return UC.EventEnvelopeCreator.Create(a,h);case ld.dataType:return LA.TraceEnvelopeCreator.Create(a,h);case Mp.dataType:return MA.PageViewEnvelopeCreator.Create(a,h);case ud.dataType:return AA.PageViewPerformanceEnvelopeCreator.Create(a,h);case Zl.dataType:return IA.ExceptionEnvelopeCreator.Create(a,h);case kp.dataType:return kA.MetricEnvelopeCreator.Create(a,h);case Ap.dataType:return EA.DependencyEnvelopeCreator.Create(a,h);default:return UC.EventEnvelopeCreator.Create(a,h)}},Lr._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100}}},Lr._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0}},Lr.prototype._isSampledIn=function(t){return this._sample.isSampledIn(t)},Lr.prototype._beaconSender=function(t,n){var a=this._config.endpointUrl(),h=this._buffer.batchPayloads(t),y=new Blob([h],{type:"text/plain;charset=UTF-8"});navigator.sendBeacon(a,y)?(this._buffer.markAsSent(t),this._onSuccess(t,t.length)):(this._xhrSender(t,!0),this._logger.throwInternal(Qe.WARNING,ad,". Failed to send telemetry with Beacon API, retried with xhrSender."))},Lr.prototype._xhrSender=function(t,n){var a=this,h=new XMLHttpRequest;h[xm]=!0,h.open("POST",this._config.endpointUrl(),n),h.setRequestHeader("Content-type","application/json"),Le.isInternalApplicationInsightsEndpoint(this._config.endpointUrl())&&h.setRequestHeader(Xn.sdkContextHeader,Xn.sdkContextHeaderAppIdRequest),h.onreadystatechange=function(){return a._xhrReadyStateChange(h,t,t.length)},h.onerror=function(b){return a._onError(t,a._formatErrorMessageXhr(h),b)};var y=this._buffer.batchPayloads(t);h.send(y),this._buffer.markAsSent(t)},Lr.prototype._parseResponse=function(t){try{if(t&&t!==""){var n=JSON.parse(t);if(n&&n.itemsReceived&&n.itemsReceived>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted==n.errors.length)return n}}catch(a){this._logger.throwInternal(Qe.CRITICAL,V6,"Cannot parse the response. "+Le.getExceptionName(a),{response:t})}return null},Lr.prototype._resendPayload=function(t,n){if(n===void 0&&(n=1),t&&t.length!==0){this._buffer.clearSent(t),this._consecutiveErrors++;for(var a=0,h=t;a<h.length;a++){var y=h[a];this._buffer.enqueue(y)}this._setRetryTime(n),this._setupTimer()}},Lr.prototype._setRetryTime=function(t){var n;if(this._consecutiveErrors<=1)n=10;else{var a=(Math.pow(2,this._consecutiveErrors)-1)/2,h=Math.floor(Math.random()*a*10)+1;h*=t,n=Math.max(Math.min(h,3600),10)}var y=Date.now()+1e3*n;this._retryAt=y},Lr.prototype._setupTimer=function(){var t=this;if(!this._timeoutHandle){var n=this._retryAt?Math.max(0,this._retryAt-Date.now()):0,a=Math.max(this._config.maxBatchInterval(),n);this._timeoutHandle=setTimeout(function(){t.triggerSend()},a)}},Lr.prototype._isRetriable=function(t){return t==408||t==429||t==500||t==503},Lr.prototype._formatErrorMessageXhr=function(t,n){return t?"XMLHttpRequest,Status:"+t.status+",Response:"+t.responseText||t.response||"":n},Lr.prototype._xdrSender=function(t,n){var a=this,h=new XDomainRequest;h.onload=function(){return a._xdrOnLoad(h,t)},h.onerror=function(A){return a._onError(t,a._formatErrorMessageXdr(h),A)};var y=window.location&&window.location.protocol;if(this._config.endpointUrl().lastIndexOf(y,0)!==0)return this._logger.throwInternal(Qe.WARNING,ad,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void this._buffer.clear();var b=this._config.endpointUrl().replace(/^(https?:)/,"");h.open("POST",b);var u=this._buffer.batchPayloads(t);h.send(u),this._buffer.markAsSent(t)},Lr.prototype._formatErrorMessageXdr=function(t,n){return t?"XDomainRequest,Response:"+t.responseText||"":n},Lr);function Lr(){this.priority=1001,this.identifier=OC,this._XMLHttpRequestSupported=!1}var GC=function(){},RA=(ro.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var t=to.Now(),n=t-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),a=t-this.automaticSession.renewalDate>this.config.sessionRenewalMs();n||a?this.renew():(!this.cookieUpdatedTimestamp||t-this.cookieUpdatedTimestamp>ro.cookieUpdateInterval)&&(this.automaticSession.renewalDate=t,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},ro.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},ro.prototype.initializeAutomaticSession=function(){var t=Le.getCookie(this._logger,this._storageNamePrefix());if(t&&typeof t.split=="function")this.initializeAutomaticSessionWithData(t);else{var n=Le.getStorage(this._logger,this._storageNamePrefix());n&&this.initializeAutomaticSessionWithData(n)}this.automaticSession.id||this.renew()},ro.prototype.initializeAutomaticSessionWithData=function(t){var n=t.split("|");0<n.length&&(this.automaticSession.id=n[0]);try{if(1<n.length){var a=+n[1];this.automaticSession.acquisitionDate=+new Date(a),this.automaticSession.acquisitionDate=0<this.automaticSession.acquisitionDate?this.automaticSession.acquisitionDate:0}if(2<n.length){var h=+n[2];this.automaticSession.renewalDate=+new Date(h),this.automaticSession.renewalDate=0<this.automaticSession.renewalDate?this.automaticSession.renewalDate:0}}catch(y){this._logger.throwInternal(Qe.CRITICAL,g6,"Error parsing ai_session cookie, session will be reset: "+Le.getExceptionName(y),{exception:Le.dump(y)})}this.automaticSession.renewalDate==0&&this._logger.throwInternal(Qe.WARNING,A6,"AI session renewal date is 0, session will be reset.")},ro.prototype.renew=function(){var t=to.Now();this.automaticSession.id=Le.newId(),this.automaticSession.acquisitionDate=t,this.automaticSession.renewalDate=t,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),Le.canUseLocalStorage()||this._logger.throwInternal(Qe.WARNING,s6,"Browser does not support local storage. Session durations will be inaccurate.")},ro.prototype.setCookie=function(t,n,a){var h=n+this.config.sessionExpirationMs(),y=a+this.config.sessionRenewalMs(),b=new Date,u=[t,n,a];h<y?b.setTime(h):b.setTime(y);var A=this.config.cookieDomain?this.config.cookieDomain():null;Le.setCookie(this._logger,this._storageNamePrefix(),u.join("|")+";expires="+b.toUTCString(),A),this.cookieUpdatedTimestamp=to.Now()},ro.prototype.setStorage=function(t,n,a){Le.setStorage(this._logger,this._storageNamePrefix(),[t,n,a].join("|"))},ro.acquisitionSpan=864e5,ro.renewalSpan=18e5,ro.cookieUpdateInterval=6e4,ro.cookieNameConst="ai_session",ro);function ro(t,n){var a=this;st.isNullOrUndefined(n)?this._logger=new __:this._logger=n,typeof(t=t||{}).sessionExpirationMs!="function"&&(t.sessionExpirationMs=function(){return ro.acquisitionSpan}),typeof t.sessionRenewalMs!="function"&&(t.sessionRenewalMs=function(){return ro.renewalSpan}),this.config=t,this._storageNamePrefix=function(){return a.config.namePrefix&&a.config.namePrefix()?ro.cookieNameConst+a.config.namePrefix():ro.cookieNameConst},this.automaticSession=new GC}var BA=function(){},FA=function(){this.id="browser",this.deviceClass="Browser"},jA=function(t){this.sdkVersion=(t.sdkExtension&&t.sdkExtension()?t.sdkExtension()+"_":"")+"javascript:2.2.2"},UA=(po.prototype.setAuthenticatedUserContext=function(t,n,a){if(a===void 0&&(a=!1),!this.validateUserInput(t)||n&&!this.validateUserInput(n))this._logger.throwInternal(Qe.WARNING,J6,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{this.authenticatedId=t;var h=this.authenticatedId;n&&(this.accountId=n,h=[this.authenticatedId,this.accountId].join(po.cookieSeparator)),a&&Le.setCookie(this._logger,po.authUserCookieName,encodeURI(h),this.config.cookieDomain())}},po.prototype.clearAuthenticatedUserContext=function(){this.authenticatedId=null,this.accountId=null,Le.deleteCookie(this._logger,po.authUserCookieName)},po.prototype.validateUserInput=function(t){return!(typeof t!="string"||!t||t.match(/,|;|=| |\|/))},po.cookieSeparator="|",po.userCookieName="ai_user",po.authUserCookieName="ai_authUser",po);function po(t,n){this._logger=n;var a=Le.getCookie(this._logger,po.userCookieName);if(a){var h=a.split(po.cookieSeparator);0<h.length&&(this.id=h[0])}if(this.config=t,!this.id){this.id=Le.newId();var y=new Date,b=Le.toISOStringForIE8(y);this.accountAcquisitionDate=b,y.setTime(y.getTime()+31536e6);var u=[this.id,b],A=this.config.cookieDomain?this.config.cookieDomain():void 0;Le.setCookie(this._logger,po.userCookieName,u.join(po.cookieSeparator)+";expires="+y.toUTCString(),A);var k=t.namePrefix&&t.namePrefix()?t.namePrefix()+"ai_session":"ai_session";Le.removeStorage(this._logger,k)}this.accountId=t.accountId?t.accountId():void 0;var G=Le.getCookie(this._logger,po.authUserCookieName);if(G){var W=(G=decodeURI(G)).split(po.cookieSeparator);W[0]&&(this.authenticatedId=W[0]),1<W.length&&W[1]&&(this.accountId=W[1])}}var VA=function(){},qA=function(t,n,a){this.traceID=t||Le.generateW3CId(),this.parentID=n,this.name=a,window&&window.location&&window.location.pathname&&(this.name=window.location.pathname)},ZA=(ws.prototype.applySessionContext=function(t){var n=this.session||this.sessionManager.automaticSession;n&&typeof n.id=="string"&&(t.ext.app.sesId=n.id),this.session&&(typeof this.session.id=="string"?t.ext.app.sesId=this.session.id:t.ext.app.sesId=this.sessionManager.automaticSession.id)},ws.prototype.applyOperatingSystemContxt=function(t){this.os&&this.os.name&&(t.ext.os=this.os)},ws.prototype.applyApplicationContext=function(t){this.application&&(typeof this.application.ver=="string"&&(t.tags[Nn.applicationVersion]=this.application.ver),typeof this.application.build=="string"&&(t.tags[Nn.applicationBuild]=this.application.build))},ws.prototype.applyDeviceContext=function(t){this.device&&(typeof this.device.id=="string"&&(t.ext.device.localId=this.device.id),typeof this.device.ip=="string"&&(t.ext.device.ip=this.device.ip),typeof this.device.model=="string"&&(t.ext.device.model=this.device.model),typeof this.device.deviceClass=="string"&&(t.ext.device.deviceClass=this.device.deviceClass))},ws.prototype.applyInternalContext=function(t){this.internal&&(typeof this.internal.agentVersion=="string"&&(t.tags[Nn.internalAgentVersion]=this.internal.agentVersion),typeof this.internal.sdkVersion=="string"&&(t.tags[Nn.internalSdkVersion]=this.internal.sdkVersion))},ws.prototype.applyLocationContext=function(t){this.location&&typeof this.location.ip=="string"&&(t.tags[Nn.locationIp]=this.location.ip)},ws.prototype.applyOperationContext=function(t){if(this.telemetryTrace){var n=t.ext.trace||{traceID:void 0,parentID:void 0};typeof this.telemetryTrace.traceID=="string"&&(n.traceID=this.telemetryTrace.traceID),typeof this.telemetryTrace.name=="string"&&(n.name=this.telemetryTrace.name),typeof this.telemetryTrace.parentID=="string"&&(n.parentID=this.telemetryTrace.parentID),t.ext.trace=n}},ws.prototype.applyWebContext=function(t){this.web&&(t.ext.web=t.ext.web||{},t.ext.web=this.web)},ws.prototype.applyUserContext=function(t){this.user&&(t.tags||(t.tags=[]),typeof this.user.accountId=="string"&&(t.tags[Nn.userAccountId]=this.user.accountId),typeof this.user.id=="string"&&(t.ext.user.id=this.user.id),typeof this.user.authenticatedId=="string"&&(t.ext.user.authId=this.user.authenticatedId))},ws.prototype.cleanUp=function(t){t.ext[qr.DeviceExt]&&Object.keys(t.ext[qr.DeviceExt]).length===0&&delete t.ext[qr.DeviceExt],t.ext[qr.UserExt]&&Object.keys(t.ext[qr.UserExt]).length===0&&delete t.ext[qr.UserExt],t.ext[qr.WebExt]&&Object.keys(t.ext[qr.WebExt]).length===0&&delete t.ext[qr.WebExt],t.ext[qr.OSExt]&&Object.keys(t.ext[qr.OSExt]).length===0&&delete t.ext[qr.OSExt],t.ext[qr.AppExt]&&Object.keys(t.ext[qr.AppExt]).length===0&&delete t.ext[qr.AppExt],t.ext[qr.TraceExt]&&Object.keys(t.ext[qr.TraceExt]).length===0&&delete t.ext[qr.TraceExt]},ws);function ws(t,n){typeof window<"u"&&(this.sessionManager=new RA(n,t),this.application=new BA,this.device=new FA,this.internal=new jA(n),this.location=new VA,this.user=new UA(n,t),this.telemetryTrace=new qA,this.session=new GC),this.appId=function(){return null}}var GA=(oc.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){}}},oc.prototype.initialize=function(t,n,a){var h=this,y=oc.getDefaultConfig();function b(k){u._extensionConfig[k]=function(){return Fy.getConfig(t,k,h.identifier,y[k]())}}this._extensionConfig=this._extensionConfig||oc.getDefaultConfig();var u=this;for(var A in y)b(A);this._logger=n.logger,this.context=new ZA(n.logger,this._extensionConfig),this._breezeChannel=Le.getExtension(a,OC),this.context.appId=function(){return h._breezeChannel?h._breezeChannel._appId:null}},oc.prototype.processTelemetry=function(t){st.isNullOrUndefined(t)||(t.name===Mp.envelopeType&&this._logger.resetInternalMessageCount(),this.context.session&&typeof this.context.session.id!="string"&&this.context.sessionManager.update(),this._processTelemetryInternal(t),st.isNullOrUndefined(this._nextPlugin)||this._nextPlugin.processTelemetry(t))},oc.prototype.setNextPlugin=function(t){this._nextPlugin=t},oc.prototype._processTelemetryInternal=function(t){t.tags||(t.tags=[]),t.ext||(t.ext={}),t.ext[qr.DeviceExt]=t.ext[qr.DeviceExt]||{},t.ext[qr.WebExt]=t.ext[qr.WebExt]||{},t.ext[qr.UserExt]=t.ext[qr.UserExt]||{},t.ext[qr.OSExt]=t.ext[qr.OSExt]||{},t.ext[qr.AppExt]=t.ext[qr.AppExt]||{},t.ext[qr.TraceExt]=t.ext[qr.TraceExt]||{},this.context.applySessionContext(t),this.context.applyApplicationContext(t),this.context.applyDeviceContext(t),this.context.applyOperationContext(t),this.context.applyUserContext(t),this.context.applyOperatingSystemContxt(t),this.context.applyWebContext(t),this.context.applyLocationContext(t),this.context.applyInternalContext(t),this.context.cleanUp(t)},oc);function oc(){this.priority=110,this.identifier=jy}var HA=function(){this.openDone=!1,this.setRequestHeaderDone=!1,this.sendDone=!1,this.abortDone=!1,this.onreadystatechangeCallbackAttached=!1},HC=(z_.prototype.getAbsoluteUrl=function(){return this.requestUrl?Ay.getAbsoluteUrl(this.requestUrl):null},z_.prototype.getPathName=function(){return this.requestUrl?Ar.sanitizeUrl(this._logger,Ay.getCompleteUrl(this.method,this.requestUrl)):null},z_);function z_(t,n,a){this.completed=!1,this.requestHeadersSize=null,this.requestHeaders=null,this.ttfb=null,this.responseReceivingDuration=null,this.callbackDuration=null,this.ajaxTotalDuration=null,this.aborted=null,this.pageUrl=null,this.requestUrl=null,this.requestSize=0,this.method=null,this.status=null,this.requestSentTime=null,this.responseStartedTime=null,this.responseFinishedTime=null,this.callbackFinishedTime=null,this.endTime=null,this.originalOnreadystatechage=null,this.xhrMonitoringState=new HA,this.clientFailure=0,this.CalculateMetrics=function(){this.ajaxTotalDuration=Math.round(1e3*to.GetDuration(this.requestSentTime,this.responseFinishedTime))/1e3},this.traceID=t,this.spanID=n,this._logger=a}var WA=(N_.AttachEvent=function(t,n,a){var h=!1;return st.isNullOrUndefined(t)||(st.isNullOrUndefined(t.attachEvent)?st.isNullOrUndefined(t.addEventListener)||(t.addEventListener(n,a,!1),h=!0):(t.attachEvent("on"+n,a),h=!0)),h},N_.DetachEvent=function(t,n,a){st.isNullOrUndefined(t)||(st.isNullOrUndefined(t.detachEvent)?st.isNullOrUndefined(t.removeEventListener)||t.removeEventListener(n,a,!1):t.detachEvent("on"+n,a))},N_);function N_(){}var WC=(tl.isValidTraceId=function(t){return t.match(/^[0-9a-f]{32}$/)&&t!=="00000000000000000000000000000000"},tl.isValidSpanId=function(t){return t.match(/^[0-9a-f]{16}$/)&&t!=="0000000000000000"},tl.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},tl.DEFAULT_TRACE_FLAG="00",tl.DEFAULT_VERSION="00",tl);function tl(t,n){this.traceFlag=tl.DEFAULT_TRACE_FLAG,this.version=tl.DEFAULT_VERSION,t&&tl.isValidTraceId(t)?this.traceId=t:this.traceId=Le.generateW3CId(),n&&tl.isValidSpanId(n)?this.spanId=n:this.spanId=Le.generateW3CId().substr(0,16)}var YA=(tr.prototype.isMonitoredInstance=function(t,n,a,h){var y=!1,b=!0,u=!1;return a!==void 0?(u=this._fetchInitialized,y=typeof a=="object"&&a[xm]===!0||!!h&&h[xm]===!0):t!==void 0&&(u=this.initialized,y=t[xm]===!0,b=n===!0||!st.isNullOrUndefined(t.ajaxData)),u&&b&&!y},tr.prototype.supportsAjaxMonitoring=function(){var t=!0;(st.isNullOrUndefined(XMLHttpRequest)||st.isNullOrUndefined(XMLHttpRequest.prototype)||st.isNullOrUndefined(XMLHttpRequest.prototype.open)||st.isNullOrUndefined(XMLHttpRequest.prototype.send)||st.isNullOrUndefined(XMLHttpRequest.prototype.abort))&&(t=!1);try{" a ".trim()}catch{t=!1}return t},tr.prototype.instrumentOpen=function(){var t=XMLHttpRequest.prototype.open,n=this;XMLHttpRequest.prototype.open=function(a,h,y){try{!n.isMonitoredInstance(this,!0)||this.ajaxData&&this.ajaxData.xhrMonitoringState.openDone||n.openHandler(this,a,h,y)}catch(b){n._core.logger.throwInternal(Qe.CRITICAL,y_,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(this),exception:Le.dump(b)})}return t.apply(this,arguments)}},tr.prototype.openHandler=function(t,n,a,h){var y=this._context&&this._context.telemetryTrace&&this._context.telemetryTrace.traceID||Le.generateW3CId(),b=Le.generateW3CId().substr(0,16),u=new HC(y,b,this._core.logger);u.method=n,u.requestUrl=a,u.xhrMonitoringState.openDone=!0,u.requestHeaders={},t.ajaxData=u,this.attachToOnReadyStateChange(t)},tr.getFailedAjaxDiagnosticsMessage=function(t){var n="";try{st.isNullOrUndefined(t)||st.isNullOrUndefined(t.ajaxData)||st.isNullOrUndefined(t.ajaxData.requestUrl)||(n+="(url: '"+t.ajaxData.requestUrl+"')")}catch{}return n},tr.prototype.instrumentSend=function(){var t=XMLHttpRequest.prototype.send,n=this;XMLHttpRequest.prototype.send=function(a){try{n.isMonitoredInstance(this)&&!this.ajaxData.xhrMonitoringState.sendDone&&n.sendHandler(this,a)}catch(h){n._core.logger.throwInternal(Qe.CRITICAL,b6,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(this),exception:Le.dump(h)})}return t.apply(this,arguments)}},tr.prototype.sendHandler=function(t,n){t.ajaxData.requestSentTime=to.Now(),(t=this.includeCorrelationHeaders(t.ajaxData,void 0,void 0,t)).ajaxData.xhrMonitoringState.sendDone=!0},tr.prototype.instrumentAbort=function(){var t=XMLHttpRequest.prototype.abort,n=this;XMLHttpRequest.prototype.abort=function(){try{n.isMonitoredInstance(this)&&!this.ajaxData.xhrMonitoringState.abortDone&&(this.ajaxData.aborted=1,this.ajaxData.xhrMonitoringState.abortDone=!0)}catch(a){n._core.logger.throwInternal(Qe.CRITICAL,x6,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(this),exception:Le.dump(a)})}return t.apply(this,arguments)}},tr.prototype.instrumentSetRequestHeader=function(){if(this._config.enableRequestHeaderTracking){var t=XMLHttpRequest.prototype.setRequestHeader,n=this;XMLHttpRequest.prototype.setRequestHeader=function(a,h){try{n.isMonitoredInstance(this)&&(this.ajaxData.requestHeaders[a]=h)}catch(y){n._core.logger.throwInternal(Qe.CRITICAL,aA,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(this),exception:Le.dump(y)})}return t.apply(this,arguments)}}},tr.prototype.attachToOnReadyStateChange=function(t){var n=this;t.ajaxData.xhrMonitoringState.onreadystatechangeCallbackAttached=WA.AttachEvent(t,"readystatechange",function(){try{n.isMonitoredInstance(t)&&t.readyState===4&&n.onAjaxComplete(t)}catch(h){var a=Le.dump(h);a&&a.toLowerCase().indexOf("c00c023f")!=-1||n._core.logger.throwInternal(Qe.CRITICAL,w6,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(t),exception:Le.dump(h)})}})},tr.prototype.onAjaxComplete=function(t){if(t.ajaxData.responseFinishedTime=to.Now(),t.ajaxData.status=t.status,t.ajaxData.CalculateMetrics(),t.ajaxData.ajaxTotalDuration<0)this._core.logger.throwInternal(Qe.WARNING,g_,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(t),requestSentTime:t.ajaxData.requestSentTime,responseFinishedTime:t.ajaxData.responseFinishedTime});else{var n={id:"|"+t.ajaxData.traceID+"."+t.ajaxData.spanID,target:t.ajaxData.getAbsoluteUrl(),name:t.ajaxData.getPathName(),type:"Ajax",duration:t.ajaxData.ajaxTotalDuration,success:200<=+t.ajaxData.status&&+t.ajaxData.status<400,responseCode:+t.ajaxData.status,method:t.ajaxData.method},a=this.getAjaxCorrelationContext(t);if(a&&(n.correlationContext=a),this._config.enableRequestHeaderTracking&&0<Object.keys(t.ajaxData.requestHeaders).length&&(n.properties=n.properties||{},n.properties.requestHeaders={},n.properties.requestHeaders=t.ajaxData.requestHeaders),this._config.enableResponseHeaderTracking){var h=t.getAllResponseHeaders();if(h){var y=h.trim().split(/[\r\n]+/),b={};y.forEach(function(u){var A=u.split(": "),k=A.shift(),G=A.join(": ");b[k]=G}),0<Object.keys(b).length&&(n.properties=n.properties||{},n.properties.responseHeaders={},n.properties.responseHeaders=b)}}this.trackDependencyDataInternal(n),t.ajaxData=null}},tr.prototype.getAjaxCorrelationContext=function(t){try{var n=t.getAllResponseHeaders();if(n!==null&&n.toLowerCase().indexOf(Xn.requestContextHeaderLowerCase)!==-1){var a=t.getResponseHeader(Xn.requestContextHeader);return Ly.getCorrelationContext(a)}}catch(h){this._core.logger.throwInternal(Qe.WARNING,ky,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(t),exception:Le.dump(h)})}},tr.prototype.trackDependencyDataInternal=function(t,n,a){if(this._config.maxAjaxCallsPerView===-1||this._trackAjaxAttempts<this._config.maxAjaxCallsPerView){var h=rc.create(t,Ap.dataType,Ap.envelopeType,this._core.logger,n,a);this._core.track(h)}else this._trackAjaxAttempts===this._config.maxAjaxCallsPerView&&this._core.logger.throwInternal(Qe.CRITICAL,Y6,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++this._trackAjaxAttempts},tr.prototype.trackDependencyData=function(t,n){this.trackDependencyDataInternal(t,n)},tr.prototype.processTelemetry=function(t){this._nextPlugin&&this._nextPlugin.processTelemetry&&this._nextPlugin.processTelemetry(t)},tr.prototype.setNextPlugin=function(t){t&&(this._nextPlugin=t)},tr.prototype.instrumentFetch=function(){if(this.supportsFetch()&&!this._fetchInitialized){var t=window.fetch,n=this;window.fetch=function(a,h){var y;if(n.isFetchInstrumented(a)&&n.isMonitoredInstance(void 0,void 0,a,h))try{y=n.createFetchRecord(a,h),h=n.includeCorrelationHeaders(y,a,h)}catch(b){n._core.logger.throwInternal(Qe.CRITICAL,y_,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.",{ajaxDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(a),exception:Le.dump(b)})}return t(a,h).then(function(b){return n.onFetchComplete(b,y),b}).catch(function(b){throw n.onFetchFailed(a,y,b),b})},this._fetchInitialized=!0}},tr.prototype.isFetchInstrumented=function(t){return this._fetchInitialized&&t[xm]!==!0},tr.prototype.supportsFetch=function(){var t=!0;return(!window||st.isNullOrUndefined(window.Request)||st.isNullOrUndefined(window.Request.prototype)||st.isNullOrUndefined(window.fetch))&&(t=!1),t},tr.prototype.createFetchRecord=function(t,n){var a=this._context&&this._context.telemetryTrace&&this._context.telemetryTrace.traceID||Le.generateW3CId(),h=Le.generateW3CId().substr(0,16),y=new HC(a,h,this._core.logger);return y.requestSentTime=to.Now(),t instanceof Request?y.requestUrl=t?t.url:"":y.requestUrl=t,n&&n.method?y.method=n.method:t&&t instanceof Request?y.method=t.method:y.method="GET",n&&n.headers&&this._config.enableRequestHeaderTracking?y.requestHeaders=n.headers:y.requestHeaders={},y},tr.prototype.includeCorrelationHeaders=function(t,n,a,h){if(n){if(Ly.canIncludeCorrelationHeader(this._config,t.getAbsoluteUrl(),this.currentWindowHost)){if((a=a||{}).headers=new Headers(a.headers||n instanceof Request&&n.headers||{}),this._isUsingAIHeaders){var y="|"+t.traceID+"."+t.spanID;a.headers.set(Xn.requestIdHeader,y),this._config.enableRequestHeaderTracking&&(t.requestHeaders[Xn.requestIdHeader]=y)}var b=this._config.appId||this._context.appId();if(b&&(a.headers.set(Xn.requestContextHeader,Xn.requestContextAppIdFormat+b),this._config.enableRequestHeaderTracking&&(t.requestHeaders[Xn.requestContextHeader]=Xn.requestContextAppIdFormat+b)),this._isUsingW3CHeaders){var u=new WC(t.traceID,t.spanID);a.headers.set(Xn.traceParentHeader,u.toString()),this._config.enableRequestHeaderTracking&&(t.requestHeaders[Xn.traceParentHeader]=u.toString())}return a}return a}if(h){if(this.currentWindowHost&&Ly.canIncludeCorrelationHeader(this._config,h.ajaxData.getAbsoluteUrl(),this.currentWindowHost)){this._isUsingAIHeaders&&(y="|"+h.ajaxData.traceID+"."+h.ajaxData.spanID,h.setRequestHeader(Xn.requestIdHeader,y),this._config.enableRequestHeaderTracking&&(h.ajaxData.requestHeaders[Xn.requestIdHeader]=y));var A=this._config.appId||this._context.appId();A&&(h.setRequestHeader(Xn.requestContextHeader,Xn.requestContextAppIdFormat+A),this._config.enableRequestHeaderTracking&&(h.ajaxData.requestHeaders[Xn.requestContextHeader]=Xn.requestContextAppIdFormat+A)),this._isUsingW3CHeaders&&(u=new WC(h.ajaxData.traceID,h.ajaxData.spanID),h.setRequestHeader(Xn.traceParentHeader,u.toString()),this._config.enableRequestHeaderTracking&&(h.ajaxData.requestHeaders[Xn.traceParentHeader]=u.toString()))}return h}},tr.prototype.getFailedFetchDiagnosticsMessage=function(t){var n="";try{st.isNullOrUndefined(t)||(n+=typeof t=="string"?"(url: '"+t+"')":"(url: '"+t.url+"')")}catch(a){this._core.logger.throwInternal(Qe.CRITICAL,y_,"Failed to grab failed fetch diagnostics message",{exception:Le.dump(a)})}return n},tr.prototype.onFetchComplete=function(t,n){if(n)try{if(n.responseFinishedTime=to.Now(),n.CalculateMetrics(),n.ajaxTotalDuration<0)this._core.logger.throwInternal(Qe.WARNING,g_,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime});else{var a={id:"|"+n.traceID+"."+n.spanID,target:n.getAbsoluteUrl(),name:n.getPathName(),type:"Fetch",duration:n.ajaxTotalDuration,success:200<=t.status&&t.status<400,responseCode:t.status,properties:{HttpMethod:n.method}},h=this.getFetchCorrelationContext(t);if(h&&(a.correlationContext=h),this._config.enableRequestHeaderTracking&&0<Object.keys(n.requestHeaders).length&&(a.properties=a.properties||{},a.properties.requestHeaders=n.requestHeaders),this._config.enableResponseHeaderTracking){var y={};t.headers.forEach(function(b,u){y[u]=b}),0<Object.keys(y).length&&(a.properties=a.properties||{},a.properties.responseHeaders=y)}this.trackDependencyDataInternal(a)}}catch(b){this._core.logger.throwInternal(Qe.WARNING,ky,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),exception:Le.dump(b)})}},tr.prototype.onFetchFailed=function(t,n,a){if(n)try{if(n.responseFinishedTime=to.Now(),n.CalculateMetrics(),n.ajaxTotalDuration<0)this._core.logger.throwInternal(Qe.WARNING,g_,"Failed to calculate the duration of the failed fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime});else{var h={id:"|"+n.traceID+"."+n.spanID,target:n.getAbsoluteUrl(),name:n.getPathName(),type:"Fetch",duration:n.ajaxTotalDuration,success:!1,responseCode:0,properties:{HttpMethod:n.method}};this.trackDependencyDataInternal(h,{error:a.message})}}catch(y){this._core.logger.throwInternal(Qe.WARNING,ky,"Failed to calculate the duration of the failed fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),exception:Le.dump(y)})}},tr.prototype.getFetchCorrelationContext=function(t){try{var n=t.headers.get(Xn.requestContextHeader);return Ly.getCorrelationContext(n)}catch(a){this._core.logger.throwInternal(Qe.WARNING,ky,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),exception:Le.dump(a)})}},tr.prototype.instrumentXhr=function(){this.supportsAjaxMonitoring()&&!this.initialized&&(this.instrumentOpen(),this.instrumentSend(),this.instrumentAbort(),this.instrumentSetRequestHeader(),this.initialized=!0)},tr.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,disableCorrelationHeaders:!1,distributedTracingMode:Sp.AI,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1}},tr.getEmptyConfig=function(){return{maxAjaxCallsPerView:void 0,disableAjaxTracking:void 0,disableFetchTracking:void 0,disableCorrelationHeaders:void 0,distributedTracingMode:void 0,correlationHeaderExcludedDomains:void 0,appId:void 0,enableCorsCorrelation:void 0,correlationHeaderDomains:void 0,enableRequestHeaderTracking:void 0,enableResponseHeaderTracking:void 0}},tr.prototype.initialize=function(t,n,a){if(!this.initialized&&!this._fetchInitialized){this._core=n;var h=tr.getDefaultConfig();for(var y in this._config=tr.getEmptyConfig(),h)this._config[y]=Fy.getConfig(t,y,tr.identifier,h[y]);if(this._isUsingAIHeaders=this._config.distributedTracingMode===Sp.AI||this._config.distributedTracingMode===Sp.AI_AND_W3C,this._isUsingW3CHeaders=this._config.distributedTracingMode===Sp.AI_AND_W3C||this._config.distributedTracingMode===Sp.W3C,this._config.disableAjaxTracking===!1&&this.instrumentXhr(),this._config.disableFetchTracking===!1&&this.instrumentFetch(),0<a.length&&a){for(var b=void 0,u=0;!b&&u<a.length;)a[u]&&a[u].identifier===jy&&(b=a[u]),u++;b&&(this._context=b.context)}}},tr.identifier="AjaxDependencyPlugin",tr);function tr(){this._trackAjaxAttempts=0,this.identifier=tr.identifier,this.priority=120,this.currentWindowHost=window&&window.location&&window.location.host&&window.location.host.toLowerCase(),this.initialized=!1,this._fetchInitialized=!1}var KA=(On.prototype.trackEvent=function(t,n){this.appInsights.trackEvent(t,n)},On.prototype.trackPageView=function(t){var n=t||{};this.appInsights.trackPageView(n)},On.prototype.trackPageViewPerformance=function(t){var n=t||{};this.appInsights.trackPageViewPerformance(n)},On.prototype.trackException=function(t){!t.exception&&t.error&&(t.exception=t.error),this.appInsights.trackException(t)},On.prototype._onerror=function(t){this.appInsights._onerror(t)},On.prototype.trackTrace=function(t,n){this.appInsights.trackTrace(t,n)},On.prototype.trackMetric=function(t,n){this.appInsights.trackMetric(t,n)},On.prototype.startTrackPage=function(t){this.appInsights.startTrackPage(t)},On.prototype.stopTrackPage=function(t,n,a,h){this.appInsights.stopTrackPage(t,n,a,h)},On.prototype.startTrackEvent=function(t){this.appInsights.startTrackEvent(t)},On.prototype.stopTrackEvent=function(t,n,a){this.appInsights.stopTrackEvent(t,n,a)},On.prototype.addTelemetryInitializer=function(t){return this.appInsights.addTelemetryInitializer(t)},On.prototype.setAuthenticatedUserContext=function(t,n,a){a===void 0&&(a=!1),this.properties.context.user.setAuthenticatedUserContext(t,n,a)},On.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},On.prototype.trackDependencyData=function(t){this.dependencies.trackDependencyData(t)},On.prototype.flush=function(t){t===void 0&&(t=!0),this.core.getTransmissionControls().forEach(function(n){n.forEach(function(a){a.flush(t)})})},On.prototype.onunloadFlush=function(t){t===void 0&&(t=!0),this.core.getTransmissionControls().forEach(function(n){n.forEach(function(a){a.onunloadFlush?a.onunloadFlush():a.flush(t)})})},On.prototype.loadAppInsights=function(t){if(t===void 0&&(t=!1),t&&this.config.extensions&&0<this.config.extensions.length)throw new Error("Extensions not allowed in legacy mode");var n=[],a=new OA;return n.push(a),n.push(this.properties),n.push(this.dependencies),n.push(this.appInsights),this.core.initialize(this.config,n),this.emptyQueue(),this.pollInternalLogs(),this.addHousekeepingBeforeUnload(this),this.context=this.properties.context,this},On.prototype.updateSnippetDefinitions=function(t){for(var n in this)typeof n=="string"&&(t[n]=this[n])},On.prototype.emptyQueue=function(){try{if(Le.isArray(this.snippet.queue)){for(var t=this.snippet.queue.length,n=0;n<t;n++)(0,this.snippet.queue[n])();this.snippet.queue=void 0,delete this.snippet.queue}}catch(a){a&&typeof a.toString=="function"&&a.toString()}},On.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},On.prototype.addHousekeepingBeforeUnload=function(t){!t.appInsights.config.disableFlushOnBeforeUnload&&"onbeforeunload"in window&&(Le.addEventHandler("beforeunload",function(){t.onunloadFlush(!1);var n=t.appInsights.core._extensions[jy];n&&n.context&&n.context._sessionManager&&n.context._sessionManager.backup()})||t.appInsights.core.logger.throwInternal(Qe.CRITICAL,C6,"Could not add handler for beforeunload"))},On.prototype.getSKUDefaults=function(){this.config.diagnosticLogInterval=this.config.diagnosticLogInterval&&0<this.config.diagnosticLogInterval?this.config.diagnosticLogInterval:1e4},On);function On(t){t.queue=t.queue||[],t.version=t.version||2;var n=t.config||{};n&&!n.instrumentationKey&&(n=t,FC.Version="2.2.2"),this.appInsights=new FC,this.properties=new GA,this.dependencies=new YA,this.core=new lA,this.snippet=t,this.config=n,this.getSKUDefaults()}var $A=(Lm.prototype.trackEvent=function(t,n){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.trackEvent(t,n)},Lm.prototype.setAuthenticatedUserContext=function(t,n){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.setAuthenticatedUserContext(t,n)},Lm.prototype.trackException=function(t){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.trackException(t)},Lm.prototype.flush=function(t){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.flush(t)},Lm);function Lm(t){this.options=t,!this.options.disableTelemetry&&Se&&(this.appInsights=new KA({config:{instrumentationKey:Se,disableExceptionTracking:!0,disableAjaxTracking:!0,isCookieUseDisabled:!0,maxBatchInterval:5e3}}),this.appInsights.loadAppInsights(),this.appInsights.addTelemetryInitializer(function(n){n.tags[Nn.applicationVersion]=Tn.getFullVersion()}))}var YC=(O_.prototype.onAdd=function(t){return this.container=document.createElement("div"),this.container.className="azure-map-logo",this.container},O_.prototype.onRemove=function(){this.container.remove()},O_);function O_(){}var R_,KC=(ze($C,R_=sr),$C);function $C(){var t=R_!==null&&R_.apply(this,arguments)||this;return t.copyrightMessage=void 0,t.showFeedbackLink=!0,t}var B_,XA=(ze(zp,B_=ys),zp.prototype.onAdd=function(t){return this.container=this.buildContainer(t,d.ControlStyle.auto),this.container.className="map-copyright",this.copyrightDiv=this.buildCopyrightDiv(),this.container.appendChild(this.copyrightDiv),this.options.showFeedbackLink&&(this.feedbackLink=this.buildFeedbackLink(),this.container.appendChild(this.feedbackLink)),this.container},zp.prototype.onRemove=function(){B_.prototype.onRemove.call(this),delete this.container},zp.prototype.setOptions=function(t){var n=new KC().merge(this.options,t);n.copyrightMessage!==this.options.copyrightMessage&&(this.copyrightDiv.innerText=n.copyrightMessage),!n.showFeedbackLink&&this.feedbackLink?(this.feedbackLink.remove(),delete this.feedbackLink):n.showFeedbackLink&&!this.feedbackLink&&(this.feedbackLink=this.buildFeedbackLink(),this.container.appendChild(this.feedbackLink)),this.options=n},zp.prototype.buildCopyrightDiv=function(){var t=document.createElement("div");return t.innerText=this.options.copyrightMessage||"",t},zp.prototype.buildFeedbackLink=function(){var t=document.createElement("a");return t.textContent="Improve this map",t.href="https://feedback.azuremaps.com",t.target="_blank",t.rel="noopener",t},zp);function zp(t){var n=B_.call(this)||this;return n.options=new KC().merge(t),n}var JA=(Uy.throwOnError=function(t,n){var a=t instanceof bS?t._getMap():t,h=function(b){throw a.off("error",h),b.error};a.on("error",h);var y=n();return a.off("error",h),y},Uy.tryCatch=function(t,n,a,h){try{return this.throwOnError(t,n)}catch(y){return a(y)}finally{typeof h=="function"&&h()}},Uy.tryFinally=function(t,n,a){try{return this.throwOnError(t,n)}finally{a()}},Uy);function Uy(){}var QA=(XC.prototype.request=function(t){var n={domain:this.map.getServiceOptions().domain,path:"search/address/reverse/json",queryParams:ot({"api-version":"1.0",language:t.style.language,limit:1,query:xi(t.position[1])+","+Dn(t.position[0])},t.style.view&&{view:t.style.view})};return new gi(this.map.authentication.signRequest(n)).get()},XC);function XC(t){this.map=t}var eL=(Vy.prototype.cache=function(t,n,a,h){var y=t+"_"+a[0]+"_"+a[1]+"_"+h;this._labelIdx[n.labelType]||(this._labelIdx[n.labelType]=[],this._labelCache[n.labelType]=[]),this._labelIdx[n.labelType].indexOf(y)===-1&&(this._labelCache[n.labelType].push({name:t,radius:n.radius,minZoom:n.minZoom,maxZoom:n.maxZoom||24,position:a}),this._labelIdx[n.labelType].push(y))},Vy.prototype.getNearestLabel=function(t,n,a){var h=null,y=this._labelCache[t];if(y){for(var b=1/0,u=0,A=y.length;u<A;u++)if(a>=y[u].minZoom&&a<=y[u].maxZoom){var k=ya(y[u].position,n);k<=y[u].radius&&k<=b&&(b=k,h=y[u])}}return h},Vy.prototype._preloadCache=function(t){if(!this._preloadedCache.has(t)){this._preloadedCache.add(t);var n={source:["Ocean label","Ocean name"],labelType:"water",minZoom:0,radius:395e4,polygonSources:["Ocean","Ocean or sea"]},a=t,h=a.indexOf("-");switch(h!==-1&&(a=a.substr(0,h)),a){case"fr":this.cache("Ocan Pacifique",n,[-170,32],t),this.cache("Ocan Pacifique",n,[-138,-27],t),this.cache("Ocan Atlantique",n,[-40,32],t),this.cache("Ocan Atlantique",n,[-17,-29],t);break;case"es":this.cache("Ocan Pacifique",n,[-170,32],t),this.cache("Ocan Pacifique",n,[-138,-27],t),this.cache("Ocano Atlntico",n,[-40,32],t),this.cache("Ocano Atlntico",n,[-17,-29],t);break;case"pt":this.cache("Oceano Pacfico",n,[-170,32],t),this.cache("Oceano Pacfico",n,[-138,-27],t),this.cache("Oceano Atlntico",n,[-40,32],t),this.cache("Oceano Atlntico",n,[-17,-29],t);break;case"ja":this.cache("",n,[-170,32],t),this.cache("",n,[-138,-27],t);break;case"en":this.cache("Pacific Ocean",n,[-170,32],t),this.cache("Pacific Ocean",n,[-138,-27],t),this.cache("Atlantic Ocean",n,[-40,32],t),this.cache("Atlantic Ocean",n,[-17,-29],t),this.cache("Indian Ocean",n,[77,-26],t)}}},Vy);function Vy(){this._labelCache={},this._labelIdx={},this._preloadedCache=new Set}var tL=(en.prototype.dispose=function(){this._disposed=!0,this._map._getMap().off("move",this._onMove),this._map._getMap().off("moveend",this._onMoveEnd),this._map._getMap().off("styledata",this._onStyleData),this._map._getMap().off("rotate",this._onRotate),this._map.getCanvas().removeEventListener("mousedown",this._onPointerDown),this._map.getCanvas().removeEventListener("touchstart",this._onPointerDown),this._map.getMapContainer().removeEventListener("keydown",this._shortcutListener)},en.prototype._getEventPos=function(t){if("touches"in t){var n=t.touches[0],a=t.target.getBoundingClientRect();return[n.pageX-a.left,n.pageY-a.top]}return[t.offsetX,t.offsetY]},en.prototype._checkThresholds=function(t,n){return this._checkZoomThreshold(t.zoom,n.zoom)||this._checkPitchThreshold(t.pitch,n.pitch)||this._checkLocThreshold(t.center,n.center)||this._checkHeadingThreshold(t.bearing,n.bearing)},en.prototype._checkZoomThreshold=function(t,n){return this._round(t)!==this._round(n)},en.prototype._checkPitchThreshold=function(t,n){return Math.abs(t-n)>=this._pitchThreshold},en.prototype._checkLocThreshold=function(t,n){var a=this._map.positionsToPixels([n,t]),h=a[0],y=a[1];return Qi.getDistance(h,y)>=this._moveThreshold},en.prototype._checkHeadingThreshold=function(t,n){t<0&&(t+=360),n<0&&(n+=360);var a=Math.abs(t-n);return 180<a&&(a=360-a),a>=this._headingThreshold},en.prototype._getLocDesc=function(t,n,a){return Zr(this,void 0,void 0,function(){var h,y,b,u,A,k,G,W,se,ne=this;return yr(this,function(Ee){switch(Ee.label){case 0:return a==="blank"?[3,3]:this._map._getMap().loaded()?[3,2]:[4,new Promise(function(Ge){return ne._map._getMap().once("idle",Ge)})];case 1:Ee.sent(),Ee.label=2;case 2:for(h={},y=this._map.positionsToPixels([t.center])[0],JA.tryCatch(this._map,function(){b=ne._map._getMap().queryRenderedFeatures(y,{layers:ne._polygonStyleLayer,filter:["==",["geometry-type"],"Polygon"]})},function(){}),u=null,b&&0<b.length&&(u=b[0]),A=null,k=0,G=this._lableConfig.length;k<G;k++)W=this._lableConfig[k],t.zoom>=W.minZoom?W.polygonSources?u&&W.polygonSources.indexOf(u.layer["source-layer"])!==-1?(A=W.labelType,this._getClosestLabel(W,t,n,h,!1)):this._getClosestLabel(W,t,n,h,!0):this._getClosestLabel(W,t,n,h,!1):this._getClosestLabel(W,t,n,h,!0);return 8<=t.zoom&&this._processRoads(h,t,n),this._labelCache.forEach(function(Ge){h[Ge]||(se=null,(Ge!=="water"&&Ge!=="majorPoi"||Ge===A)&&(se=en._labelCache.getNearestLabel(Ge,t.center,t.zoom)),se&&(h[Ge]=se.name))}),[2,this._processLocInfo(t,A,h,!0,this._restFallback)];case 3:return[2,this._processLocInfo(t,null,null,!1,!1)]}})})},en.prototype._getHeadingDesc=function(t){var n=t.bearing;switch(n<0&&(n+=360),n=this._round(n,this._headingThreshold)){case 0:case 360:return"north";case 45:return"north east";case 90:return"east";case 135:return"south east";case 180:return"south";case 225:return"south west";case 270:return"west";case 315:return"north west";default:return n+" degrees"}},en.prototype._getClosestLabel=function(t,n,a,h,y){for(var b=t.radius,u=0,A=t.source.length;u<A;u++){var k={sourceLayer:t.source[u]},G=this._map._getMap().querySourceFeatures(this._baseVectorTileSourceId,k),W=null,se=1/0,ne=this._labelCache.has(t.labelType);if(!y||y&&ne)for(var Ee=0,Ge=G.length;Ee<Ge;Ee++){var pt=G[Ee].geometry.type==="Point"?G[Ee]:fy(n.center,G[Ee].geometry);if(!y){var Wt=G[Ee].geometry.type==="Point"?ya(n.center,pt.geometry.coordinates):pt.properties.distance;Wt<se&&(se=Wt,W=G[Ee])}ne&&en._labelCache.cache(G[Ee].properties.name,t,pt.geometry.coordinates,a)}if(!y){var nt=t.labelType+"Dis";W&&se<=b&&(typeof h[nt]!="number"||se<=h[nt])&&(h[t.labelType]=W.properties.name,h[nt]=se)}}},en.prototype._processRoads=function(t,n,a,h){var y=this._map._getMap().queryRenderedFeatures(h,{filter:["==",["geometry-type"],"LineString"]});if(y){for(var b=void 0,u=void 0,A=void 0,k=void 0,G=0,W=y.length;G<W;G++)if(this._roadLayers.has(y[G].layer["source-layer"])&&y[G].properties.name&&y[G].properties.name!==""){var se=fy(n.center,y[G]);(!A||se.properties.distance<A.properties.distance)&&(b&&y[G].properties.name===b.properties.name?A=se:b&&y[G].properties.name===b.properties.name?(!k||se.properties.distance<k.properties.distance)&&(k=se,u=y[G]):(k=A,u=b,A=se,b=y[G]))}if(b&&(t.country||(t.country=b.properties.country_code,t.countryDis=0,en._labelCache.cache(t.country,{source:["Country name"],labelType:"country",radius:5e3,minZoom:0},A.geometry.coordinates,a)),t.state||(t.state=b.properties.country_subdivision,t.stateDis=0,en._labelCache.cache(t.state,{source:["State name"],labelType:"state",radius:5e3,minZoom:4},A.geometry.coordinates,a)),15<=n.zoom)){var ne=this._map.positionsToPixels([n.center,A.geometry.coordinates]),Ee=Qi.getDistance(ne[0],ne[1]);if((Ee<this._roadPixelRadius||A.properties.distance<this._minRoadDistance)&&(t.road=b.properties.name),u){var Ge=this._map.positionsToPixels([k.geometry.coordinates]);((Ee=Qi.getDistance(ne[0],Ge[0]))<this._minIntersectionPixelDistance||k.properties.distance<this._minRoadDistance)&&(t.secondRoad=u.properties.name,t.secondRoadDis=k.properties.distance)}}}},en.prototype._getActionDesc=function(t){if(this._lastCam){var n=[];if(this._checkLocThreshold(t.center,this._lastCam.center)){var a=["panned"],h=Math.round(Hu(this._lastCam.center,t.center));h===0||h===360?a.push("north"):h<90?a.push("north east"):h===90?a.push("east"):h<180?a.push("south east"):h===180?a.push("south"):h<270?a.push("south west"):h===270?a.push("west"):h<360&&a.push("north west");var y=ya(this._lastCam.center,t.center,wr.meters);a.push(1e3<y?Wo(y/1e3,2)+" kilometers":Wo(y,2)+" meters"),n.push(a.join(" "))}if(this._checkZoomThreshold(t.zoom,this._lastCam.zoom)){(a=["zoomed"]).push(this._lastCam.zoom<t.zoom?"in":"out");var b=Math.abs(this._lastCam.zoom-t.zoom);1<=b&&(b=Math.ceil(b),a.push(1<b?b+" levels":b+" level")),this._getCanonicalZoom(this._lastCam.zoom)!==this._getCanonicalZoom(t.zoom)&&a.push("to "+this._getCanonicalZoom(t.zoom)+" level"),n.push(a.join(" "))}if(this._checkPitchThreshold(t.pitch,this._lastCam.pitch)){var u=this._round(t.pitch,this._pitchThreshold);if(n.push("pitched to "+u+" degrees"),t.pitch===60||t.pitch===0){var A=t.pitch===60?"maximum":"minimum";n.push("reached "+A+" of "+t.pitch+" degrees")}}return this._checkHeadingThreshold(this._lastCam.bearing,t.bearing)&&n.push("rotated to "+this._getHeadingDesc(t)),n.join(" and ")||null}return null},en.prototype._getCanonicalZoom=function(t){return(t=this._round(t))<2?"world":t<5?"country":t<11?"state province":t<15?"city":"street"},en.prototype._processLocInfo=function(t,n,a,h,y){var b=this;return new Promise(function(u,A){var k=[];if(h){var G=[];if(a&&(n&&(n==="water"&&a.water?G.push(a.water):n==="majorPoi"&&a.majorPoi&&G.push(a.majorPoi)),G.length===0&&(a.majorPoi&&8<=t.zoom?G.push(a.majorPoi):(a.poi&&14<=t.zoom?G.push(a.poi):a.road&&15<=t.zoom&&(a.secondRoad?G.push(a.road+" & "+a.secondRoad):G.push(a.road)),a.neighbourhood&&12<=t.zoom&&G.push(a.neighbourhood),a.city&&6<=t.zoom&&G.push(a.city)),a.state&&4<=t.zoom&&G.push(a.state),G.length===0?a.water?G.push(a.water):a.country&&G.push(a.country):G.length===1&&a.state&&4<=t.zoom&&a.country&&G.push(a.country))),0<G.length)k.push("<p>Location: ",G.join(", "),".</p>");else if(y&&n!=="water")return void b._reverseGeocodeDescription(t).then(function(W){u(W)},function(){A("<p>Location: unknown</p>")})}b._returnDetailedDescriptions&&(k.push("<p>Zoom: ",Wo(t.zoom,2),".</p>"),k.push("<p>Latitude: ",Wo(t.center[1],5),".</p>"),k.push("<p>Longitude: ",Wo(t.center[0],5),".</p>")),u(k.join(""))})},en.prototype._reverseGeocodeDescription=function(t){var n=this;return new Promise(function(a){var h=n._map.getStyle();n._reverseSearch.request({position:t.center,style:h}).then(function(y){var b={};if(y&&y.addresses&&0<y.addresses.length&&y.addresses[0].address){var u=y.addresses[0].address;u.country&&(b.country=u.country,en._labelCache.cache(b.country,{source:["Country name"],labelType:"country",radius:5e3,minZoom:0},t.center,h.language)),u.countrySubdivision&&(b.state=u.countrySubdivision,en._labelCache.cache(b.state,{source:["State name"],labelType:"state",radius:5e3,minZoom:4},t.center,h.language)),u.municipality&&(b.city=u.municipality,en._labelCache.cache(b.state,{source:["Small city"],labelType:"city",radius:1e3,minZoom:10},t.center,h.language)),u.streetNameAndNumber?b.road=u.streetNameAndNumber:u.street&&(b.road=u.street)}n._processLocInfo(t,null,b,!0,!1).then(function(A){a(A)})},function(y){n._processLocInfo(t,null,null,!0,!1).then(function(b){a(b)})}).catch(function(y){n._processLocInfo(t,null,null,!0,!1).then(function(b){a(b)})})})},en.prototype._round=function(t,n){return n===void 0&&(n=1),Math.round(t/n)*n},en);function en(t,n){var a=this;this._restFallback=!0,this._disposed=!1,this._lastHeadingTime=0,this._actionQueue=[],this._pointerUpdateDelay=3e3,this._camUpdateDelay=1e3,this._headUpdateLimit=1e3,this._controlEventDelay=500,this._moveThreshold=25,this._headingThreshold=5,this._pitchThreshold=5,this._roadPixelRadius=120,this._minRoadDistance=25,this._minIntersectionPixelDistance=50,this._baseVectorTileSourceId="vectorTiles",this._lableConfig=[{source:["Ocean label","Ocean name"],labelType:"water",minZoom:0,radius:395e4,polygonSources:["Ocean","Ocean or sea"]},{source:["Sea label"],labelType:"water",minZoom:3,radius:1e6,polygonSources:["Sea","Ocean or sea"]},{source:["Country name"],labelType:"country",minZoom:0,maxZoom:5,radius:3e5},{source:["State name","State name short"],labelType:"state",minZoom:4,maxZoom:7,radius:3e5},{source:["Capital city","Large city"],labelType:"city",minZoom:8,radius:4e4},{source:["Medium city"],labelType:"city",minZoom:8,radius:3e4},{source:["Small city"],labelType:"city",minZoom:8,radius:2e4},{source:["Island label"],labelType:"city",minZoom:8,radius:1e4},{source:["Town"],labelType:"city",minZoom:10,radius:1e4},{source:["Village"],labelType:"neighbourhood",minZoom:12,radius:6e3},{source:["Amusement area label"],labelType:"poi",minZoom:14,radius:2e3,polygonSources:["Amusement park"]},{source:["Hospital label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Hospital"]},{source:["Shopping centre label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Shopping"]},{source:["Stadium label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Stadium"]},{source:["University/School label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["University"]},{source:["Zoo label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Zoo"]},{source:["Airport Label","Airport name","Airport POI"],labelType:"majorPoi",minZoom:11,radius:3e3,polygonSources:["Airport","Runway"]},{source:["National park label"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["National or state park","National park","Forest"]},{source:["Reservation label"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["Reservation"]}],this._polygonStyleLayer=["National or state park","National park","Reservation","Airport","Runway","Stadium","University","Zoo","Shopping","Hospital","Amusement park","Ocean","Sea","Ocean or sea"],this._labelCache=new Set(["city","state","country","water","majorPoi"]),this._roadLayers=new Set(["Connecting road","Connecting road tunnel","International road","International road tunnel","Local road","Local road tunnel","Major local road","Major local road tunnel","Major road","Major road tunnel","Minor local road","Minor local road tunnel","Motorway","Motorway tunnel","Secondary road","Secondary road tunnel","Toll connecting road","Toll connecting road tunnel","Toll international road","Toll international road tunnel","Toll local road","Toll local road tunnel","Toll major local road","Toll major local road tunnel","Toll major road","Toll major road tunnel","Toll minor local road","Toll minor local road tunnel","Toll motorway","Toll motorway tunnel","Toll secondary road","Toll secondary road tunnel"]),this._returnDetailedDescriptions=!1,this._shortcutListener=function(h){return Zr(a,void 0,void 0,function(){var y,b,u,A,k;return yr(this,function(G){switch(G.label){case 0:return h.altKey&&h.ctrlKey&&h.keyCode===68?(this._returnDetailedDescriptions=!this._returnDetailedDescriptions,y=this._map.getCamera(),b=this._map.getStyle(),u=b.language.toLowerCase(),A=b.style.toLowerCase(),[4,this._getLocDesc(y,u,A)]):[3,2];case 1:k=G.sent(),this._descCallback(k),G.label=2;case 2:return[2]}})})},this._onRotate=function(){a._rotateTimeout||(Date.now()-a._lastHeadingTime>=a._headUpdateLimit?a._rotateTimeout=setTimeout(a._updateHeading,ww.RotationDuration+25):a._rotateTimeout=setTimeout(a._updateHeading,a._headUpdateLimit-(Date.now()-a._lastHeadingTime)))},this._onMove=function(){a._moveTimeout&&(clearTimeout(a._moveTimeout),delete a._moveTimeout),a._controlTimeout&&(clearTimeout(a._controlTimeout),delete a._controlTimeout)},this._onMoveEnd=function(h){h.fromControl?a._controlTimeout=setTimeout(a._updateCam,a._controlEventDelay):a._updateCam()},this._onStyleData=function(){setTimeout(a._updateStyle)},this._onPointerDown=function(h){a._lastPointerPos=a._getEventPos(h),a._pointerTimeout=setTimeout(function(){return Zr(a,void 0,void 0,function(){var y,b,u,A,k;return yr(this,function(G){switch(G.label){case 0:return y=this._map.getStyle(),b=y.language.toLowerCase(),u=y.style.toLowerCase(),(A=this._map.getCamera()).center=this._map.pixelsToPositions([this._lastPointerPos])[0],[4,this._getLocDesc(A,b,u)];case 1:return k=G.sent(),this._descCallback(k),this._onPointerUp(),[2]}})})},a._pointerUpdateDelay),a._map.getCanvas().addEventListener("mousemove",a._onPointerMove),a._map.getCanvas().addEventListener("touchmove",a._onPointerMove),a._map.getCanvas().addEventListener("mouseup",a._onPointerUp),a._map.getCanvas().addEventListener("touchend",a._onPointerUp)},this._onPointerMove=function(h){var y=a._getEventPos(h),b=a._lastPointerPos[0]-y[0],u=a._lastPointerPos[1]-y[1];Math.sqrt(b*b+u*u)>a._moveThreshold&&a._onPointerUp()},this._onPointerUp=function(){clearTimeout(a._pointerTimeout),delete a._pointerTimeout,a._map.getCanvas().removeEventListener("mousemove",a._onPointerMove),a._map.getCanvas().removeEventListener("touchmove",a._onPointerMove),a._map.getCanvas().removeEventListener("mouseup",a._onPointerUp),a._map.getCanvas().removeEventListener("touchend",a._onPointerUp)},this._updateHeading=function(){var h=a._map.getCamera();if(!a._lastHead||a._checkHeadingThreshold(h.bearing,a._lastHead)){var y=a._getHeadingDesc(h);a._lastHead=h.bearing,a._descCallback("<p>Map heading "+y+".</p>"),a._lastHeadingTime=Date.now()}delete a._rotateTimeout},this._updateStyle=function(){return Zr(a,void 0,void 0,function(){var h,y,b,u,A;return yr(this,function(k){switch(k.label){case 0:return h=this._map.getCamera(),y=this._map.getStyle(),b=y.language.toLowerCase(),u=y.style.toLowerCase(),this._lastLang===b?[3,2]:(en._labelCache._preloadCache(b),[4,this._getLocDesc(h,b,u)]);case 1:return A=k.sent(),[3,4];case 2:return this._lastStyle===u||this._lastStyle!=="blank"?[3,4]:[4,this._getLocDesc(h,b,u)];case 3:A=k.sent(),k.label=4;case 4:return this._lastLang=b,this._lastStyle=u,A&&this._descCallback(A),[2]}})})},this._updateCam=function(h){h===void 0&&(h=!1);var y=a._map.getCamera();if(!a._lastCam||0<a._actionQueue.length||a._checkThresholds(y,a._lastCam)){var b=a._map.getStyle(),u=b.language.toLowerCase(),A=b.style.toLowerCase(),k=a._getActionDesc(y);k&&a._actionQueue.push(k),a._lastCam=y,a._moveTimeout&&(clearTimeout(a._moveTimeout),delete a._moveTimeout),a._moveTimeout=setTimeout(function(){return Zr(a,void 0,void 0,function(){var G;return yr(this,function(W){switch(W.label){case 0:return clearTimeout(this._rotateTimeout),delete this._rotateTimeout,[4,this._getLocDesc(y,u,A)];case 1:return G=W.sent(),0<this._actionQueue.length?(this._descCallback("<p>Map "+this._actionQueue.join(", then ")+".</p>"+G),this._actionQueue=[]):this._descCallback(G),[2]}})})},h?0:a._camUpdateDelay)}},this._map=t,this._descCallback=n,this._reverseSearch=new QA(t),en._labelCache||(en._labelCache=new eL),this._lastLang=this._map.getStyle().language.toLowerCase(),en._labelCache._preloadCache(this._lastLang),this._map.events.addOnce("load",function(){a._disposed||(a._updateCam(!0),a._map._getMap().on("move",a._onMove),a._map._getMap().on("moveend",a._onMoveEnd),a._map._getMap().on("styledata",a._onStyleData),a._map._getMap().on("rotate",a._onRotate),a._map.getCanvas().addEventListener("mousedown",a._onPointerDown),a._map.getCanvas().addEventListener("touchstart",a._onPointerDown))}),this._map.getMapContainer().addEventListener("keydown",this._shortcutListener)}var F_,rL=function(t){var n=this;this.addToMap=function(){n.initializeMapLiveStateInfo(),n.initializeMapStyleInfo(),n.createMapKeyBindingInfo(),n.map.getMapContainer().setAttribute("role","application"),n.map.getMapContainer().setAttribute("aria-label","Map Application"),n.map.getCanvas().setAttribute("aria-label","Interactive Map"),n.map.getCanvas().setAttribute("aria-describedby","atlas-map-state atlas-map-style atlas-map-shortcuts"),n.map.getCanvas().setAttribute("alt","Interactive Map")},this.removeFromMap=function(){n.mapViewDesc!=null&&n.mapViewDesc.dispose(),delete n.mapViewDesc,n.atlasMapKeyBindings!=null&&n.map.getCanvasContainer().removeChild(n.atlasMapKeyBindings),delete n.atlasMapKeyBindings,n.atlasMapLiveStateInfo!=null&&n.map.getCanvasContainer().removeChild(n.atlasMapLiveStateInfo),delete n.atlasMapLiveStateInfo,n.atlasMapStyleInfo!=null&&n.map.getCanvasContainer().removeChild(n.atlasMapStyleInfo),delete n.atlasMapStyleInfo,n.map.getMapContainer().removeAttribute("role"),n.map.getMapContainer().removeAttribute("aria-label"),n.map.getCanvas().removeAttribute("aria-label"),n.map.getCanvas().removeAttribute("aria-describedby"),n.map.getCanvas().removeAttribute("alt"),n.map.events.remove("styledata",n.updateMapStyle)},this.createMapKeyBindingInfo=function(){n.atlasMapKeyBindings=document.createElement("div"),n.atlasMapKeyBindings.setAttribute("tabindex","-1"),n.atlasMapKeyBindings.setAttribute("aria-hidden","true"),n.atlasMapKeyBindings.id="atlas-map-shortcuts",n.atlasMapKeyBindings.classList.add("hidden-accessible-element"),n.atlasMapKeyBindings.innerHTML=["Map shortcuts:","Zoom out: hyphen.","Zoom in: plus.","Pan right 100 pixels: right arrow.","Pan left 100 pixels: left arrow.","Pan up 100 pixels: up arrow.","Pan down 100 pixels: down arrow.","Rotate 15 degrees clockwise: shift + right arrow.","Rotate 15 degrees counter clockwise: shift + left arrow.","Increase pitch 10 degrees: shift + up arrow.","Decrease pitch 10 degrees: shift + down arrow.","Toggle verbose map state: control + alt + D.","Jump focus to the map: Escape."].join(`
`),n.map.getCanvasContainer().appendChild(n.atlasMapKeyBindings),n.atlasMapKeyBindings.setAttribute("aria-live","polite")},this.initializeMapLiveStateInfo=function(){n.mapViewDesc=new tL(n.map,n.updateMapState),n.atlasMapLiveStateInfo=document.createElement("div"),n.atlasMapLiveStateInfo.setAttribute("tabindex","-1"),n.atlasMapLiveStateInfo.setAttribute("aria-hidden","true"),n.atlasMapLiveStateInfo.id="atlas-map-state",n.atlasMapLiveStateInfo.classList.add("hidden-accessible-element"),n.map.getCanvasContainer().appendChild(n.atlasMapLiveStateInfo),n.atlasMapLiveStateInfo.setAttribute("aria-live","polite")},this.initializeMapStyleInfo=function(){n.atlasMapStyleInfo=document.createElement("div"),n.atlasMapStyleInfo.setAttribute("tabindex","-1"),n.atlasMapStyleInfo.setAttribute("aria-hidden","true"),n.atlasMapStyleInfo.id="atlas-map-style",n.atlasMapStyleInfo.classList.add("hidden-accessible-element"),n.updateMapStyle(),n.map.events.add("styledata",n.updateMapStyle),n.map.getCanvasContainer().appendChild(n.atlasMapStyleInfo),n.atlasMapStyleInfo.setAttribute("aria-live","polite")},this.updateMapStyle=function(){n.atlasMapStyleInfo.innerHTML="<p>Map style: "+n.map.getStyle().style+".</p>"},this.updateMapState=function(a){n.atlasMapLiveStateInfo.innerHTML=a},this.map=t},nL=function(t){var n=this;this.callCounter=0,this.listenerEnabled=!1,this.flowComponent=void 0,this.flowPath=void 0,this.addToMap=function(){if(!n.map._isReady())throw new Error("Traffic flow could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before enabling traffic flow.");n.listenerEnabled||(n.map.events.add("styledata",n.addToMap),n.listenerEnabled=!0);var a=n.map.getStyle(),h=n.map.getTraffic(),y=n.map.styles.getFlowPath(a,h);if(y&&n.flowPath!==y){n.callCounter++;var b=n.callCounter;n.map.styles.getFlowComponent(a,h).then(function(u){if(n.callCounter===b){n.flowComponent&&(n.map.layers.remove(n.flowComponent.layer),n.map.sources.remove(n.flowComponent.sources),delete n.flowComponent);var A=n.map.layers.getLayers(),k=A.findIndex(function(W){return W.getId()==="transit"}),G=k!==-1?A[k+1]:void 0;n.map.sources.add(u.sources),n.map.layers.add(u.layer,G),n.flowComponent=u,n.flowPath=y}})}},this.removeFromMap=function(){n.callCounter++,n.listenerEnabled&&(n.map.events.remove("styledata",n.addToMap),n.listenerEnabled=!1),n.flowPath&&delete n.flowPath,n.flowComponent&&(n.map.layers.remove(n.flowComponent.layer),n.map.sources.remove(n.flowComponent.sources),delete n.flowComponent)},this.map=t},iL=(ze(JC,F_=sr),JC);function JC(){var t=F_!==null&&F_.apply(this,arguments)||this;return t.version="1.0",t.bbox=void 0,t.zoom=void 0,t.params={},t}var oL=(QC.prototype.request=function(t){var n,a=new iL().merge(t),h=this.map.getServiceOptions().domain;n=hr.getWest(a.bbox)<-180&&180<hr.getEast(a.bbox)?hr.getSouth(a.bbox)+",-180,"+hr.getNorth(a.bbox)+",180":hr.getSouth(a.bbox)+","+Dn(hr.getWest(a.bbox))+","+hr.getNorth(a.bbox)+","+Dn(hr.getEast(a.bbox));var y={domain:h,path:"traffic/incident/detail/json",queryParams:ot({"api-version":a.version,projection:"EPSG4326",style:"s3",boundingbox:n,boundingzoom:a.zoom,trafficmodelid:-1},a.params)};return new gi(this.map.authentication.signRequest(y)).get()},QC);function QC(t){this.map=t}var eS,pd,qy,aL=(ze(rl,eS=xs),rl.getIncidentTypeName=function(t,n){switch(t){case 0:return n.Unknown;case 1:return n.Accident;case 2:return n.Fog;case 3:return n.Danger;case 4:return n.Rain;case 5:return n.Ice;case 6:return n.Jam;case 7:return n.LaneClosed;case 8:return n.RoadClosed;case 9:return n.RoadWorks;case 10:return n.Wind;case 11:return n.Flood;case 12:return n.Detour;default:return n.Unknown}},rl.getIncidentTypeIconName=function(t){switch(t){case 0:return"unknown";case 1:return"accident";case 2:return"fog";case 3:return"danger";case 4:return"rain";case 5:return"ice";case 6:return"jam";case 7:return"lane-closed";case 8:return"road-closed";case 9:return"road-work";case 10:return"wind";case 11:return"flood";case 12:return"detour";default:return"unknown"}},rl.getSeverityColorName=function(t){switch(t){case 0:return"grey";case 1:return"yellow";case 2:return"orange";case 3:return"red";case 4:default:return"grey"}},rl.getSeverityColorHexCode=function(t){switch(t){case 0:return"#B5B6B7";case 1:return"#F4C951";case 2:return"#F4873F";case 3:return"#F04F4E";case 4:default:return"#B5B6B7"}},rl);function rl(t,n){var a=new Xs(new Po(t.op.x,t.op.y)),h={icon:rl.getSeverityColorName(t.ty)+"-"+rl.getIncidentTypeIconName(t.ic),incidentType:rl.getIncidentTypeName(t.ic,n),description:t.d,length:t.l,delay:t.dl,from:t.f,color:rl.getSeverityColorHexCode(t.ty),to:t.t,id:t.id};return eS.call(this,a,h)||this}(qy=pd=pd||{}).DELAY="delay",qy.LENGTH="length",qy.FROM="from",qy.TO="to";var sL=(j_.build=function(t,n){n===void 0&&(n="en-US");var a=document.createElement("div");a.classList.add("incident-popup-title"),a.classList.add("font-segoeui-b"),a.setAttribute("tabindex","0"),a.innerText=t.properties.incidentType,a.setAttribute("aria-label","Incident Type "+t.properties.incidentType);var h=document.createElement("div");h.classList.add("incident-popup-subtitle"),h.classList.add("font-segoeui-b"),h.setAttribute("aria-label","Incident Description "+t.properties.description),h.setAttribute("tabindex","0"),h.innerText=t.properties.description;var y=document.createElement("div");y.classList.add("incident-popup-header"),y.style.backgroundColor=t.properties.color,y.appendChild(a),y.appendChild(h);var b=document.createElement("div");if(b.classList.add("incident-popup-body"),t.properties.delay){var u=Math.floor(t.properties.delay/60)+" min",A=this.createInfoSection(u,pd.DELAY);b.appendChild(A)}if(t.properties.length){var k=new Intl.NumberFormat([n,"en-US"],{maximumFractionDigits:2}),G=void 0;if(n==="en-US"){var W=Gu(t.properties.length,"meters","miles");G=k.format(W)+" miles"}else{var se=Gu(t.properties.length,"meters","kilometers");G=k.format(se)+" km"}var ne=this.createInfoSection(G,pd.LENGTH);b.appendChild(ne)}if(t.properties.from){var Ee=this.createInfoSection(t.properties.from,pd.FROM);b.appendChild(Ee)}if(t.properties.to){var Ge=this.createInfoSection(t.properties.to,pd.TO);b.appendChild(Ge)}var pt=document.createElement("div");return pt.classList.add("incident-popup-content"),pt.appendChild(y),pt.appendChild(b),new i_({content:pt,position:t.geometry.coordinates})},j_.createInfoSection=function(t,n){var a=document.createElement("div");a.classList.add("incident-popup-info");var h=document.createElement("div");h.classList.add("icon"),h.classList.add(n);var y=document.createElement("span");return y.classList.add("message"),y.classList.add("font-segoeui"),y.setAttribute("aria-label","Incident "+n+" "+t),y.setAttribute("tabindex","0"),y.innerText=t,a.appendChild(h),a.appendChild(y),a},j_);function j_(){}var U_,lL=function(t){var n=this;this.incidentLayerName="incidents",this.popups=new Ua,this.addToMap=function(){n.map.addPins([],{name:n.incidentLayerName,cluster:!1}),n.map.addEventListener("mouseenter",n.incidentLayerName,n.cursorToPointer),n.map.addEventListener("mouseleave",n.incidentLayerName,n.cursorToDefault),n.map.addEventListener("click",n.incidentLayerName,n.openIncidentPopup),n.map.events.add("moveend",n.updateIncidents),n.map.events.add("styledata",n.updateLanguage),n.updateIncidents()},this.removeFromMap=function(){n.map.removeLayers([n.incidentLayerName]),n.map.removeEventListener("click",n.incidentLayerName,n.openIncidentPopup),n.map.removeEventListener("mouseenter",n.incidentLayerName,n.cursorToPointer),n.map.removeEventListener("mouseleave",n.incidentLayerName,n.cursorToDefault),n.map.events.remove("moveend",n.updateIncidents),n.map.events.remove("styledata",n.updateLanguage),n.cleanUpPopups()},this.updateIncidents=function(){var a=Math.ceil(n.map.getCamera().zoom),h=n.map.getCamera().bounds;n.incidentLanguage=n.map.getStyle().language;var y=n.map._getLocalizedStrings(),b=n.incidentService.request({bbox:h,zoom:a,params:{expandCluster:!0,originalPosition:!0,language:n.incidentLanguage}});Promise.all([b,y]).then(function(u){var A=u[0],k=u[1];if(n.map.getTraffic().incidents){var G=[];n.cleanUpPopups();for(var W=0,se=A.tm.poi||[];W<se.length;W++)for(var ne=se[W],Ee=function(Wt){if(hr.containsPosition(h,[Wt.op.x,Wt.op.y])){var nt=new aL(Wt,k);G.push(nt);var qt=sL.build(nt,n.incidentLanguage);n.popups.set(nt.properties.id,qt),n.map.events.add("open",qt,function(){n.openPopupId=nt.properties.id,n.popups.forEach(function(tn,ho){n.openPopupId!==ho&&tn.close()})}),n.map.events.add("close",qt,function(){n.openPopupId===nt.properties.id&&delete n.openPopupId}),n.openPopupId===nt.properties.id?n.popups.get(nt.properties.id).open(n.map):n.popups.get(nt.properties.id).attach(n.map)}},Ge=0,pt=ne.cpoi||[ne];Ge<pt.length;Ge++)Ee(pt[Ge]);n.map.addPins(G,{overwrite:!0,name:n.incidentLayerName})}})},this.cursorToPointer=function(a){n.map.getCanvas().style.cursor="pointer"},this.cursorToDefault=function(a){n.map.getCanvas().style.cursor=""},this.openIncidentPopup=function(a){var h=a.features[0].properties.id;n.popups.has(h)&&n.popups.get(h).open(n.map)},this.cleanUpPopups=function(){n.popups.forEach(function(a){a.remove()}),n.popups.clear()},this.updateLanguage=function(){n.map.getStyle().language!==n.incidentLanguage&&n.updateIncidents()},this.map=t,this.incidentService=new oL(this.map)},tS=(ze(rS,U_=sr),rS);function rS(){var t=U_!==null&&U_.apply(this,arguments)||this;return t.interactive=!0,t.scrollZoomInteraction=!0,t.boxZoomInteraction=!0,t.dragRotateInteraction=!0,t.dragPanInteraction=!0,t.keyboardInteraction=!0,t.dblClickZoomInteraction=!0,t.touchInteraction=!0,t.wheelZoomRate=1/450,t}var uL=(V_.prototype.enable=function(){this.map.getMapContainer().addEventListener("keydown",this._onKeyDown)},V_.prototype.disable=function(){this.map.getMapContainer().removeEventListener("keydown",this._onKeyDown)},V_);function V_(t){var n=this;this._onKeyDown=function(a){a.keyCode===27&&n.map.getCanvas().focus()},this.map=t}var cL=(q_.prototype.enable=function(){this.map._getMap().on("touchstart",this._onTouchStart),this.map._getMap().on("touchmove",this._onTouchMove),this.map._getMap().on("touchend",this._onTouchEnd),this.map._getMap().on("touchcancel",this._onTouchCancel)},q_.prototype.disable=function(){this.map._getMap().off("touchstart",this._onTouchStart),this.map._getMap().off("touchmove",this._onTouchMove),this.map._getMap().off("touchend",this._onTouchEnd),this.map._getMap().off("touchcancel",this._onTouchCancel)},q_);function q_(t){var n=this;this.minDiffX=70,this.maxDiffY=100,this.minDiff=30,this.delay=160,this._onTouchStart=function(a){if(a.points.length===2){var h=a.points[0].y-a.points[1].y,y=a.points[0].x-a.points[1].x;Math.abs(y)>=n.minDiffX&&Math.abs(h)<=n.maxDiffY&&(a.originalEvent.preventDefault(),n.map._getMap().touchZoomRotate.disable(),n.map._getMap().dragPan.disable(),n.dpPoint=a.point,n.dpPitch=n.map._getMap().getPitch(),n.startTiming=Date.now(),n.startDistance=Math.hypot(y,h),n.startEventData=a)}},this._onTouchMove=function(a){if(n.dpPoint!==void 0&&n.dpPitch!==void 0){a.preventDefault(),a.originalEvent.preventDefault();var h=a.points[0].y-a.points[1].y,y=a.points[0].x-a.points[1].x,b=Math.hypot(y,h);if(Math.abs(b-n.startDistance)>=n.minDiff)return n.dpPoint&&(n.map._getMap().touchZoomRotate.enable(),n.map._getMap().dragPan.enable(),n.map._getMap().touchZoomRotate.onStart(Date.now()-n.startTiming>=n.delay?a.originalEvent:n.startEventData.originalEvent)),void(n.dpPoint=void 0);if(Date.now()-n.startTiming>=n.delay){var u=.5*(n.dpPoint.y-a.point.y);n.map._getMap().setPitch(n.dpPitch+u)}}},this._onTouchEnd=function(){n.dpPoint&&(n.map._getMap().touchZoomRotate.enable(),n.map._getMap().dragPan.enable()),n.dpPoint=void 0},this._onTouchCancel=function(){n.dpPoint&&(n.map._getMap().touchZoomRotate.enable(),n.map._getMap().dragPan.enable()),n.dpPoint=void 0},this.map=t}var pL=(Z_.prototype.enable=function(){this.map.getCanvasContainer().addEventListener("gesturestart",this._onGestureStart),this.map.getCanvasContainer().addEventListener("gesturechange",this._onGestureChange),this.map.getCanvasContainer().addEventListener("touchstart",this._onTouchStart),this.map.getCanvasContainer().addEventListener("touchend",this._onTouchEnd)},Z_.prototype.disable=function(){this.map.getCanvasContainer().removeEventListener("gesturestart",this._onGestureStart),this.map.getCanvasContainer().removeEventListener("gesturechange",this._onGestureChange),this.map.getCanvasContainer().removeEventListener("touchstart",this._onTouchStart),this.map.getCanvasContainer().removeEventListener("touchend",this._onTouchEnd)},Z_);function Z_(t){var n=this;this._onGestureStart=function(a){n.hasTouch||(a.preventDefault(),n.initZoom=n.map.getCamera().zoom)},this._onGestureChange=function(a){n.hasTouch||(a.preventDefault(),n.map.setCamera({zoom:n.initZoom+a.scale-1}))},this._onTouchStart=function(a){n.hasTouch=!0},this._onTouchEnd=function(a){a.touches.length===0&&(n.hasTouch=!1)},this.map=t}var hL=(hd.prototype.addToMap=function(){this.added||(this.added=!0,this._setInteractions(this.options))},hd.prototype.removeFromMap=function(){this.added&&(this.added=!1,this._setInteractions({interactive:!1}))},hd.prototype.setOptions=function(t){this.options=new tS().merge(this.options,t),this.added&&this._setInteractions(this.options)},hd.prototype.getOptions=function(){return Object.assign({},this.options)},hd.prototype._setInteractions=function(t){t.interactive?(t.boxZoomInteraction?this.map._getMap().boxZoom.enable():this.map._getMap().boxZoom.disable(),t.dblClickZoomInteraction?this.map._getMap().doubleClickZoom.enable():this.map._getMap().doubleClickZoom.disable(),t.dragPanInteraction?this.map._getMap().dragPan.enable():this.map._getMap().dragPan.disable(),t.dragRotateInteraction?this.map._getMap().dragRotate.enable():this.map._getMap().dragRotate.disable(),t.keyboardInteraction?(this.map._getMap().keyboard.enable(),this.focusShortcut.enable()):(this.map._getMap().keyboard.disable(),this.focusShortcut.disable()),t.scrollZoomInteraction?(this.map._getMap().scrollZoom.enable(),this.map._getMap().scrollZoom.setWheelZoomRate(t.wheelZoomRate)):this.map._getMap().scrollZoom.disable(),t.touchInteraction?(this.map._getMap().touchZoomRotate.enable(),this.mobilePitch.enable()):(this.map._getMap().touchZoomRotate.disable(),this.mobilePitch.disable()),this.pinchZoom.enable()):(this.map._getMap().boxZoom.disable(),this.map._getMap().doubleClickZoom.disable(),this.map._getMap().dragPan.disable(),this.map._getMap().dragRotate.disable(),this.map._getMap().keyboard.disable(),this.focusShortcut.disable(),this.map._getMap().scrollZoom.disable(),this.map._getMap().touchZoomRotate.disable(),this.mobilePitch.disable(),this.pinchZoom.disable())},hd);function hd(t,n){this.added=!1,this.map=t,this.mobilePitch=new cL(t),this.focusShortcut=new uL(t),this.pinchZoom=new pL(t),this.options=new tS().merge(n)}var nS=C(function(t){var n=(n=function(a){if(this.REQUEST_TYPE={LOGIN:"LOGIN",RENEW_TOKEN:"RENEW_TOKEN",UNKNOWN:"UNKNOWN"},this.RESPONSE_TYPE={ID_TOKEN_TOKEN:"id_token token",TOKEN:"token"},this.CONSTANTS={ACCESS_TOKEN:"access_token",EXPIRES_IN:"expires_in",ID_TOKEN:"id_token",ERROR_DESCRIPTION:"error_description",SESSION_STATE:"session_state",ERROR:"error",STORAGE:{TOKEN_KEYS:"adal.token.keys",ACCESS_TOKEN_KEY:"adal.access.token.key",EXPIRATION_KEY:"adal.expiration.key",STATE_LOGIN:"adal.state.login",STATE_RENEW:"adal.state.renew",NONCE_IDTOKEN:"adal.nonce.idtoken",SESSION_STATE:"adal.session.state",USERNAME:"adal.username",IDTOKEN:"adal.idtoken",ERROR:"adal.error",ERROR_DESCRIPTION:"adal.error.description",LOGIN_REQUEST:"adal.login.request",LOGIN_ERROR:"adal.login.error",RENEW_STATUS:"adal.token.renew.status",ANGULAR_LOGIN_REQUEST:"adal.angular.login.request"},RESOURCE_DELIMETER:"|",CACHE_DELIMETER:"||",LOADFRAME_TIMEOUT:6e3,TOKEN_RENEW_STATUS_CANCELED:"Canceled",TOKEN_RENEW_STATUS_COMPLETED:"Completed",TOKEN_RENEW_STATUS_IN_PROGRESS:"In Progress",LOGGING_LEVEL:{ERROR:0,WARN:1,INFO:2,VERBOSE:3},LEVEL_STRING_MAP:{0:"ERROR:",1:"WARNING:",2:"INFO:",3:"VERBOSE:"},POPUP_WIDTH:483,POPUP_HEIGHT:600},n.prototype._singletonInstance)return n.prototype._singletonInstance;if((n.prototype._singletonInstance=this).instance="https://login.microsoftonline.com/",this.config={},this.callback=null,this.popUp=!1,this.isAngular=!1,this._user=null,this._activeRenewals={},this._loginInProgress=!1,this._acquireTokenInProgress=!1,this._renewStates=[],this._callBackMappedToRenewStates={},this._callBacksMappedToRenewStates={},this._openedWindows=[],this._requestType=this.REQUEST_TYPE.LOGIN,window._adalInstance=this,a.displayCall&&typeof a.displayCall!="function")throw new Error("displayCall is not a function");if(!a.clientId)throw new Error("clientId is required");this.config=this._cloneConfig(a),this.config.navigateToLoginRequestUrl===void 0&&(this.config.navigateToLoginRequestUrl=!0),this.config.popUp&&(this.popUp=!0),this.config.callback&&typeof this.config.callback=="function"&&(this.callback=this.config.callback),this.config.instance&&(this.instance=this.config.instance),this.config.loginResource||(this.config.loginResource=this.config.clientId),this.config.redirectUri||(this.config.redirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.postLogoutRedirectUri||(this.config.postLogoutRedirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.anonymousEndpoints||(this.config.anonymousEndpoints=[]),this.config.isAngular&&(this.isAngular=this.config.isAngular),this.config.loadFrameTimeout&&(this.CONSTANTS.LOADFRAME_TIMEOUT=this.config.loadFrameTimeout)},typeof window<"u"&&(window.Logging={piiLoggingEnabled:!1,level:0,log:function(a){}}),n.prototype.login=function(){if(this._loginInProgress)this.info("Login in progress");else{this._loginInProgress=!0;var a=this._guid();this.config.state=a,this._idTokenNonce=this._guid();var h=this._getItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST);h&&h!==""?this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""):h=window.location.href,this.verbose("Expected state: "+a+" startPage:"+h),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,h),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,a,!0),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var y=this._getNavigateUrl("id_token",null)+"&nonce="+encodeURIComponent(this._idTokenNonce);this.config.displayCall?this.config.displayCall(y):this.popUp?(this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._renewStates.push(a),this.registerCallback(a,this.config.clientId,this.callback),this._loginPopup(y)):this.promptUser(y)}},n.prototype._openPopup=function(a,h,y,b){try{var u=window.screenLeft?window.screenLeft:window.screenX,A=window.screenTop?window.screenTop:window.screenY,k=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,G=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,W=k/2-y/2+u,se=G/2-b/2+A,ne=window.open(a,h,"width="+y+", height="+b+", top="+se+", left="+W);return ne.focus&&ne.focus(),ne}catch(Ee){return this.warn("Error opening popup, "+Ee.message),this._loginInProgress=!1,this._acquireTokenInProgress=!1,null}},n.prototype._handlePopupError=function(a,h,y,b,u){this.warn(b),this._saveItem(this.CONSTANTS.STORAGE.ERROR,y),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,b),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,u),h&&this._activeRenewals[h]&&(this._activeRenewals[h]=null),this._loginInProgress=!1,this._acquireTokenInProgress=!1,a&&a(b,null,y)},n.prototype._loginPopup=function(a,h,y){var b=this._openPopup(a,"login",this.CONSTANTS.POPUP_WIDTH,this.CONSTANTS.POPUP_HEIGHT),u=y||this.callback;if(b!=null){if(this._openedWindows.push(b),this.config.redirectUri.indexOf("#")!=-1)var A=this.config.redirectUri.split("#")[0];else A=this.config.redirectUri;var k=this,G=window.setInterval(function(){if(!b||b.closed||b.closed===void 0){var se="Popup Window closed",ne="Popup Window closed by UI action/ Popup Window handle destroyed due to cross zone navigation in IE/Edge";return k.isAngular&&k._broadcast("adal:popUpClosed",ne+k.CONSTANTS.RESOURCE_DELIMETER+se),k._handlePopupError(u,h,se,ne,ne),void window.clearInterval(G)}try{var Ee=b.location;if(encodeURI(Ee.href).indexOf(encodeURI(A))!=-1)return k.isAngular?k._broadcast("adal:popUpHashChanged",Ee.hash):k.handleWindowCallback(Ee.hash),window.clearInterval(G),k._loginInProgress=!1,k._acquireTokenInProgress=!1,k.info("Closing popup window"),k._openedWindows=[],void b.close()}catch{}},1)}else{var W="Popup Window is null. This can happen if you are using IE";this._handlePopupError(u,h,"Error opening popup",W,W)}},n.prototype._broadcast=function(a,h){function y(u,A){A=A||{bubbles:!1,cancelable:!1,detail:void 0};var k=document.createEvent("CustomEvent");return k.initCustomEvent(u,A.bubbles,A.cancelable,A.detail),k}typeof window.CustomEvent!="function"&&(y.prototype=window.Event.prototype,window.CustomEvent=y);var b=new CustomEvent(a,{detail:h});window.dispatchEvent(b)},n.prototype.loginInProgress=function(){return this._loginInProgress},n.prototype._hasResource=function(a){var h=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);return h&&!this._isEmpty(h)&&-1<h.indexOf(a+this.CONSTANTS.RESOURCE_DELIMETER)},n.prototype.getCachedToken=function(a){if(!this._hasResource(a))return null;var h=this._getItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+a),y=this._getItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+a),b=this.config.expireOffsetSeconds||300;return y&&y>this._now()+b?h:(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+a,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+a,0),null)},n.prototype.getCachedUser=function(){if(this._user)return this._user;var a=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);return this._user=this._createUser(a),this._user},n.prototype.registerCallback=function(a,h,y){this._activeRenewals[h]=a,this._callBacksMappedToRenewStates[a]||(this._callBacksMappedToRenewStates[a]=[]);var b=this;this._callBacksMappedToRenewStates[a].push(y),this._callBackMappedToRenewStates[a]||(this._callBackMappedToRenewStates[a]=function(u,A,k,G){b._activeRenewals[h]=null;for(var W=0;W<b._callBacksMappedToRenewStates[a].length;++W)try{b._callBacksMappedToRenewStates[a][W](u,A,k,G)}catch(se){b.warn(se)}b._callBacksMappedToRenewStates[a]=null,b._callBackMappedToRenewStates[a]=null})},n.prototype._renewToken=function(a,h,y){this.info("renewToken is called for resource:"+a);var b=this._addAdalFrame("adalRenewFrame"+a),u=this._guid()+"|"+a;this.config.state=u,this._renewStates.push(u),this.verbose("Renew token Expected state: "+u),y=y||"token";var A=this._urlRemoveQueryStringParameter(this._getNavigateUrl(y,a),"prompt");y===this.RESPONSE_TYPE.ID_TOKEN_TOKEN&&(this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),A+="&nonce="+encodeURIComponent(this._idTokenNonce)),A+="&prompt=none",A=this._addHintParameters(A),this.registerCallback(u,a,h),this.verbosePii("Navigate to:"+A),b.src="about:blank",this._loadFrameTimeout(A,"adalRenewFrame"+a,a)},n.prototype._renewIdToken=function(a,h){this.info("renewIdToken is called");var y=this._addAdalFrame("adalIdTokenFrame"),b=this._guid()+"|"+this.config.clientId;this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this.config.state=b,this._renewStates.push(b),this.verbose("Renew Idtoken Expected state: "+b);var u=h==null?null:this.config.clientId,A=(h=h||"id_token",this._urlRemoveQueryStringParameter(this._getNavigateUrl(h,u),"prompt"));A+="&prompt=none",A=this._addHintParameters(A),A+="&nonce="+encodeURIComponent(this._idTokenNonce),this.registerCallback(b,this.config.clientId,a),this.verbosePii("Navigate to:"+A),y.src="about:blank",this._loadFrameTimeout(A,"adalIdTokenFrame",this.config.clientId)},n.prototype._urlContainsQueryStringParameter=function(a,h){return new RegExp("[\\?&]"+a+"=").test(h)},n.prototype._urlRemoveQueryStringParameter=function(a,h){var y=new RegExp("(\\&"+h+"=)[^&]+");return a=a.replace(y,""),y=new RegExp("("+h+"=)[^&]+&"),a=a.replace(y,""),y=new RegExp("("+h+"=)[^&]+"),a.replace(y,"")},n.prototype._loadFrameTimeout=function(a,h,y){this.verbose("Set loading state to pending for: "+y),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+y,this.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS),this._loadFrame(a,h);var b=this;setTimeout(function(){if(b._getItem(b.CONSTANTS.STORAGE.RENEW_STATUS+y)===b.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS){b.verbose("Loading frame has timed out after: "+b.CONSTANTS.LOADFRAME_TIMEOUT/1e3+" seconds for resource "+y);var u=b._activeRenewals[y];u&&b._callBackMappedToRenewStates[u]&&b._callBackMappedToRenewStates[u]("Token renewal operation failed due to timeout",null,"Token Renewal Failed"),b._saveItem(b.CONSTANTS.STORAGE.RENEW_STATUS+y,b.CONSTANTS.TOKEN_RENEW_STATUS_CANCELED)}},b.CONSTANTS.LOADFRAME_TIMEOUT)},n.prototype._loadFrame=function(a,h){var y=this;y.info("LoadFrame: "+h);var b=h;setTimeout(function(){var u=y._addAdalFrame(b);u.src!==""&&u.src!=="about:blank"||(u.src=a,y._loadFrame(a,b))},500)},n.prototype.acquireToken=function(a,h){if(this._isEmpty(a))return this.warn("resource is required"),void h("resource is required",null,"resource is required");var y=this.getCachedToken(a);return y?(this.info("Token is already in cache for resource:"+a),void h(null,y,null)):this._user||this.config.extraQueryParameter&&this.config.extraQueryParameter.indexOf("login_hint")!==-1?void(this._activeRenewals[a]?this.registerCallback(this._activeRenewals[a],a,h):(this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,a===this.config.clientId?this._user?(this.verbose("renewing idtoken"),this._renewIdToken(h)):(this.verbose("renewing idtoken and access_token"),this._renewIdToken(h,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)):this._user?(this.verbose("renewing access_token"),this._renewToken(a,h)):(this.verbose("renewing idtoken and access_token"),this._renewToken(a,h,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)))):(this.warn("User login is required"),void h("User login is required",null,"login required"))},n.prototype.acquireTokenPopup=function(a,h,y,b){if(this._isEmpty(a))return this.warn("resource is required"),void b("resource is required",null,"resource is required");if(!this._user)return this.warn("User login is required"),void b("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void b("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var u=this._guid()+"|"+a;this.config.state=u,this._renewStates.push(u),this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,this.verbose("Renew token Expected state: "+u);var A=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",a),"prompt");if(A+="&prompt=select_account",h&&(A+=h),y&&A.indexOf("&claims")===-1)A+="&claims="+encodeURIComponent(y);else if(y&&A.indexOf("&claims")!==-1)throw new Error("Claims cannot be passed as an extraQueryParameter");A=this._addHintParameters(A),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+a),this.registerCallback(u,a,b),this._loginPopup(A,a,b)},n.prototype.acquireTokenRedirect=function(a,h,y){if(this._isEmpty(a))return this.warn("resource is required"),void b("resource is required",null,"resource is required");var b=this.callback;if(!this._user)return this.warn("User login is required"),void b("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void b("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var u=this._guid()+"|"+a;this.config.state=u,this.verbose("Renew token Expected state: "+u);var A=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",a),"prompt");if(A+="&prompt=select_account",h&&(A+=h),y&&A.indexOf("&claims")===-1)A+="&claims="+encodeURIComponent(y);else if(y&&A.indexOf("&claims")!==-1)throw new Error("Claims cannot be passed as an extraQueryParameter");A=this._addHintParameters(A),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+a),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,window.location.href),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,u,!0),this.promptUser(A)},n.prototype.promptUser=function(a){a?(this.infoPii("Navigate to:"+a),window.location.replace(a)):this.info("Navigate url is empty")},n.prototype.clearCache=function(){this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._renewStates=[],this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"");var a=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);if(!this._isEmpty(a)){a=a.split(this.CONSTANTS.RESOURCE_DELIMETER);for(var h=0;h<a.length&&a[h]!=="";h++)this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+a[h],""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+a[h],0)}this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,"")},n.prototype.clearCacheForResource=function(a){this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._hasResource(a)&&(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+a,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+a,0))},n.prototype.logOut=function(){var a;if(this.clearCache(),this._user=null,this.config.logOutUri)a=this.config.logOutUri;else{var h="common",y="";this.config.tenant&&(h=this.config.tenant),this.config.postLogoutRedirectUri&&(y="post_logout_redirect_uri="+encodeURIComponent(this.config.postLogoutRedirectUri)),a=this.instance+h+"/oauth2/logout?"+y}this.infoPii("Logout navigate to: "+a),this.promptUser(a)},n.prototype._isEmpty=function(a){return a===void 0||!a||a.length===0},n.prototype.getUser=function(a){if(typeof a!="function")throw new Error("callback is not a function");if(this._user)a(null,this._user);else{var h=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);this._isEmpty(h)?(this.warn("User information is not available"),a("User information is not available",null)):(this.info("User exists in cache: "),this._user=this._createUser(h),a(null,this._user))}},n.prototype._addHintParameters=function(a){if(this._user&&this._user.profile){if(this._user.profile.sid&&a.indexOf("&prompt=none")!==-1)this._urlContainsQueryStringParameter("sid",a)||(a+="&sid="+encodeURIComponent(this._user.profile.sid));else if(this._user.profile.upn&&(this._urlContainsQueryStringParameter("login_hint",a)||(a+="&login_hint="+encodeURIComponent(this._user.profile.upn)),!this._urlContainsQueryStringParameter("domain_hint",a)&&-1<this._user.profile.upn.indexOf("@"))){var h=this._user.profile.upn.split("@");a+="&domain_hint="+encodeURIComponent(h[h.length-1])}}return a},n.prototype._createUser=function(a){var h=null,y=this._extractIdToken(a);return y&&y.hasOwnProperty("aud")&&(y.aud.toLowerCase()===this.config.clientId.toLowerCase()?(h={userName:"",profile:y},y.hasOwnProperty("upn")?h.userName=y.upn:y.hasOwnProperty("email")&&(h.userName=y.email)):this.warn("IdToken has invalid aud field")),h},n.prototype._getHash=function(a){return-1<a.indexOf("#/")?a=a.substring(a.indexOf("#/")+2):-1<a.indexOf("#")&&(a=a.substring(1)),a},n.prototype.isCallback=function(a){a=this._getHash(a);var h=this._deserialize(a);return h.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||h.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||h.hasOwnProperty(this.CONSTANTS.ID_TOKEN)},n.prototype.getLoginError=function(){return this._getItem(this.CONSTANTS.STORAGE.LOGIN_ERROR)},n.prototype.getRequestInfo=function(a){a=this._getHash(a);var h=this._deserialize(a),y={valid:!1,parameters:{},stateMatch:!1,stateResponse:"",requestType:this.REQUEST_TYPE.UNKNOWN};if(h&&((y.parameters=h).hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||h.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||h.hasOwnProperty(this.CONSTANTS.ID_TOKEN))){y.valid=!0;var b="";if(!h.hasOwnProperty("state"))return this.warn("No state returned"),y;if(this.verbose("State: "+h.state),b=h.state,y.stateResponse=b,this._matchState(y))return y;if(!y.stateMatch&&window.parent){y.requestType=this._requestType;for(var u=this._renewStates,A=0;A<u.length;A++)if(u[A]===y.stateResponse){y.stateMatch=!0;break}}}return y},n.prototype._matchNonce=function(a){var h=this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN);if(h){h=h.split(this.CONSTANTS.CACHE_DELIMETER);for(var y=0;y<h.length;y++)if(h[y]===a.profile.nonce)return!0}return!1},n.prototype._matchState=function(a){var h=this._getItem(this.CONSTANTS.STORAGE.STATE_LOGIN);if(h){h=h.split(this.CONSTANTS.CACHE_DELIMETER);for(var y=0;y<h.length;y++)if(h[y]===a.stateResponse)return a.requestType=this.REQUEST_TYPE.LOGIN,a.stateMatch=!0}var b=this._getItem(this.CONSTANTS.STORAGE.STATE_RENEW);if(b){for(b=b.split(this.CONSTANTS.CACHE_DELIMETER),y=0;y<b.length;y++)if(b[y]===a.stateResponse)return a.requestType=this.REQUEST_TYPE.RENEW_TOKEN,a.stateMatch=!0}return!1},n.prototype._getResourceFromState=function(a){if(a){var h=a.indexOf("|");if(-1<h&&h+1<a.length)return a.substring(h+1)}return""},n.prototype.saveTokenFromHash=function(a){this.info("State status:"+a.stateMatch+"; Request type:"+a.requestType),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var h,y=this._getResourceFromState(a.stateResponse);a.parameters.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)?(this.infoPii("Error :"+a.parameters.error+"; Error description:"+a.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),this._saveItem(this.CONSTANTS.STORAGE.ERROR,a.parameters.error),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,a.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),a.requestType===this.REQUEST_TYPE.LOGIN&&(this._loginInProgress=!1,this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,a.parameters.error_description))):a.stateMatch?(this.info("State is right"),a.parameters.hasOwnProperty(this.CONSTANTS.SESSION_STATE)&&this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,a.parameters[this.CONSTANTS.SESSION_STATE]),a.parameters.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)&&(this.info("Fragment has access token"),this._hasResource(y)||(h=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,h+y+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+y,a.parameters[this.CONSTANTS.ACCESS_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+y,this._expiresIn(a.parameters[this.CONSTANTS.EXPIRES_IN]))),a.parameters.hasOwnProperty(this.CONSTANTS.ID_TOKEN)&&(this.info("Fragment has id token"),this._loginInProgress=!1,this._user=this._createUser(a.parameters[this.CONSTANTS.ID_TOKEN]),this._user&&this._user.profile?this._matchNonce(this._user)?(this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,a.parameters[this.CONSTANTS.ID_TOKEN]),y=this.config.loginResource?this.config.loginResource:this.config.clientId,this._hasResource(y)||(h=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,h+y+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+y,a.parameters[this.CONSTANTS.ID_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+y,this._user.profile.exp)):(this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"Nonce received: "+this._user.profile.nonce+" is not same as requested: "+this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN)),this._user=null):(a.parameters.error="invalid id_token",a.parameters.error_description="Invalid id_token. id_token: "+a.parameters[this.CONSTANTS.ID_TOKEN],this._saveItem(this.CONSTANTS.STORAGE.ERROR,"invalid id_token"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid id_token. id_token: "+a.parameters[this.CONSTANTS.ID_TOKEN])))):(a.parameters.error="Invalid_state",a.parameters.error_description="Invalid_state. state: "+a.stateResponse,this._saveItem(this.CONSTANTS.STORAGE.ERROR,"Invalid_state"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid_state. state: "+a.stateResponse)),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+y,this.CONSTANTS.TOKEN_RENEW_STATUS_COMPLETED)},n.prototype.getResourceForEndpoint=function(a){if(this.config&&this.config.anonymousEndpoints){for(var h=0;h<this.config.anonymousEndpoints.length;h++)if(-1<a.indexOf(this.config.anonymousEndpoints[h]))return null}if(this.config&&this.config.endpoints){for(var y in this.config.endpoints)if(-1<a.indexOf(y))return this.config.endpoints[y]}return(-1<a.indexOf("http://")||-1<a.indexOf("https://"))&&this._getHostFromUri(a)!==this._getHostFromUri(this.config.redirectUri)?null:this.config.loginResource},n.prototype._getHostFromUri=function(a){var h=String(a).replace(/^(https?:)\/\//,"");return h.split("/")[0]},n.prototype.handleWindowCallback=function(a){if(a==null&&(a=window.location.hash),this.isCallback(a)){var h=null,y=!1;0<this._openedWindows.length&&this._openedWindows[this._openedWindows.length-1].opener&&this._openedWindows[this._openedWindows.length-1].opener._adalInstance?(h=this._openedWindows[this._openedWindows.length-1].opener._adalInstance,y=!0):window.parent&&window.parent._adalInstance&&(h=window.parent._adalInstance);var b,u,A=h.getRequestInfo(a),k=null;u=y||window.parent!==window?h._callBackMappedToRenewStates[A.stateResponse]:h.callback,h.info("Returned from redirect url"),h.saveTokenFromHash(A),A.requestType===this.REQUEST_TYPE.RENEW_TOKEN&&window.parent?(window.parent!==window?h.verbose("Window is in iframe, acquiring token silently"):h.verbose("acquiring token interactive in progress"),b=A.parameters[h.CONSTANTS.ACCESS_TOKEN]||A.parameters[h.CONSTANTS.ID_TOKEN],k=h.CONSTANTS.ACCESS_TOKEN):A.requestType===this.REQUEST_TYPE.LOGIN&&(b=A.parameters[h.CONSTANTS.ID_TOKEN],k=h.CONSTANTS.ID_TOKEN);var G=A.parameters[h.CONSTANTS.ERROR_DESCRIPTION],W=A.parameters[h.CONSTANTS.ERROR];try{u&&u(G,b,W,k)}catch(se){h.error("Error occurred in user defined callback function: "+se)}window.parent!==window||y||(h.config.navigateToLoginRequestUrl?window.location.href=h._getItem(h.CONSTANTS.STORAGE.LOGIN_REQUEST):window.location.hash="")}},n.prototype._getNavigateUrl=function(a,h){var y="common";this.config.tenant&&(y=this.config.tenant);var b=this.instance+y+"/oauth2/authorize"+this._serialize(a,this.config,h)+this._addLibMetadata();return this.info("Navigate url:"+b),b},n.prototype._extractIdToken=function(a){var h=this._decodeJwt(a);if(!h)return null;try{var y=h.JWSPayload,b=this._base64DecodeStringUrlSafe(y);return b?JSON.parse(b):(this.info("The returned id_token could not be base64 url safe decoded."),null)}catch(u){this.error("The returned id_token could not be decoded",u)}return null},n.prototype._base64DecodeStringUrlSafe=function(a){return a=a.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(escape(window.atob(a))):decodeURIComponent(escape(this._decode(a)))},n.prototype._decode=function(a){var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y=(a=String(a).replace(/=+$/,"")).length;if(y%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var b,u,A,k,G,W,se,ne,Ee="",Ge=0;Ge<y;Ge+=4){if(b=h.indexOf(a.charAt(Ge)),u=h.indexOf(a.charAt(Ge+1)),A=h.indexOf(a.charAt(Ge+2)),k=h.indexOf(a.charAt(Ge+3)),Ge+2===y-1){W=(G=b<<18|u<<12|A<<6)>>16&255,se=G>>8&255,Ee+=String.fromCharCode(W,se);break}if(Ge+1===y-1){W=(G=b<<18|u<<12)>>16&255,Ee+=String.fromCharCode(W);break}W=(G=b<<18|u<<12|A<<6|k)>>16&255,se=G>>8&255,ne=255&G,Ee+=String.fromCharCode(W,se,ne)}return Ee},n.prototype._decodeJwt=function(a){if(this._isEmpty(a))return null;var h=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(a);return!h||h.length<4?(this.warn("The returned id_token is not parseable."),null):{header:h[1],JWSPayload:h[2],JWSSig:h[3]}},n.prototype._convertUrlSafeToRegularBase64EncodedString=function(a){return a.replace("-","+").replace("_","/")},n.prototype._serialize=function(a,h,y){var b=[];if(h!==null){b.push("?response_type="+a),b.push("client_id="+encodeURIComponent(h.clientId)),y&&b.push("resource="+encodeURIComponent(y)),b.push("redirect_uri="+encodeURIComponent(h.redirectUri)),b.push("state="+encodeURIComponent(h.state)),h.hasOwnProperty("slice")&&b.push("slice="+encodeURIComponent(h.slice)),h.hasOwnProperty("extraQueryParameter")&&b.push(h.extraQueryParameter);var u=h.correlationId?h.correlationId:this._guid();b.push("client-request-id="+encodeURIComponent(u))}return b.join("&")},n.prototype._deserialize=function(a){function h(k){return decodeURIComponent(k.replace(b," "))}var y,b=/\+/g,u=/([^&=]+)=([^&]*)/g,A={};for(y=u.exec(a);y;)A[h(y[1])]=h(y[2]),y=u.exec(a);return A},n.prototype._decimalToHex=function(a){for(var h=a.toString(16);h.length<2;)h="0"+h;return h},n.prototype._guid=function(){var a=window.crypto||window.msCrypto;if(a&&a.getRandomValues){var h=new Uint8Array(16);return a.getRandomValues(h),h[6]|=64,h[6]&=79,h[8]|=128,h[8]&=191,this._decimalToHex(h[0])+this._decimalToHex(h[1])+this._decimalToHex(h[2])+this._decimalToHex(h[3])+"-"+this._decimalToHex(h[4])+this._decimalToHex(h[5])+"-"+this._decimalToHex(h[6])+this._decimalToHex(h[7])+"-"+this._decimalToHex(h[8])+this._decimalToHex(h[9])+"-"+this._decimalToHex(h[10])+this._decimalToHex(h[11])+this._decimalToHex(h[12])+this._decimalToHex(h[13])+this._decimalToHex(h[14])+this._decimalToHex(h[15])}for(var y="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",b="0123456789abcdef",u=0,A="",k=0;k<36;k++)y[k]!=="-"&&y[k]!=="4"&&(u=16*Math.random()|0),y[k]==="x"?A+=b[u]:y[k]==="y"?(u&=3,A+=b[u|=8]):A+=y[k];return A},n.prototype._expiresIn=function(a){return a=a||3599,this._now()+parseInt(a,10)},n.prototype._now=function(){return Math.round(new Date().getTime()/1e3)},n.prototype._addAdalFrame=function(a){if(a!==void 0){this.info("Add adal frame to document:"+a);var h=document.getElementById(a);if(!h){if(document.createElement&&document.documentElement&&(window.opera||window.navigator.userAgent.indexOf("MSIE 5.0")===-1)){var y=document.createElement("iframe");y.setAttribute("id",a),y.setAttribute("aria-hidden","true"),y.style.visibility="hidden",y.style.position="absolute",y.style.width=y.style.height=y.borderWidth="0px",h=document.getElementsByTagName("body")[0].appendChild(y)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeEnd",'<iframe name="'+a+'" id="'+a+'" style="display:none"></iframe>');window.frames&&window.frames[a]&&(h=window.frames[a])}return h}},n.prototype._saveItem=function(a,h,y){if(this.config&&this.config.cacheLocation&&this.config.cacheLocation==="localStorage"){if(!this._supportsLocalStorage())return this.info("Local storage is not supported"),!1;if(y){var b=this._getItem(a)||"";localStorage.setItem(a,b+h+this.CONSTANTS.CACHE_DELIMETER)}else localStorage.setItem(a,h);return!0}return this._supportsSessionStorage()?(sessionStorage.setItem(a,h),!0):(this.info("Session storage is not supported"),!1)},n.prototype._getItem=function(a){return this.config&&this.config.cacheLocation&&this.config.cacheLocation==="localStorage"?this._supportsLocalStorage()?localStorage.getItem(a):(this.info("Local storage is not supported"),null):this._supportsSessionStorage()?sessionStorage.getItem(a):(this.info("Session storage is not supported"),null)},n.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem("storageTest","A"),window.localStorage.getItem("storageTest")=="A"&&(window.localStorage.removeItem("storageTest"),!window.localStorage.getItem("storageTest")))}catch{return!1}},n.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem("storageTest","A"),window.sessionStorage.getItem("storageTest")=="A"&&(window.sessionStorage.removeItem("storageTest"),!window.sessionStorage.getItem("storageTest")))}catch{return!1}},n.prototype._cloneConfig=function(a){if(a===null||typeof a!="object")return a;var h={};for(var y in a)a.hasOwnProperty(y)&&(h[y]=a[y]);return h},n.prototype._addLibMetadata=function(){return"&x-client-SKU=Js&x-client-Ver="+this._libVersion()},n.prototype.log=function(a,h,y,b){if(a<=Logging.level){if(!Logging.piiLoggingEnabled&&b)return;var u=new Date().toUTCString(),A="";A=this.config.correlationId?u+":"+this.config.correlationId+"-"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[a]+" "+h:u+":"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[a]+" "+h,y&&(A+=`
stack:
`+y.stack),Logging.log(A)}},n.prototype.error=function(a,h){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,a,h)},n.prototype.warn=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,a,null)},n.prototype.info=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,a,null)},n.prototype.verbose=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,a,null)},n.prototype.errorPii=function(a,h){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,a,h,!0)},n.prototype.warnPii=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,a,null,!0)},n.prototype.infoPii=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,a,null,!0)},n.prototype.verbosePii=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,a,null,!0)},n.prototype._libVersion=function(){return"1.0.17"},t.exports&&(t.exports=n,t.exports.inject=function(a){return new n(a)}),n)});function iS(t){this.message=t}nS.inject,(iS.prototype=new Error).name="InvalidCharacterError";var oS=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new iS("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,h,y=0,b=0,u="";h=n.charAt(b++);~h&&(a=y%4?64*a+h:h,y++%4)&&(u+=String.fromCharCode(255&a>>(-2*y&6))))h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(h);return u};function dL(t){var n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(oS(n).replace(/(.)/g,function(a,h){var y=h.charCodeAt(0).toString(16).toUpperCase();return y.length<2&&(y="0"+y),"%"+y}))}catch{return oS(n)}}function Zy(t){this.message=t}function aS(t,n){if(typeof t!="string")throw new Zy("Invalid token specified");var a=(n=n||{}).header===!0?0:1;try{return JSON.parse(dL(t.split(".")[a]))}catch(h){throw new Zy("Invalid token specified: "+h.message)}}(Zy.prototype=new Error).name="InvalidTokenError",aS.InvalidTokenError=Zy;var fL=(dr.prototype.initialize=function(){var t=this;return this.initPromise||(this.initPromise=new Promise(function(n,a){if(t.options.authType===d.AuthenticationType.subscriptionKey)n();else if(t.options.authType===d.AuthenticationType.aad){if(t.options.authContext=t.options.authContext||dr.getDefaultAuthContext(t.options),t.options.authContext.handleWindowCallback(),t.options.authContext.getLoginError())return void a(new Error("Error logging in the AAD users: "+t.options.authContext.getLoginError()));if(t.options.authContext.isCallback(window.location.hash))return void t.map.dispose();setTimeout(function(){return t._loginAndAcquire(n,a)})}else t.options.authType===d.AuthenticationType.anonymous?n(t._triggerTokenFetch()):a(new Error("An invalid authentication type was specified."))})),this.initPromise},dr.getDefaultAuthContext=function(t){if(!t.aadAppId)throw new Error("No AAD app ID was specified.");if(!t.aadTenant)throw new Error("No AAD tenant was specified.");return this.defaultAuthContext||(this.defaultAuthContext=new nS({instance:t.aadInstance||Ne,tenant:t.aadTenant,clientId:t.aadAppId,cacheLocation:this.constants.preferredCacheLocation})),this.defaultAuthContext},dr.prototype._loginAndAcquire=function(t,n){function a(){h.options.authContext.acquireToken(Et,function(A){if(A)n(new Error(A));else{var k={map:h.map,type:dr.constants.events.tokenAcquired};h.map.events.invoke(dr.constants.events.tokenAcquired,k),t()}})}var h=this,y=this.options.authContext.getCachedToken(this.options.aadAppId),b=this.options.authContext.getCachedUser();if(y&&b)a();else{this.options.authContext.loginInProgress()||this.options.authContext.login();var u=setInterval(function(){h.options.authContext.loginInProgress()||(clearInterval(u),h.options.authContext.getCachedToken(h.options.aadAppId)?a():n(new Error(h.options.authContext.getLoginError()||"The AAD authentication context is not logged-in for the specified app ID: "+h.options.aadAppId)))},25)}},dr.prototype.getAuthType=function(){return this.options.authType},dr.prototype.getClientId=function(){return this.options.clientId},dr.prototype.getToken=function(){var t=this;if(this.options.authType===d.AuthenticationType.aad){var n=this.options.authContext.getCachedToken(Et);return n||(this.options.authContext.getCachedUser()||this.options.authContext.login(),this.options.authContext.acquireToken(Et,function(y,b){if(!y){n=b;var u={map:t.map,type:dr.constants.events.tokenAcquired};t.map.events.invoke(dr.constants.events.tokenAcquired,u)}})),n}if(this.options.authType===d.AuthenticationType.anonymous){var a=this._getItem(dr.constants.storage.accessTokenKey);if(a){var h=this._getTokenExpiry(a);if(h<300&&0<h)this._triggerTokenFetch();else if(h<=0)throw this._saveItem(dr.constants.storage.accessTokenKey,""),new Error(dr.constants.errors.tokenExpired)}else this._triggerTokenFetch();return a}if(this.options.authType===d.AuthenticationType.subscriptionKey)return this.options.subscriptionKey},dr.prototype._getTokenExpiry=function(t){var n=aS(t).exp,a=this._getCurrentTime();return 0<n-a?n-a:-1},dr.prototype._storeAccessToken=function(t){this._saveItem(dr.constants.storage.accessTokenKey,t);var n={map:this.map,type:dr.constants.events.tokenAcquired};this.map.events.invoke(dr.constants.events.tokenAcquired,n)},dr.prototype._saveItem=function(t,n){return this._supportsLocalStorage()?(localStorage.setItem(t,n),!0):!!this._supportsSessionStorage()&&(sessionStorage.setItem(t,n),!0)},dr.prototype._getItem=function(t){return this._supportsLocalStorage()?localStorage.getItem(t):this._supportsSessionStorage()?sessionStorage.getItem(t):null},dr.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem(dr.constants.storage.testStorageKey,"A"),window.localStorage.getItem(dr.constants.storage.testStorageKey)==="A"&&(window.localStorage.removeItem(dr.constants.storage.testStorageKey),!window.localStorage.getItem(dr.constants.storage.testStorageKey)))}catch{return!1}},dr.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem(dr.constants.storage.testStorageKey,"A"),window.sessionStorage.getItem(dr.constants.storage.testStorageKey)==="A"&&(window.sessionStorage.removeItem(dr.constants.storage.testStorageKey),!window.sessionStorage.getItem(dr.constants.storage.testStorageKey)))}catch{return!1}},dr.prototype._getCurrentTime=function(){return Math.round(new Date().getTime()/1e3)},dr.prototype.signRequest=function(t){t.headers=t.headers||{},t.headers[Ht]=this.sessionId,t.headers[Be]=Xe,t.headers[ct]="MapControl/"+Vr+" (Web)";var n=this.getToken();switch(this.options.authType){case d.AuthenticationType.aad:case d.AuthenticationType.anonymous:t.headers[Oe]=this.options.clientId,t.headers[$e]=We+n;break;case d.AuthenticationType.subscriptionKey:if("url"in t)t.url.indexOf("?")!==-1?t.url+="&subscription-key="+n:t.url+="?&subscription-key="+n;else{if(!("domain"in t))throw new Error("Could not determine if the provided object was UrlOptions or RequestParameters");t.queryParams=t.queryParams||{},t.queryParams["subscription-key"]=n}break;default:throw new Error("An invalid authentication type was specified")}return t},dr.constants={preferredCacheLocation:"localStorage",storage:{accessTokenKey:"access.token.key",testStorageKey:"testStorage"},events:{tokenAcquired:"tokenacquired"},tokenExpiresIn:3599,tokenRefreshClockSkew:300,errors:{tokenExpired:"Token Expired, Try again"}},dr);function dr(t){var n=this;this._triggerTokenFetch=function(){return new Promise(function(h,y){n.options.getToken(function(b){try{var u=n._getTokenExpiry(b)-dr.constants.tokenRefreshClockSkew;n._storeAccessToken(b),clearTimeout(n.tokenTimeOutHandle),n.tokenTimeOutHandle=setTimeout(n._triggerTokenFetch,1e3*u),h()}catch{y(new Error("Invalid token returned by getToken function"))}},function(b){y(b)},n.map)})};var a=t.getServiceOptions();this.options=a.authOptions,this.sessionId=a.sessionId,this.map=t}var mL=(dd.prototype.add=function(t,n){if(Array.isArray(t))for(var a=0,h=t;a<h.length;a++){var y=h[a];this._add(y,n)}else this._add(t,n)},dd.prototype.getControls=function(){return Array.from(this.controls)},dd.prototype.remove=function(t){if(Array.isArray(t))for(var n=0,a=t;n<a.length;n++){var h=a[n];this._remove(h)}else this._remove(t)},dd.prototype._add=function(t,n){this.controls.add(t);var a=new Uf().merge(n),h=t.onAdd(this.map,n),y=this.controlContainer.getElementsByClassName(a.position);if(!(0<y.length))throw new Error("Control position "+a.position+" does not exist.");y.item(0).appendChild(h)},dd.prototype._remove=function(t){t.onRemove(),this.controls.delete(t)},dd);function dd(t){for(var n in this.map=t,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("atlas-control-container"),d.ControlPosition)if(d.ControlPosition.hasOwnProperty(n)){var a=document.createElement("div");a.classList.add(d.ControlPosition[n]),a.classList.add("subcontrol-container"),this.controlContainer.appendChild(a)}this.map.getMapContainer().appendChild(this.controlContainer),this.controls=new Set}var gL=(fd.prototype.addCallback=function(t,n,a,h,y){var b,u,A=this;if(h)b=function(k){var G=k.lngLat?new Po(k.lngLat.lng,k.lngLat.lat):void 0,W=k.point?[k.point.x,k.point.y]:void 0,se=k.features?k.features.map(function(Ee){return new xs(Ee.geometry,Ee.properties,Ee.id)}):[],ne={type:k.type,originalEvent:k.originalEvent,position:G,coordinate:W,features:se};a(ne)};else switch(t){case"data":case"sourcedata":case"styledata":b=function(k){var G=ot(ot({dataType:k.dataType},k.dataType==="source"&&ot(ot(ot({isSourceLoaded:k.isSourceLoaded},k.sourceDataType&&{sourceDataType:k.sourceDataType}),{source:A.map.sources.getById(k.sourceId)}),k.tile&&{tile:{id:{x:k.tile.tileID.canonical.x,y:k.tile.tileID.canonical.y,z:k.tile.tileID.canonical.z},size:k.tile.tileSize,state:k.tile.state}})),{map:A.map,type:k.type});y&&A.map.events._removeListener(t,n,a),a(G)};break;case"error":b=function(k){var G={error:k.error,map:A.map,type:k.type};y&&A.map.events._removeListener(t,n,a),a(G)};break;case"touchstart":case"touchend":case"touchmove":case"touchcancel":b=function(k){if(k.originalEvent){if(k.originalEvent===u)return;u=k.originalEvent}var G=k.point?new Qi(k.point.x,k.point.y):void 0,W=k.points?k.points.map(function(pt){return new Qi(pt.x,pt.y)}):[],se=k.lngLat?new Po(k.lngLat.lng,k.lngLat.lat):void 0,ne=k.lngLats?k.lngLats.map(function(pt){return new Po(pt.lng,pt.lat)}):[],Ee=se?A.map.layers.getRenderedShapes(new Xs(se),n?[n]:void 0):[],Ge={map:A.map,originalEvent:k.originalEvent,pixel:G,pixels:W,position:se,positions:ne,shapes:Ee,layerId:n||void 0,preventDefault:function(){return k.preventDefault()},type:k.type};y&&A.map.events._removeListener(t,n,a),a(Ge)};break;case"mousedown":case"mouseup":case"mouseover":case"mousemove":case"click":case"dblclick":case"mouseout":case"mouseenter":case"mouseleave":case"contextmenu":b=function(k){if(k.originalEvent){if(k.originalEvent===u)return;u=k.originalEvent}var G=k.lngLat?new Po(k.lngLat.lng,k.lngLat.lat):void 0,W=k.point?new Qi(k.point.x,k.point.y):void 0,se=G?A.map.layers.getRenderedShapes(new Xs(G),n?[n]:void 0):[],ne={map:A.map,originalEvent:k.originalEvent,position:G,pixel:W,preventDefault:function(){return k.preventDefault()},shapes:se,layerId:n||void 0,type:k.type};y&&A.map.events._removeListener(t,n,a),a(ne)};break;case"styleimagemissing":b=function(k){y&&A.map.events._removeListener(t,n,a),a(k.id)};break;case"wheel":b=function(k){if(k.originalEvent){if(k.originalEvent===u)return;u=k.originalEvent}var G={map:A.map,originalEvent:k.originalEvent,preventDefault:function(){return k.preventDefault()},type:k.type};y&&A.map.events._removeListener(t,n,a),a(G)};break;case"resize":b=function(k){var G={map:A.map,type:k.type};for(var W in k)W!=="type"&&W!=="target"&&(G[W]=k[W]);y&&A.map.events._removeListener(t,n,a),a(G)};break;default:b=function(k){var G={map:A.map,type:k.type};k.originalEvent&&(G.originalEvent=k.originalEvent),y&&A.map.events._removeListener(t,n,a),a(G)}}this.callbacks.has(n)||this.callbacks.set(n,new Ua),this.callbacks.get(n).has(t)||this.callbacks.get(n).set(t,new Ua),this.callbacks.get(n).get(t).set(a,[b,y])},fd.prototype.removeCallback=function(t,n,a){this.callbacks.has(n)&&this.callbacks.get(n).has(t)&&this.callbacks.get(n).get(t).has(a)&&this.callbacks.get(n).get(t).delete(a)},fd.prototype.getModifiedCallback=function(t,n,a){if(this.callbacks.has(n)&&this.callbacks.get(n).has(t)&&this.callbacks.get(n).get(t).has(a))return this.callbacks.get(n).get(t).get(a)[0]},fd.prototype.getLayerCallbacks=function(t){if(this.callbacks.has(t))return this.callbacks.get(t)},fd.prototype.getEventCallbacks=function(t,n){if(this.callbacks.has(n)){var a=this.callbacks.get(n);if(a.has(t))return a.get(t)}},fd);function fd(t){this.callbacks=new Ua,this.map=t}var yL=(_a.prototype.add=function(t,n,a){if(typeof n=="function")this._addGlobalListener(t,n,!1,!1);else for(var h=0,y=n=Array.isArray(n)?n:[n];h<y.length;h++){var b=y[h];b instanceof zn&&zn._isMBoxEvent(t)?this._addLayerListener(t,b,a,!1,!1):b._addEventListener(t,a,!1)}},_a.prototype.addOnce=function(t,n,a){typeof n=="function"?this._addGlobalListener(t,n,!1,!0):n instanceof zn&&zn._isMBoxEvent(t)?this._addLayerListener(t,n,a,!1,!0):n._addEventListener(t,a,!0)},_a.prototype._addLegacy=function(t,n,a){typeof n=="function"?this._addGlobalListener(t,n,!0,!1):this._addLayerListener(t,n,a,!0,!1)},_a.prototype._addLayerListener=function(t,n,a,h,y){var b=n instanceof zn?n.getId():n,u=this.map.layers.getLayerById(b),A=this.mapCallbackHandler.getModifiedCallback(t,b,a);if(A&&u)for(var k=0,G=u._getLayerIds();k<G.length;k++){var W=G[k];this.map._getMap().off(t,W,A)}if(this.mapCallbackHandler.addCallback(t,b,a,h,y),u){A=this.mapCallbackHandler.getModifiedCallback(t,b,a);for(var se=0,ne=u._getLayerIds();se<ne.length;se++)W=ne[se],this.map._getMap().on(t,W,A)}},_a.prototype._addGlobalListener=function(t,n,a,h){var y=this.mapCallbackHandler.getModifiedCallback(t,"",n);if(y&&this.map._getMap().off(t,y),this.mapCallbackHandler.addCallback(t,"",n,a,h),y=this.mapCallbackHandler.getModifiedCallback(t,"",n),t==="load"&&this.map._isLoaded()){var b={type:"load",map:this.map};setTimeout(function(){return y(b)})}else if(t==="ready"){if(this.map._isReady()){var u={type:"ready",map:this.map};setTimeout(function(){return y(u)})}}else this.map._getMap().on(t,y)},_a.prototype.invoke=function(t,n,a){if(a===void 0)this._invokeListeners(t,"",n);else if(n instanceof zn&&zn._isMBoxEvent(t))this._invokeListeners(t,n.getId(),a);else{if(!(n instanceof _p))throw new Error("The invoke target is invalid.");n._invokeEvent(t,a)}},_a.prototype._invokeListeners=function(t,n,a){var h=this,y=this.mapCallbackHandler.getEventCallbacks(t,n);y?y.forEach(function(b,u){b[0],b[1]&&h._removeListener(t,n,u),u(a)}):t==="error"&&console.error("error"in a?a.error:a)},_a.prototype.remove=function(t,n,a){if(typeof n=="function")this._removeListener(t,"",n);else for(var h=0,y=n=Array.isArray(n)?n:[n];h<y.length;h++){var b=y[h];b instanceof zn&&zn._isMBoxEvent(t)?this._removeListener(t,b,a):b._removeEventListener(t,a)}},_a.prototype._removeLegacy=function(t,n,a){typeof n=="function"?this._removeListener(t,"",n):this._removeListener(t,n,a)},_a.prototype._removeListener=function(t,n,a){var h=n instanceof zn?n.getId():n,y=this.mapCallbackHandler.getModifiedCallback(t,h,a);if(y)if(h){var b=this.map.layers.getLayerById(h);if(b)for(var u=0,A=b._getLayerIds();u<A.length;u++){var k=A[u];this.map._getMap().off(t,k,y)}}else this.map._getMap().off(t,y);this.mapCallbackHandler.removeCallback(t,h,a)},_a.prototype._enableLayerEvents=function(t){var n=this,a=this.mapCallbackHandler.getLayerCallbacks(t.getId());a&&a.forEach(function(h,y){h.forEach(function(b){for(var u=b[0],A=0,k=t._getLayerIds();A<k.length;A++){var G=k[A];n.map._getMap().on(y,G,u)}})})},_a.prototype._disableLayerEvents=function(t){var n=this,a=this.mapCallbackHandler.getLayerCallbacks(t.getId());a&&a.forEach(function(h,y){h.forEach(function(b){for(var u=b[0],A=0,k=t._getLayerIds();A<k.length;A++){var G=k[A];n.map._getMap().off(y,G,u)}})})},_a);function _a(t){this.map=t,this.mapCallbackHandler=new gL(this.map)}var vL=(Np.prototype.add=function(t,n){if(Array.isArray(t))for(var a=0,h=t;a<h.length;a++){var y=h[a];this._addMarker(y,n)}else this._addMarker(t,n)},Np.prototype._addMarker=function(t,n){t._addToMap(this.map,n),this.markers.add(t)},Np.prototype.getMarkers=function(){return Array.from(this.markers)},Np.prototype.remove=function(t){if(Array.isArray(t))for(var n=0,a=t;n<a.length;n++){var h=a[n];this._removeMarker(h)}else this._removeMarker(t)},Np.prototype._removeMarker=function(t){var n=this;t instanceof s_?(t._removeFromMap(),this.markers.delete(t)):this.markers.forEach(function(a){a._getId()===t&&(a._removeFromMap(),n.markers.delete(a))})},Np.prototype.clear=function(){var t=this;this.markers.forEach(function(n){n._removeFromMap(),t.markers.delete(n)})},Np);function Np(t){this.markers=new Set,this.map=t}var _L=(ac.prototype.add=function(t,n){var a=this;return new Promise(function(h,y){if(a.userImages.has(t))h();else if(n instanceof HTMLImageElement||n instanceof ImageData)a.map._getMap().addImage(t,n),a.userImages.set(t,n),h();else if(typeof n=="string"){var b,u=void 0;u=/<svg/i.test(n)&&!/^data:/i.test(n)?"data:image/svg+xml;base64,"+window.btoa(n):n;var A=!1;a.map._sendRequest(u,"Image").then(function(k){if(!A)return k.blob()}).then(function(k){if(!A){clearTimeout(b);var G=new Image;G.onload=function(){a.map._getMap().addImage(t,G),a.userImages.set(t,G),h()},G.onerror=G.onabort=function(){y("Failed to load image into HTML element.")},G.src=URL.createObjectURL(k)}}).catch(function(){A||(clearTimeout(b),y("Failed to load image into HTML element."))}),b=setTimeout(function(){A=!0,y("Failed to load image within specified timeout: "+a.imageLoadTimeout+" ms.")},a.imageLoadTimeout)}})},ac.prototype.clear=function(){var t=this;this.userImages.forEach(function(n,a){t.map._getMap().removeImage(a)}),this.userImages.clear()},ac.prototype.getImageIds=function(){var t=[];return this.userImages.forEach(function(n,a){t.push(a)}),t},ac.prototype.createFromTemplate=function(t,n,a,h,y){a=a||"#1A73AA",h=h||"#fff";var b=F3(n,y);return b=b.replace(/{color}/g,a).replace(/{secondaryColor}/g,h).replace(/{text}/g,""),this.add(t,b)},ac.prototype.hasImage=function(t){return this.userImages.has(t)},ac.prototype.remove=function(t){this.map._getMap().removeImage(t),this.userImages.delete(t)},ac.prototype._restoreImages=function(){var t=this;this.userImages.forEach(function(n,a){t.map._getMap().hasImage(a)||t.map._getMap().addImage(a,n)})},ac);function ac(t){this.userImages=new Ua,this.imageLoadTimeout=5e3,this.map=t}var xL=(Do.prototype.add=function(t,n,a){a===void 0&&(a=!0);var h=n instanceof zn?n.getId():n;if(Array.isArray(t))for(var y=0,b=t;y<b.length;y++){var u=b[y];this._addLayer(u,h,a)}else this._addLayer(t,h,a)},Do.prototype._addLayer=function(t,n,a){if(n!==t.getId()&&this.layersById.has(n))if(this.layersById.has(t.getId())){var h=this.layers.findIndex(function(u){return u.getId()===t.getId()}),y=this.layers[h];a&&(this._removeMapboxLayers(y),this._addMapboxLayers(t,n)),this.map.events._disableLayerEvents(y),this.map.events._enableLayerEvents(t),this.layersById.set(t.getId(),t),this.layers.splice(h,1);var b=this.layers.findIndex(function(u){return u.getId()===n});this.layers.splice(b,0,t),y.onRemove(),t.onAdd(this.map)}else a&&this._addMapboxLayers(t,n),b=this.layers.findIndex(function(u){return u.getId()===n}),this.layers.splice(b,0,t),this.layersById.set(t.getId(),t),this.map.events._enableLayerEvents(t),t.onAdd(this.map);else this.layersById.has(t.getId())?(h=this.layers.findIndex(function(u){return u.getId()===t.getId()}),y=this.layers[h],a&&(this._removeMapboxLayers(y),this._addMapboxLayers(t,h+1)),this.map.events._disableLayerEvents(y),this.map.events._enableLayerEvents(t),this.layersById.set(t.getId(),t),this.layers[h]=t,y.onRemove()):(a&&this._addMapboxLayers(t),this.layersById.set(t.getId(),t),this.layers.push(t),this.map.events._enableLayerEvents(t)),t.onAdd(this.map)},Do.prototype._addMapboxLayers=function(t,n){if(!this.map._isReady())throw new Error("The layer '"+t.getId()+"' could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before adding a layer to it.");if(!(t instanceof xy)||t.getOptions().tileUrl){t instanceof um&&this.map._getMap().addSource(t._getSourceId(),t._buildSource());for(var a=this._getMapboxBefore(n),h=0,y=t._buildLayers();h<y.length;h++){var b=y[h];this.map._getMap().addLayer(b,a)}}},Do.prototype._removeMapboxLayers=function(t){for(var n=0,a=t._getLayerIds();n<a.length;n++){var h=a[n];this.map._getMap().getLayer(h)&&this.map._getMap().removeLayer(h)}t instanceof um&&this.map._getMap().getSource(t._getSourceId())&&this.map._getMap().removeSource(t._getSourceId())},Do.prototype._getMapboxBefore=function(t){if(typeof t=="string"){var n=this.layersById.get(t);if(!n)return;for(var a=0,h=n._getLayerIds();a<h.length;a++){var y=h[a];if(this.map._getMap().getLayer(y))return y}t=this.layers.findIndex(function(k){return k.getId()===t})+1}for(var b=t;b<this.layers.length;b++)for(var u=0,A=this.layers[b]._getLayerIds();u<A.length;u++)if(y=A[u],this.map._getMap().getLayer(y))return y},Do.prototype.clear=function(){for(var t=this.layers.length-1;0<=t;t--){var n=this.layers[t];this._removeMapboxLayers(n),this.map.events._disableLayerEvents(n),this.layersById.delete(n.getId()),this.layers.splice(t,1),n.onRemove()}},Do.prototype.getLayerById=function(t){return this.layersById.get(t)},Do.prototype.getLayers=function(){return this.layers.slice(0)},Do.prototype._getSourceIds=function(){for(var t=new Set,n=0,a=this.layers;n<a.length;n++)a[n]._getSourceIds().forEach(function(h){return t.add(h)});return t},Do.prototype.move=function(t,n){var a=t instanceof zn?t.getId():t,h=n instanceof zn?n.getId():n;if(!this.layersById.has(a))throw new Error("The layer '"+a+"' has not been added to the map and cannot be moved.");var y=this.layers.findIndex(function(u){return u.getId()===a});if(this._moveMapboxLayers(this.layers[y],h),t=this.layers[y],this.layers.splice(y,1),this.layersById.has(h)){var b=this.layers.findIndex(function(u){return u.getId()===h});this.layers.splice(b,0,t)}else this.layers.push(t)},Do.prototype._moveMapboxLayers=function(t,n){for(var a=this._getMapboxBefore(n),h=0,y=t._getLayerIds();h<y.length;h++){var b=y[h];this.map._getMap().moveLayer(b,a)}},Do.prototype.getRenderedShapes=function(t,n,a){var h,y,b=this;if(t=t||[-180,-85.0511,180,85.0511],Array.isArray(t)?t.length===4||t.length===6?h=this.map.positionsToPixels([hr.getSouthWest(t),hr.getNorthEast(t)]):t.length!==2&&t.length!==3||(h=this.map.positionsToPixels([t])[0]):h=this.map.positionsToPixels([t.coordinates])[0],n){y=[];for(var u=0,A=n=Array.isArray(n)?n:[n];u<A.length;u++){var k=A[u],G=k instanceof zn?k.getId():k;if(!this.layersById.has(G))throw new Error("The layer '"+G+"' has not been added to the map and its rendered features cannot be retrieved.");y.push.apply(y,this.layersById.get(G)._getLayerIds().filter(function(se){return!!b.map._getMap().getLayer(se)}))}}var W=this.map._getMap().queryRenderedFeatures(h,{layers:y,filter:a});return this.map.sources._mapFeaturesToShapes(W)},Do.prototype.remove=function(t,n){if(n===void 0&&(n=!0),Array.isArray(t))for(var a=0,h=t;a<h.length;a++){var y=h[a];this._removeLayer(y,n)}else this._removeLayer(t,n)},Do.prototype._removeLayer=function(t,n){var a=t instanceof zn?t.getId():t;if(!this.layersById.has(a))throw new Error("The layer '"+a+"' has not been added to the map and cannot be removed.");var h=this.layers.findIndex(function(b){return b.getId()===a}),y=this.layers[h];n&&this._removeMapboxLayers(y),this.layersById.delete(a),this.layers.splice(h,1),this.map.events._disableLayerEvents(y),y.onRemove()},Do);function Do(t){this.layersById=new Ua,this.layers=[],this.map=t}var wL=(nl.prototype.add=function(t){for(var n=0,a=t=Array.isArray(t)?t:[t];n<a.length;n++){var h=a[n];this.popups.has(h)||(this.popups.add(h),h.attach(this.map))}},nl.prototype.clear=function(){var t=this;this.popups.forEach(function(n){t.popups.delete(n),n.remove()})},nl.prototype.remove=function(t){for(var n=0,a=t=Array.isArray(t)?t:[t];n<a.length;n++){var h=a[n];this.popups.has(h)&&(this.popups.delete(h),h.remove())}},nl.prototype.getPopups=function(){return Array.from(this.popups)},nl.prototype._getCollectionDiv=function(){var t=this.map.getMapContainer().querySelector("."+nl.Css.collection);return t||((t=document.createElement("div")).classList.add(nl.Css.collection),t.setAttribute("aria-label","Map Information"),this.map.getMapContainer().appendChild(t)),t},nl.prototype._addDraggedPopup=function(t){this.draggedPopups.size===0&&(this.map.getMapContainer().addEventListener("mousemove",this._onDrag),this.map.getMapContainer().addEventListener("touchmove",this._onDrag),this.map.getMapContainer().addEventListener("mouseup",this._onUp),this.map.getMapContainer().addEventListener("touchend",this._onUp)),this.draggedPopups.add(t)},nl.Css={collection:"popup-collection-container"},nl);function nl(t){var n=this;this._onDrag=function(a){var h,y;a.type==="mousemove"?(h=(a=a).clientX,y=a.clientY):a.type==="touchmove"&&(h=(a=a).touches[0].clientX,y=a.touches[0].clientY),n.draggedPopups.forEach(function(b){b._dragToPixel([h,y])})},this._onUp=function(){n.map.getMapContainer().removeEventListener("mousemove",n._onDrag),n.map.getMapContainer().removeEventListener("touchmove",n._onDrag),n.map.getMapContainer().removeEventListener("mouseup",n._onUp),n.map.getMapContainer().removeEventListener("touchend",n._onUp),n.draggedPopups.forEach(function(a){n.draggedPopups.delete(a),a._onUp()})},this.map=t,this.popups=new Set,this.draggedPopups=new Set}var bL=(Va.prototype.add=function(t,n){if(n===void 0&&(n=!0),Array.isArray(t))for(var a=0,h=t;a<h.length;a++){var y=h[a];this._addSource(y,n)}else this._addSource(t,n)},Va.prototype.getRenderedShapes=function(t,n,a){var h=typeof t=="string"?t:t.getId(),y=this.map._getMap().querySourceFeatures(h,{sourceLayer:a,filter:n});return this.map.sources._mapFeaturesToShapes(y,!0,this.sources.get(h))},Va.prototype._buildSources=function(){var t={};return this.sources.forEach(function(n){t[n.getId()]=n._buildSource()}),t},Va.prototype.clear=function(){var t=this;this.sources.forEach(function(n){t.remove(n)})},Va.prototype.getById=function(t){return this.sources.get(t)},Va.prototype.getSources=function(){return Array.from(this.sources.values())},Va.prototype.isSourceLoaded=function(t){var n=t instanceof ai?t.getId():t;return this.map._getMap().isSourceLoaded(n)},Va.prototype.remove=function(t,n){if(n===void 0&&(n=!0),Array.isArray(t))for(var a=0,h=t;a<h.length;a++){var y=h[a];this._removeSource(y,n)}else this._removeSource(t,n)},Va.prototype._removeSource=function(t,n){var a=t instanceof ai?t.getId():t;if(this.sources.has(a)){if(this.map._getMap().getSource(a)&&n&&this.map._getMap().removeSource(a),this.map._getMap().getSource(a)&&n)throw new Error("One or more layers have a dependency on the source '"+a+"'");return this.sources.get(a)._setMap(null),void this.sources.delete(a)}throw new Error("'"+a+"' is not added to the map")},Va.prototype._addSource=function(t,n){if(this.sources.has(t.getId())){if(n)throw new Error("'"+t.getId()+"' is already added to the map");this.sources.get(t.getId())._setMap(null),this.sources.delete(t.getId())}if(n){if(!this.map._isReady())throw new Error("The source '"+t.getId()+"' could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before adding a source to it.");this.map._getMap().addSource(t.getId(),t._buildSource())}this.sources.set(t.getId(),t),t._setMap(this.map)},Va.prototype._mapFeaturesToShapes=function(t,n,a){for(var h=[],y=0,b=t;y<b.length;y++){var u=b[y];if((a||typeof u.source=="string")&&typeof u.properties[wi._shapeIdPropName]=="string"){var A=a||this.sources.get(u.source);if(A instanceof Qs){var k=A.getShapeById(u.properties[wi._shapeIdPropName]);if(k instanceof wi){h.push(k);continue}}}n||h.push(u)}return h},Va);function Va(t){this.map=t,this.sources=new Ua}var G_,CL=(ze(sS,G_=sr),sS);function sS(){var t=G_!==null&&G_.apply(this,arguments)||this;return t.duration=1e3,t.type="jump",t}var H_,SL=(ze(lS,H_=sr),lS);function lS(){var t=H_!==null&&H_.apply(this,arguments)||this;return t.bottom=0,t.left=0,t.right=0,t.top=0,t}var Gy,TL=(ze(W_,Gy=sr),W_.prototype.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,h=t;a<h.length;a++){var y=h[a];y&&typeof y.padding=="number"&&(y.padding={top:y.padding,bottom:y.padding,left:y.padding,right:y.padding})}return Gy.prototype.merge.apply(this,t)},W_);function W_(){var t=Gy!==null&&Gy.apply(this,arguments)||this;return t.bounds=[-180,-89,180,90],t.maxBounds=void 0,t.maxZoom=20,t.offset=new Qi(0,0),t.padding=new SL,t}var Y_,EL=(ze(uS,Y_=sr),uS);function uS(){var t=Y_!==null&&Y_.apply(this,arguments)||this;return t.zoom=1,t.center=new Po(0,0),t.centerOffset=new Qi(0,0),t.bearing=0,t.pitch=0,t.minZoom=1,t.maxZoom=20,t.maxBounds=void 0,t}var K_,Pm=(ze(cS,K_=sr),cS);function cS(){var t=K_!==null&&K_.apply(this,arguments)||this;return t.name=void 0,t.before=void 0,t.minZoom=1,t.maxZoom=20,t.overwrite=!1,t.defer=!1,t.opacity=1,t}var $_,IL=(ze(pS,$_=Pm),pS);function pS(){var t=$_!==null&&$_.apply(this,arguments)||this;return t.color="rgba(0,0,0,.5)",t.outlineColor="#000",t.radius=1,t.outlineWidth=5,t.name="default-circles",t}var X_,kL=(ze(hS,X_=Pm),hS);function hS(){var t=X_!==null&&X_.apply(this,arguments)||this;return t.cap="butt",t.join="miter",t.name="default-linestrings",t.color="#000",t.width=1,t}var J_,ML=(ze(dS,J_=Pm),dS);function dS(){var t=J_!==null&&J_.apply(this,arguments)||this;return t.iconSize=1,t.fontSize=14,t.fontColor="#000",t.textFont="SegoeUi-Regular",t.cluster=!0,t.clusterIcon=void 0,t.textOffset=[0,0],t.name="default-pins",t.icon="pin-darkblue",t.title="",t}var Q_,AL=(ze(fS,Q_=Pm),fS);function fS(){var t=Q_!==null&&Q_.apply(this,arguments)||this;return t.color="rgba(0,0,0,.5)",t.outlineColor="#000",t.name="default-polygons",t}var ex,LL=(ze(mS,ex=Pm),mS);function mS(){var t=ex!==null&&ex.apply(this,arguments)||this;return t.name="default-raster",t}var tx,PL=(ze(gS,tx=sr),gS);function gS(){var t=tx!==null&&tx.apply(this,arguments)||this;return t.anchor="map",t.color="#FFFFFF",t.intensity=.5,t.position=[1.15,210,30],t}var Hy,yS=(ze(rx,Hy=sr),rx.prototype.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,h=t;a<h.length;a++){var y=h[a];y&&(y.hasOwnProperty("view")?y.userRegion=y.view:y.hasOwnProperty("userRegion")&&(y.view=y.userRegion),typeof y.language=="string"&&(y.language=wy.getCode(y.language)))}return Hy.prototype.merge.apply(this,t)},rx);function rx(){var t=Hy!==null&&Hy.apply(this,arguments)||this;return t.autoResize=!0,t.language=k3(),t.light=new PL,t.preserveDrawingBuffer=!1,t.renderWorldCopies=!0,t.showBuildingModels=!1,t.showFeedbackLink=!0,t.showLogo=!0,t.showTileBoundaries=!1,t.style="road",t.view=L3(),t.userRegion=t.view,t}var nx,vS=(ze(_S,nx=sr),_S);function _S(){var t=nx!==null&&nx.apply(this,arguments)||this;return t.flow="none",t.incidents=!1,t}var Wy,ix=(ze(Yy,Wy=sr),Yy.prototype.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,h=t;a<h.length;a++){var y=h[a];y&&(y.authOptions?typeof y.authOptions.subscriptionKey=="string"&&(y.subscriptionKey=y["subscription-key"]=y.authOptions.subscriptionKey):typeof y.subscriptionKey=="string"?(y["subscription-key"]=y.subscriptionKey,y.authOptions={authType:d.AuthenticationType.subscriptionKey,subscriptionKey:y.subscriptionKey}):typeof y["subscription-key"]=="string"&&(y.subscriptionKey=y["subscription-key"],y.authOptions={authType:d.AuthenticationType.subscriptionKey,subscriptionKey:y["subscription-key"]}),typeof y.sessionId=="string"?y["session-id"]=y.sessionId:typeof y["session-id"]=="string"&&(y.sessionId=y["session-id"]),typeof y.disableTelemetry=="boolean"?y["disable-telemetry"]=y.disableTelemetry:typeof y["disable-telemetry"]=="boolean"&&(y.disableTelemetry=y["disable-telemetry"]),typeof y.enableAccessibility=="boolean"?y["enable-accessibility"]=y.enableAccessibility:typeof y["enable-accessibility"]=="boolean"&&(y.enableAccessibility=y["enable-accessibility"]))}var b=Wy.prototype.merge.apply(this,t);return b.authOptions.authType!==d.AuthenticationType.subscriptionKey&&(b["subscription-key"]=b.subscriptionKey=void 0),b},Yy._cloneCustomizer=function(t){if(typeof t=="object")return Object.assign({},t)},Yy);function Yy(){var t=Wy!==null&&Wy.apply(this,arguments)||this;return t.authOptions=E3(),t.disableTelemetry=!1,t["disable-telemetry"]=t.disableTelemetry,t.domain=d_(),t.styleDefinitionsPath=I3(),t.enableAccessibility=!0,t["enable-accessibility"]=t.enableAccessibility,t.refreshExpiredTiles=!0,t.subscriptionKey=A3(),t["subscription-key"]=t.subscriptionKey,t.sessionId=M3(),t["session-id"]=t.sessionId,t.transformRequest=void 0,t}var DL=function(){this.version=8,this.sprite="",this.glyphs="",this.light={},this.sources={},this.layers=[]},zL=(Ky.prototype.build=function(t){var n=new DL;if(this.glyphs!=null&&(n.glyphs=this.glyphs),this.sprite!=null&&(n.sprite=this.sprite),t.light!=null&&Object.assign(n.light,t.light),this.map.sources!=null&&(n.sources=this.map.sources._buildSources()),this.map.layers!=null)for(var a=0,h=this.map.layers.getLayers();a<h.length;a++){var y=h[a];n.layers=n.layers.concat(y._buildLayers()),y instanceof um&&(n.sources[y._getSourceId()]=y._buildSource())}return n},Ky.prototype.setGlyphs=function(t){this.glyphs=t},Ky.prototype.setSprite=function(t){this.sprite=t},Ky);function Ky(t){this.sprite="",this.glyphs="{fontstack}/{range}",this.map=t}var xS,NL=(ze(Dm,xS=zn),Dm.prototype._buildLayers=function(){return this.layers},Dm.prototype._getLayerIds=function(){return this.layers.map(function(t){return t.id})},Dm.prototype._getSourceIds=function(){for(var t=new Set,n=0,a=this.layers;n<a.length;n++){var h=a[n];typeof h.source=="string"?t.add(h.source):h.source&&t.add(h.id)}return t},Dm);function Dm(t,n){var a=xS.call(this,n)||this;return a.layers=t,a}var wS,OL=(ze($y,wS=ai),$y.prototype._buildSource=function(){return this.source},$y.prototype._modifySource=function(t,n){var a=t.tiles.map(function(h){return typeof h=="string"?h:new gi({domain:Ze,path:h.path,queryParams:ot(ot({},n),h.queryParams)}).toString()});return t.tiles=a,t},$y);function $y(t,n,a){var h=wS.call(this,t)||this;return h.source=h._modifySource(n,a),h}var RL=(xa.prototype.initialize=function(){var t=this;return this.initPromise||(this.initPromise=this.request(oe,this._serviceOptions.styleDefinitionsPath).then(function(n){t.definitions=n}).catch(function(n){throw new Error("Failed to retrieve the style definitions: "+n)})),this.initPromise},xa.prototype.getStyleComponents=function(t){return Zr(this,void 0,void 0,function(){var n,a,h,y=this;return yr(this,function(b){return n=new Set,a=this.lookUp(t),h=a.layerGroups.map(function(u){return Zr(y,void 0,void 0,function(){var A,k,G,W,se,ne,Ee;return yr(this,function(Ge){switch(Ge.label){case 0:return A=u.layerPath,k=u.name,G={language:t.language},t.view&&(G.view=encodeURIComponent(t.view)),[4,this.buildComponent(k,A,G,n)];case 1:for(W=Ge.sent(),se=0,ne=W.layer.layers;se<ne.length;se++)(Ee=ne[se]).type==="fill-extrusion"&&(Ee.layout=Ee.layout||{},Ee.layout.visibility=t.showBuildingModels?"visible":"none");return[2,W]}})})}),[2,Promise.all(h)]})})},xa.prototype.getFlowComponent=function(t,n){return Zr(this,void 0,void 0,function(){var a;return yr(this,function(h){return a=this.getFlowPath(t,n),[2,this.buildComponent("flow",a)]})})},xa.prototype.getCopyrightCaption=function(t){var n=this.lookUp(t).copyright.join(" ");return t.showLogo||(n+=" 2019 Microsoft"),n},xa.prototype.getSprite=function(t){var n=this.lookUp(t);return new gi({domain:this.definitions.domain,path:n.spritePath}).toString()},xa.prototype.getGlyphs=function(t){var n=this.lookUp(t);return new gi({domain:this.definitions.domain,path:n.glyphsPath}).toString()},xa.prototype.getFlowPath=function(t,n){return this.lookUp(t).flowPaths[n.flow]},xa.prototype.getTheme=function(t){return this.lookUp(t).theme.toLowerCase()||"light"},xa.prototype.getDef=function(){return this.definitions},xa.prototype.lookUp=function(t){for(var n,a=t.style||this.definitions.defaultStyle,h=0,y=this.definitions.styles;h<y.length;h++){var b=y[h];if(b.name===a)return b;b.name===this.definitions.defaultStyle&&(n=b)}return n},xa.prototype.request=function(t,n){return Zr(this,void 0,void 0,function(){return yr(this,function(a){return[2,new gi({domain:t,path:n}).get()]})})},xa.prototype.buildComponent=function(t,n,a,h){return Zr(this,void 0,void 0,function(){return yr(this,function(y){return[2,this.request(this.definitions.domain,n).then(function(b){var u=new NL(b.layers,t),A=[],k=b.sources;for(var G in k)if(k.hasOwnProperty(G)){var W=k[G],se=W.name||G;if(h){if(h.has(se))continue;h.add(se)}A.push(new OL(se,W,a))}return{layer:u,sources:A}})]})})},xa);function xa(t){this._serviceOptions=t}var bS=(Bt.prototype.getCanvas=function(){return this.map.getCanvas()},Bt.prototype.getCanvasContainer=function(){return this.map.getCanvasContainer()},Bt.prototype.getMapContainer=function(){return this.map.getContainer()},Bt.prototype.getServiceOptions=function(){return Dr(this.serviceOptions,ix._cloneCustomizer)},Bt.prototype.setServiceOptions=function(t){this.serviceOptions=new ix().merge(this.serviceOptions,t),this.serviceOptions["enable-accessibility"]?this.accessibleMapDelegate.addToMap():this.accessibleMapDelegate.removeFromMap()},Bt.prototype.setCamera=function(t,n){var a,h;if(n===void 0&&(n=!1),"padding"in t||"offset"in t||"bounds"in t){var y=new TL().merge({maxZoom:this.getCamera().maxZoom},t),b=this._generateSafeBounds(y.bounds);if(!(a=this.map.cameraForBounds(b,{padding:y.padding,offset:y.offset,maxZoom:y.maxZoom})))throw new Error("The map cannot be fit to the current canvas with the given CameraBoundsOptions.");this.map.setMaxZoom(y.maxZoom),h=this._generateSafeBounds(y.maxBounds)}else{var u=new EL().merge(this.getCamera(),t);if(u.centerOffset&&2<=u.centerOffset.length){var A=u.centerOffset,k=tm([u.center],u.zoom);k[0][0]+=A[0],k[0][1]+=A[1],u.center=S1(k,u.zoom)[0]}a={center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch,around:void 0},this.map.setMinZoom(u.minZoom),this.map.setMaxZoom(u.maxZoom),h=this._generateSafeBounds(u.maxBounds)}h?this.map.setMaxBounds(h):this.map.setMaxBounds(null);var G=new CL().merge(t),W={duration:G.duration,easing:function(ne){return ne},offset:[0,0],animate:!0},se={fromControl:n};G.type==="jump"?this.map.jumpTo(a,se):G.type==="ease"?this.map.easeTo(ot(ot({},a),W),se):G.type==="fly"&&this.map.flyTo(ot(ot({},a),W),se)},Bt.prototype.setCameraBounds=function(t){this.setCamera(t)},Bt.prototype.getCamera=function(){var t=this.map.getBounds().getSouthWest().toArray(),n=this.map.getBounds().getNorthEast().toArray();return{zoom:this.map.getZoom(),center:this.map.getCenter().toArray(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),bounds:new hr(t,n),minZoom:this.map.getMinZoom(),maxZoom:this.map.getMaxZoom()}},Bt.prototype.setStyle=function(t){delete t.preserveDrawingBuffer;var n=new yS().merge(this.styleOptions,t);n.autoResize!==this.styleOptions.autoResize&&this._setAutoResize(n.autoResize),n.language!==this.styleOptions.language&&(this.localizedStringsPromise=wy.getStrings(n.language)),n.renderWorldCopies!==this.styleOptions.renderWorldCopies&&this.map.setRenderWorldCopies(n.renderWorldCopies),n.showFeedbackLink!==this.styleOptions.showFeedbackLink&&this.copyrightControl.setOptions({showFeedbackLink:n.showFeedbackLink}),n.showLogo&&!this.logoControl?(this.logoControl=new YC,this.controls.add(this.logoControl,{position:d.ControlPosition.NonFixed})):!n.showLogo&&this.logoControl&&(this.controls.remove(this.logoControl),delete this.logoControl),n.showTileBoundaries!==this.styleOptions.showTileBoundaries&&(this.map.showTileBoundaries=n.showTileBoundaries),this._setStyleComponents(n),this.styleOptions=n},Bt.prototype.getStyle=function(){return vi(this.styleOptions)},Bt.prototype.addIcon=function(t,n){this.imageSprite.add(t,n)},Bt.prototype.addPins=function(t,n){var a,h=new ML().merge(n),y=this.layers.getLayerById(h.name),b=!1;if(y||(b=!0,y=new t_(h.name+"-source",h.name,{source:h.name+"-source",minZoom:h.minZoom,maxZoom:h.maxZoom,iconOptions:{anchor:"center",size:h.iconSize,image:["case",["has","icon"],["get","icon"],h.icon],ignorePlacement:!h.cluster,opacity:h.opacity},textOptions:{anchor:"center",textField:["case",["has","point_count"],["to-string",["get","point_count"]],["has","title"],["to-string",["get","title"]],h.title],font:["case",["has","point_count"],["literal",["StandardFontCondensed-Bold"]],["literal",[h.textFont]]],size:["case",["has","point_count"],20,h.fontSize],ignorePlacement:!h.cluster,opacity:h.opacity,offset:["case",["has","point_count"],["literal",[.5,-.45]],["literal",[h.textOffset[0]/16,h.textOffset[1]/16]]],color:h.fontColor}})),!(y instanceof t_))throw new Error("A layer with name '"+h.name+"' already exists but it is not a SymbolLayer.A SymbolLayer should be used for rendering pins.");var u=y.getSource();typeof u=="string"?(a=u,u=this.sources.getById(a)):a=u.getId();var A=!1;if(u||(A=!0,u=new Qs(a,{cluster:h.cluster})),!(u instanceof Qs))throw new Error("The source with name '"+a+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");A&&this.sources.add(u),b&&this.layers.add(y,h.before);var k=new xp(t);h.defer?(h.overwrite&&u._clearNoUpdate(),u._addNoUpdate(k)):h.overwrite?u.setShapes(k):u.add(k)},Bt.prototype.addCircles=function(t,n){var a,h=new IL().merge(n),y=this.layers.getLayerById(h.name),b=!1;if(y||(b=!0,y=new F1(h.name+"-source",h.name,{source:h.name+"-source",minZoom:h.minZoom,maxZoom:h.maxZoom,opacity:h.opacity,radius:["case",["has","radius"],["get","radius"],h.radius],color:["case",["has","color"],["get","color"],h.color],strokeColor:["case",["has","outlineColor"],["get","outlineColor"],h.outlineColor],strokeWidth:["case",["has","outlineWidth"],["get","outlineWidth"],h.outlineWidth]})),!(y instanceof F1))throw new Error("A layer with name '"+h.name+"' already exists but it is not a BubbleLayer.A BubbleLayer should be used for rendering circles.");var u=y.getSource();typeof u=="string"?(a=u,u=this.sources.getById(a)):a=u.getId();var A=!1;if(u||(A=!0,u=new Qs(a)),!(u instanceof Qs))throw new Error("The source with name '"+a+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");A&&this.sources.add(u),b&&this.layers.add(y,h.before);var k=new xp(t);h.defer?(h.overwrite&&u._clearNoUpdate(),u._addNoUpdate(k)):h.overwrite?u.setShapes(k):u.add(k)},Bt.prototype.addLinestrings=function(t,n){var a,h=new kL().merge(n),y=this.layers.getLayerById(h.name),b=!1;if(y||(b=!0,y=new Y1(h.name+"-source",h.name,{source:h.name+"-source",minZoom:h.minZoom,maxZoom:h.maxZoom,lineCap:h.cap,lineJoin:h.join,strokeOpacity:h.opacity,strokeColor:["case",["has","color"],["get","color"],h.color],strokeWidth:["case",["has","width"],["get","width"],h.width]})),!(y instanceof Y1))throw new Error("A layer with name '"+h.name+"' already exists but it is not a LineLayer.A LineLayer should be used for rendering linestrings.");var u=y.getSource();typeof u=="string"?(a=u,u=this.sources.getById(a)):a=u.getId();var A=!1;if(u||(A=!0,u=new Qs(a)),!(u instanceof Qs))throw new Error("The source with name '"+a+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");A&&this.sources.add(u),b&&this.layers.add(y,h.before);var k=new xp(t);h.defer?(h.overwrite&&u._clearNoUpdate(),u._addNoUpdate(k)):h.overwrite?u.setShapes(k):u.add(k)},Bt.prototype.addPolygons=function(t,n){var a,h=new AL().merge(n),y=this.layers.getLayerById(h.name),b=!1;if(y||(b=!0,y=new X1(h.name+"-source",h.name,{source:h.name+"-source",minZoom:h.minZoom,maxZoom:h.maxZoom,fillOpacity:h.opacity,fillColor:["case",["has","color"],["get","color"],h.color]})),!(y instanceof X1))throw new Error("A layer with name '"+h.name+"' already exists but it is not a PolygonLayer.A PolygonLayer should be used for rendering linestrings.");var u=y.getSource();typeof u=="string"?(a=u,u=this.sources.getById(a)):a=u.getId();var A=!1;if(u||(A=!0,u=new Qs(a)),!(u instanceof Qs))throw new Error("The source with name '"+a+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");A&&this.sources.add(u),b&&this.layers.add(y,h.before);var k=new xp(t);h.defer?(h.overwrite&&u._clearNoUpdate(),u._addNoUpdate(k)):h.overwrite?u.setShapes(k):u.add(k)},Bt.prototype.addRaster=function(t,n){var a,h=new LL().merge(n),y=this.layers.getLayerById(h.name),b=!1;if(y||(b=!0,y=new xy({maxZoom:h.maxZoom,minZoom:h.minZoom,opacity:h.opacity,tileSize:256,tileUrl:"{subdomain}"},h.name)),!(y instanceof xy))throw new Error("A layer with name '"+h.name+"' already exists but it is not a TileLayer.A TileLayer should be used for rendering raster images.");if(y.getOptions().tileUrl!=="{subdomain}")throw new Error("A TileLayer with name '"+h.name+"' already exists but was configured for a single tile url [default for new TileLayer(...)].");(a=!h.overwrite&&y.getOptions().subdomains||[]).push.apply(a,t),y._setOptionsNoUpdate({subdomains:a}),h.defer?b&&this.layers.add(y,h.before,!1):this.layers.add(y,h.before)},Bt.prototype.getLayers=function(){return this.layers.getLayers().map(function(t){return t.getId()})},Bt.prototype.removeLayers=function(t){for(var n=0,a=t;n<a.length;n++){var h=a[n];if(this.layers.getLayerById(h)){this.layers.remove(h);var y=h+"-source";this.sources.getById(y)&&this.sources.remove(y)}}},Bt.prototype.addHtml=function(t,n){t.id||(t.id="marker_"+gp());var a=new s_({htmlContent:t});return this.markers.add(a,n),t.id},Bt.prototype.removeHtml=function(t){this.markers.remove(t)},Bt.prototype.addEventListener=function(t,n,a){this.events._addLegacy(t,n,a)},Bt.prototype.removeEventListener=function(t,n,a){this.events._removeLegacy(t,n,a)},Bt.prototype.setUserInteraction=function(t){this.userInteractionDelegate.setOptions(t)},Bt.prototype.getUserInteraction=function(){return this.userInteractionDelegate.getOptions()},Bt.prototype.addControl=function(t,n){this.controls.add(t,n)},Bt.prototype.removeControl=function(t){this.controls.remove(t)},Bt.prototype.setTraffic=function(t){var n=this.trafficOptions.incidents,a=this.trafficOptions.flow;if(this.trafficOptions=new vS().merge(this.trafficOptions,t),this.trafficOptions.incidents?n||this.incidentDelegate.addToMap():this.incidentDelegate.removeFromMap(),this.trafficOptions.flow&&this.trafficOptions.flow!=="none")try{this.flowDelegate.addToMap()}catch(h){throw this.trafficOptions.flow=a,h}else this.flowDelegate.removeFromMap()},Bt.prototype.getTraffic=function(){return vi(this.trafficOptions)},Bt.prototype.remove=function(){this.dispose()},Bt.prototype.clear=function(){this.popups.clear(),this.layers.clear(),this.sources.clear(),this.markers.clear()},Bt.prototype.dispose=function(){for(this.clear(),this.map.remove(),this.removed=!0;this.getMapContainer().firstChild;){var t=this.getMapContainer().firstChild;this.getMapContainer().removeChild(t)}},Bt.prototype.resize=function(t,n,a){if(typeof t!="number"&&typeof t!="string"||typeof n!="number"&&typeof n!="string")a=t;else{var h=t;this.getMapContainer().style.height=typeof h=="number"?h+"px":h,this.getMapContainer().style.width=typeof n=="number"?n+"px":n}var y=this.getMapContainer().style.overflow;this.getMapContainer().style.overflow="hidden",this.map.resize(a),this.getMapContainer().style.overflow=y},Bt.prototype.pixelsToPositions=function(t){for(var n=[],a=0,h=t;a<h.length;a++){var y=h[a],b=this.map.unproject(y);n.push(new Po(b.lng,b.lat))}return n},Bt.prototype.positionsToPixels=function(t){for(var n=[],a=0,h=t;a<h.length;a++){var y=h[a],b=this.map.project(y);n.push(new Qi(b.x,b.y))}return n},Bt.prototype.areTilesLoaded=function(){return this.map.areTilesLoaded()},Bt.prototype.stop=function(){this.map.stop()},Bt.prototype._getMap=function(){return this.map},Bt.prototype._rebuildStyle=function(){this.map.setStyle(this.styleBuilder.build(this.styleOptions)),this.imageSprite._restoreImages()},Bt.prototype._isLoaded=function(){return this.loaded},Bt.prototype._isReady=function(){return this.ready},Bt.prototype._getLocalizedStrings=function(){return this.localizedStringsPromise},Bt.prototype._sendRequest=function(t,n,a){var h;return typeof this.serviceOptions.transformRequest=="function"&&(h=this.serviceOptions.transformRequest(t,n)),h?fetch(h.url||t,{credentials:h.credentials,headers:ot(ot({},a),h.headers),method:"GET",mode:"cors"}):fetch(t,{headers:a,method:"GET",mode:"cors"})},Bt.prototype._setAutoResize=function(t){t?window.addEventListener("resize",this._windowResizeCallback):window.removeEventListener("resize",this._windowResizeCallback)},Bt.prototype._setStyleComponents=function(t){var n=this;this.styles.getStyleComponents(t).then(function(a){if(!n.removed){n.copyrightControl.setOptions({copyrightMessage:n.styles.getCopyrightCaption(t)}),n.styleBuilder.setGlyphs(n.styles.getGlyphs(t)),n.styleBuilder.setSprite(n.styles.getSprite(t));for(var h=new Set,y=new Set,b=0,u=a;b<u.length;b++){var A=u[b];h.add(A.layer.getId());for(var k=0,G=A.sources;k<G.length;k++){var W=G[k];y.add(W.getId())}}n.styleLayerIds.forEach(function(qt){h.has(qt)||(n.layers.getLayerById(qt)&&n.layers.remove(qt,!1),n.styleLayerIds.delete(qt))});for(var se=function(qt){var tn=a[qt].layer;if(n.styleLayerIds.add(tn.getId()),n.layers.getLayerById(tn.getId()))n.layers.add(tn,void 0,!1);else if(qt===0)n.layers.add(tn,n.layers.getLayers()[0],!1);else{var ho=a[qt-1].layer,un=n.layers.getLayers(),rn=un.findIndex(function(qa){return qa.getId()===ho.getId()});n.layers.add(tn,un[rn+1],!1)}},ne=0;ne<a.length;ne++)se(ne);var Ee=n.layers._getSourceIds();n.styleSourceIds.forEach(function(qt){Ee.has(qt)||y.has(qt)||(n.sources.getById(qt)&&n.sources.remove(qt,!1),n.styleSourceIds.delete(qt))});for(var Ge=0,pt=a;Ge<pt.length;Ge++){A=pt[Ge],n.sources.add(A.sources,!1);for(var Wt=0,nt=A.sources;Wt<nt.length;Wt++)W=nt[Wt],n.styleSourceIds.add(W.getId())}n._rebuildStyle()}})},Bt.prototype._updateGlobalDefaults=function(t){t&&(t.authOptions&&!m_()&&P3(t.authOptions),t.domain&&!j3()&&D3(t.domain),t.styleDefinitionsPath&&!U3()&&z3(t.styleDefinitionsPath),!t.subscriptionKey&&!t["subscription-key"]||m_()||R3(t.subscriptionKey||t["subscription-key"]),!t.sessionId&&!t["session-id"]||q3()||O3(t.sessionId||t["session-id"]),t.language&&!V3()&&N3(t.language),!t.userRegion&&!t.view||Z3()||B3(t.userRegion||t.view))},Bt.prototype._generateSafeBounds=function(t){if(t){var n=hr.getSouth(t),a=hr.getWest(t),h=hr.getNorth(t),y=hr.getEast(t);if(isNaN(n)||isNaN(a)||isNaN(h)||isNaN(y))throw new Error("The bounds specified are invalid: ["+t+"]");for(;y<a;)y+=360;return new hr([a,n,y,h])}return t},Bt.prototype._detectHighContrast=function(){var t,n;switch(n6.getHighContrastMode()){case"invert":t=Bt.Css.hcLight,n="high_contrast_dark";break;case"light":t=Bt.Css.hcLight,n="grayscale_light";break;case"dark":t=Bt.Css.hcDark,n="high_contrast_dark"}t&&this.map.getContainer().classList.add(t),n&&this.styleOptions.style==="road"&&(this.styleOptions.style=n)},Bt.Css={canvasContainer:"atlas-map-canvas-container",canvas:"atlas-map-canvas",container:"atlas-map",hcDark:"high-contrast-dark",hcLight:"high-contrast-light"},Bt);function Bt(t,n){var a=this;this.styleLayerIds=new Set,this.styleSourceIds=new Set,this.removed=!1,this.loaded=!1,this.ready=!1,this._windowResizeCallback=function(){return a.resize()};var h=!0;this._updateGlobalDefaults(n),this.serviceOptions=new ix().merge(n),this.styleOptions=new yS().merge(n),this.trafficOptions=new vS,this.styles=new RL(this.serviceOptions),this.insights=new $A(this.serviceOptions),this.serviceOptions.authOptions.subscriptionKey&&(this.serviceOptions.authOptions.subscriptionKey=encodeURIComponent(this.serviceOptions.authOptions.subscriptionKey));var y,b={attributionControl:!1,container:t,preserveDrawingBuffer:this.styleOptions.preserveDrawingBuffer,refreshExpiredTiles:this.serviceOptions.refreshExpiredTiles,renderWorldCopies:this.styleOptions.renderWorldCopies,trackResize:!1,transformRequest:function(se,ne){var Ee={url:se};if(ne==="Tile"&&se.includes(Ze)){if(a.insights&&a.insights.trackEvent({name:"TileLoad"}),gi.protoRegEx.test(a.serviceOptions.domain)){var Ge=se.indexOf(Ze);Ee.url=a.serviceOptions.domain+se.substring(Ge+Ze.length)}else Ee.url=se.replace(Ze,a.serviceOptions.domain);a.authentication.signRequest(Ee)}return a.serviceOptions.transformRequest&&e6(Ee,a.serviceOptions.transformRequest(Ee.url,ne)),Ee}};y=this.serviceOptions.authOptions.clientId?this.serviceOptions.authOptions.clientId:this.serviceOptions.authOptions.subscriptionKey?this.serviceOptions.authOptions.subscriptionKey.replace(/.(?=.{3,}$)/g,"*"):"invalid-setting",this.insights&&this.insights.setAuthenticatedUserContext(this.serviceOptions.sessionId,y);try{var u=new I.Map(b);this.map=u,this.authentication=new fL(this),this.controls=new mL(this),this.events=new yL(this),this.imageSprite=new _L(this),this.layers=new xL(this),this.markers=new vL(this),this.sources=new bL(this),this.popups=new wL(this),this.styleBuilder=new zL(this),this.map.getContainer().classList.add(Bt.Css.container),this.map.getCanvasContainer().classList.add(Bt.Css.canvasContainer),this.map.getCanvas().classList.add(Bt.Css.canvas),this._detectHighContrast(),this.copyrightControl=new XA({showFeedbackLink:this.styleOptions.showFeedbackLink}),this.controls.add(this.copyrightControl,{position:d.ControlPosition.NonFixed}),this.styleOptions.showLogo&&(this.logoControl=new YC,this.controls.add(this.logoControl,{position:d.ControlPosition.NonFixed}));var A=this.authentication.initialize();if(this.removed)return;var k=function(){a.loaded=!0,a.map.off("load",k)};this.map.on("load",k);var G=function(){a.ready=!0,a.map.off("styledata",G);var se={map:a,type:"ready"};a.events.invoke("ready",se)};this.map.on("styledata",G),this._setAutoResize(this.styleOptions.autoResize),this.map.showTileBoundaries=this.styleOptions.showTileBoundaries,this.localizedStringsPromise=wy.getStrings(this.styleOptions.language);var W=this.styles.initialize();Promise.all([A,W]).then(function(){if(!a.removed){if(!a.authentication.getToken())throw new Error("AuthenticationManager finished initializing, but no token is available");a.serviceOptions["enable-accessibility"]&&a.accessibleMapDelegate.addToMap(),a._setStyleComponents(a.styleOptions)}}).catch(function(se){var ne=se instanceof Error?se:new Error(se);a.insights&&a.insights.trackException({error:ne});var Ee={map:a,type:"error",error:ne};a.events.invoke("error",Ee)}),this.setCamera(ot(ot({},n),{type:"jump",duration:0})),this.incidentDelegate=new lL(this),this.flowDelegate=new nL(this),this.accessibleMapDelegate=new rL(this),this.userInteractionDelegate=new hL(this,n),this.userInteractionDelegate.addToMap()}catch(se){throw h=!1,this.insights&&this.insights.trackException({error:se instanceof Error?se:new Error(se)}),se}finally{this.insights&&(this.insights.trackEvent({name:"MapLoad"},{success:h,supported:f_(!1),supportedWithPerformance:f_(!0)}),this.insights.flush())}}var BL=(yn.applyTemplate=function(t,n){var a=this,h=document.createElement("div");if(h.classList.add(yn.Css.template),t){typeof(n=n||{}).singleDescription!="boolean"&&(n.singleDescription=!0),n.sandboxContent=typeof n.sandboxContent!="boolean"||n.sandboxContent,n.title&&typeof n.content=="string"&&(n.content.includes("{title}")||n.content.includes("{name}"))||(t.title?n.title="{title}":t.name&&(n.title="{name}")),typeof n.detectHyperlinks!="boolean"&&(n.detectHyperlinks=!0),typeof n.parsePropertyPaths!="boolean"&&(n.parsePropertyPaths=!0),n.textColor&&(h.style.color=n.textColor),n.fillColor&&(h.style.backgroundColor=n.fillColor),n.title&&((u=this._applyStringTemplate(t,n.title,n)).innerText=u.textContent||u.innerText||"",this._appendChild(h,u,yn.Css.title));var y=document.createElement("div");if(y.classList.add(yn.Css.content),Array.isArray(n.content))0<n.content.length&&n.content[0].propertyPath?this._appendChild(y,this._generateContent(t,n.content,n),yn.Css.item):n.content.forEach(function(A){a._appendChild(y,a._generateContent(t,A,n),yn.Css.item)});else{var b=0;t.description&&Object.keys(t).forEach(function(A){a._ignoreProperty(A,t[A])||b++});var u=void 0;b===1||n.singleDescription&&t.description||b===2&&t.Snippet?(u=document.createElement("div")).innerHTML=t.description:u=this._generateContent(t,n.content,n),this._appendChild(y,u,yn.Css.item)}y.innerHTML!==""&&(n.sandboxContent?h.appendChild(yn._createSandboxedIframe(y,n)):h.appendChild(y))}return h},yn._createSandboxedIframe=function(t,n){var a=document.createElement("iframe");a.sandbox.add("allow-popups");var h,y=t.innerHTML,b=!1,u=100,A=550,k=10;document.body.scrollWidth<=340&&(A=300,u=50);var G=y.split(/<(tr|div|br|li|h[0-9]|p>)/);h=Math.max.apply(Math,G.map(function(pt){return pt.replace(/<[a-zA-Z0-9\s=\/]+>/g,"").length}))-1;var W=Math.ceil(3.5*h);if(W<A&&(A=W,u=h),y.includes("<img")||y.includes("<video"))b=!0,a.width="550px";else{var se=-1<y.indexOf(yn.Css.table)?25:20;k+=Math.max(.5*G.length*se,Math.ceil(y.replace(/<[a-zA-Z0-9\s=\/]+>/g,"").length/u)*se)}a.width=A+"px",a.height=b||280<k?"280px":k+"px";var ne=n.textColor?"color:"+n.textColor+";":"",Ee=n.fillColor?"background-color:"+n.fillColor+";":"",Ge='<html><head><title></title><meta charset="utf-8" /><meta http-equiv="x-ua-compatible" content="IE=Edge" /><link rel="stylesheet" href="'+yn._cssUrl+'" type="text/css"/><style>html, body{margin:0;padding:0;'+ne+Ee+'}</style></head><body><div class="'+yn.Css.template+'" style="padding:0;width:'+(A-20)+'px">'+y+"</div></body></html>";return a.srcdoc===void 0?a.src="data:text/html;charset=utf-8,"+encodeURI(Ge):a.srcdoc=Ge,a},yn._appendChild=function(t,n,a){n&&(a&&(n.className=(n.className?n.className+" ":"")+a),t.appendChild(n))},yn._generateContent=function(t,n,a){if(n)return Array.isArray(n)?this._generatePropertyInfoTable(t,n,a):this._applyStringTemplate(t,n,a);var h=this._generateDynamicTableHtml(t,null,a);if(h){var y=document.createElement("div");return y.innerHTML=h,y}return null},yn._applyStringTemplate=function(t,n,a){if(n){for(var h=n,y=this._placeholderRx.exec(n);y;){if(2<=y.length){var b=this._getPropertyValue(t,y[1],a);h=h.replace(y[0],b)}y=this._placeholderRx.exec(n)}if(h){(h=h.trim()).includes("<")&&(h=h.replace(/[\r\n]+/g,"<br/>"));var u=document.createElement("div");return u.innerHTML=h,u}}return null},yn._getPropertyValue=function(t,n,a,h){var y=a.parsePropertyPaths?n.split("/"):[n],b=y.length;if(0<b&&t){var u=y[0],A=t[u];if(a.detectHyperlinks&&n==="link"&&(!h||h.hyperlinkFormat)){var k=[];if(Array.isArray(A)?A.forEach(function(un){un.href?k.push(un):typeof un=="string"&&k.push({href:un})}):A.href&&k.push(A),0<k.length){var G,W;h&&h.hyperlinkFormat?G=h.hyperlinkFormat:a&&a.hyperlinkFormat&&(G=a.hyperlinkFormat),W=G&&G.target?G.target:"_blank";var se=[];return k.forEach(function(un){un.title||G&&G.label||!un.rel||se.push(un.rel," - "),se.push('<a href="',un.href,'" target="',W,'">'),un.title?se.push(un.title):G&&G.label?se.push(G.label):se.push(un.href),se.push("</a>","<br/>")}),se.pop(),se.join("")}}if(A!=null){var ne=void 0;for(ne=1;ne<b&&(A=A[y[ne]],u=y[ne],A!=null);ne++);if(ne===b&&A!=null){var Ee=void 0;if((Ee=A.value!==void 0?A.value:A)instanceof Date)return h&&h.dateFormat?Ee.toLocaleString(void 0,h.dateFormat):a.dateFormat?Ee.toLocaleString(void 0,a.dateFormat):Ee.toISOString();if(typeof Ee=="object")return(qt=this._generateDynamicTableHtml(Ee,y.slice(1),a))||"";if(typeof Ee=="number"){if(h){if(h.dateFormat)return new Date(Ee).toLocaleString(void 0,h.dateFormat);if(h.numberFormat)return Ee.toLocaleString(void 0,h.numberFormat)}else if(/(timestamp|date)/gi.test(u))return new Date(Ee).toISOString();return Ee.toLocaleString(void 0,a.numberFormat)}if(typeof Ee=="string"&&Ee!==""&&!/[\n\r<>\s]/g.test(Ee)&&(a.detectHyperlinks||h&&h.hyperlinkFormat)){Ee=Ee.trim();var Ge=this._isUrlRx.test(Ee)||h&&h.hyperlinkFormat,pt=this._isImageUrlRx.test(Ee)&&(Ge||Ee.startsWith("data:image")),Wt=this._emailRx.test(Ee);if(Ge||pt||Wt){var nt=void 0;h&&h.hyperlinkFormat?nt=h.hyperlinkFormat:a&&a.hyperlinkFormat&&(nt=a.hyperlinkFormat);var qt=void 0;qt=nt&&nt.target?' target="'+nt.target+'"':' target="_blank"';var tn=""+(nt&&nt.label?nt.label:Ee);nt&&nt.scheme?Ee=nt.scheme+Ee:Wt&&(Ee="mailto:"+Ee);var ho=nt&&nt.label?' alt="'+nt.label+'"':"";return(nt&&nt.isImage||pt)&&(tn='<img src="'+Ee+'" style="max-width:100%"'+ho+'"/>'),'<a href="'+Ee+'"'+qt+">"+tn+"</a>"}}return Ee.toString()}}}return""},yn._generatePropertyInfoTable=function(t,n,a){if(t&&n&&0<n.length){var h=[],y=this;h.push('<table class="'+y.Css.table+'">'),n.forEach(function(u){var A=y._getPropertyValue(t,u.propertyPath,a,u);if(u.hideLabel)h.push('<tr><td colspan="2">',A,"</td></tr>");else{var k=u.label||u.propertyPath.split("/")[0];h.push("<tr><th>",k,"</th><td>",A,"</td></tr>")}}),h.push("</table>");var b=document.createElement("div");return b.innerHTML=h.join(""),b}return null},yn._generateDynamicTableHtml=function(t,n,a){var h=this;if(t){var y=[],b=this;y.push('<table class="'+b.Css.table+'">');var u=n&&0<n.length?n.join("/")+"/":"",A=0;return Object.keys(t).forEach(function(k){h._ignoreProperty(k,t[k])||(y.push("<tr><th>",k,"</th><td>",b._getPropertyValue(t,u+k,a),"</td></tr>"),A++)}),A===0?null:(y.push("</table>"),y.join(""))}return null},yn._ignoreProperty=function(t,n){switch(t){case"title":case"name":case"base":case"popupTemplate":case"anchor":case"icon":case"image":case"imageUrl":case"rotation":case"color":case"size":case"offset":case"strokeColor":case"strokeWidth":case"strokeOpacity":case"subType":case"fillColor":case"fillOpacity":case"visibility":case"visible":return!0;default:if(t.indexOf("_")===0||n==null||n==="")return!0}return!1},yn._placeholderRx=/\{([a-zA-Z0-9_\/\s]+)\}/gi,yn._isUrlRx=/^(http|https|ftp|tel|mailto):\/\//i,yn._isImageUrlRx=/(^data:image|.png$|.jpg$|.jpeg$|.gif$|.bmp$|.svg|.tif|.tiff$)/i,yn._emailRx=/^[^\.\s@:](?:[^\s@:]*[^\s@:\.])?@[^\.\s@]+(?:\.[^\.\s@]+)*$/,yn._cssUrl=new gi({domain:oe,path:"sdk/javascript/mapcontrol/"+Tn.getEndpointVersion()+"/atlas.min.css"}).toString(),yn.Css={template:"azure-maps-control-popup-template",title:"azure-maps-control-popup-template-title",content:"azure-maps-control-popup-template-content",item:"azure-maps-control-popup-template-content-item",table:"azure-maps-control-popup-template-table"},yn);function yn(){this.detectHyperlinks=!0,this.parsePropertyPaths=!0}z(new gi({domain:oe,path:"sdk/javascript/mapcontrol/"+Tn.getEndpointVersion()+"/mapbox-gl-rtl-text.min.js"}).toString(),function(t){t&&console.warn(t)},!0),d.HtmlMarker=s_,d.Map=bS,d.Pixel=Qi,d.Popup=i_,d.PopupTemplate=BL,d.Shape=wi,d._getAssetDomain=function(){return X},d._getDomain=function(){return d_()},d._hasSetAuthenticationOptions=m_,d._hasSetDomain=j3,d._hasSetLanguage=V3,d._hasSetSessionId=q3,d._hasSetStyleDefinitionsPath=U3,d._hasSetView=Z3,d.addImageTemplate=function(t,n,a){!a&&ym[t.toLowerCase()]||(ym[t.toLowerCase()]=n)},d.control=uM,d.data=Ob,d.getAllImageTemplateNames=function(){return Object.keys(ym)},d.getAuthenticationOptions=E3,d.getDomain=d_,d.getImageTemplate=F3,d.getLanguage=k3,d.getSessionId=M3,d.getStyleDefinitionsPath=I3,d.getSubscriptionKey=A3,d.getUserRegion=function(){return Ty},d.getVersion=function(){return Tn.getFullVersion()},d.getView=L3,d.internal=CM,d.isSupported=f_,d.layer=BM,d.math=SM,d.setAuthenticationOptions=P3,d.setDomain=D3,d.setLanguage=N3,d.setSessionId=O3,d.setStyleDefinitionsPath=z3,d.setSubscriptionKey=R3,d.setUserRegion=B3,d.setView=function(t){Ty=t,p_=!0},d.source=PM,Object.defineProperty(d,"__esModule",{value:!0})})(c)}(DT={path:RG,exports:{},require:function(o,c){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(c==null&&DT.path)}},DT.exports),DT.exports),Zo=OG(gF);const C2=Re.createContext({mapRef:null,isMapReady:!1,setMapRef:o=>{},removeMapRef:()=>{},setMapReady:()=>{}}),{Provider:BG,Consumer:bK}=C2,yF=({children:o})=>{const[c,d]=Re.useState(null),[_,C]=Re.useState(!1);return oi.createElement(BG,{value:{mapRef:c,setMapRef:d,isMapReady:_,setMapReady:C,removeMapRef:()=>d(null)}},o)};function aw(o,c,d){Re.useEffect(()=>{if(o&&c)return d(o,c)},[c])}function vF(o,c,d){Re.useEffect(()=>{if(o&&c)return d(o,c)},[])}(function(o,c){c===void 0&&(c={});var d=c.insertAt;if(o&&typeof document<"u"){var _=document.head||document.getElementsByTagName("head")[0],C=document.createElement("style");C.type="text/css",d==="top"&&_.firstChild?_.insertBefore(C,_.firstChild):_.appendChild(C),C.styleSheet?C.styleSheet.cssText=o:C.appendChild(document.createTextNode(o))}})(`.mapboxgl-marker,.mapboxgl-popup{will-change:transform;top:0;left:0}.azure-maps-control-button,.popup-collection-container{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.incident-popup-subtitle,.incident-popup-title{text-transform:capitalize;text-overflow:ellipsis}.mapboxgl-map{font:12px/20px 'Helvetica Neue',Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:transparent}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-nav-compass{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-nav-compass:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan{-ms-touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;-moz-box-shadow:0 0 2px rgba(0,0,0,.1);-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1);overflow:hidden;background:#fff}.mapboxgl-ctrl-group>button{width:30px;height:30px;display:block;padding:0;outline:0;border:none;border-bottom:1px solid #ddd;box-sizing:border-box;background-color:rgba(0,0,0,0);cursor:pointer}.mapboxgl-ctrl>button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl>button:last-child{border-bottom:0}.mapboxgl-ctrl>button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-icon,.mapboxgl-ctrl-icon>.mapboxgl-ctrl-compass-arrow{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.mapboxgl-ctrl-icon{padding:5px}.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out{background-image:url("data:image/svg+xml;charset=utf8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0A%20%20%3Cpath%20style%3D%27fill%3A%23333333%3B%27%20d%3D%27m%207%2C9%20c%20-0.554%2C0%20-1%2C0.446%20-1%2C1%200%2C0.554%200.446%2C1%201%2C1%20l%206%2C0%20c%200.554%2C0%201%2C-0.446%201%2C-1%200%2C-0.554%20-0.446%2C-1%20-1%2C-1%20z%27%20%2F%3E%0A%3C%2Fsvg%3E%0A")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in{background-image:url("data:image/svg+xml;charset=utf8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0A%20%20%3Cpath%20style%3D%27fill%3A%23333333%3B%27%20d%3D%27M%2010%206%20C%209.446%206%209%206.4459904%209%207%20L%209%209%20L%207%209%20C%206.446%209%206%209.446%206%2010%20C%206%2010.554%206.446%2011%207%2011%20L%209%2011%20L%209%2013%20C%209%2013.55401%209.446%2014%2010%2014%20C%2010.554%2014%2011%2013.55401%2011%2013%20L%2011%2011%20L%2013%2011%20C%2013.554%2011%2014%2010.554%2014%2010%20C%2014%209.446%2013.554%209%2013%209%20L%2011%209%20L%2011%207%20C%2011%206.4459904%2010.554%206%2010%206%20z%27%20%2F%3E%0A%3C%2Fsvg%3E%0A")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0D%0A%20%20%3Cpath%20style%3D%27fill%3A%23333%3B%27%20d%3D%27M10%204C9%204%209%205%209%205L9%205.1A5%205%200%200%200%205.1%209L5%209C5%209%204%209%204%2010%204%2011%205%2011%205%2011L5.1%2011A5%205%200%200%200%209%2014.9L9%2015C9%2015%209%2016%2010%2016%2011%2016%2011%2015%2011%2015L11%2014.9A5%205%200%200%200%2014.9%2011L15%2011C15%2011%2016%2011%2016%2010%2016%209%2015%209%2015%209L14.9%209A5%205%200%200%200%2011%205.1L11%205C11%205%2011%204%2010%204zM10%206.5A3.5%203.5%200%200%201%2013.5%2010%203.5%203.5%200%200%201%2010%2013.5%203.5%203.5%200%200%201%206.5%2010%203.5%203.5%200%200%201%2010%206.5zM10%208.3A1.8%201.8%200%200%200%208.3%2010%201.8%201.8%200%200%200%2010%2011.8%201.8%201.8%200%200%200%2011.8%2010%201.8%201.8%200%200%200%2010%208.3z%27%20%2F%3E%0D%0A%3C%2Fsvg%3E")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate:disabled{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0D%0A%20%20%3Cpath%20style%3D%27fill%3A%23aaa%3B%27%20d%3D%27M10%204C9%204%209%205%209%205L9%205.1A5%205%200%200%200%205.1%209L5%209C5%209%204%209%204%2010%204%2011%205%2011%205%2011L5.1%2011A5%205%200%200%200%209%2014.9L9%2015C9%2015%209%2016%2010%2016%2011%2016%2011%2015%2011%2015L11%2014.9A5%205%200%200%200%2014.9%2011L15%2011C15%2011%2016%2011%2016%2010%2016%209%2015%209%2015%209L14.9%209A5%205%200%200%200%2011%205.1L11%205C11%205%2011%204%2010%204zM10%206.5A3.5%203.5%200%200%201%2013.5%2010%203.5%203.5%200%200%201%2010%2013.5%203.5%203.5%200%200%201%206.5%2010%203.5%203.5%200%200%201%2010%206.5zM10%208.3A1.8%201.8%200%200%200%208.3%2010%201.8%201.8%200%200%200%2010%2011.8%201.8%201.8%200%200%200%2011.8%2010%201.8%201.8%200%200%200%2010%208.3z%27%20%2F%3E%0D%0A%3C%2Fsvg%3E")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0D%0A%20%20%3Cpath%20style%3D%27fill%3A%2333b5e5%3B%27%20d%3D%27M10%204C9%204%209%205%209%205L9%205.1A5%205%200%200%200%205.1%209L5%209C5%209%204%209%204%2010%204%2011%205%2011%205%2011L5.1%2011A5%205%200%200%200%209%2014.9L9%2015C9%2015%209%2016%2010%2016%2011%2016%2011%2015%2011%2015L11%2014.9A5%205%200%200%200%2014.9%2011L15%2011C15%2011%2016%2011%2016%2010%2016%209%2015%209%2015%209L14.9%209A5%205%200%200%200%2011%205.1L11%205C11%205%2011%204%2010%204zM10%206.5A3.5%203.5%200%200%201%2013.5%2010%203.5%203.5%200%200%201%2010%2013.5%203.5%203.5%200%200%201%206.5%2010%203.5%203.5%200%200%201%2010%206.5zM10%208.3A1.8%201.8%200%200%200%208.3%2010%201.8%201.8%200%200%200%2010%2011.8%201.8%201.8%200%200%200%2011.8%2010%201.8%201.8%200%200%200%2010%208.3z%27%20%2F%3E%0D%0A%3C%2Fsvg%3E")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0D%0A%20%20%3Cpath%20style%3D%27fill%3A%23e58978%3B%27%20d%3D%27M10%204C9%204%209%205%209%205L9%205.1A5%205%200%200%200%205.1%209L5%209C5%209%204%209%204%2010%204%2011%205%2011%205%2011L5.1%2011A5%205%200%200%200%209%2014.9L9%2015C9%2015%209%2016%2010%2016%2011%2016%2011%2015%2011%2015L11%2014.9A5%205%200%200%200%2014.9%2011L15%2011C15%2011%2016%2011%2016%2010%2016%209%2015%209%2015%209L14.9%209A5%205%200%200%200%2011%205.1L11%205C11%205%2011%204%2010%204zM10%206.5A3.5%203.5%200%200%201%2013.5%2010%203.5%203.5%200%200%201%2010%2013.5%203.5%203.5%200%200%201%206.5%2010%203.5%203.5%200%200%201%2010%206.5zM10%208.3A1.8%201.8%200%200%200%208.3%2010%201.8%201.8%200%200%200%2010%2011.8%201.8%201.8%200%200%200%2011.8%2010%201.8%201.8%200%200%200%2010%208.3z%27%20%2F%3E%0D%0A%3C%2Fsvg%3E")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0A%20%20%3Cpath%20style%3D%27fill%3A%2333b5e5%3B%27%20d%3D%27M%2010%2C4%20C%209%2C4%209%2C5%209%2C5%20L%209%2C5.1%20C%207.0357113%2C5.5006048%205.5006048%2C7.0357113%205.1%2C9%20L%205%2C9%20c%200%2C0%20-1%2C0%20-1%2C1%200%2C1%201%2C1%201%2C1%20l%200.1%2C0%20c%200.4006048%2C1.964289%201.9357113%2C3.499395%203.9%2C3.9%20L%209%2C15%20c%200%2C0%200%2C1%201%2C1%201%2C0%201%2C-1%201%2C-1%20l%200%2C-0.1%20c%201.964289%2C-0.400605%203.499395%2C-1.935711%203.9%2C-3.9%20l%200.1%2C0%20c%200%2C0%201%2C0%201%2C-1%20C%2016%2C9%2015%2C9%2015%2C9%20L%2014.9%2C9%20C%2014.499395%2C7.0357113%2012.964289%2C5.5006048%2011%2C5.1%20L%2011%2C5%20c%200%2C0%200%2C-1%20-1%2C-1%20z%20m%200%2C2.5%20c%201.932997%2C0%203.5%2C1.5670034%203.5%2C3.5%200%2C1.932997%20-1.567003%2C3.5%20-3.5%2C3.5%20C%208.0670034%2C13.5%206.5%2C11.932997%206.5%2C10%206.5%2C8.0670034%208.0670034%2C6.5%2010%2C6.5%20Z%27%20%2F%3E%0A%3C%2Fsvg%3E")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0A%20%20%3Cpath%20style%3D%27fill%3A%23e54e33%3B%27%20d%3D%27M%2010%2C4%20C%209%2C4%209%2C5%209%2C5%20L%209%2C5.1%20C%207.0357113%2C5.5006048%205.5006048%2C7.0357113%205.1%2C9%20L%205%2C9%20c%200%2C0%20-1%2C0%20-1%2C1%200%2C1%201%2C1%201%2C1%20l%200.1%2C0%20c%200.4006048%2C1.964289%201.9357113%2C3.499395%203.9%2C3.9%20L%209%2C15%20c%200%2C0%200%2C1%201%2C1%201%2C0%201%2C-1%201%2C-1%20l%200%2C-0.1%20c%201.964289%2C-0.400605%203.499395%2C-1.935711%203.9%2C-3.9%20l%200.1%2C0%20c%200%2C0%201%2C0%201%2C-1%20C%2016%2C9%2015%2C9%2015%2C9%20L%2014.9%2C9%20C%2014.499395%2C7.0357113%2012.964289%2C5.5006048%2011%2C5.1%20L%2011%2C5%20c%200%2C0%200%2C-1%20-1%2C-1%20z%20m%200%2C2.5%20c%201.932997%2C0%203.5%2C1.5670034%203.5%2C3.5%200%2C1.932997%20-1.567003%2C3.5%20-3.5%2C3.5%20C%208.0670034%2C13.5%206.5%2C11.932997%206.5%2C10%206.5%2C8.0670034%208.0670034%2C6.5%2010%2C6.5%20Z%27%20%2F%3E%0A%3C%2Fsvg%3E")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting{-webkit-animation:mapboxgl-spin 2s infinite linear;-moz-animation:mapboxgl-spin 2s infinite linear;-o-animation:mapboxgl-spin 2s infinite linear;-ms-animation:mapboxgl-spin 2s infinite linear;animation:mapboxgl-spin 2s infinite linear}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0)}100%{-webkit-transform:rotate(360deg)}}@-moz-keyframes mapboxgl-spin{0%{-moz-transform:rotate(0)}100%{-moz-transform:rotate(360deg)}}@-o-keyframes mapboxgl-spin{0%{-o-transform:rotate(0)}100%{-o-transform:rotate(360deg)}}@-ms-keyframes mapboxgl-spin{0%{-ms-transform:rotate(0)}100%{-ms-transform:rotate(360deg)}}@keyframes mapboxgl-spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.mapboxgl-ctrl-icon.mapboxgl-ctrl-fullscreen{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0iTGF5ZXJfMSIKICAgeD0iMHB4IgogICB5PSIwcHgiCiAgIHZpZXdCb3g9IjAgMCAyMCAyMCIKICAgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAgMjA7IgogICB4bWw6c3BhY2U9InByZXNlcnZlIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkxIHIxMzcyNSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iZnVsbHNjcmVlbi5zdmciPjxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTQxODUiPjxyZGY6UkRGPjxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+PGRjOnRpdGxlPjwvZGM6dGl0bGU+PC9jYzpXb3JrPjwvcmRmOlJERj48L21ldGFkYXRhPjxkZWZzCiAgICAgaWQ9ImRlZnM0MTgzIiAvPjxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTQ3MSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI2OTUiCiAgICAgaWQ9Im5hbWVkdmlldzQxODEiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOnpvb209IjExLjMxMzcwOCIKICAgICBpbmtzY2FwZTpjeD0iMTQuNjk4MjgiCiAgICAgaW5rc2NhcGU6Y3k9IjEwLjUyNjY4OSIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iNjk3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSIyOTgiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJMYXllcl8xIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpiYm94LXBhdGhzPSJ0cnVlIgogICAgIGlua3NjYXBlOm9iamVjdC1wYXRocz0idHJ1ZSIKICAgICBpbmtzY2FwZTpiYm94LW5vZGVzPSJ0cnVlIgogICAgIGlua3NjYXBlOm9iamVjdC1ub2Rlcz0idHJ1ZSI+PGlua3NjYXBlOmdyaWQKICAgICAgIHR5cGU9Inh5Z3JpZCIKICAgICAgIGlkPSJncmlkNjA3NiIgLz48L3NvZGlwb2RpOm5hbWVkdmlldz48cGF0aAogICAgIGQ9Ik0gNSA0IEMgNC41IDQgNCA0LjUgNCA1IEwgNCA2IEwgNCA5IEwgNC41IDkgTCA1Ljc3NzM0MzggNy4yOTY4NzUgQyA2Ljc3NzEzMTkgOC4wNjAyMTMxIDcuODM1NzY1IDguOTU2NTcyOCA4Ljg5MDYyNSAxMCBDIDcuODI1NzEyMSAxMS4wNjMzIDYuNzc2MTc5MSAxMS45NTE2NzUgNS43ODEyNSAxMi43MDcwMzEgTCA0LjUgMTEgTCA0IDExIEwgNCAxNSBDIDQgMTUuNSA0LjUgMTYgNSAxNiBMIDkgMTYgTCA5IDE1LjUgTCA3LjI3MzQzNzUgMTQuMjA1MDc4IEMgOC4wNDI4OTMxIDEzLjE4Nzg4NiA4LjkzOTU0NDEgMTIuMTMzNDgxIDkuOTYwOTM3NSAxMS4wNjgzNTkgQyAxMS4wNDIzNzEgMTIuMTQ2OTkgMTEuOTQyMDkzIDEzLjIxMTIgMTIuNzA3MDMxIDE0LjIxODc1IEwgMTEgMTUuNSBMIDExIDE2IEwgMTQgMTYgTCAxNSAxNiBDIDE1LjUgMTYgMTYgMTUuNSAxNiAxNSBMIDE2IDE0IEwgMTYgMTEgTCAxNS41IDExIEwgMTQuMjA1MDc4IDEyLjcyNjU2MiBDIDEzLjE3Nzk4NSAxMS45NDk2MTcgMTIuMTEyNzE4IDExLjA0MzU3NyAxMS4wMzcxMDkgMTAuMDA5NzY2IEMgMTIuMTUxODU2IDguOTgxMDYxIDEzLjIyNDM0NSA4LjA3OTg2MjQgMTQuMjI4NTE2IDcuMzA0Njg3NSBMIDE1LjUgOSBMIDE2IDkgTCAxNiA1IEMgMTYgNC41IDE1LjUgNCAxNSA0IEwgMTEgNCBMIDExIDQuNSBMIDEyLjcwMzEyNSA1Ljc3NzM0MzggQyAxMS45MzI2NDcgNi43ODY0ODM0IDExLjAyNjY5MyA3Ljg1NTQ3MTIgOS45NzA3MDMxIDguOTE5OTIxOSBDIDguOTU4NDczOSA3LjgyMDQ5NDMgOC4wNjk4NzY3IDYuNzYyNzE4OCA3LjMwNDY4NzUgNS43NzE0ODQ0IEwgOSA0LjUgTCA5IDQgTCA2IDQgTCA1IDQgeiAiCiAgICAgaWQ9InBhdGg0MTY5IiAvPjwvc3ZnPg==)}.mapboxgl-ctrl-icon.mapboxgl-ctrl-shrink{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0iTGF5ZXJfMSIKICAgeD0iMHB4IgogICB5PSIwcHgiCiAgIHZpZXdCb3g9IjAgMCAyMCAyMCIKICAgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAgMjA7IgogICB4bWw6c3BhY2U9InByZXNlcnZlIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkxIHIxMzcyNSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ic2hyaW5rLnN2ZyI+PG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhMTkiPjxyZGY6UkRGPjxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+PGRjOnRpdGxlPjwvZGM6dGl0bGU+PC9jYzpXb3JrPjwvcmRmOlJERj48L21ldGFkYXRhPjxkZWZzCiAgICAgaWQ9ImRlZnMxNyIgLz48c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEiCiAgICAgb2JqZWN0dG9sZXJhbmNlPSIxMCIKICAgICBncmlkdG9sZXJhbmNlPSIxMCIKICAgICBndWlkZXRvbGVyYW5jZT0iMTAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjIwMjEiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iOTA4IgogICAgIGlkPSJuYW1lZHZpZXcxNSIKICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgaW5rc2NhcGU6em9vbT0iMSIKICAgICBpbmtzY2FwZTpjeD0iNC45NTAxMDgyIgogICAgIGlua3NjYXBlOmN5PSIxMC44NTQ3NDciCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJMYXllcl8xIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpiYm94LXBhdGhzPSJ0cnVlIgogICAgIGlua3NjYXBlOnNuYXAtYmJveC1lZGdlLW1pZHBvaW50cz0idHJ1ZSIKICAgICBpbmtzY2FwZTpiYm94LW5vZGVzPSJ0cnVlIgogICAgIGlua3NjYXBlOnNuYXAtYmJveC1taWRwb2ludHM9InRydWUiCiAgICAgaW5rc2NhcGU6b2JqZWN0LXBhdGhzPSJ0cnVlIgogICAgIGlua3NjYXBlOm9iamVjdC1ub2Rlcz0idHJ1ZSI+PGlua3NjYXBlOmdyaWQKICAgICAgIHR5cGU9Inh5Z3JpZCIKICAgICAgIGlkPSJncmlkNDE0NyIgLz48L3NvZGlwb2RpOm5hbWVkdmlldz48cGF0aAogICAgIHN0eWxlPSJmaWxsOiMwMDAwMDAiCiAgICAgZD0iTSA0LjI0MjE4NzUgMy40OTIxODc1IEEgMC43NTAwNzUgMC43NTAwNzUgMCAwIDAgMy43MTg3NSA0Ljc4MTI1IEwgNS45NjQ4NDM4IDcuMDI3MzQzOCBMIDQgOC41IEwgNCA5IEwgOCA5IEMgOC41MDAwMDEgOC45OTk5OTg4IDkgOC40OTk5OTkyIDkgOCBMIDkgNCBMIDguNSA0IEwgNy4wMTc1NzgxIDUuOTU1MDc4MSBMIDQuNzgxMjUgMy43MTg3NSBBIDAuNzUwMDc1IDAuNzUwMDc1IDAgMCAwIDQuMjQyMTg3NSAzLjQ5MjE4NzUgeiBNIDE1LjczNDM3NSAzLjQ5MjE4NzUgQSAwLjc1MDA3NSAwLjc1MDA3NSAwIDAgMCAxNS4yMTg3NSAzLjcxODc1IEwgMTIuOTg0Mzc1IDUuOTUzMTI1IEwgMTEuNSA0IEwgMTEgNCBMIDExIDggQyAxMSA4LjQ5OTk5OTIgMTEuNDk5OTk5IDguOTk5OTk4OCAxMiA5IEwgMTYgOSBMIDE2IDguNSBMIDE0LjAzNTE1NiA3LjAyNzM0MzggTCAxNi4yODEyNSA0Ljc4MTI1IEEgMC43NTAwNzUgMC43NTAwNzUgMCAwIDAgMTUuNzM0Mzc1IDMuNDkyMTg3NSB6IE0gNCAxMSBMIDQgMTEuNSBMIDUuOTY0ODQzOCAxMi45NzI2NTYgTCAzLjcxODc1IDE1LjIxODc1IEEgMC43NTEzMDA5NiAwLjc1MTMwMDk2IDAgMSAwIDQuNzgxMjUgMTYuMjgxMjUgTCA3LjAyNzM0MzggMTQuMDM1MTU2IEwgOC41IDE2IEwgOSAxNiBMIDkgMTIgQyA5IDExLjUwMDAwMSA4LjUwMDAwMSAxMS4wMDAwMDEgOCAxMSBMIDQgMTEgeiBNIDEyIDExIEMgMTEuNDk5OTk5IDExLjAwMDAwMSAxMSAxMS41MDAwMDEgMTEgMTIgTCAxMSAxNiBMIDExLjUgMTYgTCAxMi45NzI2NTYgMTQuMDM1MTU2IEwgMTUuMjE4NzUgMTYuMjgxMjUgQSAwLjc1MTMwMDk2IDAuNzUxMzAwOTYgMCAxIDAgMTYuMjgxMjUgMTUuMjE4NzUgTCAxNC4wMzUxNTYgMTIuOTcyNjU2IEwgMTYgMTEuNSBMIDE2IDExIEwgMTIgMTEgeiAiCiAgICAgaWQ9InBhdGg3IiAvPjwvc3ZnPg==)}.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass>.mapboxgl-ctrl-compass-arrow{width:20px;height:20px;margin:5px;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%2020%2020%27%3E%0A%09%3Cpolygon%20fill%3D%27%23333333%27%20points%3D%276%2C9%2010%2C1%2014%2C9%27%2F%3E%0A%09%3Cpolygon%20fill%3D%27%23CCCCCC%27%20points%3D%276%2C11%2010%2C19%2014%2C11%20%27%2F%3E%0A%3C%2Fsvg%3E");background-repeat:no-repeat;display:inline-block}a.mapboxgl-ctrl-logo{width:85px;height:21px;margin:0 0 -3px -3px;display:block;background-repeat:no-repeat;cursor:pointer;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiAgIHZpZXdCb3g9IjAgMCA4NC40OSAyMSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgODQuNDkgMjE7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz4gIDxwYXRoIGNsYXNzPSJzdDAiIHN0eWxlPSJvcGFjaXR5OjAuOTsgZmlsbDogI0ZGRkZGRjsgZW5hYmxlLWJhY2tncm91bmQ6IG5ldzsiIGQ9Ik04My4yNSwxNC4yNmMwLDAuMTItMC4wOSwwLjIxLTAuMjEsMC4yMWgtMS42MWMtMC4xMywwLTAuMjQtMC4wNi0wLjMtMC4xN2wtMS40NC0yLjM5bC0xLjQ0LDIuMzkgICAgYy0wLjA2LDAuMTEtMC4xOCwwLjE3LTAuMywwLjE3aC0xLjYxYy0wLjA0LDAtMC4wOC0wLjAxLTAuMTItMC4wM2MtMC4wOS0wLjA2LTAuMTMtMC4xOS0wLjA2LTAuMjhsMCwwbDIuNDMtMy42OEw3Ni4yLDYuODQgICAgYy0wLjAyLTAuMDMtMC4wMy0wLjA3LTAuMDMtMC4xMmMwLTAuMTIsMC4wOS0wLjIxLDAuMjEtMC4yMWgxLjYxYzAuMTMsMCwwLjI0LDAuMDYsMC4zLDAuMTdsMS40MSwyLjM2bDEuNC0yLjM1ICAgIGMwLjA2LTAuMTEsMC4xOC0wLjE3LDAuMy0wLjE3SDgzYzAuMDQsMCwwLjA4LDAuMDEsMC4xMiwwLjAzYzAuMDksMC4wNiwwLjEzLDAuMTksMC4wNiwwLjI4bDAsMGwtMi4zNywzLjYzbDIuNDMsMy42NyAgICBDODMuMjQsMTQuMTgsODMuMjUsMTQuMjIsODMuMjUsMTQuMjZ6Ii8+ICA8cGF0aCBjbGFzcz0ic3QwIiBzdHlsZT0ib3BhY2l0eTowLjk7IGZpbGw6ICNGRkZGRkY7IGVuYWJsZS1iYWNrZ3JvdW5kOiBuZXc7IiBkPSJNNjYuMjQsOS41OWMtMC4zOS0xLjg4LTEuOTYtMy4yOC0zLjg0LTMuMjhjLTEuMDMsMC0yLjAzLDAuNDItMi43MywxLjE4VjMuNTFjMC0wLjEzLTAuMS0wLjIzLTAuMjMtMC4yM2gtMS40ICAgIGMtMC4xMywwLTAuMjMsMC4xMS0wLjIzLDAuMjN2MTAuNzJjMCwwLjEzLDAuMSwwLjIzLDAuMjMsMC4yM2gxLjRjMC4xMywwLDAuMjMtMC4xMSwwLjIzLTAuMjNWMTMuNWMwLjcxLDAuNzUsMS43LDEuMTgsMi43MywxLjE4ICAgIGMxLjg4LDAsMy40NS0xLjQxLDMuODQtMy4yOUM2Ni4zNywxMC43OSw2Ni4zNywxMC4xOCw2Ni4yNCw5LjU5TDY2LjI0LDkuNTl6IE02Mi4wOCwxM2MtMS4zMiwwLTIuMzktMS4xMS0yLjQxLTIuNDh2LTAuMDYgICAgYzAuMDItMS4zOCwxLjA5LTIuNDgsMi40MS0yLjQ4czIuNDIsMS4xMiwyLjQyLDIuNTFTNjMuNDEsMTMsNjIuMDgsMTN6Ii8+ICA8cGF0aCBjbGFzcz0ic3QwIiBzdHlsZT0ib3BhY2l0eTowLjk7IGZpbGw6ICNGRkZGRkY7IGVuYWJsZS1iYWNrZ3JvdW5kOiBuZXc7IiBkPSJNNzEuNjcsNi4zMmMtMS45OC0wLjAxLTMuNzIsMS4zNS00LjE2LDMuMjljLTAuMTMsMC41OS0wLjEzLDEuMTksMCwxLjc3YzAuNDQsMS45NCwyLjE3LDMuMzIsNC4xNywzLjMgICAgYzIuMzUsMCw0LjI2LTEuODcsNC4yNi00LjE5Uzc0LjA0LDYuMzIsNzEuNjcsNi4zMnogTTcxLjY1LDEzLjAxYy0xLjMzLDAtMi40Mi0xLjEyLTIuNDItMi41MXMxLjA4LTIuNTIsMi40Mi0yLjUyICAgIGMxLjMzLDAsMi40MiwxLjEyLDIuNDIsMi41MVM3Mi45OSwxMyw3MS42NSwxMy4wMUw3MS42NSwxMy4wMXoiLz4gIDxwYXRoIGNsYXNzPSJzdDEiIHN0eWxlPSJvcGFjaXR5OjAuMzU7IGVuYWJsZS1iYWNrZ3JvdW5kOm5ldzsiIGQ9Ik02Mi4wOCw3Ljk4Yy0xLjMyLDAtMi4zOSwxLjExLTIuNDEsMi40OHYwLjA2QzU5LjY4LDExLjksNjAuNzUsMTMsNjIuMDgsMTNzMi40Mi0xLjEyLDIuNDItMi41MSAgICBTNjMuNDEsNy45OCw2Mi4wOCw3Ljk4eiBNNjIuMDgsMTEuNzZjLTAuNjMsMC0xLjE0LTAuNTYtMS4xNy0xLjI1di0wLjA0YzAuMDEtMC42OSwwLjU0LTEuMjUsMS4xNy0xLjI1ICAgIGMwLjYzLDAsMS4xNywwLjU3LDEuMTcsMS4yN0M2My4yNCwxMS4yLDYyLjczLDExLjc2LDYyLjA4LDExLjc2eiIvPiAgPHBhdGggY2xhc3M9InN0MSIgc3R5bGU9Im9wYWNpdHk6MC4zNTsgZW5hYmxlLWJhY2tncm91bmQ6bmV3OyIgZD0iTTcxLjY1LDcuOThjLTEuMzMsMC0yLjQyLDEuMTItMi40MiwyLjUxUzcwLjMyLDEzLDcxLjY1LDEzczIuNDItMS4xMiwyLjQyLTIuNTFTNzIuOTksNy45OCw3MS42NSw3Ljk4eiAgICAgTTcxLjY1LDExLjc2Yy0wLjY0LDAtMS4xNy0wLjU3LTEuMTctMS4yN2MwLTAuNywwLjUzLTEuMjYsMS4xNy0xLjI2czEuMTcsMC41NywxLjE3LDEuMjdDNzIuODIsMTEuMjEsNzIuMjksMTEuNzYsNzEuNjUsMTEuNzZ6IiAgICAvPiAgPHBhdGggY2xhc3M9InN0MCIgc3R5bGU9Im9wYWNpdHk6MC45OyBmaWxsOiAjRkZGRkZGOyBlbmFibGUtYmFja2dyb3VuZDogbmV3OyIgZD0iTTQ1Ljc0LDYuNTNoLTEuNGMtMC4xMywwLTAuMjMsMC4xMS0wLjIzLDAuMjN2MC43M2MtMC43MS0wLjc1LTEuNy0xLjE4LTIuNzMtMS4xOCAgICBjLTIuMTcsMC0zLjk0LDEuODctMy45NCw0LjE5czEuNzcsNC4xOSwzLjk0LDQuMTljMS4wNCwwLDIuMDMtMC40MywyLjczLTEuMTl2MC43M2MwLDAuMTMsMC4xLDAuMjMsMC4yMywwLjIzaDEuNCAgICBjMC4xMywwLDAuMjMtMC4xMSwwLjIzLTAuMjNWNi43NGMwLTAuMTItMC4wOS0wLjIyLTAuMjItMC4yMkM0NS43NSw2LjUzLDQ1Ljc1LDYuNTMsNDUuNzQsNi41M3ogTTQ0LjEyLDEwLjUzICAgIEM0NC4xMSwxMS45LDQzLjAzLDEzLDQxLjcxLDEzcy0yLjQyLTEuMTItMi40Mi0yLjUxczEuMDgtMi41MiwyLjQtMi41MmMxLjMzLDAsMi4zOSwxLjExLDIuNDEsMi40OEw0NC4xMiwxMC41M3oiLz4gIDxwYXRoIGNsYXNzPSJzdDEiIHN0eWxlPSJvcGFjaXR5OjAuMzU7IGVuYWJsZS1iYWNrZ3JvdW5kOm5ldzsiIGQ9Ik00MS43MSw3Ljk4Yy0xLjMzLDAtMi40MiwxLjEyLTIuNDIsMi41MVM0MC4zNywxMyw0MS43MSwxM3MyLjM5LTEuMTEsMi40MS0yLjQ4di0wLjA2ICAgIEM0NC4xLDkuMDksNDMuMDMsNy45OCw0MS43MSw3Ljk4eiBNNDAuNTUsMTAuNDljMC0wLjcsMC41Mi0xLjI3LDEuMTctMS4yN2MwLjY0LDAsMS4xNCwwLjU2LDEuMTcsMS4yNXYwLjA0ICAgIGMtMC4wMSwwLjY4LTAuNTMsMS4yNC0xLjE3LDEuMjRDNDEuMDgsMTEuNzUsNDAuNTUsMTEuMTksNDAuNTUsMTAuNDl6Ii8+ICA8cGF0aCBjbGFzcz0ic3QwIiBzdHlsZT0ib3BhY2l0eTowLjk7IGZpbGw6ICNGRkZGRkY7IGVuYWJsZS1iYWNrZ3JvdW5kOiBuZXc7IiBkPSJNNTIuNDEsNi4zMmMtMS4wMywwLTIuMDMsMC40Mi0yLjczLDEuMThWNi43NWMwLTAuMTMtMC4xLTAuMjMtMC4yMy0wLjIzaC0xLjRjLTAuMTMsMC0wLjIzLDAuMTEtMC4yMywwLjIzICAgIHYxMC43MmMwLDAuMTMsMC4xLDAuMjMsMC4yMywwLjIzaDEuNGMwLjEzLDAsMC4yMy0wLjEsMC4yMy0wLjIzVjEzLjVjMC43MSwwLjc1LDEuNywxLjE4LDIuNzQsMS4xOGMyLjE3LDAsMy45NC0xLjg3LDMuOTQtNC4xOSAgICBTNTQuNTgsNi4zMiw1Mi40MSw2LjMyeiBNNTIuMDgsMTMuMDFjLTEuMzIsMC0yLjM5LTEuMTEtMi40Mi0yLjQ4di0wLjA3YzAuMDItMS4zOCwxLjA5LTIuNDksMi40LTIuNDljMS4zMiwwLDIuNDEsMS4xMiwyLjQxLDIuNTEgICAgUzUzLjQsMTMsNTIuMDgsMTMuMDFMNTIuMDgsMTMuMDF6Ii8+ICA8cGF0aCBjbGFzcz0ic3QxIiBzdHlsZT0ib3BhY2l0eTowLjM1OyBlbmFibGUtYmFja2dyb3VuZDpuZXc7IiBkPSJNNTIuMDgsNy45OGMtMS4zMiwwLTIuMzksMS4xMS0yLjQyLDIuNDh2MC4wNmMwLjAzLDEuMzgsMS4xLDIuNDgsMi40MiwyLjQ4czIuNDEtMS4xMiwyLjQxLTIuNTEgICAgUzUzLjQsNy45OCw1Mi4wOCw3Ljk4eiBNNTIuMDgsMTEuNzZjLTAuNjMsMC0xLjE0LTAuNTYtMS4xNy0xLjI1di0wLjA0YzAuMDEtMC42OSwwLjU0LTEuMjUsMS4xNy0xLjI1YzAuNjMsMCwxLjE3LDAuNTgsMS4xNywxLjI3ICAgIFM1Mi43MiwxMS43Niw1Mi4wOCwxMS43NnoiLz4gIDxwYXRoIGNsYXNzPSJzdDAiIHN0eWxlPSJvcGFjaXR5OjAuOTsgZmlsbDogI0ZGRkZGRjsgZW5hYmxlLWJhY2tncm91bmQ6IG5ldzsiIGQ9Ik0zNi4wOCwxNC4yNGMwLDAuMTMtMC4xLDAuMjMtMC4yMywwLjIzaC0xLjQxYy0wLjEzLDAtMC4yMy0wLjExLTAuMjMtMC4yM1Y5LjY4YzAtMC45OC0wLjc0LTEuNzEtMS42Mi0xLjcxICAgIGMtMC44LDAtMS40NiwwLjctMS41OSwxLjYybDAuMDEsNC42NmMwLDAuMTMtMC4xMSwwLjIzLTAuMjMsMC4yM2gtMS40MWMtMC4xMywwLTAuMjMtMC4xMS0wLjIzLTAuMjNWOS42OCAgICBjMC0wLjk4LTAuNzQtMS43MS0xLjYyLTEuNzFjLTAuODUsMC0xLjU0LDAuNzktMS42LDEuOHY0LjQ4YzAsMC4xMy0wLjEsMC4yMy0wLjIzLDAuMjNoLTEuNGMtMC4xMywwLTAuMjMtMC4xMS0wLjIzLTAuMjNWNi43NCAgICBjMC4wMS0wLjEzLDAuMS0wLjIyLDAuMjMtMC4yMmgxLjRjMC4xMywwLDAuMjIsMC4xMSwwLjIzLDAuMjJWNy40YzAuNS0wLjY4LDEuMy0xLjA5LDIuMTYtMS4xaDAuMDNjMS4wOSwwLDIuMDksMC42LDIuNiwxLjU1ICAgIGMwLjQ1LTAuOTUsMS40LTEuNTUsMi40NC0xLjU2YzEuNjIsMCwyLjkzLDEuMjUsMi45LDIuNzhMMzYuMDgsMTQuMjR6Ii8+ICA8cGF0aCBjbGFzcz0ic3QxIiBzdHlsZT0ib3BhY2l0eTowLjM1OyBlbmFibGUtYmFja2dyb3VuZDpuZXc7IiBkPSJNODQuMzQsMTMuNTlsLTAuMDctMC4xM2wtMS45Ni0yLjk5bDEuOTQtMi45NWMwLjQ0LTAuNjcsMC4yNi0xLjU2LTAuNDEtMi4wMmMtMC4wMiwwLTAuMDMsMC0wLjA0LTAuMDEgICAgYy0wLjIzLTAuMTUtMC41LTAuMjItMC43OC0wLjIyaC0xLjYxYy0wLjU2LDAtMS4wOCwwLjI5LTEuMzcsMC43OEw3OS43Miw2LjZsLTAuMzQtMC41NkM3OS4wOSw1LjU2LDc4LjU3LDUuMjcsNzgsNS4yN2gtMS42ICAgIGMtMC42LDAtMS4xMywwLjM3LTEuMzUsMC45MmMtMi4xOS0xLjY2LTUuMjgtMS40Ny03LjI2LDAuNDVjLTAuMzUsMC4zNC0wLjY1LDAuNzItMC44OSwxLjE0Yy0wLjktMS42Mi0yLjU4LTIuNzItNC41LTIuNzIgICAgYy0wLjUsMC0xLjAxLDAuMDctMS40OCwwLjIzVjMuNTFjMC0wLjgyLTAuNjYtMS40OC0xLjQ3LTEuNDhoLTEuNGMtMC44MSwwLTEuNDcsMC42Ni0xLjQ3LDEuNDd2My43NSAgICBjLTAuOTUtMS4zNi0yLjUtMi4xOC00LjE3LTIuMTljLTAuNzQsMC0xLjQ2LDAuMTYtMi4xMiwwLjQ3Yy0wLjI0LTAuMTctMC41NC0wLjI2LTAuODQtMC4yNmgtMS40Yy0wLjQ1LDAtMC44NywwLjIxLTEuMTUsMC41NiAgICBjLTAuMDItMC4wMy0wLjA0LTAuMDUtMC4wNy0wLjA4Yy0wLjI4LTAuMy0wLjY4LTAuNDctMS4wOS0wLjQ3aC0xLjM5Yy0wLjMsMC0wLjYsMC4wOS0wLjg0LDAuMjZjLTAuNjctMC4zLTEuMzktMC40Ni0yLjEyLTAuNDYgICAgYy0xLjgzLDAtMy40MywxLTQuMzcsMi41Yy0wLjItMC40Ni0wLjQ4LTAuODktMC44My0xLjI1Yy0wLjgtMC44MS0xLjg5LTEuMjUtMy4wMi0xLjI1aC0wLjAxYy0wLjg5LDAuMDEtMS43NSwwLjMzLTIuNDYsMC44OCAgICBjLTAuNzQtMC41Ny0xLjY0LTAuODgtMi41Ny0wLjg4SDI4LjFjLTAuMjksMC0wLjU4LDAuMDMtMC44NiwwLjExYy0wLjI4LDAuMDYtMC41NiwwLjE2LTAuODIsMC4yOGMtMC4yMS0wLjEyLTAuNDUtMC4xOC0wLjctMC4xOCAgICBoLTEuNGMtMC44MiwwLTEuNDcsMC42Ni0xLjQ3LDEuNDd2Ny41YzAsMC44MiwwLjY2LDEuNDcsMS40NywxLjQ3aDEuNGMwLjgyLDAsMS40OC0wLjY2LDEuNDgtMS40OGwwLDBWOS43OSAgICBjMC4wMy0wLjM2LDAuMjMtMC41OSwwLjM2LTAuNTljMC4xOCwwLDAuMzgsMC4xOCwwLjM4LDAuNDd2NC41N2MwLDAuODIsMC42NiwxLjQ3LDEuNDcsMS40N2gxLjQxYzAuODIsMCwxLjQ3LTAuNjYsMS40Ny0xLjQ3ICAgIGwtMC4wMS00LjU3YzAuMDYtMC4zMiwwLjI1LTAuNDcsMC4zNS0wLjQ3YzAuMTgsMCwwLjM4LDAuMTgsMC4zOCwwLjQ3djQuNTdjMCwwLjgyLDAuNjYsMS40NywxLjQ3LDEuNDdoMS40MSAgICBjMC44MiwwLDEuNDctMC42NiwxLjQ3LTEuNDd2LTAuMzhjMC45NiwxLjI5LDIuNDYsMi4wNiw0LjA2LDIuMDZjMC43NCwwLDEuNDYtMC4xNiwyLjEyLTAuNDdjMC4yNCwwLjE3LDAuNTQsMC4yNiwwLjg0LDAuMjZoMS4zOSAgICBjMC4zLDAsMC42LTAuMDksMC44NC0wLjI2djIuMDFjMCwwLjgyLDAuNjYsMS40NywxLjQ3LDEuNDdoMS40YzAuODIsMCwxLjQ3LTAuNjYsMS40Ny0xLjQ3di0xLjc3YzAuNDgsMC4xNSwwLjk5LDAuMjMsMS40OSwwLjIyICAgIGMxLjcsMCwzLjIyLTAuODcsNC4xNy0yLjJ2MC41MmMwLDAuODIsMC42NiwxLjQ3LDEuNDcsMS40N2gxLjRjMC4zLDAsMC42LTAuMDksMC44NC0wLjI2YzAuNjYsMC4zMSwxLjM5LDAuNDcsMi4xMiwwLjQ3ICAgIGMxLjkyLDAsMy42LTEuMSw0LjQ5LTIuNzNjMS41NCwyLjY1LDQuOTUsMy41Myw3LjU4LDEuOThjMC4xOC0wLjExLDAuMzYtMC4yMiwwLjUzLTAuMzZjMC4yMiwwLjU1LDAuNzYsMC45MSwxLjM1LDAuOUg3OCAgICBjMC41NiwwLDEuMDgtMC4yOSwxLjM3LTAuNzhsMC4zNy0wLjYxbDAuMzcsMC42MWMwLjI5LDAuNDgsMC44MSwwLjc4LDEuMzgsMC43OGgxLjZjMC44MSwwLDEuNDYtMC42NiwxLjQ1LTEuNDYgICAgQzg0LjQ5LDE0LjAyLDg0LjQ0LDEzLjgsODQuMzQsMTMuNTlMODQuMzQsMTMuNTl6IE0zNS44NiwxNC40N2gtMS40MWMtMC4xMywwLTAuMjMtMC4xMS0wLjIzLTAuMjNWOS42OCAgICBjMC0wLjk4LTAuNzQtMS43MS0xLjYyLTEuNzFjLTAuOCwwLTEuNDYsMC43LTEuNTksMS42MmwwLjAxLDQuNjZjMCwwLjEzLTAuMSwwLjIzLTAuMjMsMC4yM2gtMS40MWMtMC4xMywwLTAuMjMtMC4xMS0wLjIzLTAuMjMgICAgVjkuNjhjMC0wLjk4LTAuNzQtMS43MS0xLjYyLTEuNzFjLTAuODUsMC0xLjU0LDAuNzktMS42LDEuOHY0LjQ4YzAsMC4xMy0wLjEsMC4yMy0wLjIzLDAuMjNoLTEuNGMtMC4xMywwLTAuMjMtMC4xMS0wLjIzLTAuMjMgICAgVjYuNzRjMC4wMS0wLjEzLDAuMTEtMC4yMiwwLjIzLTAuMjJoMS40YzAuMTMsMCwwLjIyLDAuMTEsMC4yMywwLjIyVjcuNGMwLjUtMC42OCwxLjMtMS4wOSwyLjE2LTEuMWgwLjAzICAgIGMxLjA5LDAsMi4wOSwwLjYsMi42LDEuNTVjMC40NS0wLjk1LDEuNC0xLjU1LDIuNDQtMS41NmMxLjYyLDAsMi45MywxLjI1LDIuOSwyLjc4bDAuMDEsNS4xNkMzNi4wOSwxNC4zNiwzNS45OCwxNC40NiwzNS44NiwxNC40NyAgICBMMzUuODYsMTQuNDd6IE00NS45NywxNC4yNGMwLDAuMTMtMC4xLDAuMjMtMC4yMywwLjIzaC0xLjRjLTAuMTMsMC0wLjIzLTAuMTEtMC4yMy0wLjIzVjEzLjVjLTAuNywwLjc2LTEuNjksMS4xOC0yLjcyLDEuMTggICAgYy0yLjE3LDAtMy45NC0xLjg3LTMuOTQtNC4xOXMxLjc3LTQuMTksMy45NC00LjE5YzEuMDMsMCwyLjAyLDAuNDMsMi43MywxLjE4VjYuNzRjMC0wLjEzLDAuMS0wLjIzLDAuMjMtMC4yM2gxLjQgICAgYzAuMTItMC4wMSwwLjIyLDAuMDgsMC4yMywwLjIxYzAsMC4wMSwwLDAuMDEsMCwwLjAydjcuNTFoLTAuMDFWMTQuMjR6IE01Mi40MSwxNC42N2MtMS4wMywwLTIuMDItMC40My0yLjczLTEuMTh2My45NyAgICBjMCwwLjEzLTAuMSwwLjIzLTAuMjMsMC4yM2gtMS40Yy0wLjEzLDAtMC4yMy0wLjEtMC4yMy0wLjIzVjYuNzVjMC0wLjEzLDAuMS0wLjIyLDAuMjMtMC4yMmgxLjRjMC4xMywwLDAuMjMsMC4xMSwwLjIzLDAuMjN2MC43MyAgICBjMC43MS0wLjc2LDEuNy0xLjE4LDIuNzMtMS4xOGMyLjE3LDAsMy45NCwxLjg2LDMuOTQsNC4xOFM1NC41OCwxNC42Nyw1Mi40MSwxNC42N3ogTTY2LjI0LDExLjM5Yy0wLjM5LDEuODctMS45NiwzLjI5LTMuODQsMy4yOSAgICBjLTEuMDMsMC0yLjAyLTAuNDMtMi43My0xLjE4djAuNzNjMCwwLjEzLTAuMSwwLjIzLTAuMjMsMC4yM2gtMS40Yy0wLjEzLDAtMC4yMy0wLjExLTAuMjMtMC4yM1YzLjUxYzAtMC4xMywwLjEtMC4yMywwLjIzLTAuMjMgICAgaDEuNGMwLjEzLDAsMC4yMywwLjExLDAuMjMsMC4yM3YzLjk3YzAuNzEtMC43NSwxLjctMS4xOCwyLjczLTEuMTdjMS44OCwwLDMuNDUsMS40LDMuODQsMy4yOEM2Ni4zNywxMC4xOSw2Ni4zNywxMC44LDY2LjI0LDExLjM5ICAgIEw2Ni4yNCwxMS4zOUw2Ni4yNCwxMS4zOXogTTcxLjY3LDE0LjY4Yy0yLDAuMDEtMy43My0xLjM1LTQuMTctMy4zYy0wLjEzLTAuNTktMC4xMy0xLjE5LDAtMS43N2MwLjQ0LTEuOTQsMi4xNy0zLjMxLDQuMTctMy4zICAgIGMyLjM2LDAsNC4yNiwxLjg3LDQuMjYsNC4xOVM3NC4wMywxNC42OCw3MS42NywxNC42OEw3MS42NywxNC42OHogTTgzLjA0LDE0LjQ3aC0xLjYxYy0wLjEzLDAtMC4yNC0wLjA2LTAuMy0wLjE3bC0xLjQ0LTIuMzkgICAgbC0xLjQ0LDIuMzljLTAuMDYsMC4xMS0wLjE4LDAuMTctMC4zLDAuMTdoLTEuNjFjLTAuMDQsMC0wLjA4LTAuMDEtMC4xMi0wLjAzYy0wLjA5LTAuMDYtMC4xMy0wLjE5LTAuMDYtMC4yOGwwLDBsMi40My0zLjY4ICAgIEw3Ni4yLDYuODRjLTAuMDItMC4wMy0wLjAzLTAuMDctMC4wMy0wLjEyYzAtMC4xMiwwLjA5LTAuMjEsMC4yMS0wLjIxaDEuNjFjMC4xMywwLDAuMjQsMC4wNiwwLjMsMC4xN2wxLjQxLDIuMzZsMS40MS0yLjM2ICAgIGMwLjA2LTAuMTEsMC4xOC0wLjE3LDAuMy0wLjE3aDEuNjFjMC4wNCwwLDAuMDgsMC4wMSwwLjEyLDAuMDNjMC4wOSwwLjA2LDAuMTMsMC4xOSwwLjA2LDAuMjhsMCwwbC0yLjM4LDMuNjRsMi40MywzLjY3ICAgIGMwLjAyLDAuMDMsMC4wMywwLjA3LDAuMDMsMC4xMkM4My4yNSwxNC4zOCw4My4xNiwxNC40Nyw4My4wNCwxNC40N0w4My4wNCwxNC40N0w4My4wNCwxNC40N3oiLz4gIDxwYXRoIGNsYXNzPSJzdDAiIHN0eWxlPSJvcGFjaXR5OjAuOTsgZmlsbDogI0ZGRkZGRjsgZW5hYmxlLWJhY2tncm91bmQ6IG5ldzsiIGQ9Ik0xMC41LDEuMjRjLTUuMTEsMC05LjI1LDQuMTUtOS4yNSw5LjI1czQuMTUsOS4yNSw5LjI1LDkuMjVzOS4yNS00LjE1LDkuMjUtOS4yNSAgICBDMTkuNzUsNS4zOCwxNS42MSwxLjI0LDEwLjUsMS4yNHogTTE0Ljg5LDEyLjc3Yy0xLjkzLDEuOTMtNC43OCwyLjMxLTYuNywyLjMxYy0wLjcsMC0xLjQxLTAuMDUtMi4xLTAuMTZjMCwwLTEuMDItNS42NCwyLjE0LTguODEgICAgYzAuODMtMC44MywxLjk1LTEuMjgsMy4xMy0xLjI4YzEuMjcsMCwyLjQ5LDAuNTEsMy4zOSwxLjQyQzE2LjU5LDguMDksMTYuNjQsMTEsMTQuODksMTIuNzd6Ii8+ICA8cGF0aCBjbGFzcz0ic3QxIiBzdHlsZT0ib3BhY2l0eTowLjM1OyBlbmFibGUtYmFja2dyb3VuZDpuZXc7IiBkPSJNMTAuNS0wLjAxQzQuNy0wLjAxLDAsNC43LDAsMTAuNDlzNC43LDEwLjUsMTAuNSwxMC41UzIxLDE2LjI5LDIxLDEwLjQ5QzIwLjk5LDQuNywxNi4zLTAuMDEsMTAuNS0wLjAxeiAgICAgTTEwLjUsMTkuNzRjLTUuMTEsMC05LjI1LTQuMTUtOS4yNS05LjI1czQuMTQtOS4yNiw5LjI1LTkuMjZzOS4yNSw0LjE1LDkuMjUsOS4yNUMxOS43NSwxNS42MSwxNS42MSwxOS43NCwxMC41LDE5Ljc0eiIvPiAgPHBhdGggY2xhc3M9InN0MSIgc3R5bGU9Im9wYWNpdHk6MC4zNTsgZW5hYmxlLWJhY2tncm91bmQ6bmV3OyIgZD0iTTE0Ljc0LDYuMjVDMTIuOSw0LjQxLDkuOTgsNC4zNSw4LjIzLDYuMWMtMy4xNiwzLjE3LTIuMTQsOC44MS0yLjE0LDguODFzNS42NCwxLjAyLDguODEtMi4xNCAgICBDMTYuNjQsMTEsMTYuNTksOC4wOSwxNC43NCw2LjI1eiBNMTIuNDcsMTAuMzRsLTAuOTEsMS44N2wtMC45LTEuODdMOC44LDkuNDNsMS44Ni0wLjlsMC45LTEuODdsMC45MSwxLjg3bDEuODYsMC45TDEyLjQ3LDEwLjM0eiIgICAgLz4gIDxwb2x5Z29uIGNsYXNzPSJzdDAiIHN0eWxlPSJvcGFjaXR5OjAuOTsgZmlsbDogI0ZGRkZGRjsgZW5hYmxlLWJhY2tncm91bmQ6IG5ldzsiIHBvaW50cz0iMTQuMzMsOS40MyAxMi40NywxMC4zNCAxMS41NiwxMi4yMSAxMC42NiwxMC4zNCA4LjgsOS40MyAxMC42Niw4LjUzIDExLjU2LDYuNjYgMTIuNDcsOC41MyAgICIvPjwvZz48L3N2Zz4=)}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:rgba(255,255,255,.5);margin:0}.mapboxgl-ctrl-attrib.mapboxgl-compact{padding-top:2px;padding-bottom:2px;margin:0 10px 10px;position:relative;padding-right:24px;background-color:#fff;border-radius:3px 12px 12px 3px;visibility:hidden}.mapboxgl-ctrl-attrib.mapboxgl-compact:hover{visibility:visible}.mapboxgl-ctrl-attrib.mapboxgl-compact:after{content:'';cursor:pointer;position:absolute;bottom:0;right:0;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0D%0A%09%3Cpath%20fill%3D%27%23333333%27%20fill-rule%3D%27evenodd%27%20d%3D%27M4%2C10a6%2C6%200%201%2C0%2012%2C0a6%2C6%200%201%2C0%20-12%2C0%20M9%2C7a1%2C1%200%201%2C0%202%2C0a1%2C1%200%201%2C0%20-2%2C0%20M9%2C10a1%2C1%200%201%2C1%202%2C0l0%2C3a1%2C1%200%201%2C1%20-2%2C0%27%20%2F%3E%0D%0A%3C%2Fsvg%3E");background-color:rgba(255,255,255,.5);width:24px;height:24px;box-sizing:border-box;visibility:visible;border-radius:12px}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-ctrl-scale{background-color:rgba(255,255,255,.75);font-size:10px;border-width:medium 2px 2px;border-style:none solid solid;border-color:#333;padding:0 5px;color:#333}.mapboxgl-popup{position:absolute;display:-webkit-flex;display:flex;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:none;border-radius:0 3px 0 0;cursor:pointer;background-color:rgba(0,0,0,0)}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-marker{position:absolute}.mapboxgl-user-location-dot{background-color:#1DA1F2;width:16px;height:16px;border-radius:50%;box-shadow:0 0 2px rgba(0,0,0,.25);border:2px solid #fff}.mapboxgl-user-location-dot:after{content:'';display:block;box-shadow:#1DA1F2 0 0 0 2px;width:16px;height:16px;border-radius:50%;position:relative;z-index:-1;-webkit-animation:mapboxgl-user-location-dot-pulse 2s;-moz-animation:mapboxgl-user-location-dot-pulse 2s;-ms-animation:mapboxgl-user-location-dot-pulse 2s;animation:mapboxgl-user-location-dot-pulse 2s;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;-ms-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-box-shadow:0 0 0 0 rgba(29,161,242,.8)}70%{-webkit-box-shadow:0 0 0 15px rgba(29,161,242,0)}242%{-webkit-box-shadow:0 0 0 0 rgba(29,161,242,0)}}@-ms-keyframes mapboxgl-user-location-dot-pulse{0%{-ms-box-shadow:0 0 0 0 rgba(29,161,242,.8)}70%{-ms-box-shadow:0 0 0 15px rgba(29,161,242,0)}242%{-ms-box-shadow:0 0 0 0 rgba(29,161,242,0)}}@keyframes mapboxgl-user-location-dot-pulse{0%{-moz-box-shadow:0 0 0 0 rgba(29,161,242,.8);box-shadow:0 0 0 0 rgba(29,161,242,.4)}70%{-moz-box-shadow:0 0 0 15px rgba(29,161,242,0);box-shadow:0 0 0 15px rgba(29,161,242,0)}100%{-moz-box-shadow:0 0 0 0 rgba(29,161,242,0);box-shadow:0 0 0 0 rgba(29,161,242,0)}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}.azure-maps-control-container>.style-options.icons .azure-maps-control-button:active img,.azure-maps-control-container>.style-options.list button:active img{opacity:.6}@media print{.mapbox-improve-map{display:none}}@media (inverted-colors:inverted){.atlas-map-canvas,.azure-map-logo{filter:invert()}}.atlas-map-canvas-container{position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none;-ms-user-select:none}.atlas-map-canvas,.map-copyright>a{pointer-events:auto}.azure-map-logo{background-repeat:no-repeat;background-position:center;background-size:100px 25px;height:25px;width:100px;position:absolute;bottom:15px;right:10px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 73.8 17.6'%3E%3Cpath d='M26.2 10l-.4 1.3a5.638 5.638 0 0 0-.4-1.2L23 4h-2.3v9.6h1.5V5.8c.1.3.1.6.2.8l2.8 7h1L29 6.5a1.854 1.854 0 0 1 .2-.7c0 .7-.1 1.3-.1 1.7v6.1h1.6V4h-2.2zm6-3.3h1.5v6.9h-1.5zm.8-2.9a1.08 1.08 0 0 0-.7.3.853.853 0 0 0 0 1.3.908.908 0 0 0 .7.3 1.08 1.08 0 0 0 .7-.3.908.908 0 0 0 .3-.7.908.908 0 0 0-.3-.7 1.854 1.854 0 0 0-.7-.2m6.3 2.9a2.769 2.769 0 0 0-.9-.1 4.136 4.136 0 0 0-1.9.5 2.995 2.995 0 0 0-1.2 1.3 4.477 4.477 0 0 0-.4 2 3.922 3.922 0 0 0 .4 1.8 3.447 3.447 0 0 0 1.2 1.2 3.287 3.287 0 0 0 1.7.4 3.198 3.198 0 0 0 1.9-.5v-1.5l-.1.1a2.01 2.01 0 0 1-.8.4 1.702 1.702 0 0 1-.7.1 2.035 2.035 0 0 1-1.5-.6 1.941 1.941 0 0 1-.5-1.6 3.371 3.371 0 0 1 .5-1.7 2.035 2.035 0 0 1 1.5-.6 2.695 2.695 0 0 1 1.5.5V6.9a1.854 1.854 0 0 0-.7-.2m5.1-.1a1.16 1.16 0 0 0-1 .4 2.361 2.361 0 0 0-.6.9V6.7h-1.5v6.9h1.5v-3.5a2.822 2.822 0 0 1 .4-1.5 1.326 1.326 0 0 1 1-.6.901.901 0 0 1 .5.1.758.758 0 0 1 .4.2H45V6.7a1.268 1.268 0 0 0-.6-.1m4.2 0a3.188 3.188 0 0 0-2.6 1 3.699 3.699 0 0 0-.9 2.7 4.109 4.109 0 0 0 .9 2.6 3.47 3.47 0 0 0 4.9-.1 3.699 3.699 0 0 0 .9-2.7 3.607 3.607 0 0 0-.9-2.6 2.696 2.696 0 0 0-2.3-.9m1.2 5.3a1.708 1.708 0 0 1-2.6 0 3.32 3.32 0 0 1-.5-1.6 2.618 2.618 0 0 1 .5-1.7 1.708 1.708 0 0 1 2.6 0 3.371 3.371 0 0 1 .5 1.7 2.914 2.914 0 0 1-.5 1.6m5.5-2.3a2.622 2.622 0 0 1-.9-.5.725.725 0 0 1 0-1 1.445 1.445 0 0 1 .7-.2 2.202 2.202 0 0 1 .8.1c.2.1.5.2.7.3l.1.1V6.9a1.854 1.854 0 0 0-.7-.2c-.3 0-.5-.1-.8-.1a2.792 2.792 0 0 0-1.8.6 1.8 1.8 0 0 0-.7 1.5 1.077 1.077 0 0 0 .2.8 1.47 1.47 0 0 0 .5.6 8.794 8.794 0 0 0 1 .6l.8.4c.1.1.3.2.4.3s.1.2.1.4c0 .5-.3.7-1 .7a2.92 2.92 0 0 1-.9-.2 4.053 4.053 0 0 1-.9-.5l-.1-.1v1.6c.3.1.5.2.8.3a2.769 2.769 0 0 0 .9.1 3.077 3.077 0 0 0 1.9-.6 1.99 1.99 0 0 0 .7-1.6 1.922 1.922 0 0 0-.4-1.2c-.4-.2-.9-.5-1.4-.7m5.9-3a3.188 3.188 0 0 0-2.6 1 3.699 3.699 0 0 0-.9 2.7 4.109 4.109 0 0 0 .9 2.6 3.47 3.47 0 0 0 4.9-.1 3.699 3.699 0 0 0 .9-2.7 3.607 3.607 0 0 0-.9-2.6 2.696 2.696 0 0 0-2.3-.9m1.2 5.3a1.708 1.708 0 0 1-2.6 0 3.32 3.32 0 0 1-.5-1.6 2.618 2.618 0 0 1 .5-1.7 1.708 1.708 0 0 1 2.6 0 3.371 3.371 0 0 1 .5 1.7 2.518 2.518 0 0 1-.5 1.6M72.8 8.1V6.7h-1.6v-2l-1.5.5v1.5h-2.3v-.8a1.613 1.613 0 0 1 .3-.9 1.08 1.08 0 0 1 .7-.3 1.854 1.854 0 0 1 .7.2h.1V3.4a2.769 2.769 0 0 0-.9-.1 2.375 2.375 0 0 0-1.2.3 1.42 1.42 0 0 0-.8.9 2.768 2.768 0 0 0-.3 1.3v1h-1.1V8H66v5.6h1.6V8.1h2.3v3.5c0 1.5.7 2.2 2 2.2a1.952 1.952 0 0 0 .7-.1c.2 0 .3-.1.5-.2v-1.3l-.1.1a.367.367 0 0 1-.3.1.367.367 0 0 0-.3.1.908.908 0 0 1-.7-.3 1.486 1.486 0 0 1-.2-.9V8.1z' fill='%23ababab'/%3E%3Cpath d='M.8.8h7.3v7.6H.8z' fill='%23f25022'/%3E%3Cpath d='M8.9.8h7.3v7.6H8.9z' fill='%237fba00'/%3E%3Cpath d='M.8 9.2h7.3v7.6H.8z' fill='%2300a4ef'/%3E%3Cpath d='M8.9 9.2h7.3v7.6H8.9z' fill='%23ffb900'/%3E%3C/svg%3E")}.map-copyright{display:flex;flex-direction:row;position:absolute;bottom:1px;right:5px}.map-copyright>*{font-size:11px;height:11px;line-height:11px;text-align:right}.marker-collection-container,.popup-collection-container{position:absolute;width:100%;height:100%;overflow:hidden;left:0;top:0}.map-copyright>:not(:last-child){margin-right:5px}.map-copyright>a{text-decoration:none;cursor:pointer}.map-copyright>a:hover{-webkit-text-fill-color:#0af;-moz-text-fill-color:#0af;text-decoration:underline;text-decoration-color:#0af;-moz-text-decoration-color:#0af}.atlas-map.high-contrast-light .map-copyright>*,.map-copyright.light>*{color:#000;-webkit-text-fill-color:#000;-moz-text-fill-color:#000}.atlas-map.high-contrast-dark .map-copyright>*,.map-copyright.dark>*{color:#CCC;-webkit-text-fill-color:#CCC;-moz-text-fill-color:#CCC}.marker-collection-container{pointer-events:none}.marker-container{pointer-events:auto}.popup-collection-container{pointer-events:none;user-select:none}.popup-container{display:flex;pointer-events:auto}.popup-container.bottom,.popup-container.bottom-left,.popup-container.bottom-right{flex-direction:column}.popup-container.left{flex-direction:row-reverse}.popup-container.right{flex-direction:row}.popup-container.top,.popup-container.top-left,.popup-container.top-right{flex-direction:column-reverse}.popup-content-container{display:block;box-shadow:-3px -3px 4px rgba(0,0,0,.32);min-width:30px;border-radius:4px;white-space:nowrap;position:relative}.popup-container.top-left>.popup-content-container{border-top-left-radius:0}.popup-container.top-right>.popup-content-container{border-top-right-radius:0}.popup-container.bottom-left>.popup-content-container{border-bottom-left-radius:0}.popup-container.bottom-right>.popup-content-container{border-bottom-right-radius:0}.popup-close{position:absolute;top:0;right:0;color:#444;font-size:20px;font-family:Arial,Helvetica,sans-serif;line-height:20px;height:20px;width:20px;text-align:center;cursor:pointer;background:0 0;border:0;padding:0}.popup-close:hover{color:#222}.popup-arrow{display:block;width:0;height:0;border:10px solid transparent;z-index:1}.popup-container.bottom>.popup-arrow{align-self:center;border-bottom:none;border-top-color:inherit}.popup-container.bottom-left>.popup-arrow{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:inherit}.popup-container.bottom-right>.popup-arrow{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:inherit}.popup-container.left>.popup-arrow{align-self:center;border-left:none;border-right-color:inherit}.popup-container.right>.popup-arrow{align-self:center;border-right:none;border-left-color:inherit}.popup-container.top>.popup-arrow{align-self:center;border-top:none;border-bottom-color:inherit}.popup-container.top-left>.popup-arrow{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:inherit}.popup-container.top-right>.popup-arrow{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:inherit}.azure-maps-control-popup-template{position:relative;padding:10px;max-width:550px;font:12px/20px 'Helvetica Neue',Arial,Helvetica,sans-serif}.azure-maps-control-popup-template h1,.azure-maps-control-popup-template h2,.azure-maps-control-popup-template h3{margin:0!important}.azure-maps-control-popup-template iframe{border:0}@media screen and (max-width:340px){.azure-maps-control-popup-template{max-width:300px}}.azure-maps-control-popup-template-title{width:100%;font-size:14px;font-weight:700;word-wrap:break-word;white-space:normal}.azure-maps-control-popup-template-content{width:100%;overflow-y:auto;max-height:280px}.azure-maps-control-popup-template-content-item{font:12px/20px 'Helvetica Neue',Arial,Helvetica,sans-serif;width:100%;padding-top:10px;word-wrap:break-word;white-space:normal}.hidden-accessible-element,.incident-popup-info>.message,.incident-popup-subtitle,.incident-popup-title{white-space:nowrap;overflow:hidden}.azure-maps-control-popup-template-table{font-size:12px;width:100%;padding-top:10px;border-collapse:collapse}.azure-maps-control-popup-template-table tr:nth-child(even){background-color:rgba(255,255,255,.5)}.azure-maps-control-popup-template-table tr:nth-child(odd){background-color:rgba(225,225,225,.5)}.azure-maps-control-popup-template-table th{border-right:1px solid rgba(150,150,150,.5)}.azure-maps-control-popup-template-table td,.azure-maps-control-popup-template-table th{padding:6px 8px;text-align:left;vertical-align:top;word-wrap:normal;font-size:12px;font-weight:400}.incident-popup-content{color:#231F20;min-width:140px;height:126px;padding:0;margin:0}.incident-popup-body,.incident-popup-header{padding:8px;margin:0;color:inherit}.incident-popup-header{height:23px;border-top-left-radius:4px;border-top-right-radius:4px}.incident-popup-title{color:inherit;font-size:12px;line-height:14px}.incident-popup-subtitle{color:inherit;font-size:8px;line-height:12px}.incident-popup-info>.message{display:inline-block;color:inherit;font-size:8pt;line-height:10pt;text-overflow:ellipsis;margin-left:5pt}.atlas-map.high-contrast-light .azure-maps-control-container .traffic-legend,.azure-maps-control-container.light .traffic-legend,.traffic-legend{color:#000;background-color:#fff;box-shadow:rgba(0,0,0,.16) 0 0 4px}.incident-popup-info>.icon{display:inline-block;background-repeat:no-repeat;background-position:center;background-size:10pt 10pt;height:10pt;width:10pt}.incident-popup-info>.delay{background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNy4wMDE5IDM3Ij48dGl0bGU+aW5jaWRlbnQ8L3RpdGxlPjxwb2x5Z29uIHBvaW50cz0iMzAuNDQ5IDIwLjQ0OCAxNi44MzggMjAuNDQ4IDE2LjgzOCA2Ljg0MSAxOS41MDQgNi44NDEgMTkuNTA0IDE3Ljc4NiAzMC40NDkgMTcuNzg2IDMwLjQ0OSAyMC40NDgiIGZpbGw9IiM2NzY4NjciLz48cGF0aCBkPSJNMTguNTAxOSwzN2ExOC41LDE4LjUsMCwxLDEsMC0zN1YyLjY2MkExNS44MzgsMTUuODM4LDAsMSwwLDM0LjMzNjIsMTguNWgyLjY2NTdBMTguNTIxMSwxOC41MjExLDAsMCwxLDE4LjUwMTksMzdaIiBmaWxsPSIjNjc2ODY3Ii8+PHBhdGggZD0iTTE5LjczMDYsMi43MWMtLjQwNTItLjAzLS44MTQyLS4wNDgzLTEuMjI4Ny0uMDQ4M1YwYy40ODE1LDAsLjk2MTEuMDE4NiwxLjQzMzIuMDU1OFoiIGZpbGw9IiM2NzY4NjciLz48cGF0aCBkPSJNMzMuODk5MywxNC43Nzg0YTE1Ljg4NjUsMTUuODg2NSwwLDAsMC0uNzcxNS0yLjM1NzFsMi40NjEyLTEuMDI2MWExOC43ODcyLDE4Ljc4NzIsMCwwLDEsLjkwMTYsMi43NTQ5Wm0tMS45MDM1LTQuNTY5MmExNS44MiwxNS44MiwwLDAsMC0xLjQ2MTEtMi4wMDc2bDIuMDIyNS0xLjczMjVhMTguMzI4NiwxOC4zMjg2LDAsMCwxLDEuNzEsMi4zNDIyWk0yOC43NzgsNi40NDY3YTE2LjY4NjEsMTYuNjg2MSwwLDAsMC0yLjAxNjktMS40NjExTDI4LjE1OSwyLjcxNzdhMTguODE3MiwxOC44MTcyLDAsMCwxLDIuMzQ0MSwxLjY5OTFaTTI0LjU1NDUsMy44NjI4YTE1LjU1ODIsMTUuNTU4MiwwLDAsMC0yLjM2NjQtLjc2NTlMMjIuODA5LjUwMTlhMTkuNTM0LDE5LjUzNCwwLDAsMSwyLjc1NjguODkyM1oiIGZpbGw9IiM2NzY4NjciLz48cGF0aCBkPSJNMzcuMDAxOSwxOC41SDM0LjMzNjJjMC0uNDE2NC0uMDE0OS0uODI1NC0uMDQ2NS0xLjIzMDZsMi42NTgzLS4yMDA4QzM2Ljk4MzMsMTcuNTQwOCwzNy4wMDE5LDE4LjAxNjcsMzcuMDAxOSwxOC41WiIgZmlsbD0iIzY3Njg2NyIvPjwvc3ZnPg==)}.incident-popup-info>.length{background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMSAyNiI+PHRpdGxlPmluY2lkZW50PC90aXRsZT48cGF0aCBkPSJNMCwyLjE2NjdWMEgzMVYyNkgwVjIzLjgzMzNIMi4yMTQzVjEzSDQuNDI4NlYyMy44MzMzSDguODU3MVYxOS41aDIuMjE0M3Y0LjMzMzNIMTUuNVYxM2gyLjIxNDNWMjMuODMzM2g0LjQyODZWMTkuNWgyLjIxNDN2NC4zMzMzaDQuNDI4NlYyLjE2NjdaIiBmaWxsPSIjNjc2ODY3Ii8+PC9zdmc+)}.incident-popup-info>.from{background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNyAzNiI+PHRpdGxlPmluY2lkZW50PC90aXRsZT48cGF0aCBkPSJNMTMuNSwwYTEzLjM3LDEzLjM3LDAsMCwxLDMuNTg1OS40NzkyLDEzLjc4NjYsMTMuNzg2NiwwLDAsMSwzLjIyNzMsMS4zNDM4LDEzLjMzODYsMTMuMzM4NiwwLDAsMSw2LjIwMTYsNy45Njg3QTEyLjkwMDksMTIuOTAwOSwwLDAsMSwyNywxMy4zMzMzYTEwLjU2NjQsMTAuNTY2NCwwLDAsMS0uMzQ4LDIuNzQsMTMuNDA1MSwxMy40MDUxLDAsMCwxLTEuMDAyLDIuNTkzOEwxMy41LDM2LDEuMzUsMTguNjY2N0ExMy40MDUsMTMuNDA1LDAsMCwxLC4zNDgsMTYuMDcyOSwxMC41NjY0LDEwLjU2NjQsMCwwLDEsMCwxMy4zMzMzLDEyLjkwMDksMTIuOTAwOSwwLDAsMSwuNDg1Miw5Ljc5MTcsMTMuNDM0NiwxMy40MzQ2LDAsMCwxLDEuODQ1Nyw2LjYwNDJhMTMuNDUzLDEzLjQ1MywwLDAsMSw0Ljg0MS00Ljc4MTJBMTMuNzg2NSwxMy43ODY1LDAsMCwxLDkuOTE0MS40NzkyLDEzLjM3LDEzLjM3LDAsMCwxLDEzLjUsME0yMy41NDA2LDE3LjYyNXEwLS4wMjA4LjAxMDUtLjAyMDh0LjAxMDUtLjAyMDhhOC45OCw4Ljk4LDAsMCwwLC44MDE2LTIuMDYyNSw4Ljg4MTYsOC44ODE2LDAsMCwwLC4yNzQyLTIuMTg3NSwxMC41MzM3LDEwLjUzMzcsMCwwLDAtLjg3NTQtNC4yNzA4LDExLjE1NjEsMTEuMTU2MSwwLDAsMC0yLjM5NDEtMy41LDExLjMxLDExLjMxLDAsMCwwLTMuNTQzNy0yLjM2NDZBMTAuODk2MSwxMC44OTYxLDAsMCwwLDEzLjUsMi4zMzMzYTEwLjg5NjEsMTAuODk2MSwwLDAsMC00LjMyNDIuODY0NkExMS4zMSwxMS4zMSwwLDAsMCw1LjYzMiw1LjU2MjVhMTEuMTU2MSwxMS4xNTYxLDAsMCwwLTIuMzk0MSwzLjUsMTAuNTMzNywxMC41MzM3LDAsMCwwLS44NzU0LDQuMjcwOCw4Ljg4MTUsOC44ODE1LDAsMCwwLC4yNzQyLDIuMTg3NSw4Ljk4LDguOTgsMCwwLDAsLjgwMTYsMi4wNjI1cTAsLjAyMDguMDEwNS4wMjA4dC4wMTA1LjAyMDhMMTMuNSwzMC43OTE3LDIzLjU0MDYsMTcuNjI1TTEzLjUsNS41YTcuODEyMiw3LjgxMjIsMCwwLDEsMy4wOS42MTQ2LDguMDA5Myw4LjAwOTMsMCwwLDEsMi41MjA3LDEuNjc3MSw3LjksNy45LDAsMCwxLDEuNjk4LDIuNDksNy43OTYsNy43OTYsMCwwLDEsMCw2LjEwNDIsNy45LDcuOSwwLDAsMS0xLjY5OCwyLjQ5QTguMDA5Myw4LjAwOTMsMCwwLDEsMTYuNTksMjAuNTUyMWE4LjA3NjQsOC4wNzY0LDAsMCwxLTYuMTgsMEE4LjAwOTIsOC4wMDkyLDAsMCwxLDcuODg5MSwxOC44NzVhNy45LDcuOSwwLDAsMS0xLjY5OC0yLjQ5LDcuNzk2LDcuNzk2LDAsMCwxLDAtNi4xMDQyLDcuOSw3LjksMCwwLDEsMS42OTgtMi40OUE4LjAwOTIsOC4wMDkyLDAsMCwxLDEwLjQxLDYuMTE0Niw3LjgxMjMsNy44MTIzLDAsMCwxLDEzLjUsNS41bTAsMTMuMzMzM2E1LjU0MDcsNS41NDA3LDAsMCwwLDUuMTM2My0zLjM1NDIsNS41NCw1LjU0LDAsMCwwLDAtNC4yOTE3LDUuNTA1NCw1LjUwNTQsMCwwLDAtMS4xOTE4LTEuNzUsNS42Mjg5LDUuNjI4OSwwLDAsMC03Ljg4OTEsMCw1LjUwNTQsNS41MDU0LDAsMCwwLTEuMTkxOCwxLjc1LDUuNTQsNS41NCwwLDAsMCwwLDQuMjkxNyw1LjUwNTQsNS41MDU0LDAsMCwwLDEuMTkxOCwxLjc1QTUuNTY5NCw1LjU2OTQsMCwwLDAsMTMuNSwxOC44MzMzWiIgZmlsbD0iIzY3Njg2NyIvPjwvc3ZnPg==)}.incident-popup-info>.to{background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNyAzNiI+PHRpdGxlPmluY2lkZW50PC90aXRsZT48cGF0aCBkPSJNMTMuNSwwYTEzLjM3LDEzLjM3LDAsMCwxLDMuNTg1OS40NzkyLDEzLjc4NjYsMTMuNzg2NiwwLDAsMSwzLjIyNzMsMS4zNDM4LDEzLjMzODYsMTMuMzM4NiwwLDAsMSw2LjIwMTYsNy45Njg3QTEyLjkwMDksMTIuOTAwOSwwLDAsMSwyNywxMy4zMzMzYTEwLjU2NjQsMTAuNTY2NCwwLDAsMS0uMzQ4LDIuNzQsMTMuNDA1MSwxMy40MDUxLDAsMCwxLTEuMDAyLDIuNTkzOEwxMy41LDM2LDEuMzUsMTguNjY2N0ExMy40MDUsMTMuNDA1LDAsMCwxLC4zNDgsMTYuMDcyOSwxMC41NjY0LDEwLjU2NjQsMCwwLDEsMCwxMy4zMzMzLDEyLjkwMDksMTIuOTAwOSwwLDAsMSwuNDg1Miw5Ljc5MTcsMTMuNDM0NiwxMy40MzQ2LDAsMCwxLDEuODQ1Nyw2LjYwNDJhMTMuNDUzLDEzLjQ1MywwLDAsMSw0Ljg0MS00Ljc4MTJBMTMuNzg2NSwxMy43ODY1LDAsMCwxLDkuOTE0MS40NzkyLDEzLjM3LDEzLjM3LDAsMCwxLDEzLjUsME0yMy41NDA2LDE3LjYyNXEwLS4wMjA4LjAxMDUtLjAyMDh0LjAxMDUtLjAyMDhhOC45OCw4Ljk4LDAsMCwwLC44MDE2LTIuMDYyNSw4Ljg4MTYsOC44ODE2LDAsMCwwLC4yNzQyLTIuMTg3NSwxMC41MzM3LDEwLjUzMzcsMCwwLDAtLjg3NTQtNC4yNzA4LDExLjE1NjEsMTEuMTU2MSwwLDAsMC0yLjM5NDEtMy41LDExLjMxLDExLjMxLDAsMCwwLTMuNTQzNy0yLjM2NDZBMTAuODk2MSwxMC44OTYxLDAsMCwwLDEzLjUsMi4zMzMzYTEwLjg5NjEsMTAuODk2MSwwLDAsMC00LjMyNDIuODY0NkExMS4zMSwxMS4zMSwwLDAsMCw1LjYzMiw1LjU2MjVhMTEuMTU2MSwxMS4xNTYxLDAsMCwwLTIuMzk0MSwzLjUsMTAuNTMzNywxMC41MzM3LDAsMCwwLS44NzU0LDQuMjcwOCw4Ljg4MTUsOC44ODE1LDAsMCwwLC4yNzQyLDIuMTg3NSw4Ljk4LDguOTgsMCwwLDAsLjgwMTYsMi4wNjI1cTAsLjAyMDguMDEwNS4wMjA4dC4wMTA1LjAyMDhMMTMuNSwzMC43OTE3LDIzLjU0MDYsMTcuNjI1TTEzLjUsNS41YTcuODEyMiw3LjgxMjIsMCwwLDEsMy4wOS42MTQ2LDguMDA5Myw4LjAwOTMsMCwwLDEsMi41MjA3LDEuNjc3MSw3LjksNy45LDAsMCwxLDEuNjk4LDIuNDksNy43OTYsNy43OTYsMCwwLDEsMCw2LjEwNDIsNy45LDcuOSwwLDAsMS0xLjY5OCwyLjQ5QTguMDA5Myw4LjAwOTMsMCwwLDEsMTYuNTksMjAuNTUyMWE4LjA3NjQsOC4wNzY0LDAsMCwxLTYuMTgsMEE4LjAwOTIsOC4wMDkyLDAsMCwxLDcuODg5MSwxOC44NzVhNy45LDcuOSwwLDAsMS0xLjY5OC0yLjQ5LDcuNzk2LDcuNzk2LDAsMCwxLDAtNi4xMDQyLDcuOSw3LjksMCwwLDEsMS42OTgtMi40OUE4LjAwOTIsOC4wMDkyLDAsMCwxLDEwLjQxLDYuMTE0Niw3LjgxMjMsNy44MTIzLDAsMCwxLDEzLjUsNS41IiBmaWxsPSIjNjc2ODY3Ii8+PC9zdmc+)}@font-face{font-family:segoeui;src:url(https://atlas.microsoft.com/styles/glyphs/segoeui.ttf)}.font-segoeui{font-family:segoeui}@font-face{font-family:segoeui-b;src:url(https://atlas.microsoft.com/styles/glyphs/segoeuib.ttf)}.font-segoeui-b{font-family:segoeui-b}@font-face{font-family:segoeui-i;src:url(https://atlas.microsoft.com/styles/glyphs/segoeuii.ttf)}.font-segoeui-i{font-family:segoeui-i}@font-face{font-family:segoeui-sl;src:url(https://atlas.microsoft.com/styles/glyphs/segoeuisl.ttf)}.font-segoeui-sl{font-family:segoeui-sl}@font-face{font-family:standard;src:url(https://atlas.microsoft.com/styles/glyphs/standardfont.ttf)}.font-standard{font-family:standard}@font-face{font-family:standard-b;src:url(https://atlas.microsoft.com/styles/glyphs/standardfontbold.ttf)}.font-standard-b{font-family:standard-b}.atlas-control-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.atlas-control-container .sub-container,.azure-maps-control-container>.style-options.icons{display:flex;flex-direction:row;position:relative}.top-left.subcontrol-container{position:absolute;top:0;left:0;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.top-right.subcontrol-container{position:absolute;top:0;right:0;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end}.bottom-left.subcontrol-container{position:absolute;bottom:0;left:0;display:flex;flex-direction:column;justify-content:flex-end;align-items:flex-start}.bottom-right.subcontrol-container{position:absolute;bottom:40px;right:0;display:flex;flex-direction:column;justify-content:flex-end;align-items:flex-end}.non-fixed.subcontrol-container{width:100%;height:100%}.hidden-accessible-element{clip:rect(1px,1px,1px,1px);height:1px;position:absolute;width:1px}.azure-maps-control-container{margin:10px;border-collapse:collapse;display:flex;flex-wrap:nowrap;pointer-events:auto;position:relative}.azure-maps-control-container:not(:first-child){margin-top:2px}.azure-maps-control-container:not(:last-child){margin-bottom:2px}.azure-maps-control-button,.azure-maps-control-button.traffic,.traffic-legend{margin:0;text-align:center;background-repeat:no-repeat;background-position:center center;padding:0;border-collapse:collapse}.azure-maps-control-button{user-select:none;border:none;width:32px;height:32px;cursor:pointer;line-height:32px;overflow:hidden;z-index:100}.atlas-map.high-contrast-light .azure-maps-control-container .azure-maps-control-button,.azure-maps-control-container.light .azure-maps-control-button{background-color:#fff;box-shadow:rgba(0,0,0,.16) 0 0 4px}.atlas-map.high-contrast-dark .azure-maps-control-container .azure-maps-control-button,.azure-maps-control-container.dark .azure-maps-control-button{background-color:#011c2c;box-shadow:rgba(0,0,0,.16) 0 0 4px}.atlas-map.high-contrast-light .azure-maps-control-container .azure-maps-control-button:active,.azure-maps-control-container.light .azure-maps-control-button:active{background-color:#f1f1f1}.atlas-map.high-contrast-dark .azure-maps-control-container .azure-maps-control-button:active,.azure-maps-control-container.dark .azure-maps-control-button:active{background-color:#43474c}.atlas-map.high-contrast-light .azure-maps-control-container .azure-maps-control-button,.atlas-map.high-contrast-light .azure-maps-control-container>.style-options.list button{border:3px solid #000}.atlas-map.high-contrast-dark .azure-maps-control-container .azure-maps-control-button,.atlas-map.high-contrast-dark .azure-maps-control-container>.style-options.list button{border:3px solid #fff}.azure-maps-control-button.zoom-in{background-size:12px 12px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12'%3E%3Cpath d='M7 4.8V.2a.215.215 0 0 0-.2-.2H5.2a.215.215 0 0 0-.2.2v4.6a.215.215 0 0 1-.2.2H.2a.215.215 0 0 0-.2.2v1.6a.215.215 0 0 0 .2.2h4.6a.215.215 0 0 1 .2.2v4.6a.215.215 0 0 0 .2.2h1.6a.215.215 0 0 0 .2-.2V7.2a.215.215 0 0 1 .2-.2h4.6a.215.215 0 0 0 .2-.2V5.2a.215.215 0 0 0-.2-.2H7.2a.215.215 0 0 1-.2-.2z' fill='%2383888d'/%3E%3C/svg%3E");position:relative}.atlas-map.high-contrast-dark .azure-maps-control-button.zoom-in{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12'%3E%3Cpath d='M7 4.8V.2a.215.215 0 00-.2-.2H5.2a.215.215 0 00-.2.2v4.6a.215.215 0 01-.2.2H.2a.215.215 0 00-.2.2v1.6a.215.215 0 00.2.2h4.6a.215.215 0 01.2.2v4.6a.215.215 0 00.2.2h1.6a.215.215 0 00.2-.2V7.2a.215.215 0 01.2-.2h4.6a.215.215 0 00.2-.2V5.2a.215.215 0 00-.2-.2H7.2a.215.215 0 01-.2-.2z' fill='%23fff'/%3E%3C/svg%3E")}.atlas-map.high-contrast-light .azure-maps-control-button.zoom-in{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12'%3E%3Cpath d='M7 4.8V.2a.215.215 0 00-.2-.2H5.2a.215.215 0 00-.2.2v4.6a.215.215 0 01-.2.2H.2a.215.215 0 00-.2.2v1.6a.215.215 0 00.2.2h4.6a.215.215 0 01.2.2v4.6a.215.215 0 00.2.2h1.6a.215.215 0 00.2-.2V7.2a.215.215 0 01.2-.2h4.6a.215.215 0 00.2-.2V5.2a.215.215 0 00-.2-.2H7.2a.215.215 0 01-.2-.2z'/%3E%3C/svg%3E")}.atlas-map:not(.high-contrast-light):not(.high-contrast-dark) .azure-maps-control-container.light .azure-maps-control-button.zoom-in:after{position:absolute;width:24px;left:4px;bottom:0;height:1px;border-bottom:.5px solid #bababa}.atlas-map:not(.high-contrast-light):not(.high-contrast-dark) .azure-maps-control-container.dark .azure-maps-control-button.zoom-in:after{position:absolute;width:24px;left:4px;bottom:0;height:1px;border-bottom:.5px solid #43474c}.azure-maps-control-button.zoom-in:active{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12'%3E%3Cpath d='M7 4.8V.2a.215.215 0 0 0-.2-.2H5.2a.215.215 0 0 0-.2.2v4.6a.215.215 0 0 1-.2.2H.2a.215.215 0 0 0-.2.2v1.6a.215.215 0 0 0 .2.2h4.6a.215.215 0 0 1 .2.2v4.6a.215.215 0 0 0 .2.2h1.6a.215.215 0 0 0 .2-.2V7.2a.215.215 0 0 1 .2-.2h4.6a.215.215 0 0 0 .2-.2V5.2a.215.215 0 0 0-.2-.2H7.2a.215.215 0 0 1-.2-.2z' fill='%2362666a'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-button.zoom-in:active,.atlas-map.high-contrast-light .azure-maps-control-button.zoom-in:active{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12'%3E%3Cpath d='M7 4.8V.2a.215.215 0 00-.2-.2H5.2a.215.215 0 00-.2.2v4.6a.215.215 0 01-.2.2H.2a.215.215 0 00-.2.2v1.6a.215.215 0 00.2.2h4.6a.215.215 0 01.2.2v4.6a.215.215 0 00.2.2h1.6a.215.215 0 00.2-.2V7.2a.215.215 0 01.2-.2h4.6a.215.215 0 00.2-.2V5.2a.215.215 0 00-.2-.2H7.2a.215.215 0 01-.2-.2z' fill='%237f7f7f'/%3E%3C/svg%3E")}.azure-maps-control-button.zoom-out{background-size:12px 12px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 2'%3E%3Cpath d='M11.8 2H.2a.215.215 0 0 1-.2-.2V.2A.215.215 0 0 1 .2 0h11.6a.215.215 0 0 1 .2.2v1.6a.215.215 0 0 1-.2.2z' fill='%2383888d'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-button.zoom-out{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 2'%3E%3Cpath d='M11.8 2H.2a.215.215 0 01-.2-.2V.2A.215.215 0 01.2 0h11.6a.215.215 0 01.2.2v1.6a.215.215 0 01-.2.2z' fill='%23fff'/%3E%3C/svg%3E")}.atlas-map.high-contrast-light .azure-maps-control-button.zoom-out{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 2'%3E%3Cpath d='M11.8 2H.2a.215.215 0 01-.2-.2V.2A.215.215 0 01.2 0h11.6a.215.215 0 01.2.2v1.6a.215.215 0 01-.2.2z'/%3E%3C/svg%3E")}.azure-maps-control-button.zoom-out:active{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 2'%3E%3Cpath d='M11.8 2H.2a.215.215 0 0 1-.2-.2V.2A.215.215 0 0 1 .2 0h11.6a.215.215 0 0 1 .2.2v1.6a.215.215 0 0 1-.2.2z' fill='%2362666a'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-button.zoom-out:active,.atlas-map.high-contrast-light .azure-maps-control-button.zoom-out:active{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 2'%3E%3Cpath d='M11.8 2H.2a.215.215 0 01-.2-.2V.2A.215.215 0 01.2 0h11.6a.215.215 0 01.2.2v1.6a.215.215 0 01-.2.2z' fill='%237f7f7f'/%3E%3C/svg%3E")}.azure-maps-control-button.traffic{background-image:url("data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0px' y='0px' viewBox='0 0 1000 1000' xml:space='preserve'><g fill='Gray'><path d='M988.5,683l-8.9-26c-4.9-14.4-20.6-26-35-26h-30.3c-18.9-53.8-38.6-101.5-45.1-116.2c-11.9-27-49.9-32.8-70.9-38.7c0,0-35-10.7-151.6-10.7c-116.6,0-151.6,10.7-151.6,10.7c-24.5,8.3-58.6,13.6-72.1,39.9c-5.4,10.5-25.4,59.6-44.6,115h-30c-14.4,0-30,11.6-35,26l-8.9,26c-4.9,14.4,2.7,31.1,17.1,31.1h30c-8,23.4-13.4,34.2-13.4,34.2c-2.2,3.8-3.8,21.4-3.8,26.2v194.8c0,14.4,11.6,26,26,26h72.3c14.4,0,26-11.6,26-26v-36.5h375.8v36.5c0,14.4,11.6,26,26,26H933c14.4,0,26-11.6,26-26V774.4c0-4.7-1.6-22.4-3.8-26.2c0,0-5.5-10.8-13.6-34.2h29.7C985.8,714.1,993.4,697.3,988.5,683z M493.2,839.1h-34.6c-30.9,0-61.8-4.5-61.8-26v-26c0-25.1,13.3-26,27.7-26c14,0,41.8,13,60.1,21.9c20,9.8,42.3,17.9,42.3,34.2C527,832.2,519.3,839.1,493.2,839.1z M421,658.7c18.3-72.5,38.1-99.7,42.5-111.1c3.5-8.3,6.9-33.9,183.3-33.9s180.5,29.3,181,29.6c5.4,15.5,27,48.6,44.3,115.4c0,0-74.5,24.2-225.2,24.2S421,658.7,421,658.7z M896.7,813.1c0,21.5-30.9,26-61.8,26h-34.6c-26,0-33.7-6.9-33.7-21.9c0-16.3,22.3-24.4,42.3-34.2c18.3-9,46.1-21.9,60.1-21.9c14.4,0,27.7,0.9,27.7,26V813.1L896.7,813.1z'/><path d='M611.3,346.4L611.3,346.4c-16-45.3-32.4-86.1-41.1-106.8C579,260.4,595.4,301.1,611.3,346.4z'/><path d='M348.5,589.1h0.5c15.4-42.4,30.8-80.3,36.9-92.3c19.3-37.5,58-49,83.6-56.6c4.3-1.3,8.4-2.5,12.3-3.8c8-2.5,48.1-13,165-13c1,0,1.7,0,2.6,0c-0.3-0.9-0.5-1.5-0.9-2.4h29.7c14.4,0,22-16.7,17.1-31.1l-8.9-26c-4.9-14.4-20.6-26-35-26h-30.3c-18.9-53.8-38.6-101.5-45.1-116.2c-11.9-27-49.9-32.8-70.9-38.7c0,0-35-10.7-151.6-10.7c-116.6,0-151.6,10.7-151.6,10.7c-24.5,8.3-58.5,13.6-72.1,39.9c-5.4,10.5-25.4,59.6-44.6,115H55.4c-14.4,0-30,11.6-35,26l-8.9,26C6.6,404.2,14.2,421,28.6,421h30c-8,23.4-13.4,34.2-13.4,34.2c-2.2,3.8-3.8,21.4-3.8,26.2v194.8c0,14.4,11.6,26,26,26h72.3c14.4,0,26-11.6,26-26v-36.5h110.1C287.8,610.3,317.4,589.1,348.5,589.1z M170.5,254.6c3.5-8.3,6.9-33.9,183.3-33.9c176.3,0,180.5,29.3,181,29.6c5.4,15.5,27,48.6,44.3,115.4c0,0-74.5,24.2-225.2,24.2C203,389.9,128,365.6,128,365.6C146.2,293.2,166.1,266,170.5,254.6z M200.2,546.1h-34.5c-30.9,0-61.8-4.5-61.8-26v-26c0-25.1,13.3-26,27.7-26c14,0,41.8,13,60.1,21.9c20,9.8,42.3,17.9,42.3,34.2C233.9,539.1,226.2,546.1,200.2,546.1z'/><path d='M463.5,87.1c3.5-8.3,6.9-33.9,183.3-33.9c176.3,0,180.5,29.3,181,29.6c5.4,15.5,27,48.6,44.3,115.4c0,0-74.5,24.2-225.2,24.2c-8.9,0-16.7-0.3-25.1-0.5c7.1,17.1,17.5,43.1,28.9,74.1h0.9c32.4,0,63.8,22.9,74.5,54.3l8.9,26c5.7,16.5,4.7,34.2-2,49.6c51.4,3.2,72.8,8.7,77.6,10.1l7.8,2c26.5,6.7,70.7,17.9,89.2,59.9c2.7,6.2,8.2,19.4,15.2,36.8H933c14.4,0,26-11.6,26-26V313.9c0-4.7-1.6-22.4-3.8-26.2c0,0-5.5-10.8-13.6-34.2h29.7c14.4,0,22-16.7,17.1-31.1l-9-26c-4.9-14.4-20.6-26-35-26h-30.3c-18.9-53.8-38.6-101.5-45.1-116.2c-11.9-27-49.9-32.8-70.9-38.7c0,0-35-10.7-151.6-10.7c-116.6,0-151.6,10.7-151.6,10.7c-24.5,8.3-58.6,13.6-72.1,39.9c-4,7.9-16.3,37.6-30.4,75.4c19.2,0.4,35,1.2,49.2,2.1C452.3,107.2,460.9,94.1,463.5,87.1z M896.7,326.5v26c0,21.5-30.9,26-61.8,26h-34.6c-26,0-33.7-6.9-33.7-21.9c0-16.2,22.4-24.4,42.3-34.2c18.3-9,46.1-21.9,60.1-21.9C883.3,300.5,896.7,301.4,896.7,326.5z'/></g></svg>");position:relative;border:none;width:32px;height:32px;cursor:pointer;line-height:32px;background-size:20px;z-index:200;box-shadow:0 0 4px rgba(0,0,0,.16)}.azure-maps-control-button.traffic:active,.azure-maps-control-container.in-use .azure-maps-control-button.traffic:not(:active){background-image:url("data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0px' y='0px' viewBox='0 0 1000 1000' xml:space='preserve'><g fill='DeepSkyBlue'><path d='M988.5,683l-8.9-26c-4.9-14.4-20.6-26-35-26h-30.3c-18.9-53.8-38.6-101.5-45.1-116.2c-11.9-27-49.9-32.8-70.9-38.7c0,0-35-10.7-151.6-10.7c-116.6,0-151.6,10.7-151.6,10.7c-24.5,8.3-58.6,13.6-72.1,39.9c-5.4,10.5-25.4,59.6-44.6,115h-30c-14.4,0-30,11.6-35,26l-8.9,26c-4.9,14.4,2.7,31.1,17.1,31.1h30c-8,23.4-13.4,34.2-13.4,34.2c-2.2,3.8-3.8,21.4-3.8,26.2v194.8c0,14.4,11.6,26,26,26h72.3c14.4,0,26-11.6,26-26v-36.5h375.8v36.5c0,14.4,11.6,26,26,26H933c14.4,0,26-11.6,26-26V774.4c0-4.7-1.6-22.4-3.8-26.2c0,0-5.5-10.8-13.6-34.2h29.7C985.8,714.1,993.4,697.3,988.5,683z M493.2,839.1h-34.6c-30.9,0-61.8-4.5-61.8-26v-26c0-25.1,13.3-26,27.7-26c14,0,41.8,13,60.1,21.9c20,9.8,42.3,17.9,42.3,34.2C527,832.2,519.3,839.1,493.2,839.1z M421,658.7c18.3-72.5,38.1-99.7,42.5-111.1c3.5-8.3,6.9-33.9,183.3-33.9s180.5,29.3,181,29.6c5.4,15.5,27,48.6,44.3,115.4c0,0-74.5,24.2-225.2,24.2S421,658.7,421,658.7z M896.7,813.1c0,21.5-30.9,26-61.8,26h-34.6c-26,0-33.7-6.9-33.7-21.9c0-16.3,22.3-24.4,42.3-34.2c18.3-9,46.1-21.9,60.1-21.9c14.4,0,27.7,0.9,27.7,26V813.1L896.7,813.1z'/><path d='M611.3,346.4L611.3,346.4c-16-45.3-32.4-86.1-41.1-106.8C579,260.4,595.4,301.1,611.3,346.4z'/><path d='M348.5,589.1h0.5c15.4-42.4,30.8-80.3,36.9-92.3c19.3-37.5,58-49,83.6-56.6c4.3-1.3,8.4-2.5,12.3-3.8c8-2.5,48.1-13,165-13c1,0,1.7,0,2.6,0c-0.3-0.9-0.5-1.5-0.9-2.4h29.7c14.4,0,22-16.7,17.1-31.1l-8.9-26c-4.9-14.4-20.6-26-35-26h-30.3c-18.9-53.8-38.6-101.5-45.1-116.2c-11.9-27-49.9-32.8-70.9-38.7c0,0-35-10.7-151.6-10.7c-116.6,0-151.6,10.7-151.6,10.7c-24.5,8.3-58.5,13.6-72.1,39.9c-5.4,10.5-25.4,59.6-44.6,115H55.4c-14.4,0-30,11.6-35,26l-8.9,26C6.6,404.2,14.2,421,28.6,421h30c-8,23.4-13.4,34.2-13.4,34.2c-2.2,3.8-3.8,21.4-3.8,26.2v194.8c0,14.4,11.6,26,26,26h72.3c14.4,0,26-11.6,26-26v-36.5h110.1C287.8,610.3,317.4,589.1,348.5,589.1z M170.5,254.6c3.5-8.3,6.9-33.9,183.3-33.9c176.3,0,180.5,29.3,181,29.6c5.4,15.5,27,48.6,44.3,115.4c0,0-74.5,24.2-225.2,24.2C203,389.9,128,365.6,128,365.6C146.2,293.2,166.1,266,170.5,254.6z M200.2,546.1h-34.5c-30.9,0-61.8-4.5-61.8-26v-26c0-25.1,13.3-26,27.7-26c14,0,41.8,13,60.1,21.9c20,9.8,42.3,17.9,42.3,34.2C233.9,539.1,226.2,546.1,200.2,546.1z'/><path d='M463.5,87.1c3.5-8.3,6.9-33.9,183.3-33.9c176.3,0,180.5,29.3,181,29.6c5.4,15.5,27,48.6,44.3,115.4c0,0-74.5,24.2-225.2,24.2c-8.9,0-16.7-0.3-25.1-0.5c7.1,17.1,17.5,43.1,28.9,74.1h0.9c32.4,0,63.8,22.9,74.5,54.3l8.9,26c5.7,16.5,4.7,34.2-2,49.6c51.4,3.2,72.8,8.7,77.6,10.1l7.8,2c26.5,6.7,70.7,17.9,89.2,59.9c2.7,6.2,8.2,19.4,15.2,36.8H933c14.4,0,26-11.6,26-26V313.9c0-4.7-1.6-22.4-3.8-26.2c0,0-5.5-10.8-13.6-34.2h29.7c14.4,0,22-16.7,17.1-31.1l-9-26c-4.9-14.4-20.6-26-35-26h-30.3c-18.9-53.8-38.6-101.5-45.1-116.2c-11.9-27-49.9-32.8-70.9-38.7c0,0-35-10.7-151.6-10.7c-116.6,0-151.6,10.7-151.6,10.7c-24.5,8.3-58.6,13.6-72.1,39.9c-4,7.9-16.3,37.6-30.4,75.4c19.2,0.4,35,1.2,49.2,2.1C452.3,107.2,460.9,94.1,463.5,87.1z M896.7,326.5v26c0,21.5-30.9,26-61.8,26h-34.6c-26,0-33.7-6.9-33.7-21.9c0-16.2,22.4-24.4,42.3-34.2c18.3-9,46.1-21.9,60.1-21.9C883.3,300.5,896.7,301.4,896.7,326.5z'/></g></svg>");filter:brightness(90%)}.traffic-legend{font-family:segoeui;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;width:150px;overflow:hidden;z-index:100}.hidden{visibility:hidden}.atlas-map.high-contrast-dark .azure-maps-control-container .traffic-legend,.azure-maps-control-container.dark .traffic-legend{background-color:#011c2c;box-shadow:rgba(0,0,0,.16) 0 0 4px;color:#fff}.traffic-legend table{border-collapse:collapse;padding:0;margin:4px;text-align:left;font-size:12px}.traffic-legend table div{width:20px;height:8px;margin-top:2px;float:left}.traffic-legend table td div.green{background-color:#6C9}.traffic-legend table td div.yellow{background-color:#FFAB66}.traffic-legend table td div.red{background-color:#EE2F53}.traffic-legend table td div.dark-red{background-color:#6B0512}.traffic-legend table td.traffic-legend-title{font-weight:700}.traffic-legend table td.traffic-legend-colors{width:84px}.traffic-legend table td.traffic-legend-text{width:25px}.azure-maps-control-button.pitch{background-size:10.8px 8.2px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10.8 8.2'%3E%3Cpath d='M10.5 8.2H.3c-.1 0-.2 0-.2-.1C0 8.1 0 8 0 7.9L2.5.2a.215.215 0 0 1 .2-.2H8c.1 0 .2.1.3.2l2.5 7.7v.2a.367.367 0 0 1-.3.1z' fill='%2383888d'/%3E%3C/svg%3E");z-index:200}.atlas-map.high-contrast-dark .azure-maps-control-button.pitch{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10.8 8.2'%3E%3Cpath d='M10.5 8.2H.3c-.1 0-.2 0-.2-.1C0 8.1 0 8 0 7.9L2.5.2a.215.215 0 01.2-.2H8c.1 0 .2.1.3.2l2.5 7.7v.2a.367.367 0 01-.3.1z' fill='%23fff'/%3E%3C/svg%3E")}.atlas-map.high-contrast-light .azure-maps-control-button.pitch{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10.8 8.2'%3E%3Cpath d='M10.5 8.2H.3c-.1 0-.2 0-.2-.1C0 8.1 0 8 0 7.9L2.5.2a.215.215 0 01.2-.2H8c.1 0 .2.1.3.2l2.5 7.7v.2a.367.367 0 01-.3.1z'/%3E%3C/svg%3E")}.azure-maps-control-container.in-use .azure-maps-control-button.pitch:not(:active){background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10.8 8.2'%3E%3Cpath d='M10.5 8.2H.3c-.1 0-.2 0-.2-.1C0 8.1 0 8 0 7.9L2.5.2a.215.215 0 0 1 .2-.2H8c.1 0 .2.1.3.2l2.5 7.7v.2a.367.367 0 0 1-.3.1z' fill='%2331acce'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-container.in-use .azure-maps-control-button.pitch:not(:active),.atlas-map.high-contrast-light .azure-maps-control-container.in-use .azure-maps-control-button.pitch:not(:active){background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10.8 8.2'%3E%3Cpath d='M10.5 8.2H.3c-.1 0-.2 0-.2-.1C0 8.1 0 8 0 7.9L2.5.2a.215.215 0 01.2-.2H8c.1 0 .2.1.3.2l2.5 7.7v.2a.367.367 0 01-.3.1z' fill='%23136bfb'/%3E%3C/svg%3E")}.azure-maps-control-button.pitch:active{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10.8 8.2'%3E%3Cpath d='M10.5 8.2H.3c-.1 0-.2 0-.2-.1C0 8.1 0 8 0 7.9L2.5.2a.215.215 0 0 1 .2-.2H8c.1 0 .2.1.3.2l2.5 7.7v.2a.367.367 0 0 1-.3.1z' fill='%2362666a'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-button.pitch:active,.atlas-map.high-contrast-light .azure-maps-control-button.pitch:active{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10.8 8.2'%3E%3Cpath d='M10.5 8.2H.3c-.1 0-.2 0-.2-.1C0 8.1 0 8 0 7.9L2.5.2a.215.215 0 01.2-.2H8c.1 0 .2.1.3.2l2.5 7.7v.2a.367.367 0 01-.3.1z' fill='%237f7f7f'/%3E%3C/svg%3E")}.azure-maps-control-button.pitch-up{background-size:5.2px 13px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5.2 13'%3E%3Cpath d='M2.7 0L0 6h1.6v6.8a.215.215 0 0 0 .2.2h1.6a.215.215 0 0 0 .2-.2V6h1.6z' fill='%2383888d'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-button.pitch-up{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5.2 13'%3E%3Cpath d='M2.7 0L0 6h1.6v6.8a.215.215 0 00.2.2h1.6a.215.215 0 00.2-.2V6h1.6z' fill='%23fff'/%3E%3C/svg%3E")}.atlas-map.high-contrast-light .azure-maps-control-button.pitch-up{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5.2 13'%3E%3Cpath d='M2.7 0L0 6h1.6v6.8a.215.215 0 00.2.2h1.6a.215.215 0 00.2-.2V6h1.6z'/%3E%3C/svg%3E")}.azure-maps-control-button.pitch-down{background-size:5.2px 13px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5.3 12.9'%3E%3Cpath d='M3.6 7V.2a.215.215 0 0 0-.2-.2H1.8a.215.215 0 0 0-.2.2V7L0 6.9l2.5 6h.1L5.3 7H3.6z' fill='%2383888d'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-button.pitch-down{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5.3 12.9'%3E%3Cpath d='M3.6 7V.2a.215.215 0 00-.2-.2H1.8a.215.215 0 00-.2.2V7L0 6.9l2.5 6h.1L5.3 7H3.6z' fill='%23fff'/%3E%3C/svg%3E")}.atlas-map.high-contrast-light .azure-maps-control-button.pitch-down{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5.3 12.9'%3E%3Cpath d='M3.6 7V.2a.215.215 0 00-.2-.2H1.8a.215.215 0 00-.2.2V7L0 6.9l2.5 6h.1L5.3 7H3.6z'/%3E%3C/svg%3E")}.azure-maps-control-button.rotation{overflow:hidden;z-index:200}.azure-maps-control-button.rotation div{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 7.4 14'%3E%3Cpath d='M2.2 7h3.1L3.7 3.4z' fill='none'/%3E%3Cpath d='M4.7.6L4.4 0H3L.2 6.6 0 7l2.8 6.4.3.6h1.4l2.9-6.6V7zM2.2 7l1.5-3.5L5.3 7z' fill='%2383888d'/%3E%3C/svg%3E");background-position:center center;background-repeat:no-repeat;background-size:7.4px 14px;height:100%;width:100%}.atlas-map.high-contrast-dark .azure-maps-control-button.rotation div{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 7.4 14'%3E%3Cpath d='M2.2 7h3.1L3.7 3.4z' fill='none'/%3E%3Cpath d='M4.7.6L4.4 0H3L.2 6.6 0 7l2.8 6.4.3.6h1.4l2.9-6.6V7zM2.2 7l1.5-3.5L5.3 7z' fill='%23fff'/%3E%3C/svg%3E")}.atlas-map.high-contrast-light .azure-maps-control-button.rotation div{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 7.4 14'%3E%3Cpath d='M2.2 7h3.1L3.7 3.4z' fill='none'/%3E%3Cpath d='M4.7.6L4.4 0H3L.2 6.6 0 7l2.8 6.4.3.6h1.4l2.9-6.6V7zM2.2 7l1.5-3.5L5.3 7z'/%3E%3C/svg%3E")}.azure-maps-control-container.in-use .azure-maps-control-button.rotation:not(:active) div{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 7.4 14'%3E%3Cpath d='M2.2 7h3.1L3.7 3.4z' fill='none'/%3E%3Cpath d='M4.7.6L4.4 0H3L.2 6.6 0 7l2.8 6.4.3.6h1.4l2.9-6.6V7zM2.2 7l1.5-3.5L5.3 7z' fill='%2331acce'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-container.in-use .azure-maps-control-button.rotation:not(:active) div,.atlas-map.high-contrast-light .azure-maps-control-container.in-use .azure-maps-control-button.rotation:not(:active) div{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 7.4 14'%3E%3Cpath d='M2.2 7h3.1L3.7 3.4z' fill='none'/%3E%3Cpath d='M4.7.6L4.4 0H3L.2 6.6 0 7l2.8 6.4.3.6h1.4l2.9-6.6V7zM2.2 7l1.5-3.5L5.3 7z' fill='%23136bfb'/%3E%3C/svg%3E")}.azure-maps-control-button.rotation:active div{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 7.4 14'%3E%3Cpath d='M2.2 7h3.1L3.7 3.4z' fill='none'/%3E%3Cpath d='M4.7.6L4.4 0H3L.2 6.6 0 7l2.8 6.4.3.6h1.4l2.9-6.6V7zM2.2 7l1.5-3.5L5.3 7z' fill='%2362666a'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-button.rotation:active div,.atlas-map.high-contrast-light .azure-maps-control-button.rotation:active div{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 7.4 14'%3E%3Cpath d='M2.2 7h3.1L3.7 3.4z' fill='none'/%3E%3Cpath d='M4.7.6L4.4 0H3L.2 6.6 0 7l2.8 6.4.3.6h1.4l2.9-6.6V7zM2.2 7l1.5-3.5L5.3 7z' fill='%237f7f7f'/%3E%3C/svg%3E")}.azure-maps-control-button.rotation-left{background-size:14px 14px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13.8 10'%3E%3Cpath d='M12.8 10a7.17 7.17 0 0 0-7.2-7.2' fill='none' stroke='%2383888d' stroke-miterlimit='10' stroke-width='2'/%3E%3Cpath d='M6 0L0 2.5v.1l6 2.7z' fill='%2383888d'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-button.rotation-left{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13.8 10'%3E%3Cpath d='M12.8 10a7.17 7.17 0 00-7.2-7.2' fill='none' stroke='%23fff' stroke-miterlimit='10' stroke-width='2'/%3E%3Cpath d='M6 0L0 2.5v.1l6 2.7z' fill='%23fff'/%3E%3C/svg%3E")}.atlas-map.high-contrast-light .azure-maps-control-button.rotation-left{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13.8 10'%3E%3Cpath d='M12.8 10a7.17 7.17 0 00-7.2-7.2' fill='none' stroke='%23000' stroke-miterlimit='10' stroke-width='2'/%3E%3Cpath d='M6 0L0 2.5v.1l6 2.7z'/%3E%3C/svg%3E")}.azure-maps-control-button.rotation-right{background-size:14px 14px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13.8 10'%3E%3Cpath d='M1 10a7.17 7.17 0 0 1 7.2-7.2' fill='none' stroke='%2383888d' stroke-miterlimit='10' stroke-width='2'/%3E%3Cpath d='M7.8 0l6 2.5v.1L7.9 5.3z' fill='%2383888d'/%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-button.rotation-right{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13.8 10'%3E%3Cpath d='M1 10a7.17 7.17 0 017.2-7.2' fill='none' stroke='%23fff' stroke-miterlimit='10' stroke-width='2'/%3E%3Cpath d='M7.8 0l6 2.5v.1L7.9 5.3z' fill='%23fff'/%3E%3C/svg%3E")}.atlas-map.high-contrast-light .azure-maps-control-button.rotation-right{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13.8 10'%3E%3Cpath d='M1 10a7.17 7.17 0 017.2-7.2' fill='none' stroke='%23000' stroke-miterlimit='10' stroke-width='2'/%3E%3Cpath d='M7.8 0l6 2.5v.1L7.9 5.3z'/%3E%3C/svg%3E")}.azure-maps-control-button.curr-style{position:relative}.azure-maps-control-button.curr-style>.icon{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 11.6 11.6'%3E%3Cg transform='rotate(180 5.8 5.8)'%3E%3Ccircle cx='5.8' cy='5.8' r='5.8' fill='%2383888d'/%3E%3Cpath d='M6 9.5L3.5 5.9v-.2L6 2.4a.188.188 0 0 1 .3 0l1.3 1a.188.188 0 0 1 0 .3L6 5.7A.188.188 0 0 0 6 6l1.6 2.4c.1.1 0 .2-.1.3l-1.3.8c-.1.1-.2.1-.2 0z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E");background-size:11.6px 11.6px;background-repeat:no-repeat;background-position:center center;z-index:200;position:absolute;top:0;bottom:0;right:0;left:0}.atlas-map.high-contrast-dark .azure-maps-control-button.curr-style>.icon,.atlas-map.high-contrast-light .azure-maps-control-button.curr-style>.icon{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 11.6 11.6'%3E%3Cg transform='rotate(180 5.8 5.8)'%3E%3Ccircle cx='5.8' cy='5.8' r='5.05' stroke='%23fff' stroke-width='1.5'/%3E%3Cpath d='M6 9.5L3.5 5.9v-.2L6 2.4a.188.188 0 01.3 0l1.3 1a.188.188 0 010 .3L6 5.7A.188.188 0 006 6l1.6 2.4c.1.1 0 .2-.1.3l-1.3.8c-.1.1-.2.1-.2 0z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E")}.azure-maps-control-container.in-use .azure-maps-control-button.curr-style>.icon{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 11.6 11.6'%3E%3Cg transform='rotate(180 5.8 5.8)'%3E%3Ccircle cx='5.8' cy='5.8' r='5.8' fill='%2331acce'/%3E%3Cpath d='M6 9.5L3.5 5.9v-.2L6 2.4a.188.188 0 0 1 .3 0l1.3 1a.188.188 0 0 1 0 .3L6 5.7A.188.188 0 0 0 6 6l1.6 2.4c.1.1 0 .2-.1.3l-1.3.8c-.1.1-.2.1-.2 0z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E")}.atlas-map.high-contrast-dark .azure-maps-control-container.in-use .azure-maps-control-button.curr-style>.icon,.atlas-map.high-contrast-light .azure-maps-control-container.in-use .azure-maps-control-button.curr-style>.icon{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 11.6 11.6'%3E%3Cg transform='rotate(180 5.8 5.8)'%3E%3Ccircle cx='5.8' cy='5.8' r='5.05' fill='%23136bfb' stroke='%23fff' stroke-width='1.5'/%3E%3Cpath d='M6 9.5L3.5 5.9v-.2L6 2.4a.188.188 0 01.3 0l1.3 1a.188.188 0 010 .3L6 5.7A.188.188 0 006 6l1.6 2.4c.1.1 0 .2-.1.3l-1.3.8c-.1.1-.2.1-.2 0z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E")}.bottom-right.subcontrol-container .azure-maps-control-button.curr-style:active>.icon,.bottom-right.subcontrol-container .azure-maps-control-button.curr-style>.icon,.top-right.subcontrol-container .azure-maps-control-button.curr-style:active>.icon,.top-right.subcontrol-container .azure-maps-control-button.curr-style>.icon{transform:scaleX(-1)}.azure-maps-control-container .azure-maps-control-button.curr-style img,.azure-maps-control-container>.style-options.icons img{width:28px;height:28px;margin:2px;padding:0;border-collapse:collapse}.atlas-map.high-contrast-dark .azure-maps-control-container .azure-maps-control-button.curr-style img,.atlas-map.high-contrast-dark .azure-maps-control-container>.style-options.icons img,.atlas-map.high-contrast-light .azure-maps-control-container .azure-maps-control-button.curr-style img,.atlas-map.high-contrast-light .azure-maps-control-container>.style-options.icons img{width:26px;height:26px;margin:0}.azure-maps-control-container>.style-options.list{display:grid;max-height:300px;min-width:200px;overflow:auto;position:absolute}.bottom-left .azure-maps-control-container>.style-options.list,.top-left .azure-maps-control-container>.style-options.list{left:100%;padding-left:1px}.bottom-right .azure-maps-control-container>.style-options.list,.top-right .azure-maps-control-container>.style-options.list{right:100%;padding-right:1px}.bottom-left .azure-maps-control-container>.style-options.list,.bottom-right .azure-maps-control-container>.style-options.list{bottom:0}.azure-maps-control-container>.style-options.list button{align-items:center;border:none;border-collapse:collapse;display:flex;font:inherit;margin:0;padding:5px 10px 5px 5px}.atlas-map.high-contrast-light .azure-maps-control-container>.style-options.list button,.azure-maps-control-container.light>.style-options.list button{background-color:#FFF;color:#000}.atlas-map.high-contrast-dark .azure-maps-control-container>.style-options.list button,.azure-maps-control-container.dark>.style-options.list button{background-color:#011C2C;color:#CCC}.azure-maps-control-container>.style-options.list button:focus,.azure-maps-control-container>.style-options.list button:hover{color:#31ACCE}.atlas-map.high-contrast-light .azure-maps-control-container>.style-options.list button:active,.azure-maps-control-container.light>.style-options.list button:active{background-color:#f1f1f1;color:#62666A}.atlas-map.high-contrast-dark .azure-maps-control-container>.style-options.list button:active,.azure-maps-control-container.dark>.style-options.list button:active{background-color:#43474c;color:#62666A}.azure-maps-control-container>.style-options.list img{width:28px;height:28px;margin:0 5px 0 0;padding:0;border-collapse:collapse}`);const FG=(o,c)=>{switch(o){case"CompassControl":return new Zo.control.CompassControl(c);case"PitchControl":return new Zo.control.PitchControl(c);case"StyleControl":return new Zo.control.StyleControl(c);case"ZoomControl":return new Zo.control.ZoomControl(c);case"TrafficControl":return new Zo.control.TrafficControl(c);case"TrafficLegendControl":return new Zo.control.TrafficLegendControl;default:console.warn("Check the type and passed props properties or try CustomControl")}},jG=Re.memo(({children:o,LoaderComponent:c=()=>oi.createElement("div",null,"Loading ..."),providedMapId:d,containerClassName:_,styles:C,options:I={},imageSprites:z,controls:Z,customControls:X,events:oe,cameraOptions:_e,trafficOptions:Se,userInteraction:Ne,styleOptions:$e,serviceOptions:We})=>{const{setMapRef:Ze,removeMapRef:ct,mapRef:Oe,setMapReady:Be,isMapReady:Xe}=Re.useContext(C2),[Et]=Re.useState(d||Iq.create().toString());return Re.useEffect(()=>{Oe&&Oe.setTraffic(Se)},[Se]),Re.useEffect(()=>{Oe&&Oe.setUserInteraction(Ne)},[Ne]),Re.useEffect(()=>{Oe&&Oe.setCamera(_e)},[_e]),Re.useEffect(()=>{Oe&&Oe.setStyle($e)},[$e]),Re.useEffect(()=>{Oe&&We&&Oe.setServiceOptions(We)},[We]),aw(Oe,Oe,Ht=>{Ht.events.add("ready",()=>{z&&(async(Xt,ze)=>{await Promise.all(ze.map(async({id:ot,templateName:Zr,color:yr,secondaryColor:sr,scale:_s,icon:ms})=>(ms&&await Xt.imageSprite.add(ot,ms),Xt.imageSprite.createFromTemplate(ot,Zr||"marker",yr,sr,_s))))})(Ht,z),Z&&((Xt,ze)=>{ze.forEach(ot=>{const{controlName:Zr,options:yr,controlOptions:sr}=ot;Xt.controls.add(FG(Zr,sr),yr)})})(Ht,Z),X&&((Xt,ze)=>{ze.forEach(({control:ot,controlOptions:Zr})=>{Xt.controls.add(ot,Zr)})})(Ht,X),Se&&Ht.setTraffic(Se),Ne&&Ht.setUserInteraction(Ne),_e&&Ht.setCamera(_e),$e&&Ht.setStyle($e),We&&Ht.setServiceOptions(We),Be(!0)});for(const Xt in oe)Ht.events.add(Xt,oe[Xt])}),Re.useEffect(()=>(Ze(new Zo.Map(Et,I)),()=>{ct()}),[]),oi.createElement(oi.Fragment,null,!Xe&&c&&oi.createElement(c,null),oi.createElement("div",{className:_,id:Et,style:{...C,height:"100%"}},Xe&&o))});Re.memo(({markerContent:o,options:c,events:d,isPopupVisible:_})=>{const[C]=Re.useState(new Zo.HtmlMarker({...c,htmlContent:o&&ZE(o)})),{mapRef:I}=Re.useContext(C2);return vF(I,!0,z=>(z.markers.add(C),d&&d.forEach(({eventName:Z,callback:X})=>{z.events.add(Z,C,X)}),()=>{z.markers.remove(C)})),Re.useEffect(()=>{C&&I&&C.setOptions({...c,htmlContent:o&&ZE(o)})},[o,c]),Re.useEffect(()=>{if(C&&C.getOptions().popup&&I){const z=C.getOptions().popup;_?(z==null||z.setOptions({position:C.getOptions().position}),z==null||z.open(I)):z==null||z.close()}},[_,c,I]),null});const UG=(o,c)=>o.layers.getLayers().filter(d=>{if(d.getSource){const _=d.getSource();return(typeof _=="string"?_:_.getId())===c.getId()}return!1}),S9=Re.createContext({dataSourceRef:null}),{Provider:VG,Consumer:CK}=S9,UO=({id:o,children:c,options:d,events:_,dataFromUrl:C,collection:I})=>{const[z]=Re.useState(new Zo.source.DataSource(o,d)),{mapRef:Z}=Re.useContext(C2);return aw(Z,z,(X,oe)=>{for(const _e in _||{})X.events.add(_e,oe,_[_e]);return X.sources.add(oe),oe instanceof Zo.source.DataSource&&(C&&oe.importDataFromUrl(C),I&&oe.add(I)),()=>{for(const _e in _||{})X.events.remove(_e,oe,_[_e]);UG(X,oe).forEach(_e=>{X.layers.remove(_e.getId()?_e.getId():_e)}),X.sources.remove(oe)}}),Re.useEffect(()=>{z&&I&&(z.clear(),z.add(I))},[I]),Re.useEffect(()=>{z&&d&&z.setOptions(d)},[d]),oi.createElement(VG,{value:{dataSourceRef:z}},Z&&c)},qG=Re.memo(o=>{const{properties:c,id:d,variant:_="feature"}=o,{dataSourceRef:C}=Re.useContext(S9),[I,z]=oi.useState(null),[Z,X]=oi.useState(null);return(({setCoords:oe,setProperties:_e},Se,Ne,$e)=>{aw(Se,$e,(We,Ze)=>{if(We instanceof Zo.source.DataSource)return We.add(Ze),()=>{We.remove(Ze)};Se instanceof Zo.source.VectorTileSource&&console.error(`Unable to add Feature(${Ze.id}) to VectorTileSource(${Se.getId()}): AzureMapFeature has to be a child of AzureMapDataSourceProvider`)}),aw(Se,Ne,(We,Ze)=>{if(We instanceof Zo.source.DataSource)return We.add(Ze),()=>{We.remove(Ze)};Se instanceof Zo.source.VectorTileSource&&console.error(`Unable to add Shape(${Ze.getId()}) to VectorTileSource(${Se.getId()}): AzureMapFeature has to be a child of AzureMapDataSourceProvider`)}),Re.useEffect(()=>{Ne&&oe&&Ne.setCoordinates(oe)},[oe]),Re.useEffect(()=>{Ne&&_e&&Ne.setProperties(_e)},[_e])})(o,C,Z,I),Re.useEffect(()=>{const oe=(({type:_e,coordinate:Se,coordinates:Ne,multipleCoordinates:$e,multipleDimensionCoordinates:We,bbox:Ze})=>{switch(_e){case"Point":return Se&&new Zo.data.Point(Se);case"MultiPoint":return Ne&&new Zo.data.MultiPoint(Ne,Ze);case"LineString":return Ne&&new Zo.data.LineString(Ne,Ze);case"MultiLineString":return $e&&new Zo.data.MultiLineString($e,Ze);case"Polygon":return Ne&&new Zo.data.Polygon(Ne,Ze);case"MultiPolygon":return We&&new Zo.data.MultiPolygon(We,Ze);default:console.warn("Check the type and passed props properties")}})(o);if((!I||!Z)&&oe)switch(_){case"shape":X(new Zo.Shape(oe,d,c));break;case"feature":z(new Zo.data.Feature(oe,c,d))}},[]),null}),ZG=({id:o,options:c,type:d,events:_,lifecycleEvents:C,onCreateCustomLayer:I})=>{const{mapRef:z}=Re.useContext(C2),{dataSourceRef:Z}=Re.useContext(S9),[X,oe]=Re.useState(null);return aw(!X,Z,(...[,_e])=>{let Se=null;Se=d==="custom"?I&&I(_e,z):(({id:Ne,options:$e={},type:We},Ze)=>{switch(We){case"SymbolLayer":return new Zo.layer.SymbolLayer(Ze,Ne,$e);case"HeatLayer":return new Zo.layer.HeatMapLayer(Ze,Ne,$e);case"ImageLayer":return new Zo.layer.ImageLayer($e,Ne);case"LineLayer":return new Zo.layer.LineLayer(Ze,Ne,$e);case"PolygonExtrusionLayer":return new Zo.layer.PolygonExtrusionLayer(Ze,Ne,$e);case"PolygonLayer":return new Zo.layer.PolygonLayer(Ze,Ne,$e);case"TileLayer":return new Zo.layer.TileLayer($e,Ne);case"BubbleLayer":return new Zo.layer.BubbleLayer(Ze,Ne,$e);default:return null}})({id:o,options:c,type:d},_e),oe(Se)}),aw(z,X,(_e,Se)=>{for(const Ne in _)_e.events.add(Ne,Se,_[Ne]);for(const Ne in C)_e.events.add(Ne,Se,C[Ne]);return _e.layers.add(Se),()=>{try{_e.layers.getLayerById(Se.getId())&&_e.layers.remove(Se.getId()?Se.getId():Se)}catch(Ne){console.error("Error on remove layer",Ne)}}}),Re.useEffect(()=>{X&&c&&X.setOptions(c)},[c]),{layerRef:X}},GG=Re.createContext({layerRef:null}),{Provider:HG,Consumer:SK}=GG,VO=({id:o,options:c,type:d,events:_,lifecycleEvents:C,onCreateCustomLayer:I})=>{const{layerRef:z}=ZG({id:o,options:c,type:d,events:_,lifecycleEvents:C,onCreateCustomLayer:I});return oi.createElement(HG,{value:{layerRef:z}})},WG=({options:o,popupContent:c,isVisible:d})=>{const[_]=Re.useState(new Zo.Popup({...o,content:ZE(c)})),{mapRef:C}=Re.useContext(C2);return Re.useEffect(()=>{_.setOptions({...o,content:ZE(c)}),C&&d&&!_.isOpen()&&_.open(C)},[o,c]),_};Re.memo(({isVisible:o,popupContent:c,options:d,events:_})=>{const{mapRef:C}=Re.useContext(C2),I=WG({options:d,popupContent:c,isVisible:o});return vF(C,!0,z=>(_&&_.forEach(({eventName:Z,callback:X})=>{z.events.add(Z,I,X)}),()=>{z.popups.remove(I)})),Re.useEffect(()=>{C&&(o&&!I.isOpen()?I.open(C):C.popups.getPopups().length&&!o&&I.isOpen()&&I.close())},[o]),null});gF.AuthenticationType;var sw={},YG={get exports(){return sw},set exports(o){sw=o}};/*!
MICROSOFT SOFTWARE LICENSE TERMS
MICROSOFT AZURE MAPS WEB SDK
These license terms are an agreement between you and Microsoft Corporation (or one of its affiliates). They apply to the software named above and any Microsoft services or software updates (except to the extent such services or updates are accompanied by new or additional terms, in which case those different terms apply prospectively and do not alter your or Microsofts rights relating to pre-updated software or services). IF YOU COMPLY WITH THESE LICENSE TERMS, YOU HAVE THE RIGHTS BELOW.  BY USING THE SOFTWARE, YOU ACCEPT THESE TERMS.
1. INSTALLATION AND USE RIGHTS.
  a) General. You may install and use any number of copies of the software to develop and test your applications.
  b) User Region Parameters. The software will allow you to select from a View list to set the map view within your application for a given customer. By default the View parameter (also referred to as user region parameter is set to Unified.  Countries/Regions that are not on the View list will default to the Unified View. It is your responsibility to determine the location of your users, and then set the View parameter correctly for that location. The View parameter must be used in compliance with applicable laws, including those regarding mapping, of the country where maps, images and other data and third party content that You are authorized to access via the software is made available. 
  c) Third Party Software. The software may include third party applications that Microsoft, not the third party, licenses to you under this agreement. Any included notices for third party applications are for your information only.
  d) Microsoft Online Subscription Agreement. Some features of the software provide access to, or rely on, Microsoft Azure Services. The use of those services (but not the software) is governed by the separate terms and privacy policies associated with your Microsoft Azure subscription. The services may not be available in all regions. For more information see https://go.microsoft.com/fwLink/?LinkID=522330&amp;clcid=0x9.
2. DISTRIBUTABLE CODE. The software is comprised of Distributable Code. Distributable Code is code that you are permitted to distribute in applications you develop if you comply with the terms below and otherwise set forth in these license terms. 
  a) Distribution Rights. 
    i. You may copy and distribute the object code form of the software.
    i. Third Party Distribution. You may permit distributors of your applications to copy and distribute any of this distributable code you elect to distribute with your applications.
  b) Distribution Requirements. For any code you distribute, you must:
    i. add significant primary functionality to it in your applications;
    ii. require distributors and external end users to agree to terms that protect it and Microsoft at least as much as this agreement; and
    iii. indemnify, defend, and hold harmless Microsoft from any claims, including attorneys fees, related to the distribution or use of your applications, except to the extent that any claim is based solely on the unmodified distributable code.
  c) Distribution Restrictions. You may not:
    i. use Microsofts trademarks or trade dress in your application in any way that suggests your application comes from or is endorsed by Microsoft; or
    ii. modify or distribute the source code of any distributable code so that any part of it becomes subject to any license that requires that the distributable code, any other part of the software, or any of Microsofts other intellectual property be disclosed or distributed in source code form, or that others have the right to modify it.
3. DATA COLLECTION. The software may collect information about you and your use of the software and send that to Microsoft. Microsoft may use this information to provide services and improve Microsofts products and services. Your opt-out rights, if any, are described in the product documentation. Some features in the software may enable collection of data from users of your applications that access or use the software. If you use these features to enable data collection in your applications, you must comply with applicable law, including getting any required user consent, and maintain a prominent privacy policy that accurately informs users about how you use, collect, and share their data. You can learn more about Microsofts data collection and use in the product documentation and the Microsoft Privacy Statement at https://go.microsoft.com/fwlink/?LinkId=512132. You agree to comply with all applicable provisions of the Microsoft Privacy Statement.
4. SCOPE OF LICENSE. The software is licensed, not sold. Microsoft reserves all other rights. Unless applicable law gives you more rights despite this limitation, you will not (and have no right to):
  a) work around any technical limitations in the software that only allow you to use it in certain ways;
  b) reverse engineer, decompile, or disassemble the software, or attempt to do so, except and only to the extent permitted by licensing terms governing the use of open-source components that may be included with the software;
  c) remove, minimize, block, or modify any notices of Microsoft or its suppliers in the software;
  d) use the software in any way that is against the law or to create or propagate malware; or
  e) share, publish, distribute, or lend the software (except for any distributable code, subject to the terms above), provide the software as a stand-alone hosted solution for others to use, or transfer the software or this agreement to any third party.
5. EXPORT RESTRICTIONS. You must comply with all domestic and international export laws and regulations that apply to the software, which include restrictions on destinations, end users, and end use. For further information on export restrictions, visit http://aka.ms/exporting.
6. SUPPORT SERVICES. Microsoft is not obligated under this agreement to provide any support services for the software. Any support provided is as is, with all faults, and without warranty of any kind.
7. UPDATES. The software may periodically check for updates, and download and install them for you. You may obtain updates only from Microsoft or authorized sources. Microsoft may need to update your system to provide you with updates. You agree to receive these automatic updates without any additional notice. Updates may not include or support all existing software features, services, or peripheral devices.
8. ENTIRE AGREEMENT. This agreement, and any other terms Microsoft may provide for supplements, updates, or third-party applications, is the entire agreement for the software.
9. APPLICABLE LAW AND PLACE TO RESOLVE DISPUTES. If you acquired the software in the United States or Canada, the laws of the state or province where you live (or, if a business, where your principal place of business is located) govern the interpretation of this agreement, claims for its breach, and all other claims (including consumer protection, unfair competition, and tort claims), regardless of conflict of laws principles. If you acquired the software in any other country, its laws apply. If U.S. federal jurisdiction exists, you and Microsoft consent to exclusive jurisdiction and venue in the federal court in King County, Washington for all disputes heard in court. If not, you and Microsoft consent to exclusive jurisdiction and venue in the Superior Court of King County, Washington for all disputes heard in court.
10. CONSUMER RIGHTS; REGIONAL VARIATIONS. This agreement describes certain legal rights. You may have other rights, including consumer rights, under the laws of your state or country. Separate and apart from your relationship with Microsoft, you may also have rights with respect to the party from which you acquired the software. This agreement does not change those other rights if the laws of your state or country do not permit it to do so. For example, if you acquired the software in one of the below regions, or mandatory country law applies, then the following provisions apply to you:
  a) Australia. You have statutory guarantees under the Australian Consumer Law and nothing in this agreement is intended to affect those rights.
  b) Canada. If you acquired this software in Canada, you may stop receiving updates by turning off the automatic update feature, disconnecting your device from the Internet (if and when you re-connect to the Internet, however, the software will resume checking for and installing updates), or uninstalling the software. The product documentation, if any, may also specify how to turn off updates for your specific device or software.
  c) Germany and Austria.
    i. Warranty. The properly licensed software will perform substantially as described in any Microsoft materials that accompany the software. However, Microsoft gives no contractual guarantee in relation to the licensed software.
    ii. Limitation of Liability. In case of intentional conduct, gross negligence, claims based on the Product Liability Act, as well as, in case of death or personal or physical injury, Microsoft is liable according to the statutory law.
  Subject to the foregoing clause ii., Microsoft will only be liable for slight negligence if Microsoft is in breach of such material contractual obligations, the fulfillment of which facilitate the due performance of this agreement, the breach of which would endanger the purpose of this agreement and the compliance with which a party may constantly trust in (so-called "cardinal obligations"). In other cases of slight negligence, Microsoft will not be liable for slight negligence.
11. DISCLAIMER OF WARRANTY. THE SOFTWARE IS LICENSED AS IS. YOU BEAR THE RISK OF USING IT. MICROSOFT GIVES NO EXPRESS WARRANTIES, GUARANTEES, OR CONDITIONS. TO THE EXTENT PERMITTED UNDER APPLICABLE LAWS, MICROSOFT EXCLUDES ALL IMPLIED WARRANTIES, INCLUDING MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.
12. LIMITATION ON AND EXCLUSION OF DAMAGES. IF YOU HAVE ANY BASIS FOR RECOVERING DAMAGES DESPITE THE PRECEDING DISCLAIMER OF WARRANTY, YOU CAN RECOVER FROM MICROSOFT AND ITS SUPPLIERS ONLY DIRECT DAMAGES UP TO U.S. $5.00. YOU CANNOT RECOVER ANY OTHER DAMAGES, INCLUDING CONSEQUENTIAL, LOST PROFITS, SPECIAL, INDIRECT, OR INCIDENTAL DAMAGES.
This limitation applies to (a) anything related to the software, services, content (including code) on third party Internet sites, or third party applications; and (b) claims for breach of contract, warranty, guarantee, or condition; strict liability, negligence, or other tort; or any other claim; in each case to the extent permitted by applicable law.
It also applies even if Microsoft knew or should have known about the possibility of the damages. The above limitation or exclusion may not apply to you because your state, province, or country may not allow the exclusion or limitation of incidental, consequential, or other damages.
Please note: As this software is distributed in Canada, some of the clauses in this agreement are provided below in French.
Remarque: Ce logiciel tant distribu au Canada, certaines des clauses dans ce contrat sont fournies ci-dessous en franais.
EXONRATION DE GARANTIE. Le logiciel vis par une licence est offert  tel quel . Toute utilisation de ce logiciel est  votre seule risque et pril. Microsoft naccorde aucune autre garantie expresse. Vous pouvez bnficier de droits additionnels en vertu du droit local sur la protection des consommateurs, que ce contrat ne peut modifier. La ou elles sont permises par le droit locale, les garanties implicites de qualit marchande, dadquation  un usage particulier et dabsence de contrefaon sont exclues.
LIMITATION DES DOMMAGES-INTRTS ET EXCLUSION DE RESPONSABILIT POUR LES DOMMAGES. Vous pouvez obtenir de Microsoft et de ses fournisseurs une indemnisation en cas de dommages directs uniquement  hauteur de 5,00 $ US. Vous ne pouvez prtendre  aucune indemnisation pour les autres dommages, y compris les dommages spciaux, indirects ou accessoires et pertes de bnfices.
Cette limitation concerne:
 tout ce qui est reli au logiciel, aux services ou au contenu (y compris le code) figurant sur des sites Internet tiers ou dans des programmes tiers; et
 les rclamations au titre de violation de contrat ou de garantie, ou au titre de responsabilit stricte, de ngligence ou dune autre faute dans la limite autorise par la loi en vigueur.
Elle sapplique galement, mme si Microsoft connaissait ou devrait connatre lventualit dun tel dommage. Si votre pays nautorise pas lexclusion ou la limitation de responsabilit pour les dommages indirects, accessoires ou de quelque nature que ce soit, il se peut que la limitation ou lexclusion ci-dessus ne sappliquera pas  votre gard.
EFFET JURIDIQUE. Le prsent contrat dcrit certains droits juridiques. Vous pourriez avoir dautres droits prvus par les lois de votre pays. Le prsent contrat ne modifie pas les droits que vous confrent les lois de votre pays si celles-ci ne le permettent pas.
*/(function(o,c){(function(d,_){_(c)})(r8,function(d){var _=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r8<"u"?r8:typeof self<"u"?self:{};function C(t,n){return t(n={exports:{}},n.exports),n.exports}var I=C(function(t,n){function a(u,A){if(h)if(y){var k="var sharedChunk = {}; ("+h+")(sharedChunk); ("+y+")(sharedChunk);",G={};h(G),b=A(G),typeof window<"u"&&(b.workerUrl=window.URL.createObjectURL(new Blob([k],{type:"text/javascript"})))}else y=A;else h=A}var h,y,b;t.exports=(a(0,function(u){function A(e,i){return e(i={exports:{}},i.exports),i.exports}var k=G;function G(e,i,s,p){this.cx=3*e,this.bx=3*(s-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=p,this.p2x=s,this.p2y=p}G.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},G.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},G.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},G.prototype.solveCurveX=function(e,i){var s,p,m,v,w;for(i===void 0&&(i=1e-6),m=e,w=0;w<8;w++){if(v=this.sampleCurveX(m)-e,Math.abs(v)<i)return m;var S=this.sampleCurveDerivativeX(m);if(Math.abs(S)<1e-6)break;m-=v/S}if((m=e)<(s=0))return s;if(m>(p=1))return p;for(;s<p;){if(v=this.sampleCurveX(m),Math.abs(v-e)<i)return m;v<e?s=m:p=m,m=.5*(p-s)+s}return m},G.prototype.solve=function(e,i){return this.sampleCurveY(this.solveCurveX(e,i))};var W=se;function se(e,i){this.x=e,this.y=i}se.prototype={clone:function(){return new se(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,i){return this.clone()._rotateAround(e,i)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var i=e.x-this.x,s=e.y-this.y;return i*i+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,i){return Math.atan2(this.x*i-this.y*e,this.x*e+this.y*i)},_matMult:function(e){var i=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var i=Math.cos(e),s=Math.sin(e),p=s*this.x+i*this.y;return this.x=i*this.x-s*this.y,this.y=p,this},_rotateAround:function(e,i){var s=Math.cos(e),p=Math.sin(e),m=i.y+p*(this.x-i.x)+s*(this.y-i.y);return this.x=i.x+s*(this.x-i.x)-p*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},se.convert=function(e){return e instanceof se||!Array.isArray(e)?e:new se(e[0],e[1])};var ne=typeof self<"u"?self:{};function Ee(e,i,s,p){var m=new k(e,i,s,p);return function(v){return m.solve(v)}}var Ge=Ee(.25,.1,.25,1);function pt(e,i,s){return Math.min(s,Math.max(i,e))}function Wt(e,i,s){var p=s-i,m=((e-i)%p+p)%p+i;return m===i?s:m}function nt(e){for(var i=[],s=arguments.length-1;0<s--;)i[s]=arguments[s+1];for(var p=0,m=i;p<m.length;p+=1){var v=m[p];for(var w in v)e[w]=v[w]}return e}var qt=1;function tn(){return qt++}function ho(){return function e(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function un(e){return e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function rn(e,i){e.forEach(function(s){i[s]&&(i[s]=i[s].bind(i))})}function qa(e,i){return e.indexOf(i,e.length-i.length)!==-1}function Wl(e,i,s){var p={};for(var m in e)p[m]=i.call(s||this,e[m],m,e);return p}function il(e,i,s){var p={};for(var m in e)i.call(s||this,e[m],m,e)&&(p[m]=e[m]);return p}function Rn(e){return Array.isArray(e)?e.map(Rn):typeof e=="object"&&e?Wl(e,Rn):e}var sc={};function nn(e){sc[e]||(typeof console<"u"&&console.warn(e),sc[e]=!0)}function fo(e,i,s){return(s.y-e.y)*(i.x-e.x)>(i.y-e.y)*(s.x-e.x)}function zm(e){for(var i=0,s=0,p=e.length,m=p-1,v=void 0,w=void 0;s<p;m=s++)i+=((w=e[m]).x-(v=e[s]).x)*(v.y+w.y);return i}function lc(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function mo(e){var i={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(p,m,v,w){var S=v||w;return i[m]=!S||S.toLowerCase(),""}),i["max-age"]){var s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i}var wa=null;function Op(e){if(wa==null){var i=e.navigator?e.navigator.userAgent:null;wa=!!e.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return wa}function Yl(e){try{var i=ne[e];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}var Ko,Za,$o,ba,uc=ne.performance&&ne.performance.now?ne.performance.now.bind(ne.performance):Date.now.bind(Date),Ga=ne.requestAnimationFrame||ne.mozRequestAnimationFrame||ne.webkitRequestAnimationFrame||ne.msRequestAnimationFrame,Jn=ne.cancelAnimationFrame||ne.mozCancelAnimationFrame||ne.webkitCancelAnimationFrame||ne.msCancelAnimationFrame,ol={now:uc,frame:function(e){var i=Ga(e);return{cancel:function(){return Jn(i)}}},getImageData:function(e,i){i===void 0&&(i=0);var s=ne.document.createElement("canvas"),p=s.getContext("2d");if(!p)throw new Error("failed to create canvas 2d context");return s.width=e.width,s.height=e.height,p.drawImage(e,0,0,e.width,e.height),p.getImageData(-i,-i,e.width+2*i,e.height+2*i)},resolveURL:function(e){return(Ko=Ko||ne.document.createElement("a")).href=e,Ko.href},hardwareConcurrency:ne.navigator&&ne.navigator.hardwareConcurrency||4,get devicePixelRatio(){return ne.devicePixelRatio},get prefersReducedMotion(){return!!ne.matchMedia&&(Za==null&&(Za=ne.matchMedia("(prefers-reduced-motion: reduce)")),Za.matches)}},Mn={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Kl={supported:!1,testSupport:function(e){!$l&&ba&&(bs?Xo(e):$o=e)}},$l=!1,bs=!1;function Xo(e){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,ba),e.isContextLost())return;Kl.supported=!0}catch{}e.deleteTexture(i),$l=!0}function no(e,i){this._transformRequestFn=e,this._customAccessToken=i,this._createSkuToken()}ne.document&&((ba=ne.document.createElement("img")).onload=function(){$o&&Xo($o),bs=!($o=null)},ba.onerror=function(){$l=!0,$o=null},ba.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Rp="01";function zo(e){return e.indexOf("mapbox:")===0}no.prototype._createSkuToken=function(){var e=function(){for(var i="",s=0;s<10;s++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Rp,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},no.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},no.prototype.transformRequest=function(e,i){return this._transformRequestFn&&this._transformRequestFn(e,i)||{url:e}},no.prototype.normalizeStyleURL=function(e,i){if(!zo(e))return e;var s=Hr(e);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},no.prototype.normalizeGlyphsURL=function(e,i){if(!zo(e))return e;var s=Hr(e);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},no.prototype.normalizeSourceURL=function(e,i){if(!zo(e))return e;var s=Hr(e);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||i)},no.prototype.normalizeSpriteURL=function(e,i,s,p){var m=Hr(e);return zo(e)?(m.path="/styles/v1"+m.path+"/sprite"+i+s,this._makeAPIURL(m,this._customAccessToken||p)):(m.path+=""+i+s,go(m))},no.prototype.normalizeTileURL=function(e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!zo(e))return e;var s=Hr(e);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=ol.devicePixelRatio||i===512?"@2x":"")+(Kl.supported?".webp":"$1")),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var p=this._customAccessToken||function(){for(var m=0,v=s.params;m<v.length;m+=1){var w=v[m].match(/^access_token=(.*)$/);if(w)return w[1]}return null}()||Mn.ACCESS_TOKEN;return Mn.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,p)},no.prototype.canonicalizeTileURL=function(e,i){var s=Hr(e);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return e;var p="mapbox://tiles/";p+=s.path.replace("/v4/","");var m=s.params;return i&&(m=m.filter(function(v){return!v.match(/^access_token=/)})),m.length&&(p+="?"+m.join("&")),p},no.prototype.canonicalizeTileset=function(e,i){for(var s=!!i&&zo(i),p=[],m=0,v=e.tiles||[];m<v.length;m+=1){var w=v[m];Qn(w)?p.push(this.canonicalizeTileURL(w,s)):p.push(w)}return p},no.prototype._makeAPIURL=function(e,i){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",p=Hr(Mn.API_URL);if(e.protocol=p.protocol,e.authority=p.authority,p.path!=="/"&&(e.path=""+p.path+e.path),!Mn.REQUIRE_ACCESS_TOKEN)return go(e);if(!(i=i||Mn.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+s);if(i[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return e.params=e.params.filter(function(m){return m.indexOf("access_token")===-1}),e.params.push("access_token="+i),go(e)};var zi=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Qn(e){return zi.test(e)}var Ni=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Hr(e){var i=e.match(Ni);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function go(e){var i=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+i}function bi(e){if(!e)return null;var i=e.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(ne.atob(i[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}function An(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}An.prototype.getStorageKey=function(e){var i,s=bi(Mn.ACCESS_TOKEN);return i=s&&s.u?ne.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,function(p,m){return String.fromCharCode(Number("0x"+m))})):Mn.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+i:"mapbox.eventData:"+i},An.prototype.fetchEventData=function(){var e=Yl("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(e)try{var p=ne.localStorage.getItem(i);p&&(this.eventData=JSON.parse(p));var m=ne.localStorage.getItem(s);m&&(this.anonId=m)}catch{nn("Unable to read from LocalStorage")}},An.prototype.saveEventData=function(){var e=Yl("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(e)try{ne.localStorage.setItem(s,this.anonId),1<=Object.keys(this.eventData).length&&ne.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{nn("Unable to write to LocalStorage")}},An.prototype.processRequests=function(e){},An.prototype.postEvent=function(e,i,s,p){var m=this;if(Mn.EVENTS_URL){var v=Hr(Mn.EVENTS_URL);v.params.push("access_token="+(p||Mn.ACCESS_TOKEN||""));var w={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.11.1",skuId:Rp,userId:this.anonId},S=i?nt(w,i):w,M={url:go(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=le(M,function(P){m.pendingRequest=null,s(P),m.saveEventData(),m.processRequests(p)})}},An.prototype.queueRequest=function(e,i){this.queue.push(e),this.processRequests(i)};var Jo,io,qi,Ha,Cs=(Sa.__proto__=Ha=An,((Sa.prototype=Object.create(Ha&&Ha.prototype)).constructor=Sa).prototype.postMapLoadEvent=function(e,i,s,p){this.skuToken=s,(Mn.EVENTS_URL&&p||Mn.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(m){return zo(m)||Qn(m)}))&&this.queueRequest({id:i,timestamp:Date.now()},p)},Sa.prototype.processRequests=function(e){var i=this;if(!this.pendingRequest&&this.queue.length!==0){var s=this.queue.shift(),p=s.id,m=s.timestamp;p&&this.success[p]||(this.anonId||this.fetchEventData(),un(this.anonId)||(this.anonId=ho()),this.postEvent(m,{skuToken:this.skuToken},function(v){v||p&&(i.success[p]=!0)},e))}},Sa),cc=(Ca.__proto__=qi=An,((Ca.prototype=Object.create(qi&&qi.prototype)).constructor=Ca).prototype.postTurnstileEvent=function(e,i){Mn.EVENTS_URL&&Mn.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(s){return zo(s)||Qn(s)})&&this.queueRequest(Date.now(),i)},Ca.prototype.processRequests=function(e){var i=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var s=bi(Mn.ACCESS_TOKEN),p=s?s.u:Mn.ACCESS_TOKEN,m=p!==this.eventData.tokenU;un(this.anonId)||(this.anonId=ho(),m=!0);var v=this.queue.shift();if(this.eventData.lastSuccess){var w=new Date(this.eventData.lastSuccess),S=new Date(v),M=(v-this.eventData.lastSuccess)/864e5;m=m||1<=M||M<-1||w.getDate()!==S.getDate()}else m=!0;if(!m)return this.processRequests();this.postEvent(v,{"enabled.telemetry":!1},function(P){P||(i.eventData.lastSuccess=v,i.eventData.tokenU=p)},e)}},new Ca),rr=cc.postTurnstileEvent.bind(cc),Bp=new Cs,pc=Bp.postMapLoadEvent.bind(Bp),al=500,Ss=50;function Ca(e){qi.call(this,"appUserTurnstile"),this._customAccessToken=e}function Sa(){Ha.call(this,"map.load"),this.success={},this.skuToken=""}function Ts(){ne.caches&&!Jo&&(Jo=ne.caches.open("mapbox-tiles"))}function Xl(e){var i=e.indexOf("?");return i<0?e:e.slice(0,i)}var Wa,Ya=1/0;function Es(){return Wa==null&&(Wa=ne.OffscreenCanvas&&new ne.OffscreenCanvas(1,1).getContext("2d")&&typeof ne.createImageBitmap=="function"),Wa}var Jl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Jl);var Nr,Ta=((Nr=Error)&&(ei.__proto__=Nr),((ei.prototype=Object.create(Nr&&Nr.prototype)).constructor=ei).prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},ei),sl=lc()?function(){return self.worker&&self.worker.referrer}:function(){return(ne.location.protocol==="blob:"?ne.parent:ne).location.href};function ei(e,i,s){i===401&&Qn(s)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),Nr.call(this,e),this.status=i,this.url=s,this.name=this.constructor.name,this.message=e}function N(e,i){if(!(/^file:/.test(s=e.url)||/^file:/.test(sl())&&!/^\w+:/.test(s))){if(ne.fetch&&ne.Request&&ne.AbortController&&ne.Request.prototype.hasOwnProperty("signal"))return function(p,m){var v,w=new ne.AbortController,S=new ne.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:sl(),signal:w.signal}),M=!1,P=!1,D=0<(v=S.url).indexOf("sku=")&&Qn(v);function R(F,Y,$){if(!P){if(F&&F.message!=="SecurityError"&&nn(F),Y&&$)return U(Y);var ie=Date.now();ne.fetch(S).then(function(te){if(te.ok){var xe=D?te.clone():null;return U(te,xe,ie)}return m(new Ta(te.statusText,te.status,p.url))}).catch(function(te){te.code!==20&&m(new Error(te.message))})}}p.type==="json"&&S.headers.set("Accept","application/json");var U=function(F,Y,$){(p.type==="arrayBuffer"?F.arrayBuffer():p.type==="json"?F.json():F.text()).then(function(ie){P||(Y&&$&&function(te,xe,be){if(Ts(),Jo){var Te={status:xe.status,statusText:xe.statusText,headers:new ne.Headers};xe.headers.forEach(function(Fe,Ye){return Te.headers.set(Ye,Fe)});var Me=mo(xe.headers.get("Cache-Control")||"");Me["no-store"]||(Me["max-age"]&&Te.headers.set("Expires",new Date(be+1e3*Me["max-age"]).toUTCString()),new Date(Te.headers.get("Expires")).getTime()-be<42e4||function(Fe,Ye){if(io===void 0)try{new Response(new ReadableStream),io=!0}catch{io=!1}io?Ye(Fe.body):Fe.blob().then(Ye)}(xe,function(Fe){var Ye=new ne.Response(Fe,Te);Ts(),Jo&&Jo.then(function(it){return it.put(Xl(te.url),Ye)}).catch(function(it){return nn(it.message)})}))}}(S,Y,$),M=!0,m(null,ie,F.headers.get("Cache-Control"),F.headers.get("Expires")))}).catch(function(ie){P||m(new Error(ie.message))})};return D?function(F,Y){if(Ts(),!Jo)return Y(null);var $=Xl(F.url);Jo.then(function(ie){ie.match($).then(function(te){var xe=function(be){if(!be)return!1;var Te=new Date(be.headers.get("Expires")||0),Me=mo(be.headers.get("Cache-Control")||"");return Te>Date.now()&&!Me["no-cache"]}(te);ie.delete($),xe&&ie.put($,te.clone()),Y(null,te,xe)}).catch(Y)}).catch(Y)}(S,R):R(null,null),{cancel:function(){P=!0,M||w.abort()}}}(e,i);if(lc()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,i,void 0,!0)}var s;return function(p,m){var v=new ne.XMLHttpRequest;for(var w in v.open(p.method||"GET",p.url,!0),p.type==="arrayBuffer"&&(v.responseType="arraybuffer"),p.headers)v.setRequestHeader(w,p.headers[w]);return p.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=p.credentials==="include",v.onerror=function(){m(new Error(v.statusText))},v.onload=function(){if((200<=v.status&&v.status<300||v.status===0)&&v.response!==null){var S=v.response;if(p.type==="json")try{S=JSON.parse(v.response)}catch(M){return m(M)}m(null,S,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else m(new Ta(v.statusText,v.status,p.url))},v.send(p.body),{cancel:function(){return v.abort()}}}(e,i)}function B(e,i){return N(nt(e,{type:"arrayBuffer"}),i)}var q,J,le=function(e,i){return N(nt(e,{method:"POST"}),i)};q=[],J=0;var de=function(e,i){if(Kl.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),J>=Mn.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:e,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return q.push(s),s}function p(){if(!m)for(m=!0,J--;q.length&&J<Mn.MAX_PARALLEL_IMAGE_REQUESTS;){var w=q.shift();w.cancelled||(w.cancel=de(w.requestParameters,w.callback).cancel)}}J++;var m=!1,v=B(e,function(w,S,M,P){var D,R,U;p(),w?i(w):S&&(Es()?(D=S,R=i,U=new ne.Blob([new Uint8Array(D)],{type:"image/png"}),ne.createImageBitmap(U).then(function(F){R(null,F)}).catch(function(F){R(new Error("Could not load image because of "+F.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(F,Y,$,ie){var te=new ne.Image,xe=ne.URL;te.onload=function(){Y(null,te),xe.revokeObjectURL(te.src)},te.onerror=function(){return Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var be=new ne.Blob([new Uint8Array(F)],{type:"image/png"});te.cacheControl=$,te.expires=ie,te.src=F.byteLength?xe.createObjectURL(be):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(S,i,M,P))});return{cancel:function(){v.cancel(),p()}}};function we(e,i,s){s[e]&&s[e].indexOf(i)!==-1||(s[e]=s[e]||[],s[e].push(i))}function ge(e,i,s){if(s&&s[e]){var p=s[e].indexOf(i);p!==-1&&s[e].splice(p,1)}}function ve(e,i){i===void 0&&(i={}),nt(this,i),this.type=e}function fe(){}var Pe,Ue=(Ie.__proto__=Pe=ve,(Ie.prototype=Object.create(Pe&&Pe.prototype)).constructor=Ie);function Ie(e,i){i===void 0&&(i={}),Pe.call(this,"error",nt({error:e},i))}fe.prototype.on=function(e,i){return this._listeners=this._listeners||{},we(e,i,this._listeners),this},fe.prototype.off=function(e,i){return ge(e,i,this._listeners),ge(e,i,this._oneTimeListeners),this},fe.prototype.once=function(e,i){return this._oneTimeListeners=this._oneTimeListeners||{},we(e,i,this._oneTimeListeners),this},fe.prototype.fire=function(e,i){typeof e=="string"&&(e=new ve(e,i||{}));var s=e.type;if(this.listens(s)){for(var p=0,m=(e.target=this)._listeners&&this._listeners[s]?this._listeners[s].slice():[];p<m.length;p+=1)m[p].call(this,e);for(var v=0,w=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];v<w.length;v+=1){var S=w[v];ge(s,S,this._oneTimeListeners),S.call(this,e)}var M=this._eventedParent;M&&(nt(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(e))}else e instanceof Ue&&console.error(e.error);return this},fe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&0<this._listeners[e].length||this._oneTimeListeners&&this._oneTimeListeners[e]&&0<this._oneTimeListeners[e].length||this._eventedParent&&this._eventedParent.listens(e)};var ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!(fe.prototype.setEventedParent=function(e,i){return this._eventedParent=e,this._eventedParentData=i,this})},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ae=function(e,i,s,p){this.message=(e?e+": ":"")+s,p&&(this.identifier=p),i!=null&&i.__line__&&(this.line=i.__line__)};function xt(e){var i=e.value;return i?[new Ae(e.key,i,"constants have been deprecated as of v8")]:[]}function wt(e){for(var i=[],s=arguments.length-1;0<s--;)i[s]=arguments[s+1];for(var p=0,m=i;p<m.length;p+=1){var v=m[p];for(var w in v)e[w]=v[w]}return e}function vt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Pt(e){if(Array.isArray(e))return e.map(Pt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var i={};for(var s in e)i[s]=Pt(e[s]);return i}return vt(e)}function Dt(e,i){i===void 0&&(i=[]),this.parent=e,this.bindings={};for(var s=0,p=i;s<p.length;s+=1){var m=p[s];this.bindings[m[0]]=m[1]}}var $t,Ft=(($t=Error)&&(nr.__proto__=$t),(nr.prototype=Object.create($t&&$t.prototype)).constructor=nr);function nr(e,i){$t.call(this,i),this.message=i,this.key=e}Dt.prototype.concat=function(e){return new Dt(this,e)},Dt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Dt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Cr={kind:"null"},je={kind:"number"},Ct={kind:"string"},kt={kind:"boolean"},Ci={kind:"color"},Qo={kind:"object"},Vt={kind:"value"},vn={kind:"collator"},Wr={kind:"formatted"},Ql={kind:"resolvedImage"};function Bn(e,i){return{kind:"array",itemType:e,N:i}}function on(e){if(e.kind!=="array")return e.kind;var i=on(e.itemType);return typeof e.N=="number"?"array<"+i+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+i+">"}var ox=[Cr,je,Ct,kt,Ci,Wr,Qo,Bn(Vt),Ql];function Fp(e,i){if(i.kind==="error")return null;if(e.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Fp(e.itemType,i.itemType))&&(typeof e.N!="number"||e.N===i.N))return null}else{if(e.kind===i.kind)return null;if(e.kind==="value"){for(var s=0,p=ox;s<p.length;s+=1)if(!Fp(p[s],i))return null}}return"Expected "+on(e)+" but found "+on(i)+" instead."}function Nm(e,i){return i.some(function(s){return s.kind===e.kind})}function jp(e,i){return i.some(function(s){return s==="null"?e===null:s==="array"?Array.isArray(e):s==="object"?e&&!Array.isArray(e)&&typeof e=="object":s===typeof e})}var Xy=A(function(e,i){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function p(S){return(S=Math.round(S))<0?0:255<S?255:S}function m(S){return p(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function v(S){return(M=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:1<M?1:M;var M}function w(S,M,P){return P<0?P+=1:1<P&&--P,6*P<1?S+(M-S)*P*6:2*P<1?M:3*P<2?S+(M-S)*(2/3-P)*6:S}try{i.parseCSSColor=function(S){var M,P=S.replace(/ /g,"").toLowerCase();if(P in s)return s[P].slice();if(P[0]==="#")return P.length===4?0<=(M=parseInt(P.substr(1),16))&&M<=4095?[(3840&M)>>4|(3840&M)>>8,240&M|(240&M)>>4,15&M|(15&M)<<4,1]:null:P.length===7&&0<=(M=parseInt(P.substr(1),16))&&M<=16777215?[(16711680&M)>>16,(65280&M)>>8,255&M,1]:null;var D=P.indexOf("("),R=P.indexOf(")");if(D!==-1&&R+1===P.length){var U=P.substr(0,D),F=P.substr(D+1,R-(D+1)).split(","),Y=1;switch(U){case"rgba":if(F.length!==4)return null;Y=v(F.pop());case"rgb":return F.length!==3?null:[m(F[0]),m(F[1]),m(F[2]),Y];case"hsla":if(F.length!==4)return null;Y=v(F.pop());case"hsl":if(F.length!==3)return null;var $=(parseFloat(F[0])%360+360)%360/360,ie=v(F[1]),te=v(F[2]),xe=te<=.5?te*(ie+1):te+ie-te*ie,be=2*te-xe;return[p(255*w(be,xe,$+1/3)),p(255*w(be,xe,$)),p(255*w(be,xe,$-1/3)),Y];default:return null}}return null}}catch{}}).parseCSSColor,Sr=function(e,i,s,p){p===void 0&&(p=1),this.r=e,this.g=i,this.b=s,this.a=p};Sr.parse=function(e){if(e){if(e instanceof Sr)return e;if(typeof e=="string"){var i=Xy(e);if(i)return new Sr(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},Sr.prototype.toString=function(){var e=this.toArray(),i=e[1],s=e[2],p=e[3];return"rgba("+Math.round(e[0])+","+Math.round(i)+","+Math.round(s)+","+p+")"},Sr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},Sr.black=new Sr(0,0,0,1),Sr.white=new Sr(1,1,1,1),Sr.transparent=new Sr(0,0,0,0),Sr.red=new Sr(1,0,0,1);var Up=function(e,i,s){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};function Om(e,i,s,p,m){this.text=e,this.image=i,this.scale=s,this.fontStack=p,this.textColor=m}Up.prototype.compare=function(e,i){return this.collator.compare(e,i)},Up.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Si=function(e){this.sections=e};Si.fromString=function(e){return new Si([new Om(e,null,null,null,null)])},Si.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Si.factory=function(e){return e instanceof Si?e:Si.fromString(e)},Si.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Si.prototype.serialize=function(){for(var e=["format"],i=0,s=this.sections;i<s.length;i+=1){var p=s[i];if(p.image)e.push(["image",p.image.name]);else{e.push(p.text);var m={};p.fontStack&&(m["text-font"]=["literal",p.fontStack.split(",")]),p.scale&&(m["font-scale"]=p.scale),p.textColor&&(m["text-color"]=["rgba"].concat(p.textColor.toArray())),e.push(m)}}return e};var yo=function(e){this.name=e.name,this.available=e.available};function Jy(e,i,s,p){return typeof e=="number"&&0<=e&&e<=255&&typeof i=="number"&&0<=i&&i<=255&&typeof s=="number"&&0<=s&&s<=255?p===void 0||typeof p=="number"&&0<=p&&p<=1?null:"Invalid rgba value ["+[e,i,s,p].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof p=="number"?[e,i,s,p]:[e,i,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function md(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof Sr||e instanceof Up||e instanceof Si||e instanceof yo)return 1;if(Array.isArray(e)){for(var i=0,s=e;i<s.length;i+=1)if(!md(s[i]))return;return 1}if(typeof e=="object"){for(var p in e)if(!md(e[p]))return;return 1}}function ti(e){if(e===null)return Cr;if(typeof e=="string")return Ct;if(typeof e=="boolean")return kt;if(typeof e=="number")return je;if(e instanceof Sr)return Ci;if(e instanceof Up)return vn;if(e instanceof Si)return Wr;if(e instanceof yo)return Ql;if(Array.isArray(e)){for(var i,s=e.length,p=0,m=e;p<m.length;p+=1){var v=ti(m[p]);if(i){if(i===v)continue;i=Vt;break}i=v}return Bn(i||Vt,s)}return Qo}function Vp(e){var i=typeof e;return e===null?"":i=="string"||i=="number"||i=="boolean"?String(e):e instanceof Sr||e instanceof Si||e instanceof yo?e.toString():JSON.stringify(e)}function Ea(e,i){this.type=e,this.value=i}yo.prototype.toString=function(){return this.name},yo.fromString=function(e){return e?new yo({name:e,available:!1}):null},yo.prototype.serialize=function(){return["image",this.name]},Ea.parse=function(e,i){if(e.length!==2)return i.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!md(e[1]))return i.error("invalid value");var s=e[1],p=ti(s),m=i.expectedType;return p.kind!=="array"||p.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(p=m),new Ea(p,s)},Ea.prototype.evaluate=function(){return this.value},Ea.prototype.eachChild=function(){},Ea.prototype.outputDefined=function(){return!0},Ea.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Sr?["rgba"].concat(this.value.toArray()):this.value instanceof Si?this.value.serialize():this.value};var ui=function(e){this.name="ExpressionEvaluationError",this.message=e};function oo(e,i){this.type=e,this.args=i}ui.prototype.toJSON=function(){return this.message};var Rm={string:Ct,number:je,boolean:kt,object:Qo};function ea(e){this.type=Wr,this.sections=e}function ta(e){this.type=Ql,this.input=e}function ao(e,i){this.type=e,this.args=i}oo.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var s,p=1,m=e[0];if(m==="array"){var v,w;if(2<e.length){var S=e[1];if(typeof S!="string"||!(S in Rm)||S==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);v=Rm[S],p++}else v=Vt;if(3<e.length){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);w=e[2],p++}s=Bn(v,w)}else s=Rm[m];for(var M=[];p<e.length;p++){var P=i.parse(e[p],p,Vt);if(!P)return null;M.push(P)}return new oo(s,M)},oo.prototype.evaluate=function(e){for(var i=0;i<this.args.length;i++){var s=this.args[i].evaluate(e);if(!Fp(this.type,ti(s)))return s;if(i===this.args.length-1)throw new ui("Expected value to be of type "+on(this.type)+", but found "+on(ti(s))+" instead.")}return null},oo.prototype.eachChild=function(e){this.args.forEach(e)},oo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},oo.prototype.serialize=function(){var e=this.type,i=[e.kind];if(e.kind==="array"){var s=e.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){i.push(s.kind);var p=e.N;(typeof p=="number"||1<this.args.length)&&i.push(p)}}return i.concat(this.args.map(function(m){return m.serialize()}))},ea.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var s=e[1];if(!Array.isArray(s)&&typeof s=="object")return i.error("First argument must be an image or text section.");for(var p=[],m=!1,v=1;v<=e.length-1;++v){var w=e[v];if(m&&typeof w=="object"&&!Array.isArray(w)){m=!1;var S=null;if(w["font-scale"]&&!(S=i.parse(w["font-scale"],1,je)))return null;var M=null;if(w["text-font"]&&!(M=i.parse(w["text-font"],1,Bn(Ct))))return null;var P=null;if(w["text-color"]&&!(P=i.parse(w["text-color"],1,Ci)))return null;var D=p[p.length-1];D.scale=S,D.font=M,D.textColor=P}else{var R=i.parse(e[v],1,Vt);if(!R)return null;var U=R.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,p.push({content:R,scale:null,font:null,textColor:null})}}return new ea(p)},ea.prototype.evaluate=function(e){return new Si(this.sections.map(function(i){var s=i.content.evaluate(e);return ti(s)===Ql?new Om("",s,null,null,null):new Om(Vp(s),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))},ea.prototype.eachChild=function(e){for(var i=0,s=this.sections;i<s.length;i+=1){var p=s[i];e(p.content),p.scale&&e(p.scale),p.font&&e(p.font),p.textColor&&e(p.textColor)}},ea.prototype.outputDefined=function(){return!1},ea.prototype.serialize=function(){for(var e=["format"],i=0,s=this.sections;i<s.length;i+=1){var p=s[i];e.push(p.content.serialize());var m={};p.scale&&(m["font-scale"]=p.scale.serialize()),p.font&&(m["text-font"]=p.font.serialize()),p.textColor&&(m["text-color"]=p.textColor.serialize()),e.push(m)}return e},ta.parse=function(e,i){if(e.length!==2)return i.error("Expected two arguments.");var s=i.parse(e[1],1,Ct);return s?new ta(s):i.error("No image name provided.")},ta.prototype.evaluate=function(e){var i=this.input.evaluate(e),s=yo.fromString(i);return s&&e.availableImages&&(s.available=-1<e.availableImages.indexOf(i)),s},ta.prototype.eachChild=function(e){e(this.input)},ta.prototype.outputDefined=function(){return!1},ta.prototype.serialize=function(){return["image",this.input.serialize()]};var qp={"to-boolean":kt,"to-color":Ci,"to-number":je,"to-string":Ct};function ra(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}ao.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var s=e[0];if((s==="to-boolean"||s==="to-string")&&e.length!==2)return i.error("Expected one argument.");for(var p=qp[s],m=[],v=1;v<e.length;v++){var w=i.parse(e[v],v,Vt);if(!w)return null;m.push(w)}return new ao(p,m)},ao.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var i,s,p=0,m=this.args;p<m.length;p+=1){if(s=null,(i=m[p].evaluate(e))instanceof Sr)return i;if(typeof i=="string"){var v=e.parseColor(i);if(v)return v}else if(Array.isArray(i)&&!(s=i.length<3||4<i.length?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":Jy(i[0],i[1],i[2],i[3])))return new Sr(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new ui(s||"Could not parse color from value '"+(typeof i=="string"?i:String(JSON.stringify(i)))+"'")}if(this.type.kind!=="number")return this.type.kind==="formatted"?Si.fromString(Vp(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?yo.fromString(Vp(this.args[0].evaluate(e))):Vp(this.args[0].evaluate(e));for(var w=null,S=0,M=this.args;S<M.length;S+=1){if((w=M[S].evaluate(e))===null)return 0;var P=Number(w);if(!isNaN(P))return P}throw new ui("Could not convert "+JSON.stringify(w)+" to number.")},ao.prototype.eachChild=function(e){this.args.forEach(e)},ao.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ao.prototype.serialize=function(){if(this.type.kind==="formatted")return new ea([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ta(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(i){e.push(i.serialize())}),e};var Zp=["Unknown","Point","LineString","Polygon"];ra.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ra.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Zp[this.feature.type]:this.feature.type:null},ra.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ra.prototype.canonicalID=function(){return this.canonical},ra.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ra.prototype.parseColor=function(e){var i=this._parseColorCache[e];return i=i||(this._parseColorCache[e]=Sr.parse(e))};var Un=function(e,i,s,p){this.name=e,this.type=i,this._evaluate=s,this.args=p};function na(e,i,s){this.type=vn,this.locale=s,this.caseSensitive=e,this.diacriticSensitive=i}function eu(e,i){e[0]=Math.min(e[0],i[0]),e[1]=Math.min(e[1],i[1]),e[2]=Math.max(e[2],i[0]),e[3]=Math.max(e[3],i[1])}function ll(e,i){return!(e[0]<=i[0]||e[2]>=i[2]||e[1]<=i[1]||e[3]>=i[3])}function tu(e,i){for(var s,p,m,v,w,S,M=!1,P=0,D=i.length;P<D;P++)for(var R=i[P],U=0,F=R.length;U<F-1;U++){if((m=e[0]-(s=R[U])[0])*(S=e[1]-(p=R[U+1])[1])-(w=e[0]-p[0])*(v=e[1]-s[1])==0&&m*w<=0&&v*S<=0)return;Y=e,$=R[U],ie=R[U+1],$[1]>Y[1]!=ie[1]>Y[1]&&Y[0]<(ie[0]-$[0])*(Y[1]-$[1])/(ie[1]-$[1])+$[0]&&(M=!M)}var Y,$,ie;return M}function Gp(e,i){for(var s=0;s<i.length;s++)if(tu(e,i[s]))return 1}function hc(e,i,s,p){var m=p[0]-s[0],v=p[1]-s[1],w=(e[0]-s[0])*v-m*(e[1]-s[1]),S=(i[0]-s[0])*v-m*(i[1]-s[1]);return 0<w&&S<0||w<0&&0<S}function Hp(e,i,s){for(var p=0,m=s;p<m.length;p+=1)for(var v=m[p],w=0;w<v.length-1;++w)if((P=[(M=v[w+1])[0]-(S=v[w])[0],M[1]-S[1]])[0]*(D=[i[0]-e[0],i[1]-e[1]])[1]-P[1]*D[0]!=0&&hc(e,i,S,M)&&hc(S,M,e,i))return 1;var S,M,P,D}function dc(e,i){for(var s=0;s<e.length;++s)if(!tu(e[s],i))return;for(var p=0;p<e.length-1;++p)if(Hp(e[p],e[p+1],i))return;return 1}function Wp(e,i){for(var s=0;s<i.length;s++)if(dc(e,i[s]))return 1}function ru(e,i,s){for(var p=[],m=0;m<e.length;m++){for(var v=[],w=0;w<e[m].length;w++){var S=(M=e[m][w],P=s,D=(180+M[0])/360,R=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M[1]*Math.PI/360)))/360,U=Math.pow(2,P.z),[Math.round(D*U*8192),Math.round(R*U*8192)]);eu(i,S),v.push(S)}p.push(v)}var M,P,D,R,U;return p}function fc(e,i,s){for(var p=[],m=0;m<e.length;m++){var v=ru(e[m],i,s);p.push(v)}return p}function mc(e,i,s,p){if(e[0]<s[0]||e[0]>s[2]){var m=.5*p,v=e[0]-s[0]>m?-p:s[0]-e[0]>m?p:0;v===0&&(v=e[0]-s[2]>m?-p:s[2]-e[0]>m?p:0),e[0]+=v}eu(i,e)}function gc(e,i,s,p){for(var m=8192*Math.pow(2,p.z),v=[8192*p.x,8192*p.y],w=[],S=0,M=e;S<M.length;S+=1)for(var P=0,D=M[S];P<D.length;P+=1){var R=D[P],U=[R.x+v[0],R.y+v[1]];mc(U,i,s,m),w.push(U)}return w}function yc(e,i,s,p){for(var m,v=8192*Math.pow(2,p.z),w=[8192*p.x,8192*p.y],S=[],M=0,P=e;M<P.length;M+=1){for(var D=[],R=0,U=P[M];R<U.length;R+=1){var F=U[R],Y=[F.x+w[0],F.y+w[1]];eu(i,Y),D.push(Y)}S.push(D)}if(i[2]-i[0]<=v/2){(m=i)[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var $=0,ie=S;$<ie.length;$+=1)for(var te=0,xe=ie[$];te<xe.length;te+=1)mc(xe[te],i,s,v)}return S}Un.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Un.prototype.eachChild=function(e){this.args.forEach(e)},Un.prototype.outputDefined=function(){return!1},Un.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Un.parse=function(e,i){var s,p=e[0],m=Un.definitions[p];if(!m)return i.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0);for(var v=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=w.filter(function(gt){var at=gt[0];return!Array.isArray(at)||at.length===e.length-1}),M=null,P=0,D=S;P<D.length;P+=1){var R=D[P],U=R[0],F=R[1];M=new oa(i.registry,i.path,null,i.scope);for(var Y=[],$=!1,ie=1;ie<e.length;ie++){var te=e[ie],xe=Array.isArray(U)?U[ie-1]:U.type,be=M.parse(te,1+Y.length,xe);if(!be){$=!0;break}Y.push(be)}if(!$)if(Array.isArray(U)&&U.length!==Y.length)M.error("Expected "+U.length+" arguments, but found "+Y.length+" instead.");else{for(var Te=0;Te<Y.length;Te++){var Me=Array.isArray(U)?U[Te]:U.type,Fe=Y[Te];M.concat(Te+1).checkSubtype(Me,Fe.type)}if(M.errors.length===0)return new Un(p,v,F,Y)}}if(S.length===1)(s=i.errors).push.apply(s,M.errors);else{for(var Ye=(S.length?S:w).map(function(gt){var at;return at=gt[0],Array.isArray(at)?"("+at.map(on).join(", ")+")":"("+on(at.type)+"...)"}).join(" | "),it=[],ft=1;ft<e.length;ft++){var tt=i.parse(e[ft],1+it.length);if(!tt)return null;it.push(on(tt.type))}i.error("Expected arguments of type "+Ye+", but found ("+it.join(", ")+") instead.")}return null},Un.register=function(e,i){for(var s in Un.definitions=i)e[s]=Un},na.parse=function(e,i){if(e.length!==2)return i.error("Expected one argument.");var s=e[1];if(typeof s!="object"||Array.isArray(s))return i.error("Collator options argument must be an object.");var p=i.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,kt);if(!p)return null;var m=i.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,kt);if(!m)return null;var v=null;return s.locale&&!(v=i.parse(s.locale,1,Ct))?null:new na(p,m,v)},na.prototype.evaluate=function(e){return new Up(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},na.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},na.prototype.outputDefined=function(){return!1},na.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var so=function(e,i){this.type=kt,this.geojson=e,this.geometries=i};function ul(e){if(e instanceof Un&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof so)return!1;var i=!0;return e.eachChild(function(s){i&&!ul(s)&&(i=!1)}),i}function Is(e){if(!(e instanceof Un&&e.name==="feature-state")){var i=!0;return e.eachChild(function(s){i&&!Is(s)&&(i=!1)}),i}}function cl(e,i){if(e instanceof Un&&0<=i.indexOf(e.name))return!1;var s=!0;return e.eachChild(function(p){s&&!cl(p,i)&&(s=!1)}),s}function ia(e,i){this.type=i.type,this.name=e,this.boundExpression=i}so.parse=function(e,i){if(e.length!==2)return i.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(md(e[1])){var s=e[1];if(s.type==="FeatureCollection")for(var p=0;p<s.features.length;++p){var m=s.features[p].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new so(s,s.features[p].geometry)}else if(s.type==="Feature"){var v=s.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new so(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new so(s,s)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},so.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(i,s){var p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=i.canonicalID();if(s.type==="Polygon"){var w=ru(s.coordinates,m,v),S=gc(i.geometry(),p,m,v);if(!ll(p,m))return!1;for(var M=0,P=S;M<P.length;M+=1)if(!tu(P[M],w))return!1}if(s.type==="MultiPolygon"){var D=fc(s.coordinates,m,v),R=gc(i.geometry(),p,m,v);if(!ll(p,m))return!1;for(var U=0,F=R;U<F.length;U+=1)if(!Gp(F[U],D))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(i,s){var p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=i.canonicalID();if(s.type==="Polygon"){var w=ru(s.coordinates,m,v),S=yc(i.geometry(),p,m,v);if(!ll(p,m))return!1;for(var M=0,P=S;M<P.length;M+=1)if(!dc(P[M],w))return!1}if(s.type==="MultiPolygon"){var D=fc(s.coordinates,m,v),R=yc(i.geometry(),p,m,v);if(!ll(p,m))return!1;for(var U=0,F=R;U<F.length;U+=1)if(!Wp(F[U],D))return!1}return!0}(e,this.geometries)}return!1},so.prototype.eachChild=function(){},so.prototype.outputDefined=function(){return!0},so.prototype.serialize=function(){return["within",this.geojson]},ia.parse=function(e,i){if(e.length!==2||typeof e[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");var s=e[1];return i.scope.has(s)?new ia(s,i.scope.get(s)):i.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},ia.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},ia.prototype.eachChild=function(){},ia.prototype.outputDefined=function(){return!1},ia.prototype.serialize=function(){return["var",this.name]};var oa=function(e,i,s,p,m){i===void 0&&(i=[]),p===void 0&&(p=new Dt),m===void 0&&(m=[]),this.registry=e,this.path=i,this.key=i.map(function(v){return"["+v+"]"}).join(""),this.scope=p,this.errors=m,this.expectedType=s};function pl(e,i){for(var s,p=e.length-1,m=0,v=p,w=0;m<=v;)if((s=e[w=Math.floor((m+v)/2)])<=i){if(w===p||i<e[w+1])return w;m=w+1}else{if(!(i<s))throw new ui("Input is not a number.");v=w-1}return 0}oa.prototype.parse=function(e,i,s,p,m){return m===void 0&&(m={}),i?this.concat(i,s,p)._parse(e,m):this._parse(e,m)},oa.prototype._parse=function(e,i){function s(P,D,R){return R==="assert"?new oo(D,[P]):R==="coerce"?new ao(D,[P]):P}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var p=e[0];if(typeof p!="string")return this.error("Expression name must be a string, but found "+typeof p+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var m=this.registry[p];if(m){var v=m.parse(e,this);if(!v)return null;if(this.expectedType){var w=this.expectedType,S=v.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||S.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(w,S))return null}else v=s(v,w,i.typeAnnotation||"coerce");else v=s(v,w,i.typeAnnotation||"assert")}if(!(v instanceof Ea)&&v.type.kind!=="resolvedImage"&&function P(D){if(D instanceof ia)return P(D.boundExpression);if(D instanceof Un&&D.name==="error"||D instanceof na||D instanceof so)return!1;var R=D instanceof ao||D instanceof oo,U=!0;return D.eachChild(function(F){U=R?U&&P(F):U&&F instanceof Ea}),!!U&&ul(D)&&cl(D,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(v)){var M=new ra;try{v=new Ea(v.type,v.evaluate(M))}catch(P){return this.error(P.message),null}}return v}return this.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},oa.prototype.concat=function(e,i,s){var p=typeof e=="number"?this.path.concat(e):this.path,m=s?this.scope.concat(s):this.scope;return new oa(this.registry,p,i||null,m,this.errors)},oa.prototype.error=function(e){for(var i=[],s=arguments.length-1;0<s--;)i[s]=arguments[s+1];var p=""+this.key+i.map(function(m){return"["+m+"]"}).join("");this.errors.push(new Ft(p,e))},oa.prototype.checkSubtype=function(e,i){var s=Fp(e,i);return s&&this.error(s),s};var aa=function(e,i,s){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(var p=0,m=s;p<m.length;p+=1){var v=m[p],w=v[1];this.labels.push(v[0]),this.outputs.push(w)}};function _n(e,i,s){return e*(1-s)+i*s}aa.parse=function(e,i){if(e.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");var s=i.parse(e[1],1,je);if(!s)return null;var p=[],m=null;i.expectedType&&i.expectedType.kind!=="value"&&(m=i.expectedType);for(var v=1;v<e.length;v+=2){var w=v===1?-1/0:e[v],S=e[v+1],M=v,P=v+1;if(typeof w!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(p.length&&p[p.length-1][0]>=w)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);var D=i.parse(S,P,m);if(!D)return null;m=m||D.type,p.push([w,D])}return new aa(m,s,p)},aa.prototype.evaluate=function(e){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(e);var p=this.input.evaluate(e);if(p<=i[0])return s[0].evaluate(e);var m=i.length;return p>=i[m-1]?s[m-1].evaluate(e):s[pl(i,p)].evaluate(e)},aa.prototype.eachChild=function(e){e(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)e(s[i])},aa.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},aa.prototype.serialize=function(){for(var e=["step",this.input.serialize()],i=0;i<this.labels.length;i++)0<i&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e};var hl=Object.freeze({__proto__:null,number:_n,color:function(e,i,s){return new Sr(_n(e.r,i.r,s),_n(e.g,i.g,s),_n(e.b,i.b,s),_n(e.a,i.a,s))},array:function(e,i,s){return e.map(function(p,m){return _n(p,i[m],s)})}}),vc=6/29*3*(6/29),Yp=Math.PI/180,Kp=180/Math.PI;function vr(e){return .008856451679035631<e?Math.pow(e,1/3):e/vc+4/29}function Ln(e){return 6/29<e?e*e*e:vc*(e-4/29)}function ri(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function xn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function vo(e){var i=xn(e.r),s=xn(e.g),p=xn(e.b),m=vr((.4124564*i+.3575761*s+.1804375*p)/.95047),v=vr(.2126729*i+.7151522*s+.072175*p);return{l:116*v-16,a:500*(m-v),b:200*(v-vr((.0193339*i+.119192*s+.9503041*p)/1.08883)),alpha:e.a}}function _c(e){var i=(e.l+16)/116,s=isNaN(e.a)?i:i+e.a/500,p=isNaN(e.b)?i:i-e.b/200;return i=+Ln(i),s=.95047*Ln(s),p=1.08883*Ln(p),new Sr(ri(3.2404542*s-1.5371385*i-.4985314*p),ri(-.969266*s+1.8760108*i+.041556*p),ri(.0556434*s-.2040259*i+1.0572252*p),e.alpha)}var ks={forward:vo,reverse:_c,interpolate:function(e,i,s){return{l:_n(e.l,i.l,s),a:_n(e.a,i.a,s),b:_n(e.b,i.b,s),alpha:_n(e.alpha,i.alpha,s)}}},jt={forward:function(e){var i=vo(e),s=i.l,p=i.a,m=i.b,v=Math.atan2(m,p)*Kp;return{h:v<0?360+v:v,c:Math.sqrt(p*p+m*m),l:s,alpha:e.a}},reverse:function(e){var i=e.h*Yp,s=e.c;return _c({l:e.l,a:Math.cos(i)*s,b:Math.sin(i)*s,alpha:e.alpha})},interpolate:function(e,i,s){return{h:(p=e.h,m=i.h,p+s*(180<(v=m-p)||v<-180?v-360*Math.round(v/360):v)),c:_n(e.c,i.c,s),l:_n(e.l,i.l,s),alpha:_n(e.alpha,i.alpha,s)};var p,m,v}},Bm=Object.freeze({__proto__:null,lab:ks,hcl:jt}),ci=function(e,i,s,p,m){this.type=e,this.operator=i,this.interpolation=s,this.input=p,this.labels=[],this.outputs=[];for(var v=0,w=m;v<w.length;v+=1){var S=w[v],M=S[1];this.labels.push(S[0]),this.outputs.push(M)}};function Fm(e,i,s,p){var m=p-s,v=e-s;return m==0?0:i===1?v/m:(Math.pow(i,v)-1)/(Math.pow(i,m)-1)}ci.interpolationFactor=function(e,i,s,p){var m=0;if(e.name==="exponential")m=Fm(i,e.base,s,p);else if(e.name==="linear")m=Fm(i,1,s,p);else if(e.name==="cubic-bezier"){var v=e.controlPoints;m=new k(v[0],v[1],v[2],v[3]).solve(Fm(i,1,s,p))}return m},ci.parse=function(e,i){var s=e[0],p=e[1],m=e[2],v=e.slice(3);if(!Array.isArray(p)||p.length===0)return i.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){var w=p[1];if(typeof w!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:w}}else{if(p[0]!=="cubic-bezier")return i.error("Unknown interpolation type "+String(p[0]),1,0);var S=p.slice(1);if(S.length!==4||S.some(function(ie){return typeof ie!="number"||ie<0||1<ie}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:S}}if(e.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(m=i.parse(m,2,je)))return null;var M=[],P=null;s==="interpolate-hcl"||s==="interpolate-lab"?P=Ci:i.expectedType&&i.expectedType.kind!=="value"&&(P=i.expectedType);for(var D=0;D<v.length;D+=2){var R=v[D],U=v[D+1],F=D+3,Y=D+4;if(typeof R!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(M.length&&M[M.length-1][0]>=R)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);var $=i.parse(U,Y,P);if(!$)return null;P=P||$.type,M.push([R,$])}return P.kind==="number"||P.kind==="color"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new ci(P,s,p,m,M):i.error("Type "+on(P)+" is not interpolatable.")},ci.prototype.evaluate=function(e){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(e);var p=this.input.evaluate(e);if(p<=i[0])return s[0].evaluate(e);var m=i.length;if(p>=i[m-1])return s[m-1].evaluate(e);var v=pl(i,p),w=ci.interpolationFactor(this.interpolation,p,i[v],i[v+1]),S=s[v].evaluate(e),M=s[v+1].evaluate(e);return this.operator==="interpolate"?hl[this.type.kind.toLowerCase()](S,M,w):this.operator==="interpolate-hcl"?jt.reverse(jt.interpolate(jt.forward(S),jt.forward(M),w)):ks.reverse(ks.interpolate(ks.forward(S),ks.forward(M),w))},ci.prototype.eachChild=function(e){e(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)e(s[i])},ci.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},ci.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,e,this.input.serialize()],s=0;s<this.labels.length;s++)i.push(this.labels[s],this.outputs[s].serialize());return i};var Ka=function(e,i){this.type=e,this.args=i};Ka.parse=function(e,i){if(e.length<2)return i.error("Expectected at least one argument.");var s=null,p=i.expectedType;p&&p.kind!=="value"&&(s=p);for(var m=[],v=0,w=e.slice(1);v<w.length;v+=1){var S=i.parse(w[v],1+m.length,s,void 0,{typeAnnotation:"omit"});if(!S)return null;s=s||S.type,m.push(S)}var M=p&&m.some(function(P){return Fp(p,P.type)});return new Ka(M?Vt:s,m)},Ka.prototype.evaluate=function(e){for(var i,s=null,p=0,m=0,v=this.args;m<v.length&&(p++,(s=v[m].evaluate(e))&&s instanceof yo&&!s.available&&(i=i||s.name,s=null,p===this.args.length&&(s=i)),s===null);m+=1);return s},Ka.prototype.eachChild=function(e){this.args.forEach(e)},Ka.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ka.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(i){e.push(i.serialize())}),e};var Zi=function(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i};function $a(e,i,s){this.type=e,this.index=i,this.input=s}function nu(e,i){this.type=kt,this.needle=e,this.haystack=i}function Ms(e,i,s){this.type=je,this.needle=e,this.haystack=i,this.fromIndex=s}function iu(e,i,s,p,m,v){this.inputType=e,this.type=i,this.input=s,this.cases=p,this.outputs=m,this.otherwise=v}function dl(e,i,s){this.type=e,this.branches=i,this.otherwise=s}function cr(e,i,s,p){this.type=e,this.input=i,this.beginIndex=s,this.endIndex=p}function jm(e,i){return e==="=="||e==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Um(e,i,s,p){return p.compare(i,s)===0}function xc(e,i,s){var p=e!=="=="&&e!=="!=";return m.parse=function(v,w){if(v.length!==3&&v.length!==4)return w.error("Expected two or three arguments.");var S=v[0],M=w.parse(v[1],1,Vt);if(!M)return null;if(!jm(S,M.type))return w.concat(1).error('"'+S+`" comparisons are not supported for type '`+on(M.type)+"'.");var P=w.parse(v[2],2,Vt);if(!P)return null;if(!jm(S,P.type))return w.concat(2).error('"'+S+`" comparisons are not supported for type '`+on(P.type)+"'.");if(M.type.kind!==P.type.kind&&M.type.kind!=="value"&&P.type.kind!=="value")return w.error("Cannot compare types '"+on(M.type)+"' and '"+on(P.type)+"'.");p&&(M.type.kind==="value"&&P.type.kind!=="value"?M=new oo(P.type,[M]):M.type.kind!=="value"&&P.type.kind==="value"&&(P=new oo(M.type,[P])));var D=null;if(v.length===4){if(M.type.kind!=="string"&&P.type.kind!=="string"&&M.type.kind!=="value"&&P.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(!(D=w.parse(v[3],3,vn)))return null}return new m(M,P,D)},m.prototype.evaluate=function(v){var w=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(p&&this.hasUntypedArgument){var M=ti(w),P=ti(S);if(M.kind!==P.kind||M.kind!=="string"&&M.kind!=="number")throw new ui('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+M.kind+", "+P.kind+") instead.")}if(this.collator&&!p&&this.hasUntypedArgument){var D=ti(w),R=ti(S);if(D.kind!=="string"||R.kind!=="string")return i(v,w,S)}return this.collator?s(v,w,S,this.collator.evaluate(v)):i(v,w,S)},m.prototype.eachChild=function(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)},m.prototype.outputDefined=function(){return!0},m.prototype.serialize=function(){var v=[e];return this.eachChild(function(w){v.push(w.serialize())}),v},m;function m(v,w,S){this.type=kt,this.lhs=v,this.rhs=w,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||w.type.kind==="value"}}function Xa(e,i,s,p,m){this.type=Ct,this.number=e,this.locale=i,this.currency=s,this.minFractionDigits=p,this.maxFractionDigits=m}Zi.prototype.evaluate=function(e){return this.result.evaluate(e)},Zi.prototype.eachChild=function(e){for(var i=0,s=this.bindings;i<s.length;i+=1)e(s[i][1]);e(this.result)},Zi.parse=function(e,i){if(e.length<4)return i.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var s=[],p=1;p<e.length-1;p+=2){var m=e[p];if(typeof m!="string")return i.error("Expected string, but found "+typeof m+" instead.",p);if(/[^a-zA-Z0-9_]/.test(m))return i.error("Variable names must contain only alphanumeric characters or '_'.",p);var v=i.parse(e[p+1],p+1);if(!v)return null;s.push([m,v])}var w=i.parse(e[e.length-1],e.length-1,i.expectedType,s);return w?new Zi(s,w):null},Zi.prototype.outputDefined=function(){return this.result.outputDefined()},Zi.prototype.serialize=function(){for(var e=["let"],i=0,s=this.bindings;i<s.length;i+=1){var p=s[i];e.push(p[0],p[1].serialize())}return e.push(this.result.serialize()),e},$a.parse=function(e,i){if(e.length!==3)return i.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var s=i.parse(e[1],1,je),p=i.parse(e[2],2,Bn(i.expectedType||Vt));return s&&p?new $a(p.type.itemType,s,p):null},$a.prototype.evaluate=function(e){var i=this.index.evaluate(e),s=this.input.evaluate(e);if(i<0)throw new ui("Array index out of bounds: "+i+" < 0.");if(i>=s.length)throw new ui("Array index out of bounds: "+i+" > "+(s.length-1)+".");if(i!==Math.floor(i))throw new ui("Array index must be an integer, but found "+i+" instead.");return s[i]},$a.prototype.eachChild=function(e){e(this.index),e(this.input)},$a.prototype.outputDefined=function(){return!1},$a.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]},nu.parse=function(e,i){if(e.length!==3)return i.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var s=i.parse(e[1],1,Vt),p=i.parse(e[2],2,Vt);return s&&p?Nm(s.type,[kt,Ct,je,Cr,Vt])?new nu(s,p):i.error("Expected first argument to be of type boolean, string, number or null, but found "+on(s.type)+" instead"):null},nu.prototype.evaluate=function(e){var i=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!s)return!1;if(!jp(i,["boolean","string","number","null"]))throw new ui("Expected first argument to be of type boolean, string, number or null, but found "+on(ti(i))+" instead.");if(!jp(s,["string","array"]))throw new ui("Expected second argument to be of type array or string, but found "+on(ti(s))+" instead.");return 0<=s.indexOf(i)},nu.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},nu.prototype.outputDefined=function(){return!0},nu.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]},Ms.parse=function(e,i){if(e.length<=2||5<=e.length)return i.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var s=i.parse(e[1],1,Vt),p=i.parse(e[2],2,Vt);if(!s||!p)return null;if(!Nm(s.type,[kt,Ct,je,Cr,Vt]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+on(s.type)+" instead");if(e.length!==4)return new Ms(s,p);var m=i.parse(e[3],3,je);return m?new Ms(s,p,m):null},Ms.prototype.evaluate=function(e){var i=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!jp(i,["boolean","string","number","null"]))throw new ui("Expected first argument to be of type boolean, string, number or null, but found "+on(ti(i))+" instead.");if(!jp(s,["string","array"]))throw new ui("Expected second argument to be of type array or string, but found "+on(ti(s))+" instead.");if(this.fromIndex){var p=this.fromIndex.evaluate(e);return s.indexOf(i,p)}return s.indexOf(i)},Ms.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Ms.prototype.outputDefined=function(){return!1},Ms.prototype.serialize=function(){if(this.fromIndex==null||this.fromIndex===void 0)return["index-of",this.needle.serialize(),this.haystack.serialize()];var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]},iu.parse=function(e,i){if(e.length<5)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return i.error("Expected an even number of arguments.");var s,p;i.expectedType&&i.expectedType.kind!=="value"&&(p=i.expectedType);for(var m={},v=[],w=2;w<e.length-1;w+=2){var S=e[w],M=e[w+1];Array.isArray(S)||(S=[S]);var P=i.concat(w);if(S.length===0)return P.error("Expected at least one branch label.");for(var D=0,R=S;D<R.length;D+=1){var U=R[D];if(typeof U!="number"&&typeof U!="string")return P.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return P.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof U=="number"&&Math.floor(U)!==U)return P.error("Numeric branch labels must be integer values.");if(s){if(P.checkSubtype(s,ti(U)))return null}else s=ti(U);if(m[String(U)]!==void 0)return P.error("Branch labels must be unique.");m[String(U)]=v.length}var F=i.parse(M,w,p);if(!F)return null;p=p||F.type,v.push(F)}var Y=i.parse(e[1],1,Vt);if(!Y)return null;var $=i.parse(e[e.length-1],e.length-1,p);return!$||Y.type.kind!=="value"&&i.concat(1).checkSubtype(s,Y.type)?null:new iu(s,p,Y,m,v,$)},iu.prototype.evaluate=function(e){var i=this.input.evaluate(e);return(ti(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)},iu.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},iu.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},iu.prototype.serialize=function(){for(var e=this,i=["match",this.input.serialize()],s=[],p={},m=0,v=Object.keys(this.cases).sort();m<v.length;m+=1){var w=v[m];(R=p[this.cases[w]])===void 0?(p[this.cases[w]]=s.length,s.push([this.cases[w],[w]])):s[R][1].push(w)}for(var S=function(F){return e.inputType.kind==="number"?Number(F):F},M=0,P=s;M<P.length;M+=1){var D=P[M],R=D[0],U=D[1];i.push(U.length===1?S(U[0]):U.map(S)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i},dl.parse=function(e,i){if(e.length<4)return i.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return i.error("Expected an odd number of arguments.");var s;i.expectedType&&i.expectedType.kind!=="value"&&(s=i.expectedType);for(var p=[],m=1;m<e.length-1;m+=2){var v=i.parse(e[m],m,kt);if(!v)return null;var w=i.parse(e[m+1],m+1,s);if(!w)return null;p.push([v,w]),s=s||w.type}var S=i.parse(e[e.length-1],e.length-1,s);return S?new dl(s,p,S):null},dl.prototype.evaluate=function(e){for(var i=0,s=this.branches;i<s.length;i+=1){var p=s[i],m=p[1];if(p[0].evaluate(e))return m.evaluate(e)}return this.otherwise.evaluate(e)},dl.prototype.eachChild=function(e){for(var i=0,s=this.branches;i<s.length;i+=1){var p=s[i],m=p[1];e(p[0]),e(m)}e(this.otherwise)},dl.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},dl.prototype.serialize=function(){var e=["case"];return this.eachChild(function(i){e.push(i.serialize())}),e},cr.parse=function(e,i){if(e.length<=2||5<=e.length)return i.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var s=i.parse(e[1],1,Vt),p=i.parse(e[2],2,je);if(!s||!p)return null;if(!Nm(s.type,[Bn(Vt),Ct,Vt]))return i.error("Expected first argument to be of type array or string, but found "+on(s.type)+" instead");if(e.length!==4)return new cr(s.type,s,p);var m=i.parse(e[3],3,je);return m?new cr(s.type,s,p,m):null},cr.prototype.evaluate=function(e){var i=this.input.evaluate(e),s=this.beginIndex.evaluate(e);if(!jp(i,["string","array"]))throw new ui("Expected first argument to be of type array or string, but found "+on(ti(i))+" instead.");if(this.endIndex){var p=this.endIndex.evaluate(e);return i.slice(s,p)}return i.slice(s)},cr.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},cr.prototype.outputDefined=function(){return!1},cr.prototype.serialize=function(){if(this.endIndex==null||this.endIndex===void 0)return["slice",this.input.serialize(),this.beginIndex.serialize()];var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]};var Qy=xc("==",function(e,i,s){return i===s},Um),e0=xc("!=",function(e,i,s){return i!==s},function(e,i,s,p){return!Um(0,i,s,p)}),Vm=xc("<",function(e,i,s){return i<s},function(e,i,s,p){return p.compare(i,s)<0}),pi=xc(">",function(e,i,s){return s<i},function(e,i,s,p){return 0<p.compare(i,s)}),qm=xc("<=",function(e,i,s){return i<=s},function(e,i,s,p){return p.compare(i,s)<=0}),t0=xc(">=",function(e,i,s){return s<=i},function(e,i,s,p){return 0<=p.compare(i,s)});function Ti(e){this.type=je,this.input=e}Xa.parse=function(e,i){if(e.length!==3)return i.error("Expected two arguments.");var s=i.parse(e[1],1,je);if(!s)return null;var p=e[2];if(typeof p!="object"||Array.isArray(p))return i.error("NumberFormat options argument must be an object.");var m=null;if(p.locale&&!(m=i.parse(p.locale,1,Ct)))return null;var v=null;if(p.currency&&!(v=i.parse(p.currency,1,Ct)))return null;var w=null;if(p["min-fraction-digits"]&&!(w=i.parse(p["min-fraction-digits"],1,je)))return null;var S=null;return p["max-fraction-digits"]&&!(S=i.parse(p["max-fraction-digits"],1,je))?null:new Xa(s,m,v,w,S)},Xa.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Xa.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Xa.prototype.outputDefined=function(){return!1},Xa.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]},Ti.parse=function(e,i){if(e.length!==2)return i.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var s=i.parse(e[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?i.error("Expected argument of type string or array, but found "+on(s.type)+" instead."):new Ti(s):null},Ti.prototype.evaluate=function(e){var i=this.input.evaluate(e);if(typeof i=="string"||Array.isArray(i))return i.length;throw new ui("Expected value to be of type string or array, but found "+on(ti(i))+" instead.")},Ti.prototype.eachChild=function(e){e(this.input)},Ti.prototype.outputDefined=function(){return!1},Ti.prototype.serialize=function(){var e=["length"];return this.eachChild(function(i){e.push(i.serialize())}),e};var fl={"==":Qy,"!=":e0,">":pi,"<":Vm,">=":t0,"<=":qm,array:oo,at:$a,boolean:oo,case:dl,coalesce:Ka,collator:na,format:ea,image:ta,in:nu,"index-of":Ms,interpolate:ci,"interpolate-hcl":ci,"interpolate-lab":ci,length:Ti,let:Zi,literal:Ea,match:iu,number:oo,"number-format":Xa,object:oo,slice:cr,step:aa,string:oo,"to-boolean":ao,"to-color":ao,"to-number":ao,"to-string":ao,var:ia,within:so};function r0(e,i){var s=i[0],p=i[1],m=i[2],v=i[3];s=s.evaluate(e),p=p.evaluate(e),m=m.evaluate(e);var w=v?v.evaluate(e):1,S=Jy(s,p,m,w);if(S)throw new ui(S);return new Sr(s/255*w,p/255*w,m/255*w,w)}function Zm(e,i){return e in i}function gd(e,i){var s=i[e];return s===void 0?null:s}function ml(e){return{type:e}}function Gm(e){return{result:"success",value:e}}function As(e){return{result:"error",value:e}}function wc(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function ou(e){return e.expression&&-1<e.expression.parameters.indexOf("zoom")}function yd(e){return e.expression&&e.expression.interpolated}function lr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Gi(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Hm(e){return e}function Ja(e,i,s){return e!==void 0?e:i!==void 0?i:s!==void 0?s:void 0}function n0(e,i,s,p,m){return Ja(typeof s===m?p[s]:void 0,e.default,i.default)}function ax(e,i,s){if(lr(s)!=="number")return Ja(e.default,i.default);var p=e.stops.length;if(p===1||s<=e.stops[0][0])return e.stops[0][1];if(s>=e.stops[p-1][0])return e.stops[p-1][1];var m=pl(e.stops.map(function(v){return v[0]}),s);return e.stops[m][1]}function i0(e,i,s){var p=e.base!==void 0?e.base:1;if(lr(s)!=="number")return Ja(e.default,i.default);var m=e.stops.length;if(m===1||s<=e.stops[0][0])return e.stops[0][1];if(s>=e.stops[m-1][0])return e.stops[m-1][1];var v,w,S,M,P,D=pl(e.stops.map(function(ie){return ie[0]}),s),R=(v=s,w=p,S=e.stops[D][0],M=e.stops[D+1][0]-S,P=v-S,M==0?0:w===1?P/M:(Math.pow(w,P)-1)/(Math.pow(w,M)-1)),U=e.stops[D][1],F=e.stops[D+1][1],Y=hl[i.type]||Hm;if(e.colorSpace&&e.colorSpace!=="rgb"){var $=Bm[e.colorSpace];Y=function(ie,te){return $.reverse($.interpolate($.forward(ie),$.forward(te),R))}}return typeof U.evaluate=="function"?{evaluate:function(){for(var ie=[],te=arguments.length;te--;)ie[te]=arguments[te];var xe=U.evaluate.apply(void 0,ie),be=F.evaluate.apply(void 0,ie);if(xe!==void 0&&be!==void 0)return Y(xe,be,R)}}:Y(U,F,R)}function o0(e,i,s){return i.type==="color"?s=Sr.parse(s):i.type==="formatted"?s=Si.fromString(s.toString()):i.type==="resolvedImage"?s=yo.fromString(s.toString()):lr(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0),Ja(s,e.default,i.default)}Un.register(fl,{error:[{kind:"error"},[Ct],function(e,i){throw new ui(i[0].evaluate(e))}],typeof:[Ct,[Vt],function(e,i){return on(ti(i[0].evaluate(e)))}],"to-rgba":[Bn(je,4),[Ci],function(e,i){return i[0].evaluate(e).toArray()}],rgb:[Ci,[je,je,je],r0],rgba:[Ci,[je,je,je,je],r0],has:{type:kt,overloads:[[[Ct],function(e,i){return Zm(i[0].evaluate(e),e.properties())}],[[Ct,Qo],function(e,i){var s=i[1];return Zm(i[0].evaluate(e),s.evaluate(e))}]]},get:{type:Vt,overloads:[[[Ct],function(e,i){return gd(i[0].evaluate(e),e.properties())}],[[Ct,Qo],function(e,i){var s=i[1];return gd(i[0].evaluate(e),s.evaluate(e))}]]},"feature-state":[Vt,[Ct],function(e,i){return gd(i[0].evaluate(e),e.featureState||{})}],properties:[Qo,[],function(e){return e.properties()}],"geometry-type":[Ct,[],function(e){return e.geometryType()}],id:[Vt,[],function(e){return e.id()}],zoom:[je,[],function(e){return e.globals.zoom}],"heatmap-density":[je,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[je,[],function(e){return e.globals.lineProgress||0}],accumulated:[Vt,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[je,ml(je),function(e,i){for(var s=0,p=0,m=i;p<m.length;p+=1)s+=m[p].evaluate(e);return s}],"*":[je,ml(je),function(e,i){for(var s=1,p=0,m=i;p<m.length;p+=1)s*=m[p].evaluate(e);return s}],"-":{type:je,overloads:[[[je,je],function(e,i){var s=i[1];return i[0].evaluate(e)-s.evaluate(e)}],[[je],function(e,i){return-i[0].evaluate(e)}]]},"/":[je,[je,je],function(e,i){var s=i[1];return i[0].evaluate(e)/s.evaluate(e)}],"%":[je,[je,je],function(e,i){var s=i[1];return i[0].evaluate(e)%s.evaluate(e)}],ln2:[je,[],function(){return Math.LN2}],pi:[je,[],function(){return Math.PI}],e:[je,[],function(){return Math.E}],"^":[je,[je,je],function(e,i){var s=i[1];return Math.pow(i[0].evaluate(e),s.evaluate(e))}],sqrt:[je,[je],function(e,i){return Math.sqrt(i[0].evaluate(e))}],log10:[je,[je],function(e,i){return Math.log(i[0].evaluate(e))/Math.LN10}],ln:[je,[je],function(e,i){return Math.log(i[0].evaluate(e))}],log2:[je,[je],function(e,i){return Math.log(i[0].evaluate(e))/Math.LN2}],sin:[je,[je],function(e,i){return Math.sin(i[0].evaluate(e))}],cos:[je,[je],function(e,i){return Math.cos(i[0].evaluate(e))}],tan:[je,[je],function(e,i){return Math.tan(i[0].evaluate(e))}],asin:[je,[je],function(e,i){return Math.asin(i[0].evaluate(e))}],acos:[je,[je],function(e,i){return Math.acos(i[0].evaluate(e))}],atan:[je,[je],function(e,i){return Math.atan(i[0].evaluate(e))}],min:[je,ml(je),function(e,i){return Math.min.apply(Math,i.map(function(s){return s.evaluate(e)}))}],max:[je,ml(je),function(e,i){return Math.max.apply(Math,i.map(function(s){return s.evaluate(e)}))}],abs:[je,[je],function(e,i){return Math.abs(i[0].evaluate(e))}],round:[je,[je],function(e,i){var s=i[0].evaluate(e);return s<0?-Math.round(-s):Math.round(s)}],floor:[je,[je],function(e,i){return Math.floor(i[0].evaluate(e))}],ceil:[je,[je],function(e,i){return Math.ceil(i[0].evaluate(e))}],"filter-==":[kt,[Ct,Vt],function(e,i){var s=i[0],p=i[1];return e.properties()[s.value]===p.value}],"filter-id-==":[kt,[Vt],function(e,i){var s=i[0];return e.id()===s.value}],"filter-type-==":[kt,[Ct],function(e,i){var s=i[0];return e.geometryType()===s.value}],"filter-<":[kt,[Ct,Vt],function(e,i){var s=i[0],p=i[1],m=e.properties()[s.value],v=p.value;return typeof m==typeof v&&m<v}],"filter-id-<":[kt,[Vt],function(e,i){var s=i[0],p=e.id(),m=s.value;return typeof p==typeof m&&p<m}],"filter->":[kt,[Ct,Vt],function(e,i){var s=i[0],p=i[1],m=e.properties()[s.value],v=p.value;return typeof m==typeof v&&v<m}],"filter-id->":[kt,[Vt],function(e,i){var s=i[0],p=e.id(),m=s.value;return typeof p==typeof m&&m<p}],"filter-<=":[kt,[Ct,Vt],function(e,i){var s=i[0],p=i[1],m=e.properties()[s.value],v=p.value;return typeof m==typeof v&&m<=v}],"filter-id-<=":[kt,[Vt],function(e,i){var s=i[0],p=e.id(),m=s.value;return typeof p==typeof m&&p<=m}],"filter->=":[kt,[Ct,Vt],function(e,i){var s=i[0],p=i[1],m=e.properties()[s.value],v=p.value;return typeof m==typeof v&&v<=m}],"filter-id->=":[kt,[Vt],function(e,i){var s=i[0],p=e.id(),m=s.value;return typeof p==typeof m&&m<=p}],"filter-has":[kt,[Vt],function(e,i){return i[0].value in e.properties()}],"filter-has-id":[kt,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[kt,[Bn(Ct)],function(e,i){return 0<=i[0].value.indexOf(e.geometryType())}],"filter-id-in":[kt,[Bn(Vt)],function(e,i){return 0<=i[0].value.indexOf(e.id())}],"filter-in-small":[kt,[Ct,Bn(Vt)],function(e,i){var s=i[0];return 0<=i[1].value.indexOf(e.properties()[s.value])}],"filter-in-large":[kt,[Ct,Bn(Vt)],function(e,i){var s=i[0],p=i[1];return function(m,v,w,S){for(;w<=S;){var M=w+S>>1;if(v[M]===m)return!0;v[M]>m?S=M-1:w=1+M}return!1}(e.properties()[s.value],p.value,0,p.value.length-1)}],all:{type:kt,overloads:[[[kt,kt],function(e,i){var s=i[1];return i[0].evaluate(e)&&s.evaluate(e)}],[ml(kt),function(e,i){for(var s=0,p=i;s<p.length;s+=1)if(!p[s].evaluate(e))return!1;return!0}]]},any:{type:kt,overloads:[[[kt,kt],function(e,i){var s=i[1];return i[0].evaluate(e)||s.evaluate(e)}],[ml(kt),function(e,i){for(var s=0,p=i;s<p.length;s+=1)if(p[s].evaluate(e))return!0;return!1}]]},"!":[kt,[kt],function(e,i){return!i[0].evaluate(e)}],"is-supported-script":[kt,[Ct],function(e,i){var s=e.globals&&e.globals.isSupportedScript;return!s||s(i[0].evaluate(e))}],upcase:[Ct,[Ct],function(e,i){return i[0].evaluate(e).toUpperCase()}],downcase:[Ct,[Ct],function(e,i){return i[0].evaluate(e).toLowerCase()}],concat:[Ct,ml(Vt),function(e,i){return i.map(function(s){return Vp(s.evaluate(e))}).join("")}],"resolved-locale":[Ct,[vn],function(e,i){return i[0].evaluate(e).resolvedLocale()}]});var bc=function(e,i){var s;this.expression=e,this._warningHistory={},this._evaluator=new ra,this._defaultValue=i?(s=i).type==="color"&&Gi(s.default)?new Sr(0,0,0,0):s.type==="color"?Sr.parse(s.default)||null:s.default===void 0?null:s.default:null,this._enumValues=i&&i.type==="enum"?i.values:null};function Cc(e){return Array.isArray(e)&&0<e.length&&typeof e[0]=="string"&&e[0]in fl}function Oi(e,i){var s,p=new oa(fl,[],i?(s={color:Ci,string:Ct,number:je,enum:Ct,boolean:kt,formatted:Wr,resolvedImage:Ql},i.type==="array"?Bn(s[i.value]||Vt,i.length):s[i.type]):void 0),m=p.parse(e,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Gm(new bc(m,i)):As(p.errors)}bc.prototype.evaluateWithoutErrorHandling=function(e,i,s,p,m,v){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=s,this._evaluator.canonical=p,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)},bc.prototype.evaluate=function(e,i,s,p,m,v){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=s||null,this._evaluator.canonical=p,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v||null;try{var w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new ui("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(w)+" instead.");return w}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var gl=function(e,i){this.kind=e,this._styleExpression=i,this.isStateDependent=e!=="constant"&&!Is(i.expression)};gl.prototype.evaluateWithoutErrorHandling=function(e,i,s,p,m,v){return this._styleExpression.evaluateWithoutErrorHandling(e,i,s,p,m,v)},gl.prototype.evaluate=function(e,i,s,p,m,v){return this._styleExpression.evaluate(e,i,s,p,m,v)};var Sc=function(e,i,s,p){this.kind=e,this.zoomStops=s,this._styleExpression=i,this.isStateDependent=e!=="camera"&&!Is(i.expression),this.interpolationType=p};function a0(e,i){if((e=Oi(e,i)).result==="error")return e;var s=e.value.expression,p=ul(s);if(!p&&!wc(i))return As([new Ft("","data expressions not supported")]);var m=cl(s,["zoom"]);if(!m&&!ou(i))return As([new Ft("","zoom expressions not supported")]);var v=function w(S){var M=null;if(S instanceof Zi)M=w(S.result);else if(S instanceof Ka)for(var P=0,D=S.args;P<D.length&&!(M=w(D[P]));P+=1);else(S instanceof aa||S instanceof ci)&&S.input instanceof Un&&S.input.name==="zoom"&&(M=S);return M instanceof Ft||S.eachChild(function(R){var U=w(R);U instanceof Ft?M=U:!M&&U?M=new Ft("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):M&&U&&M!==U&&(M=new Ft("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),M}(s);return v||m?v instanceof Ft?As([v]):v instanceof ci&&!yd(i)?As([new Ft("",'"interpolate" expressions cannot be used with this property')]):Gm(v?new Sc(p?"camera":"composite",e.value,v.labels,v instanceof ci?v.interpolation:void 0):new gl(p?"constant":"source",e.value)):As([new Ft("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function $p(e,i){this._parameters=e,this._specification=i,wt(this,function s(p,m){var v,w,S,M=m.type==="color",P=p.stops&&typeof p.stops[0][0]=="object",D=P||!(P||p.property!==void 0),R=p.type||(yd(m)?"exponential":"interval");if(M&&((p=wt({},p)).stops&&(p.stops=p.stops.map(function(tt){return[tt[0],Sr.parse(tt[1])]})),p.default=Sr.parse(p.default?p.default:m.default)),p.colorSpace&&p.colorSpace!=="rgb"&&!Bm[p.colorSpace])throw new Error("Unknown color space: "+p.colorSpace);if(R==="exponential")v=i0;else if(R==="interval")v=ax;else if(R==="categorical"){v=n0,w=Object.create(null);for(var U=0,F=p.stops;U<F.length;U+=1){var Y=F[U];w[Y[0]]=Y[1]}S=typeof p.stops[0][0]}else{if(R!=="identity")throw new Error('Unknown function type "'+R+'"');v=o0}if(P){for(var $={},ie=[],te=0;te<p.stops.length;te++){var xe=p.stops[te],be=xe[0].zoom;$[be]===void 0&&($[be]={zoom:be,type:p.type,property:p.property,default:p.default,stops:[]},ie.push(be)),$[be].stops.push([xe[0].value,xe[1]])}for(var Te=[],Me=0,Fe=ie;Me<Fe.length;Me+=1){var Ye=Fe[Me];Te.push([$[Ye].zoom,s($[Ye],m)])}var it={name:"linear"};return{kind:"composite",interpolationType:it,interpolationFactor:ci.interpolationFactor.bind(void 0,it),zoomStops:Te.map(function(tt){return tt[0]}),evaluate:function(tt,gt){var at=tt.zoom;return i0({stops:Te,base:p.base},m,at).evaluate(at,gt)}}}if(D){var ft=R==="exponential"?{name:"exponential",base:p.base!==void 0?p.base:1}:null;return{kind:"camera",interpolationType:ft,interpolationFactor:ci.interpolationFactor.bind(void 0,ft),zoomStops:p.stops.map(function(tt){return tt[0]}),evaluate:function(tt){return v(p,m,tt.zoom,w,S)}}}return{kind:"source",evaluate:function(tt,gt){var at=gt&&gt.properties?gt.properties[p.property]:void 0;return at===void 0?Ja(p.default,m.default):v(p,m,at,w,S)}}}(this._parameters,this._specification))}function Ia(e){var i=e.key,s=e.value,p=e.valueSpec||{},m=e.objectElementValidators||{},v=e.style,w=e.styleSpec,S=[],M=lr(s);if(M!=="object")return[new Ae(i,s,"object expected, "+M+" found")];for(var P in s){var D=P.split(".")[0],R=p[D]||p["*"],U=void 0;if(m[D])U=m[D];else if(p[D])U=ka;else if(m["*"])U=m["*"];else{if(!p["*"]){S.push(new Ae(i,s[P],'unknown property "'+P+'"'));continue}U=ka}S=S.concat(U({key:(i&&i+".")+P,value:s[P],valueSpec:R,style:v,styleSpec:w,object:s,objectKey:P},s))}for(var F in p)m[F]||p[F].required&&p[F].default===void 0&&s[F]===void 0&&S.push(new Ae(i,s,'missing required property "'+F+'"'));return S}function s0(e){var i=e.value,s=e.valueSpec,p=e.style,m=e.styleSpec,v=e.key,w=e.arrayElementValidator||ka;if(lr(i)!=="array")return[new Ae(v,i,"array expected, "+lr(i)+" found")];if(s.length&&i.length!==s.length)return[new Ae(v,i,"array length "+s.length+" expected, length "+i.length+" found")];if(s["min-length"]&&i.length<s["min-length"])return[new Ae(v,i,"array length at least "+s["min-length"]+" expected, length "+i.length+" found")];var S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),lr(s.value)==="object"&&(S=s.value);for(var M=[],P=0;P<i.length;P++)M=M.concat(w({array:i,arrayIndex:P,value:i[P],valueSpec:S,style:p,styleSpec:m,key:v+"["+P+"]"}));return M}function l0(e){var i=e.key,s=e.value,p=e.valueSpec,m=lr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new Ae(i,s,"number expected, "+m+" found")]:"minimum"in p&&s<p.minimum?[new Ae(i,s,s+" is less than the minimum value "+p.minimum)]:"maximum"in p&&s>p.maximum?[new Ae(i,s,s+" is greater than the maximum value "+p.maximum)]:[]}function u0(e){var i,s,p,m=e.valueSpec,v=vt(e.value.type),w={},S=v!=="categorical"&&e.value.property===void 0,M=!S,P=lr(e.value.stops)==="array"&&lr(e.value.stops[0])==="array"&&lr(e.value.stops[0][0])==="object",D=Ia({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(F){if(v==="identity")return[new Ae(F.key,F.value,'identity function may not have a "stops" property')];var Y=[],$=F.value;return Y=Y.concat(s0({key:F.key,value:$,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:R})),lr($)==="array"&&$.length===0&&Y.push(new Ae(F.key,$,"array must have at least one stop")),Y},default:function(F){return ka({key:F.key,value:F.value,valueSpec:m,style:F.style,styleSpec:F.styleSpec})}}});return v==="identity"&&S&&D.push(new Ae(e.key,e.value,'missing required property "property"')),v==="identity"||e.value.stops||D.push(new Ae(e.key,e.value,'missing required property "stops"')),v==="exponential"&&e.valueSpec.expression&&!yd(e.valueSpec)&&D.push(new Ae(e.key,e.value,"exponential functions not supported")),8<=e.styleSpec.$version&&(M&&!wc(e.valueSpec)?D.push(new Ae(e.key,e.value,"property functions not supported")):S&&!ou(e.valueSpec)&&D.push(new Ae(e.key,e.value,"zoom functions not supported"))),v!=="categorical"&&!P||e.value.property!==void 0||D.push(new Ae(e.key,e.value,'"property" property is required')),D;function R(F){var Y=[],$=F.value,ie=F.key;if(lr($)!=="array")return[new Ae(ie,$,"array expected, "+lr($)+" found")];if($.length!==2)return[new Ae(ie,$,"array length 2 expected, length "+$.length+" found")];if(P){if(lr($[0])!=="object")return[new Ae(ie,$,"object expected, "+lr($[0])+" found")];if($[0].zoom===void 0)return[new Ae(ie,$,"object stop key must have zoom")];if($[0].value===void 0)return[new Ae(ie,$,"object stop key must have value")];if(p&&p>vt($[0].zoom))return[new Ae(ie,$[0].zoom,"stop zoom values must appear in ascending order")];vt($[0].zoom)!==p&&(p=vt($[0].zoom),s=void 0,w={}),Y=Y.concat(Ia({key:ie+"[0]",value:$[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:l0,value:U}}))}else Y=Y.concat(U({key:ie+"[0]",value:$[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},$));return Cc(Pt($[1]))?Y.concat([new Ae(ie+"[1]",$[1],"expressions are not allowed in function stops.")]):Y.concat(ka({key:ie+"[1]",value:$[1],valueSpec:m,style:F.style,styleSpec:F.styleSpec}))}function U(F,Y){var $=lr(F.value),ie=vt(F.value),te=F.value!==null?F.value:Y;if(i){if($!==i)return[new Ae(F.key,te,$+" stop domain type must match previous stop domain type "+i)]}else i=$;if($!=="number"&&$!=="string"&&$!=="boolean")return[new Ae(F.key,te,"stop domain value must be a number, string, or boolean")];if($==="number"||v==="categorical")return v!=="categorical"||$!=="number"||isFinite(ie)&&Math.floor(ie)===ie?v!=="categorical"&&$==="number"&&s!==void 0&&ie<s?[new Ae(F.key,te,"stop domain values must appear in ascending order")]:(s=ie,v==="categorical"&&ie in w?[new Ae(F.key,te,"stop domain values must be unique")]:(w[ie]=!0,[])):[new Ae(F.key,te,"integer expected, found "+ie)];var xe="number expected, "+$+" found";return wc(m)&&v===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ae(F.key,te,xe)]}}function au(e){var i=(e.expressionContext==="property"?a0:Oi)(Pt(e.value),e.valueSpec);if(i.result==="error")return i.value.map(function(p){return new Ae(""+e.key+p.key,e.value,p.message)});var s=i.value.expression||i.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!s.outputDefined())return[new Ae(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Is(s))return[new Ae(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Is(s))return[new Ae(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!cl(s,["zoom","feature-state"]))return[new Ae(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!ul(s))return[new Ae(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xp(e){var i=e.key,s=e.value,p=e.valueSpec,m=[];return Array.isArray(p.values)?p.values.indexOf(vt(s))===-1&&m.push(new Ae(i,s,"expected one of ["+p.values.join(", ")+"], "+JSON.stringify(s)+" found")):Object.keys(p.values).indexOf(vt(s))===-1&&m.push(new Ae(i,s,"expected one of ["+Object.keys(p.values).join(", ")+"], "+JSON.stringify(s)+" found")),m}function Tc(e){if(e===!0||e===!1)return 1;if(Array.isArray(e)&&e.length!==0)switch(e[0]){case"has":return 2<=e.length&&e[1]!=="$id"&&e[1]!=="$type";case"in":return 3<=e.length&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var i=0,s=e.slice(1);i<s.length;i+=1){var p=s[i];if(!Tc(p)&&typeof p!="boolean")return}return 1;default:return 1}}Sc.prototype.evaluateWithoutErrorHandling=function(e,i,s,p,m,v){return this._styleExpression.evaluateWithoutErrorHandling(e,i,s,p,m,v)},Sc.prototype.evaluate=function(e,i,s,p,m,v){return this._styleExpression.evaluate(e,i,s,p,m,v)},Sc.prototype.interpolationFactor=function(e,i,s){return this.interpolationType?ci.interpolationFactor(this.interpolationType,e,i,s):0},$p.deserialize=function(e){return new $p(e._parameters,e._specification)};var vd={type:"boolean",default:!($p.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ec(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Tc(e)||(e=Jp(e));var i=Oi(e,vd);if(i.result==="error")throw new Error(i.value.map(function(s){return s.key+": "+s.message}).join(", "));return{filter:function(s,p,m){return i.value.evaluate(s,p,{},m)},needGeometry:function s(p){if(!Array.isArray(p))return!1;if(p[0]==="within")return!0;for(var m=1;m<p.length;m++)if(s(p[m]))return!0;return!1}(e)}}function sx(e,i){return e<i?-1:i<e?1:0}function Jp(e){if(!e)return!0;var i,s=e[0];return e.length<=1?s!=="any":s==="=="?su(e[1],e[2],"=="):s==="!="?yl(su(e[1],e[2],"==")):s==="<"||s===">"||s==="<="||s===">="?su(e[1],e[2],s):s==="any"?(i=e.slice(1),["any"].concat(i.map(Jp))):s==="all"?["all"].concat(e.slice(1).map(Jp)):s==="none"?["all"].concat(e.slice(1).map(Jp).map(yl)):s==="in"?Qp(e[1],e.slice(2)):s==="!in"?yl(Qp(e[1],e.slice(2))):s==="has"?eh(e[1]):s==="!has"?yl(eh(e[1])):s!=="within"||e}function su(e,i,s){switch(e){case"$type":return["filter-type-"+s,i];case"$id":return["filter-id-"+s,i];default:return["filter-"+s,e,i]}}function Qp(e,i){if(i.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return 200<i.length&&!i.some(function(s){return typeof s!=typeof i[0]})?["filter-in-large",e,["literal",i.sort(sx)]]:["filter-in-small",e,["literal",i]]}}function eh(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function yl(e){return["!",e]}function Wm(e){return Tc(Pt(e.value))?au(wt({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(s){var p=s.value,m=s.key;if(lr(p)!=="array")return[new Ae(m,p,"array expected, "+lr(p)+" found")];var v,w=s.styleSpec,S=[];if(p.length<1)return[new Ae(m,p,"filter array must have at least 1 element")];switch(S=S.concat(Xp({key:m+"[0]",value:p[0],valueSpec:w.filter_operator,style:s.style,styleSpec:s.styleSpec})),vt(p[0])){case"<":case"<=":case">":case">=":2<=p.length&&vt(p[1])==="$type"&&S.push(new Ae(m,p,'"$type" cannot be use with operator "'+p[0]+'"'));case"==":case"!=":p.length!==3&&S.push(new Ae(m,p,'filter array for operator "'+p[0]+'" must have 3 elements'));case"in":case"!in":2<=p.length&&(v=lr(p[1]))!=="string"&&S.push(new Ae(m+"[1]",p[1],"string expected, "+v+" found"));for(var M=2;M<p.length;M++)v=lr(p[M]),vt(p[1])==="$type"?S=S.concat(Xp({key:m+"["+M+"]",value:p[M],valueSpec:w.geometry_type,style:s.style,styleSpec:s.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&S.push(new Ae(m+"["+M+"]",p[M],"string, number, or boolean expected, "+v+" found"));break;case"any":case"all":case"none":for(var P=1;P<p.length;P++)S=S.concat(i({key:m+"["+P+"]",value:p[P],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":v=lr(p[1]),p.length!==2?S.push(new Ae(m,p,'filter array for "'+p[0]+'" operator must have 2 elements')):v!=="string"&&S.push(new Ae(m+"[1]",p[1],"string expected, "+v+" found"));break;case"within":v=lr(p[1]),p.length!==2?S.push(new Ae(m,p,'filter array for "'+p[0]+'" operator must have 2 elements')):v!=="object"&&S.push(new Ae(m+"[1]",p[1],"object expected, "+v+" found"))}return S}(e)}function c0(e,i){var s=e.key,p=e.style,m=e.styleSpec,v=e.value,w=e.objectKey,S=m[i+"_"+e.layerType];if(!S)return[];var M=w.match(/^(.*)-transition$/);if(i==="paint"&&M&&S[M[1]]&&S[M[1]].transition)return ka({key:s,value:v,valueSpec:m.transition,style:p,styleSpec:m});var P,D=e.valueSpec||S[w];if(!D)return[new Ae(s,v,'unknown property "'+w+'"')];if(lr(v)==="string"&&wc(D)&&!D.tokens&&(P=/^{([^}]+)}$/.exec(v)))return[new Ae(s,v,'"'+w+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(P[1])+" }`.")];var R=[];return e.layerType==="symbol"&&(w==="text-field"&&p&&!p.glyphs&&R.push(new Ae(s,v,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Gi(Pt(v))&&vt(v.type)==="identity"&&R.push(new Ae(s,v,'"text-font" does not support identity functions'))),R.concat(ka({key:e.key,value:v,valueSpec:D,style:p,styleSpec:m,expressionContext:"property",propertyType:i,propertyKey:w}))}function p0(e){return c0(e,"paint")}function lu(e){return c0(e,"layout")}function St(e){var i=[],s=e.value,p=e.key,m=e.style,v=e.styleSpec;s.type||s.ref||i.push(new Ae(p,s,'either "type" or "ref" is required'));var w,S=vt(s.type),M=vt(s.ref);if(s.id)for(var P=vt(s.id),D=0;D<e.arrayIndex;D++){var R=m.layers[D];vt(R.id)===P&&i.push(new Ae(p,s.id,'duplicate layer id "'+s.id+'", previously used at line '+R.id.__line__))}if("ref"in s)["type","source","source-layer","filter","layout"].forEach(function(Y){Y in s&&i.push(new Ae(p,s[Y],'"'+Y+'" is prohibited for ref layers'))}),m.layers.forEach(function(Y){vt(Y.id)===M&&(w=Y)}),w?w.ref?i.push(new Ae(p,s.ref,"ref cannot reference another ref layer")):S=vt(w.type):i.push(new Ae(p,s.ref,'ref layer "'+M+'" not found'));else if(S!=="background")if(s.source){var U=m.sources&&m.sources[s.source],F=U&&vt(U.type);U?F==="vector"&&S==="raster"?i.push(new Ae(p,s.source,'layer "'+s.id+'" requires a raster source')):F==="raster"&&S!=="raster"?i.push(new Ae(p,s.source,'layer "'+s.id+'" requires a vector source')):F!=="vector"||s["source-layer"]?F==="raster-dem"&&S!=="hillshade"?i.push(new Ae(p,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&U.lineMetrics||i.push(new Ae(p,s,'layer "'+s.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new Ae(p,s,'layer "'+s.id+'" must specify a "source-layer"')):i.push(new Ae(p,s.source,'source "'+s.source+'" not found'))}else i.push(new Ae(p,s,'missing required property "source"'));return i=i.concat(Ia({key:p,value:s,valueSpec:v.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ka({key:p+".type",value:s.type,valueSpec:v.layer.type,style:e.style,styleSpec:e.styleSpec,object:s,objectKey:"type"})},filter:Wm,layout:function(Y){return Ia({layer:s,key:Y.key,value:Y.value,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{"*":function($){return lu(wt({layerType:S},$))}}})},paint:function(Y){return Ia({layer:s,key:Y.key,value:Y.value,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{"*":function($){return p0(wt({layerType:S},$))}}})}}}))}function vl(e){var i=e.value,s=e.key,p=lr(i);return p!=="string"?[new Ae(s,i,"string expected, "+p+" found")]:[]}var _d={promoteId:function(e){var i=e.key,s=e.value;if(lr(s)==="string")return vl({key:i,value:s});var p=[];for(var m in s)p.push.apply(p,vl({key:i+"."+m,value:s[m]}));return p}};function h0(e){var i=e.value,s=e.key,p=e.styleSpec,m=e.style;if(!i.type)return[new Ae(s,i,'"type" is required')];var v,w=vt(i.type);switch(w){case"vector":case"raster":case"raster-dem":return Ia({key:s,value:i,valueSpec:p["source_"+w.replace("-","_")],style:e.style,styleSpec:p,objectElementValidators:_d});case"geojson":if(v=Ia({key:s,value:i,valueSpec:p.source_geojson,style:m,styleSpec:p,objectElementValidators:_d}),i.cluster)for(var S in i.clusterProperties){var M=i.clusterProperties[S],P=M[0],D=typeof P=="string"?[P,["accumulated"],["get",S]]:P;v.push.apply(v,au({key:s+"."+S+".map",value:M[1],expressionContext:"cluster-map"})),v.push.apply(v,au({key:s+"."+S+".reduce",value:D,expressionContext:"cluster-reduce"}))}return v;case"video":return Ia({key:s,value:i,valueSpec:p.source_video,style:m,styleSpec:p});case"image":return Ia({key:s,value:i,valueSpec:p.source_image,style:m,styleSpec:p});case"canvas":return[new Ae(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xp({key:s+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:p})}}function d0(e){var i=e.value,s=e.styleSpec,p=s.light,m=e.style,v=[],w=lr(i);if(i===void 0)return v;if(w!=="object")return v.concat([new Ae("light",i,"object expected, "+w+" found")]);for(var S in i){var M=S.match(/^(.*)-transition$/);v=v.concat(M&&p[M[1]]&&p[M[1]].transition?ka({key:S,value:i[S],valueSpec:s.transition,style:m,styleSpec:s}):p[S]?ka({key:S,value:i[S],valueSpec:p[S],style:m,styleSpec:s}):[new Ae(S,i[S],'unknown property "'+S+'"')])}return v}var f0={"*":function(){return[]},array:s0,boolean:function(e){var i=e.value,s=e.key,p=lr(i);return p!=="boolean"?[new Ae(s,i,"boolean expected, "+p+" found")]:[]},number:l0,color:function(e){var i=e.key,s=e.value,p=lr(s);return p!=="string"?[new Ae(i,s,"color expected, "+p+" found")]:Xy(s)===null?[new Ae(i,s,'color expected, "'+s+'" found')]:[]},constants:xt,enum:Xp,filter:Wm,function:u0,layer:St,object:Ia,source:h0,light:d0,string:vl,formatted:function(e){return vl(e).length===0?[]:au(e)},resolvedImage:function(e){return vl(e).length===0?[]:au(e)}};function ka(e){var i=e.value,s=e.valueSpec,p=e.styleSpec;return s.expression&&Gi(vt(i))?u0(e):s.expression&&Cc(Pt(i))?au(e):s.type&&f0[s.type]?f0[s.type](e):Ia(wt({},e,{valueSpec:s.type?p[s.type]:s}))}function lx(e){var i=e.value,s=e.key,p=vl(e);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new Ae(s,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new Ae(s,i,'"glyphs" url must include a "{range}" token'))),p}function uu(e,i){i===void 0&&(i=ce);var s=[];return s=s.concat(ka({key:"",value:e,valueSpec:i.$root,styleSpec:i,style:e,objectElementValidators:{glyphs:lx,"*":function(){return[]}}})),e.constants&&(s=s.concat(xt({key:"constants",value:e.constants,style:e,styleSpec:i}))),m0(s)}function m0(e){return[].concat(e).sort(function(i,s){return i.line-s.line})}function Ic(e){return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return m0(e.apply(this,i))}}uu.source=Ic(h0),uu.light=Ic(d0),uu.layer=Ic(St),uu.filter=Ic(Wm),uu.paintProperty=Ic(p0),uu.layoutProperty=Ic(lu);var th=uu,ux=th.light,cx=th.paintProperty,px=th.layoutProperty;function g0(e,i){var s=!1;if(i&&i.length)for(var p=0,m=i;p<m.length;p+=1)e.fire(new Ue(new Error(m[p].message))),s=!0;return s}var kc=Qa;function Qa(e,i,s){var p=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var m=new Int32Array(this.arrayBuffer);e=m[0],this.d=(i=m[1])+2*(s=m[2]);for(var v=0;v<this.d*this.d;v++){var w=m[3+v],S=m[3+v+1];p.push(w===S?null:m.subarray(w,S))}var M=m[3+p.length+1];this.keys=m.subarray(m[3+p.length],M),this.bboxes=m.subarray(M),this.insert=this._insertReadonly}else{this.d=i+2*s;for(var P=0;P<this.d*this.d;P++)p.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=e,this.padding=s,this.scale=i/e,this.uid=0;var D=s/i*e;this.min=-D,this.max=e+D}Qa.prototype.insert=function(e,i,s,p,m){this._forEachCell(i,s,p,m,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(i),this.bboxes.push(s),this.bboxes.push(p),this.bboxes.push(m)},Qa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Qa.prototype._insertCell=function(e,i,s,p,m,v){this.cells[m].push(v)},Qa.prototype.query=function(e,i,s,p,m){var v=this.min,w=this.max;if(e<=v&&i<=v&&w<=s&&w<=p&&!m)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(e,i,s,p,this._queryCell,S,{},m),S},Qa.prototype._queryCell=function(e,i,s,p,m,v,w,S){var M=this.cells[m];if(M!==null)for(var P=this.keys,D=this.bboxes,R=0;R<M.length;R++){var U=M[R];if(w[U]===void 0){var F=4*U;(S?S(D[0+F],D[1+F],D[2+F],D[3+F]):e<=D[2+F]&&i<=D[3+F]&&s>=D[0+F]&&p>=D[1+F])?(w[U]=!0,v.push(P[U])):w[U]=!1}}},Qa.prototype._forEachCell=function(e,i,s,p,m,v,w,S){for(var M=this._convertToCellCoord(e),P=this._convertToCellCoord(i),D=this._convertToCellCoord(s),R=this._convertToCellCoord(p),U=M;U<=D;U++)for(var F=P;F<=R;F++){var Y=this.d*F+U;if((!S||S(this._convertFromCellCoord(U),this._convertFromCellCoord(F),this._convertFromCellCoord(U+1),this._convertFromCellCoord(F+1)))&&m.call(this,e,i,s,p,Y,v,w,S))return}},Qa.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Qa.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Qa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,i=3+this.cells.length+1+1,s=0,p=0;p<this.cells.length;p++)s+=this.cells[p].length;var m=new Int32Array(i+s+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var v=i,w=0;w<e.length;w++){var S=e[w];m[3+w]=v,m.set(S,v),v+=S.length}return m[3+e.length]=v,m.set(this.keys,v),m[3+e.length+1]=v+=this.keys.length,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer};var y0=ne.ImageData,v0=ne.ImageBitmap,rh={};function yt(e,i,s){s===void 0&&(s={}),Object.defineProperty(i,"_classRegistryKey",{value:e,writeable:!1}),rh[e]={klass:i,omit:s.omit||[],shallow:s.shallow||[]}}for(var Ym in yt("Object",Object),kc.serialize=function(e,i){var s=e.toArrayBuffer();return i&&i.push(s),{buffer:s}},kc.deserialize=function(e){return new kc(e.buffer)},yt("Grid",kc),yt("Color",Sr),yt("Error",Error),yt("ResolvedImage",yo),yt("StylePropertyFunction",$p),yt("StyleExpression",bc,{omit:["_evaluator"]}),yt("ZoomDependentExpression",Sc),yt("ZoomConstantExpression",gl),yt("CompoundExpression",Un,{omit:["_evaluate"]}),fl)fl[Ym]._classRegistryKey||yt("Expression_"+Ym,fl[Ym]);function _0(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function x0(e){return v0&&e instanceof v0}function nh(e,i){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(_0(e)||x0(e))return i&&i.push(e),e;if(ArrayBuffer.isView(e)){var s=e;return i&&i.push(s.buffer),s}if(e instanceof y0)return i&&i.push(e.data.buffer),e;if(Array.isArray(e)){for(var p=[],m=0,v=e;m<v.length;m+=1)p.push(nh(v[m],i));return p}if(typeof e!="object")throw new Error("can't serialize object of type "+typeof e);var w=e.constructor,S=w._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var M=w.serialize?w.serialize(e,i):{};if(!w.serialize){for(var P in e)if(e.hasOwnProperty(P)&&!(0<=rh[S].omit.indexOf(P))){var D=e[P];M[P]=0<=rh[S].shallow.indexOf(P)?D:nh(D,i)}e instanceof Error&&(M.message=e.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(M.$name=S),M}function ih(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||_0(e)||x0(e)||ArrayBuffer.isView(e)||e instanceof y0)return e;if(Array.isArray(e))return e.map(ih);if(typeof e!="object")throw new Error("can't deserialize object of type "+typeof e);var i=e.$name||"Object",s=rh[i].klass;if(!s)throw new Error("can't deserialize unregistered class "+i);if(s.deserialize)return s.deserialize(e);for(var p=Object.create(s.prototype),m=0,v=Object.keys(e);m<v.length;m+=1){var w=v[m];if(w!=="$name"){var S=e[w];p[w]=0<=rh[i].shallow.indexOf(w)?S:ih(S)}}return p}function Km(){this.first=!0}Km.prototype.update=function(e,i){var s=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=i),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=s,!0))};var He={"Latin-1 Supplement":function(e){return 128<=e&&e<=255},Arabic:function(e){return 1536<=e&&e<=1791},"Arabic Supplement":function(e){return 1872<=e&&e<=1919},"Arabic Extended-A":function(e){return 2208<=e&&e<=2303},"Hangul Jamo":function(e){return 4352<=e&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return 5120<=e&&e<=5759},Khmer:function(e){return 6016<=e&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return 6320<=e&&e<=6399},"General Punctuation":function(e){return 8192<=e&&e<=8303},"Letterlike Symbols":function(e){return 8448<=e&&e<=8527},"Number Forms":function(e){return 8528<=e&&e<=8591},"Miscellaneous Technical":function(e){return 8960<=e&&e<=9215},"Control Pictures":function(e){return 9216<=e&&e<=9279},"Optical Character Recognition":function(e){return 9280<=e&&e<=9311},"Enclosed Alphanumerics":function(e){return 9312<=e&&e<=9471},"Geometric Shapes":function(e){return 9632<=e&&e<=9727},"Miscellaneous Symbols":function(e){return 9728<=e&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return 11008<=e&&e<=11263},"CJK Radicals Supplement":function(e){return 11904<=e&&e<=12031},"Kangxi Radicals":function(e){return 12032<=e&&e<=12255},"Ideographic Description Characters":function(e){return 12272<=e&&e<=12287},"CJK Symbols and Punctuation":function(e){return 12288<=e&&e<=12351},Hiragana:function(e){return 12352<=e&&e<=12447},Katakana:function(e){return 12448<=e&&e<=12543},Bopomofo:function(e){return 12544<=e&&e<=12591},"Hangul Compatibility Jamo":function(e){return 12592<=e&&e<=12687},Kanbun:function(e){return 12688<=e&&e<=12703},"Bopomofo Extended":function(e){return 12704<=e&&e<=12735},"CJK Strokes":function(e){return 12736<=e&&e<=12783},"Katakana Phonetic Extensions":function(e){return 12784<=e&&e<=12799},"Enclosed CJK Letters and Months":function(e){return 12800<=e&&e<=13055},"CJK Compatibility":function(e){return 13056<=e&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return 13312<=e&&e<=19903},"Yijing Hexagram Symbols":function(e){return 19904<=e&&e<=19967},"CJK Unified Ideographs":function(e){return 19968<=e&&e<=40959},"Yi Syllables":function(e){return 40960<=e&&e<=42127},"Yi Radicals":function(e){return 42128<=e&&e<=42191},"Hangul Jamo Extended-A":function(e){return 43360<=e&&e<=43391},"Hangul Syllables":function(e){return 44032<=e&&e<=55215},"Hangul Jamo Extended-B":function(e){return 55216<=e&&e<=55295},"Private Use Area":function(e){return 57344<=e&&e<=63743},"CJK Compatibility Ideographs":function(e){return 63744<=e&&e<=64255},"Arabic Presentation Forms-A":function(e){return 64336<=e&&e<=65023},"Vertical Forms":function(e){return 65040<=e&&e<=65055},"CJK Compatibility Forms":function(e){return 65072<=e&&e<=65103},"Small Form Variants":function(e){return 65104<=e&&e<=65135},"Arabic Presentation Forms-B":function(e){return 65136<=e&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return 65280<=e&&e<=65519}};function Mc(e){for(var i=0,s=e;i<s.length;i+=1)if($m(s[i].charCodeAt(0)))return!0;return!1}function $m(e){return e===746||e===747||!(e<4352)&&(He["Bopomofo Extended"](e)||He.Bopomofo(e)||He["CJK Compatibility Forms"](e)&&!(65097<=e&&e<=65103)||He["CJK Compatibility Ideographs"](e)||He["CJK Compatibility"](e)||He["CJK Radicals Supplement"](e)||He["CJK Strokes"](e)||!(!He["CJK Symbols and Punctuation"](e)||12296<=e&&e<=12305||12308<=e&&e<=12319||e===12336)||He["CJK Unified Ideographs Extension A"](e)||He["CJK Unified Ideographs"](e)||He["Enclosed CJK Letters and Months"](e)||He["Hangul Compatibility Jamo"](e)||He["Hangul Jamo Extended-A"](e)||He["Hangul Jamo Extended-B"](e)||He["Hangul Jamo"](e)||He["Hangul Syllables"](e)||He.Hiragana(e)||He["Ideographic Description Characters"](e)||He.Kanbun(e)||He["Kangxi Radicals"](e)||He["Katakana Phonetic Extensions"](e)||He.Katakana(e)&&e!==12540||!(!He["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||65306<=e&&e<=65310||e===65339||e===65341||e===65343||65371<=e&&e<=65503||e===65507||65512<=e&&e<=65519)||!(!He["Small Form Variants"](e)||65112<=e&&e<=65118||65123<=e&&e<=65126)||He["Unified Canadian Aboriginal Syllabics"](e)||He["Unified Canadian Aboriginal Syllabics Extended"](e)||He["Vertical Forms"](e)||He["Yijing Hexagram Symbols"](e)||He["Yi Syllables"](e)||He["Yi Radicals"](e))}function Xm(e){return!($m(e)||(i=e,He["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||He["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||He["Letterlike Symbols"](i)||He["Number Forms"](i)||He["Miscellaneous Technical"](i)&&(8960<=i&&i<=8967||8972<=i&&i<=8991||8996<=i&&i<=9e3||i===9003||9085<=i&&i<=9114||9150<=i&&i<=9165||i===9167||9169<=i&&i<=9179||9186<=i&&i<=9215)||He["Control Pictures"](i)&&i!==9251||He["Optical Character Recognition"](i)||He["Enclosed Alphanumerics"](i)||He["Geometric Shapes"](i)||He["Miscellaneous Symbols"](i)&&!(9754<=i&&i<=9759)||He["Miscellaneous Symbols and Arrows"](i)&&(11026<=i&&i<=11055||11088<=i&&i<=11097||11192<=i&&i<=11243)||He["CJK Symbols and Punctuation"](i)||He.Katakana(i)||He["Private Use Area"](i)||He["CJK Compatibility Forms"](i)||He["Small Form Variants"](i)||He["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||9984<=i&&i<=10087||10102<=i&&i<=10131||i===65532||i===65533));var i}function Jm(e){return 1424<=e&&e<=2303||He["Arabic Presentation Forms-A"](e)||He["Arabic Presentation Forms-B"](e)}function w0(e){for(var i=0,s=e;i<s.length;i+=1)if(Jm(s[i].charCodeAt(0)))return 1}function Qm(e){e&&typeof e=="string"&&-1<e.indexOf("NetworkError")&&(lo="error"),xd&&xd(e)}var xd=null,lo="unavailable",_l=null;function wd(){bd.fire(new ve("pluginStateChange",{pluginStatus:lo,pluginURL:_l}))}function oh(){return lo}function eg(){if(lo!=="deferred"||!_l)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");lo="loading",wd(),_l&&B({url:_l},function(e){e?Qm(e):(lo="loaded",wd())})}function Or(e,i){this.zoom=e,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Km,this.transition={})}var bd=new fe,No={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return lo==="loaded"||No.applyArabicShaping!=null},isLoading:function(){return lo==="loading"},setState:function(e){lo=e.pluginStatus,_l=e.pluginURL},isParsed:function(){return No.applyArabicShaping!=null&&No.processBidirectionalText!=null&&No.processStyledBidirectionalText!=null},getPluginURL:function(){return _l}};function cu(e,i){this.property=e,this.value=i,this.expression=function(s,p){if(Gi(s))return new $p(s,p);if(Cc(s)){var m=a0(s,p);if(m.result==="error")throw new Error(m.value.map(function(w){return w.key+": "+w.message}).join(", "));return m.value}var v=s;return typeof s=="string"&&p.type==="color"&&(v=Sr.parse(s)),{kind:"constant",evaluate:function(){return v}}}(i===void 0?e.specification.default:i,e.specification)}function Ac(e){this.property=e,this.value=new cu(e,void 0)}function sa(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}Or.prototype.isSupportedScript=function(e){return function(i,s){for(var p=0,m=i;p<m.length;p+=1)if(v=m[p].charCodeAt(0),!s&&Jm(v)||2304<=v&&v<=3583||3840<=v&&v<=4255||He.Khmer(v))return!1;var v;return!0}(e,No.isLoaded())},Or.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Or.prototype.getCrossfadeParameters=function(){var e=this.zoom,i=e-Math.floor(e),s=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*i}},cu.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},cu.prototype.possiblyEvaluate=function(e,i,s){return this.property.possiblyEvaluate(this,e,i,s)},Ac.prototype.transitioned=function(e,i){return new tg(this.property,this.value,i,nt({},e.transition,this.transition),e.now)},Ac.prototype.untransitioned=function(){return new tg(this.property,this.value,null,{},0)},sa.prototype.getValue=function(e){return Rn(this._values[e].value.value)},sa.prototype.setValue=function(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new Ac(this._values[e].property)),this._values[e].value=new cu(this._values[e].property,i===null?void 0:Rn(i))},sa.prototype.getTransition=function(e){return Rn(this._values[e].transition)},sa.prototype.setTransition=function(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new Ac(this._values[e].property)),this._values[e].transition=Rn(i)||void 0},sa.prototype.serialize=function(){for(var e={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var p=s[i],m=this.getValue(p);m!==void 0&&(e[p]=m);var v=this.getTransition(p);v!==void 0&&(e[p+"-transition"]=v)}return e},sa.prototype.transitioned=function(e,i){for(var s=new ah(this._properties),p=0,m=Object.keys(this._values);p<m.length;p+=1){var v=m[p];s._values[v]=this._values[v].transitioned(e,i._values[v])}return s},sa.prototype.untransitioned=function(){for(var e=new ah(this._properties),i=0,s=Object.keys(this._values);i<s.length;i+=1){var p=s[i];e._values[p]=this._values[p].untransitioned()}return e};var tg=function(e,i,s,p,m){this.property=e,this.value=i,this.begin=m+p.delay||0,this.end=this.begin+p.duration||0,e.specification.transition&&(p.delay||p.duration)&&(this.prior=s)};tg.prototype.possiblyEvaluate=function(e,i,s){var p=e.now||0,m=this.value.possiblyEvaluate(e,i,s),v=this.prior;if(v){if(p>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(p<this.begin)return v.possiblyEvaluate(e,i,s);var w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(e,i,s),m,function(){if(w<=0)return 0;if(1<=w)return 1;var S=w*w,M=S*w;return 4*(w<.5?M:3*(w-S)+M-.75)}())}return m};var ah=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};function sh(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}function Oo(e,i,s){this.property=e,this.value=i,this.parameters=s}ah.prototype.possiblyEvaluate=function(e,i,s){for(var p=new Lc(this._properties),m=0,v=Object.keys(this._values);m<v.length;m+=1){var w=v[m];p._values[w]=this._values[w].possiblyEvaluate(e,i,s)}return p},ah.prototype.hasTransition=function(){for(var e=0,i=Object.keys(this._values);e<i.length;e+=1)if(this._values[i[e]].prior)return!0;return!1},sh.prototype.getValue=function(e){return Rn(this._values[e].value)},sh.prototype.setValue=function(e,i){this._values[e]=new cu(this._values[e].property,i===null?void 0:Rn(i))},sh.prototype.serialize=function(){for(var e={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var p=s[i],m=this.getValue(p);m!==void 0&&(e[p]=m)}return e},sh.prototype.possiblyEvaluate=function(e,i,s){for(var p=new Lc(this._properties),m=0,v=Object.keys(this._values);m<v.length;m+=1){var w=v[m];p._values[w]=this._values[w].possiblyEvaluate(e,i,s)}return p},Oo.prototype.isConstant=function(){return this.value.kind==="constant"},Oo.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Oo.prototype.evaluate=function(e,i,s,p){return this.property.evaluate(this.value,this.parameters,e,i,s,p)};var Lc=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};function bt(e){this.specification=e}function Lt(e,i){this.specification=e,this.overrides=i}function xl(e){this.specification=e}Lc.prototype.get=function(e){return this._values[e]},bt.prototype.possiblyEvaluate=function(e,i){return e.expression.evaluate(i)},bt.prototype.interpolate=function(e,i,s){var p=hl[this.specification.type];return p?p(e,i,s):e},Lt.prototype.possiblyEvaluate=function(e,i,s,p){return new Oo(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(i,null,{},s,p)}:e.expression,i)},Lt.prototype.interpolate=function(e,i,s){if(e.value.kind!=="constant"||i.value.kind!=="constant")return e;if(e.value.value===void 0||i.value.value===void 0)return new Oo(this,{kind:"constant",value:void 0},e.parameters);var p=hl[this.specification.type];return p?new Oo(this,{kind:"constant",value:p(e.value.value,i.value.value,s)},e.parameters):e},Lt.prototype.evaluate=function(e,i,s,p,m,v){return e.kind==="constant"?e.value:e.evaluate(i,s,p,m,v)};var Cd,Sd=(pu.__proto__=Cd=Lt,((pu.prototype=Object.create(Cd&&Cd.prototype)).constructor=pu).prototype.possiblyEvaluate=function(e,i,s,p){if(e.value===void 0)return new Oo(this,{kind:"constant",value:void 0},i);if(e.expression.kind==="constant"){var m=e.expression.evaluate(i,null,{},s,p),v=e.property.specification.type==="resolvedImage"&&typeof m!="string"?m.name:m,w=this._calculate(v,v,v,i);return new Oo(this,{kind:"constant",value:w},i)}if(e.expression.kind!=="camera")return new Oo(this,e.expression,i);var S=this._calculate(e.expression.evaluate({zoom:i.zoom-1}),e.expression.evaluate({zoom:i.zoom}),e.expression.evaluate({zoom:i.zoom+1}),i);return new Oo(this,{kind:"constant",value:S},i)},pu.prototype.evaluate=function(e,i,s,p,m,v){if(e.kind!=="source")return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(i.zoom)-1},s,p),e.evaluate({zoom:Math.floor(i.zoom)},s,p),e.evaluate({zoom:Math.floor(i.zoom)+1},s,p),i):e.value;var w=e.evaluate(i,s,p,m,v);return this._calculate(w,w,w,i)},pu.prototype._calculate=function(e,i,s,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:s,to:i}},pu.prototype.interpolate=function(e){return e},pu);function pu(){Cd.apply(this,arguments)}function lh(e){this.specification=e}function _o(e){for(var i in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var s=e[i];s.specification.overridable&&this.overridableProperties.push(i);var p=this.defaultPropertyValues[i]=new cu(s,void 0),m=this.defaultTransitionablePropertyValues[i]=new Ac(s);this.defaultTransitioningPropertyValues[i]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=p.possiblyEvaluate({})}}function Td(e,i){this._structArray=e,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function Rr(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}xl.prototype.possiblyEvaluate=function(e,i,s,p){if(e.value!==void 0){if(e.expression.kind!=="constant")return this._calculate(e.expression.evaluate(new Or(Math.floor(i.zoom-1),i)),e.expression.evaluate(new Or(Math.floor(i.zoom),i)),e.expression.evaluate(new Or(Math.floor(i.zoom+1),i)),i);var m=e.expression.evaluate(i,null,{},s,p);return this._calculate(m,m,m,i)}},xl.prototype._calculate=function(e,i,s,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:s,to:i}},xl.prototype.interpolate=function(e){return e},lh.prototype.possiblyEvaluate=function(e,i,s,p){return!!e.expression.evaluate(i,null,{},s,p)},lh.prototype.interpolate=function(){return!1},yt("DataDrivenProperty",Lt),yt("DataConstantProperty",bt),yt("CrossFadedDataDrivenProperty",Sd),yt("CrossFadedProperty",xl),yt("ColorRampProperty",lh);var Ed,Ma=(wn.__proto__=Ed=fe,((wn.prototype=Object.create(Ed&&Ed.prototype)).constructor=wn).prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},wn.prototype.getLayoutProperty=function(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)},wn.prototype.setLayoutProperty=function(e,i,s){s===void 0&&(s={}),i!=null&&this._validate(px,"layers."+this.id+".layout."+e,e,i,s)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,i):this.visibility=i)},wn.prototype.getPaintProperty=function(e){return qa(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)},wn.prototype.setPaintProperty=function(e,i,s){if(s===void 0&&(s={}),i!=null&&this._validate(cx,"layers."+this.id+".paint."+e,e,i,s))return!1;if(qa(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-11),i||void 0),!1;var p=this._transitionablePaint._values[e],m=p.property.specification["property-type"]==="cross-faded-data-driven",v=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(e,i),this._handleSpecialPaintPropertyUpdate(e);var S=this._transitionablePaint._values[e].value;return S.isDataDriven()||v||m||this._handleOverridablePaintPropertyUpdate(e,w,S)},wn.prototype._handleSpecialPaintPropertyUpdate=function(e){},wn.prototype._handleOverridablePaintPropertyUpdate=function(e,i,s){return!1},wn.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"},wn.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},wn.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},wn.prototype.recalculate=function(e,i){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,i)},wn.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),il(e,function(i,s){return!(i===void 0||s==="layout"&&!Object.keys(i).length||s==="paint"&&!Object.keys(i).length)})},wn.prototype._validate=function(e,i,s,p,m){return m===void 0&&(m={}),(!m||m.validate!==!1)&&g0(this,e.call(th,{key:i,layerType:this.type,objectKey:s,value:p,styleSpec:ce,style:{glyphs:!0,sprite:!0}}))},wn.prototype.is3D=function(){return!1},wn.prototype.isTileClipped=function(){return!1},wn.prototype.hasOffscreenPass=function(){return!1},wn.prototype.resize=function(){},wn.prototype.isStateDependent=function(){for(var e in this.paint._values){var i=this.paint.get(e);if(i instanceof Oo&&wc(i.property.specification)&&(i.value.kind==="source"||i.value.kind==="composite")&&i.value.isStateDependent)return!0}return!1},wn),b0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};function wn(e,i){if(Ed.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},e.type!=="custom"&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),i.layout&&(this._unevaluatedLayout=new sh(i.layout)),i.paint)){for(var s in this._transitionablePaint=new sa(i.paint),e.paint)this.setPaintProperty(s,e.paint[s],{validate:!1});for(var p in e.layout)this.setLayoutProperty(p,e.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Lc(i.paint)}}function Ei(e,i){i===void 0&&(i=1);var s=0,p=0;return{members:e.map(function(m){var v=b0[m.type].BYTES_PER_ELEMENT,w=s=Yr(s,Math.max(i,v)),S=m.components||1;return p=Math.max(p,v),s+=v*S,{name:m.name,type:m.type,components:S,offset:w}}),size:Yr(s,Math.max(p,i)),alignment:i}}function Yr(e,i){return Math.ceil(e/i)*i}Rr.serialize=function(e,i){return e._trim(),i&&(e.isTransferred=!0,i.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Rr.deserialize=function(e){var i=Object.create(this.prototype);return i.arrayBuffer=e.arrayBuffer,i.length=e.length,i.capacity=e.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},Rr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Rr.prototype.clear=function(){this.length=0},Rr.prototype.resize=function(e){this.reserve(e),this.length=e},Rr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},Rr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var uh,hu=(Aa.__proto__=uh=Rr,((Aa.prototype=Object.create(uh&&uh.prototype)).constructor=Aa).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Aa.prototype.emplaceBack=function(e,i){var s=this.length;return this.resize(s+1),this.emplace(s,e,i)},Aa.prototype.emplace=function(e,i,s){var p=2*e;return this.int16[0+p]=i,this.int16[1+p]=s,e},Aa);function Aa(){uh.apply(this,arguments)}hu.prototype.bytesPerElement=4,yt("StructArrayLayout2i4",hu);var es,_r=(fr.__proto__=es=Rr,((fr.prototype=Object.create(es&&es.prototype)).constructor=fr).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},fr.prototype.emplaceBack=function(e,i,s,p){var m=this.length;return this.resize(m+1),this.emplace(m,e,i,s,p)},fr.prototype.emplace=function(e,i,s,p,m){var v=4*e;return this.int16[0+v]=i,this.int16[1+v]=s,this.int16[2+v]=p,this.int16[3+v]=m,e},fr);function fr(){es.apply(this,arguments)}_r.prototype.bytesPerElement=8,yt("StructArrayLayout4i8",_r);var ts,du=(Ls.__proto__=ts=Rr,((Ls.prototype=Object.create(ts&&ts.prototype)).constructor=Ls).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Ls.prototype.emplaceBack=function(e,i,s,p,m,v){var w=this.length;return this.resize(w+1),this.emplace(w,e,i,s,p,m,v)},Ls.prototype.emplace=function(e,i,s,p,m,v,w){var S=6*e;return this.int16[0+S]=i,this.int16[1+S]=s,this.int16[2+S]=p,this.int16[3+S]=m,this.int16[4+S]=v,this.int16[5+S]=w,e},Ls);function Ls(){ts.apply(this,arguments)}du.prototype.bytesPerElement=12,yt("StructArrayLayout2i4i12",du);var Id,rg=(Pc.__proto__=Id=Rr,((Pc.prototype=Object.create(Id&&Id.prototype)).constructor=Pc).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Pc.prototype.emplaceBack=function(e,i,s,p,m,v){var w=this.length;return this.resize(w+1),this.emplace(w,e,i,s,p,m,v)},Pc.prototype.emplace=function(e,i,s,p,m,v,w){var S=4*e,M=8*e;return this.int16[0+S]=i,this.int16[1+S]=s,this.uint8[4+M]=p,this.uint8[5+M]=m,this.uint8[6+M]=v,this.uint8[7+M]=w,e},Pc);function Pc(){Id.apply(this,arguments)}rg.prototype.bytesPerElement=8,yt("StructArrayLayout2i4ub8",rg);var kd,La=(Ps.__proto__=kd=Rr,((Ps.prototype=Object.create(kd&&kd.prototype)).constructor=Ps).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Ps.prototype.emplaceBack=function(e,i,s,p,m,v,w,S,M,P){var D=this.length;return this.resize(D+1),this.emplace(D,e,i,s,p,m,v,w,S,M,P)},Ps.prototype.emplace=function(e,i,s,p,m,v,w,S,M,P,D){var R=10*e;return this.uint16[0+R]=i,this.uint16[1+R]=s,this.uint16[2+R]=p,this.uint16[3+R]=m,this.uint16[4+R]=v,this.uint16[5+R]=w,this.uint16[6+R]=S,this.uint16[7+R]=M,this.uint16[8+R]=P,this.uint16[9+R]=D,e},Ps);function Ps(){kd.apply(this,arguments)}La.prototype.bytesPerElement=20,yt("StructArrayLayout10ui20",La);var Vn,xo=(Ds.__proto__=Vn=Rr,((Ds.prototype=Object.create(Vn&&Vn.prototype)).constructor=Ds).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Ds.prototype.emplaceBack=function(e,i,s,p,m,v,w,S,M,P,D,R){var U=this.length;return this.resize(U+1),this.emplace(U,e,i,s,p,m,v,w,S,M,P,D,R)},Ds.prototype.emplace=function(e,i,s,p,m,v,w,S,M,P,D,R,U){var F=12*e;return this.int16[0+F]=i,this.int16[1+F]=s,this.int16[2+F]=p,this.int16[3+F]=m,this.uint16[4+F]=v,this.uint16[5+F]=w,this.uint16[6+F]=S,this.uint16[7+F]=M,this.int16[8+F]=P,this.int16[9+F]=D,this.int16[10+F]=R,this.int16[11+F]=U,e},Ds);function Ds(){Vn.apply(this,arguments)}xo.prototype.bytesPerElement=24,yt("StructArrayLayout4i4ui4i24",xo);var Md,la=(Hi.__proto__=Md=Rr,((Hi.prototype=Object.create(Md&&Md.prototype)).constructor=Hi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Hi.prototype.emplaceBack=function(e,i,s){var p=this.length;return this.resize(p+1),this.emplace(p,e,i,s)},Hi.prototype.emplace=function(e,i,s,p){var m=3*e;return this.float32[0+m]=i,this.float32[1+m]=s,this.float32[2+m]=p,e},Hi);function Hi(){Md.apply(this,arguments)}la.prototype.bytesPerElement=12,yt("StructArrayLayout3f12",la);var Dc,fu=(ua.__proto__=Dc=Rr,((ua.prototype=Object.create(Dc&&Dc.prototype)).constructor=ua).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},ua.prototype.emplaceBack=function(e){var i=this.length;return this.resize(i+1),this.emplace(i,e)},ua.prototype.emplace=function(e,i){return this.uint32[+e+0]=i,e},ua);function ua(){Dc.apply(this,arguments)}fu.prototype.bytesPerElement=4,yt("StructArrayLayout1ul4",fu);var Ro,uo=(zc.__proto__=Ro=Rr,((zc.prototype=Object.create(Ro&&Ro.prototype)).constructor=zc).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},zc.prototype.emplaceBack=function(e,i,s,p,m,v,w,S,M){var P=this.length;return this.resize(P+1),this.emplace(P,e,i,s,p,m,v,w,S,M)},zc.prototype.emplace=function(e,i,s,p,m,v,w,S,M,P){var D=10*e,R=5*e;return this.int16[0+D]=i,this.int16[1+D]=s,this.int16[2+D]=p,this.int16[3+D]=m,this.int16[4+D]=v,this.int16[5+D]=w,this.uint32[3+R]=S,this.uint16[8+D]=M,this.uint16[9+D]=P,e},zc);function zc(){Ro.apply(this,arguments)}uo.prototype.bytesPerElement=20,yt("StructArrayLayout6i1ul2ui20",uo);var wo,mu=(zs.__proto__=wo=Rr,((zs.prototype=Object.create(wo&&wo.prototype)).constructor=zs).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},zs.prototype.emplaceBack=function(e,i,s,p,m,v){var w=this.length;return this.resize(w+1),this.emplace(w,e,i,s,p,m,v)},zs.prototype.emplace=function(e,i,s,p,m,v,w){var S=6*e;return this.int16[0+S]=i,this.int16[1+S]=s,this.int16[2+S]=p,this.int16[3+S]=m,this.int16[4+S]=v,this.int16[5+S]=w,e},zs);function zs(){wo.apply(this,arguments)}mu.prototype.bytesPerElement=12,yt("StructArrayLayout2i2i2i12",mu);var wl,ng=(gu.__proto__=wl=Rr,((gu.prototype=Object.create(wl&&wl.prototype)).constructor=gu).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},gu.prototype.emplaceBack=function(e,i,s,p,m){var v=this.length;return this.resize(v+1),this.emplace(v,e,i,s,p,m)},gu.prototype.emplace=function(e,i,s,p,m,v){var w=4*e,S=8*e;return this.float32[0+w]=i,this.float32[1+w]=s,this.float32[2+w]=p,this.int16[6+S]=m,this.int16[7+S]=v,e},gu);function gu(){wl.apply(this,arguments)}ng.prototype.bytesPerElement=16,yt("StructArrayLayout2f1f2i16",ng);var ch,bl=(Pa.__proto__=ch=Rr,((Pa.prototype=Object.create(ch&&ch.prototype)).constructor=Pa).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Pa.prototype.emplaceBack=function(e,i,s,p){var m=this.length;return this.resize(m+1),this.emplace(m,e,i,s,p)},Pa.prototype.emplace=function(e,i,s,p,m){var v=12*e,w=3*e;return this.uint8[0+v]=i,this.uint8[1+v]=s,this.float32[1+w]=p,this.float32[2+w]=m,e},Pa);function Pa(){ch.apply(this,arguments)}bl.prototype.bytesPerElement=12,yt("StructArrayLayout2ub2f12",bl);var Ns,qn=(Os.__proto__=Ns=Rr,((Os.prototype=Object.create(Ns&&Ns.prototype)).constructor=Os).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Os.prototype.emplaceBack=function(e,i,s){var p=this.length;return this.resize(p+1),this.emplace(p,e,i,s)},Os.prototype.emplace=function(e,i,s,p){var m=3*e;return this.uint16[0+m]=i,this.uint16[1+m]=s,this.uint16[2+m]=p,e},Os);function Os(){Ns.apply(this,arguments)}qn.prototype.bytesPerElement=6,yt("StructArrayLayout3ui6",qn);var ph,yu=(Nc.__proto__=ph=Rr,((Nc.prototype=Object.create(ph&&ph.prototype)).constructor=Nc).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Nc.prototype.emplaceBack=function(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie){var te=this.length;return this.resize(te+1),this.emplace(te,e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie)},Nc.prototype.emplace=function(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie,te){var xe=24*e,be=12*e,Te=48*e;return this.int16[0+xe]=i,this.int16[1+xe]=s,this.uint16[2+xe]=p,this.uint16[3+xe]=m,this.uint32[2+be]=v,this.uint32[3+be]=w,this.uint32[4+be]=S,this.uint16[10+xe]=M,this.uint16[11+xe]=P,this.uint16[12+xe]=D,this.float32[7+be]=R,this.float32[8+be]=U,this.uint8[36+Te]=F,this.uint8[37+Te]=Y,this.uint8[38+Te]=$,this.uint32[10+be]=ie,this.int16[22+xe]=te,e},Nc);function Nc(){ph.apply(this,arguments)}yu.prototype.bytesPerElement=48,yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",yu);var Rs,Ad=(rs.__proto__=Rs=Rr,((rs.prototype=Object.create(Rs&&Rs.prototype)).constructor=rs).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},rs.prototype.emplaceBack=function(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie,te,xe,be,Te,Me,Fe,Ye,it,ft,tt,gt){var at=this.length;return this.resize(at+1),this.emplace(at,e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie,te,xe,be,Te,Me,Fe,Ye,it,ft,tt,gt)},rs.prototype.emplace=function(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$,ie,te,xe,be,Te,Me,Fe,Ye,it,ft,tt,gt,at){var It=34*e,Nt=17*e;return this.int16[0+It]=i,this.int16[1+It]=s,this.int16[2+It]=p,this.int16[3+It]=m,this.int16[4+It]=v,this.int16[5+It]=w,this.int16[6+It]=S,this.int16[7+It]=M,this.uint16[8+It]=P,this.uint16[9+It]=D,this.uint16[10+It]=R,this.uint16[11+It]=U,this.uint16[12+It]=F,this.uint16[13+It]=Y,this.uint16[14+It]=$,this.uint16[15+It]=ie,this.uint16[16+It]=te,this.uint16[17+It]=xe,this.uint16[18+It]=be,this.uint16[19+It]=Te,this.uint16[20+It]=Me,this.uint16[21+It]=Fe,this.uint16[22+It]=Ye,this.uint32[12+Nt]=it,this.float32[13+Nt]=ft,this.float32[14+Nt]=tt,this.float32[15+Nt]=gt,this.float32[16+Nt]=at,e},rs);function rs(){Rs.apply(this,arguments)}Ad.prototype.bytesPerElement=68,yt("StructArrayLayout8i15ui1ul4f68",Ad);var Ld,ns=(Cl.__proto__=Ld=Rr,((Cl.prototype=Object.create(Ld&&Ld.prototype)).constructor=Cl).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Cl.prototype.emplaceBack=function(e){var i=this.length;return this.resize(i+1),this.emplace(i,e)},Cl.prototype.emplace=function(e,i){return this.float32[+e+0]=i,e},Cl);function Cl(){Ld.apply(this,arguments)}ns.prototype.bytesPerElement=4,yt("StructArrayLayout1f4",ns);var is,vu=(Oc.__proto__=is=Rr,((Oc.prototype=Object.create(is&&is.prototype)).constructor=Oc).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Oc.prototype.emplaceBack=function(e,i,s){var p=this.length;return this.resize(p+1),this.emplace(p,e,i,s)},Oc.prototype.emplace=function(e,i,s,p){var m=3*e;return this.int16[0+m]=i,this.int16[1+m]=s,this.int16[2+m]=p,e},Oc);function Oc(){is.apply(this,arguments)}vu.prototype.bytesPerElement=6,yt("StructArrayLayout3i6",vu);var Pd,Bs=(Rc.__proto__=Pd=Rr,((Rc.prototype=Object.create(Pd&&Pd.prototype)).constructor=Rc).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Rc.prototype.emplaceBack=function(e,i,s){var p=this.length;return this.resize(p+1),this.emplace(p,e,i,s)},Rc.prototype.emplace=function(e,i,s,p){var m=4*e;return this.uint32[2*e+0]=i,this.uint16[2+m]=s,this.uint16[3+m]=p,e},Rc);function Rc(){Pd.apply(this,arguments)}Bs.prototype.bytesPerElement=8,yt("StructArrayLayout1ul2ui8",Bs);var Ii,Fs=(ca.__proto__=Ii=Rr,((ca.prototype=Object.create(Ii&&Ii.prototype)).constructor=ca).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},ca.prototype.emplaceBack=function(e,i){var s=this.length;return this.resize(s+1),this.emplace(s,e,i)},ca.prototype.emplace=function(e,i,s){var p=2*e;return this.uint16[0+p]=i,this.uint16[1+p]=s,e},ca);function ca(){Ii.apply(this,arguments)}Fs.prototype.bytesPerElement=4,yt("StructArrayLayout2ui4",Fs);var Bo,_u=(os.__proto__=Bo=Rr,((os.prototype=Object.create(Bo&&Bo.prototype)).constructor=os).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},os.prototype.emplaceBack=function(e){var i=this.length;return this.resize(i+1),this.emplace(i,e)},os.prototype.emplace=function(e,i){return this.uint16[+e+0]=i,e},os);function os(){Bo.apply(this,arguments)}_u.prototype.bytesPerElement=2,yt("StructArrayLayout1ui2",_u);var as,xu=(ss.__proto__=as=Rr,((ss.prototype=Object.create(as&&as.prototype)).constructor=ss).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},ss.prototype.emplaceBack=function(e,i){var s=this.length;return this.resize(s+1),this.emplace(s,e,i)},ss.prototype.emplace=function(e,i,s){var p=2*e;return this.float32[0+p]=i,this.float32[1+p]=s,e},ss);function ss(){as.apply(this,arguments)}xu.prototype.bytesPerElement=8,yt("StructArrayLayout2f8",xu);var Dd,hh=(Sl.__proto__=Dd=Rr,((Sl.prototype=Object.create(Dd&&Dd.prototype)).constructor=Sl).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Sl.prototype.emplaceBack=function(e,i,s,p){var m=this.length;return this.resize(m+1),this.emplace(m,e,i,s,p)},Sl.prototype.emplace=function(e,i,s,p,m){var v=4*e;return this.float32[0+v]=i,this.float32[1+v]=s,this.float32[2+v]=p,this.float32[3+v]=m,e},Sl);function Sl(){Dd.apply(this,arguments)}hh.prototype.bytesPerElement=16,yt("StructArrayLayout4f16",hh);var Zn=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var s={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return s.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},s.x1.get=function(){return this._structArray.int16[this._pos2+2]},s.y1.get=function(){return this._structArray.int16[this._pos2+3]},s.x2.get=function(){return this._structArray.int16[this._pos2+4]},s.y2.get=function(){return this._structArray.int16[this._pos2+5]},s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.anchorPoint.get=function(){return new W(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,s),i}(Td);Zn.prototype.size=20;var Fo,wu=((Fo=uo)&&(zd.__proto__=Fo),((zd.prototype=Object.create(Fo&&Fo.prototype)).constructor=zd).prototype.get=function(e){return new Zn(this,e)},zd);function zd(){Fo.apply(this,arguments)}yt("CollisionBoxArray",wu);var Jt=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},s.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},s.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},s.segment.get=function(){return this._structArray.uint16[this._pos2+10]},s.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},s.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},s.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},s.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},s.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},s.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},s.placedOrientation.set=function(p){this._structArray.uint8[this._pos1+37]=p},s.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},s.hidden.set=function(p){this._structArray.uint8[this._pos1+38]=p},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},s.crossTileID.set=function(p){this._structArray.uint32[this._pos4+10]=p},s.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,s),i}(Td);Jt.prototype.size=48;var Da,Bc=((Da=yu)&&(Nd.__proto__=Da),((Nd.prototype=Object.create(Da&&Da.prototype)).constructor=Nd).prototype.get=function(e){return new Jt(this,e)},Nd);function Nd(){Da.apply(this,arguments)}yt("PlacedSymbolArray",Bc);var Od=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},s.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},s.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},s.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},s.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},s.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},s.key.get=function(){return this._structArray.uint16[this._pos2+8]},s.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},s.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},s.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},s.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},s.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},s.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},s.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},s.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},s.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},s.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},s.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},s.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},s.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},s.crossTileID.set=function(p){this._structArray.uint32[this._pos4+12]=p},s.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},s.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},s.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},s.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,s),i}(Td);Od.prototype.size=68;var dh,bu=((dh=Ad)&&(Rd.__proto__=dh),((Rd.prototype=Object.create(dh&&dh.prototype)).constructor=Rd).prototype.get=function(e){return new Od(this,e)},Rd);function Rd(){dh.apply(this,arguments)}yt("SymbolInstanceArray",bu);var fh,Bd=((fh=ns)&&(ls.__proto__=fh),((ls.prototype=Object.create(fh&&fh.prototype)).constructor=ls).prototype.getoffsetX=function(e){return this.float32[+e+0]},ls);function ls(){fh.apply(this,arguments)}yt("GlyphOffsetArray",Bd);var mh,jo=((mh=vu)&&(Cu.__proto__=mh),((Cu.prototype=Object.create(mh&&mh.prototype)).constructor=Cu).prototype.getx=function(e){return this.int16[3*e+0]},Cu.prototype.gety=function(e){return this.int16[3*e+1]},Cu.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},Cu);function Cu(){mh.apply(this,arguments)}yt("SymbolLineVertexArray",jo);var Fd=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var s={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,s),i}(Td);Fd.prototype.size=8;var Fc,Su=((Fc=Bs)&&(Tu.__proto__=Fc),((Tu.prototype=Object.create(Fc&&Fc.prototype)).constructor=Tu).prototype.get=function(e){return new Fd(this,e)},Tu);function Tu(){Fc.apply(this,arguments)}function bn(e){e===void 0&&(e=[]),this.segments=e}yt("FeatureIndexArray",Su);var gh=Ei([{name:"a_pos",components:2,type:"Int16"}],4).members;function jd(e,i){return 256*(e=pt(Math.floor(e),0,255))+pt(Math.floor(i),0,255)}bn.prototype.prepareSegment=function(e,i,s,p){var m=this.segments[this.segments.length-1];return bn.MAX_VERTEX_ARRAY_LENGTH<e&&nn("Max vertices per segment is "+bn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!m||m.vertexLength+e>bn.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==p)&&(m={vertexOffset:i.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},p!==void 0&&(m.sortKey=p),this.segments.push(m)),m},bn.prototype.get=function(){return this.segments},bn.prototype.destroy=function(){for(var e=0,i=this.segments;e<i.length;e+=1){var s=i[e];for(var p in s.vaos)s.vaos[p].destroy()}},bn.simpleSegment=function(e,i,s,p){return new bn([{vertexOffset:e,primitiveOffset:i,vertexLength:s,primitiveLength:p,vaos:{},sortKey:0}])},bn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yt("SegmentVector",bn);var Ud=Ei([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Vd=A(function(e){e.exports=function(i,s){var p,m,v,w,S,M,P,D;for(m=i.length-(p=3&i.length),v=s,S=3432918353,M=461845907,D=0;D<m;)P=255&i.charCodeAt(D)|(255&i.charCodeAt(++D))<<8|(255&i.charCodeAt(++D))<<16|(255&i.charCodeAt(++D))<<24,++D,v=27492+(65535&(w=5*(65535&(v=(v^=P=(65535&(P=(P=(65535&P)*S+(((P>>>16)*S&65535)<<16)&4294967295)<<15|P>>>17))*M+(((P>>>16)*M&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(P=0,p){case 3:P^=(255&i.charCodeAt(D+2))<<16;case 2:P^=(255&i.charCodeAt(D+1))<<8;case 1:v^=P=(65535&(P=(P=(65535&(P^=255&i.charCodeAt(D)))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<15|P>>>17))*M+(((P>>>16)*M&65535)<<16)&4294967295}return v^=i.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}}),qd=A(function(e){e.exports=function(i,s){for(var p,m=i.length,v=s^m,w=0;4<=m;)p=1540483477*(65535&(p=255&i.charCodeAt(w)|(255&i.charCodeAt(++w))<<8|(255&i.charCodeAt(++w))<<16|(255&i.charCodeAt(++w))<<24))+((1540483477*(p>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),m-=4,++w;switch(m){case 3:v^=(255&i.charCodeAt(w+2))<<16;case 2:v^=(255&i.charCodeAt(w+1))<<8;case 1:v=1540483477*(65535&(v^=255&i.charCodeAt(w)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}}),yh=Vd,hx=qd;function Pn(){this.ids=[],this.positions=[],this.indexed=!1}yh.murmur3=Vd,yh.murmur2=hx,Pn.prototype.add=function(e,i,s,p){this.ids.push(ig(e)),this.positions.push(i,s,p)},Pn.prototype.getPositions=function(e){for(var i=ig(e),s=0,p=this.ids.length-1;s<p;){var m=s+p>>1;this.ids[m]>=i?p=m:s=1+m}for(var v=[];this.ids[s]===i;)v.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return v},Pn.serialize=function(e,i){var s=new Float64Array(e.ids),p=new Uint32Array(e.positions);return function m(v,w,S,M){for(;S<M;){for(var P=v[S+M>>1],D=S-1,R=M+1;;){for(;v[++D]<P;);for(;v[--R]>P;);if(R<=D)break;Tl(v,D,R),Tl(w,3*D,3*R),Tl(w,3*D+1,3*R+1),Tl(w,3*D+2,3*R+2)}R-S<M-R?(m(v,w,S,R),S=R+1):(m(v,w,R+1,M),M=R)}}(s,p,0,s.length-1),i&&i.push(s.buffer,p.buffer),{ids:s,positions:p}},Pn.deserialize=function(e){var i=new Pn;return i.ids=e.ids,i.positions=e.positions,i.indexed=!0,i};var Kr=Math.pow(2,53)-1;function ig(e){var i=+e;return!isNaN(i)&&i<=Kr?i:yh(String(e))}function Tl(e,i,s){var p=e[i];e[i]=e[s],e[s]=p}function Wi(e,i){this.gl=e.gl,this.location=i}yt("FeaturePositionMap",Pn);var El,Zd,Gd,vh,$r,r,l,f=(ue.__proto__=l=Wi,((ue.prototype=Object.create(l&&l.prototype)).constructor=ue).prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},ue),g=(re.__proto__=r=Wi,((re.prototype=Object.create(r&&r.prototype)).constructor=re).prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},re),x=(ee.__proto__=$r=Wi,((ee.prototype=Object.create($r&&$r.prototype)).constructor=ee).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},ee),T=(Q.__proto__=vh=Wi,((Q.prototype=Object.create(vh&&vh.prototype)).constructor=Q).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},Q),E=(K.__proto__=Gd=Wi,((K.prototype=Object.create(Gd&&Gd.prototype)).constructor=K).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},K),L=(H.__proto__=Zd=Wi,((H.prototype=Object.create(Zd&&Zd.prototype)).constructor=H).prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},H),O=new Float32Array(16),j=(V.__proto__=El=Wi,((V.prototype=Object.create(El&&El.prototype)).constructor=V).prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var i=1;i<16;i++)if(e[i]!==this.current[i]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},V);function V(e,i){El.call(this,e,i),this.current=O}function H(e,i){Zd.call(this,e,i),this.current=Sr.transparent}function K(e,i){Gd.call(this,e,i),this.current=[0,0,0,0]}function Q(e,i){vh.call(this,e,i),this.current=[0,0,0]}function ee(e,i){$r.call(this,e,i),this.current=[0,0]}function re(e,i){r.call(this,e,i),this.current=0}function ue(e,i){l.call(this,e,i),this.current=0}function ae(e){return[jd(255*e.r,255*e.g),jd(255*e.b,255*e.a)]}function ye(e,i,s){this.value=e,this.uniformNames=i.map(function(p){return"u_"+p}),this.type=s}function he(e,i){this.uniformNames=i.map(function(s){return"u_"+s}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}function me(e,i,s,p){this.expression=e,this.type=s,this.maxValue=0,this.paintVertexAttributes=i.map(function(m){return{name:"a_"+m,type:"Float32",components:s==="color"?2:1,offset:0}}),this.paintVertexArray=new p}function Ce(e,i,s,p,m,v){this.expression=e,this.uniformNames=i.map(function(w){return"u_"+w+"_t"}),this.type=s,this.useIntegerZoom=p,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=i.map(function(w){return{name:"a_"+w,type:"Float32",components:s==="color"?4:2,offset:0}}),this.paintVertexArray=new v}function ke(e,i,s,p,m,v){this.expression=e,this.type=i,this.useIntegerZoom=s,this.zoom=p,this.layerId=v,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m}function De(e,i,s){this.binders={},this._buffers=[];var p,m,v=[];for(var w in e.paint._values)if(s(w)){var S=e.paint.get(w);if(S instanceof Oo&&wc(S.property.specification)){var M=(p=w,m=e.type,{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[p]||[p.replace(m+"-","").replace(/-/g,"_")]),P=S.value,D=S.property.specification.type,R=S.property.useIntegerZoom,U=S.property.specification["property-type"],F=U==="cross-faded"||U==="cross-faded-data-driven";if(P.kind==="constant")this.binders[w]=F?new he(P.value,M):new ye(P.value,M,D),v.push("/u_"+w);else if(P.kind==="source"||F){var Y=qe(w,D,"source");this.binders[w]=F?new ke(P,D,R,i,Y,e.id):new me(P,M,D,Y),v.push("/a_"+w)}else{var $=qe(w,D,"composite");this.binders[w]=new Ce(P,M,D,R,i,$),v.push("/z_"+w)}}}this.cacheKey=v.sort().join("")}function Ve(e,i,s){s===void 0&&(s=function(){return!0}),this.programConfigurations={};for(var p=0,m=e;p<m.length;p+=1){var v=m[p];this.programConfigurations[v.id]=new De(v,i,s)}this.needsUpload=!1,this._featureMap=new Pn,this._bufferOffset=0}function qe(e,i,s){var p={color:{source:xu,composite:hh},number:{source:ns,composite:xu}},m={"line-pattern":{source:La,composite:La},"fill-pattern":{source:La,composite:La},"fill-extrusion-pattern":{source:La,composite:La}}[e];return m&&m[s]||p[i][s]}ye.prototype.setUniform=function(e,i,s){e.set(s.constantOr(this.value))},ye.prototype.getBinding=function(e,i,s){return new(this.type==="color"?L:g)(e,i)},he.prototype.setConstantPatternPositions=function(e,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=e.tlbr},he.prototype.setUniform=function(e,i,s,p){var m=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;m&&e.set(m)},he.prototype.getBinding=function(e,i,s){return new(s.substr(0,9)==="u_pattern"?E:g)(e,i)},me.prototype.populatePaintArray=function(e,i,s,p,m){var v=this.paintVertexArray.length,w=this.expression.evaluate(new Or(0),i,{},p,[],m);this.paintVertexArray.resize(e),this._setPaintValue(v,e,w)},me.prototype.updatePaintArray=function(e,i,s,p){var m=this.expression.evaluate({zoom:0},s,p);this._setPaintValue(e,i,m)},me.prototype._setPaintValue=function(e,i,s){if(this.type==="color")for(var p=ae(s),m=e;m<i;m++)this.paintVertexArray.emplace(m,p[0],p[1]);else{for(var v=e;v<i;v++)this.paintVertexArray.emplace(v,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},me.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},me.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ce.prototype.populatePaintArray=function(e,i,s,p,m){var v=this.expression.evaluate(new Or(this.zoom),i,{},p,[],m),w=this.expression.evaluate(new Or(this.zoom+1),i,{},p,[],m),S=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(S,e,v,w)},Ce.prototype.updatePaintArray=function(e,i,s,p){var m=this.expression.evaluate({zoom:this.zoom},s,p),v=this.expression.evaluate({zoom:this.zoom+1},s,p);this._setPaintValue(e,i,m,v)},Ce.prototype._setPaintValue=function(e,i,s,p){if(this.type==="color")for(var m=ae(s),v=ae(p),w=e;w<i;w++)this.paintVertexArray.emplace(w,m[0],m[1],v[0],v[1]);else{for(var S=e;S<i;S++)this.paintVertexArray.emplace(S,s,p);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(p))}},Ce.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ce.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ce.prototype.setUniform=function(e,i){var s=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,p=pt(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);e.set(p)},Ce.prototype.getBinding=function(e,i,s){return new g(e,i)},ke.prototype.populatePaintArray=function(e,i,s){var p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(p,e,i.patterns&&i.patterns[this.layerId],s)},ke.prototype.updatePaintArray=function(e,i,s,p,m){this._setPaintValues(e,i,s.patterns&&s.patterns[this.layerId],m)},ke.prototype._setPaintValues=function(e,i,s,p){if(p&&s){var m=p[s.min],v=p[s.mid],w=p[s.max];if(m&&v&&w)for(var S=e;S<i;S++)this.zoomInPaintVertexArray.emplace(S,v.tl[0],v.tl[1],v.br[0],v.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1],v.pixelRatio,m.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,v.tl[0],v.tl[1],v.br[0],v.br[1],w.tl[0],w.tl[1],w.br[0],w.br[1],v.pixelRatio,w.pixelRatio)}},ke.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Ud.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Ud.members,this.expression.isStateDependent))},ke.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},De.prototype.getMaxValue=function(e){var i=this.binders[e];return i instanceof me||i instanceof Ce?i.maxValue:0},De.prototype.populatePaintArrays=function(e,i,s,p,m){for(var v in this.binders){var w=this.binders[v];(w instanceof me||w instanceof Ce||w instanceof ke)&&w.populatePaintArray(e,i,s,p,m)}},De.prototype.setConstantPatternPositions=function(e,i){for(var s in this.binders){var p=this.binders[s];p instanceof he&&p.setConstantPatternPositions(e,i)}},De.prototype.updatePaintArrays=function(e,i,s,p,m){var v=!1;for(var w in e)for(var S=0,M=i.getPositions(w);S<M.length;S+=1){var P=M[S],D=s.feature(P.index);for(var R in this.binders){var U=this.binders[R];if((U instanceof me||U instanceof Ce||U instanceof ke)&&U.expression.isStateDependent===!0){var F=p.paint.get(R);U.expression=F.value,U.updatePaintArray(P.start,P.end,D,e[w],m),v=!0}}}return v},De.prototype.defines=function(){var e=[];for(var i in this.binders){var s=this.binders[i];(s instanceof ye||s instanceof he)&&e.push.apply(e,s.uniformNames.map(function(p){return"#define HAS_UNIFORM_"+p}))}return e},De.prototype.getBinderAttributes=function(){var e=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof me||s instanceof Ce)for(var p=0;p<s.paintVertexAttributes.length;p++)e.push(s.paintVertexAttributes[p].name);else if(s instanceof ke)for(var m=0;m<Ud.members.length;m++)e.push(Ud.members[m].name)}return e},De.prototype.getBinderUniforms=function(){var e=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof ye||s instanceof he||s instanceof Ce)for(var p=0,m=s.uniformNames;p<m.length;p+=1)e.push(m[p])}return e},De.prototype.getPaintVertexBuffers=function(){return this._buffers},De.prototype.getUniforms=function(e,i){var s=[];for(var p in this.binders){var m=this.binders[p];if(m instanceof ye||m instanceof he||m instanceof Ce)for(var v=0,w=m.uniformNames;v<w.length;v+=1){var S=w[v];if(i[S]){var M=m.getBinding(e,i[S],S);s.push({name:S,property:p,binding:M})}}}return s},De.prototype.setUniforms=function(e,i,s,p){for(var m=0,v=i;m<v.length;m+=1){var w=v[m],S=w.name,M=w.property;this.binders[M].setUniform(w.binding,p,s.get(M),S)}},De.prototype.updatePaintBuffers=function(e){for(var i in this._buffers=[],this.binders){var s=this.binders[i];if(e&&s instanceof ke){var p=e.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(s instanceof me||s instanceof Ce)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},De.prototype.upload=function(e){for(var i in this.binders){var s=this.binders[i];(s instanceof me||s instanceof Ce||s instanceof ke)&&s.upload(e)}this.updatePaintBuffers()},De.prototype.destroy=function(){for(var e in this.binders){var i=this.binders[e];(i instanceof me||i instanceof Ce||i instanceof ke)&&i.destroy()}},Ve.prototype.populatePaintArrays=function(e,i,s,p,m,v){for(var w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(e,i,p,m,v);i.id!==void 0&&this._featureMap.add(i.id,s,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Ve.prototype.updatePaintArrays=function(e,i,s,p){for(var m=0,v=s;m<v.length;m+=1){var w=v[m];this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(e,this._featureMap,i,w,p)||this.needsUpload}},Ve.prototype.get=function(e){return this.programConfigurations[e]},Ve.prototype.upload=function(e){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(e);this.needsUpload=!1}},Ve.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},yt("ConstantBinder",ye),yt("CrossFadedConstantBinder",he),yt("SourceExpressionBinder",me),yt("CrossFadedCompositeBinder",ke),yt("CompositeExpressionBinder",Ce),yt("ProgramConfiguration",De,{omit:["_buffers"]}),yt("ProgramConfigurationSet",Ve);var Ke=Math.pow(2,14)-1,lt=-Ke-1;function ht(e){for(var i=8192/e.extent,s=e.loadGeometry(),p=0;p<s.length;p++)for(var m=s[p],v=0;v<m.length;v++){var w=m[v],S=Math.round(w.x*i),M=Math.round(w.y*i);w.x=pt(S,lt,Ke),w.y=pt(M,lt,Ke),(S<w.x||S>w.x+1||M<w.y||M>w.y+1)&&nn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}function dt(e,i,s,p,m){e.emplaceBack(2*i+(p+1)/2,2*s+(m+1)/2)}function Tt(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new hu,this.indexArray=new qn,this.segments=new bn,this.programConfigurations=new Ve(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})}function mt(e,i){for(var s=0;s<e.length;s++)if(Ot(i,e[s]))return!0;for(var p=0;p<i.length;p++)if(Ot(e,i[p]))return!0;return!!Rt(e,i)}function Mt(e,i){if(e.length===1)return er(i,e[0]);for(var s=0;s<i.length;s++)for(var p=i[s],m=0;m<p.length;m++)if(Ot(e,p[m]))return!0;for(var v=0;v<e.length;v++)if(er(i,e[v]))return!0;for(var w=0;w<i.length;w++)if(Rt(e,i[w]))return!0;return!1}function Ut(e,i,s){if(1<e.length){if(Rt(e,i))return 1;for(var p=0;p<i.length;p++)if(_t(i[p],e,s))return 1}for(var m=0;m<e.length;m++)if(_t(e[m],i,s))return 1}function Rt(e,i){var s,p,m,v;if(e.length!==0&&i.length!==0){for(var w=0;w<e.length-1;w++)for(var S=e[w],M=e[w+1],P=0;P<i.length-1;P++)if(s=S,p=M,m=i[P],v=i[P+1],fo(s,m,v)!==fo(p,m,v)&&fo(s,p,m)!==fo(s,p,v))return 1}}function _t(e,i,s){var p=s*s;if(i.length===1)return e.distSqr(i[0])<p;for(var m=1;m<i.length;m++)if(zt(e,i[m-1],i[m])<p)return 1}function zt(e,i,s){var p=i.distSqr(s);if(p===0)return e.distSqr(i);var m=((e.x-i.x)*(s.x-i.x)+(e.y-i.y)*(s.y-i.y))/p;return e.distSqr(m<0?i:1<m?s:s.sub(i)._mult(m)._add(i))}function er(e,i){for(var s,p,m,v=!1,w=0;w<e.length;w++)for(var S=0,M=(s=e[w]).length-1;S<s.length;M=S++)(p=s[S]).y>i.y!=(m=s[M]).y>i.y&&i.x<(m.x-p.x)*(i.y-p.y)/(m.y-p.y)+p.x&&(v=!v);return v}function Ot(e,i){for(var s=!1,p=0,m=e.length-1;p<e.length;m=p++){var v=e[p],w=e[m];v.y>i.y!=w.y>i.y&&i.x<(w.x-v.x)*(i.y-v.y)/(w.y-v.y)+v.x&&(s=!s)}return s}function Br(e,i,s){var p=s[0],m=s[2];if(!(e.x<p.x&&i.x<p.x||e.x>m.x&&i.x>m.x||e.y<p.y&&i.y<p.y||e.y>m.y&&i.y>m.y)){var v=fo(e,i,s[0]);return v!==fo(e,i,s[1])||v!==fo(e,i,s[2])||v!==fo(e,i,s[3])}}function ur(e,i,s){var p=i.paint.get(e).value;return p.kind==="constant"?p.value:s.programConfigurations.get(i.id).getMaxValue(e)}function Fn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ni(e,i,s,p,m){if(!i[0]&&!i[1])return e;var v=W.convert(i)._mult(m);s==="viewport"&&v._rotate(-p);for(var w=[],S=0;S<e.length;S++)w.push(e[S].sub(v));return w}Tt.prototype.populate=function(e,i,s){var p=this.layers[0],m=[],v=null;p.type==="circle"&&(v=p.layout.get("circle-sort-key"));for(var w=0,S=e;w<S.length;w+=1){var M=S[w],P=M.feature,D=M.id,R=M.index,U=M.sourceLayerIndex,F=this.layers[0]._featureFilter.needGeometry,Y={type:P.type,id:D,properties:P.properties,geometry:F?ht(P):[]};if(this.layers[0]._featureFilter.filter(new Or(this.zoom),Y,s)){F||(Y.geometry=ht(P));var $=v?v.evaluate(Y,{},s):void 0;m.push({id:D,properties:P.properties,type:P.type,sourceLayerIndex:U,index:R,geometry:Y.geometry,patterns:{},sortKey:$})}}v&&m.sort(function(Ye,it){return Ye.sortKey-it.sortKey});for(var ie=0,te=m;ie<te.length;ie+=1){var xe=te[ie],be=xe.geometry,Te=xe.index,Me=xe.sourceLayerIndex,Fe=e[Te].feature;this.addFeature(xe,be,Te,s),i.featureIndex.insert(Fe,be,Te,Me,this.index)}},Tt.prototype.update=function(e,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,s)},Tt.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Tt.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Tt.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Tt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Tt.prototype.addFeature=function(e,i,s,p){for(var m=0,v=i;m<v.length;m+=1)for(var w=0,S=v[m];w<S.length;w+=1){var M=S[w],P=M.x,D=M.y;if(!(P<0||8192<=P||D<0||8192<=D)){var R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),U=R.vertexLength;dt(this.layoutVertexArray,P,D,-1,-1),dt(this.layoutVertexArray,P,D,1,-1),dt(this.layoutVertexArray,P,D,1,1),dt(this.layoutVertexArray,P,D,-1,1),this.indexArray.emplaceBack(U,U+1,U+2),this.indexArray.emplaceBack(U,U+3,U+2),R.vertexLength+=4,R.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,{},p)},yt("CircleBucket",Tt,{omit:["layers"]});var Li=new _o({"circle-sort-key":new Lt(ce.layout_circle["circle-sort-key"])}),ki={paint:new _o({"circle-radius":new Lt(ce.paint_circle["circle-radius"]),"circle-color":new Lt(ce.paint_circle["circle-color"]),"circle-blur":new Lt(ce.paint_circle["circle-blur"]),"circle-opacity":new Lt(ce.paint_circle["circle-opacity"]),"circle-translate":new bt(ce.paint_circle["circle-translate"]),"circle-translate-anchor":new bt(ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bt(ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bt(ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Lt(ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Lt(ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Lt(ce.paint_circle["circle-stroke-opacity"])}),layout:Li},Tr=typeof Float32Array<"u"?Float32Array:Array;function Xi(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Pi(e,i,s){var p=i[0],m=i[1],v=i[2],w=i[3],S=i[4],M=i[5],P=i[6],D=i[7],R=i[8],U=i[9],F=i[10],Y=i[11],$=i[12],ie=i[13],te=i[14],xe=i[15],be=s[0],Te=s[1],Me=s[2],Fe=s[3];return e[0]=be*p+Te*S+Me*R+Fe*$,e[1]=be*m+Te*M+Me*U+Fe*ie,e[2]=be*v+Te*P+Me*F+Fe*te,e[3]=be*w+Te*D+Me*Y+Fe*xe,e[4]=(be=s[4])*p+(Te=s[5])*S+(Me=s[6])*R+(Fe=s[7])*$,e[5]=be*m+Te*M+Me*U+Fe*ie,e[6]=be*v+Te*P+Me*F+Fe*te,e[7]=be*w+Te*D+Me*Y+Fe*xe,e[8]=(be=s[8])*p+(Te=s[9])*S+(Me=s[10])*R+(Fe=s[11])*$,e[9]=be*m+Te*M+Me*U+Fe*ie,e[10]=be*v+Te*P+Me*F+Fe*te,e[11]=be*w+Te*D+Me*Y+Fe*xe,e[12]=(be=s[12])*p+(Te=s[13])*S+(Me=s[14])*R+(Fe=s[15])*$,e[13]=be*m+Te*M+Me*U+Fe*ie,e[14]=be*v+Te*P+Me*F+Fe*te,e[15]=be*w+Te*D+Me*Y+Fe*xe,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,i=0,s=arguments.length;s--;)i+=e[s]*e[s];return Math.sqrt(i)});var Pr,En,In=Pi;function Di(e,i,s){var p=i[0],m=i[1],v=i[2],w=i[3];return e[0]=s[0]*p+s[4]*m+s[8]*v+s[12]*w,e[1]=s[1]*p+s[5]*m+s[9]*v+s[13]*w,e[2]=s[2]*p+s[6]*m+s[10]*v+s[14]*w,e[3]=s[3]*p+s[7]*m+s[11]*v+s[15]*w,e}Pr=new Tr(3),Tr!=Float32Array&&(Pr[0]=0,Pr[1]=0,Pr[2]=0),En=new Tr(4),Tr!=Float32Array&&(En[0]=0,En[1]=0,En[2]=0,En[3]=0);var Ui,Eu,_h=(Eu=new Tr(2),Tr!=Float32Array&&(Eu[0]=0,Eu[1]=0),js.__proto__=Ui=Ma,((js.prototype=Object.create(Ui&&Ui.prototype)).constructor=js).prototype.createBucket=function(e){return new Tt(e)},js.prototype.queryRadius=function(e){var i=e;return ur("circle-radius",this,i)+ur("circle-stroke-width",this,i)+Fn(this.paint.get("circle-translate"))},js.prototype.queryIntersectsFeature=function(e,i,s,p,m,v,w,S){for(var M=ni(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,w),P=this.paint.get("circle-radius").evaluate(i,s)+this.paint.get("circle-stroke-width").evaluate(i,s),D=this.paint.get("circle-pitch-alignment")==="map",R=D?M:function(it){return M.map(function(ft){return xh(ft,it)})}(S),U=D?P*w:P,F=0,Y=p;F<Y.length;F+=1)for(var $=0,ie=Y[F];$<ie.length;$+=1){var te=ie[$],xe=D?te:xh(te,S),be=U,Te=Di([],[te.x,te.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=Te[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=v.cameraToCenterDistance/Te[3]),Ye=be,Ot(Me=R,Fe=xe)||_t(Fe,Me,Ye))return!0}var Me,Fe,Ye;return!1},js);function js(e){Ui.call(this,e,ki)}function xh(e,i){var s=Di([],[e.x,e.y,0,1],i);return new W(s[0]/s[3],s[1]/s[3])}var Il,jc=(Iu.__proto__=Il=Tt,(Iu.prototype=Object.create(Il&&Il.prototype)).constructor=Iu);function Iu(){Il.apply(this,arguments)}function ku(e,i,s,p){var m=i.width,v=i.height;if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==m*v*s)throw new RangeError("mismatched image size")}else p=new Uint8Array(m*v*s);return e.width=m,e.height=v,e.data=p,e}function us(e,i,s){var p=i.width,m=i.height;if(p!==e.width||m!==e.height){var v=ku({},{width:p,height:m},s);cs(e,v,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,p),height:Math.min(e.height,m)},s),e.width=p,e.height=m,e.data=v.data}}function cs(e,i,s,p,m,v){if(m.width===0||m.height===0)return i;if(m.width>e.width||m.height>e.height||s.x>e.width-m.width||s.y>e.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||p.x>i.width-m.width||p.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");for(var w=e.data,S=i.data,M=0;M<m.height;M++)for(var P=((s.y+M)*e.width+s.x)*v,D=((p.y+M)*i.width+p.x)*v,R=0;R<m.width*v;R++)S[D+R]=w[P+R];return i}yt("HeatmapBucket",jc,{omit:["layers"]});var Er=function(e,i){ku(this,e,1,i)};function Fr(e,i){ku(this,e,4,i)}Er.prototype.resize=function(e){us(this,e,1)},Er.prototype.clone=function(){return new Er({width:this.width,height:this.height},new Uint8Array(this.data))},Er.copy=function(e,i,s,p,m){cs(e,i,s,p,m,1)},Fr.prototype.resize=function(e){us(this,e,4)},Fr.prototype.replace=function(e,i){i?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Fr.prototype.clone=function(){return new Fr({width:this.width,height:this.height},new Uint8Array(this.data))},Fr.copy=function(e,i,s,p,m){cs(e,i,s,p,m,4)},yt("AlphaImage",Er),yt("RGBAImage",Fr);var Ri={paint:new _o({"heatmap-radius":new Lt(ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Lt(ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bt(ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lh(ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bt(ce.paint_heatmap["heatmap-opacity"])})};function kl(e,i){for(var s=new Uint8Array(1024),p={},m=0,v=0;m<256;m++,v+=4){p[i]=m/255;var w=e.evaluate(p);s[v+0]=Math.floor(255*w.r/w.a),s[v+1]=Math.floor(255*w.g/w.a),s[v+2]=Math.floor(255*w.b/w.a),s[v+3]=Math.floor(255*w.a)}return new Fr({width:256,height:1},s)}var Ml,Mu,wh=(Al.__proto__=Mu=Ma,((Al.prototype=Object.create(Mu&&Mu.prototype)).constructor=Al).prototype.createBucket=function(e){return new jc(e)},Al.prototype._handleSpecialPaintPropertyUpdate=function(e){e==="heatmap-color"&&this._updateColorRamp()},Al.prototype._updateColorRamp=function(){this.colorRamp=kl(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},Al.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},Al.prototype.queryRadius=function(){return 0},Al.prototype.queryIntersectsFeature=function(){return!1},Al.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},Al),hi={paint:new _o({"hillshade-illumination-direction":new bt(ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bt(ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new bt(ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bt(ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bt(ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bt(ce.paint_hillshade["hillshade-accent-color"])})},bh=(C0.__proto__=Ml=Ma,((C0.prototype=Object.create(Ml&&Ml.prototype)).constructor=C0).prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C0),Uc=Ei([{name:"a_pos",components:2,type:"Int16"}],4).members,Au=S0,FL=S0;function C0(e){Ml.call(this,e,hi)}function Al(e){Mu.call(this,e,Ri),this._updateColorRamp()}function S0(e,i,s){s=s||2;var p,m,v,w,S,M,P,D=i&&i.length,R=D?i[0]*s:e.length,U=CS(e,0,R,s,!0),F=[];if(!U||U.next===U.prev)return F;if(D&&(U=function($,ie,te,xe){var be,Te,Me,Fe=[];for(be=0,Te=ie.length;be<Te;be++)(Me=CS($,ie[be]*xe,be<Te-1?ie[be+1]*xe:$.length,xe,!1))===Me.next&&(Me.steiner=!0),Fe.push(HL(Me));for(Fe.sort(ZL),be=0;be<Fe.length;be++)GL(Fe[be],te),te=Vc(te,te.next);return te}(e,i,U,s)),e.length>80*s){p=v=e[0],m=w=e[1];for(var Y=s;Y<R;Y+=s)(S=e[Y])<p&&(p=S),(M=e[Y+1])<m&&(m=M),v<S&&(v=S),w<M&&(w=M);P=(P=Math.max(v-p,w-m))!==0?1/P:0}return og(U,F,s,p,m,P),F}function CS(e,i,s,p,m){var v,w;if(m===0<mx(e,i,s,p))for(v=i;v<s;v+=p)w=ES(v,e[v],e[v+1],w);else for(v=s-p;i<=v;v-=p)w=ES(v,e[v],e[v+1],w);return w&&T0(w,w.next)&&(sg(w),w=w.next),w}function Vc(e,i){if(!e)return e;i=i||e;var s,p=e;do if(s=!1,p.steiner||!T0(p,p.next)&&Gn(p.prev,p,p.next)!==0)p=p.next;else{if(sg(p),(p=i=p.prev)===p.next)break;s=!0}while(s||p!==i);return i}function og(e,i,s,p,m,v,w){if(e){!w&&v&&function(D,R,U,F){for(var Y=D;Y.z===null&&(Y.z=dx(Y.x,Y.y,R,U,F)),Y.prevZ=Y.prev,Y.nextZ=Y.next,(Y=Y.next)!==D;);Y.prevZ.nextZ=null,Y.prevZ=null,function($){var ie,te,xe,be,Te,Me,Fe,Ye,it=1;do{for(te=$,Te=$=null,Me=0;te;){for(Me++,xe=te,ie=Fe=0;ie<it&&(Fe++,xe=xe.nextZ);ie++);for(Ye=it;0<Fe||0<Ye&&xe;)Fe!==0&&(Ye===0||!xe||te.z<=xe.z)?(te=(be=te).nextZ,Fe--):(xe=(be=xe).nextZ,Ye--),Te?Te.nextZ=be:$=be,be.prevZ=Te,Te=be;te=xe}Te.nextZ=null,it*=2}while(1<Me)}(Y)}(e,p,m,v);for(var S,M,P=e;e.prev!==e.next;)if(S=e.prev,M=e.next,v?UL(e,p,m,v):jL(e))i.push(S.i/s),i.push(e.i/s),i.push(M.i/s),sg(e),e=M.next,P=M.next;else if((e=M)===P){w?w===1?og(e=VL(Vc(e),i,s),i,s,p,m,v,2):w===2&&qL(e,i,s,p,m,v):og(Vc(e),i,s,p,m,v,1);break}}}function jL(e){var i=e.prev,s=e,p=e.next;if(!(0<=Gn(i,s,p))){for(var m=e.next.next;m!==e.prev;){if(Hd(i.x,i.y,s.x,s.y,p.x,p.y,m.x,m.y)&&0<=Gn(m.prev,m,m.next))return;m=m.next}return 1}}function UL(e,i,s,p){var m=e.prev,v=e,w=e.next;if(!(0<=Gn(m,v,w))){for(var S=m.x>v.x?m.x>w.x?m.x:w.x:v.x>w.x?v.x:w.x,M=m.y>v.y?m.y>w.y?m.y:w.y:v.y>w.y?v.y:w.y,P=dx(m.x<v.x?m.x<w.x?m.x:w.x:v.x<w.x?v.x:w.x,m.y<v.y?m.y<w.y?m.y:w.y:v.y<w.y?v.y:w.y,i,s,p),D=dx(S,M,i,s,p),R=e.prevZ,U=e.nextZ;R&&R.z>=P&&U&&U.z<=D;){if(R!==e.prev&&R!==e.next&&Hd(m.x,m.y,v.x,v.y,w.x,w.y,R.x,R.y)&&0<=Gn(R.prev,R,R.next)||(R=R.prevZ,U!==e.prev&&U!==e.next&&Hd(m.x,m.y,v.x,v.y,w.x,w.y,U.x,U.y)&&0<=Gn(U.prev,U,U.next)))return;U=U.nextZ}for(;R&&R.z>=P;){if(R!==e.prev&&R!==e.next&&Hd(m.x,m.y,v.x,v.y,w.x,w.y,R.x,R.y)&&0<=Gn(R.prev,R,R.next))return;R=R.prevZ}for(;U&&U.z<=D;){if(U!==e.prev&&U!==e.next&&Hd(m.x,m.y,v.x,v.y,w.x,w.y,U.x,U.y)&&0<=Gn(U.prev,U,U.next))return;U=U.nextZ}return 1}}function VL(e,i,s){var p=e;do{var m=p.prev,v=p.next.next;!T0(m,v)&&SS(m,p,p.next,v)&&ag(m,v)&&ag(v,m)&&(i.push(m.i/s),i.push(p.i/s),i.push(v.i/s),sg(p),sg(p.next),p=e=v),p=p.next}while(p!==e);return Vc(p)}function qL(e,i,s,p,m,v){var w,S,M=e;do{for(var P=M.next.next;P!==M.prev;){if(M.i!==P.i&&(S=P,(w=M).next.i!==S.i&&w.prev.i!==S.i&&!function(R,U){var F=R;do{if(F.i!==R.i&&F.next.i!==R.i&&F.i!==U.i&&F.next.i!==U.i&&SS(F,F.next,R,U))return 1;F=F.next}while(F!==R)}(w,S)&&(ag(w,S)&&ag(S,w)&&function(R,U){for(var F=R,Y=!1,$=(R.x+U.x)/2,ie=(R.y+U.y)/2;F.y>ie!=F.next.y>ie&&F.next.y!==F.y&&$<(F.next.x-F.x)*(ie-F.y)/(F.next.y-F.y)+F.x&&(Y=!Y),(F=F.next)!==R;);return Y}(w,S)&&(Gn(w.prev,w,S.prev)||Gn(w,S.prev,S))||T0(w,S)&&0<Gn(w.prev,w,w.next)&&0<Gn(S.prev,S,S.next)))){var D=TS(M,P);return M=Vc(M,M.next),D=Vc(D,D.next),og(M,i,s,p,m,v),void og(D,i,s,p,m,v)}P=P.next}M=M.next}while(M!==e)}function ZL(e,i){return e.x-i.x}function GL(e,i){if(i=function(p,m){var v,w=m,S=p.x,M=p.y,P=-1/0;do{if(M<=w.y&&M>=w.next.y&&w.next.y!==w.y){var D=w.x+(M-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(D<=S&&P<D){if((P=D)===S){if(M===w.y)return w;if(M===w.next.y)return w.next}v=w.x<w.next.x?w:w.next}}w=w.next}while(w!==m);if(!v)return null;if(S===P)return v;var R,U,F,Y=v,$=v.x,ie=v.y,te=1/0;for(w=v;S>=w.x&&w.x>=$&&S!==w.x&&Hd(M<ie?S:P,M,$,ie,M<ie?P:S,M,w.x,w.y)&&(R=Math.abs(M-w.y)/(S-w.x),ag(w,p)&&(R<te||R===te&&(w.x>v.x||w.x===v.x&&(F=w,Gn((U=v).prev,U,F.prev)<0&&Gn(F.next,U,U.next)<0)))&&(v=w,te=R)),(w=w.next)!==Y;);return v}(e,i)){var s=TS(i,e);Vc(i,i.next),Vc(s,s.next)}}function dx(e,i,s,p,m){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)*m)|e<<8))|e<<4))|e<<2))|e<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-p)*m)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function HL(e){for(var i=e,s=e;(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),(i=i.next)!==e;);return s}function Hd(e,i,s,p,m,v,w,S){return 0<=(m-w)*(i-S)-(e-w)*(v-S)&&0<=(e-w)*(p-S)-(s-w)*(i-S)&&0<=(s-w)*(v-S)-(m-w)*(p-S)}function Gn(e,i,s){return(i.y-e.y)*(s.x-i.x)-(i.x-e.x)*(s.y-i.y)}function T0(e,i){return e.x===i.x&&e.y===i.y}function SS(e,i,s,p){var m=I0(Gn(e,i,s)),v=I0(Gn(e,i,p)),w=I0(Gn(s,p,e)),S=I0(Gn(s,p,i));return m!==v&&w!==S||m===0&&E0(e,s,i)||v===0&&E0(e,p,i)||w===0&&E0(s,e,p)||S===0&&E0(s,i,p)}function E0(e,i,s){return i.x<=Math.max(e.x,s.x)&&i.x>=Math.min(e.x,s.x)&&i.y<=Math.max(e.y,s.y)&&i.y>=Math.min(e.y,s.y)}function I0(e){return 0<e?1:e<0?-1:0}function ag(e,i){return Gn(e.prev,e,e.next)<0?0<=Gn(e,i,e.next)&&0<=Gn(e,e.prev,i):Gn(e,i,e.prev)<0||Gn(e,e.next,i)<0}function TS(e,i){var s=new fx(e.i,e.x,e.y),p=new fx(i.i,i.x,i.y),m=e.next,v=i.prev;return(e.next=i).prev=e,(s.next=m).prev=s,(p.next=s).prev=p,(v.next=p).prev=v,p}function ES(e,i,s,p){var m=new fx(e,i,s);return p?(m.next=p.next,(m.prev=p).next.prev=m,p.next=m):(m.prev=m).next=m,m}function sg(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function fx(e,i,s){this.i=e,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function mx(e,i,s,p){for(var m=0,v=i,w=s-p;v<s;v+=p)m+=(e[w]-e[v])*(e[v+1]+e[w+1]),w=v;return m}function lg(e,i,s){var p=e[i];e[i]=e[s],e[s]=p}function WL(e,i){return e<i?-1:i<e?1:0}function gx(e,i){var s,p,m,v,w,S=e.length;if(S<=1)return[e];for(var M,P,D=[],R=0;R<S;R++){var U=zm(e[R]);U!==0&&(e[R].area=Math.abs(U),P===void 0&&(P=U<0),P===U<0?(M&&D.push(M),M=[e[R]]):M.push(e[R]))}if(M&&D.push(M),1<i)for(var F=0;F<D.length;F++)D[F].length<=i||(s=D[F],p=i,m=1,v=D[F].length-1,w=YL,function Y($,ie,te,xe,be){for(;te<xe;){if(600<xe-te){var Te=xe-te+1,Me=ie-te+1,Fe=Math.log(Te),Ye=.5*Math.exp(2*Fe/3),it=.5*Math.sqrt(Fe*Ye*(Te-Ye)/Te)*(Me-Te/2<0?-1:1);Y($,ie,Math.max(te,Math.floor(ie-Me*Ye/Te+it)),Math.min(xe,Math.floor(ie+(Te-Me)*Ye/Te+it)),be)}var ft=$[ie],tt=te,gt=xe;for(lg($,te,ie),0<be($[xe],ft)&&lg($,te,xe);tt<gt;){for(lg($,tt,gt),tt++,gt--;be($[tt],ft)<0;)tt++;for(;0<be($[gt],ft);)gt--}be($[te],ft)===0?lg($,te,gt):lg($,++gt,xe),gt<=ie&&(te=gt+1),ie<=gt&&(xe=gt-1)}}(s,p,m||0,v||s.length-1,w||WL),D[F]=D[F].slice(0,i));return D}function YL(e,i){return i.area-e.area}function yx(e,i,s){for(var p=s.patternDependencies,m=!1,v=0,w=i;v<w.length;v+=1){var S=w[v].paint.get(e+"-pattern");S.isConstant()||(m=!0);var M=S.constantOr(null);M&&(m=!0,p[M.to]=!0,p[M.from]=!0)}return m}function vx(e,i,s,p,m){for(var v=m.patternDependencies,w=0,S=i;w<S.length;w+=1){var M=S[w],P=M.paint.get(e+"-pattern").value;if(P.kind!=="constant"){var D=P.evaluate({zoom:p-1},s,{},m.availableImages),R=P.evaluate({zoom:p},s,{},m.availableImages),U=P.evaluate({zoom:p+1},s,{},m.availableImages);R=R&&R.name?R.name:R,U=U&&U.name?U.name:U,v[D=D&&D.name?D.name:D]=!0,v[R]=!0,v[U]=!0,s.patterns[M.id]={min:D,mid:R,max:U}}}return s}function Us(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hu,this.indexArray=new qn,this.indexArray2=new Fs,this.programConfigurations=new Ve(e.layers,e.zoom),this.segments=new bn,this.segments2=new bn,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})}S0.deviation=function(e,i,s,p){var m=i&&i.length,v=Math.abs(mx(e,0,m?i[0]*s:e.length,s));if(m)for(var w=0,S=i.length;w<S;w++)v-=Math.abs(mx(e,i[w]*s,w<S-1?i[w+1]*s:e.length,s));var M=0;for(w=0;w<p.length;w+=3){var P=p[w]*s,D=p[w+1]*s,R=p[w+2]*s;M+=Math.abs((e[P]-e[R])*(e[1+D]-e[1+P])-(e[P]-e[D])*(e[1+R]-e[1+P]))}return v===0&&M===0?0:Math.abs((M-v)/v)},S0.flatten=function(e){for(var i=e[0][0].length,s={vertices:[],holes:[],dimensions:i},p=0,m=0;m<e.length;m++){for(var v=0;v<e[m].length;v++)for(var w=0;w<i;w++)s.vertices.push(e[m][v][w]);0<m&&s.holes.push(p+=e[m-1].length)}return s},Au.default=FL,Us.prototype.populate=function(e,i,s){this.hasPattern=yx("fill",this.layers,i);for(var p=this.layers[0].layout.get("fill-sort-key"),m=[],v=0,w=e;v<w.length;v+=1){var S=w[v],M=S.feature,P=S.id,D=S.index,R=S.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,F={type:M.type,id:P,properties:M.properties,geometry:U?ht(M):[]};if(this.layers[0]._featureFilter.filter(new Or(this.zoom),F,s)){U||(F.geometry=ht(M));var Y=p?p.evaluate(F,{},s,i.availableImages):void 0;m.push({id:P,properties:M.properties,type:M.type,sourceLayerIndex:R,index:D,geometry:F.geometry,patterns:{},sortKey:Y})}}p&&m.sort(function(Fe,Ye){return Fe.sortKey-Ye.sortKey});for(var $=0,ie=m;$<ie.length;$+=1){var te=ie[$],xe=te.geometry,be=te.index,Te=te.sourceLayerIndex;if(this.hasPattern){var Me=vx("fill",this.layers,te,this.zoom,i);this.patternFeatures.push(Me)}else this.addFeature(te,xe,be,s,{});i.featureIndex.insert(e[be].feature,xe,be,Te,this.index)}},Us.prototype.update=function(e,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,s)},Us.prototype.addFeatures=function(e,i,s){for(var p=0,m=this.patternFeatures;p<m.length;p+=1){var v=m[p];this.addFeature(v,v.geometry,v.index,i,s)}},Us.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Us.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Us.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Uc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Us.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Us.prototype.addFeature=function(e,i,s,p,m){for(var v=0,w=gx(i,500);v<w.length;v+=1){for(var S=w[v],M=0,P=0,D=S;P<D.length;P+=1)M+=D[P].length;for(var R=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray),U=R.vertexLength,F=[],Y=[],$=0,ie=S;$<ie.length;$+=1){var te=ie[$];if(te.length!==0){te!==S[0]&&Y.push(F.length/2);var xe=this.segments2.prepareSegment(te.length,this.layoutVertexArray,this.indexArray2),be=xe.vertexLength;this.layoutVertexArray.emplaceBack(te[0].x,te[0].y),this.indexArray2.emplaceBack(be+te.length-1,be),F.push(te[0].x),F.push(te[0].y);for(var Te=1;Te<te.length;Te++)this.layoutVertexArray.emplaceBack(te[Te].x,te[Te].y),this.indexArray2.emplaceBack(be+Te-1,be+Te),F.push(te[Te].x),F.push(te[Te].y);xe.vertexLength+=te.length,xe.primitiveLength+=te.length}}for(var Me=Au(F,Y),Fe=0;Fe<Me.length;Fe+=3)this.indexArray.emplaceBack(U+Me[Fe],U+Me[Fe+1],U+Me[Fe+2]);R.vertexLength+=M,R.primitiveLength+=Me.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,p)},yt("FillBucket",Us,{omit:["layers","patternFeatures"]});var ug,KL=new _o({"fill-sort-key":new Lt(ce.layout_fill["fill-sort-key"])}),$L={paint:new _o({"fill-antialias":new bt(ce.paint_fill["fill-antialias"]),"fill-opacity":new Lt(ce.paint_fill["fill-opacity"]),"fill-color":new Lt(ce.paint_fill["fill-color"]),"fill-outline-color":new Lt(ce.paint_fill["fill-outline-color"]),"fill-translate":new bt(ce.paint_fill["fill-translate"]),"fill-translate-anchor":new bt(ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new Sd(ce.paint_fill["fill-pattern"])}),layout:KL},XL=(qc.__proto__=ug=Ma,((qc.prototype=Object.create(ug&&ug.prototype)).constructor=qc).prototype.recalculate=function(e,i){ug.prototype.recalculate.call(this,e,i);var s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},qc.prototype.createBucket=function(e){return new Us(e)},qc.prototype.queryRadius=function(){return Fn(this.paint.get("fill-translate"))},qc.prototype.queryIntersectsFeature=function(e,i,s,p,m,v,w){return Mt(ni(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,w),p)},qc.prototype.isTileClipped=function(){return!0},qc),JL=Ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,IS=Wd;function qc(e){ug.call(this,e,$L)}function Wd(e,i,s,p,m){this.properties={},this.extent=s,this.type=0,this._pbf=e,this._geometry=-1,this._keys=p,this._values=m,e.readFields(QL,this,i)}function QL(e,i,s){e==1?i.id=s.readVarint():e==2?function(p,m){for(var v=p.readVarint()+p.pos;p.pos<v;){var w=m._keys[p.readVarint()],S=m._values[p.readVarint()];m.properties[w]=S}}(s,i):e==3?i.type=s.readVarint():e==4&&(i._geometry=s.pos)}function eP(e){for(var i,s,p=0,m=0,v=e.length,w=v-1;m<v;w=m++)p+=((s=e[w]).x-(i=e[m]).x)*(i.y+s.y);return p}Wd.types=["Unknown","Point","LineString","Polygon"],Wd.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var i,s=e.readVarint()+e.pos,p=1,m=0,v=0,w=0,S=[];e.pos<s;){if(m<=0){var M=e.readVarint();p=7&M,m=M>>3}if(m--,p===1||p===2)v+=e.readSVarint(),w+=e.readSVarint(),p===1&&(i&&S.push(i),i=[]),i.push(new W(v,w));else{if(p!==7)throw new Error("unknown command "+p);i&&i.push(i[0].clone())}}return i&&S.push(i),S},Wd.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var i=e.readVarint()+e.pos,s=1,p=0,m=0,v=0,w=1/0,S=-1/0,M=1/0,P=-1/0;e.pos<i;){if(p<=0){var D=e.readVarint();s=7&D,p=D>>3}if(p--,s===1||s===2)(m+=e.readSVarint())<w&&(w=m),S<m&&(S=m),(v+=e.readSVarint())<M&&(M=v),P<v&&(P=v);else if(s!==7)throw new Error("unknown command "+s)}return[w,M,S,P]},Wd.prototype.toGeoJSON=function(e,i,s){var p,m,v=this.extent*Math.pow(2,s),w=this.extent*e,S=this.extent*i,M=this.loadGeometry(),P=Wd.types[this.type];function D(F){for(var Y=0;Y<F.length;Y++){var $=F[Y];F[Y]=[360*($.x+w)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*($.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(p=0;p<M.length;p++)R[p]=M[p][0];D(M=R);break;case 2:for(p=0;p<M.length;p++)D(M[p]);break;case 3:for(M=function(F){var Y=F.length;if(Y<=1)return[F];for(var $,ie,te=[],xe=0;xe<Y;xe++){var be=eP(F[xe]);be!==0&&(ie===void 0&&(ie=be<0),ie===be<0?($&&te.push($),$=[F[xe]]):$.push(F[xe]))}return $&&te.push($),te}(M),p=0;p<M.length;p++)for(m=0;m<M[p].length;m++)D(M[p][m])}M.length===1?M=M[0]:P="Multi"+P;var U={type:"Feature",geometry:{type:P,coordinates:M},properties:this.properties};return"id"in this&&(U.id=this.id),U};var kS=MS;function MS(e,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(tP,this,i),this.length=this._features.length}function tP(e,i,s){e===15?i.version=s.readVarint():e===1?i.name=s.readString():e===5?i.extent=s.readVarint():e===2?i._features.push(s.pos):e===3?i._keys.push(s.readString()):e===4&&i._values.push(function(p){for(var m=null,v=p.readVarint()+p.pos;p.pos<v;){var w=p.readVarint()>>3;m=w==1?p.readString():w==2?p.readFloat():w==3?p.readDouble():w==4?p.readVarint64():w==5?p.readVarint():w==6?p.readSVarint():w==7?p.readBoolean():null}return m}(s))}function rP(e,i,s){if(e===3){var p=new kS(s,s.readVarint()+s.pos);p.length&&(i[p.name]=p)}}MS.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var i=this._pbf.readVarint()+this._pbf.pos;return new IS(this._pbf,i,this.extent,this._keys,this._values)};var Yd={VectorTile:function(e,i){this.layers=e.readFields(rP,{},i)},VectorTileFeature:IS,VectorTileLayer:kS},nP=Yd.VectorTileFeature.types,_x=Math.pow(2,13);function cg(e,i,s,p,m,v,w,S){e.emplaceBack(i,s,2*Math.floor(p*_x)+w,m*_x*2,v*_x*2,Math.round(S))}function Vs(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new du,this.indexArray=new qn,this.programConfigurations=new Ve(e.layers,e.zoom),this.segments=new bn,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})}Vs.prototype.populate=function(e,i,s){this.features=[],this.hasPattern=yx("fill-extrusion",this.layers,i);for(var p=0,m=e;p<m.length;p+=1){var v=m[p],w=v.feature,S=v.id,M=v.index,P=v.sourceLayerIndex,D=this.layers[0]._featureFilter.needGeometry,R={type:w.type,id:S,properties:w.properties,geometry:D?ht(w):[]};if(this.layers[0]._featureFilter.filter(new Or(this.zoom),R,s)){var U={id:S,sourceLayerIndex:P,index:M,geometry:D?R.geometry:ht(w),properties:w.properties,type:w.type,patterns:{}};w.id!==void 0&&(U.id=w.id),this.hasPattern?this.features.push(vx("fill-extrusion",this.layers,U,this.zoom,i)):this.addFeature(U,U.geometry,M,s,{}),i.featureIndex.insert(w,U.geometry,M,P,this.index,!0)}}},Vs.prototype.addFeatures=function(e,i,s){for(var p=0,m=this.features;p<m.length;p+=1){var v=m[p];this.addFeature(v,v.geometry,v.index,i,s)}},Vs.prototype.update=function(e,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,s)},Vs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Vs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Vs.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,JL),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Vs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Vs.prototype.addFeature=function(e,i,s,p,m){for(var v=0,w=gx(i,500);v<w.length;v+=1){for(var S=w[v],M=0,P=0,D=S;P<D.length;P+=1)M+=D[P].length;for(var R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),U=0,F=S;U<F.length;U+=1){var Y=F[U];if(Y.length!==0&&!((At=Y).every(function(Gt){return Gt.x<0})||At.every(function(Gt){return 8192<Gt.x})||At.every(function(Gt){return Gt.y<0})||At.every(function(Gt){return 8192<Gt.y})))for(var $=0,ie=0;ie<Y.length;ie++){var te=Y[ie];if(1<=ie){var xe=Y[ie-1];if(Qt=xe,!((ir=te).x===Qt.x&&(ir.x<0||8192<ir.x)||ir.y===Qt.y&&(ir.y<0||8192<ir.y))){R.vertexLength+4>bn.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var be=te.sub(xe)._perp()._unit(),Te=xe.dist(te);32768<$+Te&&($=0),cg(this.layoutVertexArray,te.x,te.y,be.x,be.y,0,0,$),cg(this.layoutVertexArray,te.x,te.y,be.x,be.y,0,1,$),cg(this.layoutVertexArray,xe.x,xe.y,be.x,be.y,0,0,$+=Te),cg(this.layoutVertexArray,xe.x,xe.y,be.x,be.y,0,1,$);var Me=R.vertexLength;this.indexArray.emplaceBack(Me,Me+2,Me+1),this.indexArray.emplaceBack(Me+1,Me+2,Me+3),R.vertexLength+=4,R.primitiveLength+=2}}}}if(R.vertexLength+M>bn.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),nP[e.type]==="Polygon"){for(var Fe=[],Ye=[],it=R.vertexLength,ft=0,tt=S;ft<tt.length;ft+=1){var gt=tt[ft];if(gt.length!==0){gt!==S[0]&&Ye.push(Fe.length/2);for(var at=0;at<gt.length;at++){var It=gt[at];cg(this.layoutVertexArray,It.x,It.y,0,0,1,1,0),Fe.push(It.x),Fe.push(It.y)}}}for(var Nt=Au(Fe,Ye),Zt=0;Zt<Nt.length;Zt+=3)this.indexArray.emplaceBack(it+Nt[Zt],it+Nt[Zt+2],it+Nt[Zt+1]);R.primitiveLength+=Nt.length/3,R.vertexLength+=M}}var ir,Qt,At;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,p)},yt("FillExtrusionBucket",Vs,{omit:["layers","features"]});var k0,iP={paint:new _o({"fill-extrusion-opacity":new bt(ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Lt(ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bt(ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bt(ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Sd(ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Lt(ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Lt(ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new bt(ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},oP=(Ch.__proto__=k0=Ma,((Ch.prototype=Object.create(k0&&k0.prototype)).constructor=Ch).prototype.createBucket=function(e){return new Vs(e)},Ch.prototype.queryRadius=function(){return Fn(this.paint.get("fill-extrusion-translate"))},Ch.prototype.is3D=function(){return!0},Ch.prototype.queryIntersectsFeature=function(e,i,s,p,m,v,w,S){var M=ni(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,w),P=this.paint.get("fill-extrusion-height").evaluate(i,s),D=this.paint.get("fill-extrusion-base").evaluate(i,s),R=function(F){for(var Y=[],$=0,ie=M;$<ie.length;$+=1){var te=ie[$],xe=[te.x,te.y,0,1];Di(xe,xe,F),Y.push(new W(xe[0]/xe[3],xe[1]/xe[3]))}return Y}(S),U=function(F,Y){for(var $=[],ie=[],te=Y[8]*D,xe=Y[9]*D,be=Y[10]*D,Te=Y[11]*D,Me=Y[8]*P,Fe=Y[9]*P,Ye=Y[10]*P,it=Y[11]*P,ft=0,tt=F;ft<tt.length;ft+=1){for(var gt=[],at=[],It=0,Nt=tt[ft];It<Nt.length;It+=1){var Zt=Nt[It],ir=Zt.x,Qt=Zt.y,At=Y[0]*ir+Y[4]*Qt+Y[12],Gt=Y[1]*ir+Y[5]*Qt+Y[13],kr=Y[2]*ir+Y[6]*Qt+Y[14],cn=Y[3]*ir+Y[7]*Qt+Y[15],fi=kr+be,jn=cn+Te,an=At+Me,Cn=Gt+Fe,Ur=kr+Ye,Mi=cn+it,ii=new W((At+te)/jn,(Gt+xe)/jn);ii.z=fi/jn,gt.push(ii);var mi=new W(an/Mi,Cn/Mi);mi.z=Ur/Mi,at.push(mi)}$.push(gt),ie.push(at)}return[$,ie]}(p,S);return function(F,Y,$){var ie=1/0;Mt($,Y)&&(ie=AS($,Y[0]));for(var te=0;te<Y.length;te++)for(var xe=Y[te],be=F[te],Te=0;Te<xe.length-1;Te++){var Me=xe[Te],Fe=[Me,xe[Te+1],be[Te+1],be[Te],Me];mt($,Fe)&&(ie=Math.min(ie,AS($,Fe)))}return ie!==1/0&&ie}(U[0],U[1],R)},Ch);function Ch(e){k0.call(this,e,iP)}function pg(e,i){return e.x*i.x+e.y*i.y}function AS(e,i){if(e.length===1){for(var s,p=0,m=i[p++];!s||m.equals(s);)if(!(s=i[p++]))return 1/0;for(;p<i.length;p++){var v=i[p],w=e[0],S=s.sub(m),M=v.sub(m),P=w.sub(m),D=pg(S,S),R=pg(S,M),U=pg(M,M),F=pg(P,S),Y=pg(P,M),$=D*U-R*R,ie=(U*F-R*Y)/$,te=(D*Y-R*F)/$,xe=m.z*(1-ie-te)+s.z*ie+v.z*te;if(isFinite(xe))return xe}return 1/0}for(var be=1/0,Te=0,Me=i;Te<Me.length;Te+=1)be=Math.min(be,Me[Te].z);return be}function bo(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new rg,this.indexArray=new qn,this.programConfigurations=new Ve(e.layers,e.zoom),this.segments=new bn,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})}var aP=Ei([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,sP=Yd.VectorTileFeature.types,lP=Math.cos(Math.PI/180*37.5),LS=Math.pow(2,14)/.5;bo.prototype.populate=function(e,i,s){this.hasPattern=yx("line",this.layers,i);for(var p=this.layers[0].layout.get("line-sort-key"),m=[],v=0,w=e;v<w.length;v+=1){var S=w[v],M=S.feature,P=S.id,D=S.index,R=S.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,F={type:M.type,id:P,properties:M.properties,geometry:U?ht(M):[]};if(this.layers[0]._featureFilter.filter(new Or(this.zoom),F,s)){U||(F.geometry=ht(M));var Y=p?p.evaluate(F,{},s):void 0;m.push({id:P,properties:M.properties,type:M.type,sourceLayerIndex:R,index:D,geometry:F.geometry,patterns:{},sortKey:Y})}}p&&m.sort(function(Fe,Ye){return Fe.sortKey-Ye.sortKey});for(var $=0,ie=m;$<ie.length;$+=1){var te=ie[$],xe=te.geometry,be=te.index,Te=te.sourceLayerIndex;if(this.hasPattern){var Me=vx("line",this.layers,te,this.zoom,i);this.patternFeatures.push(Me)}else this.addFeature(te,xe,be,s,{});i.featureIndex.insert(e[be].feature,xe,be,Te,this.index)}},bo.prototype.update=function(e,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,s)},bo.prototype.addFeatures=function(e,i,s){for(var p=0,m=this.patternFeatures;p<m.length;p+=1){var v=m[p];this.addFeature(v,v.geometry,v.index,i,s)}},bo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,aP),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},bo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bo.prototype.addFeature=function(e,i,s,p,m){for(var v=this.layers[0].layout,w=v.get("line-join").evaluate(e,{}),S=v.get("line-cap"),M=v.get("line-miter-limit"),P=v.get("line-round-limit"),D=0,R=i;D<R.length;D+=1)this.addLine(R[D],e,w,S,M,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,p)},bo.prototype.addLine=function(e,i,s,p,m,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+i.properties.mapbox_clip_start,this.clipEnd=+i.properties.mapbox_clip_end;for(var w=0;w<e.length-1;w++)this.totalDistance+=e[w].dist(e[w+1]);this.updateScaledDistance()}for(var S=sP[i.type]==="Polygon",M=e.length;2<=M&&e[M-1].equals(e[M-2]);)M--;for(var P=0;P<M-1&&e[P].equals(e[P+1]);)P++;if(!(M<(S?3:2))){s==="bevel"&&(m=1.05);var D,R=this.overscaling<=16?122880/(512*this.overscaling):0,U=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray),F=void 0,Y=void 0,$=void 0,ie=void 0;this.e1=this.e2=-1,S&&(ie=e[P].sub(D=e[M-2])._unit()._perp());for(var te=P;te<M;te++)if(!(Y=te===M-1?S?e[P+1]:void 0:e[te+1])||!e[te].equals(Y)){ie&&($=ie),D&&(F=D),D=e[te],ie=Y?Y.sub(D)._unit()._perp():$;var xe=($=$||ie).add(ie);xe.x===0&&xe.y===0||xe._unit();var be=$.x*ie.x+$.y*ie.y,Te=xe.x*ie.x+xe.y*ie.y,Me=Te!=0?1/Te:1/0,Fe=2*Math.sqrt(2-2*Te),Ye=Te<lP&&F&&Y,it=0<$.x*ie.y-$.y*ie.x;if(Ye&&P<te){var ft=D.dist(F);if(2*R<ft){var tt=D.sub(D.sub(F)._mult(R/ft)._round());this.updateDistance(F,tt),this.addCurrentVertex(tt,$,0,0,U),F=tt}}var gt=F&&Y,at=gt?s:S?"butt":p;if(gt&&at==="round"&&(Me<v?at="miter":Me<=2&&(at="fakeround")),at==="miter"&&m<Me&&(at="bevel"),at==="bevel"&&(2<Me&&(at="flipbevel"),Me<m&&(at="miter")),F&&this.updateDistance(F,D),at==="miter")xe._mult(Me),this.addCurrentVertex(D,xe,0,0,U);else if(at==="flipbevel"){if(100<Me)xe=ie.mult(-1);else{var It=Me*$.add(ie).mag()/$.sub(ie).mag();xe._perp()._mult(It*(it?-1:1))}this.addCurrentVertex(D,xe,0,0,U),this.addCurrentVertex(D,xe.mult(-1),0,0,U)}else if(at==="bevel"||at==="fakeround"){var Nt=-Math.sqrt(Me*Me-1),Zt=it?Nt:0,ir=it?0:Nt;if(F&&this.addCurrentVertex(D,$,Zt,ir,U),at==="fakeround")for(var Qt=Math.round(180*Fe/Math.PI/20),At=1;At<Qt;At++){var Gt=At/Qt;if(Gt!==.5){var kr=Gt-.5;Gt+=Gt*kr*(Gt-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*kr*kr+(.848013+be*(.215638*be-1.06021)))}var cn=ie.sub($)._mult(Gt)._add($)._unit()._mult(it?-1:1);this.addHalfVertex(D,cn.x,cn.y,!1,it,0,U)}Y&&this.addCurrentVertex(D,ie,-Zt,-ir,U)}else if(at==="butt")this.addCurrentVertex(D,xe,0,0,U);else if(at==="square"){var fi=F?1:-1;this.addCurrentVertex(D,xe,fi,fi,U)}else at==="round"&&(F&&(this.addCurrentVertex(D,$,0,0,U),this.addCurrentVertex(D,$,1,1,U,!0)),Y&&(this.addCurrentVertex(D,ie,-1,-1,U,!0),this.addCurrentVertex(D,ie,0,0,U)));if(Ye&&te<M-1){var jn=D.dist(Y);if(2*R<jn){var an=D.add(Y.sub(D)._mult(R/jn)._round());this.updateDistance(D,an),this.addCurrentVertex(an,ie,0,0,U),D=an}}}}},bo.prototype.addCurrentVertex=function(e,i,s,p,m,v){v===void 0&&(v=!1);var w=i.y*p-i.x,S=-i.y-i.x*p;this.addHalfVertex(e,i.x+i.y*s,i.y-i.x*s,v,!1,s,m),this.addHalfVertex(e,w,S,v,!0,-p,m),this.distance>LS/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,i,s,p,m,v))},bo.prototype.addHalfVertex=function(e,i,s,p,m,v,w){var S=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((e.x<<1)+(p?1:0),(e.y<<1)+(m?1:0),Math.round(63*i)+128,Math.round(63*s)+128,1+(v===0?0:v<0?-1:1)|(63&S)<<2,S>>6);var M=w.vertexLength++;0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,M),w.primitiveLength++),m?this.e2=M:this.e1=M},bo.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(LS-1):this.distance},bo.prototype.updateDistance=function(e,i){this.distance+=e.dist(i),this.updateScaledDistance()},yt("LineBucket",bo,{omit:["layers","patternFeatures"]});var Kd,uP=new _o({"line-cap":new bt(ce.layout_line["line-cap"]),"line-join":new Lt(ce.layout_line["line-join"]),"line-miter-limit":new bt(ce.layout_line["line-miter-limit"]),"line-round-limit":new bt(ce.layout_line["line-round-limit"]),"line-sort-key":new Lt(ce.layout_line["line-sort-key"])}),PS={paint:new _o({"line-opacity":new Lt(ce.paint_line["line-opacity"]),"line-color":new Lt(ce.paint_line["line-color"]),"line-translate":new bt(ce.paint_line["line-translate"]),"line-translate-anchor":new bt(ce.paint_line["line-translate-anchor"]),"line-width":new Lt(ce.paint_line["line-width"]),"line-gap-width":new Lt(ce.paint_line["line-gap-width"]),"line-offset":new Lt(ce.paint_line["line-offset"]),"line-blur":new Lt(ce.paint_line["line-blur"]),"line-dasharray":new xl(ce.paint_line["line-dasharray"]),"line-pattern":new Sd(ce.paint_line["line-pattern"]),"line-gradient":new lh(ce.paint_line["line-gradient"])}),layout:uP},DS=(hg.__proto__=Kd=Lt,((hg.prototype=Object.create(Kd&&Kd.prototype)).constructor=hg).prototype.possiblyEvaluate=function(e,i){return i=new Or(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),Kd.prototype.possiblyEvaluate.call(this,e,i)},hg.prototype.evaluate=function(e,i,s,p){return i=nt({},i,{zoom:Math.floor(i.zoom)}),Kd.prototype.evaluate.call(this,e,i,s,p)},new hg(PS.paint.properties["line-width"].specification));function hg(){Kd.apply(this,arguments)}DS.useIntegerZoom=!0;var dg,cP=(Ll.__proto__=dg=Ma,((Ll.prototype=Object.create(dg&&dg.prototype)).constructor=Ll).prototype._handleSpecialPaintPropertyUpdate=function(e){e==="line-gradient"&&this._updateGradient()},Ll.prototype._updateGradient=function(){this.gradient=kl(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},Ll.prototype.recalculate=function(e,i){dg.prototype.recalculate.call(this,e,i),this.paint._values["line-floorwidth"]=DS.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},Ll.prototype.createBucket=function(e){return new bo(e)},Ll.prototype.queryRadius=function(e){var i=e,s=zS(ur("line-width",this,i),ur("line-gap-width",this,i)),p=ur("line-offset",this,i);return s/2+Math.abs(p)+Fn(this.paint.get("line-translate"))},Ll.prototype.queryIntersectsFeature=function(e,i,s,p,m,v,w){var S=ni(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,w),M=w/2*zS(this.paint.get("line-width").evaluate(i,s),this.paint.get("line-gap-width").evaluate(i,s)),P=this.paint.get("line-offset").evaluate(i,s);return P&&(p=function(D,R){for(var U=[],F=new W(0,0),Y=0;Y<D.length;Y++){for(var $=D[Y],ie=[],te=0;te<$.length;te++){var xe=$[te],be=$[te+1],Te=te===0?F:xe.sub($[te-1])._unit()._perp(),Me=te===$.length-1?F:be.sub(xe)._unit()._perp(),Fe=Te._add(Me)._unit();Fe._mult(1/(Fe.x*Me.x+Fe.y*Me.y)),ie.push(Fe._mult(R)._add(xe))}U.push(ie)}return U}(p,P*w)),function(D,R,U){for(var F=0;F<R.length;F++){var Y=R[F];if(3<=D.length){for(var $=0;$<Y.length;$++)if(Ot(D,Y[$]))return!0}if(Ut(D,Y,U))return!0}return!1}(S,p,M)},Ll.prototype.isTileClipped=function(){return!0},Ll);function Ll(e){dg.call(this,e,PS)}function zS(e,i){return 0<i?i+2*e:e}var pP=Ei([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hP=Ei([{name:"a_projected_pos",components:3,type:"Float32"}],4),dP=(Ei([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ei([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),NS=(Ei([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),fP=Ei([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function mP(e,i,s){return e.sections.forEach(function(p){var m,v,w;p.text=(m=p.text,v=s,(w=i.layout.get("text-transform").evaluate(v,{}))==="uppercase"?m=m.toLocaleUpperCase():w==="lowercase"&&(m=m.toLocaleLowerCase()),No.applyArabicShaping&&(m=No.applyArabicShaping(m)),m)}),e}function OS(e,i,s,p,m){var v,w,S=8*m-p-1,M=(1<<S)-1,P=M>>1,D=-7,R=s?m-1:0,U=s?-1:1,F=e[i+R];for(R+=U,v=F&(1<<-D)-1,F>>=-D,D+=S;0<D;v=256*v+e[i+R],R+=U,D-=8);for(w=v&(1<<-D)-1,v>>=-D,D+=p;0<D;w=256*w+e[i+R],R+=U,D-=8);if(v===0)v=1-P;else{if(v===M)return w?NaN:1/0*(F?-1:1);w+=Math.pow(2,p),v-=P}return(F?-1:1)*w*Math.pow(2,v-p)}function RS(e,i,s,p,m,v){var w,S,M,P=8*v-m-1,D=(1<<P)-1,R=D>>1,U=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=p?0:v-1,Y=p?1:-1,$=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(S=isNaN(i)?1:0,w=D):(w=Math.floor(Math.log(i)/Math.LN2),i*(M=Math.pow(2,-w))<1&&(w--,M*=2),2<=(i+=1<=w+R?U/M:U*Math.pow(2,1-R))*M&&(w++,M/=2),D<=w+R?(S=0,w=D):1<=w+R?(S=(i*M-1)*Math.pow(2,m),w+=R):(S=i*Math.pow(2,R-1)*Math.pow(2,m),w=0));8<=m;e[s+F]=255&S,F+=Y,S/=256,m-=8);for(w=w<<m|S,P+=m;0<P;e[s+F]=255&w,F+=Y,w/=256,P-=8);e[s+F-Y]|=128*$}Ei([{name:"triangle",components:3,type:"Uint16"}]),Ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ei([{type:"Float32",name:"offsetX"}]),Ei([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var fg={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},M0=jr;function jr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}jr.Varint=0,jr.Fixed64=1,jr.Bytes=2,jr.Fixed32=5;var BS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Lu(e){return e.type===jr.Bytes?e.readVarint()+e.pos:e.pos+1}function $d(e,i,s){return s?4294967296*i+(e>>>0):4294967296*(i>>>0)+(e>>>0)}function FS(e,i,s){var p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));s.realloc(p);for(var m=s.pos-1;e<=m;m--)s.buf[m+p]=s.buf[m]}function gP(e,i){for(var s=0;s<e.length;s++)i.writeVarint(e[s])}function yP(e,i){for(var s=0;s<e.length;s++)i.writeSVarint(e[s])}function vP(e,i){for(var s=0;s<e.length;s++)i.writeFloat(e[s])}function _P(e,i){for(var s=0;s<e.length;s++)i.writeDouble(e[s])}function xP(e,i){for(var s=0;s<e.length;s++)i.writeBoolean(e[s])}function wP(e,i){for(var s=0;s<e.length;s++)i.writeFixed32(e[s])}function bP(e,i){for(var s=0;s<e.length;s++)i.writeSFixed32(e[s])}function CP(e,i){for(var s=0;s<e.length;s++)i.writeFixed64(e[s])}function SP(e,i){for(var s=0;s<e.length;s++)i.writeSFixed64(e[s])}function A0(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+16777216*e[i+3]}function Xd(e,i,s){e[s]=i,e[s+1]=i>>>8,e[s+2]=i>>>16,e[s+3]=i>>>24}function jS(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+(e[i+3]<<24)}function TP(e,i,s){e===1&&s.readMessage(EP,i)}function EP(e,i,s){if(e===3){var p=s.readMessage(IP,{}),m=p.width,v=p.height,w=p.left,S=p.top,M=p.advance;i.push({id:p.id,bitmap:new Er({width:m+6,height:v+6},p.bitmap),metrics:{width:m,height:v,left:w,top:S,advance:M}})}}function IP(e,i,s){e===1?i.id=s.readVarint():e===2?i.bitmap=s.readBytes():e===3?i.width=s.readVarint():e===4?i.height=s.readVarint():e===5?i.left=s.readSVarint():e===6?i.top=s.readSVarint():e===7&&(i.advance=s.readVarint())}function US(e){for(var i=0,s=0,p=0,m=e;p<m.length;p+=1){var v=m[p];i+=v.w*v.h,s=Math.max(s,v.w)}e.sort(function($,ie){return ie.h-$.h});for(var w=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}],S=0,M=0,P=0,D=e;P<D.length;P+=1)for(var R=D[P],U=w.length-1;0<=U;U--){var F=w[U];if(!(R.w>F.w||R.h>F.h)){if(R.x=F.x,R.y=F.y,M=Math.max(M,R.y+R.h),S=Math.max(S,R.x+R.w),R.w===F.w&&R.h===F.h){var Y=w.pop();U<w.length&&(w[U]=Y)}else R.h===F.h?(F.x+=R.w,F.w-=R.w):(R.w===F.w||w.push({x:F.x+R.w,y:F.y,w:F.w-R.w,h:R.h}),F.y+=R.h,F.h-=R.h);break}}return{w:S,h:M,fill:i/(S*M)||0}}function L0(e,i){var s=i.pixelRatio,p=i.version,m=i.stretchX,v=i.stretchY,w=i.content;this.paddedRect=e,this.pixelRatio=s,this.stretchX=m,this.stretchY=v,this.content=w,this.version=p}jr.prototype={destroy:function(){this.buf=null},readFields:function(e,i,s){for(s=s||this.length;this.pos<s;){var p=this.readVarint(),m=p>>3,v=this.pos;this.type=7&p,e(m,i,this),this.pos===v&&this.skip(p)}return i},readMessage:function(e,i){return this.readFields(e,i,this.readVarint()+this.pos)},readFixed32:function(){var e=A0(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=jS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=A0(this.buf,this.pos)+4294967296*A0(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=A0(this.buf,this.pos)+4294967296*jS(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=OS(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=OS(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var i,s,p=this.buf;return i=127&(s=p[this.pos++]),s<128?i:(i|=(127&(s=p[this.pos++]))<<7,s<128?i:(i|=(127&(s=p[this.pos++]))<<14,s<128?i:(i|=(127&(s=p[this.pos++]))<<21,s<128?i:function(m,v,w){var S,M,P=w.buf;if(S=(112&(M=P[w.pos++]))>>4,M<128||(S|=(127&(M=P[w.pos++]))<<3,M<128)||(S|=(127&(M=P[w.pos++]))<<10,M<128)||(S|=(127&(M=P[w.pos++]))<<17,M<128)||(S|=(127&(M=P[w.pos++]))<<24,M<128)||(S|=(1&(M=P[w.pos++]))<<31,M<128))return $d(m,S,v);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(s=p[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e,i,s,p=this.readVarint()+this.pos,m=this.pos;return 12<=(this.pos=p)-m&&BS?(e=this.buf,i=m,s=p,BS.decode(e.subarray(i,s))):function(v,w){for(var S="",M=m;M<w;){var P,D,R,U=v[M],F=null,Y=239<U?4:223<U?3:191<U?2:1;if(w<M+Y)break;Y===1?U<128&&(F=U):Y===2?(192&(P=v[M+1]))==128&&(F=(31&U)<<6|63&P)<=127&&(F=null):Y===3?(D=v[M+2],(192&(P=v[M+1]))==128&&(192&D)==128&&((F=(15&U)<<12|(63&P)<<6|63&D)<=2047||55296<=F&&F<=57343)&&(F=null)):Y===4&&(D=v[M+2],R=v[M+3],(192&(P=v[M+1]))==128&&(192&D)==128&&(192&R)==128&&((F=(15&U)<<18|(63&P)<<12|(63&D)<<6|63&R)<=65535||1114112<=F)&&(F=null)),F===null?(F=65533,Y=1):65535<F&&(F-=65536,S+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),S+=String.fromCharCode(F),M+=Y}return S}(this.buf,p)},readBytes:function(){var e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i},readPackedVarint:function(e,i){if(this.type!==jr.Bytes)return e.push(this.readVarint(i));var s=Lu(this);for(e=e||[];this.pos<s;)e.push(this.readVarint(i));return e},readPackedSVarint:function(e){if(this.type!==jr.Bytes)return e.push(this.readSVarint());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==jr.Bytes)return e.push(this.readBoolean());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==jr.Bytes)return e.push(this.readFloat());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==jr.Bytes)return e.push(this.readDouble());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==jr.Bytes)return e.push(this.readFixed32());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==jr.Bytes)return e.push(this.readSFixed32());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==jr.Bytes)return e.push(this.readFixed64());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==jr.Bytes)return e.push(this.readSFixed64());var i=Lu(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed64());return e},skip:function(e){var i=7&e;if(i===jr.Varint)for(;127<this.buf[this.pos++];);else if(i===jr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===jr.Fixed32)this.pos+=4;else{if(i!==jr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(e,i){this.writeVarint(e<<3|i)},realloc:function(e){for(var i=this.length||16;i<this.pos+e;)i*=2;if(i!==this.length){var s=new Uint8Array(i);s.set(this.buf),this.buf=s,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Xd(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Xd(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Xd(this.buf,-1&e,this.pos),Xd(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Xd(this.buf,-1&e,this.pos),Xd(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){268435455<(e=+e||0)||e<0?function(i){var s,p,m,v,w,S,M;if(0<=e?(s=e%4294967296|0,p=e/4294967296|0):(p=~(-e/4294967296),4294967295^(s=~(-e%4294967296))?s=s+1|0:p=p+1|(s=0)),18446744073709552e3<=e||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),S=s,(M=i).buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,M.buf[M.pos]=127&(S>>>=7),w=(7&(m=p))<<4,(v=i).buf[v.pos++]|=w|((m>>>=3)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m)))))}(this):(this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var i=this.pos;this.pos=function(p,m,v){for(var w,S,M=0;M<m.length;M++){if(55295<(w=m.charCodeAt(M))&&w<57344){if(!S){56319<w||M+1===m.length?(p[v++]=239,p[v++]=191,p[v++]=189):S=w;continue}if(w<56320){p[v++]=239,p[v++]=191,p[v++]=189,S=w;continue}w=S-55296<<10|w-56320|65536,S=null}else S&&(p[v++]=239,p[v++]=191,p[v++]=189,S=null);w<128?p[v++]=w:(w<2048?p[v++]=w>>6|192:(w<65536?p[v++]=w>>12|224:(p[v++]=w>>18|240,p[v++]=w>>12&63|128),p[v++]=w>>6&63|128),p[v++]=63&w|128)}return v}(this.buf,e,this.pos);var s=this.pos-i;128<=s&&FS(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeFloat:function(e){this.realloc(4),RS(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),RS(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var i=e.length;this.writeVarint(i),this.realloc(i);for(var s=0;s<i;s++)this.buf[this.pos++]=e[s]},writeRawMessage:function(e,i){this.pos++;var s=this.pos;e(i,this);var p=this.pos-s;128<=p&&FS(s,p,this),this.pos=s-1,this.writeVarint(p),this.pos+=p},writeMessage:function(e,i,s){this.writeTag(e,jr.Bytes),this.writeRawMessage(i,s)},writePackedVarint:function(e,i){i.length&&this.writeMessage(e,gP,i)},writePackedSVarint:function(e,i){i.length&&this.writeMessage(e,yP,i)},writePackedBoolean:function(e,i){i.length&&this.writeMessage(e,xP,i)},writePackedFloat:function(e,i){i.length&&this.writeMessage(e,vP,i)},writePackedDouble:function(e,i){i.length&&this.writeMessage(e,_P,i)},writePackedFixed32:function(e,i){i.length&&this.writeMessage(e,wP,i)},writePackedSFixed32:function(e,i){i.length&&this.writeMessage(e,bP,i)},writePackedFixed64:function(e,i){i.length&&this.writeMessage(e,CP,i)},writePackedSFixed64:function(e,i){i.length&&this.writeMessage(e,SP,i)},writeBytesField:function(e,i){this.writeTag(e,jr.Bytes),this.writeBytes(i)},writeFixed32Field:function(e,i){this.writeTag(e,jr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(e,i){this.writeTag(e,jr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(e,i){this.writeTag(e,jr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(e,i){this.writeTag(e,jr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(e,i){this.writeTag(e,jr.Varint),this.writeVarint(i)},writeSVarintField:function(e,i){this.writeTag(e,jr.Varint),this.writeSVarint(i)},writeStringField:function(e,i){this.writeTag(e,jr.Bytes),this.writeString(i)},writeFloatField:function(e,i){this.writeTag(e,jr.Fixed32),this.writeFloat(i)},writeDoubleField:function(e,i){this.writeTag(e,jr.Fixed64),this.writeDouble(i)},writeBooleanField:function(e,i){this.writeVarintField(e,Boolean(i))}};var mg={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};function gg(e,i){var s={},p={};this.haveRenderCallbacks=[];var m=[];this.addImages(e,s,m),this.addImages(i,p,m);var v=US(m),w=new Fr({width:v.w||1,height:v.h||1});for(var S in e){var M=e[S],P=s[S].paddedRect;Fr.copy(M.data,w,{x:0,y:0},{x:P.x+1,y:P.y+1},M.data)}for(var D in i){var R=i[D],U=p[D].paddedRect,F=U.x+1,Y=U.y+1,$=R.data.width,ie=R.data.height;Fr.copy(R.data,w,{x:0,y:0},{x:F,y:Y},R.data),Fr.copy(R.data,w,{x:0,y:ie-1},{x:F,y:Y-1},{width:$,height:1}),Fr.copy(R.data,w,{x:0,y:0},{x:F,y:Y+ie},{width:$,height:1}),Fr.copy(R.data,w,{x:$-1,y:0},{x:F-1,y:Y},{width:1,height:ie}),Fr.copy(R.data,w,{x:0,y:0},{x:F+$,y:Y},{width:1,height:ie})}this.image=w,this.iconPositions=s,this.patternPositions=p}function Jd(){this.scale=1,this.fontStack="",this.imageName=null}mg.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},mg.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},mg.tlbr.get=function(){return this.tl.concat(this.br)},mg.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(L0.prototype,mg),gg.prototype.addImages=function(e,i,s){for(var p in e){var m=e[p],v={x:0,y:0,w:m.data.width+2,h:m.data.height+2};s.push(v),i[p]=new L0(v,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(p)}},gg.prototype.patchUpdatedImages=function(e,i){for(var s in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[s],e.getImage(s),i),this.patchUpdatedImage(this.patternPositions[s],e.getImage(s),i)},gg.prototype.patchUpdatedImage=function(e,i,s){if(e&&i&&e.version!==i.version){e.version=i.version;var p=e.tl;s.update(i.data,void 0,{x:p[0],y:p[1]})}},yt("ImagePosition",L0),yt("ImageAtlas",gg);var pa={horizontal:1,vertical:2,horizontalOnly:3};function Yi(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}function P0(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y,$){var ie,te=Yi.fromFeature(e,m);R===pa.vertical&&te.verticalizePunctuation();var xe=No.processBidirectionalText,be=No.processStyledBidirectionalText;if(xe&&te.sections.length===1){ie=[];for(var Te=0,Me=xe(te.toString(),xx(te,P,v,i,p,F,Y));Te<Me.length;Te+=1){var Fe=Me[Te],Ye=new Yi;Ye.text=Fe,Ye.sections=te.sections;for(var it=0;it<Fe.length;it++)Ye.sectionIndex.push(0);ie.push(Ye)}}else if(be){ie=[];for(var ft=0,tt=be(te.text,te.sectionIndex,xx(te,P,v,i,p,F,Y));ft<tt.length;ft+=1){var gt=tt[ft],at=new Yi;at.text=gt[0],at.sectionIndex=gt[1],at.sections=te.sections,ie.push(at)}}else ie=function(Zt,ir){for(var Qt=[],At=Zt.text,Gt=0,kr=0,cn=ir;kr<cn.length;kr+=1){var fi=cn[kr];Qt.push(Zt.substring(Gt,fi)),Gt=fi}return Gt<At.length&&Qt.push(Zt.substring(Gt,At.length)),Qt}(te,xx(te,P,v,i,p,F,Y));var It=[],Nt={positionedLines:It,text:te.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:R,iconsInText:!1,verticalizable:!1};return function(Zt,ir,Qt,At,Gt,kr,cn,fi,jn,an,Cn){for(var Ur=0,Mi=-17,ii=0,mi=0,Co=M==="right"?1:M==="left"?0:.5,Ki=0,Bi=0,Io=Gt;Bi<Io.length;Bi+=1){var Yn=Io[Bi];Yn.trim();var Fi=Yn.getMaxScale(),Sn=24*(Fi-1),Kn={positionedGlyphs:[],lineOffset:0},pr=(Zt.positionedLines[Ki]=Kn).positionedGlyphs,xr=0;if(Yn.length()){for(var mr=0;mr<Yn.length();mr++){var or=Yn.getSection(mr),Vo=Yn.getSectionIndex(mr),sn=Yn.getCharCode(mr),Zs=0,Na=null,Gc=null,Ih=null,bg=24,zu=!(fi===pa.horizontal||!an&&!$m(sn)||an&&(D0[sn]||(Pl=sn,He.Arabic(Pl)||He["Arabic Supplement"](Pl)||He["Arabic Extended-A"](Pl)||He["Arabic Presentation Forms-A"](Pl)||He["Arabic Presentation Forms-B"](Pl))));if(or.imageName){var sf=At[or.imageName];if(!sf)continue;Ih=or.imageName,Zt.iconsInText=Zt.iconsInText||!0,Gc=sf.paddedRect;var ha=sf.displaySize;or.scale=24*or.scale/Cn,Zs=Sn+(24-ha[1]*or.scale),bg=(Na={width:ha[0],height:ha[1],left:1,top:-3,advance:zu?ha[1]:ha[0]}).advance;var Oa=zu?ha[0]*or.scale-24*Fi:ha[1]*or.scale-24*Fi;0<Oa&&xr<Oa&&(xr=Oa)}else{var Cg=Qt[or.fontStack],Hc=Cg&&Cg[sn];if(Hc&&Hc.rect)Gc=Hc.rect,Na=Hc.metrics;else{var Sg=ir[or.fontStack],lf=Sg&&Sg[sn];if(!lf)continue;Na=lf.metrics}Zs=24*(Fi-or.scale)}zu?(Zt.verticalizable=!0,pr.push({glyph:sn,imageName:Ih,x:Ur,y:Mi+Zs,vertical:zu,scale:or.scale,fontStack:or.fontStack,sectionIndex:Vo,metrics:Na,rect:Gc}),Ur+=bg*or.scale+jn):(pr.push({glyph:sn,imageName:Ih,x:Ur,y:Mi+Zs,vertical:zu,scale:or.scale,fontStack:or.fontStack,sectionIndex:Vo,metrics:Na,rect:Gc}),Ur+=Na.advance*or.scale+jn)}pr.length!==0&&(ii=Math.max(Ur-jn,ii),kP(pr,0,pr.length-1,Co,xr)),Ur=0;var kh=kr*Fi+xr;Kn.lineOffset=Math.max(xr,Sn),Mi+=kh,mi=Math.max(kh,mi),++Ki}else Mi+=kr,++Ki}var Pl,Wc=Mi- -17,Tg=wx(cn),Df=Tg.horizontalAlign,ip=Tg.verticalAlign;(function(Vg,qo,Eg,Yc,Ig,Px,G0){var H0,W0=(qo-Eg)*Yc;H0=Ig!==kr?-Px*ip+17:(-ip*G0+.5)*kr;for(var kg=0,Y0=Vg;kg<Y0.length;kg+=1)for(var uf=0,K0=Y0[kg].positionedGlyphs;uf<K0.length;uf+=1){var $0=K0[uf];$0.x+=W0,$0.y+=H0}})(Zt.positionedLines,Co,Df,ii,mi,Wc,Gt.length),Zt.top+=-ip*Wc,Zt.bottom=Zt.top+Wc,Zt.left+=-Df*ii,Zt.right=Zt.left+ii}(Nt,i,s,p,ie,w,S,R,P,U,$),!function(){for(var Zt=0,ir=It;Zt<ir.length;Zt+=1)if(ir[Zt].positionedGlyphs.length!==0)return;return 1}()&&Nt}Jd.forText=function(e,i){var s=new Jd;return s.scale=e||1,s.fontStack=i,s},Jd.forImage=function(e){var i=new Jd;return i.imageName=e,i},Yi.fromFeature=function(e,i){for(var s=new Yi,p=0;p<e.sections.length;p++){var m=e.sections[p];m.image?s.addImageSection(m):s.addTextSection(m,i)}return s},Yi.prototype.length=function(){return this.text.length},Yi.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Yi.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Yi.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Yi.prototype.verticalizePunctuation=function(){this.text=function(e){for(var i="",s=0;s<e.length;s++){var p=e.charCodeAt(s+1)||null,m=e.charCodeAt(s-1)||null;i+=p&&Xm(p)&&!fg[e[s+1]]||m&&Xm(m)&&!fg[e[s-1]]||!fg[e[s]]?e[s]:fg[e[s]]}return i}(this.text)},Yi.prototype.trim=function(){for(var e=0,i=0;i<this.text.length&&D0[this.text.charCodeAt(i)];i++)e++;for(var s=this.text.length,p=this.text.length-1;0<=p&&e<=p&&D0[this.text.charCodeAt(p)];p--)s--;this.text=this.text.substring(e,s),this.sectionIndex=this.sectionIndex.slice(e,s)},Yi.prototype.substring=function(e,i){var s=new Yi;return s.text=this.text.substring(e,i),s.sectionIndex=this.sectionIndex.slice(e,i),s.sections=this.sections,s},Yi.prototype.toString=function(){return this.text},Yi.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(i,s){return Math.max(i,e.sections[s].scale)},0)},Yi.prototype.addTextSection=function(e,i){this.text+=e.text,this.sections.push(Jd.forText(e.scale,e.fontStack||i));for(var s=this.sections.length-1,p=0;p<e.text.length;++p)this.sectionIndex.push(s)},Yi.prototype.addImageSection=function(e){var i=e.image?e.image.name:"";if(i.length!==0){var s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(Jd.forImage(i)),this.sectionIndex.push(this.sections.length-1)):nn("Reached maximum number of images 6401")}else nn("Can't add FormattedSection with an empty image.")},Yi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var D0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Uo={};function VS(e,i,s,p,m,v){if(i.imageName){var w=p[i.imageName];return w?w.displaySize[0]*i.scale*24/v+m:0}var S=s[i.fontStack],M=S&&S[e];return M?M.metrics.advance*i.scale+m:0}function qS(e,i,s,p){var m=Math.pow(e-i,2);return p?e<i?m/2:2*m:m+Math.abs(s)*s}function ZS(e,i,s,p,m,v){for(var w=null,S=qS(i,s,m,v),M=0,P=p;M<P.length;M+=1){var D=P[M],R=qS(i-D.x,s,m,v)+D.badness;R<=S&&(w=D,S=R)}return{index:e,x:i,priorBreak:w,badness:S}}function xx(e,i,s,p,m,v,w){if(v!=="point")return[];if(!e)return[];for(var S,M=[],P=function(be,Te,Me,Fe,Ye,it){for(var ft=0,tt=0;tt<be.length();tt++){var gt=be.getSection(tt);ft+=VS(be.getCharCode(tt),gt,Fe,Ye,Te,it)}return ft/Math.max(1,Math.ceil(ft/Me))}(e,i,s,p,m,w),D=0<=e.text.indexOf(""),R=0,U=0;U<e.length();U++){var F=e.getSection(U),Y=e.getCharCode(U);if(D0[Y]||(R+=VS(Y,F,p,m,i,w)),U<e.length()-1){var $=!((S=Y)<11904||!(He["Bopomofo Extended"](S)||He.Bopomofo(S)||He["CJK Compatibility Forms"](S)||He["CJK Compatibility Ideographs"](S)||He["CJK Compatibility"](S)||He["CJK Radicals Supplement"](S)||He["CJK Strokes"](S)||He["CJK Symbols and Punctuation"](S)||He["CJK Unified Ideographs Extension A"](S)||He["CJK Unified Ideographs"](S)||He["Enclosed CJK Letters and Months"](S)||He["Halfwidth and Fullwidth Forms"](S)||He.Hiragana(S)||He["Ideographic Description Characters"](S)||He["Kangxi Radicals"](S)||He["Katakana Phonetic Extensions"](S)||He.Katakana(S)||He["Vertical Forms"](S)||He["Yi Radicals"](S)||He["Yi Syllables"](S)));(Uo[Y]||$||F.imageName)&&M.push(ZS(U+1,R,P,M,(ie=Y,te=e.getCharCode(U+1),xe=void 0,xe=0,ie===10&&(xe-=1e4),$&&D&&(xe+=150),ie!==40&&ie!==65288||(xe+=50),te!==41&&te!==65289||(xe+=50),xe),!1))}}var ie,te,xe;return function be(Te){return Te?be(Te.priorBreak).concat(Te.index):[]}(ZS(e.length(),R,P,M,0,!0))}function wx(e){var i=.5,s=.5;switch(e){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:i,verticalAlign:s}}function kP(e,i,s,p,m){if(p||m)for(var v=e[s],w=(e[s].x+v.metrics.advance*v.scale)*p,S=i;S<=s;S++)e[S].x-=w,e[S].y+=m}function GS(e,i,s,p,m,v){var w,S=e.image;if(S.content){var M=S.content,P=S.pixelRatio||1;w=[M[0]/P,M[1]/P,S.displaySize[0]-M[2]/P,S.displaySize[1]-M[3]/P]}var D,R,U,F,Y=i.left*v,$=i.right*v;R=s==="width"||s==="both"?(F=m[0]+Y-p[3],m[0]+$+p[1]):(F=m[0]+(Y+$-S.displaySize[0])/2)+S.displaySize[0];var ie=i.top*v,te=i.bottom*v;return U=s==="height"||s==="both"?(D=m[1]+ie-p[0],m[1]+te+p[2]):(D=m[1]+(ie+te-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:D,right:R,bottom:U,left:F,collisionPadding:w}}Uo[10]=!0,Uo[32]=!0,Uo[38]=!0,Uo[40]=!0,Uo[41]=!0,Uo[43]=!0,Uo[45]=!0,Uo[47]=!0,Uo[173]=!0,Uo[183]=!0,Uo[8203]=!0,Uo[8208]=!0,Uo[8211]=!0,Uo[8231]=!0;var yg,Qd=((yg=W)&&(vg.__proto__=yg),((vg.prototype=Object.create(yg&&yg.prototype)).constructor=vg).prototype.clone=function(){return new vg(this.x,this.y,this.angle,this.segment)},vg);function vg(e,i,s,p){yg.call(this,e,i),this.angle=s,p!==void 0&&(this.segment=p)}function bx(e,i){var s=i.expression;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Or(e+1))};if(s.kind==="source")return{kind:"source"};for(var p=s.zoomStops,m=s.interpolationType,v=0;v<p.length&&p[v]<=e;)v++;for(var w=v=Math.max(0,v-1);w<p.length&&p[w]<e+1;)w++;w=Math.min(p.length-1,w);var S=p[v],M=p[w];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:M,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:M,minSize:s.evaluate(new Or(S)),maxSize:s.evaluate(new Or(M)),interpolationType:m}}function HS(e,i,s){var p=i.uSize,m=s.lowerSize;return e.kind==="source"?m/128:e.kind==="composite"?_n(m/128,s.upperSize/128,i.uSizeT):p}function WS(e,i){var s=0,p=0;if(e.kind==="constant")p=e.layoutSize;else if(e.kind!=="source"){var m=e.interpolationType,v=m?pt(ci.interpolationFactor(m,i,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?p=_n(e.minSize,e.maxSize,v):s=v}return{uSizeT:s,uSize:p}}yt("Anchor",Qd);var MP=Object.freeze({__proto__:null,getSizeData:bx,evaluateSizeForFeature:HS,evaluateSizeForZoom:WS,SIZE_PACK_FACTOR:128});function YS(e,i,s,p,m){if(i.segment===void 0)return 1;for(var v=i,w=i.segment+1,S=0;-s/2<S;){if(--w<0)return;S-=e[w].dist(v),v=e[w]}S+=e[w].dist(e[w+1]),w++;for(var M=[],P=0;S<s/2;){var D=e[w],R=e[w+1];if(!R)return;var U=e[w-1].angleTo(D)-D.angleTo(R);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:S,angleDelta:U}),P+=U;S-M[0].distance>p;)P-=M.shift().angleDelta;if(m<P)return;w++,S+=D.dist(R)}return 1}function KS(e){for(var i=0,s=0;s<e.length-1;s++)i+=e[s].dist(e[s+1]);return i}function $S(e,i,s){return e?.6*i*s:0}function XS(e,i){return Math.max(e?e.right-e.left:0,i?i.right-i.left:0)}function AP(e,i,s,p,m,v){for(var w=$S(s,m,v),S=XS(s,p)*v,M=0,P=KS(e)/2,D=0;D<e.length-1;D++){var R=e[D],U=e[D+1],F=R.dist(U);if(P<M+F){var Y=(P-M)/F,$=_n(R.x,U.x,Y),ie=_n(R.y,U.y,Y),te=new Qd($,ie,U.angleTo(R),D);return te._round(),!w||YS(e,te,S,w,i)?te:void 0}M+=F}}function JS(e,i,s,p,m){for(var v=[],w=0;w<e.length;w++)for(var S=e[w],M=void 0,P=0;P<S.length-1;P++){var D=S[P],R=S[P+1];D.x<i&&R.x<i||(D.x<i?D=new W(i,D.y+(i-D.x)/(R.x-D.x)*(R.y-D.y))._round():R.x<i&&(R=new W(i,D.y+(i-D.x)/(R.x-D.x)*(R.y-D.y))._round()),D.y<s&&R.y<s||(D.y<s?D=new W(D.x+(s-D.y)/(R.y-D.y)*(R.x-D.x),s)._round():R.y<s&&(R=new W(D.x+(s-D.y)/(R.y-D.y)*(R.x-D.x),s)._round()),D.x>=p&&R.x>=p||(D.x>=p?D=new W(p,D.y+(p-D.x)/(R.x-D.x)*(R.y-D.y))._round():R.x>=p&&(R=new W(p,D.y+(p-D.x)/(R.x-D.x)*(R.y-D.y))._round()),D.y>=m&&R.y>=m||(D.y>=m?D=new W(D.x+(m-D.y)/(R.y-D.y)*(R.x-D.x),m)._round():R.y>=m&&(R=new W(D.x+(m-D.y)/(R.y-D.y)*(R.x-D.x),m)._round()),M&&D.equals(M[M.length-1])||v.push(M=[D]),M.push(R)))))}return v}function QS(e,i,s,p){function m(At,Gt){return At+Gt[1]-Gt[0]}var v=[],w=e.image,S=w.pixelRatio,M=w.paddedRect.w-2,P=w.paddedRect.h-2,D=e.right-e.left,R=e.bottom-e.top,U=w.stretchX||[[0,M]],F=w.stretchY||[[0,P]],Y=U.reduce(m,0),$=F.reduce(m,0),ie=M-Y,te=P-$,xe=0,be=Y,Te=0,Me=$,Fe=0,Ye=ie,it=0,ft=te;if(w.content&&p){var tt=w.content;xe=z0(U,0,tt[0]),Te=z0(F,0,tt[1]),be=z0(U,tt[0],tt[2]),Me=z0(F,tt[1],tt[3]),Fe=tt[0]-xe,it=tt[1]-Te,Ye=tt[2]-tt[0]-be,ft=tt[3]-tt[1]-Me}function gt(At,Gt,kr,cn){var fi=N0(At.stretch-xe,be,D,e.left),jn=O0(At.fixed-Fe,Ye,At.stretch,Y),an=N0(Gt.stretch-Te,Me,R,e.top),Cn=O0(Gt.fixed-it,ft,Gt.stretch,$),Ur=N0(kr.stretch-xe,be,D,e.left),Mi=O0(kr.fixed-Fe,Ye,kr.stretch,Y),ii=N0(cn.stretch-Te,Me,R,e.top),mi=O0(cn.fixed-it,ft,cn.stretch,$),Co=new W(fi,an),Ki=new W(Ur,an),Bi=new W(Ur,ii),Io=new W(fi,ii),Yn=new W(jn/S,Cn/S),Fi=new W(Mi/S,mi/S),Sn=i*Math.PI/180;if(Sn){var Kn=Math.sin(Sn),pr=Math.cos(Sn),xr=[pr,-Kn,Kn,pr];Co._matMult(xr),Ki._matMult(xr),Io._matMult(xr),Bi._matMult(xr)}var mr=At.stretch+At.fixed,or=Gt.stretch+Gt.fixed;return{tl:Co,tr:Ki,bl:Io,br:Bi,tex:{x:w.paddedRect.x+1+mr,y:w.paddedRect.y+1+or,w:kr.stretch+kr.fixed-mr,h:cn.stretch+cn.fixed-or},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yn,pixelOffsetBR:Fi,minFontScaleX:Ye/S/D,minFontScaleY:ft/S/R,isSDF:s}}if(p&&(w.stretchX||w.stretchY))for(var at=e4(U,ie,Y),It=e4(F,te,$),Nt=0;Nt<at.length-1;Nt++)for(var Zt=at[Nt],ir=at[Nt+1],Qt=0;Qt<It.length-1;Qt++)v.push(gt(Zt,It[Qt],ir,It[Qt+1]));else v.push(gt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:1+M},{fixed:0,stretch:1+P}));return v}function z0(e,i,s){for(var p=0,m=0,v=e;m<v.length;m+=1){var w=v[m];p+=Math.max(i,Math.min(s,w[1]))-Math.max(i,Math.min(s,w[0]))}return p}function e4(e,i,s){for(var p=[{fixed:-1,stretch:0}],m=0,v=e;m<v.length;m+=1){var w=v[m],S=w[0],M=w[1],P=p[p.length-1];p.push({fixed:S-P.stretch,stretch:P.stretch}),p.push({fixed:S-P.stretch,stretch:P.stretch+(M-S)})}return p.push({fixed:i+1,stretch:s}),p}function N0(e,i,s,p){return e/i*s+p}function O0(e,i,s,p){return e-i*s/p}function R0(e,i,s,p,m,v,w,S,M,P){if(this.boxStartIndex=e.length,M){var D=v.top,R=v.bottom,U=v.collisionPadding;U&&(D-=U[1],R+=U[3]);var F=R-D;0<F&&(F=Math.max(10,F),this.circleDiameter=F)}else{var Y=v.top*w-S,$=v.bottom*w+S,ie=v.left*w-S,te=v.right*w+S,xe=v.collisionPadding;if(xe&&(ie-=xe[0]*w,Y-=xe[1]*w,te+=xe[2]*w,$+=xe[3]*w),P){var be=new W(ie,Y),Te=new W(te,Y),Me=new W(ie,$),Fe=new W(te,$),Ye=P*Math.PI/180;be._rotate(Ye),Te._rotate(Ye),Me._rotate(Ye),Fe._rotate(Ye),ie=Math.min(be.x,Te.x,Me.x,Fe.x),te=Math.max(be.x,Te.x,Me.x,Fe.x),Y=Math.min(be.y,Te.y,Me.y,Fe.y),$=Math.max(be.y,Te.y,Me.y,Fe.y)}e.emplaceBack(i.x,i.y,ie,Y,te,$,s,p,m)}this.boxEndIndex=e.length}var ef=function(e,i){if(e===void 0&&(e=[]),i===void 0&&(i=LP),this.data=e,this.length=this.data.length,this.compare=i,0<this.length)for(var s=(this.length>>1)-1;0<=s;s--)this._down(s)};function LP(e,i){return e<i?-1:i<e?1:0}function PP(e,i,s){i===void 0&&(i=1),s===void 0&&(s=!1);for(var p=1/0,m=1/0,v=-1/0,w=-1/0,S=e[0],M=0;M<S.length;M++){var P=S[M];(!M||P.x<p)&&(p=P.x),(!M||P.y<m)&&(m=P.y),(!M||P.x>v)&&(v=P.x),(!M||P.y>w)&&(w=P.y)}var D=Math.min(v-p,w-m),R=D/2,U=new ef([],DP);if(D===0)return new W(p,m);for(var F=p;F<v;F+=D)for(var Y=m;Y<w;Y+=D)U.push(new tf(F+R,Y+R,R,e));for(var $=function(xe){for(var be=0,Te=0,Me=0,Fe=xe[0],Ye=0,it=Fe.length,ft=it-1;Ye<it;ft=Ye++){var tt=Fe[Ye],gt=Fe[ft],at=tt.x*gt.y-gt.x*tt.y;Te+=(tt.x+gt.x)*at,Me+=(tt.y+gt.y)*at,be+=3*at}return new tf(Te/be,Me/be,0,xe)}(e),ie=U.length;U.length;){var te=U.pop();(te.d>$.d||!$.d)&&($=te,s&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,ie)),te.max-$.d<=i||(U.push(new tf(te.p.x-(R=te.h/2),te.p.y-R,R,e)),U.push(new tf(te.p.x+R,te.p.y-R,R,e)),U.push(new tf(te.p.x-R,te.p.y+R,R,e)),U.push(new tf(te.p.x+R,te.p.y+R,R,e)),ie+=4)}return s&&(console.log("num probes: "+ie),console.log("best distance: "+$.d)),$.p}function DP(e,i){return i.max-e.max}function tf(e,i,s,p){this.p=new W(e,i),this.h=s,this.d=function(m,v){for(var w=!1,S=1/0,M=0;M<v.length;M++)for(var P=v[M],D=0,R=P.length,U=R-1;D<R;U=D++){var F=P[D],Y=P[U];F.y>m.y!=Y.y>m.y&&m.x<(Y.x-F.x)*(m.y-F.y)/(Y.y-F.y)+F.x&&(w=!w),S=Math.min(S,zt(m,F,Y))}return(w?1:-1)*Math.sqrt(S)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}ef.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},ef.prototype.pop=function(){if(this.length!==0){var e=this.data[0],i=this.data.pop();return this.length--,0<this.length&&(this.data[0]=i,this._down(0)),e}},ef.prototype.peek=function(){return this.data[0]},ef.prototype._up=function(e){for(var i=this.data,s=this.compare,p=i[e];0<e;){var m=e-1>>1,v=i[m];if(0<=s(p,v))break;i[e]=v,e=m}i[e]=p},ef.prototype._down=function(e){for(var i=this.data,s=this.compare,p=this.length>>1,m=i[e];e<p;){var v=1+(e<<1),w=i[v],S=v+1;if(S<this.length&&s(i[S],w)<0&&(w=i[v=S]),0<=s(w,m))break;i[e]=w,e=v}i[e]=m};var Cx=Number.POSITIVE_INFINITY;function t4(e,i){return i[1]!==Cx?function(s,p,m){var v=0,w=0;switch(p=Math.abs(p),m=Math.abs(m),s){case"top-right":case"top-left":case"top":w=m-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-m}switch(s){case"top-right":case"bottom-right":case"right":v=-p;break;case"top-left":case"bottom-left":case"left":v=p}return[v,w]}(e,i[0],i[1]):function(s,p){var m=0,v=0;p<0&&(p=0);var w=p/Math.sqrt(2);switch(s){case"top-right":case"top-left":v=w-7;break;case"bottom-right":case"bottom-left":v=7-w;break;case"bottom":v=7-p;break;case"top":v=p-7}switch(s){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=p;break;case"right":m=-p}return[m,v]}(e,i[0])}function Sx(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function r4(e,i,s,p,m,v,w,S,M,P,D,R,U,F,Y){var $=function(Te,Me,Fe,Ye,it,ft,tt){for(var gt=Fe.layout.get("text-rotate").evaluate(it,{})*Math.PI/180,at=[],It=0,Nt=Te.positionedLines;It<Nt.length;It+=1)for(var Zt=Nt[It],ir=0,Qt=Zt.positionedGlyphs;ir<Qt.length;ir+=1){var At=Qt[ir];if(At.rect){var Gt=At.rect||{},kr=4,cn=!0,fi=1,jn=0,an=(Ye||tt)&&At.vertical,Cn=At.metrics.advance*At.scale/2;if(tt&&Te.verticalizable&&(jn=Zt.lineOffset/2-(At.imageName?-(24-At.metrics.width*At.scale)/2:24*(At.scale-1))),At.imageName){var Ur=ft[At.imageName];cn=Ur.sdf,kr=1/(fi=Ur.pixelRatio)}var Mi=Ye?[At.x+Cn,At.y]:[0,0],ii=Ye?[0,0]:[At.x+Cn+Me[0],At.y+Me[1]-jn],mi=[0,0];an&&(mi=ii,ii=[0,0]);var Co=(At.metrics.left-kr)*At.scale-Cn+ii[0],Ki=(-At.metrics.top-kr)*At.scale+ii[1],Bi=Co+Gt.w*At.scale/fi,Io=Ki+Gt.h*At.scale/fi,Yn=new W(Co,Ki),Fi=new W(Bi,Ki),Sn=new W(Co,Io),Kn=new W(Bi,Io);if(an){var pr=new W(-Cn,17+Cn),xr=-Math.PI/2,mr=12-Cn,or=new W(22-mr,-(At.imageName?mr:0)),Vo=new(Function.prototype.bind.apply(W,[null].concat(mi)));Yn._rotateAround(xr,pr)._add(or)._add(Vo),Fi._rotateAround(xr,pr)._add(or)._add(Vo),Sn._rotateAround(xr,pr)._add(or)._add(Vo),Kn._rotateAround(xr,pr)._add(or)._add(Vo)}if(gt){var sn=Math.sin(gt),Zs=Math.cos(gt),Na=[Zs,-sn,sn,Zs];Yn._matMult(Na),Fi._matMult(Na),Sn._matMult(Na),Kn._matMult(Na)}var Gc=new W(0,0),Ih=new W(0,0);at.push({tl:Yn,tr:Fi,bl:Sn,br:Kn,tex:Gt,writingMode:Te.writingMode,glyphOffset:Mi,sectionIndex:At.sectionIndex,isSDF:cn,pixelOffsetTL:Gc,pixelOffsetBR:Ih,minFontScaleX:0,minFontScaleY:0})}}return at}(s,S,m,v,w,p,e.allowVerticalPlacement),ie=e.textSizeData,te=null;ie.kind==="source"?32640<(te=[128*m.layout.get("text-size").evaluate(w,{})])[0]&&nn(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ie.kind==="composite"&&(32640<(te=[128*F.compositeTextSizes[0].evaluate(w,{},Y),128*F.compositeTextSizes[1].evaluate(w,{},Y)])[0]||32640<te[1])&&nn(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,$,te,S,v,w,P,i,M.lineStartIndex,M.lineLength,U,Y);for(var xe=0,be=D;xe<be.length;xe+=1)R[be[xe]]=e.text.placedSymbolArray.length-1;return 4*$.length}function n4(e){for(var i in e)return e[i];return null}function zP(e,i,s,p){var m=e.compareText;if(i in m){for(var v=m[i],w=v.length-1;0<=w;w--)if(p.dist(v[w])<s)return 1}else m[i]=[];return m[i].push(p),0}var NP=Yd.VectorTileFeature.types,OP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function B0(e,i,s,p,m,v,w,S,M,P,D,R,U){var F=S?Math.min(32640,Math.round(S[0])):0,Y=S?Math.min(32640,Math.round(S[1])):0;e.emplaceBack(i,s,Math.round(32*p),Math.round(32*m),v,w,(F<<1)+(M?1:0),Y,16*P,16*D,256*R,256*U)}function Tx(e,i,s){e.emplaceBack(i.x,i.y,s),e.emplaceBack(i.x,i.y,s),e.emplaceBack(i.x,i.y,s),e.emplaceBack(i.x,i.y,s)}function RP(e){for(var i=0,s=e.sections;i<s.length;i+=1)if(w0(s[i].text))return 1}function rf(e){this.layoutVertexArray=new xo,this.indexArray=new qn,this.programConfigurations=e,this.segments=new bn,this.dynamicLayoutVertexArray=new la,this.opacityVertexArray=new fu,this.placedSymbolArray=new Bc}function _g(e,i,s){this.layoutVertexArray=new e,this.layoutAttributes=i,this.indexArray=new s,this.segments=new bn,this.collisionVertexArray=new bl}function Ir(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xi([]),this.placementViewportMatrix=Xi([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bx(this.zoom,i["text-size"]),this.iconSizeData=bx(this.zoom,i["icon-size"]);var s=this.layers[0].layout,p=s.get("symbol-sort-key"),m=s.get("symbol-z-order");this.sortFeaturesByKey=m!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&(s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement")),s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(function(v){return pa[v]})),this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id}),this.sourceID=e.sourceID}function nf(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Cr,this.defaultValue=e}rf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},rf.prototype.upload=function(e,i,s,p){this.isEmpty()||(s&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pP.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,hP.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,OP,!0),this.opacityVertexBuffer.itemSize=1),(s||p)&&this.programConfigurations.upload(e))},rf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},yt("SymbolBuffers",rf),_g.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,dP.members,!0)},_g.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},yt("CollisionBuffers",_g),Ir.prototype.createArrays=function(){this.text=new rf(new Ve(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new rf(new Ve(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new Bd,this.lineVertexArray=new jo,this.symbolInstances=new bu},Ir.prototype.calculateGlyphDependencies=function(e,i,s,p,m){for(var v=0;v<e.length;v++)if(i[e.charCodeAt(v)]=!0,(s||p)&&m){var w=fg[e.charAt(v)];w&&(i[w.charCodeAt(0)]=!0)}},Ir.prototype.populate=function(e,i,s){var p=this.layers[0],m=p.layout,v=m.get("text-font"),w=m.get("text-field"),S=m.get("icon-image"),M=(w.value.kind!=="constant"||w.value.value instanceof Si&&!w.value.value.isEmpty()||0<w.value.value.toString().length)&&(v.value.kind!=="constant"||0<v.value.value.length),P=S.value.kind!=="constant"||!!S.value.value||0<Object.keys(S.parameters).length,D=m.get("symbol-sort-key");if(this.features=[],M||P){for(var R=i.iconDependencies,U=i.glyphDependencies,F=i.availableImages,Y=new Or(this.zoom),$=0,ie=e;$<ie.length;$+=1){var te=ie[$],xe=te.feature,be=te.id,Te=te.index,Me=te.sourceLayerIndex,Fe=p._featureFilter.needGeometry,Ye={type:xe.type,id:be,properties:xe.properties,geometry:Fe?ht(xe):[]};if(p._featureFilter.filter(Y,Ye,s)){Fe||(Ye.geometry=ht(xe));var it=void 0;if(M){var ft=p.getValueAndResolveTokens("text-field",Ye,s,F),tt=Si.factory(ft);RP(tt)&&(this.hasRTLText=!0),(!this.hasRTLText||oh()==="unavailable"||this.hasRTLText&&No.isParsed())&&(it=mP(tt,p,Ye))}var gt=void 0;if(P){var at=p.getValueAndResolveTokens("icon-image",Ye,s,F);gt=at instanceof yo?at:yo.fromString(at)}if(it||gt){var It=this.sortFeaturesByKey?D.evaluate(Ye,{},s):void 0,Nt={id:be,text:it,icon:gt,index:Te,sourceLayerIndex:Me,geometry:ht(xe),properties:xe.properties,type:NP[xe.type],sortKey:It};if(this.features.push(Nt),gt&&(R[gt.name]=!0),it){var Zt=v.evaluate(Ye,{},s).join(","),ir=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(pa.vertical);for(var Qt=0,At=it.sections;Qt<At.length;Qt+=1){var Gt=At[Qt];if(Gt.image)R[Gt.image.name]=!0;else{var kr=Mc(it.toString()),cn=Gt.fontStack||Zt,fi=U[cn]=U[cn]||{};this.calculateGlyphDependencies(Gt.text,fi,ir,this.allowVerticalPlacement,kr)}}}}}}m.get("symbol-placement")==="line"&&(this.features=function(jn){var an={},Cn={},Ur=[],Mi=0;function ii(mr){Ur.push(jn[mr]),Mi++}function mi(mr,or,Vo){var sn=Cn[mr];return delete Cn[mr],Cn[or]=sn,Ur[sn].geometry[0].pop(),Ur[sn].geometry[0]=Ur[sn].geometry[0].concat(Vo[0]),sn}function Co(mr,or,Vo){var sn=an[or];return delete an[or],an[mr]=sn,Ur[sn].geometry[0].shift(),Ur[sn].geometry[0]=Vo[0].concat(Ur[sn].geometry[0]),sn}function Ki(mr,or,Vo){var sn=Vo?or[0][or[0].length-1]:or[0][0];return mr+":"+sn.x+":"+sn.y}for(var Bi=0;Bi<jn.length;Bi++){var Io=jn[Bi],Yn=Io.geometry,Fi=Io.text?Io.text.toString():null;if(Fi){var Sn=Ki(Fi,Yn),Kn=Ki(Fi,Yn,!0);if(Sn in Cn&&Kn in an&&Cn[Sn]!==an[Kn]){var pr=Co(Sn,Kn,Yn),xr=mi(Sn,Kn,Ur[pr].geometry);delete an[Sn],delete Cn[Kn],Cn[Ki(Fi,Ur[xr].geometry,!0)]=xr,Ur[pr].geometry=null}else Sn in Cn?mi(Sn,Kn,Yn):Kn in an?Co(Sn,Kn,Yn):(ii(Bi),an[Sn]=Mi-1,Cn[Kn]=Mi-1)}else ii(Bi)}return Ur.filter(function(mr){return mr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(jn,an){return jn.sortKey-an.sortKey})}},Ir.prototype.update=function(e,i,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,i,this.layers,s),this.icon.programConfigurations.updatePaintArrays(e,i,this.layers,s))},Ir.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ir.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ir.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ir.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ir.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ir.prototype.addToLineVertexArray=function(e,i){var s=this.lineVertexArray.length;if(e.segment!==void 0){for(var p=e.dist(i[e.segment+1]),m=e.dist(i[e.segment]),v={},w=e.segment+1;w<i.length;w++)v[w]={x:i[w].x,y:i[w].y,tileUnitDistanceFromAnchor:p},w<i.length-1&&(p+=i[w+1].dist(i[w]));for(var S=e.segment||0;0<=S;S--)v[S]={x:i[S].x,y:i[S].y,tileUnitDistanceFromAnchor:m},0<S&&(m+=i[S-1].dist(i[S]));for(var M=0;M<i.length;M++){var P=v[M];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},Ir.prototype.addSymbols=function(e,i,s,p,m,v,w,S,M,P,D,R){for(var U=e.indexArray,F=e.layoutVertexArray,Y=e.segments.prepareSegment(4*i.length,F,U,v.sortKey),$=this.glyphOffsetArray.length,ie=Y.vertexLength,te=this.allowVerticalPlacement&&w===pa.vertical?Math.PI/2:0,xe=v.text&&v.text.sections,be=0;be<i.length;be++){var Te=i[be],Me=Te.tl,Fe=Te.tr,Ye=Te.bl,it=Te.br,ft=Te.tex,tt=Te.pixelOffsetTL,gt=Te.pixelOffsetBR,at=Te.minFontScaleX,It=Te.minFontScaleY,Nt=Te.glyphOffset,Zt=Te.isSDF,ir=Te.sectionIndex,Qt=Y.vertexLength,At=Nt[1];B0(F,S.x,S.y,Me.x,At+Me.y,ft.x,ft.y,s,Zt,tt.x,tt.y,at,It),B0(F,S.x,S.y,Fe.x,At+Fe.y,ft.x+ft.w,ft.y,s,Zt,gt.x,tt.y,at,It),B0(F,S.x,S.y,Ye.x,At+Ye.y,ft.x,ft.y+ft.h,s,Zt,tt.x,gt.y,at,It),B0(F,S.x,S.y,it.x,At+it.y,ft.x+ft.w,ft.y+ft.h,s,Zt,gt.x,gt.y,at,It),Tx(e.dynamicLayoutVertexArray,S,te),U.emplaceBack(Qt,Qt+1,Qt+2),U.emplaceBack(Qt+1,Qt+2,Qt+3),Y.vertexLength+=4,Y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Nt[0]),be!==i.length-1&&ir===i[be+1].sectionIndex||e.programConfigurations.populatePaintArrays(F.length,v,v.index,{},R,xe&&xe[ir])}e.placedSymbolArray.emplaceBack(S.x,S.y,$,this.glyphOffsetArray.length-$,ie,M,P,S.segment,s?s[0]:0,s?s[1]:0,p[0],p[1],w,0,!1,0,D)},Ir.prototype._addCollisionDebugVertex=function(e,i,s,p,m,v){return i.emplaceBack(0,0),e.emplaceBack(s.x,s.y,p,m,Math.round(v.x),Math.round(v.y))},Ir.prototype.addCollisionDebugVertices=function(e,i,s,p,m,v,w){var S=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),M=S.vertexLength,P=m.layoutVertexArray,D=m.collisionVertexArray,R=w.anchorX,U=w.anchorY;this._addCollisionDebugVertex(P,D,v,R,U,new W(e,i)),this._addCollisionDebugVertex(P,D,v,R,U,new W(s,i)),this._addCollisionDebugVertex(P,D,v,R,U,new W(s,p)),this._addCollisionDebugVertex(P,D,v,R,U,new W(e,p)),S.vertexLength+=4;var F=m.indexArray;F.emplaceBack(M,M+1),F.emplaceBack(M+1,M+2),F.emplaceBack(M+2,M+3),F.emplaceBack(M+3,M),S.primitiveLength+=4},Ir.prototype.addDebugCollisionBoxes=function(e,i,s,p){for(var m=e;m<i;m++){var v=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,p?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,s)}},Ir.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _g(mu,NS.members,Fs),this.iconCollisionBox=new _g(mu,NS.members,Fs);for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},Ir.prototype._deserializeCollisionBoxesForSymbol=function(e,i,s,p,m,v,w,S,M){for(var P={},D=i;D<s;D++){var R=e.get(D);P.textBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},P.textFeatureIndex=R.featureIndex;break}for(var U=p;U<m;U++){var F=e.get(U);P.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},P.verticalTextFeatureIndex=F.featureIndex;break}for(var Y=v;Y<w;Y++){var $=e.get(Y);P.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},P.iconFeatureIndex=$.featureIndex;break}for(var ie=S;ie<M;ie++){var te=e.get(ie);P.verticalIconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},P.verticalIconFeatureIndex=te.featureIndex;break}return P},Ir.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var s=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},Ir.prototype.hasTextData=function(){return 0<this.text.segments.get().length},Ir.prototype.hasIconData=function(){return 0<this.icon.segments.get().length},Ir.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ir.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length},Ir.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length},Ir.prototype.addIndicesForPlacedSymbol=function(e,i){for(var s=e.placedSymbolArray.get(i),p=s.vertexStartIndex+4*s.numGlyphs,m=s.vertexStartIndex;m<p;m+=4)e.indexArray.emplaceBack(m,m+1,m+2),e.indexArray.emplaceBack(m+1,m+2,m+3)},Ir.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var i=Math.sin(e),s=Math.cos(e),p=[],m=[],v=[],w=0;w<this.symbolInstances.length;++w){v.push(w);var S=this.symbolInstances.get(w);p.push(0|Math.round(i*S.anchorX+s*S.anchorY)),m.push(S.featureIndex)}return v.sort(function(M,P){return p[M]-p[P]||m[P]-m[M]}),v},Ir.prototype.addToSortKeyRanges=function(e,i){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===i?s.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Ir.prototype.sortFeatures=function(e){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,p=this.symbolInstanceIndexes;s<p.length;s+=1){var m=this.symbolInstances.get(p[s]);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(function(v,w,S){0<=v&&S.indexOf(v)===w&&i.addIndicesForPlacedSymbol(i.text,v)}),0<=m.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),0<=m.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),0<=m.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},yt("SymbolBucket",Ir,{omit:["layers","collisionBoxArray","features","compareText"]}),Ir.MAX_GLYPHS=65535,Ir.addDynamicAttributes=Tx;var BP=new _o({"symbol-placement":new bt(ce.layout_symbol["symbol-placement"]),"symbol-spacing":new bt(ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bt(ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Lt(ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new bt(ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new bt(ce.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new bt(ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new bt(ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bt(ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new Lt(ce.layout_symbol["icon-size"]),"icon-text-fit":new bt(ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bt(ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new Lt(ce.layout_symbol["icon-image"]),"icon-rotate":new Lt(ce.layout_symbol["icon-rotate"]),"icon-padding":new bt(ce.layout_symbol["icon-padding"]),"icon-keep-upright":new bt(ce.layout_symbol["icon-keep-upright"]),"icon-offset":new Lt(ce.layout_symbol["icon-offset"]),"icon-anchor":new Lt(ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new bt(ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bt(ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bt(ce.layout_symbol["text-rotation-alignment"]),"text-field":new Lt(ce.layout_symbol["text-field"]),"text-font":new Lt(ce.layout_symbol["text-font"]),"text-size":new Lt(ce.layout_symbol["text-size"]),"text-max-width":new Lt(ce.layout_symbol["text-max-width"]),"text-line-height":new bt(ce.layout_symbol["text-line-height"]),"text-letter-spacing":new Lt(ce.layout_symbol["text-letter-spacing"]),"text-justify":new Lt(ce.layout_symbol["text-justify"]),"text-radial-offset":new Lt(ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new bt(ce.layout_symbol["text-variable-anchor"]),"text-anchor":new Lt(ce.layout_symbol["text-anchor"]),"text-max-angle":new bt(ce.layout_symbol["text-max-angle"]),"text-writing-mode":new bt(ce.layout_symbol["text-writing-mode"]),"text-rotate":new Lt(ce.layout_symbol["text-rotate"]),"text-padding":new bt(ce.layout_symbol["text-padding"]),"text-keep-upright":new bt(ce.layout_symbol["text-keep-upright"]),"text-transform":new Lt(ce.layout_symbol["text-transform"]),"text-offset":new Lt(ce.layout_symbol["text-offset"]),"text-allow-overlap":new bt(ce.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new bt(ce.layout_symbol["text-ignore-placement"]),"text-optional":new bt(ce.layout_symbol["text-optional"])}),Ex={paint:new _o({"icon-opacity":new Lt(ce.paint_symbol["icon-opacity"]),"icon-color":new Lt(ce.paint_symbol["icon-color"]),"icon-halo-color":new Lt(ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new Lt(ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Lt(ce.paint_symbol["icon-halo-blur"]),"icon-translate":new bt(ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new bt(ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new Lt(ce.paint_symbol["text-opacity"]),"text-color":new Lt(ce.paint_symbol["text-color"],{runtimeType:Ci,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new Lt(ce.paint_symbol["text-halo-color"]),"text-halo-width":new Lt(ce.paint_symbol["text-halo-width"]),"text-halo-blur":new Lt(ce.paint_symbol["text-halo-blur"]),"text-translate":new bt(ce.paint_symbol["text-translate"]),"text-translate-anchor":new bt(ce.paint_symbol["text-translate-anchor"])}),layout:BP};function Sh(e,i,s,p){this.context=e,this.format=s,this.texture=e.gl.createTexture(),this.update(i,p)}nf.prototype.evaluate=function(e){if(e.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(e.formattedSection))return i.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},nf.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},nf.prototype.outputDefined=function(){return!1},nf.prototype.serialize=function(){return null},yt("FormatSectionOverride",nf,{omit:["defaultValue"]});var F0,j0,U0,xg,FP=(za.__proto__=xg=Ma,((za.prototype=Object.create(xg&&xg.prototype)).constructor=za).prototype.recalculate=function(e,i){if(xg.prototype.recalculate.call(this,e,i),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var s=this.layout.get("text-writing-mode");if(s){for(var p=[],m=0,v=s;m<v.length;m+=1){var w=v[m];p.indexOf(w)<0&&p.push(w)}this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},za.prototype.getValueAndResolveTokens=function(e,i,s,p){var m,v=this.layout.get(e).evaluate(i,{},s,p),w=this._unevaluatedLayout._values[e];return w.isDataDriven()||Cc(w.value)||!v?v:(m=i.properties,v.replace(/{([^{}]+)}/g,function(S,M){return M in m?String(m[M]):""}))},za.prototype.createBucket=function(e){return new Ir(e)},za.prototype.queryRadius=function(){return 0},za.prototype.queryIntersectsFeature=function(){return!1},za.prototype._setPaintOverrides=function(){for(var e=0,i=Ex.paint.overridableProperties;e<i.length;e+=1){var s=i[e];if(za.hasPaintOverride(this.layout,s)){var p,m=this.paint.get(s),v=new nf(m),w=new bc(v,m.property.specification);p=m.value.kind==="constant"||m.value.kind==="source"?new gl("source",w):new Sc("composite",w,m.value.zoomStops,m.value._interpolationType),this.paint._values[s]=new Oo(m.property,p,m.parameters)}}},za.prototype._handleOverridablePaintPropertyUpdate=function(e,i,s){return!(!this.layout||i.isDataDriven()||s.isDataDriven())&&za.hasPaintOverride(this.layout,e)},za.hasPaintOverride=function(e,i){function s(M){for(var P=0,D=M;P<D.length;P+=1)if(m.overrides&&m.overrides.hasOverride(D[P]))return v=!0,0}var p=e.get("text-field"),m=Ex.paint.properties[i],v=!1;if(p.value.kind==="constant"&&p.value.value instanceof Si)s(p.value.value.sections);else if(p.value.kind==="source"){var w=function(M){v||(M instanceof Ea&&ti(M.value)===Wr?s(M.value.sections):M instanceof ea?s(M.sections):M.eachChild(w))},S=p.value;S._styleExpression&&w(S._styleExpression.expression)}return v},za),jP={paint:new _o({"background-color":new bt(ce.paint_background["background-color"]),"background-pattern":new xl(ce.paint_background["background-pattern"]),"background-opacity":new bt(ce.paint_background["background-opacity"])})},UP=(kx.__proto__=U0=Ma,(kx.prototype=Object.create(U0&&U0.prototype)).constructor=kx),VP={paint:new _o({"raster-opacity":new bt(ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new bt(ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bt(ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bt(ce.paint_raster["raster-brightness-max"]),"raster-saturation":new bt(ce.paint_raster["raster-saturation"]),"raster-contrast":new bt(ce.paint_raster["raster-contrast"]),"raster-resampling":new bt(ce.paint_raster["raster-resampling"]),"raster-fade-duration":new bt(ce.paint_raster["raster-fade-duration"])})},qP=(Ix.__proto__=j0=Ma,(Ix.prototype=Object.create(j0&&j0.prototype)).constructor=Ix),ZP=(qs.__proto__=F0=Ma,((qs.prototype=Object.create(F0&&F0.prototype)).constructor=qs).prototype.is3D=function(){return this.implementation.renderingMode==="3d"},qs.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},qs.prototype.recalculate=function(){},qs.prototype.updateTransitions=function(){},qs.prototype.hasTransition=function(){},qs.prototype.serialize=function(){},qs.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},qs.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},qs),GP={circle:_h,heatmap:wh,hillshade:bh,fill:XL,"fill-extrusion":oP,line:cP,symbol:FP,background:UP,raster:qP},i4=ne.HTMLImageElement,o4=ne.HTMLCanvasElement,a4=ne.HTMLVideoElement,s4=ne.ImageData,V0=ne.ImageBitmap;function qs(e){F0.call(this,e,{}),this.implementation=e}function Ix(e){j0.call(this,e,VP)}function kx(e){U0.call(this,e,jP)}function za(e){xg.call(this,e,Ex)}function Mx(e){var i=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})}function of(e,i,s){this.target=e,this.parent=i,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},rn(["receive","process"],this),this.invoker=new Mx(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=lc()?e:ne}function l4(e,i,s){var p=2*Math.PI*6378137/256/Math.pow(2,s);return[e*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}function Hn(e,i){e&&(i?this.setSouthWest(e).setNorthEast(i):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}Sh.prototype.update=function(e,i,s){var p=e.width,m=e.height,v=!(this.size&&this.size[0]===p&&this.size[1]===m||s),w=this.context,S=w.gl;if(this.useMipmap=Boolean(i&&i.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!i||i.premultiply!==!1)),v)this.size=[p,m],e instanceof i4||e instanceof o4||e instanceof a4||e instanceof s4||V0&&e instanceof V0?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,p,m,0,this.format,S.UNSIGNED_BYTE,e.data);else{var M=s||{x:0,y:0},P=M.x,D=M.y;e instanceof i4||e instanceof o4||e instanceof a4||e instanceof s4||V0&&e instanceof V0?S.texSubImage2D(S.TEXTURE_2D,0,P,D,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,P,D,p,m,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},Sh.prototype.bind=function(e,i,s){var p=this.context.gl;p.bindTexture(p.TEXTURE_2D,this.texture),s!==p.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=p.LINEAR),e!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,e),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,s||e),this.filter=e),i!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,i),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,i),this.wrap=i)},Sh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Sh.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},Mx.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Mx.prototype.remove=function(){delete this._channel,this._callback=function(){}},of.prototype.send=function(e,i,s,p,m){var v=this;m===void 0&&(m=!1);var w=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[w]=s);var S=Op(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:e,hasCallback:!!s,targetMapId:p,mustQueue:m,sourceMapId:this.mapId,data:nh(i,S)},S),{cancel:function(){s&&delete v.callbacks[w],v.target.postMessage({id:w,type:"<cancel>",targetMapId:p,sourceMapId:v.mapId})}}},of.prototype.receive=function(e){var i=e.data,s=i.id;if(s&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[s];var p=this.cancelCallbacks[s];delete this.cancelCallbacks[s],p&&p()}else lc()||i.mustQueue?(this.tasks[s]=i,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,i)},of.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),i=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(e,i)}},of.prototype.processTask=function(e,i){var s=this;if(i.type==="<response>"){var p=this.callbacks[e];delete this.callbacks[e],p&&(i.error?p(ih(i.error)):p(null,ih(i.data)))}else{var m=!1,v=Op(this.globalScope)?void 0:[],w=i.hasCallback?function(D,R){m=!0,delete s.cancelCallbacks[e],s.target.postMessage({id:e,type:"<response>",sourceMapId:s.mapId,error:D?nh(D):null,data:nh(R,v)},v)}:function(D){m=!0},S=null,M=ih(i.data);if(this.parent[i.type])S=this.parent[i.type](i.sourceMapId,M,w);else if(this.parent.getWorkerSource){var P=i.type.split(".");S=this.parent.getWorkerSource(i.sourceMapId,P[0],M.source)[P[1]](M,w)}else w(new Error("Could not find function "+i.type));!m&&S&&S.cancel&&(this.cancelCallbacks[e]=S.cancel)}},of.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)},Hn.prototype.setNorthEast=function(e){return this._ne=e instanceof Xr?new Xr(e.lng,e.lat):Xr.convert(e),this},Hn.prototype.setSouthWest=function(e){return this._sw=e instanceof Xr?new Xr(e.lng,e.lat):Xr.convert(e),this},Hn.prototype.extend=function(e){var i,s,p=this._sw,m=this._ne;if(e instanceof Xr)s=i=e;else{if(!(e instanceof Hn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Hn.convert(e)):this.extend(Xr.convert(e)):this;if(s=e._ne,!(i=e._sw)||!s)return this}return p||m?(p.lng=Math.min(i.lng,p.lng),p.lat=Math.min(i.lat,p.lat),m.lng=Math.max(s.lng,m.lng),m.lat=Math.max(s.lat,m.lat)):(this._sw=new Xr(i.lng,i.lat),this._ne=new Xr(s.lng,s.lat)),this},Hn.prototype.getCenter=function(){return new Xr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Hn.prototype.getSouthWest=function(){return this._sw},Hn.prototype.getNorthEast=function(){return this._ne},Hn.prototype.getNorthWest=function(){return new Xr(this.getWest(),this.getNorth())},Hn.prototype.getSouthEast=function(){return new Xr(this.getEast(),this.getSouth())},Hn.prototype.getWest=function(){return this._sw.lng},Hn.prototype.getSouth=function(){return this._sw.lat},Hn.prototype.getEast=function(){return this._ne.lng},Hn.prototype.getNorth=function(){return this._ne.lat},Hn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Hn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Hn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Hn.prototype.contains=function(e){var i=Xr.convert(e),s=i.lng,p=i.lat,m=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m},Hn.convert=function(e){return!e||e instanceof Hn?e:new Hn(e)};var Xr=function(e,i){if(isNaN(e)||isNaN(i))throw new Error("Invalid LngLat object: ("+e+", "+i+")");if(this.lng=+e,this.lat=+i,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Xr.prototype.wrap=function(){return new Xr(Wt(this.lng,-180,180),this.lat)},Xr.prototype.toArray=function(){return[this.lng,this.lat]},Xr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Xr.prototype.distanceTo=function(e){var i=Math.PI/180,s=this.lat*i,p=e.lat*i,m=Math.sin(s)*Math.sin(p)+Math.cos(s)*Math.cos(p)*Math.cos((e.lng-this.lng)*i);return 63710088e-1*Math.acos(Math.min(m,1))},Xr.prototype.toBounds=function(e){e===void 0&&(e=0);var i=360*e/40075017,s=i/Math.cos(Math.PI/180*this.lat);return new Hn(new Xr(this.lng-s,this.lat-i),new Xr(this.lng+s,this.lat+i))},Xr.convert=function(e){if(e instanceof Xr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Xr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Xr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var u4=2*Math.PI*63710088e-1;function c4(e){return u4*Math.cos(e*Math.PI/180)}function p4(e){return(180+e)/360}function h4(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function d4(e,i){return e/c4(i)}function Ax(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Th(e,i,s){s===void 0&&(s=0),this.x=+e,this.y=+i,this.z=+s}function Eh(e,i,s){this.z=e,this.x=i,this.y=s,this.key=wg(0,e,e,i,s)}function f4(e,i){this.wrap=e,this.canonical=i,this.key=wg(e,i.z,i.z,i.x,i.y)}function Wn(e,i,s,p,m){this.overscaledZ=e,this.wrap=i,this.canonical=new Eh(s,+p,+m),this.key=wg(i,e,s,p,m)}function wg(e,i,s,p,m){(e*=2)<0&&(e=-1*e-1);var v=1<<s;return(v*v*e+v*m+p).toString(36)+s.toString(36)+i.toString(36)}function Pu(e,i,s){if(this.uid=e,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(s&&s!=="mapbox"&&s!=="terrarium")return nn('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var p=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=s||"mapbox";for(var m=0;m<p;m++)this.data[this._idx(-1,m)]=this.data[this._idx(0,m)],this.data[this._idx(p,m)]=this.data[this._idx(p-1,m)],this.data[this._idx(m,-1)]=this.data[this._idx(m,0)],this.data[this._idx(m,p)]=this.data[this._idx(m,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)]}function q0(e){this._stringToNumber={},this._numberToString=[];for(var i=0;i<e.length;i++){var s=e[i];this._stringToNumber[s]=i,this._numberToString[i]=s}}function Z0(e,i,s,p,m){this.type="Feature",(this._vectorTileFeature=e)._z=i,e._x=s,e._y=p,this.properties=e.properties,this.id=m}Th.fromLngLat=function(e,i){i===void 0&&(i=0);var s=Xr.convert(e);return new Th(p4(s.lng),h4(s.lat),d4(i,s.lat))},Th.prototype.toLngLat=function(){return new Xr(360*this.x-180,Ax(this.y))},Th.prototype.toAltitude=function(){return this.z*c4(Ax(this.y))},Th.prototype.meterInMercatorCoordinateUnits=function(){return 1/u4*(e=Ax(this.y),1/Math.cos(e*Math.PI/180));var e},Eh.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Eh.prototype.url=function(e,i){var s,p,m,v,w,S=(p=this.y,m=this.z,v=l4(256*(s=this.x),256*(p=Math.pow(2,m)-p-1),m),w=l4(256*(s+1),256*(p+1),m),v[0]+","+v[1]+","+w[0]+","+w[1]),M=function(P,D,R){for(var U,F="",Y=P;0<Y;Y--)F+=(D&(U=1<<Y-1)?1:0)+(R&U?2:0);return F}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",M).replace("{bbox-epsg-3857}",S)},Eh.prototype.getTilePoint=function(e){var i=Math.pow(2,this.z);return new W(8192*(e.x*i-this.x),8192*(e.y*i-this.y))},Eh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},Wn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Wn.prototype.scaledTo=function(e){var i=this.canonical.z-e;return e>this.canonical.z?new Wn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wn(e,this.wrap,e,this.canonical.x>>i,this.canonical.y>>i)},Wn.prototype.calculateScaledKey=function(e,i){var s=this.canonical.z-e;return e>this.canonical.z?wg(this.wrap*i,e,this.canonical.z,this.canonical.x,this.canonical.y):wg(this.wrap*i,e,e,this.canonical.x>>s,this.canonical.y>>s)},Wn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var i=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>i&&e.canonical.y===this.canonical.y>>i},Wn.prototype.children=function(e){if(this.overscaledZ>=e)return[new Wn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,s=2*this.canonical.x,p=2*this.canonical.y;return[new Wn(i,this.wrap,i,s,p),new Wn(i,this.wrap,i,1+s,p),new Wn(i,this.wrap,i,s,1+p),new Wn(i,this.wrap,i,1+s,1+p)]},Wn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Wn.prototype.wrapped=function(){return new Wn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Wn.prototype.unwrapTo=function(e){return new Wn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Wn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Wn.prototype.toUnwrapped=function(){return new f4(this.wrap,this.canonical)},Wn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Wn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Th(e.x-this.wrap,e.y))},yt("CanonicalTileID",Eh),yt("OverscaledTileID",Wn,{omit:["posMatrix"]}),Pu.prototype.get=function(e,i){var s=new Uint8Array(this.data.buffer),p=4*this._idx(e,i);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(s[p],s[1+p],s[2+p])},Pu.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Pu.prototype._idx=function(e,i){if(e<-1||e>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(e+1)},Pu.prototype._unpackMapbox=function(e,i,s){return(256*e*256+256*i+s)/10-1e4},Pu.prototype._unpackTerrarium=function(e,i,s){return 256*e+i+s/256-32768},Pu.prototype.getPixels=function(){return new Fr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Pu.prototype.backfillBorder=function(e,i,s){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var p=i*this.dim,m=i*this.dim+this.dim,v=s*this.dim,w=s*this.dim+this.dim;switch(i){case-1:p=m-1;break;case 1:m=p+1}switch(s){case-1:v=w-1;break;case 1:w=v+1}for(var S=-i*this.dim,M=-s*this.dim,P=v;P<w;P++)for(var D=p;D<m;D++)this.data[this._idx(D,P)]=e.data[this._idx(D+S,P+M)]},yt("DEMData",Pu),q0.prototype.encode=function(e){return this._stringToNumber[e]},q0.prototype.decode=function(e){return this._numberToString[e]};var Lx={geometry:{configurable:!0}};function af(){this.state={},this.stateChanges={},this.deletedStates={}}function Du(e,i){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new kc(8192,16,0),this.grid3D=new kc(8192,16,0),this.featureIndexArray=new Su,this.promoteId=i}function m4(e,i,s,p,m){return Wl(e,function(v,w){var S=i instanceof Lc?i.get(w):null;return S&&S.evaluate?S.evaluate(s,p,m):S})}function g4(e){for(var i=1/0,s=1/0,p=-1/0,m=-1/0,v=0,w=e;v<w.length;v+=1){var S=w[v];i=Math.min(i,S.x),s=Math.min(s,S.y),p=Math.max(p,S.x),m=Math.max(m,S.y)}return{minX:i,minY:s,maxX:p,maxY:m}}function HP(e,i){return i-e}function di(e,i){this.tileID=e,this.uid=tn(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}function y4(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Zc.mark(this._marks.start)}Lx.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Lx.geometry.set=function(e){this._geometry=e},Z0.prototype.toJSON=function(){var e={geometry:this.geometry};for(var i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(e[i]=this[i]);return e},Object.defineProperties(Z0.prototype,Lx),af.prototype.updateState=function(e,i,s){var p=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][p]=this.stateChanges[e][p]||{},nt(this.stateChanges[e][p],s),this.deletedStates[e]===null)for(var m in this.deletedStates[e]={},this.state[e])m!==p&&(this.deletedStates[e][m]=null);else if(this.deletedStates[e]&&this.deletedStates[e][p]===null)for(var v in this.deletedStates[e][p]={},this.state[e][p])s[v]||(this.deletedStates[e][p][v]=null);else for(var w in s)this.deletedStates[e]&&this.deletedStates[e][p]&&this.deletedStates[e][p][w]===null&&delete this.deletedStates[e][p][w]},af.prototype.removeFeatureState=function(e,i,s){if(this.deletedStates[e]!==null){var p=String(i);if(this.deletedStates[e]=this.deletedStates[e]||{},s&&i!==void 0)this.deletedStates[e][p]!==null&&(this.deletedStates[e][p]=this.deletedStates[e][p]||{},this.deletedStates[e][p][s]=null);else if(i!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][p])for(s in this.deletedStates[e][p]={},this.stateChanges[e][p])this.deletedStates[e][p][s]=null;else this.deletedStates[e][p]=null;else this.deletedStates[e]=null}},af.prototype.getState=function(e,i){var s=String(i),p=nt({},(this.state[e]||{})[s],(this.stateChanges[e]||{})[s]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var m=this.deletedStates[e][i];if(m===null)return{};for(var v in m)delete p[v]}return p},af.prototype.initializeTileState=function(e,i){e.setFeatureState(this.state,i)},af.prototype.coalesceChanges=function(e,i){var s={};for(var p in this.stateChanges){this.state[p]=this.state[p]||{};var m={};for(var v in this.stateChanges[p])this.state[p][v]||(this.state[p][v]={}),nt(this.state[p][v],this.stateChanges[p][v]),m[v]=this.state[p][v];s[p]=m}for(var w in this.deletedStates){this.state[w]=this.state[w]||{};var S={};if(this.deletedStates[w]===null)for(var M in this.state[w])S[M]={},this.state[w][M]={};else for(var P in this.deletedStates[w]){if(this.deletedStates[w][P]===null)this.state[w][P]={};else for(var D=0,R=Object.keys(this.deletedStates[w][P]);D<R.length;D+=1)delete this.state[w][P][R[D]];S[P]=this.state[w][P]}s[w]=s[w]||{},nt(s[w],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(s).length!==0)for(var U in e)e[U].setFeatureState(s,i)},Du.prototype.insert=function(e,i,s,p,m,v){var w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,p,m);for(var S=v?this.grid3D:this.grid,M=0;M<i.length;M++){for(var P=i[M],D=[1/0,1/0,-1/0,-1/0],R=0;R<P.length;R++){var U=P[R];D[0]=Math.min(D[0],U.x),D[1]=Math.min(D[1],U.y),D[2]=Math.max(D[2],U.x),D[3]=Math.max(D[3],U.y)}D[0]<8192&&D[1]<8192&&0<=D[2]&&0<=D[3]&&S.insert(w,D[0],D[1],D[2],D[3])}},Du.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Yd.VectorTile(new M0(this.rawTileData)).layers,this.sourceLayerCoder=new q0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Du.prototype.query=function(e,i,s,p){var m=this;this.loadVTLayers();for(var v=e.params||{},w=8192/e.tileSize/e.scale,S=Ec(v.filter),M=e.queryGeometry,P=e.queryPadding*w,D=g4(M),R=this.grid.query(D.minX-P,D.minY-P,D.maxX+P,D.maxY+P),U=g4(e.cameraQueryGeometry),F=0,Y=this.grid3D.query(U.minX-P,U.minY-P,U.maxX+P,U.maxY+P,function(be,Te,Me,Fe){return function(Ye,it,ft,tt,gt){for(var at=0,It=Ye;at<It.length;at+=1){var Nt=It[at];if(it<=Nt.x&&ft<=Nt.y&&tt>=Nt.x&&gt>=Nt.y)return!0}var Zt=[new W(it,ft),new W(it,gt),new W(tt,gt),new W(tt,ft)];if(2<Ye.length){for(var ir=0,Qt=Zt;ir<Qt.length;ir+=1)if(Ot(Ye,Qt[ir]))return!0}for(var At=0;At<Ye.length-1;At++)if(Br(Ye[At],Ye[At+1],Zt))return!0;return!1}(e.cameraQueryGeometry,be-P,Te-P,Me+P,Fe+P)});F<Y.length;F+=1)R.push(Y[F]);R.sort(HP);for(var $,ie={},te=function(be){var Te=R[be];if(Te!==$){$=Te;var Me=m.featureIndexArray.get(Te),Fe=null;m.loadMatchingFeature(ie,Me.bucketIndex,Me.sourceLayerIndex,Me.featureIndex,S,v.layers,v.availableImages,i,s,p,function(Ye,it,ft){return Fe=Fe||ht(Ye),it.queryIntersectsFeature(M,Ye,ft,Fe,m.z,e.transform,w,e.pixelPosMatrix)})}},xe=0;xe<R.length;xe++)te(xe);return ie},Du.prototype.loadMatchingFeature=function(e,i,s,p,m,v,w,S,M,P,D){var R=this.bucketLayerIDs[i];if(!v||function(Ye,it){for(var ft=0;ft<Ye.length;ft++)if(0<=it.indexOf(Ye[ft]))return 1}(v,R)){var U=this.sourceLayerCoder.decode(s),F=this.vtLayers[U].feature(p);if(m.filter(new Or(this.tileID.overscaledZ),F))for(var Y=this.getId(F,U),$=0;$<R.length;$++){var ie=R[$];if(!(v&&v.indexOf(ie)<0)){var te=S[ie];if(te){var xe={};Y!==void 0&&P&&(xe=P.getState(te.sourceLayer||"_geojsonTileLayer",Y));var be=M[ie];be.paint=m4(be.paint,te.paint,F,xe,w),be.layout=m4(be.layout,te.layout,F,xe,w);var Te=!D||D(F,te,xe);if(Te){var Me=new Z0(F,this.z,this.x,this.y,Y);Me.layer=be;var Fe=e[ie];Fe===void 0&&(Fe=e[ie]=[]),Fe.push({featureIndex:p,feature:Me,intersectionZ:Te})}}}}}},Du.prototype.lookupSymbolFeatures=function(e,i,s,p,m,v,w,S){var M={};this.loadVTLayers();for(var P=Ec(m),D=0,R=e;D<R.length;D+=1)this.loadMatchingFeature(M,s,p,R[D],P,v,w,S,i);return M},Du.prototype.hasLayer=function(e){for(var i=0,s=this.bucketLayerIDs;i<s.length;i+=1)for(var p=0,m=s[i];p<m.length;p+=1)if(e===m[p])return!0;return!1},Du.prototype.getId=function(e,i){var s=e.id;return this.promoteId&&typeof(s=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]])=="boolean"&&(s=Number(s)),s},yt("FeatureIndex",Du,{omit:["rawTileData","sourceLayerCoder"]}),di.prototype.registerFadeDuration=function(e){var i=e+this.timeAdded;i<ol.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},di.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},di.prototype.loadVectorData=function(e,i,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var p in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(P,D){var R={};if(!D)return R;for(var U=function(){var $=Y[F],ie=$.layerIds.map(function(be){return D.getLayer(be)}).filter(Boolean);if(ie.length!==0){$.layers=ie,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map(function(be){return ie.filter(function(Te){return Te.id===be})[0]}));for(var te=0,xe=ie;te<xe.length;te+=1)R[xe[te].id]=$}},F=0,Y=P;F<Y.length;F+=1)U();return R}(e.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var m=this.buckets[p];if(m instanceof Ir){if(this.hasSymbolBuckets=!0,!s)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var v in this.buckets){var w=this.buckets[v];if(w instanceof Ir&&w.hasRTLText){this.hasRTLText=!0,No.isLoading()||No.isLoaded()||oh()!=="deferred"||eg();break}}for(var S in this.queryPadding=0,this.buckets){var M=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(S).queryRadius(M))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new wu},di.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},di.prototype.getBucket=function(e){return this.buckets[e.id]},di.prototype.upload=function(e){for(var i in this.buckets){var s=this.buckets[i];s.uploadPending()&&s.upload(e)}var p=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sh(e,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sh(e,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)},di.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},di.prototype.queryRenderedFeatures=function(e,i,s,p,m,v,w,S,M,P){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:m,scale:v,tileSize:this.tileSize,pixelPosMatrix:P,transform:S,params:w,queryPadding:this.queryPadding*M},e,i,s):{}},di.prototype.querySourceFeatures=function(e,i){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var p=s.loadVTLayers(),m=i?i.sourceLayer:"",v=p._geojsonTileLayer||p[m];if(v)for(var w=Ec(i&&i.filter),S=this.tileID.canonical,M=S.z,P=S.x,D=S.y,R={z:M,x:P,y:D},U=0;U<v.length;U++){var F=v.feature(U);if(w.filter(new Or(this.tileID.overscaledZ),F)){var Y=s.getId(F,m),$=new Z0(F,M,P,D,Y);$.tile=R,e.push($)}}}},di.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},di.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},di.prototype.setExpiryData=function(e){var i=this.expirationTime;if(e.cacheControl){var s=mo(e.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var p=Date.now(),m=!1;if(this.expirationTime>p)m=!1;else if(i)if(this.expirationTime<i)m=!0;else{var v=this.expirationTime-i;v?this.expirationTime=p+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},di.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},di.prototype.setFeatureState=function(e,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var s=this.latestFeatureIndex.loadVTLayers();for(var p in this.buckets)if(i.style.hasLayer(p)){var m=this.buckets[p],v=m.layers[0].sourceLayer||"_geojsonTileLayer",w=s[v],S=e[v];if(w&&S&&Object.keys(S).length!==0){m.update(S,w,this.imageAtlas&&this.imageAtlas.patternPositions||{});var M=i&&i.style&&i.style.getLayer(p);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(m)))}}}},di.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},di.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ol.now()},di.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},di.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=ol.now()+e},di.prototype.setDependencies=function(e,i){for(var s={},p=0,m=i;p<m.length;p+=1)s[m[p]]=!0;this.dependencies[e]=s},di.prototype.hasDependency=function(e,i){for(var s=0,p=e;s<p.length;s+=1){var m=this.dependencies[p[s]];if(m){for(var v=0,w=i;v<w.length;v+=1)if(m[w[v]])return!0}}return!1};var Zc=ne.performance;y4.prototype.finish=function(){Zc.mark(this._marks.end);var e=Zc.getEntriesByName(this._marks.measure);return e.length===0&&(Zc.measure(this._marks.measure,this._marks.start,this._marks.end),e=Zc.getEntriesByName(this._marks.measure),Zc.clearMarks(this._marks.start),Zc.clearMarks(this._marks.end),Zc.clearMeasures(this._marks.measure)),e},u.Actor=of,u.AlphaImage=Er,u.CanonicalTileID=Eh,u.CollisionBoxArray=wu,u.Color=Sr,u.DEMData=Pu,u.DataConstantProperty=bt,u.DictionaryCoder=q0,u.EXTENT=8192,u.ErrorEvent=Ue,u.EvaluationParameters=Or,u.Event=ve,u.Evented=fe,u.FeatureIndex=Du,u.FillBucket=Us,u.FillExtrusionBucket=Vs,u.ImageAtlas=gg,u.ImagePosition=L0,u.LineBucket=bo,u.LngLat=Xr,u.LngLatBounds=Hn,u.MercatorCoordinate=Th,u.ONE_EM=24,u.OverscaledTileID=Wn,u.Point=W,u.Point$1=W,u.Properties=_o,u.Protobuf=M0,u.RGBAImage=Fr,u.RequestManager=no,u.RequestPerformance=y4,u.ResourceType=Jl,u.SegmentVector=bn,u.SourceFeatureState=af,u.StructArrayLayout1ui2=_u,u.StructArrayLayout2f1f2i16=ng,u.StructArrayLayout2i4=hu,u.StructArrayLayout3ui6=qn,u.StructArrayLayout4i8=_r,u.SymbolBucket=Ir,u.Texture=Sh,u.Tile=di,u.Transitionable=sa,u.Uniform1f=g,u.Uniform1i=f,u.Uniform2f=x,u.Uniform3f=T,u.Uniform4f=E,u.UniformColor=L,u.UniformMatrix4f=j,u.UnwrappedTileID=f4,u.ValidationError=Ae,u.WritingMode=pa,u.ZoomHistory=Km,u.add=function(e,i,s){return e[0]=i[0]+s[0],e[1]=i[1]+s[1],e[2]=i[2]+s[2],e},u.addDynamicAttributes=Tx,u.asyncAll=function(e,i,s){if(!e.length)return s(null,[]);var p=e.length,m=new Array(e.length),v=null;e.forEach(function(w,S){i(w,function(M,P){M&&(v=M),m[S]=P,--p==0&&s(v,m)})})},u.bezier=Ee,u.bindAll=rn,u.browser=ol,u.cacheEntryPossiblyAdded=function(e){++Ya>Ss&&(e.getActor().send("enforceCacheSizeLimit",al),Ya=0)},u.clamp=pt,u.clearTileCache=function(e){var i=ne.caches.delete("mapbox-tiles");e&&i.catch(e).then(function(){return e()})},u.clipLine=JS,u.clone=function(e){var i=new Tr(16);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},u.clone$1=Rn,u.clone$2=function(e){var i=new Tr(3);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i},u.collisionCircleLayout=fP,u.config=Mn,u.create=function(){var e=new Tr(16);return Tr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},u.create$1=function(){var e=new Tr(9);return Tr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},u.create$2=function(){var e=new Tr(4);return Tr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},u.createCommonjsModule=A,u.createExpression=Oi,u.createLayout=Ei,u.createStyleLayer=function(e){return e.type==="custom"?new ZP(e):new GP[e.type](e)},u.cross=function(e,i,s){var p=i[0],m=i[1],v=i[2],w=s[0],S=s[1],M=s[2];return e[0]=m*M-v*S,e[1]=v*w-p*M,e[2]=p*S-m*w,e},u.deepEqual=function e(i,s){if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(var p=0;p<i.length;p++)if(!e(i[p],s[p]))return!1;return!0}if(typeof i!="object"||i===null||s===null)return i===s;if(typeof s!="object"||Object.keys(i).length!==Object.keys(s).length)return!1;for(var m in i)if(!e(i[m],s[m]))return!1;return!0},u.dot=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]},u.dot$1=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]},u.ease=Ge,u.emitValidationErrors=g0,u.endsWith=qa,u.enforceCacheSizeLimit=function(e){Ts(),Jo&&Jo.then(function(i){i.keys().then(function(s){for(var p=0;p<s.length-e;p++)i.delete(s[p])})})},u.evaluateSizeForFeature=HS,u.evaluateSizeForZoom=WS,u.evaluateVariableOffset=t4,u.evented=bd,u.extend=nt,u.featureFilter=Ec,u.filterObject=il,u.fromRotation=function(e,i){var s=Math.sin(i),p=Math.cos(i);return e[0]=p,e[1]=s,e[2]=0,e[3]=-s,e[4]=p,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},u.getAnchorAlignment=wx,u.getAnchorJustification=Sx,u.getArrayBuffer=B,u.getImage=de,u.getJSON=function(e,i){return N(nt(e,{type:"json"}),i)},u.getRTLTextPluginStatus=oh,u.getReferrer=sl,u.getVideo=function(e,i){var s,p,m=ne.document.createElement("video");m.muted=!0,m.onloadstart=function(){i(null,m)};for(var v=0;v<e.length;v++){var w=ne.document.createElement("source");s=e[v],p=void 0,(p=ne.document.createElement("a")).href=s,p.protocol===ne.document.location.protocol&&p.host===ne.document.location.host||(m.crossOrigin="Anonymous"),w.src=e[v],m.appendChild(w)}return{cancel:function(){}}},u.identity=Xi,u.invert=function(e,i){var s=i[0],p=i[1],m=i[2],v=i[3],w=i[4],S=i[5],M=i[6],P=i[7],D=i[8],R=i[9],U=i[10],F=i[11],Y=i[12],$=i[13],ie=i[14],te=i[15],xe=s*S-p*w,be=s*M-m*w,Te=s*P-v*w,Me=p*M-m*S,Fe=p*P-v*S,Ye=m*P-v*M,it=D*$-R*Y,ft=D*ie-U*Y,tt=D*te-F*Y,gt=R*ie-U*$,at=R*te-F*$,It=U*te-F*ie,Nt=xe*It-be*at+Te*gt+Me*tt-Fe*ft+Ye*it;return Nt?(e[0]=(S*It-M*at+P*gt)*(Nt=1/Nt),e[1]=(m*at-p*It-v*gt)*Nt,e[2]=($*Ye-ie*Fe+te*Me)*Nt,e[3]=(U*Fe-R*Ye-F*Me)*Nt,e[4]=(M*tt-w*It-P*ft)*Nt,e[5]=(s*It-m*tt+v*ft)*Nt,e[6]=(ie*Te-Y*Ye-te*be)*Nt,e[7]=(D*Ye-U*Te+F*be)*Nt,e[8]=(w*at-S*tt+P*it)*Nt,e[9]=(p*tt-s*at-v*it)*Nt,e[10]=(Y*Fe-$*Te+te*xe)*Nt,e[11]=(R*Te-D*Fe-F*xe)*Nt,e[12]=(S*ft-w*gt-M*it)*Nt,e[13]=(s*gt-p*ft+m*it)*Nt,e[14]=($*be-Y*Me-ie*xe)*Nt,e[15]=(D*Me-R*be+U*xe)*Nt,e):null},u.isChar=He,u.isMapboxURL=zo,u.keysDifference=function(e,i){var s=[];for(var p in e)p in i||s.push(p);return s},u.makeRequest=N,u.mapObject=Wl,u.mercatorXfromLng=p4,u.mercatorYfromLat=h4,u.mercatorZfromAltitude=d4,u.mul=In,u.multiply=Pi,u.mvt=Yd,u.normalize=function(e,i){var s=i[0],p=i[1],m=i[2],v=s*s+p*p+m*m;return 0<v&&(v=1/Math.sqrt(v)),e[0]=i[0]*v,e[1]=i[1]*v,e[2]=i[2]*v,e},u.number=_n,u.offscreenCanvasSupported=Es,u.ortho=function(e,i,s,p,m,v,w){var S=1/(i-s),M=1/(p-m),P=1/(v-w);return e[0]=-2*S,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*M,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*P,e[11]=0,e[12]=(i+s)*S,e[13]=(m+p)*M,e[14]=(w+v)*P,e[15]=1,e},u.parseGlyphPBF=function(e){return new M0(e).readFields(TP,[])},u.pbf=M0,u.performSymbolLayout=function(e,i,s,p,m,v,w){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var S=e.layers[0].layout,M=e.layers[0]._unevaluatedLayout._values,P={};if(e.textSizeData.kind==="composite"){var D=e.textSizeData,R=D.maxZoom;P.compositeTextSizes=[M["text-size"].possiblyEvaluate(new Or(D.minZoom),w),M["text-size"].possiblyEvaluate(new Or(R),w)]}if(e.iconSizeData.kind==="composite"){var U=e.iconSizeData,F=U.maxZoom;P.compositeIconSizes=[M["icon-size"].possiblyEvaluate(new Or(U.minZoom),w),M["icon-size"].possiblyEvaluate(new Or(F),w)]}P.layoutTextSize=M["text-size"].possiblyEvaluate(new Or(e.zoom+1),w),P.layoutIconSize=M["icon-size"].possiblyEvaluate(new Or(e.zoom+1),w),P.textMaxSize=M["text-size"].possiblyEvaluate(new Or(18));for(var Y=24*S.get("text-line-height"),$=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",ie=S.get("text-keep-upright"),te=S.get("text-size"),xe=function(){var Me=Te[be],Fe=S.get("text-font").evaluate(Me,{},w).join(","),Ye=te.evaluate(Me,{},w),it=P.layoutTextSize.evaluate(Me,{},w),ft=P.layoutIconSize.evaluate(Me,{},w),tt={horizontal:{},vertical:void 0},gt=Me.text,at=[0,0];if(gt){var It=gt.toString(),Nt=24*S.get("text-letter-spacing").evaluate(Me,{},w),Zt=function(){for(var pr=0,xr=It;pr<xr.length;pr+=1)if(mr=xr[pr].charCodeAt(0),He.Arabic(mr)||He["Arabic Supplement"](mr)||He["Arabic Extended-A"](mr)||He["Arabic Presentation Forms-A"](mr)||He["Arabic Presentation Forms-B"](mr))return;var mr;return 1}()?Nt:0,ir=S.get("text-anchor").evaluate(Me,{},w),Qt=S.get("text-variable-anchor");if(!Qt){var At=S.get("text-radial-offset").evaluate(Me,{},w);at=At?t4(ir,[24*At,Cx]):S.get("text-offset").evaluate(Me,{},w).map(function(pr){return 24*pr})}var Gt=$?"center":S.get("text-justify").evaluate(Me,{},w),kr=S.get("symbol-placement"),cn=kr==="point"?24*S.get("text-max-width").evaluate(Me,{},w):0,fi=function(){e.allowVerticalPlacement&&Mc(It)&&(tt.vertical=P0(gt,i,s,m,Fe,cn,Y,ir,"left",Zt,at,pa.vertical,!0,kr,it,Ye))};if(!$&&Qt){for(var jn=Gt==="auto"?Qt.map(function(pr){return Sx(pr)}):[Gt],an=!1,Cn=0;Cn<jn.length;Cn++){var Ur=jn[Cn];if(!tt.horizontal[Ur])if(an)tt.horizontal[Ur]=tt.horizontal[0];else{var Mi=P0(gt,i,s,m,Fe,cn,Y,"center",Ur,Zt,at,pa.horizontal,!1,kr,it,Ye);Mi&&(an=(tt.horizontal[Ur]=Mi).positionedLines.length===1)}}fi()}else{Gt==="auto"&&(Gt=Sx(ir));var ii=P0(gt,i,s,m,Fe,cn,Y,ir,Gt,Zt,at,pa.horizontal,!1,kr,it,Ye);ii&&(tt.horizontal[Gt]=ii),fi(),Mc(It)&&$&&ie&&(tt.vertical=P0(gt,i,s,m,Fe,cn,Y,ir,Gt,Zt,at,pa.vertical,!1,kr,it,Ye))}}var mi,Co,Ki,Bi,Io,Yn=void 0,Fi=!1;if(Me.icon&&Me.icon.name){var Sn=p[Me.icon.name];Sn&&(mi=m[Me.icon.name],Co=S.get("icon-offset").evaluate(Me,{},w),Ki=wx(S.get("icon-anchor").evaluate(Me,{},w)),Bi=Co[0]-mi.displaySize[0]*Ki.horizontalAlign,Io=Co[1]-mi.displaySize[1]*Ki.verticalAlign,Yn={image:mi,top:Io,bottom:Io+mi.displaySize[1],left:Bi,right:Bi+mi.displaySize[0]},Fi=Sn.sdf,e.sdfIcons===void 0?e.sdfIcons=Sn.sdf:e.sdfIcons!==Sn.sdf&&nn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),Sn.pixelRatio===e.pixelRatio&&S.get("icon-rotate").constantOr(1)===0||(e.iconsNeedLinear=!0))}var Kn=n4(tt.horizontal)||tt.vertical;e.iconsInText=!!Kn&&Kn.iconsInText,(Kn||Yn)&&function(pr,xr,mr,or,Vo,sn,Zs,Na,Gc,Ih,bg){var zu=sn.textMaxSize.evaluate(xr,{});zu===void 0&&(zu=Zs);var sf,ha,Oa,Cg,Hc,Sg,lf,kh,Pl,Wc,Tg,Df,ip,Vg,qo=pr.layers[0].layout,Eg=qo.get("icon-offset").evaluate(xr,{},bg),Yc=n4(mr.horizontal),Ig=Zs/24,Px=pr.tilePixelRatio*Ig,G0=pr.tilePixelRatio*zu/24,H0=pr.tilePixelRatio*Na,W0=pr.tilePixelRatio*qo.get("symbol-spacing"),kg=qo.get("text-padding")*pr.tilePixelRatio,Y0=qo.get("icon-padding")*pr.tilePixelRatio,uf=qo.get("text-max-angle")/180*Math.PI,K0=qo.get("text-rotation-alignment")==="map"&&qo.get("symbol-placement")!=="point",$0=qo.get("icon-rotation-alignment")==="map"&&qo.get("symbol-placement")!=="point",v4=qo.get("symbol-placement"),WP=W0/2,Dx=qo.get("icon-text-fit");function Mg(Zx,ps){ps.x<0||8192<=ps.x||ps.y<0||8192<=ps.y||function(pn,So,Ag,Gs,Mh,Lg,cf,da,Ah,Lh,Nu,Ou,Kc,$c,Dl,Ph,pf,X0,Pg,hf,$i,Xc,L4,zl,YP){var P4,Dh,df,ff,mf,gf=pn.addToLineVertexArray(So,Ag),D4=0,z4=0,N4=0,O4=0,Gx=-1,Hx=-1,Ru={},R4=yh(""),Wx=0,B4=0;if(B4=da._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Wx=(P4=da.layout.get("text-offset").evaluate($i,{},zl).map(function(vv){return 24*vv}))[0],P4[1]):(Wx=24*da.layout.get("text-radial-offset").evaluate($i,{},zl),Cx),pn.allowVerticalPlacement&&Gs.vertical){var F4=da.layout.get("text-rotate").evaluate($i,{},zl)+90;ff=new R0(Ah,So,Lh,Nu,Ou,Gs.vertical,Kc,$c,Dl,F4),cf&&(mf=new R0(Ah,So,Lh,Nu,Ou,cf,pf,X0,Dl,F4))}if(Mh){var Yx=da.layout.get("icon-rotate").evaluate($i,{}),j4=da.layout.get("icon-text-fit")!=="none",U4=QS(Mh,Yx,L4,j4),Kx=cf?QS(cf,Yx,L4,j4):void 0;df=new R0(Ah,So,Lh,Nu,Ou,Mh,pf,X0,!1,Yx),D4=4*U4.length;var V4=pn.iconSizeData,Dg=null;V4.kind==="source"?32640<(Dg=[128*da.layout.get("icon-size").evaluate($i,{})])[0]&&nn(pn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):V4.kind==="composite"&&(32640<(Dg=[128*Xc.compositeIconSizes[0].evaluate($i,{},zl),128*Xc.compositeIconSizes[1].evaluate($i,{},zl)])[0]||32640<Dg[1])&&nn(pn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),pn.addSymbols(pn.icon,U4,Dg,hf,Pg,$i,!1,So,gf.lineStartIndex,gf.lineLength,-1,zl),Gx=pn.icon.placedSymbolArray.length-1,Kx&&(z4=4*Kx.length,pn.addSymbols(pn.icon,Kx,Dg,hf,Pg,$i,pa.vertical,So,gf.lineStartIndex,gf.lineLength,-1,zl),Hx=pn.icon.placedSymbolArray.length-1)}for(var q4 in Gs.horizontal){var J0=Gs.horizontal[q4];if(!Dh){R4=yh(J0.text);var pT=da.layout.get("text-rotate").evaluate($i,{},zl);Dh=new R0(Ah,So,Lh,Nu,Ou,J0,Kc,$c,Dl,pT)}var $x=J0.positionedLines.length===1;if(N4+=r4(pn,So,J0,Lg,da,Dl,$i,Ph,gf,Gs.vertical?pa.horizontal:pa.horizontalOnly,$x?Object.keys(Gs.horizontal):[q4],Ru,Gx,Xc,zl),$x)break}function M2(vv,A9){return vv&&vv.circleDiameter?Math.max(vv.circleDiameter,A9):A9}Gs.vertical&&(O4+=r4(pn,So,Gs.vertical,Lg,da,Dl,$i,Ph,gf,pa.vertical,["vertical"],Ru,Hx,Xc,zl));var KP=Dh?Dh.boxStartIndex:pn.collisionBoxArray.length,$P=Dh?Dh.boxEndIndex:pn.collisionBoxArray.length,XP=ff?ff.boxStartIndex:pn.collisionBoxArray.length,JP=ff?ff.boxEndIndex:pn.collisionBoxArray.length,QP=df?df.boxStartIndex:pn.collisionBoxArray.length,e8=df?df.boxEndIndex:pn.collisionBoxArray.length,t8=mf?mf.boxStartIndex:pn.collisionBoxArray.length,Q0=mf?mf.boxEndIndex:pn.collisionBoxArray.length,qg=-1,yv=-1<(qg=M2(mf,qg=M2(df,qg=M2(ff,qg=M2(Dh,qg)))))?1:0;yv&&(qg*=YP/24),pn.glyphOffsetArray.length>=Ir.MAX_GLYPHS&&nn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$i.sortKey!==void 0&&pn.addToSortKeyRanges(pn.symbolInstances.length,$i.sortKey),pn.symbolInstances.emplaceBack(So.x,So.y,0<=Ru.right?Ru.right:-1,0<=Ru.center?Ru.center:-1,0<=Ru.left?Ru.left:-1,Ru.vertical||-1,Gx,Hx,R4,KP,$P,XP,JP,QP,e8,t8,Q0,Lh,N4,O4,D4,z4,yv,0,Kc,Wx,B4,qg)}(pr,ps,Zx,mr,or,Vo,sf,pr.layers[0],pr.collisionBoxArray,xr.index,xr.sourceLayerIndex,pr.index,Px,kg,K0,Gc,H0,Y0,$0,Eg,xr,sn,Ih,bg,Zs)}if(or&&Dx!=="none"&&(pr.allowVerticalPlacement&&mr.vertical&&(sf=GS(or,mr.vertical,Dx,qo.get("icon-text-fit-padding"),Eg,Ig)),Yc&&(or=GS(or,Yc,Dx,qo.get("icon-text-fit-padding"),Eg,Ig))),v4==="line")for(var zx=0,_4=JS(xr.geometry,0,0,8192,8192);zx<_4.length;zx+=1)for(var x4=_4[zx],Nx=0,w4=(ha=x4,Oa=W0,Cg=uf,Hc=mr.vertical||Yc,Sg=or,lf=24,kh=G0,Pl=pr.overscaling,Wc=8192,Tg=$S(Hc,lf,kh),Df=XS(Hc,Sg),ip=Df*kh,Vg=ha[0].x===0||ha[0].x===Wc||ha[0].y===0||ha[0].y===Wc,Oa-ip<Oa/4&&(Oa=ip+Oa/4),function Zx(ps,pn,So,Ag,Gs,Mh,Lg,cf,da){for(var Ah=Mh/2,Lh=KS(ps),Nu=0,Ou=pn-So,Kc=[],$c=0;$c<ps.length-1;$c++){for(var Dl=ps[$c],Ph=ps[$c+1],pf=Dl.dist(Ph),X0=Ph.angleTo(Dl);Ou+So<Nu+pf;){var Pg=((Ou+=So)-Nu)/pf,hf=_n(Dl.x,Ph.x,Pg),$i=_n(Dl.y,Ph.y,Pg);if(0<=hf&&hf<da&&0<=$i&&$i<da&&0<=Ou-Ah&&Ou+Ah<=Lh){var Xc=new Qd(hf,$i,X0,$c);Xc._round(),Ag&&!YS(ps,Xc,Mh,Ag,Gs)||Kc.push(Xc)}}Nu+=pf}return cf||Kc.length||Lg||(Kc=Zx(ps,Nu/2,So,Ag,Gs,Mh,Lg,!0,da)),Kc}(ha,Vg?Oa/2*Pl%Oa:(Df/2+2*lf)*kh*Pl%Oa,Oa,Tg,Cg,ip,Vg,!1,Wc));Nx<w4.length;Nx+=1){var b4=w4[Nx];Yc&&zP(pr,Yc.text,WP,b4)||Mg(x4,b4)}else if(v4==="line-center")for(var Ox=0,C4=xr.geometry;Ox<C4.length;Ox+=1){var Rx=C4[Ox];if(1<Rx.length){var S4=AP(Rx,uf,mr.vertical||Yc,or,24,G0);S4&&Mg(Rx,S4)}}else if(xr.type==="Polygon")for(var Bx=0,T4=gx(xr.geometry,0);Bx<T4.length;Bx+=1){var E4=T4[Bx],I4=PP(E4,16);Mg(E4[0],new Qd(I4.x,I4.y,0))}else if(xr.type==="LineString")for(var Fx=0,k4=xr.geometry;Fx<k4.length;Fx+=1){var jx=k4[Fx];Mg(jx,new Qd(jx[0].x,jx[0].y,0))}else if(xr.type==="Point")for(var Ux=0,M4=xr.geometry;Ux<M4.length;Ux+=1)for(var Vx=0,A4=M4[Ux];Vx<A4.length;Vx+=1){var qx=A4[Vx];Mg([qx],new Qd(qx.x,qx.y,0))}}(e,Me,tt,Yn,p,P,it,ft,at,Fi,w)},be=0,Te=e.features;be<Te.length;be+=1)xe();v&&e.generateCollisionDebugBuffers()},u.perspective=function(e,i,s,p,m){var v,w=1/Math.tan(i/2);return e[0]=w/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=w,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,m!=null&&m!==1/0?(e[10]=(m+p)*(v=1/(p-m)),e[14]=2*m*p*v):(e[10]=-1,e[14]=-2*p),e},u.pick=function(e,i){for(var s={},p=0;p<i.length;p++){var m=i[p];m in e&&(s[m]=e[m])}return s},u.plugin=No,u.polygonIntersectsPolygon=mt,u.postMapLoadEvent=pc,u.postTurnstileEvent=rr,u.potpack=US,u.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],u.register=yt,u.registerForPluginStateChange=function(e){return e({pluginStatus:lo,pluginURL:_l}),bd.on("pluginStateChange",e),e},u.rotate=function(e,i,s){var p=i[0],m=i[1],v=i[2],w=i[3],S=Math.sin(s),M=Math.cos(s);return e[0]=p*M+v*S,e[1]=m*M+w*S,e[2]=p*-S+v*M,e[3]=m*-S+w*M,e},u.rotateX=function(e,i,s){var p=Math.sin(s),m=Math.cos(s),v=i[4],w=i[5],S=i[6],M=i[7],P=i[8],D=i[9],R=i[10],U=i[11];return i!==e&&(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[4]=v*m+P*p,e[5]=w*m+D*p,e[6]=S*m+R*p,e[7]=M*m+U*p,e[8]=P*m-v*p,e[9]=D*m-w*p,e[10]=R*m-S*p,e[11]=U*m-M*p,e},u.rotateZ=function(e,i,s){var p=Math.sin(s),m=Math.cos(s),v=i[0],w=i[1],S=i[2],M=i[3],P=i[4],D=i[5],R=i[6],U=i[7];return i!==e&&(e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=v*m+P*p,e[1]=w*m+D*p,e[2]=S*m+R*p,e[3]=M*m+U*p,e[4]=P*m-v*p,e[5]=D*m-w*p,e[6]=R*m-S*p,e[7]=U*m-M*p,e},u.scale=function(e,i,s){var p=s[0],m=s[1],v=s[2];return e[0]=i[0]*p,e[1]=i[1]*p,e[2]=i[2]*p,e[3]=i[3]*p,e[4]=i[4]*m,e[5]=i[5]*m,e[6]=i[6]*m,e[7]=i[7]*m,e[8]=i[8]*v,e[9]=i[9]*v,e[10]=i[10]*v,e[11]=i[11]*v,e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},u.scale$1=function(e,i,s){return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=i[3]*s,e},u.scale$2=function(e,i,s){return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e},u.setCacheLimits=function(e,i){al=e,Ss=i},u.setRTLTextPlugin=function(e,i,s){if(s===void 0&&(s=!1),lo==="deferred"||lo==="loading"||lo==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");_l=ol.resolveURL(e),lo="deferred",xd=i,wd(),s||eg()},u.sphericalToCartesian=function(e){var i=e[0],s=e[1],p=e[2];return s+=90,s*=Math.PI/180,p*=Math.PI/180,{x:i*Math.cos(s)*Math.sin(p),y:i*Math.sin(s)*Math.sin(p),z:i*Math.cos(p)}},u.sqrLen=function(e){var i=e[0],s=e[1];return i*i+s*s},u.styleSpec=ce,u.sub=function(e,i,s){return e[0]=i[0]-s[0],e[1]=i[1]-s[1],e[2]=i[2]-s[2],e},u.symbolSize=MP,u.transformMat3=function(e,i,s){var p=i[0],m=i[1],v=i[2];return e[0]=p*s[0]+m*s[3]+v*s[6],e[1]=p*s[1]+m*s[4]+v*s[7],e[2]=p*s[2]+m*s[5]+v*s[8],e},u.transformMat4=Di,u.translate=function(e,i,s){var p,m,v,w,S,M,P,D,R,U,F,Y,$=s[0],ie=s[1],te=s[2];return i===e?(e[12]=i[0]*$+i[4]*ie+i[8]*te+i[12],e[13]=i[1]*$+i[5]*ie+i[9]*te+i[13],e[14]=i[2]*$+i[6]*ie+i[10]*te+i[14],e[15]=i[3]*$+i[7]*ie+i[11]*te+i[15]):(m=i[1],v=i[2],w=i[3],S=i[4],M=i[5],P=i[6],D=i[7],R=i[8],U=i[9],F=i[10],Y=i[11],e[0]=p=i[0],e[1]=m,e[2]=v,e[3]=w,e[4]=S,e[5]=M,e[6]=P,e[7]=D,e[8]=R,e[9]=U,e[10]=F,e[11]=Y,e[12]=p*$+S*ie+R*te+i[12],e[13]=m*$+M*ie+U*te+i[13],e[14]=v*$+P*ie+F*te+i[14],e[15]=w*$+D*ie+Y*te+i[15]),e},u.triggerPluginCompletionEvent=Qm,u.uniqueId=tn,u.validateCustomStyleLayer=function(e){var i=[],s=e.id;return s===void 0&&i.push({message:"layers."+s+': missing required property "id"'}),e.render===void 0&&i.push({message:"layers."+s+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&i.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),i},u.validateLight=ux,u.validateStyle=th,u.values=function(e){var i=[];for(var s in e)i.push(e[s]);return i},u.vectorTile=Yd,u.version="1.11.1",u.warnOnce=nn,u.webpSupported=Kl,u.window=ne,u.wrap=Wt}),a(0,function(u){function A(N){var B=typeof N;if(B=="number"||B=="boolean"||B=="string"||N==null)return JSON.stringify(N);if(Array.isArray(N)){for(var q="[",J=0,le=N;J<le.length;J+=1)q+=A(le[J])+",";return q+"]"}for(var de=Object.keys(N).sort(),we="{",ge=0;ge<de.length;ge++)we+=JSON.stringify(de[ge])+":"+A(N[de[ge]])+",";return we+"}"}function k(N){for(var B="",q=0,J=u.refProperties;q<J.length;q+=1)B+="/"+A(N[J[q]]);return B}function G(N){this.keyCache={},N&&this.replace(N)}function W(N){var B={},q=[];for(var J in N){var le=N[J],de=B[J]={};for(var we in le){var ge=le[+we];if(ge&&ge.bitmap.width!==0&&ge.bitmap.height!==0){var ve={x:0,y:0,w:ge.bitmap.width+2,h:ge.bitmap.height+2};q.push(ve),de[we]={rect:ve,metrics:ge.metrics}}}}var fe=u.potpack(q),Pe=new u.AlphaImage({width:fe.w||1,height:fe.h||1});for(var Ue in N){var Ie=N[Ue];for(var ce in Ie){var Ae=Ie[+ce];if(Ae&&Ae.bitmap.width!==0&&Ae.bitmap.height!==0){var xt=B[Ue][ce].rect;u.AlphaImage.copy(Ae.bitmap,Pe,{x:0,y:0},{x:xt.x+1,y:xt.y+1},Ae.bitmap)}}}this.image=Pe,this.positions=B}function se(N){this.tileID=new u.OverscaledTileID(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId}function ne(N,B,q){for(var J=new u.EvaluationParameters(B),le=0,de=N;le<de.length;le+=1)de[le].recalculate(J,q)}function Ee(N,B){var q=u.getArrayBuffer(N.request,function(J,le,de,we){J?B(J):le&&B(null,{vectorTile:new u.vectorTile.VectorTile(new u.pbf(le)),rawData:le,cacheControl:de,expires:we})});return function(){q.cancel(),B()}}function Ge(N,B,q,J){this.actor=N,this.layerIndex=B,this.availableImages=q,this.loadVectorData=J||Ee,this.loading={},this.loaded={}}function pt(){this.loaded={}}G.prototype.replace=function(N){this._layerConfigs={},this._layers={},this.update(N,[])},G.prototype.update=function(N,B){for(var q=this,J=0,le=N;J<le.length;J+=1){var de=le[J];this._layerConfigs[de.id]=de;var we=this._layers[de.id]=u.createStyleLayer(de);we._featureFilter=u.featureFilter(we.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(var ge=0,ve=B;ge<ve.length;ge+=1){var fe=ve[ge];delete this.keyCache[fe],delete this._layerConfigs[fe],delete this._layers[fe]}this.familiesBySource={};for(var Pe=0,Ue=function(Pt,Dt){for(var $t={},Ft=0;Ft<Pt.length;Ft++){var nr=Dt&&Dt[Pt[Ft].id]||k(Pt[Ft]);Dt&&(Dt[Pt[Ft].id]=nr);var Cr=$t[nr];(Cr=Cr||($t[nr]=[])).push(Pt[Ft])}var je=[];for(var Ct in $t)je.push($t[Ct]);return je}(u.values(this._layerConfigs),this.keyCache);Pe<Ue.length;Pe+=1){var Ie=Ue[Pe].map(function(Pt){return q._layers[Pt.id]}),ce=Ie[0];if(ce.visibility!=="none"){var Ae=ce.source||"",xt=this.familiesBySource[Ae];xt=xt||(this.familiesBySource[Ae]={});var wt=ce.sourceLayer||"_geojsonTileLayer",vt=xt[wt];(vt=vt||(xt[wt]=[])).push(Ie)}}},u.register("GlyphAtlas",W),se.prototype.parse=function(N,B,q,J,le){var de=this;this.status="parsing",this.data=N,this.collisionBoxArray=new u.CollisionBoxArray;var we=new u.DictionaryCoder(Object.keys(N.layers).sort()),ge=new u.FeatureIndex(this.tileID,this.promoteId);ge.bucketLayerIDs=[];var ve,fe,Pe,Ue,Ie={},ce={featureIndex:ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:q},Ae=B.familiesBySource[this.source];for(var xt in Ae){var wt=N.layers[xt];if(wt){wt.version===1&&u.warnOnce('Vector tile source "'+this.source+'" layer "'+xt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var vt=we.encode(xt),Pt=[],Dt=0;Dt<wt.length;Dt++){var $t=wt.feature(Dt),Ft=ge.getId($t,xt);Pt.push({feature:$t,id:Ft,index:Dt,sourceLayerIndex:vt})}for(var nr=0,Cr=Ae[xt];nr<Cr.length;nr+=1){var je=Cr[nr],Ct=je[0];Ct.minzoom&&this.zoom<Math.floor(Ct.minzoom)||Ct.maxzoom&&this.zoom>=Ct.maxzoom||Ct.visibility!=="none"&&(ne(je,this.zoom,q),(Ie[Ct.id]=Ct.createBucket({index:ge.bucketLayerIDs.length,layers:je,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vt,sourceID:this.source})).populate(Pt,ce,this.tileID.canonical),ge.bucketLayerIDs.push(je.map(function(vn){return vn.id})))}}}var kt=u.mapObject(ce.glyphDependencies,function(vn){return Object.keys(vn).map(Number)});Object.keys(kt).length?J.send("getGlyphs",{uid:this.uid,stacks:kt},function(vn,Wr){ve||(ve=vn,fe=Wr,Vt.call(de))}):fe={};var Ci=Object.keys(ce.iconDependencies);Ci.length?J.send("getImages",{icons:Ci,source:this.source,tileID:this.tileID,type:"icons"},function(vn,Wr){ve||(ve=vn,Pe=Wr,Vt.call(de))}):Pe={};var Qo=Object.keys(ce.patternDependencies);function Vt(){if(ve)return le(ve);if(fe&&Pe&&Ue){var vn=new W(fe),Wr=new u.ImageAtlas(Pe,Ue);for(var Ql in Ie){var Bn=Ie[Ql];Bn instanceof u.SymbolBucket?(ne(Bn.layers,this.zoom,q),u.performSymbolLayout(Bn,fe,vn.positions,Pe,Wr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Bn.hasPattern&&(Bn instanceof u.LineBucket||Bn instanceof u.FillBucket||Bn instanceof u.FillExtrusionBucket)&&(ne(Bn.layers,this.zoom,q),Bn.addFeatures(ce,this.tileID.canonical,Wr.patternPositions))}this.status="done",le(null,{buckets:u.values(Ie).filter(function(on){return!on.isEmpty()}),featureIndex:ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vn.image,imageAtlas:Wr,glyphMap:this.returnDependencies?fe:null,iconMap:this.returnDependencies?Pe:null,glyphPositions:this.returnDependencies?vn.positions:null})}}Qo.length?J.send("getImages",{icons:Qo,source:this.source,tileID:this.tileID,type:"patterns"},function(vn,Wr){ve||(ve=vn,Ue=Wr,Vt.call(de))}):Ue={},Vt.call(this)},Ge.prototype.loadTile=function(N,B){var q=this,J=N.uid;this.loading||(this.loading={});var le=!!(N&&N.request&&N.request.collectResourceTiming)&&new u.RequestPerformance(N.request),de=this.loading[J]=new se(N);de.abort=this.loadVectorData(N,function(we,ge){if(delete q.loading[J],we||!ge)return de.status="done",q.loaded[J]=de,B(we);var ve=ge.rawData,fe={};ge.expires&&(fe.expires=ge.expires),ge.cacheControl&&(fe.cacheControl=ge.cacheControl);var Pe={};if(le){var Ue=le.finish();Ue&&(Pe.resourceTiming=JSON.parse(JSON.stringify(Ue)))}de.vectorTile=ge.vectorTile,de.parse(ge.vectorTile,q.layerIndex,q.availableImages,q.actor,function(Ie,ce){if(Ie||!ce)return B(Ie);B(null,u.extend({rawTileData:ve.slice(0)},ce,fe,Pe))}),q.loaded=q.loaded||{},q.loaded[J]=de})},Ge.prototype.reloadTile=function(N,B){var q=this,J=this.loaded,le=N.uid,de=this;if(J&&J[le]){var we=J[le];we.showCollisionBoxes=N.showCollisionBoxes;var ge=function(ve,fe){var Pe=we.reloadCallback;Pe&&(delete we.reloadCallback,we.parse(we.vectorTile,de.layerIndex,q.availableImages,de.actor,Pe)),B(ve,fe)};we.status==="parsing"?we.reloadCallback=ge:we.status==="done"&&(we.vectorTile?we.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor,ge):ge())}},Ge.prototype.abortTile=function(N,B){var q=this.loading,J=N.uid;q&&q[J]&&q[J].abort&&(q[J].abort(),delete q[J]),B()},Ge.prototype.removeTile=function(N,B){var q=this.loaded,J=N.uid;q&&q[J]&&delete q[J],B()};var Wt=u.window.ImageBitmap;function nt(N,B){if(N.length!==0){qt(N[0],B);for(var q=1;q<N.length;q++)qt(N[q],!B)}}function qt(N,B){for(var q=0,J=0,le=N.length,de=le-1;J<le;de=J++)q+=(N[J][0]-N[de][0])*(N[de][1]+N[J][1]);0<=q!=!!B&&N.reverse()}function tn(N){this._feature=N,this.extent=u.EXTENT,this.type=N.type,this.properties=N.tags,"id"in N&&!isNaN(N.id)&&(this.id=parseInt(N.id,10))}pt.prototype.loadTile=function(N,B){var q=N.uid,J=N.encoding,le=N.rawImageData,de=Wt&&le instanceof Wt?this.getImageData(le):le,we=new u.DEMData(q,de,J);this.loaded=this.loaded||{},B(null,this.loaded[q]=we)},pt.prototype.getImageData=function(N){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(N.width,N.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=N.width,this.offscreenCanvas.height=N.height,this.offscreenCanvasContext.drawImage(N,0,0,N.width,N.height);var B=this.offscreenCanvasContext.getImageData(-1,-1,N.width+2,N.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new u.RGBAImage({width:B.width,height:B.height},B.data)},pt.prototype.removeTile=function(N){var B=this.loaded,q=N.uid;B&&B[q]&&delete B[q]};var ho=u.vectorTile.VectorTileFeature.prototype.toGeoJSON;tn.prototype.loadGeometry=function(){if(this._feature.type===1){for(var N=[],B=0,q=this._feature.geometry;B<q.length;B+=1){var J=q[B];N.push([new u.Point$1(J[0],J[1])])}return N}for(var le=[],de=0,we=this._feature.geometry;de<we.length;de+=1){for(var ge=[],ve=0,fe=we[de];ve<fe.length;ve+=1){var Pe=fe[ve];ge.push(new u.Point$1(Pe[0],Pe[1]))}le.push(ge)}return le},tn.prototype.toGeoJSON=function(N,B,q){return ho.call(this,N,B,q)};var un=function(N){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.EXTENT,this.length=N.length,this._features=N};un.prototype.feature=function(N){return new tn(this._features[N])};var rn=u.vectorTile.VectorTileFeature,qa=Wl;function Wl(N,B){this.options=B||{},this.features=N,this.length=N.length}function il(N,B){this.id=typeof N.id=="number"?N.id:void 0,this.type=N.type,this.rawGeometry=N.type===1?[N.geometry]:N.geometry,this.properties=N.tags,this.extent=B||4096}Wl.prototype.feature=function(N){return new il(this.features[N],this.options.extent)},il.prototype.loadGeometry=function(){var N=this.rawGeometry;this.geometry=[];for(var B=0;B<N.length;B++){for(var q=N[B],J=[],le=0;le<q.length;le++)J.push(new u.Point$1(q[le][0],q[le][1]));this.geometry.push(J)}return this.geometry},il.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var N=this.geometry,B=1/0,q=-1/0,J=1/0,le=-1/0,de=0;de<N.length;de++)for(var we=N[de],ge=0;ge<we.length;ge++){var ve=we[ge];B=Math.min(B,ve.x),q=Math.max(q,ve.x),J=Math.min(J,ve.y),le=Math.max(le,ve.y)}return[B,J,q,le]},il.prototype.toGeoJSON=rn.prototype.toGeoJSON;var Rn=nn,sc=qa;function nn(N){var B=new u.pbf;return function(q,J){for(var le in q.layers)J.writeMessage(3,fo,q.layers[le])}(N,B),B.finish()}function fo(N,B){var q;B.writeVarintField(15,N.version||1),B.writeStringField(1,N.name||""),B.writeVarintField(5,N.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<N.length;q++)J.feature=N.feature(q),B.writeMessage(2,zm,J);var le=J.keys;for(q=0;q<le.length;q++)B.writeStringField(3,le[q]);var de=J.values;for(q=0;q<de.length;q++)B.writeMessage(4,Yl,de[q])}function zm(N,B){var q=N.feature;q.id!==void 0&&B.writeVarintField(1,q.id),B.writeMessage(2,lc,N),B.writeVarintField(3,q.type),B.writeMessage(4,Op,q)}function lc(N,B){var q=N.feature,J=N.keys,le=N.values,de=N.keycache,we=N.valuecache;for(var ge in q.properties){var ve=de[ge];ve===void 0&&(J.push(ge),de[ge]=ve=J.length-1),B.writeVarint(ve);var fe=q.properties[ge],Pe=typeof fe;Pe!="string"&&Pe!="boolean"&&Pe!="number"&&(fe=JSON.stringify(fe));var Ue=Pe+":"+fe,Ie=we[Ue];Ie===void 0&&(le.push(fe),we[Ue]=Ie=le.length-1),B.writeVarint(Ie)}}function mo(N,B){return(B<<3)+(7&N)}function wa(N){return N<<1^N>>31}function Op(N,B){for(var q=N.loadGeometry(),J=N.type,le=0,de=0,we=q.length,ge=0;ge<we;ge++){var ve=q[ge],fe=1;J===1&&(fe=ve.length),B.writeVarint(mo(1,fe));for(var Pe=J===3?ve.length-1:ve.length,Ue=0;Ue<Pe;Ue++){Ue===1&&J!==1&&B.writeVarint(mo(2,Pe-1));var Ie=ve[Ue].x-le,ce=ve[Ue].y-de;B.writeVarint(wa(Ie)),B.writeVarint(wa(ce)),le+=Ie,de+=ce}J===3&&B.writeVarint(15)}}function Yl(N,B){var q=typeof N;q=="string"?B.writeStringField(1,N):q=="boolean"?B.writeBooleanField(7,N):q=="number"&&(N%1!=0?B.writeDoubleField(3,N):N<0?B.writeSVarintField(6,N):B.writeVarintField(5,N))}function Ko(N,B,q,J){Za(N,q,J),Za(B,2*q,2*J),Za(B,2*q+1,2*J+1)}function Za(N,B,q){var J=N[B];N[B]=N[q],N[q]=J}function $o(N,B,q,J){var le=N-q,de=B-J;return le*le+de*de}function ba(N){return N[0]}function uc(N){return N[1]}function Ga(N,B,q,J,le){B===void 0&&(B=ba),q===void 0&&(q=uc),J===void 0&&(J=64),le===void 0&&(le=Float64Array),this.nodeSize=J;for(var de=(this.points=N).length<65536?Uint16Array:Uint32Array,we=this.ids=new de(N.length),ge=this.coords=new le(2*N.length),ve=0;ve<N.length;ve++)ge[2*(we[ve]=ve)]=B(N[ve]),ge[2*ve+1]=q(N[ve]);(function fe(Pe,Ue,Ie,ce,Ae,xt){if(!(Ae-ce<=Ie)){var wt=ce+Ae>>1;(function vt(Pt,Dt,$t,Ft,nr,Cr){for(;Ft<nr;){if(600<nr-Ft){var je=nr-Ft+1,Ct=$t-Ft+1,kt=Math.log(je),Ci=.5*Math.exp(2*kt/3),Qo=.5*Math.sqrt(kt*Ci*(je-Ci)/je)*(Ct-je/2<0?-1:1);vt(Pt,Dt,$t,Math.max(Ft,Math.floor($t-Ct*Ci/je+Qo)),Math.min(nr,Math.floor($t+(je-Ct)*Ci/je+Qo)),Cr)}var Vt=Dt[2*$t+Cr],vn=Ft,Wr=nr;for(Ko(Pt,Dt,Ft,$t),Dt[2*nr+Cr]>Vt&&Ko(Pt,Dt,Ft,nr);vn<Wr;){for(Ko(Pt,Dt,vn,Wr),vn++,Wr--;Dt[2*vn+Cr]<Vt;)vn++;for(;Dt[2*Wr+Cr]>Vt;)Wr--}Dt[2*Ft+Cr]===Vt?Ko(Pt,Dt,Ft,Wr):Ko(Pt,Dt,++Wr,nr),Wr<=$t&&(Ft=Wr+1),$t<=Wr&&(nr=Wr-1)}})(Pe,Ue,wt,ce,Ae,xt%2),fe(Pe,Ue,Ie,ce,wt-1,xt+1),fe(Pe,Ue,Ie,1+wt,Ae,xt+1)}})(we,ge,J,0,we.length-1,0)}function Jn(N){this.options=Xo(Object.create(ol),N),this.trees=new Array(this.options.maxZoom+1)}Rn.fromVectorTileJs=nn,Rn.fromGeojsonVt=function(N,B){B=B||{};var q={};for(var J in N)q[J]=new qa(N[J].features,B),q[J].name=J,q[J].version=B.version,q[J].extent=B.extent;return nn({layers:q})},Rn.GeoJSONWrapper=sc,Ga.prototype.range=function(N,B,q,J){return function(le,de,we,ge,ve,fe,Pe){for(var Ue,Ie,ce=[0,le.length-1,0],Ae=[];ce.length;){var xt=ce.pop(),wt=ce.pop(),vt=ce.pop();if(wt-vt<=Pe)for(var Pt=vt;Pt<=wt;Pt++)Ie=de[2*Pt+1],(Ue=de[2*Pt])>=we&&Ue<=ve&&ge<=Ie&&Ie<=fe&&Ae.push(le[Pt]);else{var Dt=Math.floor((vt+wt)/2);Ie=de[2*Dt+1],(Ue=de[2*Dt])>=we&&Ue<=ve&&ge<=Ie&&Ie<=fe&&Ae.push(le[Dt]);var $t=(xt+1)%2;(xt===0?we<=Ue:ge<=Ie)&&(ce.push(vt),ce.push(Dt-1),ce.push($t)),(xt===0?Ue<=ve:Ie<=fe)&&(ce.push(Dt+1),ce.push(wt),ce.push($t))}}return Ae}(this.ids,this.coords,N,B,q,J,this.nodeSize)};var ol={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!(Ga.prototype.within=function(N,B,q){return function(J,le,de,we,ge,ve){for(var fe=[0,J.length-1,0],Pe=[],Ue=ge*ge;fe.length;){var Ie=fe.pop(),ce=fe.pop(),Ae=fe.pop();if(ce-Ae<=ve)for(var xt=Ae;xt<=ce;xt++)$o(le[2*xt],le[2*xt+1],de,we)<=Ue&&Pe.push(J[xt]);else{var wt=Math.floor((Ae+ce)/2),vt=le[2*wt],Pt=le[2*wt+1];$o(vt,Pt,de,we)<=Ue&&Pe.push(J[wt]);var Dt=(Ie+1)%2;(Ie===0?de-ge<=vt:we-ge<=Pt)&&(fe.push(Ae),fe.push(wt-1),fe.push(Dt)),(Ie===0?vt<=de+ge:Pt<=we+ge)&&(fe.push(wt+1),fe.push(ce),fe.push(Dt))}}return Pe}(this.ids,this.coords,N,B,q,this.nodeSize)}),generateId:!1,reduce:null,map:function(N){return N}};function Mn(N){return{type:"Feature",id:N.id,properties:Kl(N),geometry:{type:"Point",coordinates:[360*(N.x-.5),(B=(180-360*N.y)*Math.PI/180,360*Math.atan(Math.exp(B))/Math.PI-90)]}};var B}function Kl(N){var B=N.numPoints,q=1e4<=B?Math.round(B/1e3)+"k":1e3<=B?Math.round(B/100)/10+"k":B;return Xo(Xo({},N.properties),{cluster:!0,cluster_id:N.id,point_count:B,point_count_abbreviated:q})}function $l(N){return N/360+.5}function bs(N){var B=Math.sin(N*Math.PI/180),q=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return q<0?0:1<q?1:q}function Xo(N,B){for(var q in B)N[q]=B[q];return N}function no(N){return N.x}function Rp(N){return N.y}function zo(N,B,q,J,le,de){var we=le-q,ge=de-J;if(we!==0||ge!==0){var ve=((N-q)*we+(B-J)*ge)/(we*we+ge*ge);1<ve?(q=le,J=de):0<ve&&(q+=we*ve,J+=ge*ve)}return(we=N-q)*we+(ge=B-J)*ge}function zi(N,B,q,J){var le={id:N===void 0?null:N,type:B,geometry:q,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(de){var we=de.geometry,ge=de.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")Qn(de,we);else if(ge==="Polygon"||ge==="MultiLineString")for(var ve=0;ve<we.length;ve++)Qn(de,we[ve]);else if(ge==="MultiPolygon")for(ve=0;ve<we.length;ve++)for(var fe=0;fe<we[ve].length;fe++)Qn(de,we[ve][fe])}(le),le}function Qn(N,B){for(var q=0;q<B.length;q+=3)N.minX=Math.min(N.minX,B[q]),N.minY=Math.min(N.minY,B[q+1]),N.maxX=Math.max(N.maxX,B[q]),N.maxY=Math.max(N.maxY,B[q+1])}function Ni(N,B,q,J){if(B.geometry){var le=B.geometry.coordinates,de=B.geometry.type,we=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),ge=[],ve=B.id;if(q.promoteId?ve=B.properties[q.promoteId]:q.generateId&&(ve=J||0),de==="Point")Hr(le,ge);else if(de==="MultiPoint")for(var fe=0;fe<le.length;fe++)Hr(le[fe],ge);else if(de==="LineString")go(le,ge,we,!1);else if(de==="MultiLineString"){if(q.lineMetrics){for(fe=0;fe<le.length;fe++)go(le[fe],ge=[],we,!1),N.push(zi(ve,"LineString",ge,B.properties));return}bi(le,ge,we,!1)}else if(de==="Polygon")bi(le,ge,we,!0);else{if(de!=="MultiPolygon"){if(de!=="GeometryCollection")throw new Error("Input data is not a valid GeoJSON object.");for(fe=0;fe<B.geometry.geometries.length;fe++)Ni(N,{id:ve,geometry:B.geometry.geometries[fe],properties:B.properties},q,J);return}for(fe=0;fe<le.length;fe++){var Pe=[];bi(le[fe],Pe,we,!0),ge.push(Pe)}}N.push(zi(ve,de,ge,B.properties))}}function Hr(N,B){B.push(An(N[0])),B.push(Jo(N[1])),B.push(0)}function go(N,B,q,J){for(var le,de,we=0,ge=0;ge<N.length;ge++){var ve=An(N[ge][0]),fe=Jo(N[ge][1]);B.push(ve),B.push(fe),B.push(0),0<ge&&(we+=J?(le*fe-ve*de)/2:Math.sqrt(Math.pow(ve-le,2)+Math.pow(fe-de,2))),le=ve,de=fe}var Pe=B.length-3;B[2]=1,function Ue(Ie,ce,Ae,xt){for(var wt,vt=xt,Pt=Ae-ce>>1,Dt=Ae-ce,$t=Ie[ce],Ft=Ie[ce+1],nr=Ie[Ae],Cr=Ie[Ae+1],je=ce+3;je<Ae;je+=3){var Ct=zo(Ie[je],Ie[je+1],$t,Ft,nr,Cr);if(vt<Ct)wt=je,vt=Ct;else if(Ct===vt){var kt=Math.abs(je-Pt);kt<Dt&&(wt=je,Dt=kt)}}xt<vt&&(3<wt-ce&&Ue(Ie,ce,wt,xt),Ie[wt+2]=vt,3<Ae-wt&&Ue(Ie,wt,Ae,xt))}(B,0,Pe,q),B[2+Pe]=1,B.size=Math.abs(we),B.start=0,B.end=B.size}function bi(N,B,q,J){for(var le=0;le<N.length;le++){var de=[];go(N[le],de,q,J),B.push(de)}}function An(N){return N/360+.5}function Jo(N){var B=Math.sin(N*Math.PI/180),q=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return q<0?0:1<q?1:q}function io(N,B,q,J,le,de,we,ge){if(J/=B,de>=(q/=B)&&we<J)return N;if(we<q||J<=de)return null;for(var ve=[],fe=0;fe<N.length;fe++){var Pe=N[fe],Ue=Pe.geometry,Ie=Pe.type,ce=le===0?Pe.minX:Pe.minY,Ae=le===0?Pe.maxX:Pe.maxY;if(q<=ce&&Ae<J)ve.push(Pe);else if(!(Ae<q||J<=ce)){var xt=[];if(Ie==="Point"||Ie==="MultiPoint")qi(Ue,xt,q,J,le);else if(Ie==="LineString")Ha(Ue,xt,q,J,le,!1,ge.lineMetrics);else if(Ie==="MultiLineString")cc(Ue,xt,q,J,le,!1);else if(Ie==="Polygon")cc(Ue,xt,q,J,le,!0);else if(Ie==="MultiPolygon")for(var wt=0;wt<Ue.length;wt++){var vt=[];cc(Ue[wt],vt,q,J,le,!0),vt.length&&xt.push(vt)}if(xt.length){if(ge.lineMetrics&&Ie==="LineString"){for(wt=0;wt<xt.length;wt++)ve.push(zi(Pe.id,Ie,xt[wt],Pe.tags));continue}Ie!=="LineString"&&Ie!=="MultiLineString"||(xt.length===1?(Ie="LineString",xt=xt[0]):Ie="MultiLineString"),Ie!=="Point"&&Ie!=="MultiPoint"||(Ie=xt.length===3?"Point":"MultiPoint"),ve.push(zi(Pe.id,Ie,xt,Pe.tags))}}}return ve.length?ve:null}function qi(N,B,q,J,le){for(var de=0;de<N.length;de+=3){var we=N[de+le];q<=we&&we<=J&&(B.push(N[de]),B.push(N[de+1]),B.push(N[de+2]))}}function Ha(N,B,q,J,le,de,we){for(var ge,ve,fe=Cs(N),Pe=le===0?Bp:pc,Ue=N.start,Ie=0;Ie<N.length-3;Ie+=3){var ce=N[Ie],Ae=N[Ie+1],xt=N[Ie+2],wt=N[Ie+3],vt=N[Ie+4],Pt=le===0?ce:Ae,Dt=le===0?wt:vt,$t=!1;we&&(ge=Math.sqrt(Math.pow(ce-wt,2)+Math.pow(Ae-vt,2))),Pt<q?q<Dt&&(ve=Pe(fe,ce,Ae,wt,vt,q),we&&(fe.start=Ue+ge*ve)):J<Pt?Dt<J&&(ve=Pe(fe,ce,Ae,wt,vt,J),we&&(fe.start=Ue+ge*ve)):rr(fe,ce,Ae,xt),Dt<q&&q<=Pt&&(ve=Pe(fe,ce,Ae,wt,vt,q),$t=!0),J<Dt&&Pt<=J&&(ve=Pe(fe,ce,Ae,wt,vt,J),$t=!0),!de&&$t&&(we&&(fe.end=Ue+ge*ve),B.push(fe),fe=Cs(N)),we&&(Ue+=ge)}var Ft=N.length-3;ce=N[Ft],Ae=N[Ft+1],xt=N[Ft+2],(Pt=le===0?ce:Ae)>=q&&Pt<=J&&rr(fe,ce,Ae,xt),Ft=fe.length-3,de&&3<=Ft&&(fe[Ft]!==fe[0]||fe[Ft+1]!==fe[1])&&rr(fe,fe[0],fe[1],fe[2]),fe.length&&B.push(fe)}function Cs(N){var B=[];return B.size=N.size,B.start=N.start,B.end=N.end,B}function cc(N,B,q,J,le,de){for(var we=0;we<N.length;we++)Ha(N[we],B,q,J,le,de,!1)}function rr(N,B,q,J){N.push(B),N.push(q),N.push(J)}function Bp(N,B,q,J,le,de){var we=(de-B)/(J-B);return N.push(de),N.push(q+(le-q)*we),N.push(1),we}function pc(N,B,q,J,le,de){var we=(de-q)/(le-q);return N.push(B+(J-B)*we),N.push(de),N.push(1),we}function al(N,B){for(var q=[],J=0;J<N.length;J++){var le,de=N[J],we=de.type;if(we==="Point"||we==="MultiPoint"||we==="LineString")le=Ss(de.geometry,B);else if(we==="MultiLineString"||we==="Polygon"){le=[];for(var ge=0;ge<de.geometry.length;ge++)le.push(Ss(de.geometry[ge],B))}else if(we==="MultiPolygon")for(le=[],ge=0;ge<de.geometry.length;ge++){for(var ve=[],fe=0;fe<de.geometry[ge].length;fe++)ve.push(Ss(de.geometry[ge][fe],B));le.push(ve)}q.push(zi(de.id,we,le,de.tags))}return q}function Ss(N,B){var q=[];q.size=N.size,N.start!==void 0&&(q.start=N.start,q.end=N.end);for(var J=0;J<N.length;J+=3)q.push(N[J]+B,N[J+1],N[J+2]);return q}function Ca(N,B){if(N.transformed)return N;var q,J,le,de=1<<N.z,we=N.x,ge=N.y;for(q=0;q<N.features.length;q++){var ve=N.features[q],fe=ve.geometry,Pe=ve.type;if(ve.geometry=[],Pe===1)for(J=0;J<fe.length;J+=2)ve.geometry.push(Sa(fe[J],fe[J+1],B,de,we,ge));else for(J=0;J<fe.length;J++){var Ue=[];for(le=0;le<fe[J].length;le+=2)Ue.push(Sa(fe[J][le],fe[J][le+1],B,de,we,ge));ve.geometry.push(Ue)}}return N.transformed=!0,N}function Sa(N,B,q,J,le,de){return[Math.round(q*(N*J-le)),Math.round(q*(B*J-de))]}function Ts(N,B,q,J,le){for(var de=B===le.maxZoom?0:le.tolerance/((1<<B)*le.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:J,z:B,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ge=0;ge<N.length;ge++){we.numFeatures++,Xl(we,N[ge],de,le);var ve=N[ge].minX,fe=N[ge].minY,Pe=N[ge].maxX,Ue=N[ge].maxY;ve<we.minX&&(we.minX=ve),fe<we.minY&&(we.minY=fe),Pe>we.maxX&&(we.maxX=Pe),Ue>we.maxY&&(we.maxY=Ue)}return we}function Xl(N,B,q,J){var le=B.geometry,de=B.type,we=[];if(de==="Point"||de==="MultiPoint")for(var ge=0;ge<le.length;ge+=3)we.push(le[ge]),we.push(le[ge+1]),N.numPoints++,N.numSimplified++;else if(de==="LineString")Wa(we,le,N,q,!1,!1);else if(de==="MultiLineString"||de==="Polygon")for(ge=0;ge<le.length;ge++)Wa(we,le[ge],N,q,de==="Polygon",ge===0);else if(de==="MultiPolygon")for(var ve=0;ve<le.length;ve++){var fe=le[ve];for(ge=0;ge<fe.length;ge++)Wa(we,fe[ge],N,q,!0,ge===0)}if(we.length){var Pe=B.tags||null;if(de==="LineString"&&J.lineMetrics){for(var Ue in Pe={},B.tags)Pe[Ue]=B.tags[Ue];Pe.mapbox_clip_start=le.start/le.size,Pe.mapbox_clip_end=le.end/le.size}var Ie={geometry:we,type:de==="Polygon"||de==="MultiPolygon"?3:de==="LineString"||de==="MultiLineString"?2:1,tags:Pe};B.id!==null&&(Ie.id=B.id),N.features.push(Ie)}}function Wa(N,B,q,J,le,de){var we=J*J;if(0<J&&B.size<(le?we:J))q.numPoints+=B.length/3;else{for(var ge=[],ve=0;ve<B.length;ve+=3)(J===0||B[ve+2]>we)&&(q.numSimplified++,ge.push(B[ve]),ge.push(B[ve+1])),q.numPoints++;le&&function(fe,Pe){for(var Ue=0,Ie=0,ce=fe.length,Ae=ce-2;Ie<ce;Ae=Ie,Ie+=2)Ue+=(fe[Ie]-fe[Ae])*(fe[Ie+1]+fe[Ae+1]);if(0<Ue===Pe)for(Ie=0,ce=fe.length;Ie<ce/2;Ie+=2){var xt=fe[Ie],wt=fe[Ie+1];fe[Ie]=fe[ce-2-Ie],fe[Ie+1]=fe[ce-1-Ie],fe[ce-2-Ie]=xt,fe[ce-1-Ie]=wt}}(ge,de),N.push(ge)}}function Ya(N,B){var q=(B=this.options=function(Pe,Ue){for(var Ie in Ue)Pe[Ie]=Ue[Ie];return Pe}(Object.create(this.options),B)).debug;if(q&&console.time("preprocess data"),B.maxZoom<0||24<B.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(B.promoteId&&B.generateId)throw new Error("promoteId and generateId cannot be used together.");var J,le,de,we,ge,ve,fe=function(Pe,Ue){var Ie=[];if(Pe.type==="FeatureCollection")for(var ce=0;ce<Pe.features.length;ce++)Ni(Ie,Pe.features[ce],Ue,ce);else Ni(Ie,Pe.type==="Feature"?Pe:{geometry:Pe},Ue);return Ie}(N,B);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",B.indexMaxZoom,B.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),J=fe,de=(le=B).buffer/le.extent,ge=io(we=J,1,-1-de,de,0,-1,2,le),ve=io(J,1,1-de,2+de,0,-1,2,le),(ge||ve)&&(we=io(J,1,-de,1+de,0,-1,2,le)||[],ge&&(we=al(ge,1).concat(we)),ve&&(we=we.concat(al(ve,-1)))),(fe=we).length&&this.splitTile(fe,0,0,0),q&&(fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Es(N,B,q){return 32*((1<<N)*q+B)+N}function Jl(N,B){var q=N.tileID.canonical;if(!this._geoJSONIndex)return B(null,null);var J=this._geoJSONIndex.getTile(q.z,q.x,q.y);if(!J)return B(null,null);var le=new un(J.features),de=Rn(le);de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),B(null,{vectorTile:le,rawData:de.buffer})}function Nr(N){var B=this;this.self=N,this.actor=new u.Actor(N,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Ge,geojson:sl},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(q,J){if(B.workerSourceTypes[q])throw new Error('Worker source with name "'+q+'" already registered.');B.workerSourceTypes[q]=J},this.self.registerRTLTextPlugin=function(q){if(u.plugin.isParsed())throw new Error("RTL text plugin already registered.");u.plugin.applyArabicShaping=q.applyArabicShaping,u.plugin.processBidirectionalText=q.processBidirectionalText,u.plugin.processStyledBidirectionalText=q.processStyledBidirectionalText}}Jn.prototype.load=function(N){var B=this.options,q=B.log,J=B.minZoom,le=B.maxZoom,de=B.nodeSize;q&&console.time("total time");var we,ge,ve,fe,Pe="prepare "+N.length+" points";q&&console.time(Pe),this.points=N;for(var Ue=[],Ie=0;Ie<N.length;Ie++)N[Ie].geometry&&Ue.push((we=N[Ie],ge=Ie,ve=we.geometry.coordinates,fe=ve[1],{x:$l(ve[0]),y:bs(fe),zoom:1/0,index:ge,parentId:-1}));this.trees[le+1]=new Ga(Ue,no,Rp,de,Float32Array),q&&console.timeEnd(Pe);for(var ce=le;J<=ce;ce--){var Ae=+Date.now();Ue=this._cluster(Ue,ce),this.trees[ce]=new Ga(Ue,no,Rp,de,Float32Array),q&&console.log("z%d: %d clusters in %dms",ce,Ue.length,Date.now()-Ae)}return q&&console.timeEnd("total time"),this},Jn.prototype.getClusters=function(N,B){var q=((N[0]+180)%360+360)%360-180,J=Math.max(-90,Math.min(90,N[1])),le=N[2]===180?180:((N[2]+180)%360+360)%360-180,de=Math.max(-90,Math.min(90,N[3]));if(360<=N[2]-N[0])q=-180,le=180;else if(le<q){var we=this.getClusters([q,J,180,de],B),ge=this.getClusters([-180,J,le,de],B);return we.concat(ge)}for(var ve=this.trees[this._limitZoom(B)],fe=[],Pe=0,Ue=ve.range($l(q),bs(de),$l(le),bs(J));Pe<Ue.length;Pe+=1){var Ie=ve.points[Ue[Pe]];fe.push(Ie.numPoints?Mn(Ie):this.points[Ie.index])}return fe},Jn.prototype.getChildren=function(N){var B=this._getOriginId(N),q=this._getOriginZoom(N),J="No cluster with the specified id.",le=this.trees[q];if(!le)throw new Error(J);var de=le.points[B];if(!de)throw new Error(J);for(var we=this.options.radius/(this.options.extent*Math.pow(2,q-1)),ge=[],ve=0,fe=le.within(de.x,de.y,we);ve<fe.length;ve+=1){var Pe=le.points[fe[ve]];Pe.parentId===N&&ge.push(Pe.numPoints?Mn(Pe):this.points[Pe.index])}if(ge.length===0)throw new Error(J);return ge},Jn.prototype.getLeaves=function(N,B,q){var J=[];return this._appendLeaves(J,N,B=B||10,q=q||0,0),J},Jn.prototype.getTile=function(N,B,q){var J=this.trees[this._limitZoom(N)],le=Math.pow(2,N),de=this.options,we=de.radius/de.extent,ge=(q-we)/le,ve=(q+1+we)/le,fe={features:[]};return this._addTileFeatures(J.range((B-we)/le,ge,(B+1+we)/le,ve),J.points,B,q,le,fe),B===0&&this._addTileFeatures(J.range(1-we/le,ge,1,ve),J.points,le,q,le,fe),B===le-1&&this._addTileFeatures(J.range(0,ge,we/le,ve),J.points,-1,q,le,fe),fe.features.length?fe:null},Jn.prototype.getClusterExpansionZoom=function(N){for(var B=this._getOriginZoom(N)-1;B<=this.options.maxZoom;){var q=this.getChildren(N);if(B++,q.length!==1)break;N=q[0].properties.cluster_id}return B},Jn.prototype._appendLeaves=function(N,B,q,J,le){for(var de=0,we=this.getChildren(B);de<we.length;de+=1){var ge=we[de],ve=ge.properties;if(ve&&ve.cluster?le+ve.point_count<=J?le+=ve.point_count:le=this._appendLeaves(N,ve.cluster_id,q,J,le):le<J?le++:N.push(ge),N.length===q)break}return le},Jn.prototype._addTileFeatures=function(N,B,q,J,le,de){for(var we=0,ge=N;we<ge.length;we+=1){var ve=B[ge[we]],fe=ve.numPoints,Pe={type:1,geometry:[[Math.round(this.options.extent*(ve.x*le-q)),Math.round(this.options.extent*(ve.y*le-J))]],tags:fe?Kl(ve):this.points[ve.index].properties},Ue=void 0;fe?Ue=ve.id:this.options.generateId?Ue=ve.index:this.points[ve.index].id&&(Ue=this.points[ve.index].id),Ue!==void 0&&(Pe.id=Ue),de.features.push(Pe)}},Jn.prototype._limitZoom=function(N){return Math.max(this.options.minZoom,Math.min(+N,this.options.maxZoom+1))},Jn.prototype._cluster=function(N,B){for(var q=[],J=this.options,le=J.reduce,de=J.minPoints,we=J.radius/(J.extent*Math.pow(2,B)),ge=0;ge<N.length;ge++){var ve=N[ge];if(!(ve.zoom<=B)){ve.zoom=B;for(var fe=this.trees[B+1],Pe=fe.within(ve.x,ve.y,we),Ue=ve.numPoints||1,Ie=Ue,ce=0,Ae=Pe;ce<Ae.length;ce+=1){var xt=fe.points[Ae[ce]];xt.zoom>B&&(Ie+=xt.numPoints||1)}if(de<=Ie){for(var wt=ve.x*Ue,vt=ve.y*Ue,Pt=le&&1<Ue?this._map(ve,!0):null,Dt=(ge<<5)+(B+1)+this.points.length,$t=0,Ft=Pe;$t<Ft.length;$t+=1){var nr=fe.points[Ft[$t]];if(!(nr.zoom<=B)){nr.zoom=B;var Cr=nr.numPoints||1;wt+=nr.x*Cr,vt+=nr.y*Cr,nr.parentId=Dt,le&&le(Pt=Pt||this._map(ve,!0),this._map(nr))}}ve.parentId=Dt,q.push({x:wt/Ie,y:vt/Ie,zoom:1/0,id:Dt,parentId:-1,numPoints:Ie,properties:Pt})}else if(q.push(ve),1<Ie)for(var je=0,Ct=Pe;je<Ct.length;je+=1){var kt=fe.points[Ct[je]];kt.zoom<=B||(kt.zoom=B,q.push(kt))}}}return q},Jn.prototype._getOriginId=function(N){return N-this.points.length>>5},Jn.prototype._getOriginZoom=function(N){return(N-this.points.length)%32},Ya.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!(Jn.prototype._map=function(N,B){if(N.numPoints)return B?Xo({},N.properties):N.properties;var q=this.points[N.index].properties,J=this.options.map(q);return B&&J===q?Xo({},J):J}),promoteId:null,generateId:!1,debug:0},Ya.prototype.splitTile=function(N,B,q,J,le,de,we){for(var ge=[N,B,q,J],ve=this.options,fe=ve.debug;ge.length;){J=ge.pop(),q=ge.pop(),B=ge.pop(),N=ge.pop();var Pe=1<<B,Ue=Es(B,q,J),Ie=this.tiles[Ue];if(!Ie&&(1<fe&&console.time("creation"),Ie=this.tiles[Ue]=Ts(N,B,q,J,ve),this.tileCoords.push({z:B,x:q,y:J}),fe)){1<fe&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",B,q,J,Ie.numFeatures,Ie.numPoints,Ie.numSimplified),console.timeEnd("creation"));var ce="z"+B;this.stats[ce]=(this.stats[ce]||0)+1,this.total++}if(Ie.source=N,le){if(B===ve.maxZoom||B===le)continue;var Ae=1<<le-B;if(q!==Math.floor(de/Ae)||J!==Math.floor(we/Ae))continue}else if(B===ve.indexMaxZoom||Ie.numPoints<=ve.indexMaxPoints)continue;if(Ie.source=null,N.length!==0){1<fe&&console.time("clipping");var xt,wt,vt,Pt,Dt,$t,Ft=.5*ve.buffer/ve.extent,nr=.5-Ft,Cr=.5+Ft,je=1+Ft;xt=wt=vt=Pt=null,Dt=io(N,Pe,q-Ft,q+Cr,0,Ie.minX,Ie.maxX,ve),$t=io(N,Pe,q+nr,q+je,0,Ie.minX,Ie.maxX,ve),N=null,Dt&&(xt=io(Dt,Pe,J-Ft,J+Cr,1,Ie.minY,Ie.maxY,ve),wt=io(Dt,Pe,J+nr,J+je,1,Ie.minY,Ie.maxY,ve),Dt=null),$t&&(vt=io($t,Pe,J-Ft,J+Cr,1,Ie.minY,Ie.maxY,ve),Pt=io($t,Pe,J+nr,J+je,1,Ie.minY,Ie.maxY,ve),$t=null),1<fe&&console.timeEnd("clipping"),ge.push(xt||[],B+1,2*q,2*J),ge.push(wt||[],B+1,2*q,2*J+1),ge.push(vt||[],B+1,2*q+1,2*J),ge.push(Pt||[],B+1,2*q+1,2*J+1)}}},Ya.prototype.getTile=function(N,B,q){var J=this.options,le=J.extent,de=J.debug;if(N<0||24<N)return null;var we=1<<N,ge=Es(N,B=(B%we+we)%we,q);if(this.tiles[ge])return Ca(this.tiles[ge],le);1<de&&console.log("drilling down to z%d-%d-%d",N,B,q);for(var ve,fe=N,Pe=B,Ue=q;!ve&&0<fe;)fe--,Pe=Math.floor(Pe/2),Ue=Math.floor(Ue/2),ve=this.tiles[Es(fe,Pe,Ue)];return ve&&ve.source?(1<de&&console.log("found parent tile z%d-%d-%d",fe,Pe,Ue),1<de&&console.time("drilling down"),this.splitTile(ve.source,fe,Pe,Ue,N,B,q),1<de&&console.timeEnd("drilling down"),this.tiles[ge]?Ca(this.tiles[ge],le):null):null};var Ta,sl=(ei.__proto__=Ta=Ge,((ei.prototype=Object.create(Ta&&Ta.prototype)).constructor=ei).prototype.loadData=function(N,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=B,this._pendingLoadDataParams=N,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ei.prototype._loadData=function(){var N=this;if(this._pendingCallback&&this._pendingLoadDataParams){var B=this._pendingCallback,q=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var J=!!(q&&q.request&&q.request.collectResourceTiming)&&new u.RequestPerformance(q.request);this.loadGeoJSON(q,function(le,de){if(le||!de)return B(le);if(typeof de!="object")return B(new Error("Input data given to '"+q.source+"' is not a valid GeoJSON object."));(function ve(fe,Pe){var Ue,Ie=fe&&fe.type;if(Ie==="FeatureCollection")for(Ue=0;Ue<fe.features.length;Ue++)ve(fe.features[Ue],Pe);else if(Ie==="GeometryCollection")for(Ue=0;Ue<fe.geometries.length;Ue++)ve(fe.geometries[Ue],Pe);else if(Ie==="Feature")ve(fe.geometry,Pe);else if(Ie==="Polygon")nt(fe.coordinates,Pe);else if(Ie==="MultiPolygon")for(Ue=0;Ue<fe.coordinates.length;Ue++)nt(fe.coordinates[Ue],Pe);return fe})(de,!0);try{N._geoJSONIndex=q.cluster?new Jn(function(){var ve=q.superclusterOptions,fe=q.clusterProperties;if(!fe||!ve)return ve;for(var Pe={},Ue={},Ie={accumulated:null,zoom:0},ce={properties:null},Ae=Object.keys(fe),xt=0,wt=Ae;xt<wt.length;xt+=1){var vt=wt[xt],Pt=fe[vt],Dt=Pt[0],$t=u.createExpression(Pt[1]),Ft=u.createExpression(typeof Dt=="string"?[Dt,["accumulated"],["get",vt]]:Dt);Pe[vt]=$t.value,Ue[vt]=Ft.value}return ve.map=function(nr){ce.properties=nr;for(var Cr={},je=0,Ct=Ae;je<Ct.length;je+=1){var kt=Ct[je];Cr[kt]=Pe[kt].evaluate(Ie,ce)}return Cr},ve.reduce=function(nr,Cr){ce.properties=Cr;for(var je=0,Ct=Ae;je<Ct.length;je+=1){var kt=Ct[je];Ie.accumulated=nr[kt],nr[kt]=Ue[kt].evaluate(Ie,ce)}},ve}()).load(de.features):new Ya(de,q.geojsonVtOptions)}catch(ve){return B(ve)}N.loaded={};var we={};if(J){var ge=J.finish();ge&&(we.resourceTiming={},we.resourceTiming[q.source]=JSON.parse(JSON.stringify(ge)))}B(null,we)})}},ei.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ei.prototype.reloadTile=function(N,B){var q=this.loaded;return q&&q[N.uid]?Ta.prototype.reloadTile.call(this,N,B):this.loadTile(N,B)},ei.prototype.loadGeoJSON=function(N,B){if(N.request)u.getJSON(N.request,B);else{if(typeof N.data!="string")return B(new Error("Input data given to '"+N.source+"' is not a valid GeoJSON object."));try{return B(null,JSON.parse(N.data))}catch{return B(new Error("Input data given to '"+N.source+"' is not a valid GeoJSON object."))}}},ei.prototype.removeSource=function(N,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),B()},ei.prototype.getClusterExpansionZoom=function(N,B){try{B(null,this._geoJSONIndex.getClusterExpansionZoom(N.clusterId))}catch(q){B(q)}},ei.prototype.getClusterChildren=function(N,B){try{B(null,this._geoJSONIndex.getChildren(N.clusterId))}catch(q){B(q)}},ei.prototype.getClusterLeaves=function(N,B){try{B(null,this._geoJSONIndex.getLeaves(N.clusterId,N.limit,N.offset))}catch(q){B(q)}},ei);function ei(N,B,q,J){Ta.call(this,N,B,q,Jl),J&&(this.loadGeoJSON=J)}return Nr.prototype.setReferrer=function(N,B){this.referrer=B},Nr.prototype.setImages=function(N,B,q){for(var J in this.availableImages[N]=B,this.workerSources[N]){var le=this.workerSources[N][J];for(var de in le)le[de].availableImages=B}q()},Nr.prototype.setLayers=function(N,B,q){this.getLayerIndex(N).replace(B),q()},Nr.prototype.updateLayers=function(N,B,q){this.getLayerIndex(N).update(B.layers,B.removedIds),q()},Nr.prototype.loadTile=function(N,B,q){this.getWorkerSource(N,B.type,B.source).loadTile(B,q)},Nr.prototype.loadDEMTile=function(N,B,q){this.getDEMWorkerSource(N,B.source).loadTile(B,q)},Nr.prototype.reloadTile=function(N,B,q){this.getWorkerSource(N,B.type,B.source).reloadTile(B,q)},Nr.prototype.abortTile=function(N,B,q){this.getWorkerSource(N,B.type,B.source).abortTile(B,q)},Nr.prototype.removeTile=function(N,B,q){this.getWorkerSource(N,B.type,B.source).removeTile(B,q)},Nr.prototype.removeDEMTile=function(N,B){this.getDEMWorkerSource(N,B.source).removeTile(B)},Nr.prototype.removeSource=function(N,B,q){if(this.workerSources[N]&&this.workerSources[N][B.type]&&this.workerSources[N][B.type][B.source]){var J=this.workerSources[N][B.type][B.source];delete this.workerSources[N][B.type][B.source],J.removeSource!==void 0?J.removeSource(B,q):q()}},Nr.prototype.loadWorkerSource=function(N,B,q){try{this.self.importScripts(B.url),q()}catch(J){q(J.toString())}},Nr.prototype.syncRTLPluginState=function(N,B,q){try{u.plugin.setState(B);var J=u.plugin.getPluginURL();if(u.plugin.isLoaded()&&!u.plugin.isParsed()&&J!=null){this.self.importScripts(J);var le=u.plugin.isParsed();q(le?void 0:new Error("RTL Text Plugin failed to import scripts from "+J),le)}}catch(de){q(de.toString())}},Nr.prototype.getAvailableImages=function(N){var B=this.availableImages[N];return B=B||[]},Nr.prototype.getLayerIndex=function(N){var B=this.layerIndexes[N];return B=B||(this.layerIndexes[N]=new G)},Nr.prototype.getWorkerSource=function(N,B,q){var J=this;return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][B]||(this.workerSources[N][B]={}),this.workerSources[N][B][q]||(this.workerSources[N][B][q]=new this.workerSourceTypes[B]({send:function(le,de,we){J.actor.send(le,de,we,N)}},this.getLayerIndex(N),this.getAvailableImages(N))),this.workerSources[N][B][q]},Nr.prototype.getDEMWorkerSource=function(N,B){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][B]||(this.demWorkerSources[N][B]=new pt),this.demWorkerSources[N][B]},Nr.prototype.enforceCacheSizeLimit=function(N,B){u.enforceCacheSizeLimit(B)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Nr(self)),Nr}),a(0,function(u){var A=u.createCommonjsModule(function(r){function l(x){return!f(x)}function f(x){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if("Worker"in window&&"Blob"in window&&"URL"in window){var E,L,O=new Blob([""],{type:"text/javascript"}),j=URL.createObjectURL(O);try{L=new Worker(j),E=!0}catch{E=!1}return L&&L.terminate(),URL.revokeObjectURL(j),E}}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var L=E.getContext("2d");if(L){var O=L.getImageData(0,0,1,1);return O&&O.width===E.width}}()?(g[T=x&&x.failIfMajorPerformanceCaveat]===void 0&&(g[T]=function(){var E,L,O,j=(E=T,L=document.createElement("canvas"),(O=Object.create(l.webGLContextAttributes)).failIfMajorPerformanceCaveat=E,L.probablySupportsContext?L.probablySupportsContext("webgl",O)||L.probablySupportsContext("experimental-webgl",O):L.supportsContext?L.supportsContext("webgl",O)||L.supportsContext("experimental-webgl",O):L.getContext("webgl",O)||L.getContext("experimental-webgl",O));if(!j)return!1;var V=j.createShader(j.VERTEX_SHADER);return!(!V||j.isContextLost())&&(j.shaderSource(V,"void main() {}"),j.compileShader(V),j.getShaderParameter(V,j.COMPILE_STATUS)===!0)}()),g[T]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var T}r.exports?r.exports=l:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=l,window.mapboxgl.notSupportedReason=f);var g={};l.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),k={create:function(r,l,f){var g=u.window.document.createElement(r);return l!==void 0&&(g.className=l),f&&f.appendChild(g),g},createNS:function(r,l){return u.window.document.createElementNS(r,l)}},G=u.window.document&&u.window.document.documentElement.style;function W(r){if(!G)return r[0];for(var l=0;l<r.length;l++)if(r[l]in G)return r[l];return r[0]}var se,ne=W(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);k.disableDrag=function(){G&&ne&&(se=G[ne],G[ne]="none")},k.enableDrag=function(){G&&ne&&(G[ne]=se)};var Ee=W(["transform","WebkitTransform"]),Ge=!(k.setTransform=function(r,l){r.style[Ee]=l});try{var pt=Object.defineProperty({},"passive",{get:function(){Ge=!0}});u.window.addEventListener("test",pt,pt),u.window.removeEventListener("test",pt,pt)}catch{Ge=!1}k.addEventListener=function(r,l,f,g){g===void 0&&(g={}),r.addEventListener(l,f,"passive"in g&&Ge?g:g.capture)},k.removeEventListener=function(r,l,f,g){g===void 0&&(g={}),r.removeEventListener(l,f,"passive"in g&&Ge?g:g.capture)};var Wt=function(r){r.preventDefault(),r.stopPropagation(),u.window.removeEventListener("click",Wt,!0)};k.suppressClick=function(){u.window.addEventListener("click",Wt,!0),u.window.setTimeout(function(){u.window.removeEventListener("click",Wt,!0)},0)},k.mousePos=function(r,l){var f=r.getBoundingClientRect();return new u.Point(l.clientX-f.left-r.clientLeft,l.clientY-f.top-r.clientTop)},k.touchPos=function(r,l){for(var f=r.getBoundingClientRect(),g=[],x=0;x<l.length;x++)g.push(new u.Point(l[x].clientX-f.left-r.clientLeft,l[x].clientY-f.top-r.clientTop));return g},k.mouseButton=function(r){return u.window.InstallTrigger!==void 0&&r.button===2&&r.ctrlKey&&0<=u.window.navigator.platform.toUpperCase().indexOf("MAC")?0:r.button},k.remove=function(r){r.parentNode&&r.parentNode.removeChild(r)};var nt,qt=((nt=u.Evented)&&(rn.__proto__=nt),((rn.prototype=Object.create(nt&&nt.prototype)).constructor=rn).prototype.isLoaded=function(){return this.loaded},rn.prototype.setLoaded=function(r){if(this.loaded!==r&&(this.loaded=r)){for(var l=0,f=this.requestors;l<f.length;l+=1){var g=f[l];this._notify(g.ids,g.callback)}this.requestors=[]}},rn.prototype.getImage=function(r){return this.images[r]},rn.prototype.addImage=function(r,l){this._validate(r,l)&&(this.images[r]=l)},rn.prototype._validate=function(r,l){var f=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new u.ErrorEvent(new Error('Image "'+r+'" has invalid "stretchX" value'))),f=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new u.ErrorEvent(new Error('Image "'+r+'" has invalid "stretchY" value'))),f=!1),this._validateContent(l.content,l)||(this.fire(new u.ErrorEvent(new Error('Image "'+r+'" has invalid "content" value'))),f=!1),f},rn.prototype._validateStretch=function(r,l){if(!r)return!0;for(var f=0,g=0,x=r;g<x.length;g+=1){var T=x[g];if(T[0]<f||T[1]<T[0]||l<T[1])return!1;f=T[1]}return!0},rn.prototype._validateContent=function(r,l){return!(r&&(r.length!==4||r[0]<0||l.data.width<r[0]||r[1]<0||l.data.height<r[1]||r[2]<0||l.data.width<r[2]||r[3]<0||l.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))},rn.prototype.updateImage=function(r,l){l.version=this.images[r].version+1,this.images[r]=l,this.updatedImages[r]=!0},rn.prototype.removeImage=function(r){var l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()},rn.prototype.listImages=function(){return Object.keys(this.images)},rn.prototype.getImages=function(r,l){var f=!0;if(!this.isLoaded())for(var g=0,x=r;g<x.length;g+=1)this.images[x[g]]||(f=!1);this.isLoaded()||f?this._notify(r,l):this.requestors.push({ids:r,callback:l})},rn.prototype._notify=function(r,l){for(var f={},g=0,x=r;g<x.length;g+=1){var T=x[g];this.images[T]||this.fire(new u.Event("styleimagemissing",{id:T}));var E=this.images[T];E?f[T]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:Boolean(E.userImage&&E.userImage.render)}:u.warnOnce('Image "'+T+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}l(null,f)},rn.prototype.getPixelSize=function(){var r=this.atlasImage;return{width:r.width,height:r.height}},rn.prototype.getPattern=function(r){var l=this.patterns[r],f=this.getImage(r);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{var g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},x=new u.ImagePosition(g,f);this.patterns[r]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[r].position},rn.prototype.bind=function(r){var l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new u.Texture(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)},rn.prototype._updatePatternAtlas=function(){var r=[];for(var l in this.patterns)r.push(this.patterns[l].bin);var f=u.potpack(r),g=f.w,x=f.h,T=this.atlasImage;for(var E in T.resize({width:g||1,height:x||1}),this.patterns){var L=this.patterns[E].bin,O=L.x+1,j=L.y+1,V=this.images[E].data,H=V.width,K=V.height;u.RGBAImage.copy(V,T,{x:0,y:0},{x:O,y:j},{width:H,height:K}),u.RGBAImage.copy(V,T,{x:0,y:K-1},{x:O,y:j-1},{width:H,height:1}),u.RGBAImage.copy(V,T,{x:0,y:0},{x:O,y:j+K},{width:H,height:1}),u.RGBAImage.copy(V,T,{x:H-1,y:0},{x:O-1,y:j},{width:1,height:K}),u.RGBAImage.copy(V,T,{x:0,y:0},{x:O+H,y:j},{width:1,height:K})}this.dirty=!0},rn.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},rn.prototype.dispatchRenderCallbacks=function(r){for(var l=0,f=r;l<f.length;l+=1){var g=f[l];if(!this.callbackDispatchedThisFrame[g]){this.callbackDispatchedThisFrame[g]=!0;var x=this.images[g];E=void 0,(E=(T=x).userImage)&&E.render&&E.render()&&(T.data.replace(new Uint8Array(E.data.buffer)),1)&&this.updateImage(g,x)}}var T,E},rn),tn=qa,ho=qa,un=1e20;function rn(){nt.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.RGBAImage({width:1,height:1}),this.dirty=!0}function qa(r,l,f,g,x,T){this.fontSize=r||24,this.buffer=l===void 0?3:l,this.cutoff=g||.25,this.fontFamily=x||"sans-serif",this.fontWeight=T||"normal",this.radius=f||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function Wl(r,l,f,g,x,T,E){for(var L=0;L<l;L++){for(var O=0;O<f;O++)g[O]=r[O*l+L];for(il(g,x,T,E,f),O=0;O<f;O++)r[O*l+L]=x[O]}for(O=0;O<f;O++){for(L=0;L<l;L++)g[L]=r[O*l+L];for(il(g,x,T,E,l),L=0;L<l;L++)r[O*l+L]=Math.sqrt(x[L])}}function il(r,l,f,g,x){g[f[0]=0]=-un,g[1]=+un;for(var T=1,E=0;T<x;T++){for(var L=(r[T]+T*T-(r[f[E]]+f[E]*f[E]))/(2*T-2*f[E]);L<=g[E];)E--,L=(r[T]+T*T-(r[f[E]]+f[E]*f[E]))/(2*T-2*f[E]);f[++E]=T,g[E]=L,g[E+1]=+un}for(E=T=0;T<x;T++){for(;g[E+1]<T;)E++;l[T]=(T-f[E])*(T-f[E])+r[f[E]]}}function Rn(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}function sc(){this.specification=u.styleSpec.light.position}function nn(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}qa.prototype.draw=function(r){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(r,this.buffer,this.middle);for(var l=this.ctx.getImageData(0,0,this.size,this.size),f=new Uint8ClampedArray(this.size*this.size),g=0;g<this.size*this.size;g++){var x=l.data[4*g+3]/255;this.gridOuter[g]=x==1?0:x==0?un:Math.pow(Math.max(0,.5-x),2),this.gridInner[g]=x==1?un:x==0?0:Math.pow(Math.max(0,x-.5),2)}for(Wl(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Wl(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),g=0;g<this.size*this.size;g++)f[g]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[g]-this.gridInner[g])/this.radius+this.cutoff))));return f},tn.default=ho,Rn.prototype.setURL=function(r){this.url=r},Rn.prototype.getGlyphs=function(r,l){var f=this,g=[];for(var x in r)for(var T=0,E=r[x];T<E.length;T+=1)g.push({stack:x,id:E[T]});u.asyncAll(g,function(L,O){var j=L.stack,V=L.id,H=f.entries[j],K=(H=H||(f.entries[j]={glyphs:{},requests:{},ranges:{}})).glyphs[V];if(K===void 0){if(K=f._tinySDF(H,j,V))return H.glyphs[V]=K,void O(null,{stack:j,id:V,glyph:K});var Q=Math.floor(V/256);if(65535<256*Q)O(new Error("glyphs > 65535 not supported"));else if(H.ranges[Q])O(null,{stack:j,id:V,glyph:K});else{var ee=H.requests[Q];ee||(ee=H.requests[Q]=[],Rn.loadGlyphRange(j,Q,f.url,f.requestManager,function(re,ue){if(ue){for(var ae in ue)f._doesCharSupportLocalGlyph(+ae)||(H.glyphs[+ae]=ue[+ae]);H.ranges[Q]=!0}for(var ye=0,he=ee;ye<he.length;ye+=1)(0,he[ye])(re,ue);delete H.requests[Q]})),ee.push(function(re,ue){re?O(re):ue&&O(null,{stack:j,id:V,glyph:ue[V]||null})})}}else O(null,{stack:j,id:V,glyph:K})},function(L,O){if(L)l(L);else if(O){for(var j={},V=0,H=O;V<H.length;V+=1){var K=H[V],Q=K.stack,ee=K.id,re=K.glyph;(j[Q]||(j[Q]={}))[ee]=re&&{id:re.id,bitmap:re.bitmap.clone(),metrics:re.metrics}}l(null,j)}})},Rn.prototype._doesCharSupportLocalGlyph=function(r){return!!this.localIdeographFontFamily&&(u.isChar["CJK Unified Ideographs"](r)||u.isChar["Hangul Syllables"](r)||u.isChar.Hiragana(r)||u.isChar.Katakana(r))},Rn.prototype._tinySDF=function(r,l,f){var g=this.localIdeographFontFamily;if(g&&this._doesCharSupportLocalGlyph(f)){var x=r.tinySDF;if(!x){var T="400";/bold/i.test(l)?T="900":/medium/i.test(l)?T="500":/light/i.test(l)&&(T="200"),x=r.tinySDF=new Rn.TinySDF(24,3,8,.25,g,T)}return{id:f,bitmap:new u.AlphaImage({width:30,height:30},x.draw(String.fromCharCode(f))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Rn.loadGlyphRange=function(r,l,f,g,x){var T=256*l,E=255+T,L=g.transformRequest(g.normalizeGlyphsURL(f).replace("{fontstack}",r).replace("{range}",T+"-"+E),u.ResourceType.Glyphs);u.getArrayBuffer(L,function(O,j){if(O)x(O);else if(j){for(var V={},H=0,K=u.parseGlyphPBF(j);H<K.length;H+=1){var Q=K[H];V[Q.id]=Q}x(null,V)}})},Rn.TinySDF=tn,sc.prototype.possiblyEvaluate=function(r,l){return u.sphericalToCartesian(r.expression.evaluate(l))},sc.prototype.interpolate=function(r,l,f){return{x:u.number(r.x,l.x,f),y:u.number(r.y,l.y,f),z:u.number(r.z,l.z,f)}};var fo,zm=new u.Properties({anchor:new u.DataConstantProperty(u.styleSpec.light.anchor),position:new sc,color:new u.DataConstantProperty(u.styleSpec.light.color),intensity:new u.DataConstantProperty(u.styleSpec.light.intensity)}),lc=((fo=u.Evented)&&(mo.__proto__=fo),((mo.prototype=Object.create(fo&&fo.prototype)).constructor=mo).prototype.getLight=function(){return this._transitionable.serialize()},mo.prototype.setLight=function(r,l){if(l===void 0&&(l={}),!this._validate(u.validateLight,r,l))for(var f in r){var g=r[f];u.endsWith(f,"-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}},mo.prototype.updateTransitions=function(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)},mo.prototype.hasTransition=function(){return this._transitioning.hasTransition()},mo.prototype.recalculate=function(r){this.properties=this._transitioning.possiblyEvaluate(r)},mo.prototype._validate=function(r,l,f){return(!f||f.validate!==!1)&&u.emitValidationErrors(this,r.call(u.validateStyle,u.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.styleSpec})))},mo);function mo(r){fo.call(this),this._transitionable=new u.Transitionable(zm),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}function wa(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=u.uniqueId();for(var f=this.workerPool.acquire(this.id),g=0;g<f.length;g++){var x=new wa.Actor(f[g],l,this.id);x.name="Worker "+g,this.actors.push(x)}}function Op(r,l,f){function g(x,T){if(x)return f(x);if(T){var E=u.pick(u.extend(T,r),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);T.vector_layers&&(E.vectorLayers=T.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(L){return L.id})),E.tiles=l.canonicalizeTileset(E,r.url),f(null,E)}}return r.url?u.getJSON(l.transformRequest(l.normalizeSourceURL(r.url),u.ResourceType.Source),g):u.browser.frame(function(){return g(null,r)})}function Yl(r,l,f){this.bounds=u.LngLatBounds.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=f||24}nn.prototype.getDash=function(r,l){var f=r.join(",")+String(l);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,l)),this.dashEntry[f]},nn.prototype.getDashRanges=function(r,l,f){var g=[],x=r.length%2==1?-r[r.length-1]*f:0,T=r[0]*f,E=!0;g.push({left:x,right:T,isDash:E,zeroLength:r[0]===0});for(var L=r[0],O=1;O<r.length;O++){var j=r[O];g.push({left:x=L*f,right:T=(L+=j)*f,isDash:E=!E,zeroLength:j===0})}return g},nn.prototype.addRoundDash=function(r,l,f){for(var g=l/2,x=-f;x<=f;x++)for(var T=this.width*(this.nextRow+f+x),E=0,L=r[E],O=0;O<this.width;O++){1<O/L.right&&(L=r[++E]);var j=Math.abs(O-L.left),V=Math.abs(O-L.right),H=Math.min(j,V),K=void 0,Q=x/f*(1+g);if(L.isDash){var ee=g-Math.abs(Q);K=Math.sqrt(H*H+ee*ee)}else K=g-Math.sqrt(H*H+Q*Q);this.data[T+O]=Math.max(0,Math.min(255,K+128))}},nn.prototype.addRegularDash=function(r){for(var l=r.length-1;0<=l;--l){var f=r[l],g=r[l+1];f.zeroLength?r.splice(l,1):g&&g.isDash===f.isDash&&(g.left=f.left,r.splice(l,1))}var x=r[0],T=r[r.length-1];x.isDash===T.isDash&&(x.left=T.left-this.width,T.right=x.right+this.width);for(var E=this.width*this.nextRow,L=0,O=r[L],j=0;j<this.width;j++){1<j/O.right&&(O=r[++L]);var V=Math.abs(j-O.left),H=Math.abs(j-O.right),K=Math.min(V,H);this.data[E+j]=Math.max(0,Math.min(255,(O.isDash?K:-K)+128))}},nn.prototype.addDash=function(r,l){var f=l?7:0,g=2*f+1;if(this.nextRow+g>this.height)return u.warnOnce("LineAtlas out of space"),null;for(var x=0,T=0;T<r.length;T++)x+=r[T];if(x!==0){var E=this.width/x,L=this.getDashRanges(r,this.width,E);l?this.addRoundDash(L,E,f):this.addRegularDash(L)}var O={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:x};return this.nextRow+=g,this.dirty=!0,O},nn.prototype.bind=function(r){var l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))},wa.prototype.broadcast=function(r,l,f){u.asyncAll(this.actors,function(g,x){g.send(r,l,x)},f=f||function(){})},wa.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},wa.prototype.remove=function(){this.actors.forEach(function(r){r.remove()}),this.actors=[],this.workerPool.release(this.id)},wa.Actor=u.Actor,Yl.prototype.validateBounds=function(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]},Yl.prototype.contains=function(r){var l=Math.pow(2,r.z),f=Math.floor(u.mercatorXfromLng(this.bounds.getWest())*l),g=Math.floor(u.mercatorYfromLat(this.bounds.getNorth())*l),x=Math.ceil(u.mercatorXfromLng(this.bounds.getEast())*l),T=Math.ceil(u.mercatorYfromLat(this.bounds.getSouth())*l);return r.x>=f&&r.x<x&&r.y>=g&&r.y<T};var Ko,Za,$o,ba,uc,Ga,Jn,ol=((Jn=u.Evented)&&(An.__proto__=Jn),((An.prototype=Object.create(Jn&&Jn.prototype)).constructor=An).prototype.load=function(){var r=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Op(this._options,this.map._requestManager,function(l,f){r._tileJSONRequest=null,r._loaded=!0,l?r.fire(new u.ErrorEvent(l)):f&&(u.extend(r,f),f.bounds&&(r.tileBounds=new Yl(f.bounds,r.minzoom,r.maxzoom)),u.postTurnstileEvent(f.tiles,r.map._requestManager._customAccessToken),u.postMapLoadEvent(f.tiles,r.map._getMapId(),r.map._requestManager._skuToken,r.map._requestManager._customAccessToken),r.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})},An.prototype.loaded=function(){return this._loaded},An.prototype.hasTile=function(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)},An.prototype.onAdd=function(r){this.map=r,this.load()},An.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},An.prototype.serialize=function(){return u.extend({},this._options)},An.prototype.loadTile=function(r,l){var f=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(f,u.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:u.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(T,E){return delete r.request,r.aborted?l(null):T&&T.status!==404?l(T):(E&&E.resourceTiming&&(r.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&E&&r.setExpiryData(E),r.loadVectorData(E,this.map.painter),u.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=l:r.request=r.actor.send("reloadTile",g,x.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",g,x.bind(this)))},An.prototype.abortTile=function(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)},An.prototype.unloadTile=function(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)},An.prototype.hasTransition=function(){return!1},An),Mn=((Ga=u.Evented)&&(bi.__proto__=Ga),((bi.prototype=Object.create(Ga&&Ga.prototype)).constructor=bi).prototype.load=function(){var r=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Op(this._options,this.map._requestManager,function(l,f){r._tileJSONRequest=null,r._loaded=!0,l?r.fire(new u.ErrorEvent(l)):f&&(u.extend(r,f),f.bounds&&(r.tileBounds=new Yl(f.bounds,r.minzoom,r.maxzoom)),u.postTurnstileEvent(f.tiles),u.postMapLoadEvent(f.tiles,r.map._getMapId(),r.map._requestManager._skuToken),r.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})},bi.prototype.loaded=function(){return this._loaded},bi.prototype.onAdd=function(r){this.map=r,this.load()},bi.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},bi.prototype.serialize=function(){return u.extend({},this._options)},bi.prototype.hasTile=function(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)},bi.prototype.loadTile=function(r,l){var f=this,g=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);r.request=u.getImage(this.map._requestManager.transformRequest(g,u.ResourceType.Tile),function(x,T){if(delete r.request,r.aborted)r.state="unloaded",l(null);else if(x)r.state="errored",l(x);else if(T){f.map._refreshExpiredTiles&&r.setExpiryData(T),delete T.cacheControl,delete T.expires;var E=f.map.painter.context,L=E.gl;r.texture=f.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new u.Texture(E,T,L.RGBA,{useMipmap:!0}),r.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),E.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax)),r.state="loaded",u.cacheEntryPossiblyAdded(f.dispatcher),l(null)}})},bi.prototype.abortTile=function(r,l){r.request&&(r.request.cancel(),delete r.request),l()},bi.prototype.unloadTile=function(r,l){r.texture&&this.map.painter.saveTileTexture(r.texture),l()},bi.prototype.hasTransition=function(){return!1},bi),Kl=(go.__proto__=uc=Mn,((go.prototype=Object.create(uc&&uc.prototype)).constructor=go).prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},go.prototype.loadTile=function(r,l){var f=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);r.request=u.getImage(this.map._requestManager.transformRequest(f,u.ResourceType.Tile),function(g,x){if(delete r.request,r.aborted)r.state="unloaded",l(null);else if(g)r.state="errored",l(g);else if(x){this.map._refreshExpiredTiles&&r.setExpiryData(x),delete x.cacheControl,delete x.expires;var T=u.window.ImageBitmap&&x instanceof u.window.ImageBitmap&&u.offscreenCanvasSupported()?x:u.browser.getImageData(x,1),E={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:T,encoding:this.encoding};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",E,function(L,O){L&&(r.state="errored",l(L)),O&&(r.dem=O,r.needsHillshadePrepare=!0,r.state="loaded",l(null))}.bind(this)))}}.bind(this)),r.neighboringTiles=this._getNeighboringTiles(r.tileID)},go.prototype._getNeighboringTiles=function(r){var l=r.canonical,f=Math.pow(2,l.z),g=(l.x-1+f)%f,x=l.x===0?r.wrap-1:r.wrap,T=(l.x+1+f)%f,E=l.x+1===f?r.wrap+1:r.wrap,L={};return L[new u.OverscaledTileID(r.overscaledZ,x,l.z,g,l.y).key]={backfilled:!1},L[new u.OverscaledTileID(r.overscaledZ,E,l.z,T,l.y).key]={backfilled:!1},0<l.y&&(L[new u.OverscaledTileID(r.overscaledZ,x,l.z,g,l.y-1).key]={backfilled:!1},L[new u.OverscaledTileID(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},L[new u.OverscaledTileID(r.overscaledZ,E,l.z,T,l.y-1).key]={backfilled:!1}),l.y+1<f&&(L[new u.OverscaledTileID(r.overscaledZ,x,l.z,g,l.y+1).key]={backfilled:!1},L[new u.OverscaledTileID(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},L[new u.OverscaledTileID(r.overscaledZ,E,l.z,T,l.y+1).key]={backfilled:!1}),L},go.prototype.unloadTile=function(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})},go),$l=((ba=u.Evented)&&(Hr.__proto__=ba),((Hr.prototype=Object.create(ba&&ba.prototype)).constructor=Hr).prototype.load=function(){var r=this;this.fire(new u.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(l){if(l)r.fire(new u.ErrorEvent(l));else{var f={dataType:"source",sourceDataType:"metadata"};r._collectResourceTiming&&r._resourceTiming&&0<r._resourceTiming.length&&(f.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new u.Event("data",f))}})},Hr.prototype.onAdd=function(r){this.map=r,this.load()},Hr.prototype.setData=function(r){var l=this;return this._data=r,this.fire(new u.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(f){if(f)l.fire(new u.ErrorEvent(f));else{var g={dataType:"source",sourceDataType:"content"};l._collectResourceTiming&&l._resourceTiming&&0<l._resourceTiming.length&&(g.resourceTiming=l._resourceTiming,l._resourceTiming=[]),l.fire(new u.Event("data",g))}}),this},Hr.prototype.getClusterExpansionZoom=function(r,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},l),this},Hr.prototype.getClusterChildren=function(r,l){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},l),this},Hr.prototype.getClusterLeaves=function(r,l,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:l,offset:f},g),this},Hr.prototype._updateWorkerData=function(r){var l=this;this._loaded=!1;var f=u.extend({},this.workerOptions),g=this._data;typeof g=="string"?(f.request=this.map._requestManager.transformRequest(u.browser.resolveURL(g),u.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(g),this.actor.send(this.type+".loadData",f,function(x,T){l._removed||T&&T.abandoned||(l._loaded=!0,T&&T.resourceTiming&&T.resourceTiming[l.id]&&(l._resourceTiming=T.resourceTiming[l.id].slice(0)),l.actor.send(l.type+".coalesce",{source:f.source},null),r(x))})},Hr.prototype.loaded=function(){return this._loaded},Hr.prototype.loadTile=function(r,l){var f=this,g=r.actor?"reloadTile":"loadTile";r.actor=this.actor,r.request=this.actor.send(g,{type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:u.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(x,T){return delete r.request,r.unloadVectorData(),r.aborted?l(null):x?l(x):(r.loadVectorData(T,f.map.painter,g=="reloadTile"),l(null))})},Hr.prototype.abortTile=function(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0},Hr.prototype.unloadTile=function(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})},Hr.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Hr.prototype.serialize=function(){return u.extend({},this._options,{type:this.type,data:this._data})},Hr.prototype.hasTransition=function(){return!1},Hr),bs=u.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Xo=(($o=u.Evented)&&(Ni.__proto__=$o),((Ni.prototype=Object.create($o&&$o.prototype)).constructor=Ni).prototype.load=function(r,l){var f=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this.url=this.options.url,u.getImage(this.map._requestManager.transformRequest(this.url,u.ResourceType.Image),function(g,x){f._loaded=!0,g?f.fire(new u.ErrorEvent(g)):x&&(f.image=x,r&&(f.coordinates=r),l&&l(),f._finishLoading())})},Ni.prototype.loaded=function(){return this._loaded},Ni.prototype.updateImage=function(r){var l=this;return this.image&&r.url&&(this.options.url=r.url,this.load(r.coordinates,function(){l.texture=null})),this},Ni.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Ni.prototype.onAdd=function(r){this.map=r,this.load()},Ni.prototype.setCoordinates=function(r){var l=this,f=(this.coordinates=r).map(u.MercatorCoordinate.fromLngLat);this.tileID=function(){for(var x=1/0,T=1/0,E=-1/0,L=-1/0,O=0,j=f;O<j.length;O+=1){var V=j[O];x=Math.min(x,V.x),T=Math.min(T,V.y),E=Math.max(E,V.x),L=Math.max(L,V.y)}var H=Math.max(E-x,L-T),K=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),Q=Math.pow(2,K);return new u.CanonicalTileID(K,Math.floor((x+E)/2*Q),Math.floor((T+L)/2*Q))}(),this.minzoom=this.maxzoom=this.tileID.z;var g=f.map(function(x){return l.tileID.getTilePoint(x)._round()});return this._boundsArray=new u.StructArrayLayout4i8,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,u.EXTENT,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,u.EXTENT),this._boundsArray.emplaceBack(g[2].x,g[2].y,u.EXTENT,u.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})),this},Ni.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var r=this.map.painter.context,l=r.gl;for(var f in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,bs.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new u.Texture(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[f];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},Ni.prototype.loadTile=function(r,l){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r).buckets={}:r.state="errored",l(null)},Ni.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Ni.prototype.hasTransition=function(){return!1},Ni),no=(Qn.__proto__=Za=Xo,((Qn.prototype=Object.create(Za&&Za.prototype)).constructor=Qn).prototype.load=function(){var r=this;this._loaded=!1;var l=this.options;this.urls=[];for(var f=0,g=l.urls;f<g.length;f+=1)this.urls.push(this.map._requestManager.transformRequest(g[f],u.ResourceType.Source).url);u.getVideo(this.urls,function(x,T){r._loaded=!0,x?r.fire(new u.ErrorEvent(x)):T&&(r.video=T,r.video.loop=!0,r.video.addEventListener("playing",function(){r.map.triggerRepaint()}),r.map&&r.video.play(),r._finishLoading())})},Qn.prototype.pause=function(){this.video&&this.video.pause()},Qn.prototype.play=function(){this.video&&this.video.play()},Qn.prototype.seek=function(r){if(this.video){var l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new u.ErrorEvent(new u.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+l.start(0)+" and "+l.end(0)+"-second mark."))):this.video.currentTime=r}},Qn.prototype.getVideo=function(){return this.video},Qn.prototype.onAdd=function(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Qn.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var r=this.map.painter.context,l=r.gl;for(var f in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,bs.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new u.Texture(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[f];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},Qn.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Qn.prototype.hasTransition=function(){return this.video&&!this.video.paused},Qn),Rp=(zi.__proto__=Ko=Xo,((zi.prototype=Object.create(Ko&&Ko.prototype)).constructor=zi).prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof u.window.HTMLCanvasElement?this.options.canvas:u.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},zi.prototype.getCanvas=function(){return this.canvas},zi.prototype.onAdd=function(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()},zi.prototype.onRemove=function(){this.pause()},zi.prototype.prepare=function(){var r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var l=this.map.painter.context,f=l.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,bs.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new u.Texture(l,this.canvas,f.RGBA,{premultiply:!0}),this.tiles){var x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture)}}},zi.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},zi.prototype.hasTransition=function(){return this._playing},zi.prototype._hasInvalidDimensions=function(){for(var r=0,l=[this.canvas.width,this.canvas.height];r<l.length;r+=1){var f=l[r];if(isNaN(f)||f<=0)return!0}return!1},zi),zo={vector:ol,raster:Mn,"raster-dem":Kl,geojson:$l,video:no,image:Xo,canvas:Rp};function zi(r,l,f,g){Ko.call(this,r,l,f,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(function(x){return!Array.isArray(x)||x.length!==2||x.some(function(T){return typeof T!="number"})})||this.fire(new u.ErrorEvent(new u.ValidationError("sources."+r,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.ErrorEvent(new u.ValidationError("sources."+r,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.ErrorEvent(new u.ValidationError("sources."+r,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof u.window.HTMLCanvasElement||this.fire(new u.ErrorEvent(new u.ValidationError("sources."+r,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.ErrorEvent(new u.ValidationError("sources."+r,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}function Qn(r,l,f,g){Za.call(this,r,l,f,g),this.roundZoom=!0,this.type="video",this.options=l}function Ni(r,l,f,g){$o.call(this),this.id=r,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l}function Hr(r,l,f,g){ba.call(this),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(g),this._data=l.data,this._options=u.extend({},l),this._collectResourceTiming=l.collectResourceTiming,this._resourceTiming=[],l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;var x=u.EXTENT/this.tileSize;this.workerOptions=u.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*x,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*x,extent:u.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?Math.min(l.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.EXTENT,radius:(l.clusterRadius||50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties},l.workerOptions)}function go(r,l,f,g){uc.call(this,r,l,f,g),this.type="raster-dem",this.maxzoom=22,this._options=u.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}function bi(r,l,f,g){Ga.call(this),this.id=r,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.extend({type:"raster"},l),u.extend(this,u.pick(l,["url","scheme","tileSize"]))}function An(r,l,f,g){if(Jn.call(this),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.extend(this,u.pick(l,["url","scheme","tileSize","promoteId"])),this._options=u.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}function Jo(r,l,f,g,x,T){var E,L,O,j=function(ye,he,me){if(ye)for(var Ce=0,ke=ye;Ce<ke.length;Ce+=1){var De=he[ke[Ce]];if(De&&De.source===me&&De.type==="fill-extrusion")return!0}else for(var Ve in he){var qe=he[Ve];if(qe.source===me&&qe.type==="fill-extrusion")return!0}return!1}(x&&x.layers,l,r.id),V=T.maxPitchScaleFactor(),H=r.tilesIn(g,V,j);H.sort(io);for(var K=[],Q=0,ee=H;Q<ee.length;Q+=1){var re=ee[Q];K.push({wrappedTileID:re.tileID.wrapped().key,queryResults:re.tile.queryRenderedFeatures(l,f,r._state,re.queryGeometry,re.cameraQueryGeometry,re.scale,x,T,V,(E=r.transform,L=re.tileID,O=u.identity([]),u.translate(O,O,[1,1,0]),u.scale(O,O,[.5*E.width,.5*E.height,1]),u.multiply(O,O,E.calculatePosMatrix(L.toUnwrapped()))))})}var ue=function(){for(var ye={},he={},me=0,Ce=K;me<Ce.length;me+=1){var ke=Ce[me],De=ke.queryResults,Ve=ke.wrappedTileID,qe=he[Ve]=he[Ve]||{};for(var Ke in De)for(var lt=De[Ke],ht=qe[Ke]=qe[Ke]||{},dt=ye[Ke]=ye[Ke]||[],Tt=0,mt=lt;Tt<mt.length;Tt+=1){var Mt=mt[Tt];ht[Mt.featureIndex]||(ht[Mt.featureIndex]=!0,dt.push(Mt))}}return ye}();for(var ae in ue)ue[ae].forEach(function(ye){var he=ye.feature,me=r.getFeatureState(he.layer["source-layer"],he.id);he.source=he.layer.source,he.layer["source-layer"]&&(he.sourceLayer=he.layer["source-layer"]),he.state=me});return ue}function io(r,l){var f=r.tileID,g=l.tileID;return f.overscaledZ-g.overscaledZ||f.canonical.y-g.canonical.y||f.wrap-g.wrap||f.canonical.x-g.canonical.x}function qi(r,l){this.max=r,this.onRemove=l,this.reset()}function Ha(r,l,f){var g=(this.context=r).gl;this.buffer=g.createBuffer(),this.dynamicDraw=Boolean(f),this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}function Cs(r,l,f,g){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=g;var x=(this.context=r).gl;this.buffer=x.createBuffer(),r.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}qi.prototype.reset=function(){for(var r in this.data)for(var l=0,f=this.data[r];l<f.length;l+=1){var g=f[l];g.timeout&&clearTimeout(g.timeout),this.onRemove(g.value)}return this.data={},this.order=[],this},qi.prototype.add=function(r,l,f){var g=this,x=r.wrapped().key;this.data[x]===void 0&&(this.data[x]=[]);var T={value:l,timeout:void 0};if(f!==void 0&&(T.timeout=setTimeout(function(){g.remove(r,T)},f)),this.data[x].push(T),this.order.push(x),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},qi.prototype.has=function(r){return r.wrapped().key in this.data},qi.prototype.getAndRemove=function(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null},qi.prototype._getAndRemoveByKey=function(r){var l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value},qi.prototype.getByKey=function(r){var l=this.data[r];return l?l[0].value:null},qi.prototype.get=function(r){return this.has(r)?this.data[r.wrapped().key][0].value:null},qi.prototype.remove=function(r,l){if(!this.has(r))return this;var f=r.wrapped().key,g=l===void 0?0:this.data[f].indexOf(l),x=this.data[f][g];return this.data[f].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this},qi.prototype.setMaxSize=function(r){for(this.max=r;this.order.length>this.max;){var l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this},qi.prototype.filter=function(r){var l=[];for(var f in this.data)for(var g=0,x=this.data[f];g<x.length;g+=1){var T=x[g];r(T.value)||l.push(T)}for(var E=0,L=l;E<L.length;E+=1){var O=L[E];this.remove(O.value.tileID,O)}},Ha.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ha.prototype.updateData=function(r){var l=this.context.gl;this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)},Ha.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var cc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};function rr(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}function Bp(r,l,f,g){this.context=r,this.width=l,this.height=f;var x=this.framebuffer=r.gl.createFramebuffer();this.colorAttachment=new oo(r,x),g&&(this.depthAttachment=new Rm(r,x))}Cs.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Cs.prototype.updateData=function(r){var l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)},Cs.prototype.enableAttributes=function(r,l){for(var f=0;f<this.attributes.length;f++){var g=l.attributes[this.attributes[f].name];g!==void 0&&r.enableVertexAttribArray(g)}},Cs.prototype.setVertexAttribPointers=function(r,l,f){for(var g=0;g<this.attributes.length;g++){var x=this.attributes[g],T=l.attributes[x.name];T!==void 0&&r.vertexAttribPointer(T,x.components,r[cc[x.type]],!1,this.itemSize,x.offset+this.itemSize*(f||0))}},Cs.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)},rr.prototype.get=function(){return this.current},rr.prototype.set=function(r){},rr.prototype.getDefault=function(){return this.default},rr.prototype.setDefault=function(){this.set(this.default)};var pc,al,Ss,Ca,Sa,Ts,Xl,Wa,Ya,Es,Jl,Nr,Ta,sl,ei,N,B,q,J,le,de,we,ge,ve,fe,Pe,Ue,Ie,ce,Ae,xt,wt,vt,Pt,Dt=(Kp.__proto__=Pt=rr,((Kp.prototype=Object.create(Pt&&Pt.prototype)).constructor=Kp).prototype.getDefault=function(){return u.Color.transparent},Kp.prototype.set=function(r){var l=this.current;r.r===l.r&&r.g===l.g&&r.b===l.b&&r.a===l.a&&!this.dirty||(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)},Kp),$t=(Yp.__proto__=vt=rr,((Yp.prototype=Object.create(vt&&vt.prototype)).constructor=Yp).prototype.getDefault=function(){return 1},Yp.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.clearDepth(r),this.current=r,this.dirty=!1)},Yp),Ft=(vc.__proto__=wt=rr,((vc.prototype=Object.create(wt&&wt.prototype)).constructor=vc).prototype.getDefault=function(){return 0},vc.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.clearStencil(r),this.current=r,this.dirty=!1)},vc),nr=(hl.__proto__=xt=rr,((hl.prototype=Object.create(xt&&xt.prototype)).constructor=hl).prototype.getDefault=function(){return[!0,!0,!0,!0]},hl.prototype.set=function(r){var l=this.current;r[0]===l[0]&&r[1]===l[1]&&r[2]===l[2]&&r[3]===l[3]&&!this.dirty||(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)},hl),Cr=(_n.__proto__=Ae=rr,((_n.prototype=Object.create(Ae&&Ae.prototype)).constructor=_n).prototype.getDefault=function(){return!0},_n.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.depthMask(r),this.current=r,this.dirty=!1)},_n),je=(aa.__proto__=ce=rr,((aa.prototype=Object.create(ce&&ce.prototype)).constructor=aa).prototype.getDefault=function(){return 255},aa.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.stencilMask(r),this.current=r,this.dirty=!1)},aa),Ct=(pl.__proto__=Ie=rr,((pl.prototype=Object.create(Ie&&Ie.prototype)).constructor=pl).prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},pl.prototype.set=function(r){var l=this.current;r.func===l.func&&r.ref===l.ref&&r.mask===l.mask&&!this.dirty||(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)},pl),kt=(oa.__proto__=Ue=rr,((oa.prototype=Object.create(Ue&&Ue.prototype)).constructor=oa).prototype.getDefault=function(){var r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]},oa.prototype.set=function(r){var l=this.current;r[0]===l[0]&&r[1]===l[1]&&r[2]===l[2]&&!this.dirty||(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)},oa),Ci=(ia.__proto__=Pe=rr,((ia.prototype=Object.create(Pe&&Pe.prototype)).constructor=ia).prototype.getDefault=function(){return!1},ia.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}},ia),Qo=(cl.__proto__=fe=rr,((cl.prototype=Object.create(fe&&fe.prototype)).constructor=cl).prototype.getDefault=function(){return[0,1]},cl.prototype.set=function(r){var l=this.current;r[0]===l[0]&&r[1]===l[1]&&!this.dirty||(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)},cl),Vt=(Is.__proto__=ve=rr,((Is.prototype=Object.create(ve&&ve.prototype)).constructor=Is).prototype.getDefault=function(){return!1},Is.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}},Is),vn=(ul.__proto__=ge=rr,((ul.prototype=Object.create(ge&&ge.prototype)).constructor=ul).prototype.getDefault=function(){return this.gl.LESS},ul.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.depthFunc(r),this.current=r,this.dirty=!1)},ul),Wr=(so.__proto__=we=rr,((so.prototype=Object.create(we&&we.prototype)).constructor=so).prototype.getDefault=function(){return!1},so.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}},so),Ql=(yc.__proto__=de=rr,((yc.prototype=Object.create(de&&de.prototype)).constructor=yc).prototype.getDefault=function(){var r=this.gl;return[r.ONE,r.ZERO]},yc.prototype.set=function(r){var l=this.current;r[0]===l[0]&&r[1]===l[1]&&!this.dirty||(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)},yc),Bn=(gc.__proto__=le=rr,((gc.prototype=Object.create(le&&le.prototype)).constructor=gc).prototype.getDefault=function(){return u.Color.transparent},gc.prototype.set=function(r){var l=this.current;r.r===l.r&&r.g===l.g&&r.b===l.b&&r.a===l.a&&!this.dirty||(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)},gc),on=(mc.__proto__=J=rr,((mc.prototype=Object.create(J&&J.prototype)).constructor=mc).prototype.getDefault=function(){return this.gl.FUNC_ADD},mc.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.blendEquation(r),this.current=r,this.dirty=!1)},mc),ox=(fc.__proto__=q=rr,((fc.prototype=Object.create(q&&q.prototype)).constructor=fc).prototype.getDefault=function(){return!1},fc.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}},fc),Fp=(ru.__proto__=B=rr,((ru.prototype=Object.create(B&&B.prototype)).constructor=ru).prototype.getDefault=function(){return this.gl.BACK},ru.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.cullFace(r),this.current=r,this.dirty=!1)},ru),Nm=(Wp.__proto__=N=rr,((Wp.prototype=Object.create(N&&N.prototype)).constructor=Wp).prototype.getDefault=function(){return this.gl.CCW},Wp.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.frontFace(r),this.current=r,this.dirty=!1)},Wp),jp=(dc.__proto__=ei=rr,((dc.prototype=Object.create(ei&&ei.prototype)).constructor=dc).prototype.getDefault=function(){return null},dc.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.useProgram(r),this.current=r,this.dirty=!1)},dc),Xy=(Hp.__proto__=sl=rr,((Hp.prototype=Object.create(sl&&sl.prototype)).constructor=Hp).prototype.getDefault=function(){return this.gl.TEXTURE0},Hp.prototype.set=function(r){r===this.current&&!this.dirty||(this.gl.activeTexture(r),this.current=r,this.dirty=!1)},Hp),Sr=(hc.__proto__=Ta=rr,((hc.prototype=Object.create(Ta&&Ta.prototype)).constructor=hc).prototype.getDefault=function(){var r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]},hc.prototype.set=function(r){var l=this.current;r[0]===l[0]&&r[1]===l[1]&&r[2]===l[2]&&r[3]===l[3]&&!this.dirty||(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)},hc),Up=(Gp.__proto__=Nr=rr,((Gp.prototype=Object.create(Nr&&Nr.prototype)).constructor=Gp).prototype.getDefault=function(){return null},Gp.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}},Gp),Om=(tu.__proto__=Jl=rr,((tu.prototype=Object.create(Jl&&Jl.prototype)).constructor=tu).prototype.getDefault=function(){return null},tu.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}},tu),Si=(ll.__proto__=Es=rr,((ll.prototype=Object.create(Es&&Es.prototype)).constructor=ll).prototype.getDefault=function(){return null},ll.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}},ll),yo=(eu.__proto__=Ya=rr,((eu.prototype=Object.create(Ya&&Ya.prototype)).constructor=eu).prototype.getDefault=function(){return null},eu.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}},eu),Jy=(na.__proto__=Wa=rr,((na.prototype=Object.create(Wa&&Wa.prototype)).constructor=na).prototype.getDefault=function(){return null},na.prototype.set=function(r){var l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1},na),md=(Un.__proto__=Xl=rr,((Un.prototype=Object.create(Xl&&Xl.prototype)).constructor=Un).prototype.getDefault=function(){return null},Un.prototype.set=function(r){this.vao&&(r!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(r),this.current=r,this.dirty=!1)},Un),ti=(Zp.__proto__=Ts=rr,((Zp.prototype=Object.create(Ts&&Ts.prototype)).constructor=Zp).prototype.getDefault=function(){return 4},Zp.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}},Zp),Vp=(ra.__proto__=Sa=rr,((ra.prototype=Object.create(Sa&&Sa.prototype)).constructor=ra).prototype.getDefault=function(){return!1},ra.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}},ra),Ea=(qp.__proto__=Ca=rr,((qp.prototype=Object.create(Ca&&Ca.prototype)).constructor=qp).prototype.getDefault=function(){return!1},qp.prototype.set=function(r){if(r!==this.current||this.dirty){var l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}},qp),ui=(ao.__proto__=Ss=rr,((ao.prototype=Object.create(Ss&&Ss.prototype)).constructor=ao).prototype.getDefault=function(){return null},ao),oo=(ta.__proto__=al=ui,((ta.prototype=Object.create(al&&al.prototype)).constructor=ta).prototype.setDirty=function(){this.dirty=!0},ta.prototype.set=function(r){if(r!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}},ta),Rm=(ea.__proto__=pc=ui,((ea.prototype=Object.create(pc&&pc.prototype)).constructor=ea).prototype.set=function(r){if(r!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}},ea);function ea(){pc.apply(this,arguments)}function ta(){al.apply(this,arguments)}function ao(r,l){Ss.call(this,r),this.context=r,this.parent=l}function qp(){Ca.apply(this,arguments)}function ra(){Sa.apply(this,arguments)}function Zp(){Ts.apply(this,arguments)}function Un(r){Xl.call(this,r),this.vao=r.extVertexArrayObject}function na(){Wa.apply(this,arguments)}function eu(){Ya.apply(this,arguments)}function ll(){Es.apply(this,arguments)}function tu(){Jl.apply(this,arguments)}function Gp(){Nr.apply(this,arguments)}function hc(){Ta.apply(this,arguments)}function Hp(){sl.apply(this,arguments)}function dc(){ei.apply(this,arguments)}function Wp(){N.apply(this,arguments)}function ru(){B.apply(this,arguments)}function fc(){q.apply(this,arguments)}function mc(){J.apply(this,arguments)}function gc(){le.apply(this,arguments)}function yc(){de.apply(this,arguments)}function so(){we.apply(this,arguments)}function ul(){ge.apply(this,arguments)}function Is(){ve.apply(this,arguments)}function cl(){fe.apply(this,arguments)}function ia(){Pe.apply(this,arguments)}function oa(){Ue.apply(this,arguments)}function pl(){Ie.apply(this,arguments)}function aa(){ce.apply(this,arguments)}function _n(){Ae.apply(this,arguments)}function hl(){xt.apply(this,arguments)}function vc(){wt.apply(this,arguments)}function Yp(){vt.apply(this,arguments)}function Kp(){Pt.apply(this,arguments)}Bp.prototype.destroy=function(){var r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){var f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)};var vr=function(r,l,f){this.func=r,this.mask=l,this.range=f};vr.ReadOnly=!1,vr.ReadWrite=!0,vr.disabled=new vr(519,vr.ReadOnly,[0,1]);var Ln=function(r,l,f,g,x,T){this.test=r,this.ref=l,this.mask=f,this.fail=g,this.depthFail=x,this.pass=T};Ln.disabled=new Ln({func:519,mask:0},0,0,7680,7680,7680);var ri=function(r,l,f){this.blendFunction=r,this.blendColor=l,this.mask=f};ri.disabled=new ri(ri.Replace=[1,0],u.Color.transparent,[!1,!1,!1,!1]),ri.unblended=new ri(ri.Replace,u.Color.transparent,[!0,!0,!0,!0]),ri.alphaBlended=new ri([1,771],u.Color.transparent,[!0,!0,!0,!0]);var xn=function(r,l,f){this.enable=r,this.mode=l,this.frontFace=f};function vo(r){this.gl=r,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Dt(this),this.clearDepth=new $t(this),this.clearStencil=new Ft(this),this.colorMask=new nr(this),this.depthMask=new Cr(this),this.stencilMask=new je(this),this.stencilFunc=new Ct(this),this.stencilOp=new kt(this),this.stencilTest=new Ci(this),this.depthRange=new Qo(this),this.depthTest=new Vt(this),this.depthFunc=new vn(this),this.blend=new Wr(this),this.blendFunc=new Ql(this),this.blendColor=new Bn(this),this.blendEquation=new on(this),this.cullFace=new ox(this),this.cullFaceSide=new Fp(this),this.frontFace=new Nm(this),this.program=new jp(this),this.activeTexture=new Xy(this),this.viewport=new Sr(this),this.bindFramebuffer=new Up(this),this.bindRenderbuffer=new Om(this),this.bindTexture=new Si(this),this.bindVertexBuffer=new yo(this),this.bindElementBuffer=new Jy(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new md(this),this.pixelStoreUnpack=new ti(this),this.pixelStoreUnpackPremultiplyAlpha=new Vp(this),this.pixelStoreUnpackFlipY=new Ea(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=r.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(r.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query")}xn.disabled=new xn(!1,1029,2305),xn.backCCW=new xn(!0,1029,2305),vo.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},vo.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},vo.prototype.createIndexBuffer=function(r,l){return new Ha(this,r,l)},vo.prototype.createVertexBuffer=function(r,l,f){return new Cs(this,r,l,f)},vo.prototype.createRenderbuffer=function(r,l,f){var g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,r,l,f),this.bindRenderbuffer.set(null),x},vo.prototype.createFramebuffer=function(r,l,f){return new Bp(this,r,l,f)},vo.prototype.clear=function(r){var l=r.color,f=r.depth,g=this.gl,x=0;l&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),g.clear(x)},vo.prototype.setCullFace=function(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))},vo.prototype.setDepthMode=function(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)},vo.prototype.setStencilMode=function(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)},vo.prototype.setColorMode=function(r){u.deepEqual(r.blendFunction,ri.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)},vo.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var _c,ks=((_c=u.Evented)&&(jt.__proto__=_c),((jt.prototype=Object.create(_c&&_c.prototype)).constructor=jt).prototype.onAdd=function(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(r)},jt.prototype.onRemove=function(r){this._source&&this._source.onRemove&&this._source.onRemove(r)},jt.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var r in this._tiles){var l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0},jt.prototype.getSource=function(){return this._source},jt.prototype.pause=function(){this._paused=!0},jt.prototype.resume=function(){if(this._paused){var r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}},jt.prototype._loadTile=function(r,l){return this._source.loadTile(r,l)},jt.prototype._unloadTile=function(r){if(this._source.unloadTile)return this._source.unloadTile(r,function(){})},jt.prototype._abortTile=function(r){if(this._source.abortTile)return this._source.abortTile(r,function(){})},jt.prototype.serialize=function(){return this._source.serialize()},jt.prototype.prepare=function(r){for(var l in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var f=this._tiles[l];f.upload(r),f.prepare(this.map.style.imageManager)}},jt.prototype.getIds=function(){return u.values(this._tiles).map(function(r){return r.tileID}).sort(Bm).map(function(r){return r.key})},jt.prototype.getRenderableIds=function(r){var l=this,f=[];for(var g in this._tiles)this._isIdRenderable(g,r)&&f.push(this._tiles[g]);return r?f.sort(function(x,T){var E=x.tileID,L=T.tileID,O=new u.Point(E.canonical.x,E.canonical.y)._rotate(l.transform.angle),j=new u.Point(L.canonical.x,L.canonical.y)._rotate(l.transform.angle);return E.overscaledZ-L.overscaledZ||j.y-O.y||j.x-O.x}).map(function(x){return x.tileID.key}):f.map(function(x){return x.tileID}).sort(Bm).map(function(x){return x.key})},jt.prototype.hasRenderableParent=function(r){var l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)},jt.prototype._isIdRenderable=function(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())},jt.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var r in this._cache.reset(),this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")},jt.prototype._reloadTile=function(r,l){var f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=l),this._loadTile(f,this._tileLoaded.bind(this,f,r,l)))},jt.prototype._tileLoaded=function(r,l,f,g){if(g)return r.state="errored",void(g.status!==404?this._source.fire(new u.ErrorEvent(g,{tile:r})):this.update(this.transform));r.timeAdded=u.browser.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new u.Event("data",{dataType:"source",tile:r,coord:r.tileID}))},jt.prototype._backfillDEM=function(r){for(var l=this.getRenderableIds(),f=0;f<l.length;f++){var g=l[f];if(r.neighboringTiles&&r.neighboringTiles[g]){var x=this.getTileByID(g);T(r,x),T(x,r)}}function T(E,L){E.needsHillshadePrepare=!0;var O=L.tileID.canonical.x-E.tileID.canonical.x,j=L.tileID.canonical.y-E.tileID.canonical.y,V=Math.pow(2,E.tileID.canonical.z),H=L.tileID.key;O===0&&j==0||1<Math.abs(j)||(1<Math.abs(O)&&(Math.abs(O+V)===1?O+=V:Math.abs(O-V)===1&&(O-=V)),L.dem&&E.dem&&(E.dem.backfillBorder(L.dem,O,j),E.neighboringTiles&&E.neighboringTiles[H]&&(E.neighboringTiles[H].backfilled=!0)))}},jt.prototype.getTile=function(r){return this.getTileByID(r.key)},jt.prototype.getTileByID=function(r){return this._tiles[r]},jt.prototype._retainLoadedChildren=function(r,l,f,g){for(var x in this._tiles){var T=this._tiles[x];if(!(g[x]||!T.hasData()||T.tileID.overscaledZ<=l||T.tileID.overscaledZ>f)){for(var E=T.tileID;T&&T.tileID.overscaledZ>l+1;){var L=T.tileID.scaledTo(T.tileID.overscaledZ-1);(T=this._tiles[L.key])&&T.hasData()&&(E=L)}for(var O=E;O.overscaledZ>l;)if(r[(O=O.scaledTo(O.overscaledZ-1)).key]){g[E.key]=E;break}}}},jt.prototype.findLoadedParent=function(r,l){if(r.key in this._loadedParentTiles){var f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=l?f:null}for(var g=r.overscaledZ-1;l<=g;g--){var x=r.scaledTo(g),T=this._getLoadedTile(x);if(T)return T}},jt.prototype._getLoadedTile=function(r){var l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)},jt.prototype.updateCacheSize=function(r){var l=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(l*f*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)},jt.prototype.handleWrapJump=function(r){var l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){var f={};for(var g in this._tiles){var x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+l),f[x.tileID.key]=x}for(var T in this._tiles=f,this._timers)clearTimeout(this._timers[T]),delete this._timers[T];for(var E in this._tiles)this._setTileReloadTimer(E,this._tiles[E])}},jt.prototype.update=function(r){var l=this;if(this.transform=r,this._sourceLoaded&&!this._paused){var f;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ce){return new u.OverscaledTileID(Ce.canonical.z,Ce.wrap,Ce.canonical.z,Ce.canonical.x,Ce.canonical.y)}):(f=r.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(f=f.filter(function(Ce){return l._source.hasTile(Ce)}))):f=[];var g=r.coveringZoomLevel(this._source),x=Math.max(g-jt.maxOverzooming,this._source.minzoom),T=Math.max(g+jt.maxUnderzooming,this._source.minzoom),E=this._updateRetainedTiles(f,g);if(ci(this._source.type)){for(var L={},O={},j=0,V=Object.keys(E);j<V.length;j+=1){var H=V[j],K=E[H],Q=this._tiles[H];if(Q&&!(Q.fadeEndTime&&Q.fadeEndTime<=u.browser.now())){var ee=this.findLoadedParent(K,x);ee&&(this._addTile(ee.tileID),L[ee.tileID.key]=ee.tileID),O[H]=K}}for(var re in this._retainLoadedChildren(O,g,T,E),L)E[re]||(this._coveredTiles[re]=!0,E[re]=L[re])}for(var ue in E)this._tiles[ue].clearFadeHold();for(var ae=0,ye=u.keysDifference(this._tiles,E);ae<ye.length;ae+=1){var he=ye[ae],me=this._tiles[he];me.hasSymbolBuckets&&!me.holdingForFade()?me.setHoldDuration(this.map._fadeDuration):me.hasSymbolBuckets&&!me.symbolFadeFinished()||this._removeTile(he)}this._updateLoadedParentTileCache()}},jt.prototype.releaseSymbolFadeTiles=function(){for(var r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)},jt.prototype._updateRetainedTiles=function(r,l){for(var f={},g={},x=Math.max(l-jt.maxOverzooming,this._source.minzoom),T=Math.max(l+jt.maxUnderzooming,this._source.minzoom),E={},L=0,O=r;L<O.length;L+=1){var j=O[L],V=this._addTile(j);f[j.key]=j,V.hasData()||l<this._source.maxzoom&&(E[j.key]=j)}this._retainLoadedChildren(E,l,T,f);for(var H=0,K=r;H<K.length;H+=1){var Q=K[H],ee=this._tiles[Q.key];if(!ee.hasData()){if(l+1>this._source.maxzoom){var re=Q.children(this._source.maxzoom)[0],ue=this.getTile(re);if(ue&&ue.hasData()){f[re.key]=re;continue}}else{var ae=Q.children(this._source.maxzoom);if(f[ae[0].key]&&f[ae[1].key]&&f[ae[2].key]&&f[ae[3].key])continue}for(var ye=ee.wasRequested(),he=Q.overscaledZ-1;x<=he;--he){var me=Q.scaledTo(he);if(g[me.key]||(g[me.key]=!0,!(ee=this.getTile(me))&&ye&&(ee=this._addTile(me)),ee&&(f[me.key]=me,ye=ee.wasRequested(),ee.hasData())))break}}}return f},jt.prototype._updateLoadedParentTileCache=function(){for(var r in this._loadedParentTiles={},this._tiles){for(var l=[],f=void 0,g=this._tiles[r].tileID;0<g.overscaledZ;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}l.push(g.key);var x=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(x))break;g=x}for(var T=0,E=l;T<E.length;T+=1)this._loadedParentTiles[E[T]]=f}},jt.prototype._addTile=function(r){var l=this._tiles[r.key];if(l)return l;(l=this._cache.getAndRemove(r))&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));var f=Boolean(l);return f||(l=new u.Tile(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,this._tileLoaded.bind(this,l,r.key,l.state))),l?(l.uses++,this._tiles[r.key]=l,f||this._source.fire(new u.Event("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null},jt.prototype._setTileReloadTimer=function(r,l){var f=this;r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);var g=l.getExpiryTimeout();g&&(this._timers[r]=setTimeout(function(){f._reloadTile(r,"expired"),delete f._timers[r]},g))},jt.prototype._removeTile=function(r){var l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),0<l.uses||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))},jt.prototype.clearTiles=function(){for(var r in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(r);this._cache.reset()},jt.prototype.tilesIn=function(r,l,f){var g=this,x=[],T=this.transform;if(!T)return x;for(var E=f?T.getCameraQueryGeometry(r):r,L=r.map(function(he){return T.pointCoordinate(he)}),O=E.map(function(he){return T.pointCoordinate(he)}),j=this.getIds(),V=1/0,H=1/0,K=-1/0,Q=-1/0,ee=0,re=O;ee<re.length;ee+=1){var ue=re[ee];V=Math.min(V,ue.x),H=Math.min(H,ue.y),K=Math.max(K,ue.x),Q=Math.max(Q,ue.y)}for(var ae=function(he){var me=g._tiles[j[he]];if(!me.holdingForFade()){var Ce=me.tileID,ke=Math.pow(2,T.zoom-me.tileID.overscaledZ),De=l*me.queryPadding*u.EXTENT/me.tileSize/ke,Ve=[Ce.getTilePoint(new u.MercatorCoordinate(V,H)),Ce.getTilePoint(new u.MercatorCoordinate(K,Q))];if(Ve[0].x-De<u.EXTENT&&Ve[0].y-De<u.EXTENT&&0<=Ve[1].x+De&&0<=Ve[1].y+De){var qe=L.map(function(lt){return Ce.getTilePoint(lt)}),Ke=O.map(function(lt){return Ce.getTilePoint(lt)});x.push({tile:me,tileID:Ce,queryGeometry:qe,cameraQueryGeometry:Ke,scale:ke})}}},ye=0;ye<j.length;ye++)ae(ye);return x},jt.prototype.getVisibleCoordinates=function(r){for(var l=this,f=this.getRenderableIds(r).map(function(E){return l._tiles[E].tileID}),g=0,x=f;g<x.length;g+=1){var T=x[g];T.posMatrix=this.transform.calculatePosMatrix(T.toUnwrapped())}return f},jt.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ci(this._source.type))for(var r in this._tiles){var l=this._tiles[r];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=u.browser.now())return!0}return!1},jt.prototype.setFeatureState=function(r,l,f){this._state.updateState(r=r||"_geojsonTileLayer",l,f)},jt.prototype.removeFeatureState=function(r,l,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,f)},jt.prototype.getFeatureState=function(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)},jt.prototype.setDependencies=function(r,l,f){var g=this._tiles[r];g&&g.setDependencies(l,f)},jt.prototype.reloadTilesForDependencies=function(r,l){for(var f in this._tiles)this._tiles[f].hasDependency(r,l)&&this._reloadTile(f,"reloading");this._cache.filter(function(g){return!g.hasDependency(r,l)})},jt);function jt(r,l,f){var g=this;_c.call(this),this.id=r,this.dispatcher=f,this.on("data",function(x){x.dataType==="source"&&x.sourceDataType==="metadata"&&(g._sourceLoaded=!0),g._sourceLoaded&&!g._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(g.reload(),g.transform&&g.update(g.transform))}),this.on("error",function(){g._sourceErrored=!0}),this._source=function(x,T,E){var L=new zo[l.type](x,l,T,E);if(L.id!==x)throw new Error("Expected Source id to be "+x+" instead of "+L.id);return u.bindAll(["load","abort","unload","serialize","prepare"],L),L}(r,f,this),this._tiles={},this._cache=new qi(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new u.SourceFeatureState}function Bm(r,l){var f=Math.abs(2*r.wrap)-(r.wrap<0),g=Math.abs(2*l.wrap)-(l.wrap<0);return r.overscaledZ-l.overscaledZ||g-f||l.canonical.y-r.canonical.y||l.canonical.x-r.canonical.x}function ci(r){return r==="raster"||r==="image"||r==="video"}function Fm(){return new u.window.Worker(vh.workerUrl)}ks.maxOverzooming=10,ks.maxUnderzooming=3;var Ka="mapboxgl_preloaded_worker_pool",Zi=function(){this.active={}};Zi.prototype.acquire=function(r){if(!this.workers)for(this.workers=[];this.workers.length<Zi.workerCount;)this.workers.push(new Fm);return this.active[r]=!0,this.workers.slice()},Zi.prototype.release=function(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(function(l){l.terminate()}),this.workers=null)},Zi.prototype.isPreloaded=function(){return!!this.active[Ka]},Zi.prototype.numActive=function(){return Object.keys(this.active).length};var $a,nu=Math.floor(u.browser.hardwareConcurrency/2);function Ms(){return $a=$a||new Zi}function iu(r,l){var f={};for(var g in r)g!=="ref"&&(f[g]=r[g]);return u.refProperties.forEach(function(x){x in l&&(f[x]=l[x])}),f}function dl(r){r=r.slice();for(var l=Object.create(null),f=0;f<r.length;f++)l[r[f].id]=r[f];for(var g=0;g<r.length;g++)"ref"in r[g]&&(r[g]=iu(r[g],l[r[g].ref]));return r}Zi.workerCount=Math.max(Math.min(nu,6),1);var cr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jm(r,l,f){f.push({command:cr.addSource,args:[r,l[r]]})}function Um(r,l,f){l.push({command:cr.removeSource,args:[r]}),f[r]=!0}function xc(r,l,f){var g;for(g in r[f])if(r[f].hasOwnProperty(g)&&g!=="data"&&!u.deepEqual(r[f][g],l[f][g]))return;for(g in l[f])if(l[f].hasOwnProperty(g)&&g!=="data"&&!u.deepEqual(r[f][g],l[f][g]))return;return 1}function Xa(r,l,f,g,x,T){var E;for(E in l=l||{},r=r||{})r.hasOwnProperty(E)&&(u.deepEqual(r[E],l[E])||f.push({command:T,args:[g,E,l[E],x]}));for(E in l)l.hasOwnProperty(E)&&!r.hasOwnProperty(E)&&(u.deepEqual(r[E],l[E])||f.push({command:T,args:[g,E,l[E],x]}))}function Qy(r){return r.id}function e0(r,l){return r[l.id]=l,r}function Vm(r,l){this.reset(r,l)}function pi(r,l,f){var g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(l/f);for(var T=0;T<this.xCellCount*this.yCellCount;T++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}function qm(r,l,f,g,x){var T=u.create();return l?(u.scale(T,T,[1/x,1/x,1]),f||u.rotateZ(T,T,g.angle)):u.multiply(T,g.labelPlaneMatrix,r),T}function t0(r,l,f,g,x){if(l){var T=u.clone(r);return u.scale(T,T,[x,x,1]),f||u.rotateZ(T,T,-g.angle),T}return g.glCoordMatrix}function Ti(r,l){var f=[r.x,r.y,0,1];yd(f,f,l);var g=f[3];return{point:new u.Point(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function fl(r,l){return .5+r/l*.5}function r0(r,l,f,g,x,T,E,L){var O,j,V,H,K=g?r.textSizeData:r.iconSizeData,Q=u.evaluateSizeForZoom(K,f.transform.zoom),ee=[256/f.width*2+1,256/f.height*2+1],re=g?r.text.dynamicLayoutVertexArray:r.icon.dynamicLayoutVertexArray;re.clear();for(var ue=r.lineVertexArray,ae=g?r.text.placedSymbolArray:r.icon.placedSymbolArray,ye=f.transform.width/f.transform.height,he=!1,me=0;me<ae.length;me++){var Ce=ae.get(me);if(Ce.hidden||Ce.writingMode===u.WritingMode.vertical&&!he)ou(Ce.numGlyphs,re);else{he=!1;var ke=[Ce.anchorX,Ce.anchorY,0,1];if(u.transformMat4(ke,ke,l),j=ee,V=(O=ke)[0]/O[3],H=O[1]/O[3],V>=-j[0]&&V<=j[0]&&H>=-j[1]&&H<=j[1]){var De=fl(f.transform.cameraToCenterDistance,ke[3]),Ve=u.evaluateSizeForFeature(K,Q,Ce),qe=E?Ve/De:Ve*De,Ke=new u.Point(Ce.anchorX,Ce.anchorY),lt=Ti(Ke,x).point,ht={},dt=ml(Ce,qe,!1,L,l,x,T,r.glyphOffsetArray,ue,re,lt,Ke,ht,ye);he=dt.useVertical,(dt.notEnoughRoom||he||dt.needsFlipping&&ml(Ce,qe,!0,L,l,x,T,r.glyphOffsetArray,ue,re,lt,Ke,ht,ye).notEnoughRoom)&&ou(Ce.numGlyphs,re)}else ou(Ce.numGlyphs,re)}}g?r.text.dynamicLayoutVertexBuffer.updateData(re):r.icon.dynamicLayoutVertexBuffer.updateData(re)}function Zm(r,l,f,g,x,T,E,L,O,j,V){var H=L.glyphStartIndex+L.numGlyphs,K=L.lineStartIndex,Q=L.lineStartIndex+L.lineLength,ee=l.getoffsetX(L.glyphStartIndex),re=l.getoffsetX(H-1),ue=As(r*ee,f,g,x,T,E,L.segment,K,Q,O,j,V);if(!ue)return null;var ae=As(r*re,f,g,x,T,E,L.segment,K,Q,O,j,V);return ae?{first:ue,last:ae}:null}function gd(r,l,f,g){return r===u.WritingMode.horizontal&&Math.abs(f.y-l.y)>Math.abs(f.x-l.x)*g?{useVertical:!0}:(r===u.WritingMode.vertical?l.y<f.y:l.x>f.x)?{needsFlipping:!0}:null}function ml(r,l,f,g,x,T,E,L,O,j,V,H,K,Q){var ee,re=l/24,ue=r.lineOffsetX*re,ae=r.lineOffsetY*re;if(1<r.numGlyphs){var ye=r.glyphStartIndex+r.numGlyphs,he=r.lineStartIndex,me=r.lineStartIndex+r.lineLength,Ce=Zm(re,L,ue,ae,f,V,H,r,O,T,K);if(!Ce)return{notEnoughRoom:!0};var ke=Ti(Ce.first.point,E).point,De=Ti(Ce.last.point,E).point;if(g&&!f){var Ve=gd(r.writingMode,ke,De,Q);if(Ve)return Ve}ee=[Ce.first];for(var qe=r.glyphStartIndex+1;qe<ye-1;qe++)ee.push(As(re*L.getoffsetX(qe),ue,ae,f,V,H,r.segment,he,me,O,T,K));ee.push(Ce.last)}else{if(g&&!f){var Ke=Ti(H,x).point,lt=r.lineStartIndex+r.segment+1,ht=new u.Point(O.getx(lt),O.gety(lt)),dt=Ti(ht,x),Tt=0<dt.signedDistanceFromCamera?dt.point:Gm(H,ht,Ke,1,x),mt=gd(r.writingMode,Ke,Tt,Q);if(mt)return mt}var Mt=As(re*L.getoffsetX(r.glyphStartIndex),ue,ae,f,V,H,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,O,T,K);if(!Mt)return{notEnoughRoom:!0};ee=[Mt]}for(var Ut=0,Rt=ee;Ut<Rt.length;Ut+=1){var _t=Rt[Ut];u.addDynamicAttributes(j,_t.point,_t.angle)}return{}}function Gm(r,l,f,g,x){var T=Ti(r.add(r.sub(l)._unit()),x).point,E=f.sub(T);return f.add(E._mult(g/E.mag()))}function As(r,l,f,g,x,T,E,L,O,j,V,H){var K=g?r-l:r+l,Q=0<K?1:-1,ee=0;g&&(Q*=-1,ee=Math.PI),Q<0&&(ee+=Math.PI);for(var re=0<Q?L+E:L+E+1,ue=x,ae=x,ye=0,he=0,me=Math.abs(K),Ce=[];ye+he<=me;){if((re+=Q)<L||O<=re)return null;if(ae=ue,Ce.push(ue),(ue=H[re])===void 0){var ke=new u.Point(j.getx(re),j.gety(re)),De=Ti(ke,V);if(0<De.signedDistanceFromCamera)ue=H[re]=De.point;else{var Ve=re-Q;ue=Gm(ye===0?T:new u.Point(j.getx(Ve),j.gety(Ve)),ke,ae,me-ye+1,V)}}ye+=he,he=ae.dist(ue)}var qe=(me-ye)/he,Ke=ue.sub(ae),lt=Ke.mult(qe)._add(ae);lt._add(Ke._unit()._perp()._mult(f*Q));var ht=ee+Math.atan2(ue.y-ae.y,ue.x-ae.x);return Ce.push(lt),{point:lt,angle:ht,path:Ce}}Vm.prototype.reset=function(r,l){this.points=r||[],this._distances=[0];for(var f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Vm.prototype.lerp=function(r){if(this.points.length===1)return this.points[0];r=u.clamp(r,0,1);for(var l=1,f=this._distances[l],g=r*this.paddedLength+this.padding;f<g&&l<this._distances.length;)f=this._distances[++l];var x=l-1,T=this._distances[x],E=f-T,L=0<E?(g-T)/E:0;return this.points[x].mult(1-L).add(this.points[l].mult(L))},pi.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},pi.prototype.insert=function(r,l,f,g,x){this._forEachCell(l,f,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(x)},pi.prototype.insertCircle=function(r,l,f,g){this._forEachCell(l-g,f-g,l+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(f),this.circles.push(g)},pi.prototype._insertBoxCell=function(r,l,f,g,x,T){this.boxCells[x].push(T)},pi.prototype._insertCircleCell=function(r,l,f,g,x,T){this.circleCells[x].push(T)},pi.prototype._query=function(r,l,f,g,x,T){if(f<0||r>this.width||g<0||l>this.height)return!x&&[];var E=[];if(r<=0&&l<=0&&this.width<=f&&this.height<=g){if(x)return!0;for(var L=0;L<this.boxKeys.length;L++)E.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(var O=0;O<this.circleKeys.length;O++){var j=this.circles[3*O],V=this.circles[3*O+1],H=this.circles[3*O+2];E.push({key:this.circleKeys[O],x1:j-H,y1:V-H,x2:j+H,y2:V+H})}return T?E.filter(T):E}return this._forEachCell(r,l,f,g,this._queryCell,E,{hitTest:x,seenUids:{box:{},circle:{}}},T),x?0<E.length:E},pi.prototype._queryCircle=function(r,l,f,g,x){var T=r-f,E=r+f,L=l-f,O=l+f;if(E<0||T>this.width||O<0||L>this.height)return!g&&[];var j=[];return this._forEachCell(T,L,E,O,this._queryCellCircle,j,{hitTest:g,circle:{x:r,y:l,radius:f},seenUids:{box:{},circle:{}}},x),g?0<j.length:j},pi.prototype.query=function(r,l,f,g,x){return this._query(r,l,f,g,!1,x)},pi.prototype.hitTest=function(r,l,f,g,x){return this._query(r,l,f,g,!0,x)},pi.prototype.hitTestCircle=function(r,l,f,g){return this._queryCircle(r,l,f,!0,g)},pi.prototype._queryCell=function(r,l,f,g,x,T,E,L){var O=E.seenUids,j=this.boxCells[x];if(j!==null)for(var V=this.bboxes,H=0,K=j;H<K.length;H+=1){var Q=K[H];if(!O.box[Q]){O.box[Q]=!0;var ee=4*Q;if(r<=V[2+ee]&&l<=V[3+ee]&&f>=V[0+ee]&&g>=V[1+ee]&&(!L||L(this.boxKeys[Q]))){if(E.hitTest)return T.push(!0),!0;T.push({key:this.boxKeys[Q],x1:V[ee],y1:V[1+ee],x2:V[2+ee],y2:V[3+ee]})}}}var re=this.circleCells[x];if(re!==null)for(var ue=this.circles,ae=0,ye=re;ae<ye.length;ae+=1){var he=ye[ae];if(!O.circle[he]){O.circle[he]=!0;var me=3*he;if(this._circleAndRectCollide(ue[me],ue[1+me],ue[2+me],r,l,f,g)&&(!L||L(this.circleKeys[he]))){if(E.hitTest)return T.push(!0),!0;var Ce=ue[me],ke=ue[1+me],De=ue[2+me];T.push({key:this.circleKeys[he],x1:Ce-De,y1:ke-De,x2:Ce+De,y2:ke+De})}}}},pi.prototype._queryCellCircle=function(r,l,f,g,x,T,E,L){var O=E.circle,j=E.seenUids,V=this.boxCells[x];if(V!==null)for(var H=this.bboxes,K=0,Q=V;K<Q.length;K+=1){var ee=Q[K];if(!j.box[ee]){j.box[ee]=!0;var re=4*ee;if(this._circleAndRectCollide(O.x,O.y,O.radius,H[0+re],H[1+re],H[2+re],H[3+re])&&(!L||L(this.boxKeys[ee])))return T.push(!0),!0}}var ue=this.circleCells[x];if(ue!==null)for(var ae=this.circles,ye=0,he=ue;ye<he.length;ye+=1){var me=he[ye];if(!j.circle[me]){j.circle[me]=!0;var Ce=3*me;if(this._circlesCollide(ae[Ce],ae[1+Ce],ae[2+Ce],O.x,O.y,O.radius)&&(!L||L(this.circleKeys[me])))return T.push(!0),!0}}},pi.prototype._forEachCell=function(r,l,f,g,x,T,E,L){for(var O=this._convertToXCellCoord(r),j=this._convertToYCellCoord(l),V=this._convertToXCellCoord(f),H=this._convertToYCellCoord(g),K=O;K<=V;K++)for(var Q=j;Q<=H;Q++)if(x.call(this,r,l,f,g,this.xCellCount*Q+K,T,E,L))return},pi.prototype._convertToXCellCoord=function(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))},pi.prototype._convertToYCellCoord=function(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))},pi.prototype._circlesCollide=function(r,l,f,g,x,T){var E=g-r,L=x-l,O=f+T;return E*E+L*L<O*O},pi.prototype._circleAndRectCollide=function(r,l,f,g,x,T,E){var L=(T-g)/2,O=Math.abs(r-(g+L));if(L+f<O)return!1;var j=(E-x)/2,V=Math.abs(l-(x+j));if(j+f<V)return!1;if(O<=L||V<=j)return!0;var H=O-L,K=V-j;return H*H+K*K<=f*f};var wc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ou(r,l){for(var f=0;f<r;f++){var g=l.length;l.resize(g+4),l.float32.set(wc,3*g)}}function yd(r,l,f){var g=l[0],x=l[1];return r[0]=f[0]*g+f[4]*x+f[12],r[1]=f[1]*g+f[5]*x+f[13],r[3]=f[3]*g+f[7]*x+f[15],r}function lr(r,l,f){l===void 0&&(l=new pi(r.width+200,r.height+200,25)),f===void 0&&(f=new pi(r.width+200,r.height+200,25)),this.transform=r,this.grid=l,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+100,this.screenBottomBoundary=r.height+100,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200}function Gi(r,l,f){return l*(u.EXTENT/(r.tileSize*Math.pow(2,f-r.tileID.overscaledZ)))}function Hm(r,l,f,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):g&&f?1:0,this.placed=f}function Ja(r,l,f,g,x){this.text=new Hm(r?r.text:null,l,f,x),this.icon=new Hm(r?r.icon:null,l,g,x)}function n0(r,l,f){this.text=r,this.icon=l,this.skipFade=f}function ax(){this.invProjMatrix=u.create(),this.viewportMatrix=u.create(),this.circles=[]}function i0(r,l,f,g,x){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=x}function o0(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}function bc(r,l,f,g,x){var T=u.getAnchorAlignment(r),E=-(T.horizontalAlign-.5)*l,L=-(T.verticalAlign-.5)*f,O=u.evaluateVariableOffset(r,g);return new u.Point(E+O[0]*x,L+O[1]*x)}function Cc(r,l,f,g,x,T){var E=r.x1,L=r.x2,O=r.y1,j=r.y2,V=r.anchorPointX,H=r.anchorPointY,K=new u.Point(l,f);return g&&K._rotate(x?T:-T),{x1:E+K.x,y1:O+K.y,x2:L+K.x,y2:j+K.y,anchorPointX:V,anchorPointY:H}}function Oi(r,l,f,g){this.transform=r.clone(),this.collisionIndex=new lr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new o0(f),this.collisionCircleArrays={},(this.prevPlacement=g)&&(g.prevPlacement=void 0),this.placedOrientations={}}function gl(r,l,f,g,x){r.emplaceBack(l?1:0,f?1:0,g||0,x||0),r.emplaceBack(l?1:0,f?1:0,g||0,x||0),r.emplaceBack(l?1:0,f?1:0,g||0,x||0),r.emplaceBack(l?1:0,f?1:0,g||0,x||0)}lr.prototype.placeCollisionBox=function(r,l,f,g,x){var T=this.projectAndGetPerspectiveRatio(g,r.anchorPointX,r.anchorPointY),E=f*T.perspectiveRatio,L=r.x1*E+T.point.x,O=r.y1*E+T.point.y,j=r.x2*E+T.point.x,V=r.y2*E+T.point.y;return!this.isInsideGrid(L,O,j,V)||!l&&this.grid.hitTest(L,O,j,V,x)?{box:[],offscreen:!1}:{box:[L,O,j,V],offscreen:this.isOffscreen(L,O,j,V)}},lr.prototype.placeCollisionCircles=function(r,l,f,g,x,T,E,L,O,j,V,H,K){var Q=[],ee=new u.Point(l.anchorX,l.anchorY),re=Ti(ee,T),ue=fl(this.transform.cameraToCenterDistance,re.signedDistanceFromCamera),ae=(j?x/ue:x*ue)/u.ONE_EM,ye=Ti(ee,E).point,he=Zm(ae,g,l.lineOffsetX*ae,l.lineOffsetY*ae,!1,ye,ee,l,f,E,{}),me=!1,Ce=!1,ke=!0;if(he){for(var De=.5*H*ue+K,Ve=new u.Point(-100,-100),qe=new u.Point(this.screenRightBoundary,this.screenBottomBoundary),Ke=new Vm,lt=he.first,ht=he.last,dt=[],Tt=lt.path.length-1;1<=Tt;Tt--)dt.push(lt.path[Tt]);for(var mt=1;mt<ht.path.length;mt++)dt.push(ht.path[mt]);var Mt=2.5*De;if(L){var Ut=dt.map(function(In){return Ti(In,L)});dt=Ut.some(function(In){return In.signedDistanceFromCamera<=0})?[]:Ut.map(function(In){return In.point})}var Rt=[];if(0<dt.length){for(var _t=dt[0].clone(),zt=dt[0].clone(),er=1;er<dt.length;er++)_t.x=Math.min(_t.x,dt[er].x),_t.y=Math.min(_t.y,dt[er].y),zt.x=Math.max(zt.x,dt[er].x),zt.y=Math.max(zt.y,dt[er].y);Rt=_t.x>=Ve.x&&zt.x<=qe.x&&_t.y>=Ve.y&&zt.y<=qe.y?[dt]:zt.x<Ve.x||_t.x>qe.x||zt.y<Ve.y||_t.y>qe.y?[]:u.clipLine([dt],Ve.x,Ve.y,qe.x,qe.y)}for(var Ot=0,Br=Rt;Ot<Br.length;Ot+=1){var ur;Ke.reset(Br[Ot],.25*De),ur=Ke.length<=.5*De?1:Math.ceil(Ke.paddedLength/Mt)+1;for(var Fn=0;Fn<ur;Fn++){var ni=Fn/Math.max(ur-1,1),Li=Ke.lerp(ni),ki=Li.x+100,Tr=Li.y+100;Q.push(ki,Tr,De,0);var Xi=ki-De,Pi=Tr-De,Pr=ki+De,En=Tr+De;if(ke=ke&&this.isOffscreen(Xi,Pi,Pr,En),Ce=Ce||this.isInsideGrid(Xi,Pi,Pr,En),!r&&this.grid.hitTestCircle(ki,Tr,De,V)&&(me=!0,!O))return{circles:[],offscreen:!1,collisionDetected:me}}}}return{circles:!O&&me||!Ce?[]:Q,offscreen:ke,collisionDetected:me}},lr.prototype.queryRenderedSymbols=function(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var l=[],f=1/0,g=1/0,x=-1/0,T=-1/0,E=0,L=r;E<L.length;E+=1){var O=L[E],j=new u.Point(O.x+100,O.y+100);f=Math.min(f,j.x),g=Math.min(g,j.y),x=Math.max(x,j.x),T=Math.max(T,j.y),l.push(j)}for(var V={},H={},K=0,Q=this.grid.query(f,g,x,T).concat(this.ignoredGrid.query(f,g,x,T));K<Q.length;K+=1){var ee=Q[K],re=ee.key;if(V[re.bucketInstanceId]===void 0&&(V[re.bucketInstanceId]={}),!V[re.bucketInstanceId][re.featureIndex]){var ue=[new u.Point(ee.x1,ee.y1),new u.Point(ee.x2,ee.y1),new u.Point(ee.x2,ee.y2),new u.Point(ee.x1,ee.y2)];u.polygonIntersectsPolygon(l,ue)&&(V[re.bucketInstanceId][re.featureIndex]=!0,H[re.bucketInstanceId]===void 0&&(H[re.bucketInstanceId]=[]),H[re.bucketInstanceId].push(re.featureIndex))}}return H},lr.prototype.insertCollisionBox=function(r,l,f,g,x){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:g,collisionGroupID:x},r[0],r[1],r[2],r[3])},lr.prototype.insertCollisionCircles=function(r,l,f,g,x){for(var T=l?this.ignoredGrid:this.grid,E={bucketInstanceId:f,featureIndex:g,collisionGroupID:x},L=0;L<r.length;L+=4)T.insertCircle(E,r[L],r[L+1],r[L+2])},lr.prototype.projectAndGetPerspectiveRatio=function(r,l,f){var g=[l,f,0,1];return yd(g,g,r),{point:new u.Point((g[0]/g[3]+1)/2*this.transform.width+100,(-g[1]/g[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/g[3]*.5}},lr.prototype.isOffscreen=function(r,l,f,g){return f<100||r>=this.screenRightBoundary||g<100||l>this.screenBottomBoundary},lr.prototype.isInsideGrid=function(r,l,f,g){return 0<=f&&r<this.gridRightBoundary&&0<=g&&l<this.gridBottomBoundary},lr.prototype.getViewportMatrix=function(){var r=u.identity([]);return u.translate(r,r,[-100,-100,0]),r},Hm.prototype.isHidden=function(){return this.opacity===0&&!this.placed},Ja.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()},o0.prototype.get=function(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){var l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:function(f){return f.collisionGroupID===l}}}return this.collisionGroups[r]},Oi.prototype.getBucketParts=function(r,l,f,g){var x=f.getBucket(l),T=f.latestFeatureIndex;if(x&&T&&l.id===x.layerIds[0]){var E=f.collisionBoxArray,L=x.layers[0].layout,O=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),j=f.tileSize/u.EXTENT,V=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),H=L.get("text-pitch-alignment")==="map",K=L.get("text-rotation-alignment")==="map",Q=Gi(f,1,this.transform.zoom),ee=qm(V,H,K,this.transform,Q),re=null;if(H){var ue=t0(V,H,K,this.transform,Q);re=u.multiply([],this.transform.labelPlaneMatrix,ue)}this.retainedQueryData[x.bucketInstanceId]=new i0(x.bucketInstanceId,T,x.sourceLayerIndex,x.index,f.tileID);var ae={bucket:x,layout:L,posMatrix:V,textLabelPlaneMatrix:ee,labelToScreenMatrix:re,scale:O,textPixelRatio:j,holdingForFade:f.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:u.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(var ye=0,he=x.sortKeyRanges;ye<he.length;ye+=1){var me=he[ye];r.push({sortKey:me.sortKey,symbolInstanceStart:me.symbolInstanceStart,symbolInstanceEnd:me.symbolInstanceEnd,parameters:ae})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ae})}},Oi.prototype.attemptAnchorPlacement=function(r,l,f,g,x,T,E,L,O,j,V,H,K,Q,ee){var re,ue=[H.textOffset0,H.textOffset1],ae=bc(r,f,g,ue,x),ye=this.collisionIndex.placeCollisionBox(Cc(l,ae.x,ae.y,T,E,this.transform.angle),V,L,O,j.predicate);if(!ee||this.collisionIndex.placeCollisionBox(Cc(ee,ae.x,ae.y,T,E,this.transform.angle),V,L,O,j.predicate).box.length!==0)return 0<ye.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID].text&&(re=this.prevPlacement.variableOffsets[H.crossTileID].anchor),this.variableOffsets[H.crossTileID]={textOffset:ue,width:f,height:g,anchor:r,textBoxScale:x,prevAnchor:re},this.markUsedJustification(K,r,H,Q),K.allowVerticalPlacement&&(this.markUsedOrientation(K,Q,H),this.placedOrientations[H.crossTileID]=Q),{shift:ae,placedGlyphBoxes:ye}):void 0},Oi.prototype.placeLayerBucketPart=function(r,l,f){var g=this,x=r.parameters,T=x.bucket,E=x.layout,L=x.posMatrix,O=x.textLabelPlaneMatrix,j=x.labelToScreenMatrix,V=x.textPixelRatio,H=x.holdingForFade,K=x.collisionBoxArray,Q=x.partiallyEvaluatedTextSize,ee=x.collisionGroup,re=E.get("text-optional"),ue=E.get("icon-optional"),ae=E.get("text-allow-overlap"),ye=E.get("icon-allow-overlap"),he=E.get("text-rotation-alignment")==="map",me=E.get("text-pitch-alignment")==="map",Ce=E.get("icon-text-fit")!=="none",ke=E.get("symbol-z-order")==="viewport-y",De=ae&&(ye||!T.hasIconData()||ue),Ve=ye&&(ae||!T.hasTextData()||re);function qe(mt,Mt){if(!l[mt.crossTileID])if(H)g.placements[mt.crossTileID]=new n0(!1,!1,!1);else{var Ut,Rt=!1,_t=!1,zt=!0,er=null,Ot={box:null,offscreen:null},Br={box:null,offscreen:null},ur=null,Fn=null,ni=0,Li=0,ki=0;Mt.textFeatureIndex?ni=Mt.textFeatureIndex:mt.useRuntimeCollisionCircles&&(ni=mt.featureIndex),Mt.verticalTextFeatureIndex&&(Li=Mt.verticalTextFeatureIndex);var Tr=Mt.textBox;if(Tr){var Xi=function(Er){var Fr=u.WritingMode.horizontal;if(T.allowVerticalPlacement&&!Er&&g.prevPlacement){var Ri=g.prevPlacement.placedOrientations[mt.crossTileID];Ri&&(g.placedOrientations[mt.crossTileID]=Ri,g.markUsedOrientation(T,Fr=Ri,mt))}return Fr},Pi=function(Er,Fr){if(T.allowVerticalPlacement&&0<mt.numVerticalGlyphVertices&&Mt.verticalTextBox)for(var Ri=0,kl=T.writingModes;Ri<kl.length&&(kl[Ri]===u.WritingMode.vertical?(Ot=Fr(),Br=Ot):Ot=Er(),!(Ot&&Ot.box&&Ot.box.length));Ri+=1);else Ot=Er()};if(E.get("text-variable-anchor")){var Pr=E.get("text-variable-anchor");if(g.prevPlacement&&g.prevPlacement.variableOffsets[mt.crossTileID]){var En=g.prevPlacement.variableOffsets[mt.crossTileID];0<Pr.indexOf(En.anchor)&&(Pr=Pr.filter(function(Er){return Er!==En.anchor})).unshift(En.anchor)}var In=function(Er,Fr,Ri){for(var kl=Er.x2-Er.x1,Ml=Er.y2-Er.y1,Mu=mt.textBoxScale,wh=Ce&&!ye?Fr:null,hi={box:[],offscreen:!1},bh=ae?2*Pr.length:Pr.length,Uc=0;Uc<bh;++Uc){var Au=g.attemptAnchorPlacement(Pr[Uc%Pr.length],Er,kl,Ml,Mu,he,me,V,L,ee,Uc>=Pr.length,mt,T,Ri,wh);if(Au&&(hi=Au.placedGlyphBoxes)&&hi.box&&hi.box.length){Rt=!0,er=Au.shift;break}}return hi};Pi(function(){return In(Tr,Mt.iconBox,u.WritingMode.horizontal)},function(){var Er=Mt.verticalTextBox;return T.allowVerticalPlacement&&!(Ot&&Ot.box&&Ot.box.length)&&0<mt.numVerticalGlyphVertices&&Er?In(Er,Mt.verticalIconBox,u.WritingMode.vertical):{box:null,offscreen:null}}),Ot&&(Rt=Ot.box,zt=Ot.offscreen);var Di=Xi(Ot&&Ot.box);if(!Rt&&g.prevPlacement){var Ui=g.prevPlacement.variableOffsets[mt.crossTileID];Ui&&(g.variableOffsets[mt.crossTileID]=Ui,g.markUsedJustification(T,Ui.anchor,mt,Di))}}else{var Eu=function(Er,Fr){var Ri=g.collisionIndex.placeCollisionBox(Er,ae,V,L,ee.predicate);return Ri&&Ri.box&&Ri.box.length&&(g.markUsedOrientation(T,Fr,mt),g.placedOrientations[mt.crossTileID]=Fr),Ri};Pi(function(){return Eu(Tr,u.WritingMode.horizontal)},function(){var Er=Mt.verticalTextBox;return T.allowVerticalPlacement&&0<mt.numVerticalGlyphVertices&&Er?Eu(Er,u.WritingMode.vertical):{box:null,offscreen:null}}),Xi(Ot&&Ot.box&&Ot.box.length)}}if(Rt=(Ut=Ot)&&Ut.box&&0<Ut.box.length,zt=Ut&&Ut.offscreen,mt.useRuntimeCollisionCircles){var _h=T.text.placedSymbolArray.get(mt.centerJustifiedTextSymbolIndex),js=u.evaluateSizeForFeature(T.textSizeData,Q,_h),xh=E.get("text-padding");ur=g.collisionIndex.placeCollisionCircles(ae,_h,T.lineVertexArray,T.glyphOffsetArray,js,L,O,j,f,me,ee.predicate,mt.collisionCircleDiameter,xh),Rt=ae||0<ur.circles.length&&!ur.collisionDetected,zt=zt&&ur.offscreen}if(Mt.iconFeatureIndex&&(ki=Mt.iconFeatureIndex),Mt.iconBox){var Il=function(Er){var Fr=Ce&&er?Cc(Er,er.x,er.y,he,me,g.transform.angle):Er;return g.collisionIndex.placeCollisionBox(Fr,ye,V,L,ee.predicate)};_t=Br&&Br.box&&Br.box.length&&Mt.verticalIconBox?0<(Fn=Il(Mt.verticalIconBox)).box.length:0<(Fn=Il(Mt.iconBox)).box.length,zt=zt&&Fn.offscreen}var jc=re||mt.numHorizontalGlyphVertices===0&&mt.numVerticalGlyphVertices===0,Iu=ue||mt.numIconVertices===0;if(jc||Iu?Iu?jc||(_t=_t&&Rt):Rt=_t&&Rt:_t=Rt=_t&&Rt,Rt&&Ut&&Ut.box&&g.collisionIndex.insertCollisionBox(Ut.box,E.get("text-ignore-placement"),T.bucketInstanceId,Br&&Br.box&&Li?Li:ni,ee.ID),_t&&Fn&&g.collisionIndex.insertCollisionBox(Fn.box,E.get("icon-ignore-placement"),T.bucketInstanceId,ki,ee.ID),ur&&(Rt&&g.collisionIndex.insertCollisionCircles(ur.circles,E.get("text-ignore-placement"),T.bucketInstanceId,ni,ee.ID),f)){var ku=T.bucketInstanceId,us=g.collisionCircleArrays[ku];us===void 0&&(us=g.collisionCircleArrays[ku]=new ax);for(var cs=0;cs<ur.circles.length;cs+=4)us.circles.push(ur.circles[cs+0]),us.circles.push(ur.circles[cs+1]),us.circles.push(ur.circles[cs+2]),us.circles.push(ur.collisionDetected?1:0)}g.placements[mt.crossTileID]=new n0(Rt||De,_t||Ve,zt||T.justReloaded),l[mt.crossTileID]=!0}}if(!T.collisionArrays&&K&&T.deserializeCollisionBoxes(K),ke)for(var Ke=T.getSortedSymbolIndexes(this.transform.angle),lt=Ke.length-1;0<=lt;--lt){var ht=Ke[lt];qe(T.symbolInstances.get(ht),T.collisionArrays[ht])}else for(var dt=r.symbolInstanceStart;dt<r.symbolInstanceEnd;dt++)qe(T.symbolInstances.get(dt),T.collisionArrays[dt]);if(f&&T.bucketInstanceId in this.collisionCircleArrays){var Tt=this.collisionCircleArrays[T.bucketInstanceId];u.invert(Tt.invProjMatrix,L),Tt.viewportMatrix=this.collisionIndex.getViewportMatrix()}T.justReloaded=!1},Oi.prototype.markUsedJustification=function(r,l,f,g){var x;x=g===u.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.getAnchorJustification(l)];for(var T=0,E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];T<E.length;T+=1){var L=E[T];0<=L&&(r.text.placedSymbolArray.get(L).crossTileID=0<=x&&L!==x?0:f.crossTileID)}},Oi.prototype.markUsedOrientation=function(r,l,f){for(var g=l===u.WritingMode.horizontal||l===u.WritingMode.horizontalOnly?l:0,x=l===u.WritingMode.vertical?l:0,T=0,E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];T<E.length;T+=1)r.text.placedSymbolArray.get(E[T]).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=x)},Oi.prototype.commit=function(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;var l=this.prevPlacement,f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;var g=l?l.symbolFadeChange(r):1,x=l?l.opacities:{},T=l?l.variableOffsets:{},E=l?l.placedOrientations:{};for(var L in this.placements){var O=this.placements[L],j=x[L];f=j?(this.opacities[L]=new Ja(j,g,O.text,O.icon),f||O.text!==j.text.placed||O.icon!==j.icon.placed):(this.opacities[L]=new Ja(null,g,O.text,O.icon,O.skipFade),f||O.text||O.icon)}for(var V in x){var H=x[V];if(!this.opacities[V]){var K=new Ja(H,g,!1,!1);K.isHidden()||(this.opacities[V]=K,f=f||H.text.placed||H.icon.placed)}}for(var Q in T)this.variableOffsets[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.variableOffsets[Q]=T[Q]);for(var ee in E)this.placedOrientations[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.placedOrientations[ee]=E[ee]);f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)},Oi.prototype.updateLayerOpacities=function(r,l){for(var f={},g=0,x=l;g<x.length;g+=1){var T=x[g],E=T.getBucket(r);E&&T.latestFeatureIndex&&r.id===E.layerIds[0]&&this.updateBucketOpacities(E,f,T.collisionBoxArray)}},Oi.prototype.updateBucketOpacities=function(r,l,f){var g=this;r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();var x=r.layers[0].layout,T=new Ja(null,0,!1,!1,!0),E=x.get("text-allow-overlap"),L=x.get("icon-allow-overlap"),O=x.get("text-variable-anchor"),j=x.get("text-rotation-alignment")==="map",V=x.get("text-pitch-alignment")==="map",H=x.get("icon-text-fit")!=="none",K=new Ja(null,0,E&&(L||!r.hasIconData()||x.get("icon-optional")),L&&(E||!r.hasTextData()||x.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);for(var Q=function(ae,ye,he){for(var me=0;me<ye/4;me++)ae.opacityVertexArray.emplaceBack(he)},ee=function(ae){var ye=r.symbolInstances.get(ae),he=ye.numHorizontalGlyphVertices,me=ye.numVerticalGlyphVertices,Ce=ye.crossTileID,ke=g.opacities[Ce];l[Ce]?ke=T:ke||(g.opacities[Ce]=ke=K),l[Ce]=!0;var De=0<ye.numIconVertices,Ve=g.placedOrientations[ye.crossTileID],qe=Ve===u.WritingMode.vertical,Ke=Ve===u.WritingMode.horizontal||Ve===u.WritingMode.horizontalOnly;if(0<he||0<me){var lt=au(ke.text);Q(r.text,he,qe?Tc:lt),Q(r.text,me,Ke?Tc:lt);var ht=ke.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(function(Ot){0<=Ot&&(r.text.placedSymbolArray.get(Ot).hidden=ht||qe?1:0)}),0<=ye.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=ht||Ke?1:0);var dt=g.variableOffsets[ye.crossTileID];dt&&g.markUsedJustification(r,dt.anchor,ye,Ve);var Tt=g.placedOrientations[ye.crossTileID];Tt&&(g.markUsedJustification(r,"left",ye,Tt),g.markUsedOrientation(r,Tt,ye))}if(De){var mt=au(ke.icon),Mt=!(H&&ye.verticalPlacedIconSymbolIndex&&qe);0<=ye.placedIconSymbolIndex&&(Q(r.icon,ye.numIconVertices,Mt?mt:Tc),r.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=ke.icon.isHidden()),0<=ye.verticalPlacedIconSymbolIndex&&(Q(r.icon,ye.numVerticalIconVertices,Mt?Tc:mt),r.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){var Ut=r.collisionArrays[ae];if(Ut){var Rt=new u.Point(0,0);if(Ut.textBox||Ut.verticalTextBox){var _t=!0;if(O){var zt=g.variableOffsets[Ce];zt?(Rt=bc(zt.anchor,zt.width,zt.height,zt.textOffset,zt.textBoxScale),j&&Rt._rotate(V?g.transform.angle:-g.transform.angle)):_t=!1}Ut.textBox&&gl(r.textCollisionBox.collisionVertexArray,ke.text.placed,!_t||qe,Rt.x,Rt.y),Ut.verticalTextBox&&gl(r.textCollisionBox.collisionVertexArray,ke.text.placed,!_t||Ke,Rt.x,Rt.y)}var er=Boolean(!Ke&&Ut.verticalIconBox);Ut.iconBox&&gl(r.iconCollisionBox.collisionVertexArray,ke.icon.placed,er,H?Rt.x:0,H?Rt.y:0),Ut.verticalIconBox&&gl(r.iconCollisionBox.collisionVertexArray,ke.icon.placed,!er,H?Rt.x:0,H?Rt.y:0)}}},re=0;re<r.symbolInstances.length;re++)ee(re);if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.bucketInstanceId in this.collisionCircleArrays){var ue=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=ue.invProjMatrix,r.placementViewportMatrix=ue.viewportMatrix,r.collisionCircleArray=ue.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}},Oi.prototype.symbolFadeChange=function(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Oi.prototype.zoomAdjustment=function(r){return Math.max(0,(this.transform.zoom-r)/1.5)},Oi.prototype.hasTransitions=function(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration},Oi.prototype.stillRecent=function(r,l){var f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>r},Oi.prototype.setStale=function(){this.stale=!0};var Sc=Math.pow(2,25),a0=Math.pow(2,24),$p=Math.pow(2,17),Ia=Math.pow(2,16),s0=Math.pow(2,9),l0=Math.pow(2,8),u0=Math.pow(2,1);function au(r){if(r.opacity===0&&!r.placed)return 0;if(r.opacity===1&&r.placed)return 4294967295;var l=r.placed?1:0,f=Math.floor(127*r.opacity);return f*Sc+l*a0+f*$p+l*Ia+f*s0+l*l0+f*u0+l}function Xp(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&r.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}var Tc=0;function vd(r,l,f,g,x,T,E){this.placement=new Oi(r,x,T,E),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=g,this._done=!1}function Ec(r,l,f){this.tileID=r,this.indexedSymbolInstances={},this.bucketInstanceId=f;for(var g=0;g<l.length;g++){var x=l.get(g),T=x.key;this.indexedSymbolInstances[T]||(this.indexedSymbolInstances[T]=[]),this.indexedSymbolInstances[T].push({crossTileID:x.crossTileID,coord:this.getScaledCoordinates(x,r)})}}Xp.prototype.continuePlacement=function(r,l,f,g,x){for(var T=this._bucketParts;this._currentTileIndex<r.length;)if(l.getBucketParts(T,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort(function(E,L){return E.sortKey-L.sortKey}));this._currentPartIndex<T.length;)if(l.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,x())return!0;return!1},vd.prototype.isDone=function(){return this._done},vd.prototype.continuePlacement=function(r,l,f){for(var g=this,x=u.browser.now(),T=function(){var O=u.browser.now()-x;return!g._forceFullPlacement&&2<O};0<=this._currentPlacementIndex;){var E=l[r[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=L)&&(!E.maxzoom||E.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new Xp(E)),this._inProgressLayer.continuePlacement(f[E.source],this.placement,this._showCollisionBoxes,E,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},vd.prototype.commit=function(r){return this.placement.commit(r),this.placement};var sx=512/u.EXTENT/2;function Jp(){this.maxCrossTileID=0}function su(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}function Qp(){this.layerIndexes={},this.crossTileIDs=new Jp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}function eh(r,l){return u.emitValidationErrors(r,l&&l.filter(function(f){return f.identifier!=="source.canvas"}))}Ec.prototype.getScaledCoordinates=function(r,l){var f=sx/Math.pow(2,l.canonical.z-this.tileID.canonical.z);return{x:Math.floor((l.canonical.x*u.EXTENT+r.anchorX)*f),y:Math.floor((l.canonical.y*u.EXTENT+r.anchorY)*f)}},Ec.prototype.findMatches=function(r,l,f){for(var g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z),x=0;x<r.length;x++){var T=r.get(x);if(!T.crossTileID){var E=this.indexedSymbolInstances[T.key];if(E)for(var L=this.getScaledCoordinates(T,l),O=0,j=E;O<j.length;O+=1){var V=j[O];if(Math.abs(V.coord.x-L.x)<=g&&Math.abs(V.coord.y-L.y)<=g&&!f[V.crossTileID]){f[V.crossTileID]=!0,T.crossTileID=V.crossTileID;break}}}}},Jp.prototype.generate=function(){return++this.maxCrossTileID},su.prototype.handleWrapJump=function(r){var l=Math.round((r-this.lng)/360);if(l!==0)for(var f in this.indexes){var g=this.indexes[f],x={};for(var T in g){var E=g[T];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+l),x[E.tileID.key]=E}this.indexes[f]=x}this.lng=r},su.prototype.addBucket=function(r,l,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(var g=0;g<l.symbolInstances.length;g++)l.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});var x=this.usedCrossTileIDs[r.overscaledZ];for(var T in this.indexes){var E=this.indexes[T];if(Number(T)>r.overscaledZ)for(var L in E){var O=E[L];O.tileID.isChildOf(r)&&O.findMatches(l.symbolInstances,r,x)}else{var j=E[r.scaledTo(Number(T)).key];j&&j.findMatches(l.symbolInstances,r,x)}}for(var V=0;V<l.symbolInstances.length;V++){var H=l.symbolInstances.get(V);H.crossTileID||(H.crossTileID=f.generate(),x[H.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ec(r,l.symbolInstances,l.bucketInstanceId),!0},su.prototype.removeBucketCrossTileIDs=function(r,l){for(var f in l.indexedSymbolInstances)for(var g=0,x=l.indexedSymbolInstances[f];g<x.length;g+=1)delete this.usedCrossTileIDs[r][x[g].crossTileID]},su.prototype.removeStaleBuckets=function(r){var l=!1;for(var f in this.indexes){var g=this.indexes[f];for(var x in g)r[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[x]),delete g[x],l=!0)}return l},Qp.prototype.addLayer=function(r,l,f){var g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new su);var x=!1,T={};g.handleWrapJump(f);for(var E=0,L=l;E<L.length;E+=1){var O=L[E],j=O.getBucket(r);j&&r.id===j.layerIds[0]&&(j.bucketInstanceId||(j.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(O.tileID,j,this.crossTileIDs)&&(x=!0),T[j.bucketInstanceId]=!0)}return g.removeStaleBuckets(T)&&(x=!0),x},Qp.prototype.pruneUnusedLayers=function(r){var l={};for(var f in r.forEach(function(g){l[g]=!0}),this.layerIndexes)l[f]||delete this.layerIndexes[f]};var yl,Wm=u.pick(cr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),c0=u.pick(cr,["setCenter","setZoom","setBearing","setPitch"]),p0=function(){var r={},l=u.styleSpec.$version;for(var f in u.styleSpec.$root){var g,x=u.styleSpec.$root[f];x.required&&(g=f==="version"?l:x.type==="array"?[]:{})!=null&&(r[f]=g)}return r}(),lu=((yl=u.Evented)&&(St.__proto__=yl),((St.prototype=Object.create(yl&&yl.prototype)).constructor=St).prototype.loadURL=function(r,l){var f=this;l===void 0&&(l={}),this.fire(new u.Event("dataloading",{dataType:"style"}));var g=typeof l.validate=="boolean"?l.validate:!u.isMapboxURL(r);r=this.map._requestManager.normalizeStyleURL(r,l.accessToken);var x=this.map._requestManager.transformRequest(r,u.ResourceType.Style);this._request=u.getJSON(x,function(T,E){f._request=null,T?f.fire(new u.ErrorEvent(T)):E&&f._load(E,g)})},St.prototype.loadJSON=function(r,l){var f=this;l===void 0&&(l={}),this.fire(new u.Event("dataloading",{dataType:"style"})),this._request=u.browser.frame(function(){f._request=null,f._load(r,l.validate!==!1)})},St.prototype.loadEmpty=function(){this.fire(new u.Event("dataloading",{dataType:"style"})),this._load(p0,!1)},St.prototype._load=function(r,l){if(!l||!eh(this,u.validateStyle(r))){for(var f in this._loaded=!0,(this.stylesheet=r).sources)this.addSource(f,r.sources[f],{validate:!1});r.sprite?this._loadSprite(r.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(r.glyphs);var g=dl(this.stylesheet.layers);this._order=g.map(function(L){return L.id}),this._layers={},this._serializedLayers={};for(var x=0,T=g;x<T.length;x+=1){var E=T[x];(E=u.createStyleLayer(E)).setEventedParent(this,{layer:{id:E.id}}),this._layers[E.id]=E,this._serializedLayers[E.id]=E.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new lc(this.stylesheet.light),this.fire(new u.Event("data",{dataType:"style"})),this.fire(new u.Event("style.load"))}},St.prototype._loadSprite=function(r){var l,f,g,x,T,E,L,O,j,V=this;function H(){if(E)g(E);else if(x&&T){var K=u.browser.getImageData(T),Q={};for(var ee in x){var re=x[ee],ue=re.width,ae=re.height,ye=re.x,he=re.y,me=re.sdf,Ce=re.pixelRatio,ke=re.stretchX,De=re.stretchY,Ve=re.content,qe=new u.RGBAImage({width:ue,height:ae});u.RGBAImage.copy(K,qe,{x:ye,y:he},{x:0,y:0},{width:ue,height:ae}),Q[ee]={data:qe,pixelRatio:Ce,sdf:me,stretchX:ke,stretchY:De,content:Ve}}g(null,Q)}}this._spriteRequest=(l=r,f=this.map._requestManager,g=function(K,Q){if(V._spriteRequest=null,K)V.fire(new u.ErrorEvent(K));else if(Q)for(var ee in Q)V.imageManager.addImage(ee,Q[ee]);V.imageManager.setLoaded(!0),V._availableImages=V.imageManager.listImages(),V.dispatcher.broadcast("setImages",V._availableImages),V.fire(new u.Event("data",{dataType:"style"}))},L=1<u.browser.devicePixelRatio?"@2x":"",O=u.getJSON(f.transformRequest(f.normalizeSpriteURL(l,L,".json"),u.ResourceType.SpriteJSON),function(K,Q){O=null,E||(E=K,x=Q,H())}),j=u.getImage(f.transformRequest(f.normalizeSpriteURL(l,L,".png"),u.ResourceType.SpriteImage),function(K,Q){j=null,E||(E=K,T=Q,H())}),{cancel:function(){O&&(O.cancel(),O=null),j&&(j.cancel(),j=null)}})},St.prototype._validateLayer=function(r){var l=this.sourceCaches[r.source];if(l){var f=r.sourceLayer;if(f){var g=l.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new u.ErrorEvent(new Error('Source layer "'+f+'" does not exist on source "'+g.id+'" as specified by style layer "'+r.id+'"')))}}},St.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()},St.prototype._serializeLayers=function(r){for(var l=[],f=0,g=r;f<g.length;f+=1){var x=this._layers[g[f]];x.type!=="custom"&&l.push(x.serialize())}return l},St.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(var l in this._layers)if(this._layers[l].hasTransition())return!0;return!1},St.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},St.prototype.update=function(r){if(this._loaded){var l=this._changed;if(this._changed){var f=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);for(var x in(f.length||g.length)&&this._updateWorkerLayers(f,g),this._updatedSources){var T=this._updatedSources[x];T==="reload"?this._reloadSource(x):T==="clear"&&this._clearSource(x)}for(var E in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[E].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}for(var L in this.sourceCaches)this.sourceCaches[L].used=!1;for(var O=0,j=this._order;O<j.length;O+=1){var V=this._layers[j[O]];V.recalculate(r,this._availableImages),!V.isHidden(r.zoom)&&V.source&&(this.sourceCaches[V.source].used=!0)}this.light.recalculate(r),this.z=r.zoom,l&&this.fire(new u.Event("data",{dataType:"style"}))}},St.prototype._updateTilesForChangedImages=function(){var r=Object.keys(this._changedImages);if(r.length){for(var l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}},St.prototype._updateWorkerLayers=function(r,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(r),removedIds:l})},St.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},St.prototype.setState=function(r){var l=this;if(this._checkLoaded(),eh(this,u.validateStyle(r)))return!1;(r=u.clone$1(r)).layers=dl(r.layers);var f=function(x,T){if(!x)return[{command:cr.setStyle,args:[T]}];var E=[];try{if(!u.deepEqual(x.version,T.version))return[{command:cr.setStyle,args:[T]}];u.deepEqual(x.center,T.center)||E.push({command:cr.setCenter,args:[T.center]}),u.deepEqual(x.zoom,T.zoom)||E.push({command:cr.setZoom,args:[T.zoom]}),u.deepEqual(x.bearing,T.bearing)||E.push({command:cr.setBearing,args:[T.bearing]}),u.deepEqual(x.pitch,T.pitch)||E.push({command:cr.setPitch,args:[T.pitch]}),u.deepEqual(x.sprite,T.sprite)||E.push({command:cr.setSprite,args:[T.sprite]}),u.deepEqual(x.glyphs,T.glyphs)||E.push({command:cr.setGlyphs,args:[T.glyphs]}),u.deepEqual(x.transition,T.transition)||E.push({command:cr.setTransition,args:[T.transition]}),u.deepEqual(x.light,T.light)||E.push({command:cr.setLight,args:[T.light]});var L={},O=[];(function(V,H,K,Q){var ee,re,ue,ae;for(ee in H=H||{},V=V||{})V.hasOwnProperty(ee)&&(H.hasOwnProperty(ee)||Um(ee,K,Q));for(ee in H)H.hasOwnProperty(ee)&&(V.hasOwnProperty(ee)?u.deepEqual(V[ee],H[ee])||(V[ee].type==="geojson"&&H[ee].type==="geojson"&&xc(V,H,ee)?K.push({command:cr.setGeoJSONSourceData,args:[ee,H[ee].data]}):(ue=H,Um(re=ee,ae=K,Q),jm(re,ue,ae))):jm(ee,H,K))})(x.sources,T.sources,O,L);var j=[];x.layers&&x.layers.forEach(function(V){L[V.source]?E.push({command:cr.removeLayer,args:[V.id]}):j.push(V)}),E=E.concat(O),function(V,H,K){H=H||[];var Q,ee,re,ue,ae,ye,he,me=(V=V||[]).map(Qy),Ce=H.map(Qy),ke=V.reduce(e0,{}),De=H.reduce(e0,{}),Ve=me.slice(),qe=Object.create(null);for(ee=Q=0;Q<me.length;Q++)De.hasOwnProperty(re=me[Q])?ee++:(K.push({command:cr.removeLayer,args:[re]}),Ve.splice(Ve.indexOf(re,ee),1));for(ee=Q=0;Q<Ce.length;Q++)Ve[Ve.length-1-Q]!==(re=Ce[Ce.length-1-Q])&&(ke.hasOwnProperty(re)?(K.push({command:cr.removeLayer,args:[re]}),Ve.splice(Ve.lastIndexOf(re,Ve.length-ee),1)):ee++,K.push({command:cr.addLayer,args:[De[re],ye=Ve[Ve.length-Q]]}),Ve.splice(Ve.length-Q,0,re),qe[re]=!0);for(Q=0;Q<Ce.length;Q++)if(ue=ke[re=Ce[Q]],ae=De[re],!qe[re]&&!u.deepEqual(ue,ae))if(u.deepEqual(ue.source,ae.source)&&u.deepEqual(ue["source-layer"],ae["source-layer"])&&u.deepEqual(ue.type,ae.type)){for(he in Xa(ue.layout,ae.layout,K,re,null,cr.setLayoutProperty),Xa(ue.paint,ae.paint,K,re,null,cr.setPaintProperty),u.deepEqual(ue.filter,ae.filter)||K.push({command:cr.setFilter,args:[re,ae.filter]}),u.deepEqual(ue.minzoom,ae.minzoom)&&u.deepEqual(ue.maxzoom,ae.maxzoom)||K.push({command:cr.setLayerZoomRange,args:[re,ae.minzoom,ae.maxzoom]}),ue)ue.hasOwnProperty(he)&&he!=="layout"&&he!=="paint"&&he!=="filter"&&he!=="metadata"&&he!=="minzoom"&&he!=="maxzoom"&&(he.indexOf("paint.")===0?Xa(ue[he],ae[he],K,re,he.slice(6),cr.setPaintProperty):u.deepEqual(ue[he],ae[he])||K.push({command:cr.setLayerProperty,args:[re,he,ae[he]]}));for(he in ae)ae.hasOwnProperty(he)&&!ue.hasOwnProperty(he)&&he!=="layout"&&he!=="paint"&&he!=="filter"&&he!=="metadata"&&he!=="minzoom"&&he!=="maxzoom"&&(he.indexOf("paint.")===0?Xa(ue[he],ae[he],K,re,he.slice(6),cr.setPaintProperty):u.deepEqual(ue[he],ae[he])||K.push({command:cr.setLayerProperty,args:[re,he,ae[he]]}))}else K.push({command:cr.removeLayer,args:[re]}),ye=Ve[Ve.lastIndexOf(re)+1],K.push({command:cr.addLayer,args:[ae,ye]})}(j,T.layers,E)}catch(V){console.warn("Unable to compute style diff:",V),E=[{command:cr.setStyle,args:[T]}]}return E}(this.serialize(),r).filter(function(x){return!(x.command in c0)});if(f.length===0)return!1;var g=f.filter(function(x){return!(x.command in Wm)});if(0<g.length)throw new Error("Unimplemented: "+g.map(function(x){return x.command}).join(", ")+".");return f.forEach(function(x){x.command!=="setTransition"&&l[x.command].apply(l,x.args)}),this.stylesheet=r,!0},St.prototype.addImage=function(r,l){if(this.getImage(r))return this.fire(new u.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(r,l),this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.fire(new u.Event("data",{dataType:"style"}))},St.prototype.updateImage=function(r,l){this.imageManager.updateImage(r,l)},St.prototype.getImage=function(r){return this.imageManager.getImage(r)},St.prototype.removeImage=function(r){if(!this.getImage(r))return this.fire(new u.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(r),this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.fire(new u.Event("data",{dataType:"style"}))},St.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},St.prototype.addSource=function(r,l,f){var g=this;if(f===void 0&&(f={}),this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error("There is already a source with this ID");if(!l.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(l).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(l.type)&&this._validate(u.validateStyle.source,"sources."+r,l,null,f))){this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);var x=this.sourceCaches[r]=new ks(r,l,this.dispatcher);x.style=this,x.setEventedParent(this,function(){return{isSourceLoaded:g.loaded(),source:x.serialize(),sourceId:r}}),x.onAdd(this.map),this._changed=!0}},St.prototype.removeSource=function(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(var l in this._layers)if(this._layers[l].source===r)return this.fire(new u.ErrorEvent(new Error('Source "'+r+'" cannot be removed while layer "'+l+'" is using it.')));var f=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],f.fire(new u.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),f.setEventedParent(null),f.clearTiles(),f.onRemove&&f.onRemove(this.map),this._changed=!0},St.prototype.setGeoJSONSourceData=function(r,l){this._checkLoaded(),this.sourceCaches[r].getSource().setData(l),this._changed=!0},St.prototype.getSource=function(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()},St.prototype.addLayer=function(r,l,f){f===void 0&&(f={}),this._checkLoaded();var g=r.id;if(this.getLayer(g))this.fire(new u.ErrorEvent(new Error('Layer with id "'+g+'" already exists on this map')));else{var x;if(r.type==="custom"){if(eh(this,u.validateCustomStyleLayer(r)))return;x=u.createStyleLayer(r)}else{if(typeof r.source=="object"&&(this.addSource(g,r.source),r=u.clone$1(r),r=u.extend(r,{source:g})),this._validate(u.validateStyle.layer,"layers."+g,r,{arrayIndex:-1},f))return;x=u.createStyleLayer(r),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[x.id]=x.serialize()}var T=l?this._order.indexOf(l):this._order.length;if(l&&T===-1)this.fire(new u.ErrorEvent(new Error('Layer with id "'+l+'" does not exist on this map.')));else{if(this._order.splice(T,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){var E=this._removedLayers[g];delete this._removedLayers[g],E.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}},St.prototype.moveLayer=function(r,l){if(this._checkLoaded(),this._changed=!0,this._layers[r]){if(r!==l){var f=this._order.indexOf(r);this._order.splice(f,1);var g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new u.ErrorEvent(new Error('Layer with id "'+l+'" does not exist on this map.'))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}}else this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be moved.")))},St.prototype.removeLayer=function(r){this._checkLoaded();var l=this._layers[r];if(l){l.setEventedParent(null);var f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}else this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be removed.")))},St.prototype.getLayer=function(r){return this._layers[r]},St.prototype.hasLayer=function(r){return r in this._layers},St.prototype.setLayerZoomRange=function(r,l,f){this._checkLoaded();var g=this.getLayer(r);g?g.minzoom===l&&g.maxzoom===f||(l!=null&&(g.minzoom=l),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot have zoom extent.")))},St.prototype.setFilter=function(r,l,f){f===void 0&&(f={}),this._checkLoaded();var g=this.getLayer(r);if(g){if(!u.deepEqual(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.validateStyle.filter,"layers."+g.id+".filter",l,null,f)||(g.filter=u.clone$1(l),this._updateLayer(g)))}else this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be filtered.")))},St.prototype.getFilter=function(r){return u.clone$1(this.getLayer(r).filter)},St.prototype.setLayoutProperty=function(r,l,f,g){g===void 0&&(g={}),this._checkLoaded();var x=this.getLayer(r);x?u.deepEqual(x.getLayoutProperty(l),f)||(x.setLayoutProperty(l,f,g),this._updateLayer(x)):this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be styled.")))},St.prototype.getLayoutProperty=function(r,l){var f=this.getLayer(r);if(f)return f.getLayoutProperty(l);this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style.")))},St.prototype.setPaintProperty=function(r,l,f,g){g===void 0&&(g={}),this._checkLoaded();var x=this.getLayer(r);x?u.deepEqual(x.getPaintProperty(l),f)||(x.setPaintProperty(l,f,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new u.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be styled.")))},St.prototype.getPaintProperty=function(r,l){return this.getLayer(r).getPaintProperty(l)},St.prototype.setFeatureState=function(r,l){this._checkLoaded();var f=r.source,g=r.sourceLayer,x=this.sourceCaches[f];if(x!==void 0){var T=x.getSource().type;T==="geojson"&&g?this.fire(new u.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||g?(r.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,r.id,l)):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+f+"' does not exist in the map's style.")))},St.prototype.removeFeatureState=function(r,l){this._checkLoaded();var f=r.source,g=this.sourceCaches[f];if(g!==void 0){var x=g.getSource().type,T=x==="vector"?r.sourceLayer:void 0;x!=="vector"||T?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):g.removeFeatureState(T,r.id,l):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+f+"' does not exist in the map's style.")))},St.prototype.getFeatureState=function(r){this._checkLoaded();var l=r.source,f=r.sourceLayer,g=this.sourceCaches[l];if(g!==void 0){if(g.getSource().type!=="vector"||f)return r.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,r.id);this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+l+"' does not exist in the map's style.")))},St.prototype.getTransition=function(){return u.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},St.prototype.serialize=function(){return u.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:u.mapObject(this.sourceCaches,function(r){return r.serialize()}),layers:this._serializeLayers(this._order)},function(r){return r!==void 0})},St.prototype._updateLayer=function(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._changed=!0},St.prototype._flattenAndSortRenderedFeatures=function(r){for(var l=this,f=function(ke){return l._layers[ke].type==="fill-extrusion"},g={},x=[],T=this._order.length-1;0<=T;T--){var E=this._order[T];if(f(E)){g[E]=T;for(var L=0,O=r;L<O.length;L+=1){var j=O[L][E];if(j)for(var V=0,H=j;V<H.length;V+=1)x.push(H[V])}}}x.sort(function(ke,De){return De.intersectionZ-ke.intersectionZ});for(var K=[],Q=this._order.length-1;0<=Q;Q--){var ee=this._order[Q];if(f(ee))for(var re=x.length-1;0<=re;re--){var ue=x[re].feature;if(g[ue.layer.id]<Q)break;K.push(ue),x.pop()}else for(var ae=0,ye=r;ae<ye.length;ae+=1){var he=ye[ae][ee];if(he)for(var me=0,Ce=he;me<Ce.length;me+=1)K.push(Ce[me].feature)}}return K},St.prototype.queryRenderedFeatures=function(r,l,f){l&&l.filter&&this._validate(u.validateStyle.filter,"queryRenderedFeatures.filter",l.filter,null,l);var g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var x=0,T=l.layers;x<T.length;x+=1){var E=T[x],L=this._layers[E];if(!L)return this.fire(new u.ErrorEvent(new Error("The layer '"+E+"' does not exist in the map's style and cannot be queried for features."))),[];g[L.source]=!0}}var O=[];for(var j in l.availableImages=this._availableImages,this.sourceCaches)l.layers&&!g[j]||O.push(Jo(this.sourceCaches[j],this._layers,this._serializedLayers,r,l,f));return this.placement&&O.push(function(V,H,K,Q,ee,re,ue){for(var ae={},ye=re.queryRenderedSymbols(Q),he=[],me=0,Ce=Object.keys(ye).map(Number);me<Ce.length;me+=1)he.push(ue[Ce[me]]);he.sort(io);for(var ke=function(){var lt=Ve[De],ht=lt.featureIndex.lookupSymbolFeatures(ye[lt.bucketInstanceId],H,lt.bucketIndex,lt.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,V);for(var dt in ht){var Tt=ae[dt]=ae[dt]||[],mt=ht[dt];mt.sort(function(Rt,_t){var zt=lt.featureSortOrder;if(zt){var er=zt.indexOf(Rt.featureIndex);return zt.indexOf(_t.featureIndex)-er}return _t.featureIndex-Rt.featureIndex});for(var Mt=0,Ut=mt;Mt<Ut.length;Mt+=1)Tt.push(Ut[Mt])}},De=0,Ve=he;De<Ve.length;De+=1)ke();function qe(lt){ae[lt].forEach(function(ht){var dt=ht.feature,Tt=K[V[lt].source].getFeatureState(dt.layer["source-layer"],dt.id);dt.source=dt.layer.source,dt.layer["source-layer"]&&(dt.sourceLayer=dt.layer["source-layer"]),dt.state=Tt})}for(var Ke in ae)qe(Ke);return ae}(this._layers,this._serializedLayers,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(O)},St.prototype.querySourceFeatures=function(r,l){l&&l.filter&&this._validate(u.validateStyle.filter,"querySourceFeatures.filter",l.filter,null,l);var f=this.sourceCaches[r];return f?function(g,x){for(var T=g.getRenderableIds().map(function(H){return g.getTileByID(H)}),E=[],L={},O=0;O<T.length;O++){var j=T[O],V=j.tileID.canonical.key;L[V]||(L[V]=!0,j.querySourceFeatures(E,x))}return E}(f,l):[]},St.prototype.addSourceType=function(r,l,f){return St.getSourceType(r)?f(new Error('A source type called "'+r+'" already exists.')):(St.setSourceType(r,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:l.workerSourceURL},f):f(null,null))},St.prototype.getLight=function(){return this.light.getLight()},St.prototype.setLight=function(r,l){l===void 0&&(l={}),this._checkLoaded();var f=this.light.getLight(),g=!1;for(var x in r)if(!u.deepEqual(r[x],f[x])){g=!0;break}if(g){var T={now:u.browser.now(),transition:u.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(T)}},St.prototype._validate=function(r,l,f,g,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&eh(this,r.call(u.validateStyle,u.extend({key:l,style:this.serialize(),value:f,styleSpec:u.styleSpec},g)))},St.prototype._remove=function(){for(var r in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[r].setEventedParent(null);for(var l in this.sourceCaches)this.sourceCaches[l].clearTiles(),this.sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},St.prototype._clearSource=function(r){this.sourceCaches[r].clearTiles()},St.prototype._reloadSource=function(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()},St.prototype._updateSources=function(r){for(var l in this.sourceCaches)this.sourceCaches[l].update(r)},St.prototype._generateCollisionBoxes=function(){for(var r in this.sourceCaches)this._reloadSource(r)},St.prototype._updatePlacement=function(r,l,f,g,x){x===void 0&&(x=!1);for(var T=!1,E=!1,L={},O=0,j=this._order;O<j.length;O+=1){var V=this._layers[j[O]];if(V.type==="symbol"){if(!L[V.source]){var H=this.sourceCaches[V.source];L[V.source]=H.getRenderableIds(!0).map(function(ue){return H.getTileByID(ue)}).sort(function(ue,ae){return ae.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(ae.tileID)?-1:1)})}var K=this.crossTileSymbolIndex.addLayer(V,L[V.source],r.center.lng);T=T||K}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.browser.now(),r.zoom))&&(this.pauseablePlacement=new vd(r,this._order,x,l,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.browser.now()),E=!0),T&&this.pauseablePlacement.placement.setStale()),E||T)for(var Q=0,ee=this._order;Q<ee.length;Q+=1){var re=this._layers[ee[Q]];re.type==="symbol"&&this.placement.updateLayerOpacities(re,L[re.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.browser.now())},St.prototype._releaseSymbolFadeTiles=function(){for(var r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()},St.prototype.getImages=function(r,l,f){this.imageManager.getImages(l.icons,f),this._updateTilesForChangedImages();var g=this.sourceCaches[l.source];g&&g.setDependencies(l.tileID.key,l.type,l.icons)},St.prototype.getGlyphs=function(r,l,f){this.glyphManager.getGlyphs(l.stacks,f)},St.prototype.getResource=function(r,l,f){return u.makeRequest(l,f)},St);function St(r,l){var f=this;l===void 0&&(l={}),yl.call(this),this.map=r,this.dispatcher=new wa(Ms(),this),this.imageManager=new qt,this.imageManager.setEventedParent(this),this.glyphManager=new Rn(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new nn(256,512),this.crossTileSymbolIndex=new Qp,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.getReferrer());var g=this;this._rtlTextPluginCallback=St.registerForPluginStateChange(function(x){g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},function(T,E){if(u.triggerPluginCompletionEvent(T),E&&E.every(function(O){return O}))for(var L in g.sourceCaches)g.sourceCaches[L].reload()})}),this.on("data",function(x){if(x.dataType==="source"&&x.sourceDataType==="metadata"){var T=f.sourceCaches[x.sourceId];if(T){var E=T.getSource();if(E&&E.vectorLayerIds)for(var L in f._layers){var O=f._layers[L];O.source===E.id&&f._validateLayer(O)}}}})}lu.getSourceType=function(r){return zo[r]},lu.setSourceType=function(r,l){zo[r]=l},lu.registerForPluginStateChange=u.registerForPluginStateChange;var vl=u.createLayout([{name:"a_pos",type:"Int16",components:2}]),_d=He(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),h0=He(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),d0=He(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),f0=He(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),ka=He("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),lx=He(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),uu=He(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),m0=He("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ic=He("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),th=He("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ux=He(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),cx=He(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),px=He(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),g0=He(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),kc=He(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Qa=He(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),y0=He(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),v0=He(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),rh=He(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),yt=He(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ym=He(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),_0=He(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),x0=He(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),nh=He(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),ih=He(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Km=He(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function He(r,l){var f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=l.match(/attribute ([\w]+) ([\w]+)/g),x=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=T?T.concat(x):x,L={};return{fragmentSource:r=r.replace(f,function(O,j,V,H,K){return L[K]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_`+K+`
varying `+V+" "+H+" "+K+`;
#else
uniform `+V+" "+H+" u_"+K+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+K+`
    `+V+" "+H+" "+K+" = u_"+K+`;
#endif
`}),vertexSource:l=l.replace(f,function(O,j,V,H,K){var Q=H==="float"?"vec2":"vec4",ee=K.match(/color/)?"color":Q;return L[K]?j==="define"?`
#ifndef HAS_UNIFORM_u_`+K+`
uniform lowp float u_`+K+`_t;
attribute `+V+" "+Q+" a_"+K+`;
varying `+V+" "+H+" "+K+`;
#else
uniform `+V+" "+H+" u_"+K+`;
#endif
`:ee=="vec4"?`
#ifndef HAS_UNIFORM_u_`+K+`
    `+K+" = a_"+K+`;
#else
    `+V+" "+H+" "+K+" = u_"+K+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+K+`
    `+K+" = unpack_mix_"+ee+"(a_"+K+", u_"+K+`_t);
#else
    `+V+" "+H+" "+K+" = u_"+K+`;
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_`+K+`
uniform lowp float u_`+K+`_t;
attribute `+V+" "+Q+" a_"+K+`;
#else
uniform `+V+" "+H+" u_"+K+`;
#endif
`:ee=="vec4"?`
#ifndef HAS_UNIFORM_u_`+K+`
    `+V+" "+H+" "+K+" = a_"+K+`;
#else
    `+V+" "+H+" "+K+" = u_"+K+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+K+`
    `+V+" "+H+" "+K+" = unpack_mix_"+ee+"(a_"+K+", u_"+K+`_t);
#else
    `+V+" "+H+" "+K+" = u_"+K+`;
#endif
`}),staticAttributes:g,staticUniforms:E}}function Mc(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}var $m=Object.freeze({__proto__:null,prelude:_d,background:h0,backgroundPattern:d0,circle:f0,clippingMask:ka,heatmap:lx,heatmapTexture:uu,collisionBox:m0,collisionCircle:Ic,debug:th,fill:ux,fillOutline:cx,fillOutlinePattern:px,fillPattern:g0,fillExtrusion:kc,fillExtrusionPattern:Qa,hillshadePrepare:y0,hillshade:v0,line:rh,lineGradient:yt,linePattern:Ym,lineSDF:_0,raster:x0,symbolIcon:nh,symbolSDF:ih,symbolTextAndIcon:Km});function Xm(r){for(var l=[],f=0;f<r.length;f++)if(r[f]!==null){var g=r[f].split(" ");l.push(g.pop())}return l}function Jm(r,l,f,g,x,T){var E=r.gl;this.program=E.createProgram();for(var L=Xm(f.staticAttributes),O=g?g.getBinderAttributes():[],j=L.concat(O),V=f.staticUniforms?Xm(f.staticUniforms):[],H=g?g.getBinderUniforms():[],K=[],Q=0,ee=V.concat(H);Q<ee.length;Q+=1){var re=ee[Q];K.indexOf(re)<0&&K.push(re)}var ue=g?g.defines():[];T&&ue.push("#define OVERDRAW_INSPECTOR;");var ae=ue.concat(_d.fragmentSource,f.fragmentSource).join(`
`),ye=ue.concat(_d.vertexSource,f.vertexSource).join(`
`),he=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(he,ae),E.compileShader(he),E.attachShader(this.program,he);var me=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(me,ye),E.compileShader(me),E.attachShader(this.program,me),this.attributes={};var Ce={};this.numAttributes=j.length;for(var ke=0;ke<this.numAttributes;ke++)j[ke]&&(E.bindAttribLocation(this.program,ke,j[ke]),this.attributes[j[ke]]=ke);E.linkProgram(this.program),E.deleteShader(me),E.deleteShader(he);for(var De=0;De<K.length;De++){var Ve=K[De];if(Ve&&!Ce[Ve]){var qe=E.getUniformLocation(this.program,Ve);qe&&(Ce[Ve]=qe)}}this.fixedUniforms=x(r,Ce),this.binderUniforms=g?g.getUniforms(r,Ce):[]}}}function w0(r,l,f){var g=1/Gi(f,1,l.transform.tileZoom),x=Math.pow(2,f.tileID.overscaledZ),T=f.tileSize*Math.pow(2,l.transform.tileZoom)/x,E=T*(f.tileID.canonical.x+f.tileID.wrap*x),L=T*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[g,r.fromScale,r.toScale],u_fade:r.t,u_pixel_coord_upper:[E>>16,L>>16],u_pixel_coord_lower:[65535&E,65535&L]}}function Qm(r,l,f,g){var x=l.style.light,T=x.properties.get("position"),E=[T.x,T.y,T.z],L=u.create$1();x.properties.get("anchor")==="viewport"&&u.fromRotation(L,-l.transform.angle),u.transformMat3(E,E,L);var O=x.properties.get("color");return{u_matrix:r,u_lightpos:E,u_lightintensity:x.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+f,u_opacity:g}}function xd(r){return{u_matrix:r}}function lo(r,l,f,g){return u.extend(xd(r),w0(f,l,g))}function _l(r,l,f,g){var x,T,E=r.transform;if(g.paint.get("circle-pitch-alignment")==="map"){var L=Gi(f,1,E.zoom);x=!0,T=[L,L]}else x=!1,T=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:r.translatePosMatrix(l.posMatrix,f,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:u.browser.devicePixelRatio,u_extrude_scale:T}}function wd(r){return{u_matrix:r}}function oh(r,l,f){var g=r.transform;return{u_matrix:bd(r,l,f),u_ratio:1/Gi(l,1,g.zoom),u_device_pixel_ratio:u.browser.devicePixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}}Mc.prototype.bind=function(r,l,f,g,x,T,E,L){this.context=r;for(var O=this.boundPaintVertexBuffers.length!==g.length,j=0;!O&&j<g.length;j++)this.boundPaintVertexBuffers[j]!==g[j]&&(O=!0);r.extVertexArrayObject&&this.vao&&this.boundProgram===l&&this.boundLayoutVertexBuffer===f&&!O&&this.boundIndexBuffer===x&&this.boundVertexOffset===T&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===L?(r.bindVertexArrayOES.set(this.vao),E&&E.bind(),x&&x.dynamicDraw&&x.bind(),L&&L.bind()):this.freshBind(l,f,g,x,T,E,L)},Mc.prototype.freshBind=function(r,l,f,g,x,T,E){var L,O=r.numAttributes,j=this.context,V=j.gl;if(j.extVertexArrayObject)this.vao&&this.destroy(),this.vao=j.extVertexArrayObject.createVertexArrayOES(),j.bindVertexArrayOES.set(this.vao),L=0,this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=E;else{L=j.currentNumAttributes||0;for(var H=O;H<L;H++)V.disableVertexAttribArray(H)}l.enableAttributes(V,r);for(var K=0,Q=f;K<Q.length;K+=1)Q[K].enableAttributes(V,r);T&&T.enableAttributes(V,r),E&&E.enableAttributes(V,r),l.bind(),l.setVertexAttribPointers(V,r,x);for(var ee=0,re=f;ee<re.length;ee+=1){var ue=re[ee];ue.bind(),ue.setVertexAttribPointers(V,r,x)}T&&(T.bind(),T.setVertexAttribPointers(V,r,x)),g&&g.bind(),E&&(E.bind(),E.setVertexAttribPointers(V,r,x)),j.currentNumAttributes=O},Mc.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},Jm.prototype.draw=function(r,l,f,g,x,T,E,L,O,j,V,H,K,Q,ee,re){var ue,ae=r.gl;if(!this.failedToCreate){for(var ye in r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(g),r.setColorMode(x),r.setCullFace(T),this.fixedUniforms)this.fixedUniforms[ye].set(E[ye]);Q&&Q.setUniforms(r,this.binderUniforms,H,{zoom:K});for(var he=((ue={})[ae.LINES]=2,ue[ae.TRIANGLES]=3,ue[ae.LINE_STRIP]=1,ue[l]),me=0,Ce=V.get();me<Ce.length;me+=1){var ke=Ce[me],De=ke.vaos||(ke.vaos={});(De[L]||(De[L]=new Mc)).bind(r,this,O,Q?Q.getPaintVertexBuffers():[],j,ke.vertexOffset,ee,re),ae.drawElements(l,ke.primitiveLength*he,ae.UNSIGNED_SHORT,ke.primitiveOffset*he*2)}}};var eg=function(r,l,f){return f===void 0&&(f=1),{u_matrix:r,u_color:l,u_overlay:0,u_overlay_scale:f}};function Or(r,l){return 1/Gi(r,1,l.tileZoom)}function bd(r,l,f){return r.translatePosMatrix(l.tileID.posMatrix,l,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function No(r,l,f,g,x){return{u_matrix:r,u_tl_parent:l,u_scale_parent:f,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:0<(E=x.paint.get("raster-saturation"))?1-1/(1.001-E):-E,u_contrast_factor:0<(T=x.paint.get("raster-contrast"))?1/(1-T):1+T,u_spin_weights:function(L){L*=Math.PI/180;var O=Math.sin(L),j=Math.cos(L);return[(2*j+1)/3,(-Math.sqrt(3)*O-j+1)/3,(Math.sqrt(3)*O-j+1)/3]}(x.paint.get("raster-hue-rotate"))};var T,E}function cu(r,l,f,g,x,T,E,L,O,j){var V=x.transform;return{u_is_size_zoom_constant:+(r==="constant"||r==="source"),u_is_size_feature_constant:+(r==="constant"||r==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:V.cameraToCenterDistance,u_pitch:V.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:V.width/V.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:E,u_coord_matrix:L,u_is_text:+O,u_pitch_with_map:+g,u_texsize:j,u_texture:0}}function Ac(r,l,f,g,x,T,E,L,O,j,V){var H=x.transform;return u.extend(cu(r,l,f,g,x,T,E,L,O,j),{u_gamma_scale:g?Math.cos(H._pitch)*H.cameraToCenterDistance:1,u_device_pixel_ratio:u.browser.devicePixelRatio,u_is_halo:+V})}var sa,tg={fillExtrusion:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_lightpos:new u.Uniform3f(r,l.u_lightpos),u_lightintensity:new u.Uniform1f(r,l.u_lightintensity),u_lightcolor:new u.Uniform3f(r,l.u_lightcolor),u_vertical_gradient:new u.Uniform1f(r,l.u_vertical_gradient),u_opacity:new u.Uniform1f(r,l.u_opacity)}},fillExtrusionPattern:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_lightpos:new u.Uniform3f(r,l.u_lightpos),u_lightintensity:new u.Uniform1f(r,l.u_lightintensity),u_lightcolor:new u.Uniform3f(r,l.u_lightcolor),u_vertical_gradient:new u.Uniform1f(r,l.u_vertical_gradient),u_height_factor:new u.Uniform1f(r,l.u_height_factor),u_image:new u.Uniform1i(r,l.u_image),u_texsize:new u.Uniform2f(r,l.u_texsize),u_pixel_coord_upper:new u.Uniform2f(r,l.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(r,l.u_pixel_coord_lower),u_scale:new u.Uniform3f(r,l.u_scale),u_fade:new u.Uniform1f(r,l.u_fade),u_opacity:new u.Uniform1f(r,l.u_opacity)}},fill:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix)}},fillPattern:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_image:new u.Uniform1i(r,l.u_image),u_texsize:new u.Uniform2f(r,l.u_texsize),u_pixel_coord_upper:new u.Uniform2f(r,l.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(r,l.u_pixel_coord_lower),u_scale:new u.Uniform3f(r,l.u_scale),u_fade:new u.Uniform1f(r,l.u_fade)}},fillOutline:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_world:new u.Uniform2f(r,l.u_world)}},fillOutlinePattern:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_world:new u.Uniform2f(r,l.u_world),u_image:new u.Uniform1i(r,l.u_image),u_texsize:new u.Uniform2f(r,l.u_texsize),u_pixel_coord_upper:new u.Uniform2f(r,l.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(r,l.u_pixel_coord_lower),u_scale:new u.Uniform3f(r,l.u_scale),u_fade:new u.Uniform1f(r,l.u_fade)}},circle:function(r,l){return{u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_scale_with_map:new u.Uniform1i(r,l.u_scale_with_map),u_pitch_with_map:new u.Uniform1i(r,l.u_pitch_with_map),u_extrude_scale:new u.Uniform2f(r,l.u_extrude_scale),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_matrix:new u.UniformMatrix4f(r,l.u_matrix)}},collisionBox:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_pixels_to_tile_units:new u.Uniform1f(r,l.u_pixels_to_tile_units),u_extrude_scale:new u.Uniform2f(r,l.u_extrude_scale),u_overscale_factor:new u.Uniform1f(r,l.u_overscale_factor)}},collisionCircle:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_inv_matrix:new u.UniformMatrix4f(r,l.u_inv_matrix),u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_viewport_size:new u.Uniform2f(r,l.u_viewport_size)}},debug:function(r,l){return{u_color:new u.UniformColor(r,l.u_color),u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_overlay:new u.Uniform1i(r,l.u_overlay),u_overlay_scale:new u.Uniform1f(r,l.u_overlay_scale)}},clippingMask:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix)}},heatmap:function(r,l){return{u_extrude_scale:new u.Uniform1f(r,l.u_extrude_scale),u_intensity:new u.Uniform1f(r,l.u_intensity),u_matrix:new u.UniformMatrix4f(r,l.u_matrix)}},heatmapTexture:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_world:new u.Uniform2f(r,l.u_world),u_image:new u.Uniform1i(r,l.u_image),u_color_ramp:new u.Uniform1i(r,l.u_color_ramp),u_opacity:new u.Uniform1f(r,l.u_opacity)}},hillshade:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_image:new u.Uniform1i(r,l.u_image),u_latrange:new u.Uniform2f(r,l.u_latrange),u_light:new u.Uniform2f(r,l.u_light),u_shadow:new u.UniformColor(r,l.u_shadow),u_highlight:new u.UniformColor(r,l.u_highlight),u_accent:new u.UniformColor(r,l.u_accent)}},hillshadePrepare:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_image:new u.Uniform1i(r,l.u_image),u_dimension:new u.Uniform2f(r,l.u_dimension),u_zoom:new u.Uniform1f(r,l.u_zoom),u_maxzoom:new u.Uniform1f(r,l.u_maxzoom),u_unpack:new u.Uniform4f(r,l.u_unpack)}},line:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_ratio:new u.Uniform1f(r,l.u_ratio),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(r,l.u_units_to_pixels)}},lineGradient:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_ratio:new u.Uniform1f(r,l.u_ratio),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(r,l.u_units_to_pixels),u_image:new u.Uniform1i(r,l.u_image)}},linePattern:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_texsize:new u.Uniform2f(r,l.u_texsize),u_ratio:new u.Uniform1f(r,l.u_ratio),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_image:new u.Uniform1i(r,l.u_image),u_units_to_pixels:new u.Uniform2f(r,l.u_units_to_pixels),u_scale:new u.Uniform3f(r,l.u_scale),u_fade:new u.Uniform1f(r,l.u_fade)}},lineSDF:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_ratio:new u.Uniform1f(r,l.u_ratio),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(r,l.u_units_to_pixels),u_patternscale_a:new u.Uniform2f(r,l.u_patternscale_a),u_patternscale_b:new u.Uniform2f(r,l.u_patternscale_b),u_sdfgamma:new u.Uniform1f(r,l.u_sdfgamma),u_image:new u.Uniform1i(r,l.u_image),u_tex_y_a:new u.Uniform1f(r,l.u_tex_y_a),u_tex_y_b:new u.Uniform1f(r,l.u_tex_y_b),u_mix:new u.Uniform1f(r,l.u_mix)}},raster:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_tl_parent:new u.Uniform2f(r,l.u_tl_parent),u_scale_parent:new u.Uniform1f(r,l.u_scale_parent),u_buffer_scale:new u.Uniform1f(r,l.u_buffer_scale),u_fade_t:new u.Uniform1f(r,l.u_fade_t),u_opacity:new u.Uniform1f(r,l.u_opacity),u_image0:new u.Uniform1i(r,l.u_image0),u_image1:new u.Uniform1i(r,l.u_image1),u_brightness_low:new u.Uniform1f(r,l.u_brightness_low),u_brightness_high:new u.Uniform1f(r,l.u_brightness_high),u_saturation_factor:new u.Uniform1f(r,l.u_saturation_factor),u_contrast_factor:new u.Uniform1f(r,l.u_contrast_factor),u_spin_weights:new u.Uniform3f(r,l.u_spin_weights)}},symbolIcon:function(r,l){return{u_is_size_zoom_constant:new u.Uniform1i(r,l.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(r,l.u_is_size_feature_constant),u_size_t:new u.Uniform1f(r,l.u_size_t),u_size:new u.Uniform1f(r,l.u_size),u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_pitch:new u.Uniform1f(r,l.u_pitch),u_rotate_symbol:new u.Uniform1i(r,l.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(r,l.u_aspect_ratio),u_fade_change:new u.Uniform1f(r,l.u_fade_change),u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(r,l.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(r,l.u_coord_matrix),u_is_text:new u.Uniform1i(r,l.u_is_text),u_pitch_with_map:new u.Uniform1i(r,l.u_pitch_with_map),u_texsize:new u.Uniform2f(r,l.u_texsize),u_texture:new u.Uniform1i(r,l.u_texture)}},symbolSDF:function(r,l){return{u_is_size_zoom_constant:new u.Uniform1i(r,l.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(r,l.u_is_size_feature_constant),u_size_t:new u.Uniform1f(r,l.u_size_t),u_size:new u.Uniform1f(r,l.u_size),u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_pitch:new u.Uniform1f(r,l.u_pitch),u_rotate_symbol:new u.Uniform1i(r,l.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(r,l.u_aspect_ratio),u_fade_change:new u.Uniform1f(r,l.u_fade_change),u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(r,l.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(r,l.u_coord_matrix),u_is_text:new u.Uniform1i(r,l.u_is_text),u_pitch_with_map:new u.Uniform1i(r,l.u_pitch_with_map),u_texsize:new u.Uniform2f(r,l.u_texsize),u_texture:new u.Uniform1i(r,l.u_texture),u_gamma_scale:new u.Uniform1f(r,l.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(r,l.u_is_halo)}},symbolTextAndIcon:function(r,l){return{u_is_size_zoom_constant:new u.Uniform1i(r,l.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(r,l.u_is_size_feature_constant),u_size_t:new u.Uniform1f(r,l.u_size_t),u_size:new u.Uniform1f(r,l.u_size),u_camera_to_center_distance:new u.Uniform1f(r,l.u_camera_to_center_distance),u_pitch:new u.Uniform1f(r,l.u_pitch),u_rotate_symbol:new u.Uniform1i(r,l.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(r,l.u_aspect_ratio),u_fade_change:new u.Uniform1f(r,l.u_fade_change),u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(r,l.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(r,l.u_coord_matrix),u_is_text:new u.Uniform1i(r,l.u_is_text),u_pitch_with_map:new u.Uniform1i(r,l.u_pitch_with_map),u_texsize:new u.Uniform2f(r,l.u_texsize),u_texsize_icon:new u.Uniform2f(r,l.u_texsize_icon),u_texture:new u.Uniform1i(r,l.u_texture),u_texture_icon:new u.Uniform1i(r,l.u_texture_icon),u_gamma_scale:new u.Uniform1f(r,l.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(r,l.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(r,l.u_is_halo)}},background:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_opacity:new u.Uniform1f(r,l.u_opacity),u_color:new u.UniformColor(r,l.u_color)}},backgroundPattern:function(r,l){return{u_matrix:new u.UniformMatrix4f(r,l.u_matrix),u_opacity:new u.Uniform1f(r,l.u_opacity),u_image:new u.Uniform1i(r,l.u_image),u_pattern_tl_a:new u.Uniform2f(r,l.u_pattern_tl_a),u_pattern_br_a:new u.Uniform2f(r,l.u_pattern_br_a),u_pattern_tl_b:new u.Uniform2f(r,l.u_pattern_tl_b),u_pattern_br_b:new u.Uniform2f(r,l.u_pattern_br_b),u_texsize:new u.Uniform2f(r,l.u_texsize),u_mix:new u.Uniform1f(r,l.u_mix),u_pattern_size_a:new u.Uniform2f(r,l.u_pattern_size_a),u_pattern_size_b:new u.Uniform2f(r,l.u_pattern_size_b),u_scale_a:new u.Uniform1f(r,l.u_scale_a),u_scale_b:new u.Uniform1f(r,l.u_scale_b),u_pixel_coord_upper:new u.Uniform2f(r,l.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(r,l.u_pixel_coord_lower),u_tile_units_to_pixels:new u.Uniform1f(r,l.u_tile_units_to_pixels)}}};function ah(r,l,f,g,x,T,E){for(var L=r.context,O=L.gl,j=r.useProgram("collisionBox"),V=[],H=0,K=0,Q=0;Q<g.length;Q++){var ee=g[Q],re=l.getTile(ee),ue=re.getBucket(f);if(ue){var ae=ee.posMatrix;x[0]===0&&x[1]===0||(ae=r.translatePosMatrix(ee.posMatrix,re,x,T));var ye=E?ue.textCollisionBox:ue.iconCollisionBox,he=ue.collisionCircleArray;if(0<he.length){var me=u.create(),Ce=ae;u.mul(me,ue.placementInvProjMatrix,r.transform.glCoordMatrix),u.mul(me,me,ue.placementViewportMatrix),V.push({circleArray:he,circleOffset:K,transform:Ce,invTransform:me}),K=H+=he.length/4}ye&&j.draw(L,O.LINES,vr.disabled,Ln.disabled,r.colorModeForRenderPass(),xn.disabled,(ke=ae,De=r.transform,qe=Gi(Ve=re,1,De.zoom),Ke=Math.pow(2,De.zoom-Ve.tileID.overscaledZ),lt=Ve.tileID.overscaleFactor(),{u_matrix:ke,u_camera_to_center_distance:De.cameraToCenterDistance,u_pixels_to_tile_units:qe,u_extrude_scale:[De.pixelsToGLUnits[0]/(qe*Ke),De.pixelsToGLUnits[1]/(qe*Ke)],u_overscale_factor:lt}),f.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,null,r.transform.zoom,null,null,ye.collisionVertexBuffer)}}var ke,De,Ve,qe,Ke,lt,ht,dt,Tt;if(E&&V.length){var mt=r.useProgram("collisionCircle"),Mt=new u.StructArrayLayout2f1f2i16;Mt.resize(4*H),Mt._trim();for(var Ut=0,Rt=0,_t=V;Rt<_t.length;Rt+=1)for(var zt=_t[Rt],er=0;er<zt.circleArray.length/4;er++){var Ot=4*er,Br=zt.circleArray[0+Ot],ur=zt.circleArray[1+Ot],Fn=zt.circleArray[2+Ot],ni=zt.circleArray[3+Ot];Mt.emplace(Ut++,Br,ur,Fn,ni,0),Mt.emplace(Ut++,Br,ur,Fn,ni,1),Mt.emplace(Ut++,Br,ur,Fn,ni,2),Mt.emplace(Ut++,Br,ur,Fn,ni,3)}(!sa||sa.length<2*H)&&(sa=function(){var En=2*H,In=new u.StructArrayLayout3ui6;In.resize(En),In._trim();for(var Di=0;Di<En;Di++){var Ui=6*Di;In.uint16[0+Ui]=4*Di+0,In.uint16[1+Ui]=4*Di+1,In.uint16[2+Ui]=4*Di+2,In.uint16[3+Ui]=4*Di+2,In.uint16[4+Ui]=4*Di+3,In.uint16[5+Ui]=4*Di+0}return In}());for(var Li=L.createIndexBuffer(sa,!0),ki=L.createVertexBuffer(Mt,u.collisionCircleLayout.members,!0),Tr=0,Xi=V;Tr<Xi.length;Tr+=1){var Pi=Xi[Tr],Pr=(ht=Pi.transform,dt=Pi.invTransform,Tt=r.transform,{u_matrix:ht,u_inv_matrix:dt,u_camera_to_center_distance:Tt.cameraToCenterDistance,u_viewport_size:[Tt.width,Tt.height]});mt.draw(L,O.TRIANGLES,vr.disabled,Ln.disabled,r.colorModeForRenderPass(),xn.disabled,Pr,f.id,ki,Li,u.SegmentVector.simpleSegment(0,2*Pi.circleOffset,Pi.circleArray.length,Pi.circleArray.length/2),null,r.transform.zoom,null,null,null)}ki.destroy(),Li.destroy()}}var sh=u.identity(new Float32Array(16));function Oo(r,l,f,g,x,T,E,L,O,j,V){var H,K,Q,ee,re,ue,ae,ye,he,me,Ce=r.text.placedSymbolArray,ke=r.text.dynamicLayoutVertexArray,De=r.icon.dynamicLayoutVertexArray,Ve={};ke.clear();for(var qe=0;qe<Ce.length;qe++){var Ke=Ce.get(qe),lt=Ke.hidden||!Ke.crossTileID||r.allowVerticalPlacement&&!Ke.placedOrientation?null:g[Ke.crossTileID];if(lt){var ht=new u.Point(Ke.anchorX,Ke.anchorY),dt=Ti(ht,f?L:E),Tt=fl(T.cameraToCenterDistance,dt.signedDistanceFromCamera),mt=x.evaluateSizeForFeature(r.textSizeData,j,Ke)*Tt/u.ONE_EM;f&&(mt*=r.tilePixelRatio/O);for(var Mt=(H=lt.anchor,K=lt.width,Q=lt.height,ee=lt.textOffset,re=lt.textBoxScale,ue=mt,ae=u.getAnchorAlignment(H),ye=-(ae.horizontalAlign-.5)*K,he=-(ae.verticalAlign-.5)*Q,me=u.evaluateVariableOffset(H,ee),new u.Point((ye/re+me[0])*ue,(he/re+me[1])*ue)),Ut=f?Ti(ht.add(Mt),E).point:dt.point.add(l?Mt.rotate(-T.angle):Mt),Rt=r.allowVerticalPlacement&&Ke.placedOrientation===u.WritingMode.vertical?Math.PI/2:0,_t=0;_t<Ke.numGlyphs;_t++)u.addDynamicAttributes(ke,Ut,Rt);V&&0<=Ke.associatedIconIndex&&(Ve[Ke.associatedIconIndex]={shiftedAnchor:Ut,angle:Rt})}else ou(Ke.numGlyphs,ke)}if(V){De.clear();for(var zt=r.icon.placedSymbolArray,er=0;er<zt.length;er++){var Ot=zt.get(er);if(Ot.hidden)ou(Ot.numGlyphs,De);else{var Br=Ve[er];if(Br)for(var ur=0;ur<Ot.numGlyphs;ur++)u.addDynamicAttributes(De,Br.shiftedAnchor,Br.angle);else ou(Ot.numGlyphs,De)}}r.icon.dynamicLayoutVertexBuffer.updateData(De)}r.text.dynamicLayoutVertexBuffer.updateData(ke)}function Lc(r,l,f,g,x,T,E,L,O,j,V,H){for(var K=r.context,Q=K.gl,ee=r.transform,re=L==="map",ue=O==="map",ae=re&&f.layout.get("symbol-placement")!=="point",ye=re&&!ue&&!ae,he=f.layout.get("symbol-sort-key").constantOr(1)!==void 0,me=r.depthModeForSublayer(0,vr.ReadOnly),Ce=f.layout.get("text-variable-anchor"),ke=[],De=0,Ve=g;De<Ve.length;De+=1){var qe=Ve[De],Ke=l.getTile(qe),lt=Ke.getBucket(f);if(lt){var ht=x?lt.text:lt.icon;if(ht&&ht.segments.get().length){var dt=ht.programConfigurations.get(f.id),Tt=x||lt.sdfIcons,mt=x?lt.textSizeData:lt.iconSizeData,Mt=ue||ee.pitch!==0,Ut=r.useProgram((Ri=Tt,kl=x,lt.iconsInText&&kl?"symbolTextAndIcon":Ri?"symbolSDF":"symbolIcon"),dt),Rt=u.evaluateSizeForZoom(mt,ee.zoom),_t=void 0,zt=[0,0],er=void 0,Ot=void 0,Br=null,ur=void 0;if(x)er=Ke.glyphAtlasTexture,Ot=Q.LINEAR,_t=Ke.glyphAtlasTexture.size,lt.iconsInText&&(zt=Ke.imageAtlasTexture.size,Br=Ke.imageAtlasTexture,ur=Mt||r.options.rotating||r.options.zooming||mt.kind==="composite"||mt.kind==="camera"?Q.LINEAR:Q.NEAREST);else{var Fn=f.layout.get("icon-size").constantOr(0)!==1||lt.iconsNeedLinear;er=Ke.imageAtlasTexture,Ot=Tt||r.options.rotating||r.options.zooming||Fn||Mt?Q.LINEAR:Q.NEAREST,_t=Ke.imageAtlasTexture.size}var ni=Gi(Ke,1,r.transform.zoom),Li=qm(qe.posMatrix,ue,re,r.transform,ni),ki=t0(qe.posMatrix,ue,re,r.transform,ni),Tr=Ce&&lt.hasTextData(),Xi=f.layout.get("icon-text-fit")!=="none"&&Tr&&lt.hasIconData();ae&&r0(lt,qe.posMatrix,r,x,Li,ki,ue,j);var Pi=r.translatePosMatrix(qe.posMatrix,Ke,T,E),Pr=ae||x&&Ce||Xi?sh:Li,En=r.translatePosMatrix(ki,Ke,T,E,!0),In=Tt&&f.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Di={program:Ut,buffers:ht,uniformValues:Tt?lt.iconsInText?(js=mt.kind,xh=Rt,Il=ye,jc=ue,Iu=r,ku=Pi,us=Pr,cs=En,Er=_t,Fr=zt,u.extend(Ac(js,xh,Il,jc,Iu,ku,us,cs,!0,Er,!0),{u_texsize_icon:Fr,u_texture_icon:1})):Ac(mt.kind,Rt,ye,ue,r,Pi,Pr,En,x,_t,!0):cu(mt.kind,Rt,ye,ue,r,Pi,Pr,En,x,_t),atlasTexture:er,atlasTextureIcon:Br,atlasInterpolation:Ot,atlasInterpolationIcon:ur,isSDF:Tt,hasHalo:In};if(he)for(var Ui=0,Eu=ht.segments.get();Ui<Eu.length;Ui+=1){var _h=Eu[Ui];ke.push({segments:new u.SegmentVector([_h]),sortKey:_h.sortKey,state:Di})}else ke.push({segments:ht.segments,sortKey:0,state:Di})}}}var js,xh,Il,jc,Iu,ku,us,cs,Er,Fr,Ri,kl;he&&ke.sort(function(Uc,Au){return Uc.sortKey-Au.sortKey});for(var Ml=0,Mu=ke;Ml<Mu.length;Ml+=1){var wh=Mu[Ml],hi=wh.state;if(K.activeTexture.set(Q.TEXTURE0),hi.atlasTexture.bind(hi.atlasInterpolation,Q.CLAMP_TO_EDGE),hi.atlasTextureIcon&&(K.activeTexture.set(Q.TEXTURE1),hi.atlasTextureIcon&&hi.atlasTextureIcon.bind(hi.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),hi.isSDF){var bh=hi.uniformValues;hi.hasHalo&&(bh.u_is_halo=1,bt(hi.buffers,wh.segments,f,r,hi.program,me,V,H,bh)),bh.u_is_halo=0}bt(hi.buffers,wh.segments,f,r,hi.program,me,V,H,hi.uniformValues)}}function bt(r,l,f,g,x,T,E,L,O){var j=g.context;x.draw(j,j.gl.TRIANGLES,T,E,L,xn.disabled,O,f.id,r.layoutVertexBuffer,r.indexBuffer,l,f.paint,g.transform.zoom,r.programConfigurations.get(f.id),r.dynamicLayoutVertexBuffer,r.opacityVertexBuffer)}function Lt(r,l,f,g,x,T,E){var L,O,j,V,H,K,Q,ee,re,ue,ae=r.context.gl,ye=f.paint.get("fill-pattern"),he=ye&&ye.constantOr(1),me=f.getCrossfadeParameters();L=E?(O=he&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ae.LINES):(O=he?"fillPattern":"fill",ae.TRIANGLES);for(var Ce=0,ke=g;Ce<ke.length;Ce+=1){var De=ke[Ce],Ve=l.getTile(De);if(!he||Ve.patternsLoaded()){var qe=Ve.getBucket(f);if(qe){var Ke=qe.programConfigurations.get(f.id),lt=r.useProgram(O,Ke);he&&(r.context.activeTexture.set(ae.TEXTURE0),Ve.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Ke.updatePaintBuffers(me));var ht=ye.constantOr(null);if(ht&&Ve.imageAtlas){var dt=Ve.imageAtlas,Tt=dt.patternPositions[ht.to.toString()],mt=dt.patternPositions[ht.from.toString()];Tt&&mt&&Ke.setConstantPatternPositions(Tt,mt)}var Mt=r.translatePosMatrix(De.posMatrix,Ve,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(E){V=qe.indexBuffer2,H=qe.segments2;var Ut=[ae.drawingBufferWidth,ae.drawingBufferHeight];j=O==="fillOutlinePattern"&&he?(K=Mt,Q=r,ee=me,re=Ve,ue=Ut,u.extend(lo(K,Q,ee,re),{u_world:ue})):{u_matrix:Mt,u_world:Ut}}else V=qe.indexBuffer,H=qe.segments,j=he?lo(Mt,r,me,Ve):xd(Mt);lt.draw(r.context,L,x,r.stencilModeForClipping(De),T,xn.disabled,j,f.id,qe.layoutVertexBuffer,V,H,f.paint,r.transform.zoom,Ke)}}}}function xl(r,l,f,g,x,T,E){for(var L=r.context,O=L.gl,j=f.paint.get("fill-extrusion-pattern"),V=j.constantOr(1),H=f.getCrossfadeParameters(),K=f.paint.get("fill-extrusion-opacity"),Q=0,ee=g;Q<ee.length;Q+=1){var re=ee[Q],ue=l.getTile(re),ae=ue.getBucket(f);if(ae){var ye=ae.programConfigurations.get(f.id),he=r.useProgram(V?"fillExtrusionPattern":"fillExtrusion",ye);V&&(r.context.activeTexture.set(O.TEXTURE0),ue.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),ye.updatePaintBuffers(H));var me=j.constantOr(null);if(me&&ue.imageAtlas){var Ce=ue.imageAtlas,ke=Ce.patternPositions[me.to.toString()],De=Ce.patternPositions[me.from.toString()];ke&&De&&ye.setConstantPatternPositions(ke,De)}var Ve=r.translatePosMatrix(re.posMatrix,ue,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),qe=f.paint.get("fill-extrusion-vertical-gradient"),Ke=V?(lt=Ve,ht=r,dt=qe,Tt=K,mt=re,Mt=H,Ut=ue,u.extend(Qm(lt,ht,dt,Tt),w0(Mt,ht,Ut),{u_height_factor:-Math.pow(2,mt.overscaledZ)/Ut.tileSize/8})):Qm(Ve,r,qe,K);he.draw(L,L.gl.TRIANGLES,x,T,E,xn.backCCW,Ke,f.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,f.paint,r.transform.zoom,ye)}}var lt,ht,dt,Tt,mt,Mt,Ut}function Cd(r,l,f,g,x,T){var E=r.context,L=E.gl,O=l.fbo;if(O){var j=r.useProgram("hillshade");E.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,O.colorAttachment.get());var V=function(H,K,Q){var ee=Q.paint.get("hillshade-shadow-color"),re=Q.paint.get("hillshade-highlight-color"),ue=Q.paint.get("hillshade-accent-color"),ae=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(ae-=H.transform.angle);var ye,he,me,Ce=!H.options.moving;return{u_matrix:H.transform.calculatePosMatrix(K.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:(ye=K.tileID,he=Math.pow(2,ye.canonical.z),me=ye.canonical.y,[new u.MercatorCoordinate(0,me/he).toLngLat().lat,new u.MercatorCoordinate(0,(me+1)/he).toLngLat().lat]),u_light:[Q.paint.get("hillshade-exaggeration"),ae],u_shadow:ee,u_highlight:re,u_accent:ue}}(r,l,f);j.draw(E,L.TRIANGLES,g,x,T,xn.disabled,V,f.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments)}}function Sd(r,l,f,g,x,T,E){var L,O,j,V,H,K=r.context,Q=K.gl,ee=l.dem;if(ee&&ee.data){var re=ee.dim,ue=ee.stride,ae=ee.getPixels();if(K.activeTexture.set(Q.TEXTURE1),K.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||r.getTileTexture(ue),l.demTexture){var ye=l.demTexture;ye.update(ae,{premultiply:!1}),ye.bind(Q.NEAREST,Q.CLAMP_TO_EDGE)}else l.demTexture=new u.Texture(K,ae,Q.RGBA,{premultiply:!1}),l.demTexture.bind(Q.NEAREST,Q.CLAMP_TO_EDGE);K.activeTexture.set(Q.TEXTURE0);var he=l.fbo;if(!he){var me=new u.Texture(K,{width:re,height:re,data:null},Q.RGBA);me.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),(he=l.fbo=K.createFramebuffer(re,re,!0)).colorAttachment.set(me.texture)}K.bindFramebuffer.set(he.framebuffer),K.viewport.set([0,0,re,re]),r.useProgram("hillshadePrepare").draw(K,Q.TRIANGLES,x,T,E,xn.disabled,(L=l.tileID,j=g,V=(O=ee).stride,H=u.create(),u.ortho(H,0,u.EXTENT,-u.EXTENT,0,0,1),u.translate(H,H,[0,-u.EXTENT,0]),{u_matrix:H,u_image:1,u_dimension:[V,V],u_zoom:L.overscaledZ,u_maxzoom:j,u_unpack:O.getUnpackVector()}),f.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function pu(r,l,f,g,x){var T=g.paint.get("raster-fade-duration");if(0<T){var E=u.browser.now(),L=(E-r.timeAdded)/T,O=l?(E-l.timeAdded)/T:-1,j=f.getSource(),V=x.coveringZoomLevel({tileSize:j.tileSize,roundZoom:j.roundZoom}),H=!l||Math.abs(l.tileID.overscaledZ-V)>Math.abs(r.tileID.overscaledZ-V),K=H&&r.refreshedUponExpiration?1:u.clamp(H?L:1-O,0,1);return r.refreshedUponExpiration&&1<=L&&(r.refreshedUponExpiration=!1),l?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}var lh=new u.Color(1,0,0,1),_o=new u.Color(0,1,0,1),Td=new u.Color(0,0,1,1),Rr=new u.Color(1,0,1,1),Ed=new u.Color(0,1,1,1);function Ma(r,l,f,g){wn(r,0,l+f/2,r.transform.width,f,g)}function b0(r,l,f,g){wn(r,l-f/2,0,f,r.transform.height,g)}function wn(r,l,f,g,x,T){var E=r.context,L=E.gl;L.enable(L.SCISSOR_TEST),L.scissor(l*u.browser.devicePixelRatio,f*u.browser.devicePixelRatio,g*u.browser.devicePixelRatio,x*u.browser.devicePixelRatio),E.clear({color:T}),L.disable(L.SCISSOR_TEST)}function Ei(r,l,f){var g=r.context,x=g.gl,T=f.posMatrix,E=r.useProgram("debug"),L=vr.disabled,O=Ln.disabled,j=r.colorModeForRenderPass();g.activeTexture.set(x.TEXTURE0),r.emptyTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE),E.draw(g,x.LINE_STRIP,L,O,j,xn.disabled,eg(T,u.Color.red),"$debug",r.debugBuffer,r.tileBorderIndexBuffer,r.debugSegments);var V=l.getTileByID(f.key).latestRawTileData,H=Math.floor((V&&V.byteLength||0)/1024),K=l.getTile(f).tileSize,Q=512/Math.min(K,512)*(f.overscaledZ/r.transform.zoom)*.5,ee=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(ee+=" => "+f.overscaledZ),function(re,ue){re.initDebugOverlayCanvas();var ae=re.debugOverlayCanvas,ye=re.context.gl,he=re.debugOverlayCanvas.getContext("2d");he.clearRect(0,0,ae.width,ae.height),he.shadowColor="white",he.shadowBlur=2,he.lineWidth=1.5,he.strokeStyle="white",he.textBaseline="top",he.font="bold 36px Open Sans, sans-serif",he.fillText(ue,5,5),he.strokeText(ue,5,5),re.debugOverlayTexture.update(ae),re.debugOverlayTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)}(r,ee+" "+H+"kb"),E.draw(g,x.TRIANGLES,L,O,ri.alphaBlended,xn.disabled,eg(T,u.Color.transparent,Q),"$debug",r.debugBuffer,r.quadTriangleIndexBuffer,r.debugSegments)}function Yr(r,l){this.context=new vo(r),this.transform=l,this._tileTextures={},this.setup(),this.numSublayers=ks.maxUnderzooming+ks.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qp,this.gpuTimers={}}var uh={symbol:function(r,l,f,g,x){if(r.renderPass==="translucent"){var T=Ln.disabled,E=r.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(L,O,j,V,H,K,Q){for(var ee=O.transform,re=H==="map",ue=K==="map",ae=0,ye=L;ae<ye.length;ae+=1){var he=ye[ae],me=V.getTile(he),Ce=me.getBucket(j);if(Ce&&Ce.text&&Ce.text.segments.get().length){var ke=u.evaluateSizeForZoom(Ce.textSizeData,ee.zoom),De=Gi(me,1,O.transform.zoom),Ve=qm(he.posMatrix,ue,re,O.transform,De),qe=j.layout.get("icon-text-fit")!=="none"&&Ce.hasIconData();if(ke){var Ke=Math.pow(2,ee.zoom-me.tileID.overscaledZ);Oo(Ce,re,ue,Q,u.symbolSize,ee,Ve,he.posMatrix,Ke,ke,qe)}}}}(g,r,f,l,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),x),f.paint.get("icon-opacity").constantOr(1)!==0&&Lc(r,l,f,g,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),T,E),f.paint.get("text-opacity").constantOr(1)!==0&&Lc(r,l,f,g,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),T,E),l.map.showCollisionBoxes&&(ah(r,l,f,g,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),ah(r,l,f,g,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))}},circle:function(r,l,f,g){if(r.renderPass==="translucent"){var x=f.paint.get("circle-opacity"),T=f.paint.get("circle-stroke-width"),E=f.paint.get("circle-stroke-opacity"),L=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(x.constantOr(1)!==0||T.constantOr(1)!==0&&E.constantOr(1)!==0){for(var O=r.context,j=O.gl,V=r.depthModeForSublayer(0,vr.ReadOnly),H=Ln.disabled,K=r.colorModeForRenderPass(),Q=[],ee=0;ee<g.length;ee++){var re=g[ee],ue=l.getTile(re),ae=ue.getBucket(f);if(ae){var ye=ae.programConfigurations.get(f.id),he={programConfiguration:ye,program:r.useProgram("circle",ye),layoutVertexBuffer:ae.layoutVertexBuffer,indexBuffer:ae.indexBuffer,uniformValues:_l(r,re,ue,f)};if(L)for(var me=0,Ce=ae.segments.get();me<Ce.length;me+=1){var ke=Ce[me];Q.push({segments:new u.SegmentVector([ke]),sortKey:ke.sortKey,state:he})}else Q.push({segments:ae.segments,sortKey:0,state:he})}}L&&Q.sort(function(lt,ht){return lt.sortKey-ht.sortKey});for(var De=0,Ve=Q;De<Ve.length;De+=1){var qe=Ve[De],Ke=qe.state;Ke.program.draw(O,j.TRIANGLES,V,H,K,xn.disabled,Ke.uniformValues,f.id,Ke.layoutVertexBuffer,Ke.indexBuffer,qe.segments,f.paint,r.transform.zoom,Ke.programConfiguration)}}}},heatmap:function(r,l,f,g){if(f.paint.get("heatmap-opacity")!==0)if(r.renderPass==="offscreen"){var x=r.context,T=x.gl,E=Ln.disabled,L=new ri([T.ONE,T.ONE],u.Color.transparent,[!0,!0,!0,!0]);(function(ae,ye,he){var me=ae.gl;ae.activeTexture.set(me.TEXTURE1),ae.viewport.set([0,0,ye.width/4,ye.height/4]);var Ce,ke,De,Ve=he.heatmapFbo;if(Ve)me.bindTexture(me.TEXTURE_2D,Ve.colorAttachment.get()),ae.bindFramebuffer.set(Ve.framebuffer);else{var qe=me.createTexture();me.bindTexture(me.TEXTURE_2D,qe),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_S,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_T,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MIN_FILTER,me.LINEAR),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MAG_FILTER,me.LINEAR),Ve=he.heatmapFbo=ae.createFramebuffer(ye.width/4,ye.height/4,!1),Ce=qe,ke=Ve,(De=ae.gl).texImage2D(De.TEXTURE_2D,0,De.RGBA,ye.width/4,ye.height/4,0,De.RGBA,ae.extRenderToTextureHalfFloat?ae.extTextureHalfFloat.HALF_FLOAT_OES:De.UNSIGNED_BYTE,null),ke.colorAttachment.set(Ce)}})(x,r,f),x.clear({color:u.Color.transparent});for(var O=0;O<g.length;O++){var j=g[O];if(!l.hasRenderableParent(j)){var V=l.getTile(j),H=V.getBucket(f);if(H){var K=H.programConfigurations.get(f.id);r.useProgram("heatmap",K).draw(x,T.TRIANGLES,vr.disabled,E,L,xn.disabled,(Q=j.posMatrix,ee=V,re=r.transform.zoom,ue=f.paint.get("heatmap-intensity"),{u_matrix:Q,u_extrude_scale:Gi(ee,1,re),u_intensity:ue}),f.id,H.layoutVertexBuffer,H.indexBuffer,H.segments,f.paint,r.transform.zoom,K)}}}x.viewport.set([0,0,r.width,r.height])}else r.renderPass==="translucent"&&(r.context.setColorMode(r.colorModeForRenderPass()),function(ae,ye){var he=ae.context,me=he.gl,Ce=ye.heatmapFbo;if(Ce){he.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,Ce.colorAttachment.get()),he.activeTexture.set(me.TEXTURE1);var ke=ye.colorRampTexture;(ke=ke||(ye.colorRampTexture=new u.Texture(he,ye.colorRamp,me.RGBA))).bind(me.LINEAR,me.CLAMP_TO_EDGE),ae.useProgram("heatmapTexture").draw(he,me.TRIANGLES,vr.disabled,Ln.disabled,ae.colorModeForRenderPass(),xn.disabled,function(De,Ve){var qe=u.create();u.ortho(qe,0,De.width,De.height,0,0,1);var Ke=De.context.gl;return{u_matrix:qe,u_world:[Ke.drawingBufferWidth,Ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ve.paint.get("heatmap-opacity")}}(ae,ye),ye.id,ae.viewportBuffer,ae.quadTriangleIndexBuffer,ae.viewportSegments,ye.paint,ae.transform.zoom)}}(r,f));var Q,ee,re,ue},line:function(r,l,f,g){if(r.renderPass==="translucent"){var x=f.paint.get("line-opacity"),T=f.paint.get("line-width");if(x.constantOr(1)!==0&&T.constantOr(1)!==0){var E=r.depthModeForSublayer(0,vr.ReadOnly),L=r.colorModeForRenderPass(),O=f.paint.get("line-dasharray"),j=f.paint.get("line-pattern"),V=j.constantOr(1),H=f.paint.get("line-gradient"),K=f.getCrossfadeParameters(),Q=V?"linePattern":O?"lineSDF":H?"lineGradient":"line",ee=r.context,re=ee.gl,ue=!0;if(H){ee.activeTexture.set(re.TEXTURE0);var ae=f.gradientTexture;if(!f.gradient)return;(ae=ae||(f.gradientTexture=new u.Texture(ee,f.gradient,re.RGBA))).bind(re.LINEAR,re.CLAMP_TO_EDGE)}for(var ye=0,he=g;ye<he.length;ye+=1){var me=he[ye],Ce=l.getTile(me);if(!V||Ce.patternsLoaded()){var ke=Ce.getBucket(f);if(ke){var De=ke.programConfigurations.get(f.id),Ve=r.context.program.get(),qe=r.useProgram(Q,De),Ke=ue||qe.program!==Ve,lt=j.constantOr(null);if(lt&&Ce.imageAtlas){var ht=Ce.imageAtlas,dt=ht.patternPositions[lt.to.toString()],Tt=ht.patternPositions[lt.from.toString()];dt&&Tt&&De.setConstantPatternPositions(dt,Tt)}var mt=V?(Pr=Ce,En=f,In=K,Di=(Pi=r).transform,Ui=Or(Pr,Di),{u_matrix:bd(Pi,Pr,En),u_texsize:Pr.imageAtlasTexture.size,u_ratio:1/Gi(Pr,1,Di.zoom),u_device_pixel_ratio:u.browser.devicePixelRatio,u_image:0,u_scale:[Ui,In.fromScale,In.toScale],u_fade:In.t,u_units_to_pixels:[1/Di.pixelsToGLUnits[0],1/Di.pixelsToGLUnits[1]]}):O?(zt=Ce,er=f,Ot=O,Br=K,ur=void 0,ur=(_t=r).lineAtlas,Fn=Or(zt,_t.transform),ni=er.layout.get("line-cap")==="round",Li=ur.getDash(Ot.from,ni),ki=ur.getDash(Ot.to,ni),Tr=Li.width*Br.fromScale,Xi=ki.width*Br.toScale,u.extend(oh(_t,zt,er),{u_patternscale_a:[Fn/Tr,-Li.height/2],u_patternscale_b:[Fn/Xi,-ki.height/2],u_sdfgamma:ur.width/(256*Math.min(Tr,Xi)*u.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Li.y,u_tex_y_b:ki.y,u_mix:Br.t})):H?(Mt=r,Ut=Ce,Rt=f,u.extend(oh(Mt,Ut,Rt),{u_image:0})):oh(r,Ce,f);V?(ee.activeTexture.set(re.TEXTURE0),Ce.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),De.updatePaintBuffers(K)):O&&(Ke||r.lineAtlas.dirty)&&(ee.activeTexture.set(re.TEXTURE0),r.lineAtlas.bind(ee)),qe.draw(ee,re.TRIANGLES,E,r.stencilModeForClipping(me),L,xn.disabled,mt,f.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,f.paint,r.transform.zoom,De),ue=!1}}}}}var Mt,Ut,Rt,_t,zt,er,Ot,Br,ur,Fn,ni,Li,ki,Tr,Xi,Pi,Pr,En,In,Di,Ui},fill:function(r,l,f,g){var x=f.paint.get("fill-color"),T=f.paint.get("fill-opacity");if(T.constantOr(1)!==0){var E=r.colorModeForRenderPass(),L=f.paint.get("fill-pattern"),O=r.opaquePassEnabledForLayer()&&!L.constantOr(1)&&x.constantOr(u.Color.transparent).a===1&&T.constantOr(0)===1?"opaque":"translucent";if(r.renderPass===O){var j=r.depthModeForSublayer(1,r.renderPass==="opaque"?vr.ReadWrite:vr.ReadOnly);Lt(r,l,f,g,j,E,!1)}if(r.renderPass==="translucent"&&f.paint.get("fill-antialias")){var V=r.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,vr.ReadOnly);Lt(r,l,f,g,V,E,!0)}}},"fill-extrusion":function(r,l,f,g){var x=f.paint.get("fill-extrusion-opacity");if(x!==0&&r.renderPass==="translucent"){var T=new vr(r.context.gl.LEQUAL,vr.ReadWrite,r.depthRangeFor3D);if(x!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))xl(r,l,f,g,T,Ln.disabled,ri.disabled),xl(r,l,f,g,T,r.stencilModeFor3D(),r.colorModeForRenderPass());else{var E=r.colorModeForRenderPass();xl(r,l,f,g,T,Ln.disabled,E)}}},hillshade:function(r,l,f,g){if(r.renderPass==="offscreen"||r.renderPass==="translucent"){for(var x=r.context,T=l.getSource().maxzoom,E=r.depthModeForSublayer(0,vr.ReadOnly),L=r.colorModeForRenderPass(),O=r.renderPass==="translucent"?r.stencilConfigForOverlap(g):[{},g],j=O[0],V=0,H=O[1];V<H.length;V+=1){var K=H[V],Q=l.getTile(K);Q.needsHillshadePrepare&&r.renderPass==="offscreen"?Sd(r,Q,f,T,E,Ln.disabled,L):r.renderPass==="translucent"&&Cd(r,Q,f,E,j[K.overscaledZ],L)}x.viewport.set([0,0,r.width,r.height])}},raster:function(r,l,f,g){if(r.renderPass==="translucent"&&f.paint.get("raster-opacity")!==0&&g.length)for(var x=r.context,T=x.gl,E=l.getSource(),L=r.useProgram("raster"),O=r.colorModeForRenderPass(),j=E instanceof Xo?[{},g]:r.stencilConfigForOverlap(g),V=j[0],H=j[1],K=H[H.length-1].overscaledZ,Q=!r.options.moving,ee=0,re=H;ee<re.length;ee+=1){var ue=re[ee],ae=r.depthModeForSublayer(ue.overscaledZ-K,f.paint.get("raster-opacity")===1?vr.ReadWrite:vr.ReadOnly,T.LESS),ye=l.getTile(ue),he=r.transform.calculatePosMatrix(ue.toUnwrapped(),Q);ye.registerFadeDuration(f.paint.get("raster-fade-duration"));var me=l.findLoadedParent(ue,0),Ce=pu(ye,me,l,f,r.transform),ke=void 0,De=void 0,Ve=f.paint.get("raster-resampling")==="nearest"?T.NEAREST:T.LINEAR;x.activeTexture.set(T.TEXTURE0),ye.texture.bind(Ve,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST),x.activeTexture.set(T.TEXTURE1),me?(me.texture.bind(Ve,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST),ke=Math.pow(2,me.tileID.overscaledZ-ye.tileID.overscaledZ),De=[ye.tileID.canonical.x*ke%1,ye.tileID.canonical.y*ke%1]):ye.texture.bind(Ve,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST);var qe=No(he,De||[0,0],ke||1,Ce,f);E instanceof Xo?L.draw(x,T.TRIANGLES,ae,Ln.disabled,O,xn.disabled,qe,f.id,E.boundsBuffer,r.quadTriangleIndexBuffer,E.boundsSegments):L.draw(x,T.TRIANGLES,ae,V[ue.overscaledZ],O,xn.disabled,qe,f.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments)}},background:function(r,l,f){var g,x,T,E,L,O,j,V,H,K,Q,ee,re,ue,ae,ye,he,me,Ce,ke=f.paint.get("background-color"),De=f.paint.get("background-opacity");if(De!==0){var Ve=r.context,qe=Ve.gl,Ke=r.transform,lt=Ke.tileSize,ht=f.paint.get("background-pattern");if(!r.isPatternMissing(ht)){var dt=!ht&&ke.a===1&&De===1&&r.opaquePassEnabledForLayer()?"opaque":"translucent";if(r.renderPass===dt){var Tt=Ln.disabled,mt=r.depthModeForSublayer(0,dt=="opaque"?vr.ReadWrite:vr.ReadOnly),Mt=r.colorModeForRenderPass(),Ut=r.useProgram(ht?"backgroundPattern":"background"),Rt=Ke.coveringTiles({tileSize:lt});ht&&(Ve.activeTexture.set(qe.TEXTURE0),r.imageManager.bind(r.context));for(var _t=f.getCrossfadeParameters(),zt=0,er=Rt;zt<er.length;zt+=1){var Ot=er[zt],Br=r.transform.calculatePosMatrix(Ot.toUnwrapped()),ur=ht?(g=Br,x=De,T=r,E=ht,L={tileID:Ot,tileSize:lt},O=_t,Ce=me=he=ye=ae=ue=re=ee=Q=K=H=V=j=void 0,u.extend((j=E,V=O,K=L,Q=(H=T).imageManager.getPattern(j.from.toString()),ee=H.imageManager.getPattern(j.to.toString()),re=H.imageManager.getPixelSize(),ue=re.width,ae=re.height,ye=Math.pow(2,K.tileID.overscaledZ),he=K.tileSize*Math.pow(2,H.transform.tileZoom)/ye,me=he*(K.tileID.canonical.x+K.tileID.wrap*ye),Ce=he*K.tileID.canonical.y,{u_image:0,u_pattern_tl_a:Q.tl,u_pattern_br_a:Q.br,u_pattern_tl_b:ee.tl,u_pattern_br_b:ee.br,u_texsize:[ue,ae],u_mix:V.t,u_pattern_size_a:Q.displaySize,u_pattern_size_b:ee.displaySize,u_scale_a:V.fromScale,u_scale_b:V.toScale,u_tile_units_to_pixels:1/Gi(K,1,H.transform.tileZoom),u_pixel_coord_upper:[me>>16,Ce>>16],u_pixel_coord_lower:[65535&me,65535&Ce]}),{u_matrix:g,u_opacity:x})):{u_matrix:Br,u_opacity:De,u_color:ke};Ut.draw(Ve,qe.TRIANGLES,mt,Tt,Mt,xn.disabled,ur,f.id,r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}}}},debug:function(r,l,f){for(var g=0;g<f.length;g++)Ei(r,l,f[g])},custom:function(r,l,f){var g=r.context,x=f.implementation;if(r.renderPass==="offscreen"){var T=x.prerender;T&&(r.setCustomLayerDefaults(),g.setColorMode(r.colorModeForRenderPass()),T.call(x,g.gl,r.transform.customLayerMatrix()),g.setDirty(),r.setBaseState())}else if(r.renderPass==="translucent"){r.setCustomLayerDefaults(),g.setColorMode(r.colorModeForRenderPass()),g.setStencilMode(Ln.disabled);var E=x.renderingMode==="3d"?new vr(r.context.gl.LEQUAL,vr.ReadWrite,r.depthRangeFor3D):r.depthModeForSublayer(0,vr.ReadOnly);g.setDepthMode(E),x.render(g.gl,r.transform.customLayerMatrix()),g.setDirty(),r.setBaseState(),g.bindFramebuffer.set(null)}}};function hu(r,l){this.points=r,this.planes=l}function Aa(r,l){this.min=r,this.max=l,this.center=u.scale$2([],u.add([],this.min,this.max),.5)}function es(r,l,f,g){if(r===void 0&&(r=0),l===void 0&&(l=0),f===void 0&&(f=0),g===void 0&&(g=0),isNaN(r)||r<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=f,this.right=g}function _r(r,l,f,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=x===void 0||x,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=f??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new es,this._posMatrixCache={},this._alignedPosMatrixCache={}}Yr.prototype.resize=function(r,l){if(this.width=r*u.browser.devicePixelRatio,this.height=l*u.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var f=0,g=this.style._order;f<g.length;f+=1)this.style._layers[g[f]].resize()},Yr.prototype.setup=function(){var r=this.context,l=new u.StructArrayLayout2i4;l.emplaceBack(0,0),l.emplaceBack(u.EXTENT,0),l.emplaceBack(0,u.EXTENT),l.emplaceBack(u.EXTENT,u.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(l,vl.members),this.tileExtentSegments=u.SegmentVector.simpleSegment(0,0,4,2);var f=new u.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(u.EXTENT,0),f.emplaceBack(0,u.EXTENT),f.emplaceBack(u.EXTENT,u.EXTENT),this.debugBuffer=r.createVertexBuffer(f,vl.members),this.debugSegments=u.SegmentVector.simpleSegment(0,0,4,5);var g=new u.StructArrayLayout4i8;g.emplaceBack(0,0,0,0),g.emplaceBack(u.EXTENT,0,u.EXTENT,0),g.emplaceBack(0,u.EXTENT,0,u.EXTENT),g.emplaceBack(u.EXTENT,u.EXTENT,u.EXTENT,u.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(g,bs.members),this.rasterBoundsSegments=u.SegmentVector.simpleSegment(0,0,4,2);var x=new u.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(x,vl.members),this.viewportSegments=u.SegmentVector.simpleSegment(0,0,4,2);var T=new u.StructArrayLayout1ui2;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);var E=new u.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(E),this.emptyTexture=new u.Texture(r,{width:1,height:1,data:new Uint8Array([0,0,0,0])},r.gl.RGBA);var L=this.context.gl;this.stencilClearMode=new Ln({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO)},Yr.prototype.clearStencil=function(){var r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var f=u.create();u.ortho(f,0,this.width,this.height,0,0,1),u.scale(f,f,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,vr.disabled,this.stencilClearMode,ri.disabled,xn.disabled,wd(f),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Yr.prototype._renderTileClippingMasks=function(r,l){if(this.currentStencilSource!==r.source&&r.isTileClipped()&&l&&l.length){this.currentStencilSource=r.source;var f=this.context,g=f.gl;256<this.nextStencilID+l.length&&this.clearStencil(),f.setColorMode(ri.disabled),f.setDepthMode(vr.disabled);var x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var T=0,E=l;T<E.length;T+=1){var L=E[T],O=this._tileClippingMaskIDs[L.key]=this.nextStencilID++;x.draw(f,g.TRIANGLES,vr.disabled,new Ln({func:g.ALWAYS,mask:0},O,255,g.KEEP,g.KEEP,g.REPLACE),ri.disabled,xn.disabled,wd(L.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Yr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,256<this.nextStencilID+1&&this.clearStencil();var r=this.nextStencilID++,l=this.context.gl;return new Ln({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)},Yr.prototype.stencilModeForClipping=function(r){var l=this.context.gl;return new Ln({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)},Yr.prototype.stencilConfigForOverlap=function(r){var l,f=this.context.gl,g=r.sort(function(O,j){return j.overscaledZ-O.overscaledZ}),x=g[g.length-1].overscaledZ,T=g[0].overscaledZ-x+1;if(1<T){this.currentStencilSource=void 0,256<this.nextStencilID+T&&this.clearStencil();for(var E={},L=0;L<T;L++)E[L+x]=new Ln({func:f.GEQUAL,mask:255},L+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=T,[E,g]}return[((l={})[x]=Ln.disabled,l),g]},Yr.prototype.colorModeForRenderPass=function(){var r=this.context.gl;return this._showOverdrawInspector?new ri([r.CONSTANT_COLOR,r.ONE],new u.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ri.unblended:ri.alphaBlended},Yr.prototype.depthModeForSublayer=function(r,l,f){if(!this.opaquePassEnabledForLayer())return vr.disabled;var g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new vr(f||this.context.gl.LEQUAL,l,[g,g])},Yr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Yr.prototype.render=function(r,l){var f=this;this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(u.browser.now()),this.imageManager.beginFrame();var g=this.style._order,x=this.style.sourceCaches;for(var T in x){var E=x[T];E.used&&E.prepare(this.context)}var L,O,j={},V={},H={};for(var K in x){var Q=x[K];j[K]=Q.getVisibleCoordinates(),V[K]=j[K].slice().reverse(),H[K]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ee=0;ee<g.length;ee++)if(this.style._layers[g[ee]].is3D()){this.opaquePassCutoff=ee;break}this.renderPass="offscreen";for(var re=0,ue=g;re<ue.length;re+=1){var ae=this.style._layers[ue[re]];if(ae.hasOffscreenPass()&&!ae.isHidden(this.transform.zoom)){var ye=V[ae.source];ae.type!=="custom"&&!ye.length||this.renderLayer(this,x[ae.source],ae,ye)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.Color.black:u.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=g.length-1;0<=this.currentLayer;this.currentLayer--){var he=this.style._layers[g[this.currentLayer]],me=x[he.source],Ce=j[he.source];this._renderTileClippingMasks(he,Ce),this.renderLayer(this,me,he,Ce)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){var ke=this.style._layers[g[this.currentLayer]],De=x[ke.source],Ve=(ke.type==="symbol"?H:V)[ke.source];this._renderTileClippingMasks(ke,j[ke.source]),this.renderLayer(this,De,ke,Ve)}this.options.showTileBoundaries&&(u.values(this.style._layers).forEach(function(qe){qe.source&&!qe.isHidden(f.transform.zoom)&&(qe.source!==(O&&O.id)&&(O=f.style.sourceCaches[qe.source]),(!L||L.getSource().maxzoom<O.getSource().maxzoom)&&(L=O))}),L&&uh.debug(this,L,L.getVisibleCoordinates())),this.options.showPadding&&function(qe){var Ke=qe.transform.padding;Ma(qe,qe.transform.height-(Ke.top||0),3,lh),Ma(qe,Ke.bottom||0,3,_o),b0(qe,Ke.left||0,3,Td),b0(qe,qe.transform.width-(Ke.right||0),3,Rr);var lt,ht,dt,Tt,mt=qe.transform.centerPoint;lt=qe,ht=mt.x,dt=qe.transform.height-mt.y,wn(lt,ht-1,dt-10,2,20,Tt=Ed),wn(lt,ht-10,dt-1,20,2,Tt)}(this),this.context.setDefault()},Yr.prototype.renderLayer=function(r,l,f,g){f.isHidden(this.transform.zoom)||f.type!=="background"&&f.type!=="custom"&&!g.length||(this.id=f.id,this.gpuTimingStart(f),uh[f.type](r,l,f,g,this.style.placement.variableOffsets),this.gpuTimingEnd())},Yr.prototype.gpuTimingStart=function(r){if(this.options.gpuTiming){var l=this.context.extTimerQuery,f=this.gpuTimers[r.id];(f=f||(this.gpuTimers[r.id]={calls:0,cpuTime:0,query:l.createQueryEXT()})).calls++,l.beginQueryEXT(l.TIME_ELAPSED_EXT,f.query)}},Yr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}},Yr.prototype.collectGpuTimers=function(){var r=this.gpuTimers;return this.gpuTimers={},r},Yr.prototype.queryGpuTimers=function(r){var l={};for(var f in r){var g=r[f],x=this.context.extTimerQuery,T=x.getQueryObjectEXT(g.query,x.QUERY_RESULT_EXT)/1e6;x.deleteQueryEXT(g.query),l[f]=T}return l},Yr.prototype.translatePosMatrix=function(r,l,f,g,x){if(!f[0]&&!f[1])return r;var T=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(T){var E=Math.sin(T),L=Math.cos(T);f=[f[0]*L-f[1]*E,f[0]*E+f[1]*L]}var O=[x?f[0]:Gi(l,f[0],this.transform.zoom),x?f[1]:Gi(l,f[1],this.transform.zoom),0],j=new Float32Array(16);return u.translate(j,r,O),j},Yr.prototype.saveTileTexture=function(r){var l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]},Yr.prototype.getTileTexture=function(r){var l=this._tileTextures[r];return l&&0<l.length?l.pop():null},Yr.prototype.isPatternMissing=function(r){if(!r)return!1;if(!r.from||!r.to)return!0;var l=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!l||!f},Yr.prototype.useProgram=function(r,l){this.cache=this.cache||{};var f=""+r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[f]||(this.cache[f]=new Jm(this.context,0,$m[r],l,tg[r],this._showOverdrawInspector)),this.cache[f]},Yr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Yr.prototype.setBaseState=function(){var r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)},Yr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=u.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new u.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Yr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()},hu.fromInvProjectionMatrix=function(r,l,f){var g=Math.pow(2,f),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return u.transformMat4([],E,r)}).map(function(E){return u.scale$1([],E,1/E[3]/l*g)}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var L=u.sub([],x[E[0]],x[E[1]]),O=u.sub([],x[E[2]],x[E[1]]),j=u.normalize([],u.cross([],L,O)),V=-u.dot(j,x[E[1]]);return j.concat(V)});return new hu(x,T)},Aa.prototype.quadrant=function(r){for(var l=[r%2==0,r<2],f=u.clone$2(this.min),g=u.clone$2(this.max),x=0;x<l.length;x++)f[x]=l[x]?this.min[x]:this.center[x],g[x]=l[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Aa(f,g)},Aa.prototype.distanceX=function(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]},Aa.prototype.distanceY=function(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]},Aa.prototype.intersects=function(r){for(var l=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],f=!0,g=0;g<r.planes.length;g++){for(var x=r.planes[g],T=0,E=0;E<l.length;E++)T+=0<=u.dot$1(x,l[E]);if(T===0)return 0;T!==l.length&&(f=!1)}if(f)return 2;for(var L=0;L<3;L++){for(var O=Number.MAX_VALUE,j=-Number.MAX_VALUE,V=0;V<r.points.length;V++){var H=r.points[V][L]-this.min[L];O=Math.min(O,H),j=Math.max(j,H)}if(j<0||O>this.max[L]-this.min[L])return 0}return 1},es.prototype.interpolate=function(r,l,f){return l.top!=null&&r.top!=null&&(this.top=u.number(r.top,l.top,f)),l.bottom!=null&&r.bottom!=null&&(this.bottom=u.number(r.bottom,l.bottom,f)),l.left!=null&&r.left!=null&&(this.left=u.number(r.left,l.left,f)),l.right!=null&&r.right!=null&&(this.right=u.number(r.right,l.right,f)),this},es.prototype.getCenter=function(r,l){var f=u.clamp((this.left+r-this.right)/2,0,r),g=u.clamp((this.top+l-this.bottom)/2,0,l);return new u.Point(f,g)},es.prototype.equals=function(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right},es.prototype.clone=function(){return new es(this.top,this.bottom,this.left,this.right)},es.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var fr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};function ts(r){var l,f,g,x;this._hashName=r&&encodeURIComponent(r),u.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(l=this._updateHashUnthrottled.bind(this),f=!1,g=null,x=function(){g=null,f&&(l(),g=setTimeout(x,300),f=!1)},function(){return f=!0,g||x(),g})}function du(r){this._map=r,this.clear()}_r.prototype.clone=function(){var r=new _r(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r._center=this._center,r.zoom=this.zoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._calcMatrices(),r},fr.minZoom.get=function(){return this._minZoom},fr.minZoom.set=function(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))},fr.maxZoom.get=function(){return this._maxZoom},fr.maxZoom.set=function(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))},fr.minPitch.get=function(){return this._minPitch},fr.minPitch.set=function(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))},fr.maxPitch.get=function(){return this._maxPitch},fr.maxPitch.set=function(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))},fr.renderWorldCopies.get=function(){return this._renderWorldCopies},fr.renderWorldCopies.set=function(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r},fr.worldSize.get=function(){return this.tileSize*this.scale},fr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},fr.size.get=function(){return new u.Point(this.width,this.height)},fr.bearing.get=function(){return-this.angle/Math.PI*180},fr.bearing.set=function(r){var l=-u.wrap(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=u.create$2(),u.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},fr.pitch.get=function(){return this._pitch/Math.PI*180},fr.pitch.set=function(r){var l=u.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())},fr.fov.get=function(){return this._fov/Math.PI*180},fr.fov.set=function(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())},fr.zoom.get=function(){return this._zoom},fr.zoom.set=function(r){var l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom,this._constrain(),this._calcMatrices())},fr.center.get=function(){return this._center},fr.center.set=function(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())},fr.padding.get=function(){return this._edgeInsets.toJSON()},fr.padding.set=function(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())},fr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},_r.prototype.isPaddingEqual=function(r){return this._edgeInsets.equals(r)},_r.prototype.interpolatePadding=function(r,l,f){this._unmodified=!1,this._edgeInsets.interpolate(r,l,f),this._constrain(),this._calcMatrices()},_r.prototype.coveringZoomLevel=function(r){var l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)},_r.prototype.getVisibleUnwrappedCoordinates=function(r){var l=[new u.UnwrappedTileID(0,r)];if(this._renderWorldCopies)for(var f=this.pointCoordinate(new u.Point(0,0)),g=this.pointCoordinate(new u.Point(this.width,0)),x=this.pointCoordinate(new u.Point(this.width,this.height)),T=this.pointCoordinate(new u.Point(0,this.height)),E=Math.floor(Math.min(f.x,g.x,x.x,T.x)),L=Math.floor(Math.max(f.x,g.x,x.x,T.x)),O=E-1;O<=L+1;O++)O!==0&&l.push(new u.UnwrappedTileID(O,r));return l},_r.prototype.coveringTiles=function(r){var l=this.coveringZoomLevel(r),f=l;if(r.minzoom!==void 0&&l<r.minzoom)return[];r.maxzoom!==void 0&&l>r.maxzoom&&(l=r.maxzoom);var g=u.MercatorCoordinate.fromLngLat(this.center),x=Math.pow(2,l),T=[x*g.x,x*g.y,0],E=hu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l),L=r.minzoom||0;function O(qe){return{aabb:new Aa([qe*x,0,0],[(qe+1)*x,x,0]),zoom:0,x:0,y:0,wrap:qe,fullyVisible:!1}}this.pitch<=60&&this._edgeInsets.top<.1&&(L=l);var j=[],V=[],H=l,K=r.reparseOverscaled?f:l;if(this._renderWorldCopies)for(var Q=1;Q<=3;Q++)j.push(O(-Q)),j.push(O(Q));for(j.push(O(0));0<j.length;){var ee=j.pop(),re=ee.x,ue=ee.y,ae=ee.fullyVisible;if(!ae){var ye=ee.aabb.intersects(E);if(ye===0)continue;ae=ye===2}var he=ee.aabb.distanceX(T),me=ee.aabb.distanceY(T),Ce=Math.max(Math.abs(he),Math.abs(me));if(ee.zoom===H||Ce>3+(1<<H-ee.zoom)-2&&ee.zoom>=L)V.push({tileID:new u.OverscaledTileID(ee.zoom===H?K:ee.zoom,ee.wrap,ee.zoom,re,ue),distanceSq:u.sqrLen([T[0]-.5-re,T[1]-.5-ue])});else for(var ke=0;ke<4;ke++){var De=(re<<1)+ke%2,Ve=(ue<<1)+(ke>>1);j.push({aabb:ee.aabb.quadrant(ke),zoom:ee.zoom+1,x:De,y:Ve,wrap:ee.wrap,fullyVisible:ae})}}return V.sort(function(qe,Ke){return qe.distanceSq-Ke.distanceSq}).map(function(qe){return qe.tileID})},_r.prototype.resize=function(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()},fr.unmodified.get=function(){return this._unmodified},_r.prototype.zoomScale=function(r){return Math.pow(2,r)},_r.prototype.scaleZoom=function(r){return Math.log(r)/Math.LN2},_r.prototype.project=function(r){var l=u.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.Point(u.mercatorXfromLng(r.lng)*this.worldSize,u.mercatorYfromLat(l)*this.worldSize)},_r.prototype.unproject=function(r){return new u.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()},fr.point.get=function(){return this.project(this.center)},_r.prototype.setLocationAtPoint=function(r,l){var f=this.pointCoordinate(l),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(r),T=new u.MercatorCoordinate(x.x-(f.x-g.x),x.y-(f.y-g.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())},_r.prototype.locationPoint=function(r){return this.coordinatePoint(this.locationCoordinate(r))},_r.prototype.pointLocation=function(r){return this.coordinateLocation(this.pointCoordinate(r))},_r.prototype.locationCoordinate=function(r){return u.MercatorCoordinate.fromLngLat(r)},_r.prototype.coordinateLocation=function(r){return r.toLngLat()},_r.prototype.pointCoordinate=function(r){var l=[r.x,r.y,0,1],f=[r.x,r.y,1,1];u.transformMat4(l,l,this.pixelMatrixInverse),u.transformMat4(f,f,this.pixelMatrixInverse);var g=l[3],x=f[3],T=l[1]/g,E=f[1]/x,L=l[2]/g,O=f[2]/x,j=L==O?0:(0-L)/(O-L);return new u.MercatorCoordinate(u.number(l[0]/g,f[0]/x,j)/this.worldSize,u.number(T,E,j)/this.worldSize)},_r.prototype.coordinatePoint=function(r){var l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.transformMat4(l,l,this.pixelMatrix),new u.Point(l[0]/l[3],l[1]/l[3])},_r.prototype.getBounds=function(){return new u.LngLatBounds().extend(this.pointLocation(new u.Point(0,0))).extend(this.pointLocation(new u.Point(this.width,0))).extend(this.pointLocation(new u.Point(this.width,this.height))).extend(this.pointLocation(new u.Point(0,this.height)))},_r.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new u.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},_r.prototype.setMaxBounds=function(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},_r.prototype.calculatePosMatrix=function(r,l){l===void 0&&(l=!1);var f=r.key,g=l?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];var x=r.canonical,T=this.worldSize/this.zoomScale(x.z),E=x.x+Math.pow(2,x.z)*r.wrap,L=u.identity(new Float64Array(16));return u.translate(L,L,[E*T,x.y*T,0]),u.scale(L,L,[T/u.EXTENT,T/u.EXTENT,1]),u.multiply(L,l?this.alignedProjMatrix:this.projMatrix,L),g[f]=new Float32Array(L),g[f]},_r.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},_r.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var r,l,f,g,x=-90,T=90,E=-180,L=180,O=this.size,j=this._unmodified;if(this.latRange){var V=this.latRange;x=u.mercatorYfromLat(V[1])*this.worldSize,r=(T=u.mercatorYfromLat(V[0])*this.worldSize)-x<O.y?O.y/(T-x):0}if(this.lngRange){var H=this.lngRange;E=u.mercatorXfromLng(H[0])*this.worldSize,l=(L=u.mercatorXfromLng(H[1])*this.worldSize)-E<O.x?O.x/(L-E):0}var K=this.point,Q=Math.max(l||0,r||0);if(Q)return this.center=this.unproject(new u.Point(l?(L+E)/2:K.x,r?(T+x)/2:K.y)),this.zoom+=this.scaleZoom(Q),this._unmodified=j,void(this._constraining=!1);if(this.latRange){var ee=K.y,re=O.y/2;ee-re<x&&(g=x+re),T<ee+re&&(g=T-re)}if(this.lngRange){var ue=K.x,ae=O.x/2;ue-ae<E&&(f=E+ae),L<ue+ae&&(f=L-ae)}f===void 0&&g===void 0||(this.center=this.unproject(new u.Point(f!==void 0?f:K.x,g!==void 0?g:K.y))),this._unmodified=j,this._constraining=!1}},_r.prototype._calcMatrices=function(){if(this.height){var r=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var l=Math.PI/2+this._pitch,f=this._fov*(.5+r.y/this.height),g=Math.sin(f)*this.cameraToCenterDistance/Math.sin(u.clamp(Math.PI-l-f,.01,Math.PI-.01)),x=this.point,T=x.x,E=x.y,L=1.01*(Math.cos(Math.PI/2-this._pitch)*g+this.cameraToCenterDistance),O=this.height/50,j=new Float64Array(16);u.perspective(j,this._fov,this.width/this.height,O,L),j[8]=2*-r.x/this.width,j[9]=2*r.y/this.height,u.scale(j,j,[1,-1,1]),u.translate(j,j,[0,0,-this.cameraToCenterDistance]),u.rotateX(j,j,this._pitch),u.rotateZ(j,j,this.angle),u.translate(j,j,[-T,-E,0]),this.mercatorMatrix=u.scale([],j,[this.worldSize,this.worldSize,this.worldSize]),u.scale(j,j,[1,1,u.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=j,this.invProjMatrix=u.invert([],this.projMatrix);var V=this.width%2/2,H=this.height%2/2,K=Math.cos(this.angle),Q=Math.sin(this.angle),ee=T-Math.round(T)+K*V+Q*H,re=E-Math.round(E)+K*H+Q*V,ue=new Float64Array(j);if(u.translate(ue,ue,[.5<ee?ee-1:ee,.5<re?re-1:re,0]),this.alignedProjMatrix=ue,j=u.create(),u.scale(j,j,[this.width/2,-this.height/2,1]),u.translate(j,j,[1,-1,0]),this.labelPlaneMatrix=j,j=u.create(),u.scale(j,j,[1,-1,1]),u.translate(j,j,[-1,-1,0]),u.scale(j,j,[2/this.width,2/this.height,1]),this.glCoordMatrix=j,this.pixelMatrix=u.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(j=u.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=j,this._posMatrixCache={},this._alignedPosMatrixCache={}}},_r.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var r=this.pointCoordinate(new u.Point(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.transformMat4(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance},_r.prototype.getCameraPoint=function(){var r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.Point(0,r))},_r.prototype.getCameraQueryGeometry=function(r){var l=this.getCameraPoint();if(r.length===1)return[r[0],l];for(var f=l.x,g=l.y,x=l.x,T=l.y,E=0,L=r;E<L.length;E+=1){var O=L[E];f=Math.min(f,O.x),g=Math.min(g,O.y),x=Math.max(x,O.x),T=Math.max(T,O.y)}return[new u.Point(f,g),new u.Point(x,g),new u.Point(x,T),new u.Point(f,T),new u.Point(f,g)]},Object.defineProperties(_r.prototype,fr),ts.prototype.addTo=function(r){return this._map=r,u.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ts.prototype.remove=function(){return u.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ts.prototype.getHashString=function(r){var l=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),T=Math.round(l.lng*x)/x,E=Math.round(l.lat*x)/x,L=this._map.getBearing(),O=this._map.getPitch(),j="";if(j+=r?"/"+T+"/"+E+"/"+f:f+"/"+E+"/"+T,(L||O)&&(j+="/"+Math.round(10*L)/10),O&&(j+="/"+Math.round(O)),this._hashName){var V=this._hashName,H=!1,K=u.window.location.hash.slice(1).split("&").map(function(Q){var ee=Q.split("=")[0];return ee===V?(H=!0,ee+"="+j):Q}).filter(function(Q){return Q});return H||K.push(V+"="+j),"#"+K.join("&")}return"#"+j},ts.prototype._getCurrentHash=function(){var r,l=this,f=u.window.location.hash.replace("#","");return this._hashName?(f.split("&").map(function(g){return g.split("=")}).forEach(function(g){g[0]===l._hashName&&(r=g)}),(r&&r[1]||"").split("/")):f.split("/")},ts.prototype._onHashChange=function(){var r=this._getCurrentHash();if(3<=r.length&&!r.some(function(f){return isNaN(f)})){var l=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:l,pitch:+(r[4]||0)}),!0}return!1},ts.prototype._updateHashUnthrottled=function(){var r=this.getHashString();try{u.window.history.replaceState(u.window.history.state,"",r)}catch{}};var Ls={linearity:.3,easing:u.bezier(0,0,.3,1)},Id=u.extend({deceleration:2500,maxSpeed:1400},Ls),rg=u.extend({deceleration:20,maxSpeed:1400},Ls),Pc=u.extend({deceleration:1e3,maxSpeed:360},Ls),kd=u.extend({deceleration:1e3,maxSpeed:90},Ls);function La(r,l){(!r.duration||r.duration<l.duration)&&(r.duration=l.duration,r.easing=l.easing)}function Ps(r,l,f){var g=f.maxSpeed,x=f.linearity,T=f.deceleration,E=u.clamp(r*x/(l/1e3),-g,g),L=Math.abs(E)/(T*x);return{easing:f.easing,duration:1e3*L,amount:E*(L/2)}}function Vn(r,l){this._map=r,this._clickTolerance=l.clickTolerance}du.prototype.clear=function(){this._inertiaBuffer=[]},du.prototype.record=function(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.browser.now(),settings:r})},du.prototype._drainInertiaBuffer=function(){for(var r=this._inertiaBuffer,l=u.browser.now();0<r.length&&160<l-r[0].time;)r.shift()},du.prototype._onMoveEnd=function(r){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var l={zoom:0,bearing:0,pitch:0,pan:new u.Point(0,0),pinchAround:void 0,around:void 0},f=0,g=this._inertiaBuffer;f<g.length;f+=1){var x=g[f].settings;l.zoom+=x.zoomDelta||0,l.bearing+=x.bearingDelta||0,l.pitch+=x.pitchDelta||0,x.panDelta&&l.pan._add(x.panDelta),x.around&&(l.around=x.around),x.pinchAround&&(l.pinchAround=x.pinchAround)}var T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(l.pan.mag()){var L=Ps(l.pan.mag(),T,u.extend({},Id,r||{}));E.offset=l.pan.mult(L.amount/l.pan.mag()),E.center=this._map.transform.center,La(E,L)}if(l.zoom){var O=Ps(l.zoom,T,rg);E.zoom=this._map.transform.zoom+O.amount,La(E,O)}if(l.bearing){var j=Ps(l.bearing,T,Pc);E.bearing=this._map.transform.bearing+u.clamp(j.amount,-179,179),La(E,j)}if(l.pitch){var V=Ps(l.pitch,T,kd);E.pitch=this._map.transform.pitch+V.amount,La(E,V)}if(E.zoom||E.bearing){var H=l.pinchAround===void 0?l.around:l.pinchAround;E.around=H?this._map.unproject(H):this._map.getCenter()}return this.clear(),u.extend(E,{noMoveStart:!0})}};var xo=function(r){function l(g,x,T,E){E===void 0&&(E={});var L=k.mousePos(x.getCanvasContainer(),T),O=x.unproject(L);r.call(this,g,u.extend({point:L,lngLat:O,originalEvent:T},E)),this._defaultPrevented=!1,this.target=x}r&&(l.__proto__=r);var f={defaultPrevented:{configurable:!0}};return((l.prototype=Object.create(r&&r.prototype)).constructor=l).prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(l.prototype,f),l}(u.Event),Ds=function(r){function l(g,x,T){var E=g==="touchend"?T.changedTouches:T.touches,L=k.touchPos(x.getCanvasContainer(),E),O=L.map(function(H){return x.unproject(H)}),j=L.reduce(function(H,K,Q,ee){return H.add(K.div(ee.length))},new u.Point(0,0)),V=x.unproject(j);r.call(this,g,{points:L,point:j,lngLats:O,lngLat:V,originalEvent:T}),this._defaultPrevented=!1}r&&(l.__proto__=r);var f={defaultPrevented:{configurable:!0}};return((l.prototype=Object.create(r&&r.prototype)).constructor=l).prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(l.prototype,f),l}(u.Event),Md=function(r){function l(g,x,T){r.call(this,g,{originalEvent:T}),this._defaultPrevented=!1}r&&(l.__proto__=r);var f={defaultPrevented:{configurable:!0}};return((l.prototype=Object.create(r&&r.prototype)).constructor=l).prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(l.prototype,f),l}(u.Event);function la(r){this._map=r}function Hi(r,l){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}function Dc(r,l){for(var f={},g=0;g<r.length;g++)f[r[g].identifier]=l[g];return f}function fu(r){this.reset(),this.numTouches=r.numTouches}function ua(r){this.singleTap=new fu(r),this.numTaps=r.numTaps,this.reset()}function Ro(){this._zoomIn=new ua({numTouches:1,numTaps:2}),this._zoomOut=new ua({numTouches:2,numTaps:1}),this.reset()}function uo(r){this.reset(),this._clickTolerance=r.clickTolerance||1}Vn.prototype.reset=function(){delete this._mousedownPos},Vn.prototype.wheel=function(r){return this._firePreventable(new Md(r.type,this._map,r))},Vn.prototype.mousedown=function(r,l){return this._mousedownPos=l,this._firePreventable(new xo(r.type,this._map,r))},Vn.prototype.mouseup=function(r){this._map.fire(new xo(r.type,this._map,r))},Vn.prototype.click=function(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new xo(r.type,this._map,r))},Vn.prototype.dblclick=function(r){return this._firePreventable(new xo(r.type,this._map,r))},Vn.prototype.mouseover=function(r){this._map.fire(new xo(r.type,this._map,r))},Vn.prototype.mouseout=function(r){this._map.fire(new xo(r.type,this._map,r))},Vn.prototype.touchstart=function(r){return this._firePreventable(new Ds(r.type,this._map,r))},Vn.prototype.touchmove=function(r){this._map.fire(new Ds(r.type,this._map,r))},Vn.prototype.touchend=function(r){this._map.fire(new Ds(r.type,this._map,r))},Vn.prototype.touchcancel=function(r){this._map.fire(new Ds(r.type,this._map,r))},Vn.prototype._firePreventable=function(r){if(this._map.fire(r),r.defaultPrevented)return{}},Vn.prototype.isEnabled=function(){return!0},Vn.prototype.isActive=function(){return!1},Vn.prototype.enable=function(){},Vn.prototype.disable=function(){},la.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},la.prototype.mousemove=function(r){this._map.fire(new xo(r.type,this._map,r))},la.prototype.mousedown=function(){this._delayContextMenu=!0},la.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},la.prototype.contextmenu=function(r){this._delayContextMenu?this._contextMenuEvent=r:this._map.fire(new xo(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()},la.prototype.isEnabled=function(){return!0},la.prototype.isActive=function(){return!1},la.prototype.enable=function(){},la.prototype.disable=function(){},Hi.prototype.isEnabled=function(){return!!this._enabled},Hi.prototype.isActive=function(){return!!this._active},Hi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Hi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Hi.prototype.mousedown=function(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(k.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)},Hi.prototype.mousemoveWindow=function(r,l){if(this._active){var f=l;if(!(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)){var g=this._startPos;this._lastPos=f,this._box||(this._box=k.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));var x=Math.min(g.x,f.x),T=Math.max(g.x,f.x),E=Math.min(g.y,f.y),L=Math.max(g.y,f.y);k.setTransform(this._box,"translate("+x+"px,"+E+"px)"),this._box.style.width=T-x+"px",this._box.style.height=L-E+"px"}}},Hi.prototype.mouseupWindow=function(r,l){var f=this;if(this._active&&r.button===0){var g=this._startPos,x=l;if(this.reset(),k.suppressClick(),g.x!==x.x||g.y!==x.y)return this._map.fire(new u.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:function(T){return T.fitScreenCoordinates(g,x,f._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",r)}},Hi.prototype.keydown=function(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))},Hi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos},Hi.prototype._fireEvent=function(r,l){return this._map.fire(new u.Event(r,{originalEvent:l}))},fu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},fu.prototype.touchstart=function(r,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){for(var x=new u.Point(0,0),T=0,E=g;T<E.length;T+=1)x._add(E[T]);return x.div(g.length)}(l),this.touches=Dc(f,l)))},fu.prototype.touchmove=function(r,l,f){if(!this.aborted&&this.centroid){var g=Dc(f,l);for(var x in this.touches){var T=g[x];(!T||30<T.dist(this.touches[x]))&&(this.aborted=!0)}}},fu.prototype.touchend=function(r,l,f){if((!this.centroid||500<r.timeStamp-this.startTime)&&(this.aborted=!0),f.length===0){var g=!this.aborted&&this.centroid;if(this.reset(),g)return g}},ua.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ua.prototype.touchstart=function(r,l,f){this.singleTap.touchstart(r,l,f)},ua.prototype.touchmove=function(r,l,f){this.singleTap.touchmove(r,l,f)},ua.prototype.touchend=function(r,l,f){var g=this.singleTap.touchend(r,l,f);if(g){var x=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(g)<30;if(x&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}},Ro.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ro.prototype.touchstart=function(r,l,f){this._zoomIn.touchstart(r,l,f),this._zoomOut.touchstart(r,l,f)},Ro.prototype.touchmove=function(r,l,f){this._zoomIn.touchmove(r,l,f),this._zoomOut.touchmove(r,l,f)},Ro.prototype.touchend=function(r,l,f){var g=this,x=this._zoomIn.touchend(r,l,f),T=this._zoomOut.touchend(r,l,f);return x?(this._active=!0,r.preventDefault(),setTimeout(function(){return g.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(x)},{originalEvent:r})}}):T?(this._active=!0,r.preventDefault(),setTimeout(function(){return g.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(T)},{originalEvent:r})}}):void 0},Ro.prototype.touchcancel=function(){this.reset()},Ro.prototype.enable=function(){this._enabled=!0},Ro.prototype.disable=function(){this._enabled=!1,this.reset()},Ro.prototype.isEnabled=function(){return this._enabled},Ro.prototype.isActive=function(){return this._active};var zc={0:1,2:2};function wo(r){this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset()}uo.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},uo.prototype._correctButton=function(r,l){return!1},uo.prototype._move=function(r,l){return{}},uo.prototype.mousedown=function(r,l){if(!this._lastPoint){var f=k.mouseButton(r);this._correctButton(r,f)&&(this._lastPoint=l,this._eventButton=f)}},uo.prototype.mousemoveWindow=function(r,l){var f,g,x=this._lastPoint;if(x){if(r.preventDefault(),f=this._eventButton,g=zc[f],r.buttons===void 0||(r.buttons&g)!==g)this.reset();else if(this._moved||!(l.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(x,l)}},uo.prototype.mouseupWindow=function(r){this._lastPoint&&k.mouseButton(r)===this._eventButton&&(this._moved&&k.suppressClick(),this.reset())},uo.prototype.enable=function(){this._enabled=!0},uo.prototype.disable=function(){this._enabled=!1,this.reset()},uo.prototype.isEnabled=function(){return this._enabled},uo.prototype.isActive=function(){return this._active};var mu,zs,wl,ng=(Ns.__proto__=wl=uo,((Ns.prototype=Object.create(wl&&wl.prototype)).constructor=Ns).prototype.mousedown=function(r,l){wl.prototype.mousedown.call(this,r,l),this._lastPoint&&(this._active=!0)},Ns.prototype._correctButton=function(r,l){return l===0&&!r.ctrlKey},Ns.prototype._move=function(r,l){return{around:l,panDelta:l.sub(r)}},Ns),gu=(Pa.__proto__=zs=uo,((Pa.prototype=Object.create(zs&&zs.prototype)).constructor=Pa).prototype._correctButton=function(r,l){return l===0&&r.ctrlKey||l===2},Pa.prototype._move=function(r,l){var f=.8*(l.x-r.x);if(f)return this._active=!0,{bearingDelta:f}},Pa.prototype.contextmenu=function(r){r.preventDefault()},Pa),ch=(bl.__proto__=mu=uo,((bl.prototype=Object.create(mu&&mu.prototype)).constructor=bl).prototype._correctButton=function(r,l){return l===0&&r.ctrlKey||l===2},bl.prototype._move=function(r,l){var f=-.5*(l.y-r.y);if(f)return this._active=!0,{pitchDelta:f}},bl.prototype.contextmenu=function(r){r.preventDefault()},bl);function bl(){mu.apply(this,arguments)}function Pa(){zs.apply(this,arguments)}function Ns(){wl.apply(this,arguments)}function qn(){this.reset()}function Os(r,l,f){for(var g=0;g<r.length;g++)if(r[g].identifier===f)return l[g]}function ph(r,l){return Math.log(r/l)/Math.LN2}wo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new u.Point(0,0)},wo.prototype.touchstart=function(r,l,f){return this._calculateTransform(r,l,f)},wo.prototype.touchmove=function(r,l,f){if(this._active)return r.preventDefault(),this._calculateTransform(r,l,f)},wo.prototype.touchend=function(r,l,f){this._calculateTransform(r,l,f),this._active&&f.length<this._minTouches&&this.reset()},wo.prototype.touchcancel=function(){this.reset()},wo.prototype._calculateTransform=function(r,l,f){0<f.length&&(this._active=!0);var g=Dc(f,l),x=new u.Point(0,0),T=new u.Point(0,0),E=0;for(var L in g){var O=g[L],j=this._touches[L];j&&(x._add(O),T._add(O.sub(j)),E++,g[L]=O)}if(this._touches=g,!(E<this._minTouches)&&T.mag()){var V=T.div(E);if(this._sum._add(V),!(this._sum.mag()<this._clickTolerance))return{around:x.div(E),panDelta:V}}},wo.prototype.enable=function(){this._enabled=!0},wo.prototype.disable=function(){this._enabled=!1,this.reset()},wo.prototype.isEnabled=function(){return this._enabled},wo.prototype.isActive=function(){return this._active},qn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},qn.prototype._start=function(r){},qn.prototype._move=function(r,l,f){return{}},qn.prototype.touchstart=function(r,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))},qn.prototype.touchmove=function(r,l,f){if(this._firstTwoTouches){r.preventDefault();var g=this._firstTwoTouches,x=g[1],T=Os(f,l,g[0]),E=Os(f,l,x);if(T&&E){var L=this._aroundCenter?null:T.add(E).div(2);return this._move([T,E],L,r)}}},qn.prototype.touchend=function(r,l,f){if(this._firstTwoTouches){var g=this._firstTwoTouches,x=g[1],T=Os(f,l,g[0]),E=Os(f,l,x);T&&E||(this._active&&k.suppressClick(),this.reset())}},qn.prototype.touchcancel=function(){this.reset()},qn.prototype.enable=function(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"},qn.prototype.disable=function(){this._enabled=!1,this.reset()},qn.prototype.isEnabled=function(){return this._enabled},qn.prototype.isActive=function(){return this._active};var yu,Nc=(Rs.__proto__=yu=qn,((Rs.prototype=Object.create(yu&&yu.prototype)).constructor=Rs).prototype.reset=function(){yu.prototype.reset.call(this),delete this._distance,delete this._startDistance},Rs.prototype._start=function(r){this._startDistance=this._distance=r[0].dist(r[1])},Rs.prototype._move=function(r,l){var f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(ph(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ph(this._distance,f),pinchAround:l}},Rs);function Rs(){yu.apply(this,arguments)}function Ad(r,l){return 180*r.angleWith(l)/Math.PI}var rs,Ld=(ns.__proto__=rs=qn,((ns.prototype=Object.create(rs&&rs.prototype)).constructor=ns).prototype.reset=function(){rs.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},ns.prototype._start=function(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])},ns.prototype._move=function(r,l){var f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ad(this._vector,f),pinchAround:l}},ns.prototype._isBelowThreshold=function(r){this._minDiameter=Math.min(this._minDiameter,r.mag());var l=25/(Math.PI*this._minDiameter)*360,f=Ad(r,this._startVector);return Math.abs(f)<l},ns);function ns(){rs.apply(this,arguments)}function Cl(r){return Math.abs(r.y)>Math.abs(r.x)}function is(){var r=Pd;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep}var vu,Oc=(Bs.__proto__=vu=qn,((Bs.prototype=Object.create(vu&&vu.prototype)).constructor=Bs).prototype.reset=function(){vu.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Bs.prototype._start=function(r){Cl((this._lastPoints=r)[0].sub(r[1]))&&(this._valid=!1)},Bs.prototype._move=function(r,l,f){var g=r[0].sub(this._lastPoints[0]),x=r[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(g,x,f.timeStamp),this._valid)return this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}},Bs.prototype.gestureBeginsVertically=function(r,l,f){if(this._valid!==void 0)return this._valid;var g=2<=r.mag(),x=2<=l.mag();if(g||x){if(!g||!x)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;var T=0<r.y==0<l.y;return Cl(r)&&Cl(l)&&T}},Bs),Pd={panStep:100,bearingStep:15,pitchStep:10};function Bs(){vu.apply(this,arguments)}function Rc(r){return r*(2-r)}function Ii(r,l){this._map=r,this._el=r.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,u.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)}function Fs(r,l){this._clickZoom=r,this._tapZoom=l}function ca(){this.reset()}function Bo(){this._tap=new ua({numTouches:1,numTaps:1}),this.reset()}function _u(r,l,f){this._el=r,this._mousePan=l,this._touchPan=f}function os(r,l,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=f}function as(r,l,f,g){this._el=r,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}function xu(r){return r.zoom||r.drag||r.pitch||r.rotate}is.prototype.reset=function(){this._active=!1},is.prototype.keydown=function(r){var l=this;if(!(r.altKey||r.ctrlKey||r.metaKey)){var f=0,g=0,x=0,T=0,E=0;switch(r.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:r.shiftKey?g=-1:(r.preventDefault(),T=-1);break;case 39:r.shiftKey?g=1:(r.preventDefault(),T=1);break;case 38:r.shiftKey?x=1:(r.preventDefault(),E=-1);break;case 40:r.shiftKey?x=-1:(r.preventDefault(),E=1);break;default:return}return{cameraAnimation:function(L){var O=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:Rc,zoom:f?Math.round(O)+f*(r.shiftKey?2:1):O,bearing:L.getBearing()+g*l._bearingStep,pitch:L.getPitch()+x*l._pitchStep,offset:[-T*l._panStep,-E*l._panStep],center:L.getCenter()},{originalEvent:r})}}}},is.prototype.enable=function(){this._enabled=!0},is.prototype.disable=function(){this._enabled=!1,this.reset()},is.prototype.isEnabled=function(){return this._enabled},is.prototype.isActive=function(){return this._active},Ii.prototype.setZoomRate=function(r){this._defaultZoomRate=r},Ii.prototype.setWheelZoomRate=function(r){this._wheelZoomRate=r},Ii.prototype.isEnabled=function(){return!!this._enabled},Ii.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ii.prototype.isZooming=function(){return!!this._zooming},Ii.prototype.enable=function(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&r.around==="center")},Ii.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ii.prototype.wheel=function(r){if(this.isEnabled()){var l=r.deltaMode===u.window.WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,f=u.browser.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%4.000244140625==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":400<g?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}},Ii.prototype._onTimeout=function(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)},Ii.prototype._start=function(r){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var l=k.mousePos(this._el,r);this._around=u.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(l)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ii.prototype.renderFrame=function(){return this._onScrollFrame()},Ii.prototype._onScrollFrame=function(){var r=this;if(this._frameId&&(this._frameId=null,this.isActive())){var l=this._map.transform;if(this._delta!==0){var f=this._type==="wheel"&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate,g=2/(1+Math.exp(-Math.abs(this._delta*f)));this._delta<0&&g!==0&&(g=1/g);var x=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(x*g))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var T,E=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,L=this._startZoom,O=this._easing,j=!1;if(this._type==="wheel"&&L&&O){var V=Math.min((u.browser.now()-this._lastWheelEventTime)/200,1),H=O(V);T=u.number(L,E,H),V<1?this._frameId||(this._frameId=!0):j=!0}else T=E,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(function(){r._zooming=!1,r._handler._triggerRenderFrame(),delete r._targetZoom,delete r._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:T-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ii.prototype._smoothOutEasing=function(r){var l=u.ease;if(this._prevEase){var f=this._prevEase,g=(u.browser.now()-f.start)/f.duration,x=f.easing(.01+g)-f.easing(g),T=.27/Math.sqrt(x*x+1e-4)*.01,E=Math.sqrt(.0729-T*T);l=u.bezier(T,E,.25,1)}return this._prevEase={start:u.browser.now(),duration:r,easing:l},l},Ii.prototype.reset=function(){this._active=!1},Fs.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Fs.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Fs.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Fs.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()},ca.prototype.reset=function(){this._active=!1},ca.prototype.dblclick=function(r,l){return r.preventDefault(),{cameraAnimation:function(f){f.easeTo({duration:300,zoom:f.getZoom()+(r.shiftKey?-1:1),around:f.unproject(l)},{originalEvent:r})}}},ca.prototype.enable=function(){this._enabled=!0},ca.prototype.disable=function(){this._enabled=!1,this.reset()},ca.prototype.isEnabled=function(){return this._enabled},ca.prototype.isActive=function(){return this._active},Bo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Bo.prototype.touchstart=function(r,l,f){this._swipePoint||(this._tapTime&&500<r.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<f.length&&(this._swipePoint=l[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(r,l,f))},Bo.prototype.touchmove=function(r,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;var g=l[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(r,l,f)},Bo.prototype.touchend=function(r,l,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(r,l,f)&&(this._tapTime=r.timeStamp)},Bo.prototype.touchcancel=function(){this.reset()},Bo.prototype.enable=function(){this._enabled=!0},Bo.prototype.disable=function(){this._enabled=!1,this.reset()},Bo.prototype.isEnabled=function(){return this._enabled},Bo.prototype.isActive=function(){return this._active},_u.prototype.enable=function(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},_u.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},_u.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},_u.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()},os.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},os.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},os.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},os.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()},as.prototype.enable=function(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},as.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},as.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},as.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},as.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},as.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ss,Dd=((ss=u.Event)&&(hh.__proto__=ss),(hh.prototype=Object.create(ss&&ss.prototype)).constructor=hh);function hh(){ss.apply(this,arguments)}function Sl(r){return r.panDelta&&r.panDelta.mag()||r.zoomDelta||r.bearingDelta||r.pitchDelta}function Zn(r,l){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new du(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l),u.bindAll(["handleEvent","handleWindowEvent"],this);var f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[u.window.document,"mousemove",{capture:!0}],[u.window.document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[u.window,"blur",void 0]];for(var g=0,x=this._listeners;g<x.length;g+=1){var T=x[g],E=T[0];k.addEventListener(E,T[1],E===u.window.document?this.handleWindowEvent:this.handleEvent,T[2])}}function Fo(r){r===void 0&&(r={}),this.options=r,u.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)}Zn.prototype.destroy=function(){for(var r=0,l=this._listeners;r<l.length;r+=1){var f=l[r],g=f[0];k.removeEventListener(g,f[1],g===u.window.document?this.handleWindowEvent:this.handleEvent,f[2])}},Zn.prototype._addDefaultHandlers=function(r){var l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new Vn(l,r));var g=l.boxZoom=new Hi(l,r);this._add("boxZoom",g);var x=new Ro,T=new ca;l.doubleClickZoom=new Fs(T,x),this._add("tapZoom",x),this._add("clickZoom",T);var E=new Bo;this._add("tapDragZoom",E);var L=l.touchPitch=new Oc;this._add("touchPitch",L);var O=new gu(r),j=new ch(r);l.dragRotate=new os(r,O,j),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",j,["mouseRotate"]);var V=new ng(r),H=new wo(r);l.dragPan=new _u(f,V,H),this._add("mousePan",V),this._add("touchPan",H,["touchZoom","touchRotate"]);var K=new Ld,Q=new Nc;l.touchZoomRotate=new as(f,Q,K,E),this._add("touchRotate",K,["touchPan","touchZoom"]),this._add("touchZoom",Q,["touchPan","touchRotate"]);var ee=l.scrollZoom=new Ii(l,this);this._add("scrollZoom",ee,["mousePan"]);var re=l.keyboard=new is;this._add("keyboard",re),this._add("blockableMapEvent",new la(l));for(var ue=0,ae=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ue<ae.length;ue+=1){var ye=ae[ue];r.interactive&&r[ye]&&l[ye].enable(r[ye])}},Zn.prototype._add=function(r,l,f){this._handlers.push({handlerName:r,handler:l,allowed:f}),this._handlersById[r]=l},Zn.prototype.stop=function(){if(!this._updatingCamera){for(var r=0,l=this._handlers;r<l.length;r+=1)l[r].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Zn.prototype.isActive=function(){for(var r=0,l=this._handlers;r<l.length;r+=1)if(l[r].handler.isActive())return!0;return!1},Zn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Zn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Zn.prototype.isMoving=function(){return Boolean(xu(this._eventsInProgress))||this.isZooming()},Zn.prototype._blockedByActive=function(r,l,f){for(var g in r)if(g!==f&&(!l||l.indexOf(g)<0))return!0;return!1},Zn.prototype.handleWindowEvent=function(r){this.handleEvent(r,r.type+"Window")},Zn.prototype._getMapTouches=function(r){for(var l=[],f=0,g=r;f<g.length;f+=1){var x=g[f];this._el.contains(x.target)&&l.push(x)}return l},Zn.prototype.handleEvent=function(r,l){if(r.type!=="blur"){this._updatingCamera=!0;for(var f=r.type==="renderFrame"?void 0:r,g={needsRenderFrame:!1},x={},T={},E=r.touches?this._getMapTouches(r.touches):void 0,L=E?k.touchPos(this._el,E):k.mousePos(this._el,r),O=0,j=this._handlers;O<j.length;O+=1){var V=j[O],H=V.handlerName,K=V.handler,Q=V.allowed;if(K.isEnabled()){var ee=void 0;this._blockedByActive(T,Q,H)?K.reset():K[l||r.type]&&(ee=K[l||r.type](r,L,E),this.mergeHandlerResult(g,x,ee,H,f),ee&&ee.needsRenderFrame&&this._triggerRenderFrame()),(ee||K.isActive())&&(T[H]=K)}}var re={};for(var ue in this._previousActiveHandlers)T[ue]||(re[ue]=f);this._previousActiveHandlers=T,(Object.keys(re).length||Sl(g))&&(this._changes.push([g,x,re]),this._triggerRenderFrame()),(Object.keys(T).length||Sl(g))&&this._map._stop(!0),this._updatingCamera=!1;var ae=g.cameraAnimation;ae&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],ae(this._map))}else this.stop()},Zn.prototype.mergeHandlerResult=function(r,l,f,g,x){if(f){u.extend(r,f);var T={handlerName:g,originalEvent:f.originalEvent||x};f.zoomDelta!==void 0&&(l.zoom=T),f.panDelta!==void 0&&(l.drag=T),f.pitchDelta!==void 0&&(l.pitch=T),f.bearingDelta!==void 0&&(l.rotate=T)}},Zn.prototype._applyChanges=function(){for(var r={},l={},f={},g=0,x=this._changes;g<x.length;g+=1){var T=x[g],E=T[0],L=T[1],O=T[2];E.panDelta&&(r.panDelta=(r.panDelta||new u.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(r.around=E.around),E.pinchAround!==void 0&&(r.pinchAround=E.pinchAround),E.noInertia&&(r.noInertia=E.noInertia),u.extend(l,L),u.extend(f,O)}this._updateMapTransform(r,l,f),this._changes=[]},Zn.prototype._updateMapTransform=function(r,l,f){var g=this._map,x=g.transform;if(!Sl(r))return this._fireEvents(l,f);var T=r.panDelta,E=r.zoomDelta,L=r.bearingDelta,O=r.pitchDelta,j=r.around,V=r.pinchAround;V!==void 0&&(j=V),g._stop(!0),j=j||g.transform.centerPoint;var H=x.pointLocation(T?j.sub(T):j);L&&(x.bearing+=L),O&&(x.pitch+=O),E&&(x.zoom+=E),x.setLocationAtPoint(H,j),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,f)},Zn.prototype._fireEvents=function(r,l){var f=this,g=xu(this._eventsInProgress),x=xu(r),T={};for(var E in r)this._eventsInProgress[E]||(T[E+"start"]=r[E].originalEvent),this._eventsInProgress[E]=r[E];for(var L in!g&&x&&this._fireEvent("movestart",x.originalEvent),T)this._fireEvent(L,T[L]);for(var O in r.rotate&&(this._bearingChanged=!0),x&&this._fireEvent("move",x.originalEvent),r)this._fireEvent(O,r[O].originalEvent);var j,V={};for(var H in this._eventsInProgress){var K=this._eventsInProgress[H],Q=K.handlerName,ee=K.originalEvent;this._handlersById[Q].isActive()||(delete this._eventsInProgress[H],V[H+"end"]=j=l[Q]||ee)}for(var re in V)this._fireEvent(re,V[re]);var ue=xu(this._eventsInProgress);if((g||x)&&!ue){this._updatingCamera=!0;var ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=function(he){return he!==0&&-f._bearingSnap<he&&he<f._bearingSnap};ae?(ye(ae.bearing||this._map.getBearing())&&(ae.bearing=0),this._map.easeTo(ae,{originalEvent:j})):(this._map.fire(new u.Event("moveend",{originalEvent:j})),ye(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Zn.prototype._fireEvent=function(r,l){this._map.fire(new u.Event(r,l?{originalEvent:l}:{}))},Zn.prototype._requestFrame=function(){var r=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(l){delete r._frameId,r.handleEvent(new Dd("renderFrame",{timeStamp:l})),r._applyChanges()})},Zn.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var wu,zd=((wu=u.Evented)&&(Jt.__proto__=wu),((Jt.prototype=Object.create(wu&&wu.prototype)).constructor=Jt).prototype.getCenter=function(){return new u.LngLat(this.transform.center.lng,this.transform.center.lat)},Jt.prototype.setCenter=function(r,l){return this.jumpTo({center:r},l)},Jt.prototype.panBy=function(r,l,f){return r=u.Point.convert(r).mult(-1),this.panTo(this.transform.center,u.extend({offset:r},l),f)},Jt.prototype.panTo=function(r,l,f){return this.easeTo(u.extend({center:r},l),f)},Jt.prototype.getZoom=function(){return this.transform.zoom},Jt.prototype.setZoom=function(r,l){return this.jumpTo({zoom:r},l),this},Jt.prototype.zoomTo=function(r,l,f){return this.easeTo(u.extend({zoom:r},l),f)},Jt.prototype.zoomIn=function(r,l){return this.zoomTo(this.getZoom()+1,r,l),this},Jt.prototype.zoomOut=function(r,l){return this.zoomTo(this.getZoom()-1,r,l),this},Jt.prototype.getBearing=function(){return this.transform.bearing},Jt.prototype.setBearing=function(r,l){return this.jumpTo({bearing:r},l),this},Jt.prototype.getPadding=function(){return this.transform.padding},Jt.prototype.setPadding=function(r,l){return this.jumpTo({padding:r},l),this},Jt.prototype.rotateTo=function(r,l,f){return this.easeTo(u.extend({bearing:r},l),f)},Jt.prototype.resetNorth=function(r,l){return this.rotateTo(0,u.extend({duration:1e3},r),l),this},Jt.prototype.resetNorthPitch=function(r,l){return this.easeTo(u.extend({bearing:0,pitch:0,duration:1e3},r),l),this},Jt.prototype.snapToNorth=function(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this},Jt.prototype.getPitch=function(){return this.transform.pitch},Jt.prototype.setPitch=function(r,l){return this.jumpTo({pitch:r},l),this},Jt.prototype.cameraForBounds=function(r,l){return r=u.LngLatBounds.convert(r),this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),0,l)},Jt.prototype._cameraForBoxAndBearing=function(r,l,f,g){var x={top:0,bottom:0,right:0,left:0};if(typeof(g=u.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){var T=g.padding;g.padding={top:T,bottom:T,right:T,left:T}}g.padding=u.extend(x,g.padding);var E=this.transform,L=E.padding,O=E.project(u.LngLat.convert(r)),j=E.project(u.LngLat.convert(l)),V=O.rotate(-f*Math.PI/180),H=j.rotate(-f*Math.PI/180),K=new u.Point(Math.max(V.x,H.x),Math.max(V.y,H.y)),Q=new u.Point(Math.min(V.x,H.x),Math.min(V.y,H.y)),ee=K.sub(Q),re=(E.width-(L.left+L.right+g.padding.left+g.padding.right))/ee.x,ue=(E.height-(L.top+L.bottom+g.padding.top+g.padding.bottom))/ee.y;if(!(ue<0||re<0)){var ae=Math.min(E.scaleZoom(E.scale*Math.min(re,ue)),g.maxZoom),ye=u.Point.convert(g.offset),he=new u.Point(ye.x+(g.padding.left-g.padding.right)/2,ye.y+(g.padding.top-g.padding.bottom)/2).mult(E.scale/E.zoomScale(ae));return{center:E.unproject(O.add(j).div(2).sub(he)),zoom:ae,bearing:f}}u.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Jt.prototype.fitBounds=function(r,l,f){return this._fitInternal(this.cameraForBounds(r,l),l,f)},Jt.prototype.fitScreenCoordinates=function(r,l,f,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.Point.convert(r)),this.transform.pointLocation(u.Point.convert(l)),f,g),g,x)},Jt.prototype._fitInternal=function(r,l,f){return r?(delete(l=u.extend(r,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this},Jt.prototype.jumpTo=function(r,l){this.stop();var f=this.transform,g=!1,x=!1,T=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(g=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=u.LngLat.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(x=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(T=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this.fire(new u.Event("movestart",l)).fire(new u.Event("move",l)),g&&this.fire(new u.Event("zoomstart",l)).fire(new u.Event("zoom",l)).fire(new u.Event("zoomend",l)),x&&this.fire(new u.Event("rotatestart",l)).fire(new u.Event("rotate",l)).fire(new u.Event("rotateend",l)),T&&this.fire(new u.Event("pitchstart",l)).fire(new u.Event("pitch",l)).fire(new u.Event("pitchend",l)),this.fire(new u.Event("moveend",l))},Jt.prototype.easeTo=function(r,l){var f=this;this._stop(!1,r.easeId),((r=u.extend({offset:[0,0],duration:500,easing:u.ease},r)).animate===!1||!r.essential&&u.browser.prefersReducedMotion)&&(r.duration=0);var g=this.transform,x=this.getZoom(),T=this.getBearing(),E=this.getPitch(),L=this.getPadding(),O="zoom"in r?+r.zoom:x,j="bearing"in r?this._normalizeBearing(r.bearing,T):T,V="pitch"in r?+r.pitch:E,H="padding"in r?r.padding:g.padding,K=u.Point.convert(r.offset),Q=g.centerPoint.add(K),ee=g.pointLocation(Q),re=u.LngLat.convert(r.center||ee);this._normalizeCenter(re);var ue,ae,ye=g.project(ee),he=g.project(re).sub(ye),me=g.zoomScale(O-x);r.around&&(ue=u.LngLat.convert(r.around),ae=g.locationPoint(ue));var Ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||O!==x,this._rotating=this._rotating||T!==j,this._pitching=this._pitching||V!==E,this._padding=!g.isPaddingEqual(H),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,Ce),clearTimeout(this._easeEndTimeoutID),this._ease(function(ke){if(f._zooming&&(g.zoom=u.number(x,O,ke)),f._rotating&&(g.bearing=u.number(T,j,ke)),f._pitching&&(g.pitch=u.number(E,V,ke)),f._padding&&(g.interpolatePadding(L,H,ke),Q=g.centerPoint.add(K)),ue)g.setLocationAtPoint(ue,ae);else{var De=g.zoomScale(g.zoom-x),Ve=x<O?Math.min(2,me):Math.max(.5,me),qe=Math.pow(Ve,1-ke),Ke=g.unproject(ye.add(he.mult(ke*qe)).mult(De));g.setLocationAtPoint(g.renderWorldCopies?Ke.wrap():Ke,Q)}f._fireMoveEvents(l)},function(ke){f._afterEase(l,ke)},r),this},Jt.prototype._prepareEase=function(r,l,f){f===void 0&&(f={}),this._moving=!0,l||f.moving||this.fire(new u.Event("movestart",r)),this._zooming&&!f.zooming&&this.fire(new u.Event("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new u.Event("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new u.Event("pitchstart",r))},Jt.prototype._fireMoveEvents=function(r){this.fire(new u.Event("move",r)),this._zooming&&this.fire(new u.Event("zoom",r)),this._rotating&&this.fire(new u.Event("rotate",r)),this._pitching&&this.fire(new u.Event("pitch",r))},Jt.prototype._afterEase=function(r,l){if(!this._easeId||!l||this._easeId!==l){delete this._easeId;var f=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new u.Event("zoomend",r)),g&&this.fire(new u.Event("rotateend",r)),x&&this.fire(new u.Event("pitchend",r)),this.fire(new u.Event("moveend",r))}},Jt.prototype.flyTo=function(r,l){var f=this;if(!r.essential&&u.browser.prefersReducedMotion){var g=u.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,l)}this.stop(),r=u.extend({offset:[0,0],speed:1.2,curve:1.42,easing:u.ease},r);var x=this.transform,T=this.getZoom(),E=this.getBearing(),L=this.getPitch(),O=this.getPadding(),j="zoom"in r?u.clamp(+r.zoom,x.minZoom,x.maxZoom):T,V="bearing"in r?this._normalizeBearing(r.bearing,E):E,H="pitch"in r?+r.pitch:L,K="padding"in r?r.padding:x.padding,Q=x.zoomScale(j-T),ee=u.Point.convert(r.offset),re=x.centerPoint.add(ee),ue=x.pointLocation(re),ae=u.LngLat.convert(r.center||ue);this._normalizeCenter(ae);var ye=x.project(ue),he=x.project(ae).sub(ye),me=r.curve,Ce=Math.max(x.width,x.height),ke=Ce/Q,De=he.mag();if("minZoom"in r){var Ve=u.clamp(Math.min(r.minZoom,T,j),x.minZoom,x.maxZoom),qe=Ce/x.zoomScale(Ve-T);me=Math.sqrt(qe/De*2)}var Ke=me*me;function lt(_t){var zt=(ke*ke-Ce*Ce+(_t?-1:1)*Ke*Ke*De*De)/(2*(_t?ke:Ce)*Ke*De);return Math.log(Math.sqrt(zt*zt+1)-zt)}function ht(_t){return(Math.exp(_t)-Math.exp(-_t))/2}function dt(_t){return(Math.exp(_t)+Math.exp(-_t))/2}var Tt=lt(0),mt=function(_t){return dt(Tt)/dt(Tt+me*_t)},Mt=function(_t){return Ce*((dt(Tt)*(ht(zt=Tt+me*_t)/dt(zt))-ht(Tt))/Ke)/De;var zt},Ut=(lt(1)-Tt)/me;if(Math.abs(De)<1e-6||!isFinite(Ut)){if(Math.abs(Ce-ke)<1e-6)return this.easeTo(r,l);var Rt=ke<Ce?-1:1;Ut=Math.abs(Math.log(ke/Ce))/me,Mt=function(){return 0},mt=function(_t){return Math.exp(Rt*me*_t)}}return r.duration="duration"in r?+r.duration:1e3*Ut/("screenSpeed"in r?r.screenSpeed/me:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=E!==V,this._pitching=H!==L,this._padding=!x.isPaddingEqual(K),this._prepareEase(l,!1),this._ease(function(_t){var zt=_t*Ut,er=1/mt(zt);x.zoom=_t===1?j:T+x.scaleZoom(er),f._rotating&&(x.bearing=u.number(E,V,_t)),f._pitching&&(x.pitch=u.number(L,H,_t)),f._padding&&(x.interpolatePadding(O,K,_t),re=x.centerPoint.add(ee));var Ot=_t===1?ae:x.unproject(ye.add(he.mult(Mt(zt))).mult(er));x.setLocationAtPoint(x.renderWorldCopies?Ot.wrap():Ot,re),f._fireMoveEvents(l)},function(){return f._afterEase(l)},r),this},Jt.prototype.isEasing=function(){return!!this._easeFrameId},Jt.prototype.stop=function(){return this._stop()},Jt.prototype._stop=function(r,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,l)}if(!r){var g=this.handlers;g&&g.stop()}return this},Jt.prototype._ease=function(r,l,f){f.animate===!1||f.duration===0?(r(1),l()):(this._easeStart=u.browser.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Jt.prototype._renderFrameCallback=function(){var r=Math.min((u.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Jt.prototype._normalizeBearing=function(r,l){r=u.wrap(r,-180,180);var f=Math.abs(r-l);return Math.abs(r-360-l)<f&&(r-=360),Math.abs(r+360-l)<f&&(r+=360),r},Jt.prototype._normalizeCenter=function(r){var l=this.transform;if(l.renderWorldCopies&&!l.lngRange){var f=r.lng-l.center.lng;r.lng+=180<f?-360:f<-180?360:0}},Jt);function Jt(r,l){wu.call(this),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,u.bindAll(["_renderFrameCallback"],this)}function Da(){u.bindAll(["_updateLogo"],this),u.bindAll(["_updateCompact"],this)}function Bc(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}Fo.prototype.getDefaultPosition=function(){return"bottom-right"},Fo.prototype.onAdd=function(r){var l=this.options&&this.options.compact;return this._map=r,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=k.create("div","mapboxgl-ctrl-attrib-inner",this._container),l&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),l===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Fo.prototype.onRemove=function(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Fo.prototype._updateEditLink=function(){var r=this._editLink;r=r||(this._editLink=this._container.querySelector(".mapbox-improve-map"));var l=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||u.config.ACCESS_TOKEN}];if(r){var f=l.reduce(function(g,x,T){return x.value&&(g+=x.key+"="+x.value+(T<l.length-1?"&":"")),g},"?");r.href=u.config.FEEDBACK_URL+"/"+f+(this._map._hash?this._map._hash.getHashString(!0):""),r.rel="noopener nofollow"}},Fo.prototype._updateData=function(r){!r||r.sourceDataType!=="metadata"&&r.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Fo.prototype._updateAttributions=function(){if(this._map.style){var r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(function(L){return typeof L!="string"?"":L})):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){var l=this._map.style.stylesheet;this.styleOwner=l.owner,this.styleId=l.id}var f=this._map.style.sourceCaches;for(var g in f){var x=f[g];if(x.used){var T=x.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r.sort(function(L,O){return L.length-O.length});var E=(r=r.filter(function(L,O){for(var j=O+1;j<r.length;j++)if(0<=r[j].indexOf(L))return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,r.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Fo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},Da.prototype.onAdd=function(r){this._map=r,this._container=k.create("div","mapboxgl-ctrl");var l=k.create("a","mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://www.mapbox.com/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Da.prototype.onRemove=function(){k.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Da.prototype.getDefaultPosition=function(){return"bottom-left"},Da.prototype._updateLogo=function(r){r&&r.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Da.prototype._logoRequired=function(){if(this._map.style){var r=this._map.style.sourceCaches;for(var l in r)if(r[l].getSource().mapbox_logo)return!0;return!1}},Da.prototype._updateCompact=function(){var r=this._container.children;if(r.length){var l=r[0];this._map.getCanvasContainer().offsetWidth<250?l.classList.add("mapboxgl-compact"):l.classList.remove("mapboxgl-compact")}},Bc.prototype.add=function(r){var l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l},Bc.prototype.remove=function(r){for(var l=this._currentlyRunning,f=0,g=l?this._queue.concat(l):this._queue;f<g.length;f+=1){var x=g[f];if(x.id===r)return void(x.cancelled=!0)}},Bc.prototype.run=function(r){r===void 0&&(r=0);var l=this._currentlyRunning=this._queue;this._queue=[];for(var f=0,g=l;f<g.length;f+=1){var x=g[f];if(!x.cancelled&&(x.callback(r),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Bc.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Nd={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Od=u.window.HTMLImageElement,dh=u.window.HTMLElement,bu=u.window.ImageBitmap,Rd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},fh=function(r){function l(g){var x=this;if((g=u.extend({},Rd,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&60<g.maxPitch)throw new Error("maxPitch must be less than or equal to 60");var T=new _r(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies);if(r.call(this,T,g),this._interactive=g.interactive,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new Bc,this._controls=[],this._mapId=u.uniqueId(),this._locale=u.extend({},Nd,g.locale),this._requestManager=new u.RequestManager(g.transformRequest,g.accessToken),typeof g.container=="string"){if(this._container=u.window.document.getElementById(g.container),!this._container)throw new Error("Container '"+g.container+"' not found.")}else{if(!(g.container instanceof dh))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),u.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return x._update(!1)}),this.on("moveend",function(){return x._update(!1)}),this.on("zoom",function(){return x._update(!0)}),u.window!==void 0&&(u.window.addEventListener("online",this._onWindowOnline,!1),u.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Zn(this,g),this._hash=g.hash&&new ts(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,u.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new Fo({customAttribution:g.customAttribution})),this.addControl(new Da,g.logoPosition),this.on("style.load",function(){x.transform.unmodified&&x.jumpTo(x.style.stylesheet)}),this.on("data",function(E){x._update(E.dataType==="style"),x.fire(new u.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){x.fire(new u.Event(E.dataType+"dataloading",E))})}r&&(l.__proto__=r);var f={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return((l.prototype=Object.create(r&&r.prototype)).constructor=l).prototype._getMapId=function(){return this._mapId},l.prototype.addControl=function(g,x){if(x===void 0&&g.getDefaultPosition&&(x=g.getDefaultPosition()),x===void 0&&(x="top-right"),!g||!g.onAdd)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var T=g.onAdd(this);this._controls.push(g);var E=this._controlPositions[x];return x.indexOf("bottom")!==-1?E.insertBefore(T,E.firstChild):E.appendChild(T),this},l.prototype.removeControl=function(g){if(!g||!g.onRemove)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var x=this._controls.indexOf(g);return-1<x&&this._controls.splice(x,1),g.onRemove(this),this},l.prototype.resize=function(g){var x=this._containerDimensions(),T=x[0],E=x[1];this._resizeCanvas(T,E),this.transform.resize(T,E),this.painter.resize(T,E);var L=!this._moving;return L&&(this.stop(),this.fire(new u.Event("movestart",g)).fire(new u.Event("move",g))),this.fire(new u.Event("resize",g)),L&&this.fire(new u.Event("moveend",g)),this},l.prototype.getBounds=function(){return this.transform.getBounds()},l.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},l.prototype.setMaxBounds=function(g){return this.transform.setMaxBounds(u.LngLatBounds.convert(g)),this._update()},l.prototype.setMinZoom=function(g){if(-2<=(g=g??-2)&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},l.prototype.getMinZoom=function(){return this.transform.minZoom},l.prototype.setMaxZoom=function(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")},l.prototype.getMaxZoom=function(){return this.transform.maxZoom},l.prototype.setMinPitch=function(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(0<=g&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},l.prototype.getMinPitch=function(){return this.transform.minPitch},l.prototype.setMaxPitch=function(g){if(60<(g=g??60))throw new Error("maxPitch must be less than or equal to 60");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")},l.prototype.getMaxPitch=function(){return this.transform.maxPitch},l.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},l.prototype.setRenderWorldCopies=function(g){return this.transform.renderWorldCopies=g,this._update()},l.prototype.project=function(g){return this.transform.locationPoint(u.LngLat.convert(g))},l.prototype.unproject=function(g){return this.transform.pointLocation(u.Point.convert(g))},l.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},l.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},l.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},l.prototype._createDelegatedListener=function(g,x,T){var E,L=this;if(g==="mouseenter"||g==="mouseover"){var O=!1;return{layer:x,listener:T,delegates:{mousemove:function(V){var H=L.getLayer(x)?L.queryRenderedFeatures(V.point,{layers:[x]}):[];H.length?O||(O=!0,T.call(L,new xo(g,L,V.originalEvent,{features:H}))):O=!1},mouseout:function(){O=!1}}}}if(g!=="mouseleave"&&g!=="mouseout")return{layer:x,listener:T,delegates:((E={})[g]=function(V){var H=L.getLayer(x)?L.queryRenderedFeatures(V.point,{layers:[x]}):[];H.length&&(V.features=H,T.call(L,V),delete V.features)},E)};var j=!1;return{layer:x,listener:T,delegates:{mousemove:function(V){(L.getLayer(x)?L.queryRenderedFeatures(V.point,{layers:[x]}):[]).length?j=!0:j&&(j=!1,T.call(L,new xo(g,L,V.originalEvent)))},mouseout:function(V){j&&(j=!1,T.call(L,new xo(g,L,V.originalEvent)))}}}},l.prototype.on=function(g,x,T){if(T===void 0)return r.prototype.on.call(this,g,x);var E=this._createDelegatedListener(g,x,T);for(var L in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(E),E.delegates)this.on(L,E.delegates[L]);return this},l.prototype.once=function(g,x,T){if(T===void 0)return r.prototype.once.call(this,g,x);var E=this._createDelegatedListener(g,x,T);for(var L in E.delegates)this.once(L,E.delegates[L]);return this},l.prototype.off=function(g,x,T){var E=this;return T===void 0?r.prototype.off.call(this,g,x):(this._delegatedListeners&&this._delegatedListeners[g]&&function(L){for(var O=L[g],j=0;j<O.length;j++){var V=O[j];if(V.layer===x&&V.listener===T){for(var H in V.delegates)E.off(H,V.delegates[H]);return O.splice(j,1)}}}(this._delegatedListeners),this)},l.prototype.queryRenderedFeatures=function(g,x){if(!this.style)return[];var T;if(x!==void 0||g===void 0||g instanceof u.Point||Array.isArray(g)||(x=g,g=void 0),x=x||{},(g=g||[[0,0],[this.transform.width,this.transform.height]])instanceof u.Point||typeof g[0]=="number")T=[u.Point.convert(g)];else{var E=u.Point.convert(g[0]),L=u.Point.convert(g[1]);T=[E,new u.Point(L.x,E.y),L,new u.Point(E.x,L.y),E]}return this.style.queryRenderedFeatures(T,x,this.transform)},l.prototype.querySourceFeatures=function(g,x){return this.style.querySourceFeatures(g,x)},l.prototype.setStyle=function(g,x){return(x=u.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},x)).diff!==!1&&x.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,x),this):(this._localIdeographFontFamily=x.localIdeographFontFamily,this._updateStyle(g,x))},l.prototype._getUIString=function(g){var x=this._locale[g];if(x==null)throw new Error("Missing UI string '"+g+"'");return x},l.prototype._updateStyle=function(g,x){return this.style&&(this.style.setEventedParent(null),this.style._remove()),g?(this.style=new lu(this,x||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g)):delete this.style,this},l.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new lu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},l.prototype._diffStyle=function(g,x){var T=this;if(typeof g=="string"){var E=this._requestManager.normalizeStyleURL(g),L=this._requestManager.transformRequest(E,u.ResourceType.Style);u.getJSON(L,function(O,j){O?T.fire(new u.ErrorEvent(O)):j&&T._updateDiff(j,x)})}else typeof g=="object"&&this._updateDiff(g,x)},l.prototype._updateDiff=function(g,x){try{this.style.setState(g)&&this._update(!0)}catch(T){u.warnOnce("Unable to perform style diff: "+(T.message||T.error||T)+".  Rebuilding the style from scratch."),this._updateStyle(g,x)}},l.prototype.getStyle=function(){if(this.style)return this.style.serialize()},l.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():u.warnOnce("There is no style added to the map.")},l.prototype.addSource=function(g,x){return this._lazyInitEmptyStyle(),this.style.addSource(g,x),this._update(!0)},l.prototype.isSourceLoaded=function(g){var x=this.style&&this.style.sourceCaches[g];if(x!==void 0)return x.loaded();this.fire(new u.ErrorEvent(new Error("There is no source with ID '"+g+"'")))},l.prototype.areTilesLoaded=function(){var g=this.style&&this.style.sourceCaches;for(var x in g){var T=g[x]._tiles;for(var E in T){var L=T[E];if(L.state!=="loaded"&&L.state!=="errored")return!1}}return!0},l.prototype.addSourceType=function(g,x,T){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,x,T)},l.prototype.removeSource=function(g){return this.style.removeSource(g),this._update(!0)},l.prototype.getSource=function(g){return this.style.getSource(g)},l.prototype.addImage=function(g,x,T){T===void 0&&(T={});var E=T.pixelRatio;E===void 0&&(E=1);var L=T.sdf;L===void 0&&(L=!1);var O=T.stretchX,j=T.stretchY,V=T.content;if(this._lazyInitEmptyStyle(),x instanceof Od||bu&&x instanceof bu){var H=u.browser.getImageData(x);this.style.addImage(g,{data:new u.RGBAImage({width:H.width,height:H.height},H.data),pixelRatio:E,stretchX:O,stretchY:j,content:V,sdf:L,version:0})}else{if(x.width===void 0||x.height===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var K=x;this.style.addImage(g,{data:new u.RGBAImage({width:x.width,height:x.height},new Uint8Array(x.data)),pixelRatio:E,stretchX:O,stretchY:j,content:V,sdf:L,version:0,userImage:K}),K.onAdd&&K.onAdd(this,g)}},l.prototype.updateImage=function(g,x){var T=this.style.getImage(g);if(!T)return this.fire(new u.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=x instanceof Od||bu&&x instanceof bu?u.browser.getImageData(x):x,L=E.width,O=E.height,j=E.data;return L===void 0||O===void 0?this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):L!==T.data.width||O!==T.data.height?this.fire(new u.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(T.data.replace(j,!(x instanceof Od||bu&&x instanceof bu)),void this.style.updateImage(g,T))},l.prototype.hasImage=function(g){return g?!!this.style.getImage(g):(this.fire(new u.ErrorEvent(new Error("Missing required image id"))),!1)},l.prototype.removeImage=function(g){this.style.removeImage(g)},l.prototype.loadImage=function(g,x){u.getImage(this._requestManager.transformRequest(g,u.ResourceType.Image),x)},l.prototype.listImages=function(){return this.style.listImages()},l.prototype.addLayer=function(g,x){return this._lazyInitEmptyStyle(),this.style.addLayer(g,x),this._update(!0)},l.prototype.moveLayer=function(g,x){return this.style.moveLayer(g,x),this._update(!0)},l.prototype.removeLayer=function(g){return this.style.removeLayer(g),this._update(!0)},l.prototype.getLayer=function(g){return this.style.getLayer(g)},l.prototype.setLayerZoomRange=function(g,x,T){return this.style.setLayerZoomRange(g,x,T),this._update(!0)},l.prototype.setFilter=function(g,x,T){return T===void 0&&(T={}),this.style.setFilter(g,x,T),this._update(!0)},l.prototype.getFilter=function(g){return this.style.getFilter(g)},l.prototype.setPaintProperty=function(g,x,T,E){return E===void 0&&(E={}),this.style.setPaintProperty(g,x,T,E),this._update(!0)},l.prototype.getPaintProperty=function(g,x){return this.style.getPaintProperty(g,x)},l.prototype.setLayoutProperty=function(g,x,T,E){return E===void 0&&(E={}),this.style.setLayoutProperty(g,x,T,E),this._update(!0)},l.prototype.getLayoutProperty=function(g,x){return this.style.getLayoutProperty(g,x)},l.prototype.setLight=function(g,x){return x===void 0&&(x={}),this._lazyInitEmptyStyle(),this.style.setLight(g,x),this._update(!0)},l.prototype.getLight=function(){return this.style.getLight()},l.prototype.setFeatureState=function(g,x){return this.style.setFeatureState(g,x),this._update()},l.prototype.removeFeatureState=function(g,x){return this.style.removeFeatureState(g,x),this._update()},l.prototype.getFeatureState=function(g){return this.style.getFeatureState(g)},l.prototype.getContainer=function(){return this._container},l.prototype.getCanvasContainer=function(){return this._canvasContainer},l.prototype.getCanvas=function(){return this._canvas},l.prototype._containerDimensions=function(){var g=0,x=0;return this._container&&(g=this._container.clientWidth||400,x=this._container.clientHeight||300),[g,x]},l.prototype._detectMissingCSS=function(){u.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&u.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},l.prototype._setupContainer=function(){var g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=k.create("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();var x=this._canvasContainer=k.create("div","mapboxgl-canvas-container",g);this._interactive&&x.classList.add("mapboxgl-interactive"),this._canvas=k.create("canvas","mapboxgl-canvas",x),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var T=this._containerDimensions();this._resizeCanvas(T[0],T[1]);var E=this._controlContainer=k.create("div","mapboxgl-control-container",g),L=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(O){L[O]=k.create("div","mapboxgl-ctrl-"+O,E)})},l.prototype._resizeCanvas=function(g,x){var T=u.browser.devicePixelRatio||1;this._canvas.width=T*g,this._canvas.height=T*x,this._canvas.style.width=g+"px",this._canvas.style.height=x+"px"},l.prototype._setupPainter=function(){var g=u.extend({},A.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),x=this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);x?(this.painter=new Yr(x,this.transform),u.webpSupported.testSupport(x)):this.fire(new u.ErrorEvent(new Error("Failed to initialize WebGL")))},l.prototype._contextLost=function(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.Event("webglcontextlost",{originalEvent:g}))},l.prototype._contextRestored=function(g){this._setupPainter(),this.resize(),this._update(),this.fire(new u.Event("webglcontextrestored",{originalEvent:g}))},l.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},l.prototype._update=function(g){return this.style&&(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint()),this},l.prototype._requestRenderFrame=function(g){return this._update(),this._renderTaskQueue.add(g)},l.prototype._cancelRenderFrame=function(g){this._renderTaskQueue.remove(g)},l.prototype._render=function(g){var x,T=this,E=0,L=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(x=L.createQueryEXT(),L.beginQueryEXT(L.TIME_ELAPSED_EXT,x),E=u.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),!this._removed){var O=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var j=this.transform.zoom,V=u.browser.now();this.style.zoomHistory.update(j,V);var H=new u.EvaluationParameters(j,{now:V,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),K=H.crossFadingFactor();K===1&&K===this._crossFadingFactor||(O=!0,this._crossFadingFactor=K),this.style.update(H)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new u.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new u.Event("load"))),this.style&&(this.style.hasTransitions()||O)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Q=u.browser.now()-E;L.endQueryEXT(L.TIME_ELAPSED_EXT,x),setTimeout(function(){var ue=L.getQueryObjectEXT(x,L.QUERY_RESULT_EXT)/1e6;L.deleteQueryEXT(x),T.fire(new u.Event("gpu-timing-frame",{cpuTime:Q,gpuTime:ue}))},50)}if(this.listens("gpu-timing-layer")){var ee=this.painter.collectGpuTimers();setTimeout(function(){var ue=T.painter.queryGpuTimers(ee);T.fire(new u.Event("gpu-timing-layer",{layerTimes:ue}))},50)}var re=this._sourcesDirty||this._styleDirty||this._placementDirty;return re||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.Event("idle")),!this._loaded||this._fullyLoaded||re||(this._fullyLoaded=!0),this}},l.prototype.remove=function(){this._hash&&this._hash.remove();for(var g=0,x=this._controls;g<x.length;g+=1)x[g].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),u.window!==void 0&&(u.window.removeEventListener("resize",this._onWindowResize,!1),u.window.removeEventListener("online",this._onWindowOnline,!1));var T=this.painter.context.gl.getExtension("WEBGL_lose_context");T&&T.loseContext(),Bd(this._canvasContainer),Bd(this._controlContainer),Bd(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new u.Event("remove"))},l.prototype.triggerRepaint=function(){var g=this;this.style&&!this._frame&&(this._frame=u.browser.frame(function(x){g._frame=null,g._render(x)}))},l.prototype._onWindowOnline=function(){this._update()},l.prototype._onWindowResize=function(g){this._trackResize&&this.resize({originalEvent:g})._update()},f.showTileBoundaries.get=function(){return!!this._showTileBoundaries},f.showTileBoundaries.set=function(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())},f.showPadding.get=function(){return!!this._showPadding},f.showPadding.set=function(g){this._showPadding!==g&&(this._showPadding=g,this._update())},f.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},f.showCollisionBoxes.set=function(g){this._showCollisionBoxes!==g&&((this._showCollisionBoxes=g)?this.style._generateCollisionBoxes():this._update())},f.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},f.showOverdrawInspector.set=function(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())},f.repaint.get=function(){return!!this._repaint},f.repaint.set=function(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())},f.vertices.get=function(){return!!this._vertices},f.vertices.set=function(g){this._vertices=g,this._update()},l.prototype._setCacheLimits=function(g,x){u.setCacheLimits(g,x)},f.version.get=function(){return u.version},Object.defineProperties(l.prototype,f),l}(zd);function Bd(r){r.parentNode&&r.parentNode.removeChild(r)}function ls(r){var l=this;this.options=u.extend({},mh,r),this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(f){return f.preventDefault()}),this.options.showZoom&&(u.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(f){return l._map.zoomIn({},{originalEvent:f})}),k.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(f){return l._map.zoomOut({},{originalEvent:f})}),k.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(u.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(f){l.options.visualizePitch?l._map.resetNorthPitch({},{originalEvent:f}):l._map.resetNorth({},{originalEvent:f})}),this._compassIcon=k.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}var mh={showCompass:!0,showZoom:!0,visualizePitch:!1};ls.prototype._updateZoomButtons=function(){var r=this._map.getZoom();this._zoomInButton.disabled=r===this._map.getMaxZoom(),this._zoomOutButton.disabled=r===this._map.getMinZoom()},ls.prototype._rotateCompassArrow=function(){var r=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=r},ls.prototype.onAdd=function(r){return this._map=r,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jo(this._map,this._compass,this.options.visualizePitch)),this._container},ls.prototype.onRemove=function(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ls.prototype._createButton=function(r,l){var f=k.create("button",r,this._container);return f.type="button",f.addEventListener("click",l),f},ls.prototype._setButtonTitle=function(r,l){var f=this._map._getUIString("NavigationControl."+l);r.title=f,r.setAttribute("aria-label",f)};var jo=function(r,l,f){f===void 0&&(f=!1),this._clickTolerance=10,this.element=l,this.mouseRotate=new gu({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,f&&(this.mousePitch=new ch({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),u.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),k.addEventListener(l,"mousedown",this.mousedown),k.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(l,"touchmove",this.touchmove),k.addEventListener(l,"touchend",this.touchend),k.addEventListener(l,"touchcancel",this.reset)};function Cu(r,l,f){if(r=new u.LngLat(r.lng,r.lat),l){var g=new u.LngLat(r.lng-360,r.lat),x=new u.LngLat(r.lng+360,r.lat),T=f.locationPoint(r).distSqr(l);f.locationPoint(g).distSqr(l)<T?r=g:f.locationPoint(x).distSqr(l)<T&&(r=x)}for(;180<Math.abs(r.lng-f.center.lng);){var E=f.locationPoint(r);if(0<=E.x&&0<=E.y&&E.x<=f.width&&E.y<=f.height)break;r.lng>f.center.lng?r.lng-=360:r.lng+=360}return r}jo.prototype.down=function(r,l){this.mouseRotate.mousedown(r,l),this.mousePitch&&this.mousePitch.mousedown(r,l),k.disableDrag()},jo.prototype.move=function(r,l){var f=this.map,g=this.mouseRotate.mousemoveWindow(r,l);if(g&&g.bearingDelta&&f.setBearing(f.getBearing()+g.bearingDelta),this.mousePitch){var x=this.mousePitch.mousemoveWindow(r,l);x&&x.pitchDelta&&f.setPitch(f.getPitch()+x.pitchDelta)}},jo.prototype.off=function(){var r=this.element;k.removeEventListener(r,"mousedown",this.mousedown),k.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(r,"touchmove",this.touchmove),k.removeEventListener(r,"touchend",this.touchend),k.removeEventListener(r,"touchcancel",this.reset),this.offTemp()},jo.prototype.offTemp=function(){k.enableDrag(),k.removeEventListener(u.window,"mousemove",this.mousemove),k.removeEventListener(u.window,"mouseup",this.mouseup)},jo.prototype.mousedown=function(r){this.down(u.extend({},r,{ctrlKey:!0,preventDefault:function(){return r.preventDefault()}}),k.mousePos(this.element,r)),k.addEventListener(u.window,"mousemove",this.mousemove),k.addEventListener(u.window,"mouseup",this.mouseup)},jo.prototype.mousemove=function(r){this.move(r,k.mousePos(this.element,r))},jo.prototype.mouseup=function(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()},jo.prototype.touchstart=function(r){r.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return r.preventDefault()}},this._startPos))},jo.prototype.touchmove=function(r){r.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,r.targetTouches)[0],this.move({preventDefault:function(){return r.preventDefault()}},this._lastPos))},jo.prototype.touchend=function(r){r.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},jo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Fd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Fc(r,l,f){var g=r.classList;for(var x in Fd)g.remove("mapboxgl-"+f+"-anchor-"+x);g.add("mapboxgl-"+f+"-anchor-"+l)}function Su(r){this.options=u.extend({},hx,r),u.bindAll(["_onMove","setUnit"],this)}var Tu,bn,gh,jd=((gh=u.Evented)&&(Kr.__proto__=gh),((Kr.prototype=Object.create(gh&&gh.prototype)).constructor=Kr).prototype.addTo=function(r){return this.remove(),(this._map=r).getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Kr.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this},Kr.prototype.getLngLat=function(){return this._lngLat},Kr.prototype.setLngLat=function(r){return this._lngLat=u.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Kr.prototype.getElement=function(){return this._element},Kr.prototype.setPopup=function(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){var l=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[l,-1*(24.6+l)],"bottom-right":[-l,-1*(24.6+l)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Kr.prototype._onKeyPress=function(r){var l=r.code,f=r.charCode||r.keyCode;l!=="Space"&&l!=="Enter"&&f!==32&&f!==13||this.togglePopup()},Kr.prototype._onMapClick=function(r){var l=r.originalEvent.target,f=this._element;this._popup&&(l===f||f.contains(l))&&this.togglePopup()},Kr.prototype.getPopup=function(){return this._popup},Kr.prototype.togglePopup=function(){var r=this._popup;return r&&(r.isOpen()?r.remove():r.addTo(this._map)),this},Kr.prototype._update=function(r){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Cu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var l="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?l="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(l="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var f="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?f="rotateX(0deg)":this._pitchAlignment==="map"&&(f="rotateX("+this._map.getPitch()+"deg)"),r&&r.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,Fd[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+f+" "+l)}},Kr.prototype.getOffset=function(){return this._offset},Kr.prototype.setOffset=function(r){return this._offset=u.Point.convert(r),this._update(),this},Kr.prototype._onMove=function(r){this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.Event("dragstart"))),this.fire(new u.Event("drag"))},Kr.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.Event("dragend")),this._state="inactive"},Kr.prototype._addDragHandler=function(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Kr.prototype.setDraggable=function(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Kr.prototype.isDraggable=function(){return this._draggable},Kr.prototype.setRotation=function(r){return this._rotation=r||0,this._update(),this},Kr.prototype.getRotation=function(){return this._rotation},Kr.prototype.setRotationAlignment=function(r){return this._rotationAlignment=r||"auto",this._update(),this},Kr.prototype.getRotationAlignment=function(){return this._rotationAlignment},Kr.prototype.setPitchAlignment=function(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this},Kr.prototype.getPitchAlignment=function(){return this._pitchAlignment},Kr),Ud={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Vd=0,qd=!1,yh=((bn=u.Evented)&&(Pn.__proto__=bn),((Pn.prototype=Object.create(bn&&bn.prototype)).constructor=Pn).prototype.onAdd=function(r){var l;return this._map=r,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),l=this._setupUI,Tu!==void 0?l(Tu):u.window.navigator.permissions!==void 0?u.window.navigator.permissions.query({name:"geolocation"}).then(function(f){l(Tu=f.state!=="denied")}):l(Tu=!!u.window.navigator.geolocation),this._container},Pn.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(u.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Vd=0,qd=!1},Pn.prototype._isOutOfMapMaxBounds=function(r){var l=this._map.getMaxBounds(),f=r.coords;return l&&(f.longitude<l.getWest()||f.longitude>l.getEast()||f.latitude<l.getSouth()||f.latitude>l.getNorth())},Pn.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Pn.prototype._onSuccess=function(r){if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.Event("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new u.Event("geolocate",r)),this._finish()}},Pn.prototype._updateCamera=function(r){var l=new u.LngLat(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,g=this._map.getBearing(),x=u.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(f),x,{geolocateSource:!0})},Pn.prototype._updateMarker=function(r){if(r){var l=new u.LngLat(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Pn.prototype._updateCircleRadius=function(){var r=this._map._container.clientHeight/2,l=this._map.unproject([0,r]),f=this._map.unproject([1,r]),g=l.distanceTo(f),x=Math.ceil(2*this._accuracy/g);this._circleElement.style.width=x+"px",this._circleElement.style.height=x+"px"},Pn.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Pn.prototype._onError=function(r){if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&qd)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new u.Event("error",r)),this._finish()}},Pn.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Pn.prototype._setupUI=function(r){var l=this;if(this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this._geolocateButton=k.create("button","mapboxgl-ctrl-geolocate",this._container),k.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),!(this._geolocateButton.type="button")===r){u.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{var g=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new jd(this._dotElement),this._circleElement=k.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(x){x.geolocateSource||l._watchState!=="ACTIVE_LOCK"||x.originalEvent&&x.originalEvent.type==="resize"||(l._watchState="BACKGROUND",l._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),l._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),l.fire(new u.Event("trackuserlocationend")))})},Pn.prototype.trigger=function(){if(!this._setup)return u.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vd--,qd=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new u.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var r;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),qd=1<++Vd?(r={maximumAge:6e5,timeout:0},!0):(r=this.options.positionOptions,!1),this._geolocationWatchID=u.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,r)}}else u.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Pn.prototype._clearWatch=function(){u.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Pn),hx={maxWidth:100,unit:"metric"};function Pn(r){bn.call(this),this.options=u.extend({},Ud,r),u.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}function Kr(r,l){var f=this;if(gh.call(this),(r instanceof u.window.HTMLElement||l)&&(r=u.extend({element:r},l)),u.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=u.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");var g=k.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","41px"),g.setAttributeNS(null,"width","27px"),g.setAttributeNS(null,"viewBox","0 0 27 41");var x=k.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");var T=k.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");var E=k.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");for(var L=0,O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];L<O.length;L+=1){var j=O[L],V=k.createNS("http://www.w3.org/2000/svg","ellipse");V.setAttributeNS(null,"opacity","0.04"),V.setAttributeNS(null,"cx","10.5"),V.setAttributeNS(null,"cy","5.80029008"),V.setAttributeNS(null,"rx",j.rx),V.setAttributeNS(null,"ry",j.ry),E.appendChild(V)}var H=k.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);var K=k.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(K);var Q=k.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"fill","#000000");var ee=k.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Q.appendChild(ee);var re=k.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),re.setAttributeNS(null,"fill","#FFFFFF");var ue=k.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ae=k.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");var ye=k.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),ue.appendChild(ae),ue.appendChild(ye),T.appendChild(E),T.appendChild(H),T.appendChild(Q),T.appendChild(re),T.appendChild(ue),g.appendChild(T),g.setAttributeNS(null,"height",41*this._scale+"px"),g.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(g),this._offset=u.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(he){he.preventDefault()}),this._element.addEventListener("mousedown",function(he){he.preventDefault()}),this._element.addEventListener("focus",function(){var he=f._map.getContainer();he.scrollTop=0,he.scrollLeft=0}),Fc(this._element,this._anchor,"marker"),this._popup=null}function ig(r,l,f){var g=f&&f.maxWidth||100,x=r._container.clientHeight/2,T=r.unproject([0,x]),E=r.unproject([g,x]),L=T.distanceTo(E);if(f&&f.unit==="imperial"){var O=3.2808*L;5280<O?Tl(l,g,O/5280,r._getUIString("ScaleControl.Miles")):Tl(l,g,O,r._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?Tl(l,g,L/1852,r._getUIString("ScaleControl.NauticalMiles")):1e3<=L?Tl(l,g,L/1e3,r._getUIString("ScaleControl.Kilometers")):Tl(l,g,L,r._getUIString("ScaleControl.Meters"))}function Tl(r,l,f,g){var x,T,E,L,O,j=(x=f,(T=Math.pow(10,(""+Math.floor(x)).length-1))*(E=10<=(E=x/T)?10:5<=E?5:3<=E?3:2<=E?2:1<=E?1:(L=E,O=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10)),Math.round(L*O)/O)));r.style.width=l*(j/f)+"px",r.innerHTML=j+"&nbsp;"+g}function Wi(r){this._fullscreen=!1,r&&r.container&&(r.container instanceof u.window.HTMLElement?this._container=r.container:u.warnOnce("Full screen control 'container' must be a DOM element.")),u.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in u.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in u.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in u.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in u.window.document&&(this._fullscreenchange="MSFullscreenChange")}Su.prototype.getDefaultPosition=function(){return"bottom-left"},Su.prototype._onMove=function(){ig(this._map,this._container,this.options)},Su.prototype.onAdd=function(r){return this._map=r,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",r.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Su.prototype.onRemove=function(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Su.prototype.setUnit=function(r){this.options.unit=r,ig(this._map,this._container,this.options)},Wi.prototype.onAdd=function(r){return this._map=r,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",u.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Wi.prototype.onRemove=function(){k.remove(this._controlContainer),this._map=null,u.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Wi.prototype._checkFullscreenSupport=function(){return!!(u.window.document.fullscreenEnabled||u.window.document.mozFullScreenEnabled||u.window.document.msFullscreenEnabled||u.window.document.webkitFullscreenEnabled)},Wi.prototype._setupUI=function(){var r=this._fullscreenButton=k.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);k.create("span","mapboxgl-ctrl-icon",r).setAttribute("aria-hidden",!0),r.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),u.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Wi.prototype._updateTitle=function(){var r=this._getTitle();this._fullscreenButton.setAttribute("aria-label",r),this._fullscreenButton.title=r},Wi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Wi.prototype._isFullscreen=function(){return this._fullscreen},Wi.prototype._changeIcon=function(){(u.window.document.fullscreenElement||u.window.document.mozFullScreenElement||u.window.document.webkitFullscreenElement||u.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Wi.prototype._onClickFullscreen=function(){this._isFullscreen()?u.window.document.exitFullscreen?u.window.document.exitFullscreen():u.window.document.mozCancelFullScreen?u.window.document.mozCancelFullScreen():u.window.document.msExitFullscreen?u.window.document.msExitFullscreen():u.window.document.webkitCancelFullScreen&&u.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var El,Zd={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Gd=((El=u.Evented)&&($r.__proto__=El),(($r.prototype=Object.create(El&&El.prototype)).constructor=$r).prototype.addTo=function(r){return this._map&&this.remove(),this._map=r,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new u.Event("open")),this},$r.prototype.isOpen=function(){return!!this._map},$r.prototype.remove=function(){return this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.Event("close")),this},$r.prototype.getLngLat=function(){return this._lngLat},$r.prototype.setLngLat=function(r){return this._lngLat=u.LngLat.convert(r),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},$r.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},$r.prototype.getElement=function(){return this._container},$r.prototype.setText=function(r){return this.setDOMContent(u.window.document.createTextNode(r))},$r.prototype.setHTML=function(r){var l,f=u.window.document.createDocumentFragment(),g=u.window.document.createElement("body");for(g.innerHTML=r;l=g.firstChild;)f.appendChild(l);return this.setDOMContent(f)},$r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},$r.prototype.setMaxWidth=function(r){return this.options.maxWidth=r,this._update(),this},$r.prototype.setDOMContent=function(r){return this._createContent(),this._content.appendChild(r),this._update(),this},$r.prototype.addClassName=function(r){this._container&&this._container.classList.add(r)},$r.prototype.removeClassName=function(r){this._container&&this._container.classList.remove(r)},$r.prototype.toggleClassName=function(r){if(this._container)return this._container.classList.toggle(r)},$r.prototype._createContent=function(){this._content&&k.remove(this._content),this._content=k.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=k.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},$r.prototype._onMouseUp=function(r){this._update(r.point)},$r.prototype._onMouseMove=function(r){this._update(r.point)},$r.prototype._onDrag=function(r){this._update(r.point)},$r.prototype._update=function(r){var l=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=k.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=k.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(j){return l._container.classList.add(j)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Cu(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||r)){var f=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat),g=this.options.anchor,x=function j(V){if(V){if(typeof V=="number"){var H=Math.round(Math.sqrt(.5*Math.pow(V,2)));return{center:new u.Point(0,0),top:new u.Point(0,V),"top-left":new u.Point(H,H),"top-right":new u.Point(-H,H),bottom:new u.Point(0,-V),"bottom-left":new u.Point(H,-H),"bottom-right":new u.Point(-H,-H),left:new u.Point(V,0),right:new u.Point(-V,0)}}if(V instanceof u.Point||Array.isArray(V)){var K=u.Point.convert(V);return{center:K,top:K,"top-left":K,"top-right":K,bottom:K,"bottom-left":K,"bottom-right":K,left:K,right:K}}return{center:u.Point.convert(V.center||[0,0]),top:u.Point.convert(V.top||[0,0]),"top-left":u.Point.convert(V["top-left"]||[0,0]),"top-right":u.Point.convert(V["top-right"]||[0,0]),bottom:u.Point.convert(V.bottom||[0,0]),"bottom-left":u.Point.convert(V["bottom-left"]||[0,0]),"bottom-right":u.Point.convert(V["bottom-right"]||[0,0]),left:u.Point.convert(V.left||[0,0]),right:u.Point.convert(V.right||[0,0])}}return j(new u.Point(0,0))}(this.options.offset);if(!g){var T,E=this._container.offsetWidth,L=this._container.offsetHeight;T=f.y+x.bottom.y<L?["top"]:f.y>this._map.transform.height-L?["bottom"]:[],f.x<E/2?T.push("left"):f.x>this._map.transform.width-E/2&&T.push("right"),g=T.length===0?"bottom":T.join("-")}var O=f.add(x[g]).round();k.setTransform(this._container,Fd[g]+" translate("+O.x+"px,"+O.y+"px)"),Fc(this._container,g,"popup")}},$r.prototype._onClose=function(){this.remove()},$r),vh={version:u.version,supported:A,setRTLTextPlugin:u.setRTLTextPlugin,getRTLTextPluginStatus:u.getRTLTextPluginStatus,Map:fh,NavigationControl:ls,GeolocateControl:yh,AttributionControl:Fo,ScaleControl:Su,FullscreenControl:Wi,Popup:Gd,Marker:jd,Style:lu,LngLat:u.LngLat,LngLatBounds:u.LngLatBounds,Point:u.Point,MercatorCoordinate:u.MercatorCoordinate,Evented:u.Evented,config:u.config,prewarm:function(){Ms().acquire(Ka)},clearPrewarmedResources:function(){var r=$a;r&&(r.isPreloaded()&&r.numActive()===1?(r.release(Ka),$a=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return u.config.ACCESS_TOKEN},set accessToken(r){u.config.ACCESS_TOKEN=r},get baseApiUrl(){return u.config.API_URL},set baseApiUrl(r){u.config.API_URL=r},get workerCount(){return Zi.workerCount},set workerCount(r){Zi.workerCount=r},get maxParallelImageRequests(){return u.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(r){u.config.MAX_PARALLEL_IMAGE_REQUESTS=r},clearStorage:function(r){u.clearTileCache(r)},workerUrl:""};function $r(r){El.call(this),this.options=u.extend(Object.create(Zd),r),u.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return vh}),b)}),z=(I.Map,I.setRTLTextPlugin),Z=(I.supported,I.Marker),X="atlas.microsoft.com",oe="atlas.microsoft.com",_e="styles/definitions/2019-10-16.json",Se="e96cb745-c6f5-409c-a775-c4313e468c1d",Ne="https://login.microsoftonline.com/",$e="Authorization",We="Bearer ",Ze="{azMapsDomain}",ct="Map-Agent",Oe="x-ms-client-id",Be="Ms-Am-Request-Origin",Xe="MapControl",Et="https://atlas.microsoft.com/",Ht="Session-Id",Xt=function(t,n){return(Xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,h){a.__proto__=h}||function(a,h){for(var y in h)h.hasOwnProperty(y)&&(a[y]=h[y])})(t,n)};function ze(t,n){function a(){this.constructor=t}Xt(t,n),t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var ot=function(){return(ot=Object.assign||function(t){for(var n,a=1,h=arguments.length;a<h;a++)for(var y in n=arguments[a])Object.prototype.hasOwnProperty.call(n,y)&&(t[y]=n[y]);return t}).apply(this,arguments)};function Zr(t,n,a,h){return new(a=a||Promise)(function(y,b){function u(G){try{k(h.next(G))}catch(W){b(W)}}function A(G){try{k(h.throw(G))}catch(W){b(W)}}function k(G){G.done?y(G.value):new a(function(W){W(G.value)}).then(u,A)}k((h=h.apply(t,n||[])).next())})}function yr(t,n){var a,h,y,b,u={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(k){return function(G){return function(W){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,h&&(y=2&W[0]?h.return:W[0]?h.throw||((y=h.return)&&y.call(h),0):h.next)&&!(y=y.call(h,W[1])).done)return y;switch(h=0,y&&(W=[2&W[0],y.value]),W[0]){case 0:case 1:y=W;break;case 4:return u.label++,{value:W[1],done:!1};case 5:u.label++,h=W[1],W=[0];continue;case 7:W=u.ops.pop(),u.trys.pop();continue;default:if(!(y=0<(y=u.trys).length&&y[y.length-1])&&(W[0]===6||W[0]===2)){u=0;continue}if(W[0]===3&&(!y||W[1]>y[0]&&W[1]<y[3])){u.label=W[1];break}if(W[0]===6&&u.label<y[1]){u.label=y[1],y=W;break}if(y&&u.label<y[2]){u.label=y[2],u.ops.push(W);break}y[2]&&u.ops.pop(),u.trys.pop();continue}W=n.call(t,u)}catch(se){W=[6,se],h=0}finally{a=y=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([k,G])}}}var sr=(_s.prototype.merge=function(){for(var t,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];for(var h=0,y=n;h<y.length;h++){var b=y[h];if(b)for(var u in b)b.hasOwnProperty(u)&&this.hasOwnProperty(u)&&(b[u]!==void 0&&b[u]!=null?this[u]instanceof _s?this[u].merge(b[u]):this[u]=b[u]:(t=t||new(Object.getPrototypeOf(this)).constructor,this[u]=t[u]))}return this},_s);function _s(){}var ms,Lf=(ze(Go,ms=sr),Go);function Go(){var t=ms!==null&&ms.apply(this,arguments)||this;return t.domain=void 0,t.headers={},t.path="",t.protocol="https",t.queryParams={},t.subdomain="",t}var gi=(Ra.prototype.get=function(){return fetch(this.toString(),{method:"GET",mode:"cors",headers:new Headers(this.options.headers)}).then(function(t){if(t.ok)return t.json();throw new Error("HTTP "+t.status+": "+t.statusText)})},Ra.prototype.toString=function(){var t=Object.entries(this.options.queryParams).map(function(h){return h[0]+"="+h[1]}).join("&"),n=[],a=this.options.path||"";return Ra.protoRegEx.test(a)?n.push(a):(this.options.domain&&(Ra.protoRegEx.test(this.options.domain)||(n.push(this.options.protocol+"://"),n.push(this.options.subdomain?this.options.subdomain+".":"")),n.push(this.options.domain)),n.push(this.options.path?"/"+a:"")),n.push(t?"?"+t:""),n.join("")},Ra.protoRegEx=new RegExp(/^(file|http|https|blob:http|blob:https):\/\//i),Ra);function Ra(t){this.options=new Lf().merge(t)}var ar,Vr="2.0.32",Tn=(Ai.getFullVersion=function(){return Vr},Ai.getEndpointVersion=function(){var t=Vr.indexOf(".");return(t=Vr.indexOf(".",t+1))===-1?Vr:Vr.substring(0,t)},Ai);function Ai(){}(ar=d.ControlPosition||(d.ControlPosition={})).TopLeft="top-left",ar.TopRight="top-right",ar.BottomLeft="bottom-left",ar.BottomRight="bottom-right",ar.NonFixed="non-fixed";var ga,Uf=(ze(cp,ga=sr),cp);function cp(){var t=ga!==null&&ga.apply(this,arguments)||this;return t.position=d.ControlPosition.NonFixed,t}var Eo,gs=(ko.prototype.getLuminosity=function(){for(var t=[this.r,this.g,this.b],n=[],a=0;a<t.length;a++){var h=t[a]/255;n[a]=h<=.03928?h/12.92:Math.pow((.055+h)/1.055,2.4)}return .2126*n[0]+.7152*n[1]+.0722*n[2]},ko.prototype.getRBGA=function(t){var n=document.createElement("canvas").getContext("2d");n.globalAlpha=1,n.fillStyle=t,n.fillRect(0,0,1,1);var a=n.getImageData(0,0,1,1).data;return[a[0],a[1],a[2],a[3]]},ko);function ko(t){if(t){var n=void 0;3<=(n=typeof t=="string"?this.getRBGA(t):t).length&&(this.r=n[0],this.g=n[1],this.b=n[2],3<n.length&&(this.a=n[3]))}}(Eo=d.ControlStyle||(d.ControlStyle={})).light="light",Eo.dark="dark",Eo.auto="auto";var ys=(Vf.prototype.onRemove=function(){this._container&&(this._container.remove(),delete this._container),this._map&&(this._map.events.remove("styledata",this._onStyleChange),delete this._map),this._observer&&(this._observer.disconnect(),delete this._observer),delete this._theme},Vf.prototype.buildContainer=function(t,n,a,h){var y=this;return this._map=t,this._container=document.createElement(h||"div"),this._container.classList.add("azure-maps-control-container"),typeof a=="string"&&this._container.setAttribute("aria-label",a),n.toLowerCase()===d.ControlStyle.auto?this._map.styles.initialize().then(function(){y._onStyleChange(),y._map.events.add("styledata",y._onStyleChange)}):this._container.classList.add(n),this._container},Vf.prototype._setTheme=function(t){this._theme!==t&&(this._container.classList.remove(this._theme),this._container.classList.add(t),this._theme=t)},Vf.activateClickDelay=100,Vf);function Vf(){var t=this;this._onStyleChange=function(){if(t._map.getStyle().style.toLowerCase().startsWith("blank"))t._observer||(t._onBackgroundChange(),t._observer=new MutationObserver(t._onBackgroundChange),t._observer.observe(t._map.getMapContainer(),{attributes:!0,attributeFilter:["style"]}));else{t._observer&&(t._observer.disconnect(),delete t._observer);var n=t._map.styles.getTheme(t._map.getStyle());t._setTheme(n)}},this._onBackgroundChange=function(){var n=new gs(t._map.getMapContainer().style.backgroundColor).getLuminosity(),a=isNaN(n)||.5<n?d.ControlStyle.light:d.ControlStyle.dark;t._setTheme(a)}}var Wv,II=(ze(_w,Wv=sr),_w);function _w(){var t=Wv!==null&&Wv.apply(this,arguments)||this;return t.rotationDegreesDelta=15,t.style=d.ControlStyle.light,t}var xw,ww=(ze(Mo,xw=ys),Mo.prototype.onAdd=function(t,n){var a=this,h=this.buildContainer(t,this.options.style,"Rotation Control"),y=this.constructRotationButton(t),b=this.constructRotationGrid(t,n);return h.addEventListener("mouseover",function(u){a.lastActiveTime=a.lastActiveTime||u.timeStamp,a.hasMouse=!0,h.classList.add("in-use"),b.classList.remove("hidden-accessible-element")}),h.addEventListener("focusin",function(u){a.lastActiveTime=a.lastActiveTime||u.timeStamp,a.hasFocus=!0,h.classList.add("in-use"),b.classList.remove("hidden-accessible-element")}),h.addEventListener("mouseleave",function(){a.hasMouse=!1,a.hasFocus||(delete a.lastActiveTime,h.classList.remove("in-use"),b.classList.add("hidden-accessible-element"))}),h.addEventListener("focusout",function(u){u.relatedTarget instanceof Node&&h.contains(u.relatedTarget)||(a.hasFocus=!1,a.hasMouse||(delete a.lastActiveTime,h.classList.remove("in-use"),b.classList.add("hidden-accessible-element")))}),n&&Mo.InvertOrderPositions.includes(n.position)?(h.appendChild(b),h.appendChild(y)):(h.appendChild(y),h.appendChild(b)),h},Mo.prototype.constructRotationGrid=function(t,n){var a=document.createElement("div");a.classList.add("sub-container"),a.classList.add("hidden-accessible-element");var h=this.constructRightRotationButton(t),y=this.constructLeftRotationButton(t);return n&&Mo.InvertOrderPositions.includes(n.position)?(a.appendChild(h),a.appendChild(y)):(a.appendChild(y),a.appendChild(h)),a},Mo.prototype.constructRotationButton=function(t){var n=this,a=document.createElement("button");a.classList.add("azure-maps-control-button"),a.classList.add("rotation"),a.setAttribute("title","Reset to Default Rotation"),a.setAttribute("alt","Reset to Default Rotation"),a.setAttribute("type","button");var h=document.createElement("div");return a.appendChild(h),a.addEventListener("click",function(y){y.timeStamp-n.lastActiveTime>ys.activateClickDelay&&t.setCamera({bearing:Mo.DefaultRotation},!0)}),t.events.add("rotate",function(y){h.style.transform="rotate("+-y.map.getCamera().bearing+"deg)"}),a},Mo.prototype.constructRightRotationButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("rotation-right"),a.setAttribute("title","Rotate Right"),a.setAttribute("alt","Rotate Right"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({bearing:t.getCamera().bearing+n.options.rotationDegreesDelta,duration:Mo.RotationDuration,type:"ease"},!0)}),a},Mo.prototype.constructLeftRotationButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("rotation-left"),a.setAttribute("title","Rotate Left"),a.setAttribute("alt","Rotate Left"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({bearing:t.getCamera().bearing-n.options.rotationDegreesDelta,duration:Mo.RotationDuration,type:"ease"},!0)}),a},Mo.DefaultRotation=0,Mo.RotationDuration=100,Mo.InvertOrderPositions=[d.ControlPosition.BottomRight,d.ControlPosition.TopRight],Mo);function Mo(t){var n=xw.call(this)||this;return n.hasMouse=!1,n.hasFocus=!1,n.options=new II().merge(t),n}var Yv,kI=(ze(bw,Yv=sr),bw);function bw(){var t=Yv!==null&&Yv.apply(this,arguments)||this;return t.pitchDegreesDelta=10,t.style=d.ControlStyle.light,t}var Cw,MI=(ze(Ao,Cw=ys),Ao.prototype.onAdd=function(t,n){var a=this,h=this.buildContainer(t,this.options.style,"Pitch Control"),y=this.constructPitchButton(t),b=this.constructPitchGrid(t,n);return h.addEventListener("mouseover",function(u){a.lastActiveTime=a.lastActiveTime||u.timeStamp,a.hasMouse=!0,h.classList.add("in-use"),b.classList.remove("hidden-accessible-element")}),h.addEventListener("focusin",function(u){a.lastActiveTime=a.lastActiveTime||u.timeStamp,a.hasFocus=!0,h.classList.add("in-use"),b.classList.remove("hidden-accessible-element")}),h.addEventListener("mouseleave",function(){a.hasMouse=!1,a.hasFocus||(delete a.lastActiveTime,h.classList.remove("in-use"),b.classList.add("hidden-accessible-element"))}),h.addEventListener("focusout",function(u){u.relatedTarget instanceof Node&&h.contains(u.relatedTarget)||(a.hasFocus=!1,a.hasMouse||(delete a.lastActiveTime,h.classList.remove("in-use"),b.classList.add("hidden-accessible-element")))}),n&&Ao.INVERT_ORDER_POSITIONS.includes(n.position)?(h.appendChild(b),h.appendChild(y)):(h.appendChild(y),h.appendChild(b)),h},Ao.prototype.constructPitchGrid=function(t,n){var a=document.createElement("div");a.classList.add("sub-container"),a.classList.add("hidden-accessible-element");var h=this.constructPitchIncrementButton(t),y=this.constructPitchDecrementButton(t);return n&&Ao.INVERT_ORDER_POSITIONS.includes(n.position)?(a.appendChild(y),a.appendChild(h)):(a.appendChild(h),a.appendChild(y)),a},Ao.prototype.constructPitchButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("pitch"),a.setAttribute("title","Reset to Default Pitch"),a.setAttribute("alt","Reset to Default Pitch"),a.setAttribute("type","button"),a.addEventListener("click",function(){event.timeStamp-n.lastActiveTime>ys.activateClickDelay&&t.setCamera({pitch:Ao.DEFAULT_PITCH},!0)}),a},Ao.prototype.constructPitchDecrementButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("pitch-down"),a.setAttribute("title","Decrease Pitch"),a.setAttribute("alt","Decrease Pitch"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({pitch:t.getCamera().pitch-n.options.pitchDegreesDelta,duration:Ao.PITCH_DURATION_MS,type:"ease"},!0)}),a},Ao.prototype.constructPitchIncrementButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("pitch-up"),a.setAttribute("title","Increase Pitch"),a.setAttribute("alt","Increase Pitch"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({pitch:t.getCamera().pitch+n.options.pitchDegreesDelta,duration:Ao.PITCH_DURATION_MS,type:"ease"},!0)}),a},Ao.PITCH_DURATION_MS=100,Ao.DEFAULT_PITCH=0,Ao.INVERT_ORDER_POSITIONS=[d.ControlPosition.BottomRight,d.ControlPosition.TopRight],Ao);function Ao(t){var n=Cw.call(this)||this;return n.hasMouse=!1,n.hasFocus=!1,n.options=new kI().merge(t),n}function AI(){this.__data__=[],this.size=0}var qf=function(t,n){return t===n||t!=t&&n!=n},ny=function(t,n){for(var a=t.length;a--;)if(qf(t[a][0],n))return a;return-1},LI=Array.prototype.splice;function PI(t){var n=this.__data__,a=ny(n,t);return!(a<0)&&(a==n.length-1?n.pop():LI.call(n,a,1),--this.size,!0)}function DI(t){var n=this.__data__,a=ny(n,t);return a<0?void 0:n[a][1]}function zI(t){return-1<ny(this.__data__,t)}function NI(t,n){var a=this.__data__,h=ny(a,t);return h<0?(++this.size,a.push([t,n])):a[h][1]=n,this}function Kh(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var h=t[n];this.set(h[0],h[1])}}Kh.prototype.clear=AI,Kh.prototype.delete=PI,Kh.prototype.get=DI,Kh.prototype.has=zI,Kh.prototype.set=NI;var iy=Kh;function OI(){this.__data__=new iy,this.size=0}function RI(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}function BI(t){return this.__data__.get(t)}function FI(t){return this.__data__.has(t)}var Sw=typeof _=="object"&&_&&_.Object===Object&&_,nT=typeof self=="object"&&self&&self.Object===Object&&self,Pf=Sw||nT||Function("return this")(),Rl=Pf.Symbol,Zf=Object.prototype,iT=Zf.hasOwnProperty,jI=Zf.toString,Kv=Rl?Rl.toStringTag:void 0,$v=function(t){var n=iT.call(t,Kv),a=t[Kv];try{var h=!(t[Kv]=void 0)}catch{}var y=jI.call(t);return h&&(n?t[Kv]=a:delete t[Kv]),y},UI=Object.prototype.toString,VI=function(t){return UI.call(t)},oT=Rl?Rl.toStringTag:void 0,oy=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":(oT&&oT in Object(t)?$v:VI)(t)},pp=function(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")},Gf,Xv=function(t){if(!pp(t))return!1;var n=oy(t);return n=="[object Function]"||n=="[object GeneratorFunction]"||n=="[object AsyncFunction]"||n=="[object Proxy]"},Jv=Pf["__core-js_shared__"],Tw=(Gf=/[^.]+$/.exec(Jv&&Jv.keys&&Jv.keys.IE_PROTO||""))?"Symbol(src)_1."+Gf:"",qI=function(t){return!!Tw&&Tw in t},ZI=Function.prototype.toString,hp=function(t){if(t!=null){try{return ZI.call(t)}catch{}try{return t+""}catch{}}return""},GI=/^\[object .+?Constructor\]$/,HI=Function.prototype,WI=Object.prototype,YI=HI.toString,KI=WI.hasOwnProperty,$I=RegExp("^"+YI.call(KI).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),XI=function(t){return!(!pp(t)||qI(t))&&(Xv(t)?$I:GI).test(hp(t))},JI=function(t,n){return t==null?void 0:t[n]},dp=function(t,n){var a=JI(t,n);return XI(a)?a:void 0},Hf=dp(Pf,"Map"),Wf=dp(Object,"create");function QI(){this.__data__=Wf?Wf(null):{},this.size=0}function ek(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var tk=Object.prototype.hasOwnProperty;function rk(t){var n=this.__data__;if(Wf){var a=n[t];return a==="__lodash_hash_undefined__"?void 0:a}return tk.call(n,t)?n[t]:void 0}var nk=Object.prototype.hasOwnProperty;function ik(t){var n=this.__data__;return Wf?n[t]!==void 0:nk.call(n,t)}function ok(t,n){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Wf&&n===void 0?"__lodash_hash_undefined__":n,this}function $h(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var h=t[n];this.set(h[0],h[1])}}$h.prototype.clear=QI,$h.prototype.delete=ek,$h.prototype.get=rk,$h.prototype.has=ik,$h.prototype.set=ok;var Ew=$h,ak=function(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null},ay=function(t,n){var a=t.__data__;return ak(n)?a[typeof n=="string"?"string":"hash"]:a.map};function sk(t){var n=ay(this,t).delete(t);return this.size-=n?1:0,n}function lk(t){return ay(this,t).get(t)}function uk(t){return ay(this,t).has(t)}function ck(t,n){var a=ay(this,t),h=a.size;return a.set(t,n),this.size+=a.size==h?0:1,this}function Xh(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var h=t[n];this.set(h[0],h[1])}}Xh.prototype.clear=function(){this.size=0,this.__data__={hash:new Ew,map:new(Hf||iy),string:new Ew}},Xh.prototype.delete=sk,Xh.prototype.get=lk,Xh.prototype.has=uk,Xh.prototype.set=ck;var Iw=Xh;function pk(t,n){var a=this.__data__;if(a instanceof iy){var h=a.__data__;if(!Hf||h.length<199)return h.push([t,n]),this.size=++a.size,this;a=this.__data__=new Iw(h)}return a.set(t,n),this.size=a.size,this}function Jh(t){var n=this.__data__=new iy(t);this.size=n.size}Jh.prototype.clear=OI,Jh.prototype.delete=RI,Jh.prototype.get=BI,Jh.prototype.has=FI,Jh.prototype.set=pk;var Yf=Jh,hk=function(t,n){for(var a=-1,h=t==null?0:t.length;++a<h&&n(t[a],a,t)!==!1;);return t},sy=function(){try{var t=dp(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Qv=function(t,n,a){n=="__proto__"&&sy?sy(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a},dk=Object.prototype.hasOwnProperty,kw=function(t,n,a){var h=t[n];dk.call(t,n)&&qf(h,a)&&(a!==void 0||n in t)||Qv(t,n,a)},Kf=function(t,n,a,h){var y=!a;a=a||{};for(var b=-1,u=n.length;++b<u;){var A=n[b],k=h?h(a[A],t[A],A,a,t):void 0;k===void 0&&(k=t[A]),(y?Qv:kw)(a,A,k)}return a},fk=function(t,n){for(var a=-1,h=Array(t);++a<t;)h[a]=n(a);return h},$s=function(t){return t!=null&&typeof t=="object"},Mw=function(t){return $s(t)&&oy(t)=="[object Arguments]"},Aw=Object.prototype,mk=Aw.hasOwnProperty,gk=Aw.propertyIsEnumerable,e1=Mw(function(){return arguments}())?Mw:function(t){return $s(t)&&mk.call(t,"callee")&&!gk.call(t,"callee")},fp=Array.isArray;function yk(){return!1}var $f=C(function(t,n){var a=n&&!n.nodeType&&n,h=a&&t&&!t.nodeType&&t,y=h&&h.exports===a?Pf.Buffer:void 0,b=(y?y.isBuffer:void 0)||yk;t.exports=b}),vk=/^(?:0|[1-9]\d*)$/,Lw=function(t,n){var a=typeof t;return!!(n=n??9007199254740991)&&(a=="number"||a!="symbol"&&vk.test(t))&&-1<t&&t%1==0&&t<n},Pw=function(t){return typeof t=="number"&&-1<t&&t%1==0&&t<=9007199254740991},kn={};kn["[object Float32Array]"]=kn["[object Float64Array]"]=kn["[object Int8Array]"]=kn["[object Int16Array]"]=kn["[object Int32Array]"]=kn["[object Uint8Array]"]=kn["[object Uint8ClampedArray]"]=kn["[object Uint16Array]"]=kn["[object Uint32Array]"]=!0,kn["[object Arguments]"]=kn["[object Array]"]=kn["[object ArrayBuffer]"]=kn["[object Boolean]"]=kn["[object DataView]"]=kn["[object Date]"]=kn["[object Error]"]=kn["[object Function]"]=kn["[object Map]"]=kn["[object Number]"]=kn["[object Object]"]=kn["[object RegExp]"]=kn["[object Set]"]=kn["[object String]"]=kn["[object WeakMap]"]=!1;function _k(t){return $s(t)&&Pw(t.length)&&!!kn[oy(t)]}var t1=function(t){return function(n){return t(n)}},Qh=C(function(t,n){var a=n&&!n.nodeType&&n,h=a&&t&&!t.nodeType&&t,y=h&&h.exports===a&&Sw.process,b=function(){try{var u=h&&h.require&&h.require("util").types;return u||y&&y.binding&&y.binding("util")}catch{}}();t.exports=b}),Dw=Qh&&Qh.isTypedArray,r1=Dw?t1(Dw):_k,xk=Object.prototype.hasOwnProperty,zw=function(t,n){var a=fp(t),h=!a&&e1(t),y=!a&&!h&&$f(t),b=!a&&!h&&!y&&r1(t),u=a||h||y||b,A=u?fk(t.length,String):[],k=A.length;for(var G in t)!n&&!xk.call(t,G)||u&&(G=="length"||y&&(G=="offset"||G=="parent")||b&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||Lw(G,k))||A.push(G);return A},wk=Object.prototype,n1=function(t){var n=t&&t.constructor;return t===(typeof n=="function"&&n.prototype||wk)},Nw=function(t,n){return function(a){return t(n(a))}},bk=Nw(Object.keys,Object),Ck=Object.prototype.hasOwnProperty,Sk=function(t){if(!n1(t))return bk(t);var n=[];for(var a in Object(t))Ck.call(t,a)&&a!="constructor"&&n.push(a);return n},ly=function(t){return t!=null&&Pw(t.length)&&!Xv(t)},i1=function(t){return(ly(t)?zw:Sk)(t)},Tk=function(t,n){return t&&Kf(n,i1(n),t)},Ek=function(t){var n=[];if(t!=null)for(var a in Object(t))n.push(a);return n},Ik=Object.prototype.hasOwnProperty,kk=function(t){if(!pp(t))return Ek(t);var n=n1(t),a=[];for(var h in t)(h!="constructor"||!n&&Ik.call(t,h))&&a.push(h);return a},uy=function(t){return ly(t)?zw(t,!0):kk(t)},Mk=function(t,n){return t&&Kf(n,uy(n),t)},Ow=C(function(t,n){var a=n&&!n.nodeType&&n,h=a&&t&&!t.nodeType&&t,y=h&&h.exports===a?Pf.Buffer:void 0,b=y?y.allocUnsafe:void 0;t.exports=function(u,A){if(A)return u.slice();var k=u.length,G=b?b(k):new u.constructor(k);return u.copy(G),G}}),Rw=function(t,n){var a=-1,h=t.length;for(n=n||Array(h);++a<h;)n[a]=t[a];return n},Ak=function(t,n){for(var a=-1,h=t==null?0:t.length,y=0,b=[];++a<h;){var u=t[a];n(u,a,t)&&(b[y++]=u)}return b};function Bw(){return[]}var Lk=Object.prototype.propertyIsEnumerable,Fw=Object.getOwnPropertySymbols,o1=Fw?function(t){return t==null?[]:(t=Object(t),Ak(Fw(t),function(n){return Lk.call(t,n)}))}:Bw,Pk=function(t,n){return Kf(t,o1(t),n)},jw=function(t,n){for(var a=-1,h=n.length,y=t.length;++a<h;)t[y+a]=n[a];return t},a1=Nw(Object.getPrototypeOf,Object),Uw=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)jw(n,o1(t)),t=a1(t);return n}:Bw,Dk=function(t,n){return Kf(t,Uw(t),n)},Vw=function(t,n,a){var h=n(t);return fp(t)?h:jw(h,a(t))},s1=function(t){return Vw(t,i1,o1)},zk=function(t){return Vw(t,uy,Uw)},l1=dp(Pf,"DataView"),u1=dp(Pf,"Promise"),c1=dp(Pf,"Set"),p1=dp(Pf,"WeakMap"),qw="[object Map]",Zw="[object Promise]",Gw="[object Set]",Hw="[object WeakMap]",Ww="[object DataView]",Nk=hp(l1),Ok=hp(Hf),Rk=hp(u1),Bk=hp(c1),Fk=hp(p1),mp=oy;(l1&&mp(new l1(new ArrayBuffer(1)))!=Ww||Hf&&mp(new Hf)!=qw||u1&&mp(u1.resolve())!=Zw||c1&&mp(new c1)!=Gw||p1&&mp(new p1)!=Hw)&&(mp=function(t){var n=oy(t),a=n=="[object Object]"?t.constructor:void 0,h=a?hp(a):"";if(h)switch(h){case Nk:return Ww;case Ok:return qw;case Rk:return Zw;case Bk:return Gw;case Fk:return Hw}return n});var Xf=mp,jk=Object.prototype.hasOwnProperty,Uk=function(t){var n=t.length,a=new t.constructor(n);return n&&typeof t[0]=="string"&&jk.call(t,"index")&&(a.index=t.index,a.input=t.input),a},cy=Pf.Uint8Array,h1=function(t){var n=new t.constructor(t.byteLength);return new cy(n).set(new cy(t)),n},Vk=function(t,n){var a=n?h1(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)},qk=/\w*$/,Zk=function(t){var n=new t.constructor(t.source,qk.exec(t));return n.lastIndex=t.lastIndex,n},Yw=Rl?Rl.prototype:void 0,Kw=Yw?Yw.valueOf:void 0,Gk=function(t){return Kw?Object(Kw.call(t)):{}},$w=function(t,n){var a=n?h1(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)},Hk=function(t,n,a){var h=t.constructor;switch(n){case"[object ArrayBuffer]":return h1(t);case"[object Boolean]":case"[object Date]":return new h(+t);case"[object DataView]":return Vk(t,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return $w(t,a);case"[object Map]":return new h;case"[object Number]":case"[object String]":return new h(t);case"[object RegExp]":return Zk(t);case"[object Set]":return new h;case"[object Symbol]":return Gk(t)}},Xw=Object.create;function d1(){}var Wk=function(t){if(!pp(t))return{};if(Xw)return Xw(t);d1.prototype=t;var n=new d1;return d1.prototype=void 0,n},Jw=function(t){return typeof t.constructor!="function"||n1(t)?{}:Wk(a1(t))};function Yk(t){return $s(t)&&Xf(t)=="[object Map]"}var Qw=Qh&&Qh.isMap,Kk=Qw?t1(Qw):Yk;function $k(t){return $s(t)&&Xf(t)=="[object Set]"}var eb=Qh&&Qh.isSet,Xk=eb?t1(eb):$k,Jk=1,Qk=2,eM=4,tb="[object Arguments]",rb="[object Function]",tM="[object GeneratorFunction]",nb="[object Object]",hn={};hn[tb]=hn["[object Array]"]=hn["[object ArrayBuffer]"]=hn["[object DataView]"]=hn["[object Boolean]"]=hn["[object Date]"]=hn["[object Float32Array]"]=hn["[object Float64Array]"]=hn["[object Int8Array]"]=hn["[object Int16Array]"]=hn["[object Int32Array]"]=hn["[object Map]"]=hn["[object Number]"]=hn[nb]=hn["[object RegExp]"]=hn["[object Set]"]=hn["[object String]"]=hn["[object Symbol]"]=hn["[object Uint8Array]"]=hn["[object Uint8ClampedArray]"]=hn["[object Uint16Array]"]=hn["[object Uint32Array]"]=!0,hn["[object Error]"]=hn[rb]=hn["[object WeakMap]"]=!1;var S2=function t(n,a,h,y,b,u){var A,k=a&Jk,G=a&Qk,W=a&eM;if(h&&(A=b?h(n,y,b,u):h(n)),A!==void 0)return A;if(!pp(n))return n;var se=fp(n);if(se){if(A=Uk(n),!k)return Rw(n,A)}else{var ne=Xf(n),Ee=ne==rb||ne==tM;if($f(n))return Ow(n,k);if(ne==nb||ne==tb||Ee&&!b){if(A=G||Ee?{}:Jw(n),!k)return G?Dk(n,Mk(A,n)):Pk(n,Tk(A,n))}else{if(!hn[ne])return b?n:{};A=Hk(n,ne,k)}}var Ge=(u=u||new Yf).get(n);if(Ge)return Ge;u.set(n,A),Xk(n)?n.forEach(function(nt){A.add(t(nt,a,h,nt,n,u))}):Kk(n)&&n.forEach(function(nt,qt){A.set(qt,t(nt,a,h,qt,n,u))});var pt=W?G?zk:s1:G?keysIn:i1,Wt=se?void 0:pt(n);return hk(Wt||n,function(nt,qt){Wt&&(nt=n[qt=nt]),kw(A,qt,t(nt,a,h,qt,n,u))}),A},T2,vi=function(t){return S2(t,5)},Ua=Map,rM=(ze(ib,T2=sr),ib);function ib(){var t=T2!==null&&T2.apply(this,arguments)||this;return t.layout="icons",t.mapStyles=["road","grayscale_light","grayscale_dark","night","road_shaded_relief"],t.style=d.ControlStyle.light,t}var f1,nM=(ze($n,f1=ys),$n.prototype.onAdd=function(t,n){var a=this;this.map=t;var h=this.buildContainer(t,this.options.style,"Map Style Control"),y=this.buildStyleOpsGrid(h),b=this.buildCurrStyleBtn(h,y);return h.addEventListener("mouseover",function(){a.hasMouse=!0,h.classList.add($n.Css.inUse),y.classList.remove("hidden-accessible-element")}),h.addEventListener("focusin",function(){a.hasFocus=!0,h.classList.add($n.Css.inUse),y.classList.remove("hidden-accessible-element")}),h.addEventListener("mouseleave",function(){a.hasMouse=!1,a.hasFocus||(h.classList.remove($n.Css.inUse),y.classList.add("hidden-accessible-element"))}),h.addEventListener("focusout",function(u){u.relatedTarget instanceof Node&&h.contains(u.relatedTarget)||(a.hasFocus=!1,a.hasMouse||(h.classList.remove($n.Css.inUse),y.classList.add("hidden-accessible-element")))}),n&&$n.InvertOrderPositions.includes(n.position)?(h.appendChild(y),h.appendChild(b)):(h.appendChild(b),h.appendChild(y)),h},$n.prototype.onRemove=function(){f1.prototype.onRemove.call(this),this.map.events.remove("styledata",this.onStyleChange)},$n.prototype.buildSelectStyleBtn=function(t,n){var a=this,h=document.createElement("button"),y=this.mapToFriendlyStyleName(t);h.setAttribute("title",y),h.setAttribute("alt",y),h.setAttribute("type","button");var b=new Image;return b.src=n,b.alt=y,h.appendChild(b),this.options.layout==="icons"?h.classList.add($n.Css.button):h.appendChild(document.createTextNode(y)),h.addEventListener("click",function(){a.map.setStyle({style:t})}),h},$n.prototype.buildCurrStyleBtn=function(t,n){var a=document.createElement("button");a.classList.add($n.Css.button),a.classList.add($n.Css.currentStyle),a.setAttribute("title","Select Style"),a.setAttribute("alt","Select Style"),a.setAttribute("type","button"),this.currStyleImage=new Image,a.appendChild(this.currStyleImage);var h=document.createElement("div");return h.classList.add("icon"),a.appendChild(h),a},$n.prototype.buildStyleOpsGrid=function(t){var n=this,a=document.createElement("div");return a.classList.add($n.Css.styleOptions),a.classList.add(this.options.layout),a.setAttribute("aria-label","Style Options"),a.classList.add("hidden-accessible-element"),this.map.styles.initialize().then(function(){for(var h=n.map.styles.getDef(),y=n.map.getStyle().style,b=0,u=h.styles;b<u.length;b++){var A=u[b],k=new gi({domain:h.domain,path:A.iconPath}).toString();n.styleIcons.set(A.name,k),A.name===y&&(n.currStyleImage.src=k,n.currStyleImage.alt=n.mapToFriendlyStyleName(A.name))}n.options.mapStyles==="all"?n.styleIcons.forEach(function(G,W){var se=n.buildSelectStyleBtn(W,G);a.appendChild(se)}):n.options.mapStyles.filter(function(G){return n.styleIcons.has(G)}).forEach(function(G){var W=n.styleIcons.get(G),se=n.buildSelectStyleBtn(G,W);a.appendChild(se)}),n.map.events.add("styledata",n.onStyleChange)}),a},$n.prototype.mapToFriendlyStyleName=function(t){return $n.StyleNamesMap[t]?$n.StyleNamesMap[t]:t},$n.InvertOrderPositions=[d.ControlPosition.TopRight,d.ControlPosition.BottomRight],$n.Css={button:"azure-maps-control-button",currentStyle:"curr-style",inUse:"in-use",styleOptions:"style-options"},$n.StyleNamesMap={road:"Road",satellite:"Satellite",satellite_road_labels:"Hybrid",grayscale_dark:"Grayscale (Dark)",grayscale_light:"Grayscale (Light)",night:"Night",road_shaded_relief:"Terra",blank:"Blank",blank_accessible:"Blank (Accessible)",high_contrast_dark:"High contrast"},$n);function $n(t){var n=f1.call(this)||this;return n.hasMouse=!1,n.hasFocus=!1,n.styleIcons=new Ua,n.onStyleChange=function(){var a=n.map.getStyle().style;n.styleIcons.has(a)&&(n.currStyleImage.src=n.styleIcons.get(a),n.currStyleImage.alt=n.mapToFriendlyStyleName(a))},n.options=new rM().merge(vi(t)),n}var m1,iM=(ze(ob,m1=sr),ob);function ob(){var t=m1!==null&&m1.apply(this,arguments)||this;return t.flow="relative",t.incidents=!0,t.isActive=!1,t.style=d.ControlStyle.light,t}var ab,oM=(ze(Jf,ab=ys),Jf.prototype.onAdd=function(t){this.container=this.buildContainer(t,this.options.style,"Traffic Control"),this.container.style.flexDirection="column";var n=this.constructTrafficButton(t);return this.container.appendChild(n),this.container},Jf.prototype.getOptions=function(){return vi(this.options)},Jf.prototype.constructTrafficButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("traffic"),a.setAttribute("title","toggle traffic display"),a.setAttribute("alt","toggle traffic display"),a.setAttribute("type","button"),a.addEventListener("click",function(){var h=t.getTraffic();n.options.isActive=!(h.flow!=="none"||h.incidents),n.options.isActive?(t.setTraffic({flow:n.options.flow,incidents:n.options.incidents}),n.container.classList.add("in-use")):(t.setTraffic({flow:"none",incidents:!1}),n.container.classList.remove("in-use"))}),t.events.add("ready",function(){n.options.isActive&&a.dispatchEvent(new Event("click"))}),a},Jf);function Jf(t){var n=ab.call(this)||this;return n.hasMouse=!1,n.hasFocus=!1,n.options=new iM().merge(t),n}var sb,aM=(ze(py,sb=ys),py.prototype.onAdd=function(t){var n=this.buildContainer(t,d.ControlStyle.auto,"Traffic Legend"),a=this.buildTrafficLegendDiv(t);return n.appendChild(a),n},py.prototype.buildTrafficLegendDiv=function(t){var n=document.createElement("div");n.classList.add("traffic-legend","hidden"),n.setAttribute("title","Traffic Legend"),n.setAttribute("alt","Traffic Legend");var a=document.createElement("table"),h=document.createElement("tr"),y=document.createElement("td");y.setAttribute("title","Traffic"),y.setAttribute("alt","Traffic"),y.appendChild(document.createTextNode("Traffic")),y.classList.add("traffic-legend-title"),y.colSpan=6,h.appendChild(y),a.appendChild(h);for(var b=document.createElement("tr"),u=0,A=this.table;u<A.length;u++){var k=A[u],G=document.createElement("td");if(k==="Fast"||k==="Slow")G.setAttribute("title",k),G.setAttribute("alt",k),G.appendChild(document.createTextNode(k)),G.classList.add("traffic-legend-text");else{G.classList.add("traffic-legend-colors");for(var W=0,se=k;W<se.length;W++){var ne=se[W],Ee=document.createElement("div");Ee.classList.add(ne),G.appendChild(Ee)}}b.appendChild(G)}return a.appendChild(b),n.appendChild(a),t.events.add("sourceadded",function(Ge){Ge.getId()==="vectorTilesTraffic"&&n.classList.remove("hidden")}),t.events.add("sourceremoved",function(Ge){Ge.getId()==="vectorTilesTraffic"&&n.classList.add("hidden")}),n},py);function py(){var t=sb.call(this)||this;return t.table=["Fast",["green","yellow","red","dark-red"],"Slow"],t}var g1,sM=(ze(lb,g1=sr),lb);function lb(){var t=g1!==null&&g1.apply(this,arguments)||this;return t.zoomDelta=1,t.style=d.ControlStyle.light,t}var ub,lM=(ze(Zu,ub=ys),Zu.prototype.onAdd=function(t){var n=this.buildContainer(t,this.options.style,"Zoom Control");n.style.flexDirection="column";var a=this.constructZoomInButton(t),h=this.constructZoomOutButton(t);return n.appendChild(a),n.appendChild(h),n},Zu.prototype.constructZoomInButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("zoom-in"),a.setAttribute("title","Zoom In"),a.setAttribute("alt","Zoom In"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({zoom:t.getCamera().zoom+n.options.zoomDelta,duration:Zu.ZOOM_DURATION_MS,type:"ease"},!0)}),a},Zu.prototype.constructZoomOutButton=function(t){var n=this,a=document.createElement("button");return a.classList.add("azure-maps-control-button"),a.classList.add("zoom-out"),a.setAttribute("title","Zoom Out"),a.setAttribute("alt","Zoom Out"),a.setAttribute("type","button"),a.addEventListener("click",function(){t.setCamera({zoom:t.getCamera().zoom-n.options.zoomDelta,duration:Zu.ZOOM_DURATION_MS,type:"ease"},!0)}),a},Zu.ZOOM_DURATION_MS=200,Zu);function Zu(t){var n=ub.call(this)||this;return n.options=new sM().merge(t),n}var uM=Object.freeze({__proto__:null,PitchControl:MI,CompassControl:ww,ZoomControl:lM,StyleControl:nM,TrafficControl:oM,TrafficLegendControl:aM});function cM(t){return this.__data__.has(t)}function hy(t){var n=-1,a=t==null?0:t.length;for(this.__data__=new Iw;++n<a;)this.add(t[n])}hy.prototype.add=hy.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},hy.prototype.has=cM;var pM=hy,hM=function(t,n){for(var a=-1,h=t==null?0:t.length;++a<h;)if(n(t[a],a,t))return!0;return!1},dM=function(t,n){return t.has(n)},cb=function(t,n,a,h,y,b){var u=1&a,A=t.length,k=n.length;if(A!=k&&!(u&&A<k))return!1;var G=b.get(t);if(G&&b.get(n))return G==n;var W=-1,se=!0,ne=2&a?new pM:void 0;for(b.set(t,n),b.set(n,t);++W<A;){var Ee=t[W],Ge=n[W];if(h)var pt=u?h(Ge,Ee,W,n,t,b):h(Ee,Ge,W,t,n,b);if(pt!==void 0){if(pt)continue;se=!1;break}if(ne){if(!hM(n,function(Wt,nt){if(!dM(ne,nt)&&(Ee===Wt||y(Ee,Wt,a,h,b)))return ne.push(nt)})){se=!1;break}}else if(Ee!==Ge&&!y(Ee,Ge,a,h,b)){se=!1;break}}return b.delete(t),b.delete(n),se};function fM(t){var n=-1,a=Array(t.size);return t.forEach(function(h,y){a[++n]=[y,h]}),a}function mM(t){var n=-1,a=Array(t.size);return t.forEach(function(h){a[++n]=h}),a}var E2=Rl?Rl.prototype:void 0,I2=E2?E2.valueOf:void 0,pb=function(t,n,a,h,y,b,u){switch(a){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":return!!(t.byteLength==n.byteLength&&b(new cy(t),new cy(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return qf(+t,+n);case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var A=fM;case"[object Set]":var k=1&h;if(A=A||mM,t.size!=n.size&&!k)return!1;var G=u.get(t);if(G)return G==n;h|=2,u.set(t,n);var W=cb(A(t),A(n),h,y,b,u);return u.delete(t),W;case"[object Symbol]":if(I2)return I2.call(t)==I2.call(n)}return!1},gM=Object.prototype.hasOwnProperty,yM=function(t,n,a,h,y,b){var u=1&a,A=s1(t),k=A.length;if(k!=s1(n).length&&!u)return!1;for(var G=k;G--;){var W=A[G];if(!(u?W in n:gM.call(n,W)))return!1}var se=b.get(t);if(se&&b.get(n))return se==n;var ne=!0;b.set(t,n),b.set(n,t);for(var Ee=u;++G<k;){var Ge=t[W=A[G]],pt=n[W];if(h)var Wt=u?h(pt,Ge,W,n,t,b):h(Ge,pt,W,t,n,b);if(!(Wt===void 0?Ge===pt||y(Ge,pt,a,h,b):Wt)){ne=!1;break}Ee=Ee||W=="constructor"}if(ne&&!Ee){var nt=t.constructor,qt=n.constructor;nt!=qt&&"constructor"in t&&"constructor"in n&&!(typeof nt=="function"&&nt instanceof nt&&typeof qt=="function"&&qt instanceof qt)&&(ne=!1)}return b.delete(t),b.delete(n),ne},aT="[object Arguments]",hb="[object Array]",y1="[object Object]",v1=Object.prototype.hasOwnProperty,sT=function(t,n,a,h,y,b){var u=fp(t),A=fp(n),k=u?hb:Xf(t),G=A?hb:Xf(n),W=(k=k==aT?y1:k)==y1,se=(G=G==aT?y1:G)==y1,ne=k==G;if(ne&&$f(t)){if(!$f(n))return!1;W=!(u=!0)}if(ne&&!W)return b=b||new Yf,u||r1(t)?cb(t,n,a,h,y,b):pb(t,n,k,a,h,y,b);if(!(1&a)){var Ee=W&&v1.call(t,"__wrapped__"),Ge=se&&v1.call(n,"__wrapped__");if(Ee||Ge)return y(Ee?t.value():t,Ge?n.value():n,a,h,b=b||new Yf)}return ne&&(b=b||new Yf,yM(t,n,a,h,y,b))},vM=function t(n,a,h,y,b){return n===a||(n==null||a==null||!$s(n)&&!$s(a)?n!=n&&a!=a:sT(n,a,h,y,t,b))},db,Ho=function(t,n){return vM(t,n)},_M=(db=Object.freeze({__proto__:null,default:{}}))&&db.default||db,gp=C(function(t){(function(){var n,a,h,y=0,b=[];for(A.BUFFER_SIZE=512,A.bin=u,A.test=function(k){if(typeof k=="string")return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(k)},a=0;a<256;a++)b[a]=(a+256).toString(16).substr(1);function u(){var k=function(G){var W,se,ne;if(h!==void 0){if(n===void 0||A.BUFFER_SIZE<y+G)if(y=0,h.getRandomValues)n=new Uint8Array(A.BUFFER_SIZE),h.getRandomValues(n);else{if(!h.randomBytes)throw new Error("Non-standard crypto library");n=h.randomBytes(A.BUFFER_SIZE)}return n.slice(y,y+=G)}for(W=[],a=0;a<G;a++)W.push((se=0,ne=255,Math.floor(Math.random()*(ne-se))+se));return W}(16);return k[6]=15&k[6]|64,k[8]=63&k[8]|128,k}function A(){var k=u();return b[k[0]]+b[k[1]]+b[k[2]]+b[k[3]]+"-"+b[k[4]]+b[k[5]]+"-"+b[k[6]]+b[k[7]]+"-"+b[k[8]]+b[k[9]]+"-"+b[k[10]]+b[k[11]]+b[k[12]]+b[k[13]]+b[k[14]]+b[k[15]]}typeof crypto<"u"?h=crypto:typeof window<"u"&&window.msCrypto!==void 0&&(h=window.msCrypto),h=h||_M,t.exports=A})()}),xs=(_1.TYPE="Feature",_1);function _1(t,n,a,h){this.type="Feature",this.type=_1.TYPE,this.properties=n||{},this.id=a,this.geometry=t,this.bbox=h}var fb,Qi=(ze(_i,fb=Array),_i.fromData=function(t){var n=NaN,a=NaN,h=new Set(["y"]),y=new Set(["x"]);return Object.keys(t).forEach(function(b){var u=b.toLowerCase();isNaN(n)&&h.has(u)&&typeof t[b]=="number"?n=t[b]:isNaN(a)&&y.has(u)&&typeof t[b]=="number"&&(a=t[b])}),isNaN(n)||isNaN(a)?null:new _i(n,a)},_i.getX=function(t){return 0<t.length?t[0]:NaN},_i.getY=function(t){return 1<t.length?t[1]:NaN},_i.getDestination=function(t,n,a){return new _i(_i.getX(t)+a*Math.cos((n+270)*Math.PI/180),_i.getY(t)+a*Math.sin((n+270)*Math.PI/180))},_i.getDistance=function(t,n){var a=_i.getX(t)-_i.getX(n),h=_i.getY(t)-_i.getY(n);return Math.sqrt(a*a+h*h)},_i.getHeading=function(t,n){var a=_i.getX(n)-_i.getX(t),h=_i.getY(t)-_i.getY(n);return 180*(2.5*Math.PI-Math.atan2(h,a))/Math.PI%360},_i);function _i(t,n){return fb.call(this,t,n)||this}var Xs=(x1.TYPE="Point",x1);function x1(t){this.type="Point",this.type=x1.TYPE,this.coordinates=t}var dn,yp,wr,ed,Jr,Qf,Qr,td,br,Bl,dy=6378137,xM=Math.PI/180,mb=180/Math.PI,gb=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function eo(t){return t*xM}function em(t){return t*mb}function w1(t,n,a){return Math.min(Math.max(t,n),a)}function yb(t,n){var a=eo(n[1]-t[1]),h=eo(n[0]-t[0]),y=Math.pow(Math.sin(a/2),2)+Math.cos(eo(t[1]))*Math.cos(eo(n[1]))*Math.pow(Math.sin(h/2),2),b=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return Math.round(dy*b*100)/100}function b1(t){if(t)switch(t.toLowerCase()){case"feet":case"foot":case"ft":return wr.feet;case"kilometers":case"kilometer":case"kilometres":case"kilometre":case"km":case"kms":return wr.kilometers;case"miles":case"mile":case"mi":return wr.miles;case"nauticalmiles":case"nauticalmile":case"nms":case"nm":return wr.nauticalMiles;case"yards":case"yard":case"yds":case"yrd":case"yrds":return wr.yards;case"meters":case"metres":case"m":default:return wr.meters}return wr.meters}function vb(t){if(t)switch(t.toLowerCase()){case"milespersecondsquared":case"milepersecondsquared":case"mi/s^2":case"mi/s2":return br.milesPerSecondSquared;case"kilometerspersecondsquared":case"kilometrespersecondsquared":case"kilometerpersecondsquared":case"kilometrepersecondsquared":case"km/s^2":case"km/s2":return br.kilometersPerSecondSquared;case"knotspersecond":case"knotpersecond":case"knts/s":case"kn/s":case"kt/s":return br.knotsPerSecond;case"standardgravity":case"g":return br.standardGravity;case"feetpersecondsquared":case"footpersecondsquared":case"ft/s^2":case"ft/s2":return br.feetPerSecondSquared;case"yardspersecondsquared":case"yardpersecondsquared":case"yds/s^2":case"yds/s2":case"yd/s^2":case"yd/s2":return br.yardsPerSecondSquared;case"milesperhoursecond":case"mileperhoursecond":case"milesperhourseconds":case"mileperhourseconds":case"mi/h/s":return br.milesPerHourSecond;case"kilometersperhoursecond":case"kilometrespersoursecond":case"kilometerperhoursecond":case"kilometrepersoursecond":case"kilometersperhourssecond":case"kilometrespersourssecond":case"kilometerperhourssecond":case"kilometrepersourssecond":case"kmhs":case"km/h/s":return br.kilometersPerHourSecond;case"meterspersecondsquared":case"metrespersecondsquared":case"meterpersecondsquared":case"metrepersecondsquared":case"m/s^2":case"m/s2":default:return br.metersPerSecondSquared}return br.metersPerSecondSquared}function _b(t){if(t)switch(t){case"acres":case"ac":return dn.acres;case"hectares":case"ha":return dn.hectares;case"squareFeet":case"ft^2":case"ft2":return dn.squareFeet;case"squareYards":case"squareYard":case"yds^2":case"yds2":case"yd^2":case"yd2":return dn.squareYards;case"squareKilometers":case"squareKilometres":case"squareKilometer":case"squareKilometre":case"km^2":case"km2":return dn.squareKilometers;case"squareMiles":case"squareMile":case"mi^2":case"mi2":return dn.squareMiles;case"squareMeters":case"squareMetres":case"squareMeter":case"squareMetre":case"m^2":case"m2":default:return dn.squareMeters}return dn.squareMeters}function xb(t){if(t)switch(t.toLowerCase()){case"feetpersecond":case"footsecond":case"ftps":case"ft/s":return Qr.feetPerSecond;case"milesperhour":case"mileperhour":case"mph":case"mi/hr":case"mi/h":return Qr.milesPerHour;case"knots":case"knot":case"knts":case"knt":case"kn":case"kt":return Qr.knots;case"mach":case"m":return Qr.mach;case"kilometersperhour":case"kilometresperhour":case"kmperhour":case"kmph":case"km/hr":case"km/h":return Qr.kilometersPerHour;case"meterspersecond":case"metrespersecond":case"mps":case"ms":case"m/s":default:return Qr.metersPerSecond}return Qr.metersPerSecond}function wb(t){if(t)switch(t.toLowerCase()){case"milliseconds":case"ms":return Jr.ms;case"minutes":case"minute":case"mins":case"min":return Jr.minutes;case"hours":case"hour":case"hr":case"h":return Jr.hours;case"days":case"day":case"d":return Jr.days;case"seconds":case"second":case"secs":case"sec":case"s":default:return Jr.seconds}return Jr.seconds}function bb(t){var n=0;if(t&&0<t.length){n=Math.abs(Cb(t[0]));for(var a=1,h=t.length;a<h;a++)n-=Math.abs(Cb(t[a]))}return n}function Cb(t){var n=0;if(3<=t.length){for(var a=void 0,h=void 0,y=0,b=t.length;y<b;y++)n+=(eo(t[y===b-2?(a=b-2,h=b-1,0):y===b-1?(a=b-1,h=0,1):(h=(a=y)+1,y+2)][0])-eo(t[a][0]))*Math.sin(eo(t[h][1]));n=n*dy*dy/2}return n}function Sb(t,n,a){return(t[0]-a[0])*(n[1]-a[1])-(t[1]-a[1])*(n[0]-a[0])}function wM(t,n,a){if(2<=a.length){for(var h=1/0,y=void 0,b=null,u=tm(a,22),A=void 0,k=0,G=u.length-1;k<G;k++)A=bM(n,u[k],u[k+1]),(y=Qi.getDistance(n,A))<h&&(h=y,b=A);if(b){var W=S1([b],22)[0];return new xs(new Xs(W),{distance:ya(t,W)})}}else if(a.length===1)return new xs(new Xs(a[0]),{distance:ya(t,a[0])});return null}function bM(t,n,a){if(n[0]===a[0]&&n[1]===a[1])return n;var h=t[0]-n[0],y=t[1]-n[1],b=a[0]-n[0],u=a[1]-n[1],A=(b*h+u*y)/(b*b+u*u);return A<0?n:1<A?a:[n[0]+b*A,n[1]+u*A]}function Wo(t,n){if(!isNaN(t)&&typeof n=="number"&&0<=n){var a=void 0;a=n<gb.length?gb[n]:Math.pow(10,n),t=Math.round(t*a)/a}return t}function Gu(t,n,a,h){switch(b1(n)){case wr.meters:t/=1e3;break;case wr.feet:t/=3280.8399;break;case wr.miles:t/=.62137119;break;case wr.yards:t/=1093.6133;break;case wr.nauticalMiles:t/=.5399568;break;case wr.kilometers:}switch(b1(a)){case wr.meters:t*=1e3;break;case wr.feet:t*=3280.8399;break;case wr.miles:t*=.62137119;break;case wr.yards:t*=1093.6133;break;case wr.nauticalMiles:t*=.5399568;break;case wr.kilometers:}if(typeof h=="number"&&0<=h){var y=Math.pow(10,h);t=Math.round(t*y)/y}return t}function rd(t,n,a,h){h=h||"meters",t=Lo(t);var y=Tb(h),b=eo(t[1]),u=eo(t[0]),A=eo(n),k=a/y,G=Math.asin(Math.sin(b)*Math.cos(k)+Math.cos(b)*Math.sin(k)*Math.cos(A)),W=u+Math.atan2(Math.sin(A)*Math.sin(k)*Math.cos(b),Math.cos(k)-Math.sin(b)*Math.sin(G)),se=w1(xi(em(G)),-85,85);return[Dn(em(W)),se]}function ya(t,n,a){var h=yb(t=Lo(t),n=Lo(n));return a==="meters"?h:Gu(h,"meters",a||"meters")}function Tb(t){var n=b1(t);return Gu(dy,wr.meters,n)}function Hu(t,n){if(t=Lo(t),n=Lo(n),t&&2<=t.length&&n&&2<=n.length){var a=eo(t[1]),h=eo(n[1]),y=eo(n[0]-t[0]),b=Math.sin(y)*Math.cos(h),u=Math.cos(a)*Math.sin(h)-Math.sin(a)*Math.cos(h)*Math.cos(y);return(em(Math.atan2(b,u))+360)%360}return NaN}function C1(t,n){var a,h=0;Array.isArray(t)?a=t:t.type&&t.type==="LineString"&&(a=t.coordinates);for(var y=0,b=a.length-1;y<b;y++)h+=yb(a[y],a[y+1]);return Gu(h,"meters",n||"meters")}function Eb(t,n,a){a=a||"meters";var h,y,b=0;if(Array.isArray(t)?y=t:t.type&&t.type==="LineString"&&(y=t.coordinates),2<=y.length){for(var u=y.length,A=1;A<u;A++){if(n<=b+(h=ya(y[A-1],y[A],a))){var k=Hu(y[A-1],y[A]);return rd(y[A-1],k,n-b,a)}b+=h}return b<=n?y[u-1]:y[0]}return null}function Ib(t,n,a,h,y){h=h||"meters",y=y||0,t=Lo(t);for(var b=[],u=360/a,A=0;A<=a;A++)b.push(rd(t,(A*u+y)%360,n,h));return b}function xi(t){return 90<t?180<(t=(t+90)%360)?90-(t-180):t-90:t<-90?(t=(t-90)%360)<-180?-90-(t+180):t+90:t}function Dn(t){return 180<t?(t+180)%360-180:t<-180?(t-180)%360+180:t}function kb(t,n,a){if(a===0)return Object.assign({},t);n=Lo(n);for(var h,y,b=[],u=0,A=t.length;u<A;u++)h=ya(n,t[u]),y=Hu(n,t[u]),b.push(rd(n,y+a,h));return b}function S1(t,n){for(var a,h,y=512*Math.pow(2,n),b=[],u=0,A=t.length;u<A;u++)a=t[u][0]/y-.5,h=.5-t[u][1]/y,b.push([360*a,90-360*Math.atan(Math.exp(2*-h*Math.PI))/Math.PI]);return b}function tm(t,n){for(var a,h,y,b=512*Math.pow(2,n),u=[],A=0,k=t.length;A<k;A++)y=Math.sin(t[A][1]*Math.PI/180),a=(t[A][0]+180)/360,h=.5-Math.log((1+y)/(1-y))/(4*Math.PI),u.push([Math.round(a*b),Math.round(h*b)]);return u}function T1(t,n,a,h){switch(vb(n)){case br.kilometersPerHourSecond:t/=3.6;break;case br.milesPerHourSecond:t/=2.236936292054;break;case br.knotsPerSecond:t/=1.943844492441;break;case br.standardGravity:t/=.1019716212978;break;case br.kilometersPerSecondSquared:t/=.001;break;case br.milesPerSecondSquared:t/=.000621371192;break;case br.feetPerSecondSquared:t/=3.280839895012;break;case br.yardsPerSecondSquared:t/=1.093613298338;break;case br.metersPerSecondSquared:}switch(vb(a)){case br.kilometersPerHourSecond:t*=3.6;break;case br.milesPerHourSecond:t*=2.236936292054;break;case br.knotsPerSecond:t*=1.943844492441;break;case br.standardGravity:t*=.1019716212978;break;case br.kilometersPerSecondSquared:t*=.001;break;case br.milesPerSecondSquared:t*=.000621371192;break;case br.feetPerSecondSquared:t*=3.280839895012;break;case br.yardsPerSecondSquared:t*=1.093613298338;break;case br.metersPerSecondSquared:}return Wo(t,h)}function Mb(t,n,a,h){switch(_b(n)){case dn.acres:t*=4046.8564224;break;case dn.hectares:t*=1e4;break;case dn.squareFeet:t*=.09290304;break;case dn.squareKilometers:t*=1e6;break;case dn.squareMiles:t*=259e4;break;case dn.squareYards:t*=.83612736;break;case dn.squareMeters:}switch(_b(a)){case dn.acres:t/=4046.8564224;break;case dn.hectares:t/=1e4;break;case dn.squareFeet:t/=.09290304;break;case dn.squareKilometers:t/=1e6;break;case dn.squareMiles:t/=259e4;break;case dn.squareYards:t/=.83612736;break;case dn.squareMeters:}return Wo(t,h)}function rm(t,n,a,h){switch(xb(n)){case Qr.feetPerSecond:t*=1.09728;break;case Qr.milesPerHour:t*=1.6093;break;case Qr.knots:t*=1.852;break;case Qr.metersPerSecond:t*=3.6;break;case Qr.mach:t*=1234.8;break;case Qr.kilometersPerHour:}switch(xb(a)){case Qr.feetPerSecond:t/=1.09728;break;case Qr.milesPerHour:t/=1.6093;break;case Qr.knots:t/=1.852;break;case Qr.metersPerSecond:t/=3.6;break;case Qr.mach:t/=1234.8;break;case Qr.kilometersPerHour:}return Wo(t,h)}function nm(t,n,a,h){switch(wb(n)){case Jr.ms:t/=1e3;break;case Jr.hours:t*=3600;break;case Jr.minutes:t*=60;break;case Jr.days:t*=86400;break;case Jr.seconds:}switch(wb(a)){case Jr.ms:t*=1e3;break;case Jr.hours:t/=3600;break;case Jr.minutes:t/=60;break;case Jr.days:t/=86400;break;case Jr.seconds:}return Wo(t,h)}function Ab(t,n,a,h,y,b,u,A){var k=Gu(n,y,wr.meters),G=nm(a,b,Jr.seconds);return T1(2*(k-rm(t,h,Qr.metersPerSecond)*G)/(G*G),br.metersPerSecondSquared,u,A)}function Lb(t,n,a,h,y,b,u){var A=rm(t,h,Qr.metersPerSecond);return T1((rm(n,h,Qr.metersPerSecond)-A)/nm(a,y,Jr.seconds),br.metersPerSecondSquared,b,u)}function Pb(t,n,a,h){var y=E1(t),b=E1(n);return y!=null&&b!=null?nm(b.getTime()-y.getTime(),Jr.ms,a,h):NaN}function E1(t){if(Object.prototype.toString.call(t)==="[object Date]")return t;if(typeof t=="string"){var n=Date.parse(t);if(!isNaN(n))return new Date(n);if(0<=t.indexOf("Date(")){var a=0;return a=0<(t=t.replace("/Date(","").replace(")/","")).indexOf("+")?parseInt(t.substr(0,t.indexOf("+")),10):0<t.indexOf("-")?parseInt(t.substr(0,t.indexOf("-")),10):parseInt(t,10),new Date(a)}}else if(typeof t=="number")return new Date(t);return null}function vp(t){var n=[],a=null,h=null;if(Array.isArray(t)&&0<t.length)if(Array.isArray(t[0])&&typeof t[0][0]=="number")n=t;else for(var y=t.length,b=0;b<y;b++)n=n.concat(vp(t[b]));else if(t.type)switch(t.type){case"Point":n=[t.coordinates];break;case"LineString":n=t.coordinates;break;case"Polygon":a=t.coordinates;break;case"MultiPoint":n=t.coordinates;break;case"MultiLineString":a=t.coordinates;break;case"MultiPolygon":h=t.coordinates;break;case"Feature":var u=t;n=wi._isCircle(u)?wi._getCirclePositions(u):vp(u.geometry);break;case"FeatureCollection":n=vp(t.features);break;case"GeometryCollection":n=vp(t.geometries)}else if(t instanceof wi)return vp(t.toJson());if(a)for(y=a.length,b=0;b<y;b++)n=n.concat(a[b]);else if(h){var A=h.length;for(b=0;b<A;b++)for(var k=h[b].length,G=0;G<k;G++)n=n.concat(h[b][G])}return n}function Lo(t){if(Array.isArray(t)&&typeof t[0]=="number")return t;if(t.type){if(t.type==="Point")return t.coordinates;if(t.type==="Feature"&&t.geometry.type==="Point")return t.geometry.coordinates}else if(t instanceof wi&&t.getType()==="Point")return t.getCoordinates();return null}function Db(t,n,a){a=a||"meters";var h,y,b=0;if(Array.isArray(t)?y=t:t.type&&t.type==="LineString"&&(y=t.coordinates),2<=y.length){for(var u=y.length,A=1;A<u;A++){if(n<=b+(h=ya(y[A-1],y[A],a))){var k=Hu(y[A-1],y[A]),G=rd(y[A-1],k,n-b,a);return new xs(new Xs(G),{heading:k})}b+=h}return b<=n?new xs(new Xs(y[u-1]),{heading:Hu(y[u-2],y[u-1])}):new xs(new Xs(y[0]),{heading:Hu(y[0],y[1])})}return null}function fy(t,n,a,h){var y,b=Lo(t),u=tm([b],22)[0],A=null,k=1/0;switch((n=n instanceof wi?n.toJson():n).type){case"Feature":return fy(t,n.geometry,a);case"Point":y=[[n.coordinates]];break;case"MultiPoint":for(var G=void 0,W=n.coordinates,se=0,ne=W.length;se<ne;se++)(G=ya(b,W[se]))<k&&(k=G,A=new xs(new Xs(W[se]),{distance:G}));break;case"LineString":y=[n.coordinates];break;case"Polygon":case"MultiLineString":y=n.coordinates;break;case"MultiPolygon":var Ee=n.coordinates;if(0<Ee.length)for(y=Ee[0],se=1,ne=Ee.length;se<ne;se++)y=y.concat(Ee[se])}if(y){var Ge=void 0;for(se=0,ne=y.length;se<ne;se++)(Ge=wM(b,u,y[se]))&&Ge.properties.distance<k&&(k=Ge.properties.distance,A=Ge)}return A&&(A.properties.distance=Gu(A.properties.distance,"meters",a,h)),A}(yp=dn=dn||{}).squareMeters="squareMeters",yp.acres="acres",yp.hectares="hectares",yp.squareFeet="squareFeet",yp.squareKilometers="squareKilometers",yp.squareMiles="squareMiles",yp.squareYards="squareYards",(ed=wr=wr||{}).meters="meters",ed.kilometers="kilometers",ed.feet="feet",ed.miles="miles",ed.nauticalMiles="nauticalMiles",ed.yards="yards",(Qf=Jr=Jr||{}).seconds="seconds",Qf.hours="hours",Qf.ms="ms",Qf.minutes="minutes",Qf.days="days",(td=Qr=Qr||{}).metersPerSecond="metersPerSecond",td.kilometersPerHour="kilometersPerHour",td.feetPerSecond="feetPerSecond",td.milesPerHour="milesPerHour",td.knots="knots",td.mach="mach",(Bl=br=br||{}).milesPerSecondSquared="milesPerSecondSquared",Bl.kilometersPerSecondSquared="kilometersPerSecondSquared",Bl.knotsPerSecond="knotsPerSecond",Bl.standardGravity="standardGravity",Bl.feetPerSecondSquared="feetPerSecondSquared",Bl.yardsPerSecondSquared="yardsPerSecondSquared",Bl.milesPerHourSecond="milesPerHourSecond",Bl.kilometersPerHourSecond="kilometersPerHourSecond",Bl.metersPerSecondSquared="metersPerSecondSquared";var I1,Po=(ze(Js,I1=Array),Js.fromPosition=function(t){return t.length===2?new Js(t[0],t[1]):2<t.length?new Js(t[0],t[1],t[2]):null},Js.areEqual=function(t,n,a){if(a===void 0&&(a=6),t&&2<=t.length&&n&&2<=n.length){var h=Math.pow(10,a),y=xi(t[1]),b=xi(n[1]),u=Dn(t[0]),A=Dn(n[0]);if(Math.round((y-b)*h)/h!=0)return!1;var k=Math.round((u-A)*h)/h;return k==0||k==360}return!1},Js.fromLatLng=function(t,n,a){var h=[];if(typeof t=="number")h.push(t),typeof n=="number"&&h.push(n),typeof a=="number"&&h.push(a);else if(Array.isArray(t))2<=t.length&&typeof t[0]=="number"&&typeof t[1]=="number"&&(3<=t.length&&typeof t[2]=="number"?h.push(t[0],t[1],t[2]):h.push(t[0],t[1]));else if(typeof t=="object"){var y=["lat","latitude","y"],b=["lng","longitude","lon","x"],u=["elv","elevation","alt","altitude","z"],A=NaN,k=NaN,G=NaN;Object.keys(t).forEach(function(W,se,ne){var Ee=W.toLowerCase();isNaN(A)&&0<=y.indexOf(Ee)&&typeof t[W]=="number"?A=t[W]:isNaN(k)&&0<=b.indexOf(Ee)&&typeof t[W]=="number"?k=t[W]:isNaN(G)&&0<=u.indexOf(Ee)&&typeof t[W]=="number"&&(G=t[W])}),isNaN(A)||isNaN(k)||(h.push(k,A),isNaN(G)||h.push(G))}return 2<=h.length?h:null},Js.fromLatLngs=function(t){var n=[];if(Array.isArray(t))for(var a=0,h=t.length;a<h;a++){var y=Js.fromLatLng(t[a]);y&&n.push(y)}return n},Js._getDimensions=function(t){for(var n=0;Array.isArray(t);)t=t[0],n++;return typeof t=="number"&&n--,n},Js);function Js(t,n,a){return a?I1.call(this,t,n,a)||this:I1.call(this,t,n)||this}var my=(k1.TYPE="Polygon",k1);function k1(t,n){this.type="Polygon",this.type=k1.TYPE,Po._getDimensions(t)===1?this.coordinates=[t]:this.coordinates=t,this.bbox=n}var _p=(gy.prototype._addEventListener=function(t,n,a){this.listeners.has(t)||this.listeners.set(t,new Ua),this.listeners.get(t).set(n,a)},gy.prototype._removeEventListener=function(t,n){this.listeners.has(t)&&this.listeners.get(t).delete(n)},gy.prototype._invokeEvent=function(t,n){var a=this;this.listeners.has(t)&&this.listeners.get(t).forEach(function(h,y){h&&a._removeEventListener(t,y);try{y(n)}catch(b){console.error(b)}})},gy);function gy(){this.listeners=new Ua}var CM=Object.freeze({__proto__:null,EventEmitter:_p}),yy=(Fl.prototype.toTarget=function(t,n){return this.transformArray(t,this.M,n)},Fl.prototype.toSource=function(t,n){return this.transformArray(t,this.inverseM,n)},Fl.prototype.transformArray=function(t,n,a){if(t&&Array.isArray(t)&&Array.isArray(t[0])){for(var h=[],y=0,b=t;y<b.length;y++){var u=b[y];h.push(this.transform(u,n,a))}return h}return null},Fl.prototype.transform=function(t,n,a){var h=t[0]*n[0][3]+t[1]*n[1][3]+n[2][3],y=t[0]*n[0][4]+t[1]*n[1][4]+n[2][4];return typeof a=="number"&&0<=a?[Wo(h,a),Wo(y,a)]:[Wo(h,6),Wo(y,6)]},Fl._calculateAffineTransform=function(t,n){if(t.length!==n.length||t.length<1)throw new Error("Error: source and target arrays must have the same length.");var a=Math.min(t[0].length,n[0].length),h=a+1;if(t.length<a)throw new Error("Erorr: At least "+a+" reference points required.");for(var y=[],b=[],u=0;u<h;u++){b[u]=[];for(var A=0;A<h;A++){A<a&&(y[A]=0);for(var k=b[u][A]=0;k<t.length;k++)A<a&&(y[A]+=u<a?t[k][u]*n[k][A]:n[k][A]),b[u][A]+=a<=u&&a<=A?1:a<=u?t[k][A]:a<=A?t[k][u]:t[k][u]*t[k][A]}b[u]=b[u].concat(y)}if(!this._gaussJordanElimination(b))throw new Error("Error: Singular matrix. Points are likely coplanar.");return b},Fl._gaussJordanElimination=function(t){for(var n,a,h=t.length,y=2*h-1,b=0;b<h;b++){for(var u=b,A=b+1;A<h;A++)Math.abs(t[A][b])>Math.abs(t[u][b])&&(u=A);if(a=t[u],t[u]=t[b],t[b]=a,Math.abs(t[b][b])<=1e-10)return!1;for(var k=b+1;k<h;k++){n=t[k][b]/t[b][b];for(var G=b;G<y;G++)t[k][G]-=t[b][G]*n}}for(b=h-1;-1<b;b--){for(n=t[b][b],A=0;A<b;A++)for(var W=y-1;b-1<W;W--)t[A][W]-=t[b][W]*t[A][b]/n;t[b][b]/=n;for(var se=h;se<y;se++)t[b][se]/=n}return!0},Fl);function Fl(t,n){this.M=Fl._calculateAffineTransform(t,n),this.inverseM=Fl._calculateAffineTransform(n,t)}var zb,SM=Object.freeze({__proto__:null,AffineTransform:yy,_precision:Wo,get AreaUnits(){return dn},get DistanceUnits(){return wr},get TimeUnits(){return Jr},get SpeedUnits(){return Qr},get AccelerationUnits(){return br},boundingBoxToPolygon:function(t){var n=Dn(hr.getWest(t)),a=Dn(hr.getEast(t)),h=xi(hr.getNorth(t)),y=xi(hr.getSouth(t)),b=hr.getCenter(t),u=[[n,h],[n,y],[b[0],y],[a,y],[a,h],[b[0],h],[n,h]];return new my([u])},convertDistance:Gu,getCardinalSpline:function(t,n,a,h){var y;if(!t||t.length<=2)return y;typeof n!="number"&&(n=.5),(typeof a!="number"||a<=0)&&(a=15);var b=t.length;y=t.slice(0),h?(Po.areEqual(y[0],y[b-1])&&(y.pop(),b--),y.unshift(t[b-1]),y.push(t[0]),y.push(t[1]),b++):(y.unshift(t[0]),y.push(t[b-1]));var u,A,k,G=[];G.push([1,0,0,0]);for(var W=1;W<a-1;W++)k=(u=W/a)*(A=u*u),G.push([2*k-3*A+1,-2*k+3*A,k-2*A+u,k-A]);G.push([0,1,0,0]);var se,ne,Ee,Ge,pt,Wt,nt,qt=[];for(W=1;W<b;W++)for(ne=n*(y[W+1][0]-y[W-1][0]),Ee=n*(y[W+1][1]-y[W-1][1]),Ge=n*(y[W+2][0]-y[W][0]),pt=n*(y[W+2][1]-y[W][1]),u=0;u<a;u++)nt=(se=G[u])[0]*y[W][0]+se[1]*y[W+1][0]+se[2]*ne+se[3]*Ge,Wt=w1(Wt=se[0]*y[W][1]+se[1]*y[W+1][1]+se[2]*Ee+se[3]*pt,-85,85),qt.push([nt,Wt]);return qt},getDestination:rd,getDistanceTo:ya,getEarthRadius:Tb,getGeodesicPath:function(t,n){var a;(!n||n<=0)&&(n=15),Array.isArray(t)?a=t:t.type&&t.type==="LineString"&&(a=t.coordinates);for(var h=a.length-1,y=[],b=0;b<h;b++)for(var u=eo(a[b][1]),A=eo(a[b][0]),k=eo(a[b+1][1]),G=eo(a[b+1][0]),W=2*Math.asin(Math.sqrt(Math.pow(Math.sin((u-k)/2),2)+Math.cos(u)*Math.cos(k)*Math.pow(Math.sin((A-G)/2),2))),se=0;se<=n;se++){var ne=se/n,Ee=Math.sin((1-ne)*W)/Math.sin(W),Ge=Math.sin(ne*W)/Math.sin(W),pt=Ee*Math.cos(u)*Math.cos(A)+Ge*Math.cos(k)*Math.cos(G),Wt=Ee*Math.cos(u)*Math.sin(A)+Ge*Math.cos(k)*Math.sin(G),nt=Ee*Math.sin(u)+Ge*Math.sin(k),qt=Math.atan2(nt,Math.sqrt(Math.pow(pt,2)+Math.pow(Wt,2))),tn=Math.atan2(Wt,pt);qt=w1(em(qt),-85,85),tn=em(tn),y.push([tn,qt])}return y},getHeading:Hu,getLengthOfPath:C1,getPositionAlongPath:Eb,getRegularPolygonPath:Ib,interpolate:function(t,n,a){a=a===void 0?.5:a;var h=ya(t=Lo(t),n=Lo(n),"kilometers");return rd(t,Hu(t,n),h*a,"kilometers")},normalizeLatitude:xi,normalizeLongitude:Dn,rotatePositions:kb,getPixelHeading:function(t,n){var a=tm([t=Lo(t),n=Lo(n)],21),h=a[0],y=a[1],b=y[0]-h[0],u=h[1]-y[1];return(2.5*Math.PI-Math.atan2(u,b))*mb%360},mercatorPixelsToPositions:S1,mercatorPositionsToPixels:tm,convertAcceleration:T1,convertArea:Mb,convertSpeed:rm,convertTimespan:nm,getAcceleration:Ab,getAccelerationFromSpeeds:Lb,getAccelerationFromFeatures:function(t,n,a,h,y,b,u){if(typeof a=="string"&&t.type==="Feature"&&t.geometry.type==="Point"&&n.type==="Feature"&&n.geometry.type==="Point"){var A=Pb(t.properties[a],n.properties[a],Jr.seconds);if(!isNaN(A)){var k=0;if(h&&typeof h=="string"){var G=t.properties[h],W=n.properties[h];if(typeof G=="number"&&(k=G,typeof W=="number"))return Lb(G,W,A,y,Jr.seconds,b,u)}return Ab(k,ya(t.geometry.coordinates,n.geometry.coordinates,wr.meters),A,y,wr.meters,Jr.seconds,b,u)}}return NaN},getArea:function t(n,a,h){if(n){var y=0;switch((n=n instanceof wi?n.toJson():n).type){case"Feature":if(n.geometry)return t(n.geometry,a,h);break;case"Polygon":n.coordinates&&(y=bb(n.coordinates));break;case"MultiPolygon":var b=n;if(b.coordinates)for(var u=0,A=b.coordinates.length;u<A;u++)y+=bb(b.coordinates[u])}return Mb(y,dn.squareMeters,a,h)}return 0},getSpeed:function(t,n,a,h,y,b){var u=Lo(t),A=Lo(n);if(u&&A){var k=nm(a,h,Jr.seconds);return rm(ya(u,A,wr.meters)/k,Qr.metersPerSecond,y,b)}return 0},getSpeedFromFeatures:function(t,n,a,h,y){if(typeof a=="string"&&t.type==="Feature"&&t.geometry.type==="Point"&&n.type==="Feature"&&n.geometry.type==="Point"){var b=this.getTimespan(t.properties[a],n.properties[a],Jr.seconds);if(!isNaN(b)){var u=this.getDistanceTo(t.geometry.coordinates,n.geometry.coordinates,wr.meters);return this.convertSpeed(u/b,Qr.metersPerSecond,h,y)}}return NaN},getTimespan:Pb,getTravelDistance:function(t,n,a,h,y,b,u,A){n=this.convertTimespan(n,y,Jr.seconds);var k=(a=this.convertSpeed(a,b,Qr.metersPerSecond))*n;return typeof h=="number"&&(k+=.5*this.convertAcceleration(h,u,br.metersPerSecondSquared)*n*n),this.convertDistance(k,wr.meters,t,A)},parseTimestamp:E1,getConvexHull:function(t){var n=vp(t).map(function(k){return[Dn(k[0]),xi(k[1])]});n.sort(function(k,G){return k[0]===G[0]?k[1]-G[1]:k[0]-G[0]});for(var a=[],h=0,y=n;h<y.length;h++){for(var b=y[h];2<=a.length&&Sb(a[a.length-2],a[a.length-1],b)<=0;)a.pop();a.push(b)}for(var u=[],A=n.length-1;0<=A;A--){for(;2<=u.length&&Sb(u[u.length-2],u[u.length-1],n[A])<=0;)u.pop();u.push(n[A])}return new my([a.concat(u)])},getPositions:vp,getPosition:Lo,getPositionsAlongPath:function(t,n){if(n<2)return[];for(var a=[],h=C1(t,wr.meters)/(n-1),y=0;y<n;y++){var b=Eb(t,h*y,wr.meters);b!=null&&a.push(b)}return a},getPointWithHeadingAlongPath:Db,getPointsWithHeadingsAlongPath:function(t,n){if(n<=0)return[];for(var a=[],h=C1(t,wr.meters)/(n-1),y=0;y<n;y++){var b=Db(t,h*y,wr.meters);b!=null&&a.push(b)}return a},getClosestPointOnGeometry:fy}),wi=(ze(fn,zb=_p),fn.prototype.addProperty=function(t,n){Ho(this.data.properties[t],n)||(this.data.properties[t]=vi(n),t!=="subType"&&t!=="radius"||this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},fn.prototype.getBounds=function(){var t,n=this.getCoordinates(),a=this.getType();if(a==="Point")if(this.circlePolygon){var h=this.circlePolygon.geometry.coordinates;t=hr.fromPositions(h[0])}else t=new hr(h=n,h);else if(a==="MultiPoint"||a==="LineString")h=n,t=hr.fromPositions(h);else if(a==="Polygon")h=n,t=hr.fromPositions(h[0]);else if(a==="MultiLineString")for(var y=0,b=h=n;y<b.length;y++){var u=b[y];t=hr.merge(t,hr.fromPositions(u))}else if(a==="MultiPolygon")for(var A=0,k=h=n;A<k.length;A++){var G=k[A];t=hr.merge(t,hr.fromPositions(G[0]))}return t},fn.prototype.getCoordinates=function(){return vi(this.data.geometry.coordinates)},fn.prototype.getCircleCoordinates=function(){return this.circlePolygon?vi(this.circlePolygon.geometry.coordinates[0]):null},fn.prototype.getId=function(){return this.data.id},fn.prototype.getProperties=function(){return vi(this.data.properties)},fn.prototype.getType=function(){return this.data.geometry.type},fn.prototype.isCircle=function(){return fn._isCircle(this.data)},fn.prototype.isRectangle=function(){return fn._isRectangle(this.data)},fn.prototype.setCoordinates=function(t){var n;n=this.getType()==="Polygon"&&Po._getDimensions(t)===1?[t]:t,Ho(this.data.geometry.coordinates,n)||(this.data.geometry.coordinates=vi(n),this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},fn.prototype.setProperties=function(t){t[fn._shapeIdPropName]=this.data.id,Ho(this.data.properties,t)||(this.data.properties=vi(t),this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},fn.prototype.toJson=function(){return JSON.parse(JSON.stringify(this.data))},fn.prototype._toJson=function(){return this.circlePolygon||this.data},fn.prototype._setDataSource=function(t){t===void 0||t==null?delete this.dataSource:this.dataSource=t},fn.prototype._handleCircle=function(){if(this.isCircle()){var t=fn._getCirclePositions(this.data);this.circlePolygon=new xs(new my([t]),this.data.properties,this.data.id),this.data.properties.subType="Circle"}else delete this.circlePolygon},fn._isCircle=function(t){return t&&t.geometry&&t.geometry.type==="Point"&&t.geometry.coordinates&&t.properties&&typeof t.properties.subType=="string"&&t.properties.subType.toLowerCase()==="circle"&&typeof t.properties.radius=="number"},fn._isRectangle=function(t){if(t.geometry.type==="Polygon"&&t.geometry.coordinates&&typeof t.properties.subType=="string"&&t.properties.subType.toLowerCase()==="rectangle"){var n=t.geometry.coordinates;if(n.length===1){var a=n[0];if(a.length===5)return a[0][0]===a[4][0]&&a[0][1]===a[4][1];if(a.length===4)return!0}}return!1},fn._getCirclePositions=function(t){return Ib(t.geometry.coordinates,t.properties.radius,72,"meters")},fn._shapeIdPropName="_azureMapsShapeId",fn);function fn(t,n,a){var h,y=zb.call(this)||this;if(t.type==="Feature"){var b=t;h=vi(b.geometry),a=b.properties?vi(b.properties):{},n=b.id==null||b.id===""?gp():b.id}else h=vi(t),n=n==null||n===""?gp():n,a=a?vi(a):{};return a[fn._shapeIdPropName]=n,y.data=new xs(h,a,n),y._handleCircle(),y}var im,hr=(ze(ut,im=Array),ut.fromBoundingBox=function(t){var n=ut.getWest(t),a=ut.getSouth(t),h=ut.getEast(t),y=ut.getNorth(t);return new ut([n,a,h,y])},ut.fromDimensions=function(t,n,a){var h=t[0],y=t[1],b=Math.min(Math.max(y+a/2,-85.5),85.5),u=Math.min(Math.max(y-a/2,-85.5),85.5),A=Dn(h+n/2);return new ut([Dn(h-n/2),u,A,b])},ut.fromEdges=function(t,n,a,h){return new ut([t,n,a,h])},ut.containsPosition=function(t,n){var a=ut.getCenter(t),h=Math.abs(a[1]-n[1]),y=Math.abs(a[0]-n[0]);180<y&&(y=360-y);var b=ut.getHeight(t),u=ut.getWidth(t);return h<=b/2+1e-8&&y<=u/2+1e-8},ut.crossesAntimeridian=function(t){return Dn(ut.getEast(t))-Dn(ut.getWest(t))<0},ut.getCenter=function(t){var n=Dn(ut.getEast(t)),a=Dn(ut.getWest(t));n<a&&(n+=360);var h=Dn((a+n)/2),y=xi(ut.getSouth(t)),b=xi(ut.getNorth(t));return[h,xi((y+b)/2)]},ut.getHeight=function(t){var n=xi(ut.getNorth(t))-xi(ut.getSouth(t));return isNaN(n)?0:n},ut.getWidth=function(t){var n=Dn(ut.getEast(t))-Dn(ut.getWest(t));return isNaN(n)?0:n<0?n+=360:n},ut.getSouthWest=function(t){var n=this.getSouth(t),a=this.getWest(t);return isNaN(n)||isNaN(a)?null:[a,n]},ut.getNorthEast=function(t){var n=this.getNorth(t),a=this.getEast(t);return isNaN(n)||isNaN(a)?null:[a,n]},ut.getNorthWest=function(t){var n=this.getNorth(t),a=this.getWest(t);return isNaN(n)||isNaN(a)?null:[a,n]},ut.getSouthEast=function(t){var n=this.getSouth(t),a=this.getEast(t);return isNaN(n)||isNaN(a)?null:[a,n]},ut.getSouth=function(t){return t&&4<=t.length?Number(t[1]):NaN},ut.getWest=function(t){return t&&4<=t.length?Number(t[0]):NaN},ut.getNorth=function(t){if(t){if(t.length===4)return Number(t[3]);if(t.length===6)return Number(t[4])}return NaN},ut.getEast=function(t){if(t){if(t.length===4)return Number(t[2]);if(t.length===6)return Number(t[3])}return NaN},ut.intersect=function(t,n){var a=ut.getCenter(t),h=ut.getCenter(n),y=Math.abs(a[1]-h[1]),b=Math.abs(a[0]-h[0]);180<b&&(b=360-b);var u=ut.getHeight(t),A=ut.getWidth(t),k=ut.getHeight(n),G=ut.getWidth(n);return y<=u/2+k/2&&b<=A/2+G/2},ut.merge=function(t,n){var a=t&&t.length===4,h=n&&n.length===4;if(a&&!h)return t;if(h&&!a)return n;if(!a&&!h)return null;var y=Math.max(xi(ut.getNorth(t)),xi(ut.getNorth(n))),b=Math.min(xi(ut.getSouth(t)),xi(ut.getSouth(n))),u=[t,n],A=[],k=0;for(k=0;k<u.length;k++){var G=u[k],W=Dn(ut.getWest(G)),se=Dn(ut.getEast(G));ut.crossesAntimeridian(G)?(A.push([W,180]),A.push([-180,se])):A.push([W,se])}A.sort(function(tn,ho){return tn[0]===ho[0]?tn[1]-ho[1]:tn[0]-ho[0]});var ne=[],Ee=A[0];for(k=1;k<A.length;){var Ge=A[k];Ee[1]>=Ge[0]?Ee[1]=Math.max(Ee[1],Ge[1]):(ne.push(Ee),Ee=Ge),k++}ne.push(Ee);var pt=ne.length,Wt=ne[0][0]+360-ne[pt-1][1],nt=[ne[pt-1][1],ne[0][0]];for(k=1;k<pt;k++){var qt=ne[k][0]-ne[k-1][1];Wt<qt&&(Wt=qt,nt=[ne[k-1][1],ne[k][0]])}return new ut([nt[1],b],[nt[0],y])},ut.fromPositions=function(t){for(var n,a=NaN,h=NaN,y=NaN,b=NaN,u=t.length,A=new Array(u),k=0;u--;)if((n=t[u])&&2<=n.length){var G=xi(n[1]);a=isNaN(a)?G:Math.max(a,G),h=isNaN(h)?G:Math.min(h,G),A[k++]=Dn(n[0])}if(k){A.length=k,A.sort(function(Ee,Ge){return Ee-Ge});var W=A[0]+360-A[k-1],se=0;for(u=1;u<k;u++){var ne=A[u]-A[u-1];W<ne&&(W=ne,se=u)}y=A[se],b=A[(se||k)-1]}return isNaN(y)||isNaN(h)||isNaN(b)||isNaN(a)?null:new ut([y,h,b,a])},ut.fromLatLngs=function(t){return ut.fromPositions(Po.fromLatLngs(t))},ut.fromData=function(t){var n,a=null;if(Array.isArray(t)&&0<t.length){for(var h=0,y=t;h<y.length;h++){var b=y[h];(n=ut.fromData(b))!=null&&(a=a===null?n:ut.merge(a,n))}return a}if(t instanceof wi)return t.getBounds();if(t&&t.type){var u=t;if(u.bbox&&u.bbox.length===4)return u.bbox;switch(u.type){case"FeatureCollection":return ut.fromData(u.features);case"Feature":return wi._isCircle(u)?ut.fromPositions(wi._getCirclePositions(u)):ut.fromData(u.geometry);case"GeometryCollection":return ut.fromData(u.geometries);case"Point":var A=u.coordinates;if(A&&2<=A.length)return[A[0],A[1],A[0],A[1]];break;case"LineString":case"MultiPoint":return ut.fromPositions(u.coordinates);case"Polygon":case"MultiLineString":var k=u.coordinates;if(k&&0<k.length){for(var G=0,W=k.length;G<W;G++)(n=ut.fromPositions(k[G]))!=null&&(a=a===null?n:ut.merge(a,n));if(a!=null)return a}break;case"MultiPolygon":var se=u.coordinates;if(se&&0<se.length){for(G=0,W=se.length;G<W;G++)for(var ne=0,Ee=se[G].length;ne<Ee;ne++)(n=ut.fromPositions(se[G][ne]))!=null&&(a=a===null?n:ut.merge(a,n));return a}}}return null},ut.splitOnAntimeridian=function(t){var n=[];if(ut.crossesAntimeridian(t)){var a=void 0,h=void 0,y=Dn(ut.getWest(t)),b=Dn(ut.getEast(t)),u=xi(ut.getNorth(t)),A=xi(ut.getSouth(t));h=6<=t.length?(a=new ut([y,A,t[2],180,u,t[5]]),new ut([-180,A,t[2],b,u,t[5]])):(a=new ut([y,A,180,u]),new ut([-180,A,b,u])),n.push(a,h)}else n.push(new ut(t));return n},ut);function ut(t,n){var a=this;if(t&&n){var h=t;a=h[2]&&n[2]?im.call(this,h[0],h[1],h[2]||0,n[0],n[1],n[2]||0)||this:im.call(this,h[0],h[1],n[0],n[1])||this}else if(t){var y=t;y&&(y.length===4?a=im.call(this,y[0],y[1],y[2],y[3])||this:6<=y.length&&(a=im.call(this,y[0],y[1],y[2],y[3],y[4],y[5])||this))}return a}var xp=(M1.TYPE="FeatureCollection",M1);function M1(t,n){this.type="FeatureCollection",this.type=M1.TYPE,this.features=t,this.bbox=n}var TM=(A1.TYPE="GeometryCollection",A1);function A1(t){this.type="GeometryCollection",this.type=A1.TYPE,this.geometries=t}var EM=(L1.TYPE="LineString",L1);function L1(t,n){this.type="LineString",this.type=L1.TYPE,this.coordinates=t,this.bbox=n}var IM=(P1.TYPE="MultiLineString",P1);function P1(t,n){this.type="MultiLineString",this.type=P1.TYPE,this.coordinates=t,this.bbox=n}var kM=(D1.TYPE="MultiPoint",D1);function D1(t,n){this.type="MultiPoint",this.type=D1.TYPE,this.coordinates=t,this.bbox=n}var MM=(z1.TYPE="MultiPolygon",z1);function z1(t,n){this.type="MultiPolygon",this.type=z1.TYPE,this.coordinates=t,this.bbox=n}var Nb=Object.freeze({__proto__:null,Feature:xs,FeatureCollection:xp,LineString:EM,Point:Xs,Polygon:my,Position:Po,BoundingBox:hr,MultiLineString:IM,MultiPoint:kM,MultiPolygon:MM,GeometryCollection:TM}),Ob,Dr=function(t,n){return S2(t,5,n=typeof n=="function"?n:void 0)},Rb=(ze(Bb,Ob=sr),Bb);function Bb(){var t=Ob!==null&&Ob.apply(this,arguments)||this;return t.buffer=128,t.maxZoom=18,t.cluster=!1,t.clusterRadius=50,t.clusterMaxZoom=void 0,t.clusterProperties=void 0,t.lineMetrics=!1,t.tolerance=.375,t}var Fb,ai=(ze(vy,Fb=_p),vy.prototype.getId=function(){return this.id},vy.prototype._setMap=function(t){if(t==null||t===void 0){var n=this.map;delete this.map,this._invokeEvent("sourceremoved",this),n&&n.events.invoke("sourceremoved",this)}else this.map=t,this._invokeEvent("sourceadded",this),this.map.events.invoke("sourceadded",this)},vy);function vy(t){var n=Fb.call(this)||this;return n.id=t||gp(),n}var jb,Qs=(ze(ln,jb=ai),ln.prototype.add=function(t,n){this._addNoUpdate(t,n),this._updateSource()},ln.prototype.clear=function(){this._clearNoUpdate(),this._updateSource()},ln.prototype.dispose=function(){this.options=null,this.shapes=null,this.shapesMap=null,this.map=null},ln.prototype.getClusterExpansionZoom=function(t){var n=this;return new Promise(function(a,h){if(n.map){var y=n.map._getMap().getSource(n.getId());y&&y.type==="geojson"&&y.getClusterExpansionZoom(t,function(b,u){b?h(b):typeof u!="number"||a(u)})}else h("The DataSource hasn't been added to a map.")})},ln.prototype.getClusterChildren=function(t){var n=this;return new Promise(function(a,h){if(n.map){var y=n.map._getMap().getSource(n.getId());y&&y.type==="geojson"&&y.getClusterChildren(t,function(b,u){b?h(b):u&&a(n.map.sources._mapFeaturesToShapes(u,!1,n))})}else h("The DataSource hasn't been added to a map.")})},ln.prototype.getClusterLeaves=function(t,n,a){var h=this;return new Promise(function(y,b){if(h.map){var u=h.map._getMap().getSource(h.getId());u&&u.type==="geojson"&&u.getClusterLeaves(t,n,a,function(A,k){A?b(A):k&&y(h.map.sources._mapFeaturesToShapes(k,!1,h))})}else b("The DataSource hasn't been added to a map.")})},ln.prototype.getOptions=function(){return vi(this.options)},ln.prototype.getShapes=function(){return Array.from(this.shapes)},ln.prototype.importDataFromUrl=function(t){var n=this;return fetch(t,{method:"GET",mode:"cors"}).then(function(a){if(a.ok)return a.json();throw new Error("HTTP "+a.status+": "+a.statusText)}).then(function(a){n.add(a)})},ln.prototype.getShapeById=function(t){return this.shapes[this.shapesMap.get(t)]||null},ln.prototype.remove=function(t){for(var n=0,a=Array.isArray(t)?t:[t];n<a.length;n++){var h=a[n];typeof h=="number"?this._removeByIndex(h):this._removeById(h)}this._updateSource()},ln.prototype.removeById=function(t){for(var n=0,a=Array.isArray(t)?t:[t];n<a.length;n++){var h=a[n];this._removeById(h)}this._updateSource()},ln.prototype.setOptions=function(t){var n=new Rb().merge(this.options,vi(t));Ho(this.options,n)||(this._invokeEvent("datasourceupdated",this),this.options=n,this.map&&this.map._rebuildStyle())},ln.prototype.setShapes=function(t){this._clearNoUpdate(),this.add(t)},ln.prototype.toJson=function(){return new xp(this.shapes.map(function(t){return t.toJson()}))},ln.prototype._toJson=function(){return new xp(this.shapes.map(function(t){return t._toJson()}))},ln.prototype._buildSource=function(){var t={type:"geojson",data:this._toJson(),maxzoom:this.options.maxZoom,cluster:this.options.cluster,clusterRadius:this.options.clusterRadius,tolerance:this.options.tolerance,lineMetrics:this.options.lineMetrics,clusterProperties:this.options.clusterProperties,buffer:this.options.buffer};return typeof this.options.clusterMaxZoom=="number"&&(t.clusterMaxZoom=this.options.clusterMaxZoom),t},ln.prototype._addNoUpdate=function(t,n){var a;if(t instanceof wi)this._addToSources(t,n),a=[t];else if(Array.isArray(t))a=t.map(function(y){return y instanceof wi?y:new wi(y)}),this._addToSources(a,n);else if(t.type==="FeatureCollection")a=t.features.map(function(y){return new wi(y)}),this._addToSources(a,n);else if(t.type==="GeometryCollection")a=t.geometries.map(function(y){return new wi(y)}),this._addToSources(a,n);else{var h=new wi(t);this._addToSources(h,n),a=[h]}this._invokeEvent("dataadded",a)},ln.prototype._clearNoUpdate=function(){var t=this.shapes;this.shapes=[],this.shapesMap=new Ua,t&&0<t.length&&this._invokeEvent("dataremoved",t)},ln.prototype._updateSource=function(){var t=this;this.requestId===void 0&&(this.requestId=requestAnimationFrame(function(){t._updateMboxSource(),t.requestId=void 0}))},ln.prototype._addToSources=function(t,n){if(t=Array.isArray(t)?t:[t],typeof n!="number")for(var a=0,h=t;a<h.length;a++){var y=h[a];this.shapes.push(y),this.shapesMap.set(y.getId(),this.shapes.length-1)}else for(var b=t.length-1;0<=b;b--)this.shapes.splice(n,0,t[b]),this._updateShapesMap(n);for(var u=0,A=t;u<A.length;u++)(y=A[u])._setDataSource(this)},ln.prototype._removeById=function(t){var n,a=t instanceof wi?t.getId():typeof t=="string"||typeof t=="number"?t:t.id;(n=this.shapes[this.shapesMap.get(a)])&&(n._setDataSource(null),this.shapes.splice(this.shapesMap.get(a),1),this._updateShapesMap(this.shapesMap.get(a)),this.shapesMap.delete(a),this._invokeEvent("dataremoved",[n]))},ln.prototype._removeByIndex=function(t){var n;if(t>=this.shapes.length)throw new Error("The specified remove index '"+t+"' is greater than the maximum possible index '"+(this.shapes.length-1)+"'");n=this.shapes[t],this.shapesMap.delete(n.getId()),n._setDataSource(null),this.shapes.splice(t,1),this._updateShapesMap(t),this._invokeEvent("dataremoved",[n])},ln.prototype._updateShapesMap=function(t){for(var n=t;n<this.shapes.length;n++)this.shapesMap.set(this.shapes[n].getId(),n)},ln.prototype._updateMboxSource=function(){if(this.map&&this.map._getMap()){var t=this.map._getMap().getSource(this.getId());t&&t.type==="geojson"&&t.setData(this._toJson())}},ln);function ln(t,n){var a=jb.call(this,t)||this;return a.requestId=void 0,a.options=new Rb().merge(vi(n)),a.shapes=[],a.shapesMap=new Ua,a}var N1,AM=(ze(Ub,N1=sr),Ub);function Ub(){var t=N1!==null&&N1.apply(this,arguments)||this;return t.bounds=void 0,t.minZoom=0,t.maxZoom=22,t.isTMS=!1,t.tiles=void 0,t.tileSize=512,t.url=void 0,t}var Vb,LM=(ze(om,Vb=ai),om.prototype.getOptions=function(){return vi(this.options)},om.prototype.getShape=function(t,n){return this.map._getMap().querySourceFeatures(this.getId(),{sourceLayer:t,filter:n})},om.prototype._buildSource=function(){var t={type:"vector"};return this.options.bounds&&(t.bounds=this.options.bounds),this.options.tiles?(t.tiles=this.options.tiles,t.minzoom=this.options.minZoom,t.maxzoom=this.options.maxZoom):this.options.url&&(t.url=this.options.url),this.options.isTMS&&(t.scheme="tms"),this.options.tileSize&&(t.tileSize=this.options.tileSize),t},om);function om(t,n){var a=Vb.call(this,t)||this;return a.options=new AM().merge(vi(n)),a}var qb,PM=Object.freeze({__proto__:null,Source:ai,DataSource:Qs,VectorTileSource:LM}),zn=(ze(va,qb=_p),va.prototype.getId=function(){return this.id},va.prototype.getMap=function(){return this.map||null},va.prototype.onAdd=function(t){this.map=t,this._invokeEvent("layeradded",this),this.map.events.invoke("layeradded",this)},va.prototype.onRemove=function(){var t=this.map;delete this.map,this._invokeEvent("layerremoved",this),t&&t.events.invoke("layerremoved",this)},va._isMBoxEvent=function(t){return!this.LayerEvents.hasOwnProperty(t)},va.prototype._updateBaseProperties=function(t,n){this._updateFilter(t.filter,n.filter),this._updateZoomRange(t.minZoom,n.minZoom,t.maxZoom,n.maxZoom),this._updateLayoutProperty("visibility",t.visible,n.visible,t.visible?"visible":"none")},va.prototype._updateFilter=function(t,n){Ho(t,n)||this.map._getMap().setFilter(this.id,t)},va.prototype._updatePaintProperty=function(t,n,a,h){Ho(n,a)||this.map._getMap().setPaintProperty(this.id,t,h||n)},va.prototype._updateLayoutProperty=function(t,n,a,h){Ho(n,a)||this.map._getMap().setLayoutProperty(this.id,t,h||n)},va.prototype._updateZoomRange=function(t,n,a,h){t===n&&h===a||this.map._getMap().setLayerZoomRange(this.id,t,a)},va.LayerEvents={layeradded:void 0,layerremoved:void 0},va);function va(t){var n=qb.call(this)||this;return n.id=t||gp(),n}var O1,wp=(ze(R1,O1=sr),R1._cloneCustomizer=function(t){if(t instanceof ai)return t},R1);function R1(){var t=O1!==null&&O1.apply(this,arguments)||this;return t.filter=void 0,t.minZoom=0,t.maxZoom=24,t.visible=!0,t}var B1,am=(ze(Zb,B1=wp),Zb);function Zb(){var t=B1!==null&&B1.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.color="#1A73AA",t.blur=0,t.opacity=1,t.strokeColor="#FFFFFF",t.strokeOpacity=1,t.strokeWidth=2,t.pitchAlignment="viewport",t.radius=8,t}var Gb,F1=(ze(Wu,Gb=zn),Wu.prototype.getOptions=function(){return Dr(this.options,am._cloneCustomizer)},Wu.prototype.getSource=function(){return this.options.source},Wu.prototype.setOptions=function(t){var n=new am().merge(this.options,Dr(t,am._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("circle-blur",n.blur,this.options.blur),this._updatePaintProperty("circle-color",n.color,this.options.color),this._updatePaintProperty("circle-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("circle-radius",n.radius,this.options.radius),this._updatePaintProperty("circle-stroke-color",n.strokeColor,this.options.strokeColor),this._updatePaintProperty("circle-stroke-opacity",n.strokeOpacity,this.options.strokeOpacity),this._updatePaintProperty("circle-stroke-width",n.strokeWidth,this.options.strokeWidth),this._updatePaintProperty("circle-pitch-alignment",n.pitchAlignment,this.options.pitchAlignment)}this.options=n},Wu.prototype._buildLayers=function(){var t={id:this.id,type:"circle",source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"circle-color":this.options.color,"circle-blur":this.options.blur,"circle-opacity":this.options.opacity,"circle-stroke-color":this.options.strokeColor,"circle-stroke-opacity":this.options.strokeOpacity,"circle-stroke-width":this.options.strokeWidth,"circle-pitch-alignment":this.options.pitchAlignment,"circle-radius":this.options.radius},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(t.filter=this.options.filter),this.options.sourceLayer&&(t["source-layer"]=this.options.sourceLayer),[t]},Wu.prototype._getLayerIds=function(){return[this.id]},Wu.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},Wu);function Wu(t,n,a){var h=Gb.call(this,n)||this;return h.options=new am().merge(Dr(a,am._cloneCustomizer)),h.options.source=t||h.options.source,h}var j1,sm=(ze(U1,j1=wp),U1._cloneCustomizer=function(t){if(t instanceof ai)return t},U1);function U1(){var t=j1!==null&&j1.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.color=["interpolate",["linear"],["heatmap-density"],0,"rgba(0,0, 255,0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],t.intensity=1,t.opacity=1,t.radius=30,t.weight=1,t}var Hb,DM=(ze(Yu,Hb=zn),Yu.prototype.getOptions=function(){return Dr(this.options,sm._cloneCustomizer)},Yu.prototype.getSource=function(){return this.options.source},Yu.prototype.setOptions=function(t){var n=new sm().merge(this.options,Dr(t,sm._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("heatmap-color",n.color,this.options.color),this._updatePaintProperty("heatmap-intensity",n.intensity,this.options.intensity),this._updatePaintProperty("heatmap-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("heatmap-radius",n.radius,this.options.radius),this._updatePaintProperty("heatmap-weight",n.weight,this.options.weight)}this.options=n},Yu.prototype._buildLayers=function(){var t={id:this.id,type:"heatmap",source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"heatmap-color":this.options.color,"heatmap-intensity":this.options.intensity,"heatmap-opacity":this.options.opacity,"heatmap-radius":this.options.radius,"heatmap-weight":this.options.weight},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(t.filter=this.options.filter),this.options.sourceLayer&&(t["source-layer"]=this.options.sourceLayer),[t]},Yu.prototype._getLayerIds=function(){return[this.id]},Yu.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},Yu);function Yu(t,n,a){var h=Hb.call(this,n)||this;return h.options=new sm().merge(Dr(a,sm._cloneCustomizer)),h.options.source=t||h.options.source,h}var V1,Wb=(ze(Yb,V1=wp),Yb);function Yb(){var t=V1!==null&&V1.apply(this,arguments)||this;return t.contrast=0,t.fadeDuration=300,t.hueRotation=0,t.maxBrightness=1,t.minBrightness=0,t.opacity=1,t.saturation=0,t}var q1,lm=(ze(Z1,q1=Wb),Z1._cloneCustomizer=function(t){if(t instanceof ai)return t},Z1);function Z1(){var t=q1!==null&&q1.apply(this,arguments)||this;return t.url=void 0,t.coordinates=void 0,t}var G1,um=(ze(H1,G1=zn),H1.prototype._getSourceIds=function(){var t=new Set;return t.add(this._getSourceId()),t},H1);function H1(){return G1!==null&&G1.apply(this,arguments)||this}var Kb,zM=(ze(Yo,Kb=um),Yo.prototype.getOptions=function(){return Dr(this.options,lm._cloneCustomizer)},Yo.prototype.setOptions=function(t){var n=new lm().merge(this.options,Dr(t,lm._cloneCustomizer)),a=typeof t.url=="string"&&t.url!==this.getOptions().url,h=t.coordinates!==void 0&&t.coordinates!==this.getOptions().coordinates;if(this.map){this._updateBaseProperties(n,this.options),this._updatePaintProperty("raster-contrast",n.contrast,this.options.contrast),this._updatePaintProperty("raster-fade-duration",n.fadeDuration,this.options.fadeDuration),this._updatePaintProperty("raster-hue-rotate",n.hueRotation,this.options.hueRotation),this._updatePaintProperty("raster-brightness-max",n.maxBrightness,this.options.maxBrightness),this._updatePaintProperty("raster-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("raster-saturation",n.saturation,this.options.saturation);var y=this.map._getMap().getSource(this._getSourceId());y&&y.updateImage(n)}this.options=n,a?this.reloadImage():h&&this.updateTransform()},Yo.prototype.getPositions=function(t){return this.transform.then(function(n){return n.toTarget(t)})},Yo.prototype.getPixels=function(t){return this.transform.then(function(n){return n.toSource(t)})},Yo.getCoordinatesFromRefPoints=function(t,n,a,h){return new yy(a,h).toTarget([[0,0],[t,0],[t,n],[0,n]])},Yo.getCoordinatesFromEdges=function(t,n,a,h,y){typeof y!="number"&&(y=0);var b=[Math.min(h,a),n,Math.max(h,a),t],u=hr.getCenter(b);return kb([hr.getNorthWest(b),hr.getNorthEast(b),hr.getSouthEast(b),hr.getSouthWest(b)],u,y)},Yo.prototype._buildLayers=function(){var t={id:this.id,type:"raster",source:this._getSourceId(),layout:{visibility:this.options.visible?"visible":"none"},paint:{"raster-opacity":this.options.opacity,"raster-hue-rotate":this.options.hueRotation,"raster-brightness-min":this.options.minBrightness,"raster-brightness-max":this.options.maxBrightness,"raster-saturation":this.options.saturation,"raster-contrast":this.options.contrast,"raster-fade-duration":this.options.fadeDuration},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(t.filter=this.options.filter),[t]},Yo.prototype._getLayerIds=function(){return[this.id]},Yo.prototype._buildSource=function(){return{type:"image",url:this.options.url,coordinates:this.options.coordinates}},Yo.prototype._getSourceId=function(){return this.getId()+"-ImageSource"},Yo.prototype.reloadImage=function(){var t=this;this.options.url&&(this.transform=new Promise(function(n,a){t.img.onload=function(){var h=[[0,0],[t.img.width,0],[t.img.width,t.img.height],[0,t.img.height]];n(new yy(h,t.options.coordinates)),t.isLoading=!1},t.img.onerror=t.img.onabort=function(){a("Failed to load image")},t.isLoading=!0,t.img.src=t.options.url}))},Yo.prototype.updateTransform=function(){if(!this.isLoading){var t=[[0,0],[this.img.width,0],[this.img.width,this.img.height],[0,this.img.height]];this.transform=Promise.resolve(new yy(t,this.options.coordinates))}},Yo);function Yo(t,n){var a=Kb.call(this,n)||this;return a.isLoading=!1,a.options=new lm().merge(Dr(t,lm._cloneCustomizer)),a.img=new Image,a.reloadImage(),a}var W1,cm=(ze($b,W1=wp),$b);function $b(){var t=W1!==null&&W1.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.lineCap="round",t.lineJoin="round",t.blur=0,t.strokeColor="#1E90FF",t.strokeDashArray=void 0,t.strokeGradient=void 0,t.offset=0,t.strokeOpacity=1,t.translate=new Qi(0,0),t.translateAnchor="map",t.strokeWidth=2,t}var Xb,Y1=(ze(Ku,Xb=zn),Ku.prototype.getOptions=function(){return Dr(this.options,cm._cloneCustomizer)},Ku.prototype.getSource=function(){return this.options.source},Ku.prototype.setOptions=function(t){var n=new cm().merge(this.options,Dr(t,cm._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("line-blur",n.blur,this.options.blur),this._updateLayoutProperty("line-cap",n.lineCap,this.options.lineCap),this._updateLayoutProperty("line-join",n.lineJoin,this.options.lineJoin),this._updatePaintProperty("line-offset",n.offset,this.options.offset),this._updatePaintProperty("line-color",n.strokeColor,this.options.strokeColor),this._updatePaintProperty("line-dasharray",n.strokeDashArray,this.options.strokeDashArray),this._updatePaintProperty("line-gradient",n.strokeGradient,this.options.strokeGradient),this._updatePaintProperty("line-opacity",n.strokeOpacity,this.options.strokeOpacity),this._updatePaintProperty("line-width",n.strokeWidth,this.options.strokeWidth),this._updatePaintProperty("line-translate",n.translate,this.options.translate),this._updatePaintProperty("line-translate-anchor",n.translateAnchor,this.options.translateAnchor)}this.options=n},Ku.prototype._buildLayers=function(){return[ot(ot(ot(ot({id:this.id,type:"line"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none","line-cap":this.options.lineCap,"line-join":this.options.lineJoin},paint:ot(ot(ot({"line-blur":this.options.blur,"line-color":this.options.strokeColor},this.options.strokeDashArray&&{"line-dasharray":this.options.strokeDashArray}),this.options.strokeGradient&&{"line-gradient":this.options.strokeGradient}),{"line-offset":this.options.offset,"line-opacity":this.options.strokeOpacity,"line-translate":this.options.translate,"line-translate-anchor":this.options.translateAnchor,"line-width":this.options.strokeWidth})}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},Ku.prototype._getLayerIds=function(){return[this.id]},Ku.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},Ku);function Ku(t,n,a){var h=Xb.call(this,n)||this;return h.options=new cm().merge(Dr(a,cm._cloneCustomizer)),h.options.source=t||h.options.source,h}var K1,pm=(ze(Jb,K1=wp),Jb);function Jb(){var t=K1!==null&&K1.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.base=0,t.fillColor="#1E90FF",t.height=0,t.fillOpacity=1,t.fillPattern=void 0,t.translate=new Qi(0,0),t.translateAnchor="map",t.verticalGradient=!0,t}var Qb,NM=(ze($u,Qb=zn),$u.prototype.getOptions=function(){return Dr(this.options,pm._cloneCustomizer)},$u.prototype.getSource=function(){return this.options.source},$u.prototype.setOptions=function(t){var n=new pm().merge(this.options,Dr(t,pm._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("fill-extrusion-base",n.base,this.options.base),this._updatePaintProperty("fill-extrusion-color",n.fillColor,this.options.fillColor),this._updatePaintProperty("fill-extrusion-height",n.height,this.options.height),this._updatePaintProperty("fill-extrusion-opacity",n.fillOpacity,this.options.fillOpacity),this._updatePaintProperty("fill-extrusion-pattern",n.fillPattern,this.options.fillPattern),this._updatePaintProperty("fill-extrusion-translate",n.translate,this.options.translate),this._updatePaintProperty("fill-extrusion-translate-anchor",n.translateAnchor,this.options.translateAnchor),this._updatePaintProperty("fill-extrusion-vertical-gradient",n.verticalGradient,this.options.verticalGradient)}this.options=n},$u.prototype._buildLayers=function(){return[ot(ot(ot(ot({id:this.id,type:"fill-extrusion"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:ot(ot({"fill-extrusion-base":this.options.base,"fill-extrusion-height":this.options.height,"fill-extrusion-opacity":this.options.fillOpacity},this.options.fillPattern?{"fill-extrusion-pattern":this.options.fillPattern}:{"fill-extrusion-color":this.options.fillColor}),{"fill-extrusion-translate":this.options.translate,"fill-extrusion-translate-anchor":this.options.translateAnchor,"fill-extrusion-vertical-gradient":this.options.verticalGradient})}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},$u.prototype._getLayerIds=function(){return[this.id]},$u.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},$u);function $u(t,n,a){var h=Qb.call(this,n)||this;return h.options=new pm().merge(Dr(a,pm._cloneCustomizer)),h.options.source=t||h.options.source,h}var _y,hm=(ze($1,_y=wp),$1.prototype.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=!1,h=!1,y=0,b=t;y<b.length;y++){var u=b[y];u&&(u.hasOwnProperty("fillColor")?h=!(a=!0):u.hasOwnProperty("fillPattern")&&(a=!(h=!0)))}var A=_y.prototype.merge.apply(this,t);return a?A.fillPattern=void 0:h&&(A.fillColor=void 0),A},$1);function $1(){var t=_y!==null&&_y.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.fillColor="#1E90FF",t.fillOpacity=.5,t.fillPattern=void 0,t}var e3,X1=(ze(Xu,e3=zn),Xu.prototype.getOptions=function(){return Dr(this.options,hm._cloneCustomizer)},Xu.prototype.getSource=function(){return this.options.source},Xu.prototype.setOptions=function(t){var n=new hm().merge(this.options,Dr(t,hm._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("fill-color",n.fillColor,this.options.fillColor),this._updatePaintProperty("fill-opacity",n.fillOpacity,this.options.fillOpacity),this._updatePaintProperty("fill-pattern",n.fillPattern,this.options.fillPattern)}this.options=n},Xu.prototype._buildLayers=function(){var t={id:this.id,type:"fill",source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"fill-opacity":this.options.fillOpacity},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(t.filter=this.options.filter),this.options.sourceLayer&&(t["source-layer"]=this.options.sourceLayer),this.options.fillPattern?t.paint["fill-pattern"]=this.options.fillPattern:t.paint["fill-color"]=this.options.fillColor,[t]},Xu.prototype._getLayerIds=function(){return[this.id]},Xu.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},Xu);function Xu(t,n,a){var h=e3.call(this,n)||this;return h.options=new hm().merge(Dr(a,hm._cloneCustomizer)),h.options.source=t||h.options.source,h}var J1,OM=(ze(t3,J1=sr),t3);function t3(){var t=J1!==null&&J1.apply(this,arguments)||this;return t.allowOverlap=!1,t.anchor="bottom",t.ignorePlacement=!1,t.image="marker-blue",t.offset=new Qi(0,0),t.optional=!1,t.pitchAlignment="auto",t.rotation=0,t.rotationAlignment="auto",t.size=1,t.opacity=1,t}var Q1,RM=(ze(r3,Q1=sr),r3);function r3(){var t=Q1!==null&&Q1.apply(this,arguments)||this;return t.allowOverlap=!1,t.anchor="center",t.textField=void 0,t.font=["StandardFont-Regular"],t.ignorePlacement=!1,t.offset=new Qi(0,0),t.optional=!1,t.pitchAlignment="auto",t.rotation=0,t.rotationAlignment="auto",t.size=16,t.color="#000000",t.haloBlur=0,t.haloColor="rgba(0,0,0,0)",t.haloWidth=0,t.opacity=1,t}var e_,dm=(ze(n3,e_=wp),n3);function n3(){var t=e_!==null&&e_.apply(this,arguments)||this;return t.source=void 0,t.sourceLayer=void 0,t.iconOptions=new OM,t.textOptions=new RM,t.placement="point",t.lineSpacing=250,t}var i3,t_=(ze(Ju,i3=zn),Ju.prototype.getOptions=function(){return Dr(this.options,dm._cloneCustomizer)},Ju.prototype.getSource=function(){return this.options.source},Ju.prototype.setOptions=function(t){var n=new dm().merge(this.options,Dr(t,dm._cloneCustomizer));if(this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updateLayoutProperty("symbol-spacing",n.lineSpacing,this.options.lineSpacing),this._updateLayoutProperty("symbol-placement",n.placement,this.options.placement),this._updateLayoutProperty("icon-allow-overlap",n.iconOptions.allowOverlap,this.options.iconOptions.allowOverlap),this._updateLayoutProperty("icon-anchor",n.iconOptions.anchor,this.options.iconOptions.anchor),this._updateLayoutProperty("icon-ignore-placement",n.iconOptions.ignorePlacement,this.options.iconOptions.ignorePlacement),this._updateLayoutProperty("icon-image",n.iconOptions.image,this.options.iconOptions.image),this._updateLayoutProperty("icon-offset",n.iconOptions.offset,this.options.iconOptions.offset),this._updatePaintProperty("icon-opacity",n.iconOptions.opacity,this.options.iconOptions.opacity),this._updateLayoutProperty("icon-optional",n.iconOptions.optional,this.options.iconOptions.optional),this._updateLayoutProperty("icon-pitch-alignment",n.iconOptions.pitchAlignment,this.options.iconOptions.pitchAlignment),this._updateLayoutProperty("icon-rotate",n.iconOptions.rotation,this.options.iconOptions.rotation),this._updateLayoutProperty("icon-rotation-alignment",n.iconOptions.rotationAlignment,this.options.iconOptions.rotationAlignment),this._updateLayoutProperty("icon-size",n.iconOptions.size,this.options.iconOptions.size),this._updateLayoutProperty("text-allow-overlap",n.textOptions.allowOverlap,this.options.textOptions.allowOverlap),this._updateLayoutProperty("text-anchor",n.textOptions.anchor,this.options.textOptions.anchor),this._updatePaintProperty("text-color",n.textOptions.color,this.options.textOptions.color),this._updateLayoutProperty("text-font",n.textOptions.font,this.options.textOptions.font),this._updateLayoutProperty("text-ignore-placement",n.textOptions.ignorePlacement,this.options.textOptions.ignorePlacement),this._updatePaintProperty("text-halo-blur",n.textOptions.haloBlur,this.options.textOptions.haloBlur),this._updatePaintProperty("text-halo-color",n.textOptions.haloColor,this.options.textOptions.haloColor),this._updatePaintProperty("text-halo-width",n.textOptions.haloWidth,this.options.textOptions.haloWidth),this._updateLayoutProperty("text-offset",n.textOptions.offset,this.options.textOptions.offset),this._updatePaintProperty("text-opacity",n.textOptions.opacity,this.options.textOptions.opacity),this._updateLayoutProperty("text-optional",n.textOptions.optional,this.options.textOptions.optional),this._updateLayoutProperty("text-pitch-alignment",n.textOptions.pitchAlignment,this.options.textOptions.pitchAlignment),this._updateLayoutProperty("text-rotate",n.textOptions.rotation,this.options.textOptions.rotation),this._updateLayoutProperty("text-rotation-alignment",n.textOptions.rotationAlignment,this.options.textOptions.rotationAlignment),this._updateLayoutProperty("text-size",n.textOptions.size,this.options.textOptions.size),this._updateLayoutProperty("text-field",n.textOptions.textField,this.options.textOptions.textField)}this.options=n},Ju.prototype._buildLayers=function(){return[ot(ot(ot(ot({id:this.id,type:"symbol"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof ai?this.options.source.getId():this.options.source,layout:ot(ot({visibility:this.options.visible?"visible":"none","symbol-placement":this.options.placement,"symbol-spacing":this.options.lineSpacing,"text-allow-overlap":this.options.textOptions.allowOverlap,"text-anchor":this.options.textOptions.anchor},this.options.textOptions.textField&&{"text-field":this.options.textOptions.textField}),{"text-font":this.options.textOptions.font,"text-ignore-placement":this.options.textOptions.ignorePlacement,"text-offset":this.options.textOptions.offset,"text-optional":this.options.textOptions.optional,"text-pitch-alignment":this.options.textOptions.pitchAlignment,"text-rotate":this.options.textOptions.rotation,"text-rotation-alignment":this.options.textOptions.rotationAlignment,"text-size":this.options.textOptions.size,"icon-allow-overlap":this.options.iconOptions.allowOverlap,"icon-anchor":this.options.iconOptions.anchor,"icon-ignore-placement":this.options.iconOptions.ignorePlacement,"icon-image":this.options.iconOptions.image,"icon-offset":this.options.iconOptions.offset,"icon-optional":this.options.iconOptions.optional,"icon-pitch-alignment":this.options.iconOptions.pitchAlignment,"icon-rotate":this.options.iconOptions.rotation,"icon-rotation-alignment":this.options.iconOptions.rotationAlignment,"icon-size":this.options.iconOptions.size}),paint:{"text-color":this.options.textOptions.color,"text-halo-blur":this.options.textOptions.haloBlur,"text-halo-color":this.options.textOptions.haloColor,"text-halo-width":this.options.textOptions.haloWidth,"text-opacity":this.options.textOptions.opacity,"icon-opacity":this.options.iconOptions.opacity}}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},Ju.prototype._getLayerIds=function(){return[this.id]},Ju.prototype._getSourceIds=function(){var t=new Set;return this.options.source instanceof ai?t.add(this.options.source.getId()):t.add(this.options.source),t},Ju);function Ju(t,n,a){var h=i3.call(this,n)||this;return h.options=new dm().merge(Dr(a,dm._cloneCustomizer)),h.options.source=t||h.options.source,h}var r_,fm=(ze(o3,r_=Wb),o3);function o3(){var t=r_!==null&&r_.apply(this,arguments)||this;return t.bounds=[-180,-85.0511,180,85.0511],t.minSourceZoom=0,t.maxSourceZoom=22,t.tileSize=512,t.isTMS=!1,t.subdomains=void 0,t.tileUrl=void 0,t}var a3,xy=(ze(jl,a3=um),jl.prototype.getOptions=function(){return Dr(this.options,fm._cloneCustomizer)},jl.prototype.setOptions=function(t){var n=new fm().merge(this.options,Dr(t,fm._cloneCustomizer));if(this.map){if(!Ho(n.bounds,this.options.bounds)||n.isTMS!==this.options.isTMS||n.maxSourceZoom!==this.options.maxSourceZoom||n.minSourceZoom!==this.options.minSourceZoom||!Ho(n.subdomains,this.options.subdomains)||n.tileSize!==this.options.tileSize||n.tileUrl!==this.options.tileUrl)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("raster-contrast",n.contrast,this.options.contrast),this._updatePaintProperty("raster-fade-duration",n.fadeDuration,this.options.fadeDuration),this._updatePaintProperty("raster-hue-rotate",n.hueRotation,this.options.hueRotation),this._updatePaintProperty("raster-brightness-max",n.maxBrightness,this.options.maxBrightness),this._updatePaintProperty("raster-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("raster-saturation",n.saturation,this.options.saturation)}this.options=n},jl.prototype._setOptionsNoUpdate=function(t){this.options=new fm().merge(this.options,Dr(t,fm._cloneCustomizer))},jl.prototype._buildLayers=function(){return[ot(ot({id:this.id,type:"raster",source:this._getSourceId(),layout:{visibility:this.options.visible?"visible":"none"},paint:{"raster-contrast":this.options.contrast,"raster-fade-duration":this.options.fadeDuration,"raster-hue-rotate":this.options.hueRotation,"raster-brightness-max":this.options.maxBrightness,"raster-brightness-min":this.options.minBrightness,"raster-opacity":this.options.opacity,"raster-saturation":this.options.saturation}},this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},jl.prototype._getLayerIds=function(){return[this.id]},jl.prototype._buildSource=function(){var t;if(this.options.tileUrl){if(this.options.tileUrl.indexOf("{")===-1)return{type:"raster",url:this.options.tileUrl};if(this.options.tileUrl.indexOf("{subdomain}")!==-1){if(!(this.options.subdomains&&0<this.options.subdomains.length))throw new Error("The {subdomain} placeholder was included in the tileUrl but no subdomains were specified");for(var n=[],a=0,h=this.options.subdomains;a<h.length;a++){var y=h[a];n.push(this.options.tileUrl.replace(/{subdomain}/g,y))}t=n}else t=[this.options.tileUrl]}return ot({type:"raster",bounds:this.options.bounds,maxzoom:this.options.maxSourceZoom,minzoom:this.options.minSourceZoom,scheme:this.options.isTMS?"tms":"xyz",tileSize:this.options.tileSize},t&&{tiles:t})},jl.prototype._getSourceId=function(){return this.getId()+"-RasterSource"},jl);function jl(t,n){var a=a3.call(this,n)||this;return t&&a.setOptions(t),a}var BM=Object.freeze({__proto__:null,BubbleLayer:F1,Layer:zn,LineLayer:Y1,PolygonExtrusionLayer:NM,PolygonLayer:X1,SymbolLayer:t_,TileLayer:xy,HeatMapLayer:DM,ImageLayer:zM}),s3=(l3.convertHtmlString=function(t){if(typeof t!="string")return t;var n=document.createElement("div");return n.innerHTML=t,n},l3);function l3(){}var u3=Function.prototype,FM=Object.prototype,lT=u3.toString,uT=FM.hasOwnProperty,jM=lT.call(Object),cT=function(t){if(!$s(t)||oy(t)!="[object Object]")return!1;var n=a1(t);if(n===null)return!0;var a=uT.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&lT.call(a)==jM},k2,c3=function(t){return $s(t)&&t.nodeType===1&&!cT(t)},mm=(ze(n_,k2=sr),n_._cloneCustomizer=function(t){if(c3(t))return t},n_);function n_(){var t=k2!==null&&k2.apply(this,arguments)||this;return t.anchor="none",t.draggable=!1,t.closeButton=!0,t.content=document.createElement("span"),t.fillColor="#FFFFFF",t.pixelOffset=new Qi(0,0),t.position=new Po(0,0),t.showPointer=!0,t}var p3,i_=(ze(mn,p3=_p),mn.prototype.setPopupOptions=function(t){this.setOptions(t)},mn.prototype.setOptions=function(t){var n=new mm().merge(this.options,Dr(t,mm._cloneCustomizer));n.content!==this.options.content?(this.htmlContent.remove(),this.htmlContent=this._createHtmlContent(n),this.contentDiv.prepend(this.htmlContent)):n.draggable!==this.options.draggable&&this._setDraggable(this.htmlContent,n.draggable),n.closeButton&&!this.closeBtn?(this.closeBtn=this._createCloseButton(),this.contentDiv.appendChild(this.closeBtn)):!n.closeButton&&this.closeBtn&&(this.contentDiv.removeChild(this.closeBtn),delete this.closeBtn),n.showPointer&&!this.arrowDiv?(this.arrowDiv=this._createArrowDiv(),this.containerDiv.appendChild(this.arrowDiv)):!n.showPointer&&this.arrowDiv&&(this.containerDiv.removeChild(this.arrowDiv),delete this.arrowDiv),n.fillColor!==this.options.fillColor&&(this.containerDiv.style.borderColor=n.fillColor,this.contentDiv.style.backgroundColor=n.fillColor),this.marker&&(n.anchor!==this.options.anchor?this.options.anchor==="none"?(this.autoAnchor!==n.anchor&&this._replaceMarker(this.map,n),this.map.events.remove("move",this._onMove),delete this.autoAnchor):(this._replaceMarker(this.map,n),n.anchor==="none"&&this.map.events.add("move",this._onMove)):(Ho(n.position,this.options.position)||this.marker.setLngLat(n.position),Ho(n.pixelOffset,this.options.pixelOffset)||this.marker.setOffset(n.pixelOffset))),this.options=n},mn.prototype.getPopupOptions=function(){return this.getOptions()},mn.prototype.getOptions=function(){return Dr(this.options,mm._cloneCustomizer)},mn.prototype._dragToPixel=function(t){this.dragging||(this.dragging=!0,this.contentDiv.style.pointerEvents="none",this._invokeEvent("dragstart",{type:"dragstart",target:this}));var n=[t[0]+this.dragOffset[0],t[1]+this.dragOffset[1]],a=this.map.pixelsToPositions([n])[0];this.options.position=a,this.marker.setLngLat(this.options.position),this._invokeEvent("drag",{type:"drag",target:this})},mn.prototype._onUp=function(){this.dragging&&(this.contentDiv.style.pointerEvents="",this._invokeEvent("dragend",{type:"dragend",target:this}),this.options.anchor==="none"&&this._onMove()),delete this.dragOffset,delete this.dragging},mn.prototype._createContainerDiv=function(t){var n=this,a=document.createElement("div");a.classList.add(mn.Css.container),a.classList.add(mn.Css.hidden),a.style.borderColor=t.fillColor,a.setAttribute("role","dialog"),a.setAttribute("aria-label","Map Information Window");var h=!1;return a.addEventListener("keydown",function(y){y.key!=="Tab"&&y.key!=="Escape"&&y.key!=="Esc"||(h=!0)}),a.addEventListener("keyup",function(y){y.key!=="Tab"&&y.key!=="Escape"&&y.key!=="Esc"||(h=!1)}),a.addEventListener("focusin",function(y){n.map&&!n.isOpen()&&(n.open(n.map),y.target instanceof HTMLElement&&y.target.focus())}),a.addEventListener("focusout",function(y){h&&y.relatedTarget instanceof Node&&!a.contains(y.relatedTarget)&&(h=!1,n.isOpen()&&n.close())}),a},mn.prototype._createContentDiv=function(t){var n=document.createElement("div");return n.classList.add(mn.Css.content),n.style.backgroundColor=t.fillColor,n.setAttribute("tabindex","0"),this.htmlContent=this._createHtmlContent(t),n.appendChild(this.htmlContent),n},mn.prototype._createArrowDiv=function(){var t=document.createElement("div");return t.classList.add(mn.Css.arrow),t},mn.prototype._createCloseButton=function(){var t=document.createElement("button");return t.addEventListener("click",this.close),t.classList.add(mn.Css.close),t.setAttribute("aria-label","close"),t.setAttribute("title","close"),t.setAttribute("tabindex","0"),t.innerHTML="&times;",t},mn.prototype._createHtmlContent=function(t){var n=s3.convertHtmlString(t.content);return t.draggable&&this._setDraggable(n,t.draggable),n},mn.prototype._createMarker=function(t,n){var a=this.marker?this.marker.getLngLat():t.position;return t.anchor==="none"?(this.autoAnchor=n||"bottom",this.containerDiv.classList.add(this.autoAnchor),new Z({anchor:this.autoAnchor,element:this.containerDiv,offset:t.pixelOffset}).setLngLat(a)):(this.containerDiv.classList.add(t.anchor),new Z({anchor:t.anchor,element:this.containerDiv,offset:t.pixelOffset}).setLngLat(a))},mn.prototype._getAutoAnchor=function(t,n){var a,h,y=this.containerDiv.offsetWidth,b=this.containerDiv.offsetHeight;if(this.marker){var u=t._getMap().project(this.marker.getLngLat());a=u.x,h=u.y}else{var A=t.positionsToPixels([n.position])[0];a=A[0],h=A[1]}var k=[];return h<b?k.push("top"):h>t.getCanvas().offsetHeight-b&&k.push("bottom"),a<y/2?k.push("left"):a>t.getCanvas().offsetWidth-y/2&&k.push("right"),0<k.length?k.join("-"):"bottom"},mn.prototype._replaceMarker=function(t,n,a){var h=this.containerDiv.nextElementSibling;this.marker.remove(),this.containerDiv.classList.remove(this.autoAnchor||this.options.anchor),this.marker=this._createMarker(n,a),this.marker.addTo(t._getMap()),t.popups._getCollectionDiv().insertBefore(this.containerDiv,h||null)},mn.prototype._setDraggable=function(t,n){n?(t.addEventListener("mousedown",this._onDown),t.addEventListener("touchstart",this._onDown),t.addEventListener("dragstart",this._onDragStart)):(t.removeEventListener("mousedown",this._onDown),t.removeEventListener("touchstart",this._onDown),t.removeEventListener("dragstart",this._onDragStart))},mn.Css={arrow:"popup-arrow",close:"popup-close",container:"popup-container",content:"popup-content-container",hidden:"hidden-accessible-element"},mn);function mn(t){var n=p3.call(this)||this;return n.attach=function(a){n.map!==a&&(n.map&&n.remove(),n.map=a,n.marker=n._createMarker(n.options),n.marker.addTo(n.map._getMap()),n.map.popups._getCollectionDiv().appendChild(n.containerDiv),n.map.popups.add(n))},n.open=function(a){if(!a&&!n.map)throw new Error("Must specify a map to open on or attach to a map in advance");n.attach(a||n.map),n.containerDiv.classList.remove(mn.Css.hidden),n.map.events.add("move",n._onMove),n._onMove(),n._invokeEvent("open",{target:n,type:"open"})},n.close=function(){n.map&&n.map.events.remove("move",n._onMove),n.containerDiv.classList.add(mn.Css.hidden),n._invokeEvent("close",{target:n,type:"close"})},n.remove=function(){n.map&&(n.marker.remove(),n.containerDiv.classList.remove(n.autoAnchor||n.options.anchor),n.map.events.remove("move",n._onMove),n.map.popups.remove(n),delete n.map,delete n.marker,delete n.autoAnchor)},n.isOpen=function(){return n.map&&!n.containerDiv.classList.contains(mn.Css.hidden)},n._onMove=function(){var a=n._getAutoAnchor(n.map,n.options);a!==n.autoAnchor&&(n._replaceMarker(n.map,n.options,a),n.map.events.add("move",n._onMove))},n._onDown=function(a){n.map.popups._addDraggedPopup(n);var h=n.map.positionsToPixels([n.options.position])[0];a.type==="mousedown"?(a=a,n.dragOffset=[h[0]-a.clientX,h[1]-a.clientY]):a.type==="touchstart"&&(a=a,n.dragOffset=[h[0]-a.touches[0].clientX,h[1]-a.touches[0].clientY])},n._onDragStart=function(a){a.preventDefault()},n.options=new mm().merge(Dr(t,mm._cloneCustomizer)),n.containerDiv=n._createContainerDiv(n.options),n.contentDiv=n._createContentDiv(n.options),n.containerDiv.appendChild(n.contentDiv),n.options.showPointer&&(n.arrowDiv=n._createArrowDiv(),n.containerDiv.appendChild(n.arrowDiv)),n.options.closeButton&&(n.closeBtn=n._createCloseButton(),n.contentDiv.appendChild(n.closeBtn)),n}var o_,gm=(ze(a_,o_=sr),a_._cloneCustomizer=function(t){if(t instanceof i_||c3(t))return t},a_);function a_(){var t=o_!==null&&o_.apply(this,arguments)||this;return t.anchor="bottom",t.color="#1A73AA",t.draggable=!1,t.htmlContent='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24.5 36.5" id="marker_'+gp()+'" width="24.5" height="36.5" display="block"><path d="M12.25.25a12.2543,12.2543,0,0,0-12,12.4937c0,6.4436,6.4879,12.1093,11.059,22.5641.5493,1.2563,1.3327,1.2563,1.882,0C17.7621,24.8529,24.25,19.1857,24.25,12.7437A12.2543,12.2543,0,0,0,12.25.25Z"   fill="{color}" stroke="{secondaryColor}" stroke-width="0.5"/><text style="font-family: Arial, Helvetica, sans-serif; font-size: 14px; fill: white;" text-anchor="middle" x="12" y="18">{text}</text></svg>',t.pixelOffset=new Qi(0,0),t.position=new Po(0,0),t.popup=void 0,t.secondaryColor="white",t.text=void 0,t.visible=!0,t}var h3,s_=(ze(si,h3=_p),si.prototype.getOptions=function(){return Dr(this.options,gm._cloneCustomizer)},si.prototype.setOptions=function(t){var n=new gm().merge(this.options,Dr(t,gm._cloneCustomizer));Ho(n.htmlContent,this.options.htmlContent)&&n.anchor===this.options.anchor?(typeof n.htmlContent!="string"||n.color===this.options.color&&n.text===this.options.text&&n.secondaryColor===this.options.secondaryColor||(this.element.innerHTML=this._getSubbedHtmlString(n)),n.draggable!==this.options.draggable&&(this._setDraggable(n.draggable),this.marker.setDraggable(n.draggable)),Ho(n.pixelOffset,this.options.pixelOffset)||this.marker.setOffset(n.pixelOffset),Ho(n.position,this.options.position)||this.marker.setLngLat(n.position),n.visible!==this.options.visible&&(n.visible?this.element.classList.remove(si.hiddenClass):this.element.classList.add(si.hiddenClass))):(this.marker.remove(),this._buildMarker(n),this.map&&(this.marker.addTo(this.map._getMap()),this._getCollectionContainer().appendChild(this.element))),this.options=n},si.prototype.togglePopup=function(){if(this.options.popup)if(this.options.popup.isOpen())this.options.popup.close();else{if(!this.map)throw new Error("The marker must be added to a map before calling togglePopup().");this.options.popup.setOptions({position:this.options.position}),this.options.popup.open(this.map)}},si.prototype._addToMap=function(t,n){this.map&&this.map!==t&&this._removeFromMap(),n&&(this.options.position=vi(n),this.marker.setLngLat(this.options.position)),this.map!==t&&(this.map=t,this.marker.addTo(t._getMap()),this._getCollectionContainer().appendChild(this.element))},si.prototype._removeFromMap=function(){this.map&&(this.marker.remove(),delete this.map)},si.prototype._getId=function(){if(this.element)return typeof this.options.htmlContent=="string"?this.element.firstChild.id:this.element.id},si.prototype._buildMarker=function(t){if(typeof t.htmlContent=="string"){var n=this._getSubbedHtmlString(t);this.element=s3.convertHtmlString(n)}else this.element=t.htmlContent;this.element.classList.add(si.containerClass),t.draggable&&this._setDraggable(!0),t.visible||this.element.classList.add(si.hiddenClass),this.marker=new Z({element:this.element,offset:t.pixelOffset,draggable:t.draggable,anchor:t.anchor}).setLngLat(t.position),this.marker.on("drag",this._onDrag),this.marker.on("dragstart",this._onDragStart),this.marker.on("dragend",this._onDragEnd),this.element.addEventListener("click",this._bubbleElementEvent),this.element.addEventListener("dblclick",this._bubbleElementEvent),this.element.addEventListener("contextmenu",this._bubbleElementEvent),this.element.addEventListener("keydown",this._bubbleElementEvent),this.element.addEventListener("keypress",this._bubbleElementEvent),this.element.addEventListener("keyup",this._bubbleElementEvent),this.element.addEventListener("mousedown",this._bubbleElementEvent),this.element.addEventListener("mouseenter",this._bubbleElementEvent),this.element.addEventListener("mouseleave",this._bubbleElementEvent),this.element.addEventListener("mousemove",this._bubbleElementEvent),this.element.addEventListener("mouseout",this._bubbleElementEvent),this.element.addEventListener("mouseover",this._bubbleElementEvent),this.element.addEventListener("mouseup",this._bubbleElementEvent)},si.prototype._getSubbedHtmlString=function(t){if(typeof t.htmlContent=="string")return t.htmlContent.replace(/{color}/gi,t.color||"").replace(/{secondaryColor}/gi,t.secondaryColor||"").replace(/{text}/gi,t.text||"")},si.prototype._getCollectionContainer=function(){var t=this.map.getCanvasContainer().querySelector("."+si.collectionContainerClass);return t||((t=document.createElement("div")).classList.add(si.collectionContainerClass),this.map.getCanvasContainer().appendChild(t)),t},si.prototype._setDraggable=function(t){t?this.element.addEventListener("dragstart",this._onEleDragStart):this.element.removeEventListener("dragstart",this._onEleDragStart)},si.collectionContainerClass="marker-collection-container",si.hiddenClass="hidden-accessible-element",si.containerClass="marker-container",si);function si(t){var n=h3.call(this)||this;return n._onDrag=function(){var a=n.marker.getLngLat().wrap();n.options.position=new Po(a.lng,a.lat),n._invokeEvent("drag",{type:"drag",target:n})},n._onDragStart=function(){n._invokeEvent("dragstart",{type:"dragstart",target:n})},n._onDragEnd=function(){n._invokeEvent("dragend",{type:"dragend",target:n})},n._bubbleElementEvent=function(a){n._invokeEvent(a.type,{type:a.type,target:n})},n._onEleDragStart=function(a){a.preventDefault()},n.options=new gm().merge(Dr(t,gm._cloneCustomizer)),n._buildMarker(n.options),n}var l_=function(t,n,a){(a===void 0||qf(t[n],a))&&(a!==void 0||n in t)||Qv(t,n,a)},UM=function(t){return function(n,a,h){for(var y=-1,b=Object(n),u=h(n),A=u.length;A--;){var k=u[t?A:++y];if(a(b[k],k,b)===!1)break}return n}}(),VM=function(t){return $s(t)&&ly(t)},u_=function(t,n){if((n!=="constructor"||typeof t[n]!="function")&&n!="__proto__")return t[n]},qM=function(t){return Kf(t,uy(t))},ZM=function(t,n,a,h,y,b,u){var A=u_(t,a),k=u_(n,a),G=u.get(k);if(G)l_(t,a,G);else{var W=b?b(A,k,a+"",t,n,u):void 0,se=W===void 0;if(se){var ne=fp(k),Ee=!ne&&$f(k),Ge=!ne&&!Ee&&r1(k);W=k,ne||Ee||Ge?W=fp(A)?A:VM(A)?Rw(A):Ee?Ow(k,!(se=!1)):Ge?$w(k,!(se=!1)):[]:cT(k)||e1(k)?e1(W=A)?W=qM(A):pp(A)&&!Xv(A)||(W=Jw(k)):se=!1}se&&(u.set(k,W),y(W,k,h,b,u),u.delete(k)),l_(t,a,W)}},GM=function t(n,a,h,y,b){n!==a&&UM(a,function(u,A){if(b=b||new Yf,pp(u))ZM(n,a,A,h,t,y,b);else{var k=y?y(u_(n,A),u,A+"",n,a,b):void 0;k===void 0&&(k=u),l_(n,A,k)}},uy)};function d3(t){return t}var HM=function(t,n,a){switch(a.length){case 0:return t.call(n);case 1:return t.call(n,a[0]);case 2:return t.call(n,a[0],a[1]);case 3:return t.call(n,a[0],a[1],a[2])}return t.apply(n,a)},f3=Math.max,WM=function(t,n,a){return n=f3(n===void 0?t.length-1:n,0),function(){for(var h=arguments,y=-1,b=f3(h.length-n,0),u=Array(b);++y<b;)u[y]=h[n+y];y=-1;for(var A=Array(n+1);++y<n;)A[y]=h[y];return A[n]=a(u),HM(t,this,A)}},YM=function(t){return function(){return t}},KM=sy?function(t,n){return sy(t,"toString",{configurable:!0,enumerable:!1,value:YM(n),writable:!0})}:d3,$M=Date.now,XM=function(t){var n=0,a=0;return function(){var h=$M(),y=16-(h-a);if(a=h,0<y){if(800<=++n)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}(KM),JM=function(t,n){return XM(WM(t,n,d3),t+"")},QM=function(t,n,a){if(!pp(a))return!1;var h=typeof n;return!!(h=="number"?ly(a)&&Lw(n,a.length):h=="string"&&n in a)&&qf(a[n],t)},e6=function(t){return JM(function(n,a){var h=-1,y=a.length,b=1<y?a[y-1]:void 0,u=2<y?a[2]:void 0;for(b=3<t.length&&typeof b=="function"?(y--,b):void 0,u&&QM(a[0],a[1],u)&&(b=y<3?void 0:b,y=1),n=Object(n);++h<y;){var A=a[h];A&&t(n,A,h,b)}return n})}(function(t,n,a){GM(t,n,a)}),m3=(g3.parse=function(t){var n=(t=t.toLowerCase()).lastIndexOf("-");return n!==-1?{code:t,language:t.substring(0,n),region:t.substring(n+1)}:{code:t,language:t}},g3);function g3(){}var bp={localizationsPath:"locs/mapcontrol/2019-3-12",sensitiveUserRegions:["il","kr","pk","in","cn","ar","bh","eg","jo","sa","kw","om","qa","ma","ae"],locales:{defaultLanguage:{defaultRegion:{code:"NGT",strings:"en/resource.json"}},ar:{defaultRegion:{code:"ar",strings:"ar-sa/resource.json"}},bg:{defaultRegion:{code:"bg-BG",strings:"bg-bg/resource.json"}},cs:{defaultRegion:{code:"cs-CZ",strings:"cs-cz/resource.json"}},da:{defaultRegion:{code:"da-DK",strings:"da-dk/resource.json"}},de:{defaultRegion:{code:"de-DE",strings:"de-de/resource.json"}},el:{defaultRegion:{code:"el-GR",strings:"el-gr/resource.json"}},en:{defaultRegion:{code:"en",strings:"en/resource.json"},us:{code:"en-US",strings:"en/resource.json"}},es:{defaultRegion:{code:"es-ES",strings:"es-es/resource.json"},mx:{code:"es-MX",strings:"es-mx/resource.json"}},fi:{defaultRegion:{code:"fi-FI",strings:"fi-fi/resource.json"}},fr:{defaultRegion:{code:"fr-FR",strings:"fr-fr/resource.json"}},hu:{defaultRegion:{code:"hu-HU",strings:"hu-hu/resource.json"}},id:{defaultRegion:{code:"id-ID",strings:"id-id/resource.json"}},it:{defaultRegion:{code:"it-IT",strings:"it-it/resource.json"}},ko:{defaultRegion:{code:"ko-KR",strings:"ko-kr/resource.json"}},lt:{defaultRegion:{code:"lt-LT",strings:"lt-lt/resource.json"}},ms:{defaultRegion:{code:"ms-MY",strings:"ms-my/resource.json"}},nb:{defaultRegion:{code:"nb-NO",strings:"nb-no/resource.json"}},nl:{defaultRegion:{code:"nl-NL",strings:"nl-nl/resource.json"}},pl:{defaultRegion:{code:"pl-PL",strings:"pl-pl/resource.json"}},pt:{defaultRegion:{code:"pt-PT",strings:"pt-pt/resource.json"},br:{code:"pt-BR",strings:"pt-br/resource.json"}},ru:{defaultRegion:{code:"ru-RU",strings:"ru-ru/resource.json"}},sk:{defaultRegion:{code:"sk-SK",strings:"sk-sk/resource.json"}},sl:{defaultRegion:{code:"sl-SL",strings:"sl-sl/resource.json"}},sv:{defaultRegion:{code:"sv-SE",strings:"sv-se/resource.json"}},th:{defaultRegion:{code:"th-TH",strings:"th-th/resource.json"}},tr:{defaultRegion:{code:"tr-TR",strings:"tr-tr/resource.json"}},zh:{defaultRegion:{code:"zh-Hant",strings:"zh-tw/resource.json"}},"zh-hant":{defaultRegion:{code:"zh-Hant",strings:"zh-tw/resource.json"}}}},t6=function(){this.Unknown="Unknown",this.Accident="Accident",this.Fog="Fog",this.Danger="Danger",this.Rain="Rain",this.Ice="Ice",this.Jam="Jam",this.LaneClosed="Lane Closed",this.RoadClosed="Road Closed",this.RoadWorks="Road Works",this.Wind="Wind",this.Flood="Flood",this.Detour="Detour"},wy=(by.getCode=function(t){var n=m3.parse(t);return bp.sensitiveUserRegions.indexOf(n.region)===-1?this.getLocaleData(n).code:t},by.getStrings=function(t){var n=this.getLocaleData(t);return new gi({domain:oe,path:bp.localizationsPath+"/"+n.strings}).get().then(function(a){return a},function(){return new t6})},by.getLocaleData=function(t){if(typeof t=="string"&&(t=m3.parse(t)),bp.locales[t.code])return bp.locales[t.code].defaultRegion;var n;if(bp.locales[t.language])n=bp.locales[t.language];else{if(t.language.indexOf("-")!==-1)return this.getLocaleData(t.language);n=bp.locales.defaultLanguage}return t.region&&n[t.region]?n[t.region]:n.defaultRegion},by);function by(){}var c_,r6=(Cy.getEdgeOrIEVersion=function(){var t=window.navigator.userAgent,n=t.indexOf("MSIE ");if(0<n)return parseInt(t.substring(n+5,t.indexOf(".",n)),10);if(0<t.indexOf("Trident/")){var a=t.indexOf("rv:");return parseInt(t.substring(a+3,t.indexOf(".",a)),10)}var h=t.indexOf("Edge/");return 0<h?parseInt(t.substring(h+5,t.indexOf(".",h)),10):-1},Cy.isEdgeOrIE=function(){return this.getEdgeOrIEVersion()!==-1},Cy.isIE=function(){var t=this.getEdgeOrIEVersion();return t!==-1&&t<=11},Cy);function Cy(){}(c_=d.AuthenticationType||(d.AuthenticationType={})).subscriptionKey="subscriptionKey",c_.aad="aad",c_.anonymous="anonymous";var Sy,Ty,y3=(ze(nd,Sy=sr),nd.prototype.setSubscriptionKey=function(t){this.authType=d.AuthenticationType.subscriptionKey,this.subscriptionKey=t},nd.prototype.setAadProperties=function(t,n,a,h,y){this.authType=d.AuthenticationType.aad,this.authContext=y||this.authContext,this.aadInstance=h||this.aadInstance,this.clientId=t,this.aadAppId=n,this.aadTenant=a},nd.prototype.setTokenCallbackFunction=function(t){this.authType=d.AuthenticationType.anonymous,this.getToken=t},nd.prototype.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=Sy.prototype.merge.apply(this,t);return a.authType===d.AuthenticationType.subscriptionKey?a.authContext=a.aadAppId=a.getToken=void 0:a.authType===d.AuthenticationType.aad?a.subscriptionKey=a.getToken=void 0:a.authType===d.AuthenticationType.anonymous&&(a.subscriptionKey=a.authContext=a.aadAppId=void 0),a},nd);function nd(){var t=Sy!==null&&Sy.apply(this,arguments)||this;return t.authType=void 0,t.subscriptionKey=void 0,t.clientId=void 0,t.aadAppId=void 0,t.aadTenant=void 0,t.aadInstance=void 0,t.getToken=void 0,t.authContext=void 0,t}var v3="NGT",_3=gp(),x3=X,w3=_e,id=new y3,p_=!1,b3=!1,C3=!1,S3=!1,T3=!1,h_=!1;function E3(){return Object.assign({},id)}function d_(){return x3}function I3(){return w3}function k3(){return v3}function M3(){return _3}function A3(){return id.authType===d.AuthenticationType.subscriptionKey?id.subscriptionKey:void 0}function L3(){return Ty}function f_(t){return!r6.isIE()&&I.supported({failIfMajorPerformanceCaveat:t})}function P3(t){id=new y3().merge(id,t),h_=!0}function D3(t){x3=t,b3=!0}function z3(t){w3=t,C3=!0}function N3(t){v3=wy.getCode(t),S3=!0}function O3(t){_3=t,T3=!0}function R3(t){id.setSubscriptionKey(t),h_=!0}function B3(t){Ty=t,p_=!0}function F3(t,n){if(n=Math.abs(n||1),typeof t=="string"&&ym[t.toLowerCase()]){for(var a=ym[t.toLowerCase()],h=/calc\(([0-9.]+)[px]*\s*\*\s*\{scale\}\)/gi,y=a,b=h.exec(a);b;)y=y.replace(b[0],parseFloat(b[1])*n+""),b=h.exec(a);return y=y.replace("{scale}",n+"")}throw new Error("Invalid templateName.")}function m_(){return h_}function j3(){return b3}function U3(){return C3}function V3(){return S3}function q3(){return T3}function Z3(){return p_}var Cp,Ey,et,Qu,Sp,od,ym={marker:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 26 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:1"/><text x="12.5" y="17.5" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 27 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:2"/><text x="12.5" y="18.5" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-circle":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 27 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:1"/><circle cx="12.5" cy="12.5" r="9" fill="{secondaryColor}"/><text x="12" y="17.5" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(24 * {scale})" height="calc(28 * {scale})" viewBox="0 0 24 28"><path d="m11.988 16.615a5.15 5.15 0 0 1-2.268-.525 4.909 4.909 0 0 1-2.805-4.442 5.019 5.019 0 0 1 5.072-4.936h.012a5.03 5.03 0 0 1 5.085 4.961 4.907 4.907 0 0 1-.549 2.224 5.114 5.114 0 0 1-4.548 2.718zm0-8.06a3.173 3.173 0 0 0-3.226 3.099 3.081 3.081 0 0 0 1.77 2.782 3.299 3.299 0 0 0 4.365-1.386 3.049 3.049 0 0 0 .342-1.381 3.184 3.184 0 0 0-3.239-3.114h-.012z" fill="{secondaryColor}"/><path d="m11.999.922a10.908 10.908 0 0 0-11.076 10.732 10.639 10.639 0 0 0 4.418 8.598l6.658 6.464 6.658-6.463a10.537 10.537 0 0 0 2.198-15.041 11.182 11.182 0 0 0-8.856-4.289zm1.873 14.341a4.221 4.221 0 0 1-5.589-1.789 3.945 3.945 0 0 1-.445-1.8 4.164 4.164 0 0 1 8.323-.037 4.028 4.028 0 0 1-2.289 3.626Z" fill="{color}"/><path d="m11.999 28-7.256-7.044a11.611 11.611 0 0 1-4.743-9.303 11.844 11.844 0 0 1 11.988-11.652.102 .102 0 0 1 .02 0 12.164 12.164 0 0 1 9.577 4.647 11.357 11.357 0 0 1 2.299 8.614 11.521 11.521 0 0 1-4.63 7.695zm-.01-26.157a9.997 9.997 0 0 0-10.143 9.812 9.769 9.769 0 0 0 4.04 7.853l.099.083 6.014 5.838 6.113-5.922a9.7 9.7 0 0 0 3.945-6.505 9.533 9.533 0 0 0-1.933-7.229 10.305 10.305 0 0 0-8.116-3.931h-.021zm.021 14.772a5.11 5.11 0 0 1-4.547-2.718 4.868 4.868 0 0 1 .932-5.743 5.118 5.118 0 0 1 3.58-1.46h.024a5.031 5.031 0 0 1 5.084 4.938 4.92 4.92 0 0 1-2.805 4.457h0a5.152 5.152 0 0 1-2.269.525zm-.011-8.079h-.015a3.277 3.277 0 0 0-2.295.933 3.029 3.029 0 0 0-.587 3.58 3.297 3.297 0 0 0 4.364 1.386h0a3.092 3.092 0 0 0 1.772-2.795 3.185 3.185 0 0 0-3.239-3.105z" fill="{secondaryColor}"/><text x="12" y="17" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',"pin-round":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(25 * {scale})" height="calc(25 * {scale})" viewBox="0 0 25 25"><g transform="translate(0 1)"><circle cx="12.25" cy="11.5833" r="11" fill="{color}"/><path d="m12.25 23.583a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-22a10 10 0 1 0 10 10 10 10 0 0 0-10-10z" fill="{secondaryColor}"/><circle cx="12.25" cy="11.5833" r="4.2386" fill="{secondaryColor}"/></g><text x="12.5" y="17" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',"marker-flat":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(42.8 * {scale})"  viewBox="0 0 1600 2570"><g fill="{color}"><path d="M691 2419c-409-575-641-1086-683-1504-10-106-10-136 5-224 31-188 105-330 241-458 129-124 270-190 453-214 69-9 113-10 182-1 373 46 655 326 703 698 40 308-120 801-424 1309-134 224-348 535-369 535-4 0-53-63-108-141z"/></g><g fill="rgba(0,0,0,0.15)" style="transform:scale(-1,1);transform-origin:center"><path d="M691 2419c-407-571-639-1083-682-1498-14-139-3-249 37-371 69-208 254-402 459-481 68-27 217-59 271-59h24v160 180 940 635c0 349-2 635-5 635-2 0-49-63-104-141z"/></g><circle cx="800" cy="800" r="600" fill="{secondaryColor}"/><text x="800" y="1100" style="font-size:800px;fill:#000;text-anchor:middle">{text}</text></svg>',"marker-arrow":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(25.47 * {scale})" height="calc(35.18 * {scale})" viewBox="0 0 4330 5980"><g fill="{color}"><path d="m2080 5969c-49-20-93-63-115-113-25-55-1928-5486-1953-5573-40-138 67-282 210-283 36 0 246 73 987 345 518 190 947 345 955 345 8 0 438-155 955-345 615-226 954-345 979-345 87 0 165 47 204 123 46 91 107-95-957 2942-537 1535-986 2805-997 2823-11 18-43 46-72 62-41 24-62 30-111 29-33 0-71-5-85-10z"/></g><g fill="{secondaryColor}"><path d="m2200 1600c-36 10-83 2-484-84-243-53-451-94-461-91-11 4-22 18-25 31-5 19 114 371 436 1292 244 697 448 1273 454 1281 19 24 50 30 71 12z"/><path d="m2200 1600c-36 10-83 2-484-84-243-53-451-94-461-91-11 4-22 18-25 31-5 19 114 371 436 1292 244 697 448 1273 454 1281 19 24 50 30 71 12z" style="transform:scale(-1,1);transform-origin:center"/></g><g fill="rgba(0,0,0,0.2)" ><path d="m2165 685c8 0 438-155 955-345 615-226 954-345 979-345 87 0 165 47 204 123 46 91 107-95-957 2942-537 1535-986 2805-997 2823-11 18-43 46-72 62-41 24-62 30-111 29z"/></g><text x="2165" y="3300" style="font-size:2500px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-ball-pin":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15.67 * {scale})" height="calc(33.33 * {scale})" viewBox="0 0 235 452"><g transform="translate(-135 10)"><path fill="{secondaryColor}" d="m256 442 0 0c-13 0-18-11-18-24l-6-323c0-13 11-24 24-24h0c13 0 24 11 24 24l-6 323c0 13-5 24-18 24z"/><circle style="fill:{color};stroke-width:10;stroke:{secondaryColor}" cx="256" cy="112" r="111"/><ellipse transform="matrix(0.834 0.5518 -0.5518 0.834 65.7916 -97.18)" fill="rgba(255,255,255,0.3)" cx="194.399" cy="60.749" rx="19.076" ry="32.428"/></g><text x="117.5" y="160" style="font-size:160px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(26.67 * {scale})" height="calc(32.27 * {scale})" viewBox="0 0 2000 2420"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="M845 2152c-22-37-58-95-80-129-22-35-62-99-90-143l-50-80-312 0-313 0 0-900 0-900 900 0 900 0 0 900 0 900-313 0-313 0-34 58c-19 31-38 59-42 60-5 2-8 8-8 12 0 9-69 123-88 145-5 6-11 15-13 21-16 39-77 123-89 124-8 0-33-31-55-68z"/></g><text x="1000" y="1300" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-cluster":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(33.33 * {scale})" height="calc(38.8 * {scale})" viewBox="0 0 2500 2910"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="m866 2652c-17-31-37-68-46-82-9-14-32-54-51-90-19-36-50-92-70-125l-36-60-332-3-331-2 0-905 0-905 660 0 660 0 0-38c0-71 50-196 102-258 71-85 189-164 244-164 12 0 26-4 29-10 8-13 222-13 230 0 3 6 17 10 30 10 25 0 117 45 154 76 130 107 191 232 191 392 0 155-63 284-190 386-36 29-129 76-150 76-11 0-22 5-25 10-3 6-31 10-61 10l-54 0 0 660 0 660-332 2-332 3-29 50c-17 28-48 84-70 125-22 41-47 86-56 100-9 14-30 51-46 83-17 32-36 57-45 57-8 0-28-25-44-58z"/></g><text x="1650" y="900" style="font-size:1000px;fill:#fff">+</text><text x="1000" y="1800" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-rounded":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(26.8 * {scale})" height="calc(32.27 * {scale})" viewBox="0 0 2010 2410"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="M856 2155c-20-30-36-59-36-65 0-5-4-10-10-10-5 0-10-5-10-11 0-5-18-37-40-69-22-32-40-64-40-69 0-6-4-11-10-11-5 0-10-5-10-10 0-6-15-33-32-60l-33-50-127 0c-74 0-129-4-133-10-3-5-17-10-30-10-25 0-116-45-155-76-87-69-142-151-178-265-15-46-17-1075-2-1084 5-3 10-17 10-30 0-13 5-27 10-30 6-3 10-13 10-22 0-22 83-135 122-168 57-46 62-50 112-75l50-25 585 0 586 0 63 34c84 46 169 133 212 218l35 68 0 565 0 565-28 59c-32 69-100 157-139 180-15 9-33 22-40 29-23 22-99 57-123 57-13 0-27 5-30 10-4 6-60 10-135 10l-128 0-128 205c-84 136-133 205-144 205-10 0-33-24-54-55z"/></g><text x="1000" y="1300" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-rounded-cluster":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(33.33 * {scale})" height="calc(32.13 * {scale})" viewBox="0 0 2500 2900"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="m874 2669c-9-18-26-49-37-68-11-20-30-55-43-78-13-24-36-64-51-90-14-27-38-69-52-95l-26-48-142 0c-84 0-144-4-148-10-3-5-17-10-30-10-25 0-118-46-154-76-91-76-136-142-175-254-13-38-16-119-16-554 0-358 3-520 12-545 40-125 106-219 195-278 127-84 116-83 646-83l467 0 0-42c0-46 11-87 45-163 54-121 169-220 306-264 46-14 232-14 278 0 165 53 284 175 340 350 19 61 14 204-10 273-32 91-94 178-169 240-38 31-130 76-155 76-13 0-27 5-30 10-3 6-28 10-56 10l-49 0 0 462c0 446-1 464-21 522-32 91-94 178-169 240-38 31-130 76-155 76-13 0-27 5-30 10-4 6-65 10-149 10-138 0-143 1-154 23-12 23-62 114-112 202-16 28-44 79-63 115-42 77-67 88-93 39z"/></g><text x="1650" y="900" style="font-size:1000px;fill:#fff">+</text><text x="1000" y="1800" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',flag:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(23.5 * {scale})" height="calc(40 * {scale})" viewBox="34 28 198 308"><path style="stroke:{secondaryColor};stroke-width:15;stroke-linecap:round;" d="M42 327l0 -291"/><path style="fill:{color};stroke:{secondaryColor};stroke-width:10;stroke-linejoin:round;" d="M49 50c70 30 104 28 178 2-21 42-21 74 0 116-72 25-101 25-178 0l0-118z"/><text x="130" y="165" style="font-size:100px;fill:#fff;text-anchor:middle">{text}</text></svg>',"flag-triangle":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(35.33 * {scale})" viewBox="0 0 40.5 53"><g transform="translate(-31 -20)"><path fill="{secondaryColor}" d="M34.7,73.3V48.4l34.6-10.1c0.7-0.2,1.2-0.8,1.2-1.5s-0.4-1.4-1-1.7L33.7,20.5c-0.5-0.2-1.1-0.2-1.6,0.2 c-0.5,0.3-0.7,0.8-0.7,1.4v51.2H34.7z"/><polygon points="34.7,24.5 66,36.5 34.7,45 34.7,10" fill="{color}"/></g><text x="11" y="21" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"rounded-square":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(34 * {scale})" height="calc(34 * {scale})" viewBox="0 0 34 34"><g transform="translate(2 2)"><rect x="0" y="0" rx="8" ry="8" width="30" height="30" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17" y="22" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"rounded-square-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(38 * {scale})" height="calc(38 * {scale})" viewBox="0 0 38 38"><g transform="translate(4 4)"><rect x="0" y="0" rx="8" ry="8" width="30" height="30" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19" y="24" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',triangle:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(36 * {scale})" height="calc(36 * {scale})" viewBox="0 0 36 36"><g transform="translate(2 2)"><polygon points="16,0 32,32 0,32 16,0" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17.5" y="30" style="font-size:12px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 40 40"><g transform="translate(4 4)"><polygon points="16,0 32,32 0,32 16,0" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19.5" y="32" style="font-size:12px;fill:#fff;text-anchor:middle">{text}</text></svg>',hexagon:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(35 * {scale})" height="calc(40 * {scale})" viewBox="0 0 35 40"><g transform="translate(2 2)"><path d="M31 9 15.5 0 0 9 0 27 15.5 36 31 27 31 9Z" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17.5" y="25" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(39 * {scale})" height="calc(44 * {scale})" viewBox="0 0 39 44"><g transform="translate(4 4)"><path d="M31 9 15.5 0 0 9 0 27 15.5 36 31 27 31 9Z" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19.5" y="27" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-rounded":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 1100 1100"><g transform="translate(50 50)"><path style="stroke:{secondaryColor};stroke-width:50;fill:{color}" d="M881 210 561 25c-33-19-88-19-121 0L119 210c-33 19-61 67-61 105v370c0 39 27 86 61 105l321 185c33 19 88 19 122 0l321-185c33-19 61-67 61-105V315C942 276 915 229 881 210z"/></g><text x="550" y="700" style="font-size:400px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-rounded-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 1200 1200"><g transform="translate(100 100)"><path style="stroke:{secondaryColor};stroke-width:100;fill:{color}" d="M881 210 561 25c-33-19-88-19-121 0L119 210c-33 19-61 67-61 105v370c0 39 27 86 61 105l321 185c33 19 88 19 122 0l321-185c33-19 61-67 61-105V315C942 276 915 229 881 210z"/></g><text x="600" y="750" style="font-size:400px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(28 * {scale})" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="12,0 0,24 12,17 24,24" stroke-width="2" stroke="{secondaryColor}" fill="{color}"/></g><text x="14" y="17" style="font-size:8px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-arrow-left":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(28 * {scale})" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="24,12 0,0 7,12 0,24" stroke-width="2" stroke="{secondaryColor}" fill="{color}"/></g><text x="14" y="16.5" style="font-size:8px;fill:#fff;text-anchor:middle">{text}</text></svg>',"arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(12.16 * {scale})" height="calc(30.1 * {scale})" viewBox="0 0 902 364"><g fill="{color}" transform="matrix(0,2.4,-2.4,0,897,-930)"><polygon points="902,222 233,222 233,364 0,182 233,0 233,141 902,141 902,222"/></g><text x="450" y="700" style="font-size:900px;fill:#000;text-anchor:middle">{text}</text></svg>',"arrow-up-thin":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(33.33 * {scale})" viewBox="0 0 12 25"><g transform="translate(-136.91823 -751.91998)"><path fill="{color}" d="m148.271 760.71c-1.641-.547-3.186-1.47-4.633-2.769l0 18.07-1.675 0 0-18.07c-1.447 1.299-2.986 2.222-4.616 2.769l0-1.231c2.325-1.596 4.006-3.812 5.043-6.65l.838 0c1.037 2.838 2.718 5.055 5.043 6.65l0 1.231z"/></g><text x="6" y="20" style="font-size:10px;fill:#000;text-anchor:middle">{text}</text></svg>',car:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(21.93 * {scale})" height="calc(40.9 * {scale})" viewBox="0 0 6580 12270"><g transform="translate(0 12270) rotate(-90)"><path fill="{secondaryColor}" d="M7045 6566c-42-13-105-44-105-51 0-2 23-105 50-228 28-123 50-230 50-236 0-8-241-11-907-11-855 0-1145 6-1513 30-85 6-189 13-230 15-41 3-133 10-205 15-286 21-430 32-705 50-953 63-1459 18-2335-205-304-77-746-209-799-238-131-72-221-408-285-1062-34-345-42-532-48-1130-16-1557 108-2532 336-2649 32-17 469-149 676-205 409-110 819-191 1205-238 116-14 224-18 540-18 395 1 494 5 1140 50 1124 79 1224 82 2496 78l641-3-53-237c-29-131-52-238-51-239 1-1 31-14 66-29 56-23 76-26 142-23 67 3 83 7 120 33 23 17 50 41 61 55 10 14 51 117 91 230l73 205 674 3 675 2 90-39c98-43 198-72 315-93 122-21 829-18 990 5 321 45 626 143 849 270 293 168 516 378 704 662 266 402 416 893 467 1527 15 174 8 882-9 998-6 41-18 127-27 190-69 502-253 969-523 1325-79 105-262 284-381 374-189 142-355 229-574 300-336 110-526 139-952 148-457 9-685-23-887-124l-47-24-678-6-678-6-64 179c-79 224-92 253-121 284-67 70-177 97-274 66zm-2752-5073c-23-2-64-2-90 0-26 2-7 3 42 3 50 0 71-1 48-3zm395 0c-21-2-55-2-75 0-21 2-4 4 37 4 41 0 58-2 38-4z"/><path fill="{color}" d="M7043 6498c-13-6-23-19-23-28 0-9 23-117 50-240 28-123 50-230 50-237 0-22-2126-13-2465 10-132 10-400 28-595 42-661 47-824 55-1160 62-435 7-656-8-1040-73-415-70-865-183-1447-365-168-53-272-556-325-1569-16-319-16-1311 0-1630 45-872 129-1366 257-1518 22-26 51-39 172-77 557-177 1122-310 1563-369 271-36 351-40 690-40 361 1 463 6 1165 54 1122 78 1288 83 2337 79 460-2 840-7 843-11 4-4-17-117-47-252l-55-245 39-16c76-30 180-8 224 47 10 13 54 124 98 246l79 222 709 0 709 0 47-24c74-37 219-83 322-101 122-22 606-32 802-16 374 29 658 102 933 238 124 62 271 155 361 230l61 51 6 100c19 278 103 497 247 643 88 89 173 136 278 152l70 11 41 131c116 369 159 673 168 1170 10 584-38 984-167 1397l-40 126-70 12c-193 33-348 175-441 405-56 139-89 302-89 445 0 43-3 47-58 91-290 235-644 384-1068 450-191 29-796 39-974 16-135-18-263-54-368-102l-75-35-701 0-701 0-79 223c-82 232-102 267-163 293-38 16-138 17-170 2zm-2023-820c332-15 1155-12 1835 6 308 8 563 12 566 8 4-4 10-21 13-38 7-30 6-31-92-77-518-244-1197-396-2112-474-295-25-1282-25-1579 0-231 20-473 46-479 51-6 7 49 110 93 171 160 226 416 335 855 365 142 10 539 5 900-12zm3304-263c525-111 899-887 934-1935 19-557-37-1023-172-1435-186-563-521-900-896-899-81 0-158 14-525 92-426 91-431 92-540 146-195 96-287 207-306 368-12 104-11 2985 1 3078 22 170 135 291 365 389 49 21 191 55 480 115 226 47 419 87 430 89 45 10 164 6 229-8zm-5570-485c112-43 197-156 216-291 12-83 13-2623 1-2706-23-158-125-273-270-304-44-9-100-1-542 75-272 47-514 91-539 98-266 68-487 424-594 958-56 280-70 548-40 800 56 484 207 878 414 1081 115 114 122 116 702 218 277 49 524 90 550 90 26 1 72-8 102-19zm2111-3440c1023-44 1884-213 2462-486l113-53-7-33c-3-18-8-35-10-37-2-3-236 1-521 7-993 24-1271 26-1708 11-541-18-1128-18-1249-1-377 56-588 181-734 437-32 55-41 79-32 84 12 8 246 32 491 51 356 28 815 36 1195 20z"/></g><text x="3250" y="8250" style="font-size:3000px;fill:#fff;text-anchor:middle">{text}</text></svg>',checker:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(16 * {scale})" viewBox="0 0 16 16"><pattern id="p" x="0" y="0" width="16" height="16" patternUnits="userSpaceOnUse"><rect fill="{color}" x="0" width="8" height="8" y="0"/><rect fill="{color}" x="8" width="8" height="8" y="8"/></pattern><rect x="0" y="0" width="16" height="16" fill="{secondaryColor}"/><rect x="0" y="0" width="16" height="16" fill="url(#p)"/></svg>',"checker-rotated":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(16 * {scale})" viewBox="0 0 60 60"><rect width="60" height="60" fill="{secondaryColor}"/><rect width="42.42" height="42.42" transform="translate(30 0) rotate(45)" fill="{color}"/></svg>',"zig-zag":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15 * {scale})" height="calc(15 * {scale})" viewBox="0 0 120 120"><rect x="0" y="0" width="120" height="120" fill="{secondaryColor}"/><polygon fill="{color}" points="120 120 60 120 90 90 120 60 120 0 120 0 60 60 0 0 0 60 30 90 60 120 120 120"/></svg>',"zig-zag-vertical":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15 * {scale})" height="calc(15 * {scale})" viewBox="0 0 120 120"><rect x="0" y="0" width="120" height="120" fill="{secondaryColor}"/><polygon fill="{color}" points="120 0 120 60 90 30 60 0 0 0 0 0 60 60 0 120 60 120 90 90 120 60 120 0"/></svg>',"circles-spaced":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 20 20"><defs><pattern id="p" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="2" stroke="none" fill="{color}"/></pattern></defs><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><rect x="0" y="0" width="100" height="100" fill="url(#p)"/></svg>',circles:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(7 * {scale})" height="calc(7 * {scale})" viewBox="0 0 20 20"><defs><pattern id="p" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="6" stroke="none" fill="{color}"/></pattern></defs><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><rect x="0" y="0" width="100" height="100" fill="url(#p)"/></svg>',"diagonal-lines-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"diagonal-lines-down":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(90 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"diagonal-stripes-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"diagonal-stripes-down":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g transform="rotate(90 20 20)" fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"grid-lines":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(14 * {scale})" height="calc(14 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(45 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g><g fill="{color}" transform="rotate(-45 3 3)"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"rotated-grid-lines":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(90 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g><g fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"rotated-grid-stripes":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g transform="rotate(90 20 20)" fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g><g fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"x-fill":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="45.3" height="45.3" fill="{secondaryColor}"/><g fill="{color}"><path d="M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z"/></g></svg>',dots:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(13 * {scale})" height="calc(13 * {scale})" viewBox="0 0 20 20"><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><g fill="{color}"><circle cx="3" cy="3" r="3"/><circle cx="13" cy="13" r="3"/></g></svg>'},n6=(G3.getHighContrastMode=function(){return matchMedia("(-ms-high-contrast: white-on-black)").matches?"dark":matchMedia("(-ms-high-contrast: black-on-white)").matches?"light":matchMedia("(-ms-high-contrast: active)").matches?"dark":matchMedia("(inverted-colors: inverted)").matches?"invert":null},G3);function G3(){}(Ey=Cp=Cp||{})[Ey.LocalStorage=0]="LocalStorage",Ey[Ey.SessionStorage=1]="SessionStorage",(Qu=et=et||{})[Qu.Default=0]="Default",Qu[Qu.Required=1]="Required",Qu[Qu.Array=2]="Array",Qu[Qu.Hidden=4]="Hidden",(od=Sp=Sp||{})[od.AI=0]="AI",od[od.AI_AND_W3C=1]="AI_AND_W3C",od[od.W3C=2]="W3C";var i6=2,st=(vm.isNullOrUndefined=function(t){return t==null},vm.disableCookies=function(){vm._canUseCookies=!1},vm.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(o6,function(t){var n=16*Math.random()|0;return(t==="x"?n:3&n|8).toString(16)})},vm);function vm(){}var Qe,Iy,o6=/[xy]/g,a6=(_m.prototype.addNotificationListener=function(t){this.listeners.push(t)},_m.prototype.removeNotificationListener=function(t){for(var n=this.listeners.indexOf(t);-1<n;)this.listeners.splice(n,1),n=this.listeners.indexOf(t)},_m.prototype.eventsSent=function(t){for(var n=this,a=function(b){h.listeners[b].eventsSent&&setTimeout(function(){return n.listeners[b].eventsSent(t)},0)},h=this,y=0;y<this.listeners.length;++y)a(y)},_m.prototype.eventsDiscarded=function(t,n){for(var a=this,h=function(u){y.listeners[u].eventsDiscarded&&setTimeout(function(){return a.listeners[u].eventsDiscarded(t,n)},0)},y=this,b=0;b<this.listeners.length;++b)h(b)},_m);function _m(){this.listeners=[]}(Iy=Qe=Qe||{})[Iy.CRITICAL=1]="CRITICAL",Iy[Iy.WARNING=2]="WARNING";var s6=0,l6=1,u6=2,c6=3,p6=4,h6=5,d6=6,f6=7,m6=8,g6=9,y6=10,v6=11,_6=12,x6=13,g_=14,y_=15,w6=16,b6=17,ky=18,C6=19,S6=20,T6=22,E6=23,I6=24,k6=25,M6=26,A6=27,L6=28,P6=29,D6=30,z6=31,N6=32,O6=33,R6=35,B6=36,H3=37,F6=38,W3=39,ad=40,j6=41,U6=42,V6=43,q6=45,Tp=46,Z6=47,Y3=48,K3=49,G6=50,H6=52,W6=54,Y6=55,K6=56,$6=57,X6=58,J6=60,Q6=61,eA=62,tA=63,$3=64,rA=66,X3=67,nA=68,iA=69,oA=70,aA=71,v_=(Ul.sanitizeDiagnosticText=function(t){return'"'+t.replace(/\"/g,"")+'"'},Ul.dataType="MessageData",Ul.AiNonUserActionablePrefix="AI (Internal): ",Ul.AiUserActionablePrefix="AI: ",Ul);function Ul(t,n,a,h){a===void 0&&(a=!1),this.messageId=t,this.message=(a?Ul.AiUserActionablePrefix:Ul.AiNonUserActionablePrefix)+t;var y=(n?" message:"+Ul.sanitizeDiagnosticText(n):"")+(h?" props:"+Ul.sanitizeDiagnosticText(JSON.stringify(h)):"");this.message+=y}var __=(sd.prototype.throwInternal=function(t,n,a,h,y){y===void 0&&(y=!1);var b=new v_(n,a,y,h);if(this.enableDebugExceptions())throw b;if(b!==void 0&&b&&b.message!==void 0){if(y){var u=+b.messageId;(!this._messageLogged[u]||this.consoleLoggingLevel()>=Qe.WARNING)&&(this.warnToConsole(b.message),this._messageLogged[u]=!0)}else this.consoleLoggingLevel()>=Qe.WARNING&&this.warnToConsole(b.message);this.logInternalMessage(t,b)}},sd.prototype.warnToConsole=function(t){typeof console<"u"&&console&&(typeof console.warn=="function"?console.warn(t):typeof console.log=="function"&&console.log(t))},sd.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},sd.prototype.logInternalMessage=function(t,n){if(!this._areInternalMessagesThrottled()){var a=!0,h=this.AIInternalMessagePrefix+n.messageId;if(this._messageLogged[h]?a=!1:this._messageLogged[h]=!0,a&&(t<=this.telemetryLoggingLevel()&&(this.queue.push(n),this._messageCount++),this._messageCount==this.maxInternalMessageLimit())){var y="Internal events throttle limit per PageView reached for this app.",b=new v_(E6,y,!1);this.queue.push(b),this.warnToConsole(y)}}},sd.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},sd);function sd(t){this.AIInternalMessagePrefix="AITR_",this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 0},this.telemetryLoggingLevel=function(){return 1},this.maxInternalMessageLimit=function(){return 25},this.queue=[],this._messageCount=0,this._messageLogged={},st.isNullOrUndefined(t)||(st.isNullOrUndefined(t.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return t.loggingLevelConsole}),st.isNullOrUndefined(t.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return t.loggingLevelTelemetry}),st.isNullOrUndefined(t.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return t.maxMessageLimit}),st.isNullOrUndefined(t.enableDebugExceptions)||(this.enableDebugExceptions=function(){return t.enableDebugExceptions}))}var sA=(My.prototype.processTelemetry=function(t){this.channelQueue.forEach(function(n){0<n.length&&n[0].processTelemetry(t)})},Object.defineProperty(My.prototype,"ChannelControls",{get:function(){return this.channelQueue},enumerable:!0,configurable:!0}),My.prototype.initialize=function(t,n,a){var h=this;if(t.isCookieUseDisabled&&st.disableCookies(),this.channelQueue=new Array,t.channels){var y=void 0;t.channels.forEach(function(k){if(k&&0<k.length){k=k.sort(function(W,se){return W.priority-se.priority});for(var G=1;G<k.length;G++)k[G-1].setNextPlugin(k[G]);if(k.forEach(function(W){W.priority<500&&(y=W.identifier),W.initialize(t,n,a)}),y)throw Error("Channel has invalid priority"+y);h.channelQueue.push(k)}})}for(var b=new Array,u=0;u<a.length;u++){var A=a[u];500<A.priority&&b.push(A)}if(0<b.length){for(b=b.sort(function(k,G){return k.priority-G.priority}),u=1;u<b.length;u++)b[u-1].setNextPlugin(b[u]);b.forEach(function(k){return k.initialize(t,n,a)}),this.channelQueue.push(b)}},My);function My(){this.identifier="ChannelControllerPlugin",this.priority=500}var lA=(Vl.prototype.initialize=function(t,n){var a=this;if(this._isInitialized)throw Error("Core should not be initialized more than once");if(!t||st.isNullOrUndefined(t.instrumentationKey))throw Error("Please provide instrumentation key");this.config=t,this._notificationManager=new a6,this.config.extensions=st.isNullOrUndefined(this.config.extensions)?[]:this.config.extensions,this.config.extensionConfig=st.isNullOrUndefined(this.config.extensionConfig)?{}:this.config.extensionConfig,this.config.extensionConfig.NotificationManager=this._notificationManager,this.logger=new __(t),(y=this._extensions).push.apply(y,n.concat(this.config.extensions)),this._extensions.forEach(function(k){var G=!0;if((st.isNullOrUndefined(k)||st.isNullOrUndefined(k.initialize))&&(G=!1),!G)throw Error("Extensions must provide callback to initialize")}),this._extensions.push(this._channelController),this._extensions=this._extensions.sort(function(k,G){var W=typeof k.processTelemetry,se=typeof G.processTelemetry;return W=="function"&&se=="function"?k.priority-G.priority:W=="function"&&se!="function"?1:W!="function"&&se=="function"?-1:void 0});var h={};this._extensions.forEach(function(k){var G=k;G&&G.priority&&(st.isNullOrUndefined(h[G.priority])?h[G.priority]=G.identifier:a.logger.warnToConsole("Two extensions have same priority"+h[G.priority]+", "+G.identifier))});for(var y,b=-1,u=0;u<this._extensions.length-1;u++){var A=this._extensions[u];if(!A||typeof A.processTelemetry=="function"){if(A.priority===this._channelController.priority){b=u+1;break}this._extensions[u].setNextPlugin(this._extensions[u+1])}}if(this._channelController.initialize(this.config,this,this._extensions),this._extensions.forEach(function(k){k&&k.priority<a._channelController.priority&&k.initialize(a.config,a,a._extensions)}),b<this._extensions.length&&this._extensions.splice(b),this.getTransmissionControls().length===0)throw new Error("No channels available");this._isInitialized=!0},Vl.prototype.getTransmissionControls=function(){return this._channelController.ChannelControls},Vl.prototype.track=function(t){if(t===null)throw this._notifyInvalidEvent(t),Error("Invalid telemetry item");t.iKey||(t.iKey=this.config.instrumentationKey),t.time||(t.time=new Date().toISOString()),st.isNullOrUndefined(t.ver)&&(t.ver="4.0"),this._validateTelmetryItem(t),this._extensions.length==0&&this._channelController.processTelemetry(t);for(var n=0;n<this._extensions.length;){if(this._extensions[n].processTelemetry){this._extensions[n].processTelemetry(t);break}n++}},Vl.prototype.addNotificationListener=function(t){this._notificationManager.addNotificationListener(t)},Vl.prototype.removeNotificationListener=function(t){this._notificationManager.removeNotificationListener(t)},Vl.prototype.pollInternalLogs=function(t){var n=this,a=this.config.diagnosticLogInterval;return 0<a||(a=1e4),setInterval(function(){var h=n.logger.queue;h.forEach(function(y){var b={name:t||"InternalMessageId: "+y.messageId,iKey:n.config.instrumentationKey,time:new Date().toISOString(),baseType:v_.dataType,baseData:{message:y.message}};n.track(b)}),h.length=0},a)},Vl.prototype._validateTelmetryItem=function(t){if(st.isNullOrUndefined(t.name))throw this._notifyInvalidEvent(t),Error("telemetry name required");if(st.isNullOrUndefined(t.time))throw this._notifyInvalidEvent(t),Error("telemetry timestamp required");if(st.isNullOrUndefined(t.iKey))throw this._notifyInvalidEvent(t),Error("telemetry instrumentationKey required")},Vl.prototype._notifyInvalidEvent=function(t){this._notificationManager.eventsDiscarded([t],i6)},Vl);function Vl(){this._isInitialized=!1,this._extensions=new Array,this._channelController=new sA}var Xn=(ql.requestContextHeader="Request-Context",ql.requestContextTargetKey="appId",ql.requestContextAppIdFormat="appId=cid-v1:",ql.requestIdHeader="Request-Id",ql.traceParentHeader="traceparent",ql.sdkContextHeader="Sdk-Context",ql.sdkContextHeaderAppIdRequest="appId",ql.requestContextHeaderLowerCase="request-context",ql);function ql(){}var Ar=(Kt.sanitizeKeyAndAddUniqueness=function(t,n,a){var h=n.length,y=Kt.sanitizeKey(t,n);if(y.length!==h){for(var b=0,u=y;a[u]!==void 0;)b++,u=y.substring(0,Kt.MAX_NAME_LENGTH-3)+Kt.padNumber(b);y=u}return y},Kt.sanitizeKey=function(t,n){var a;return n&&(n=Kt.trim(n.toString())).length>Kt.MAX_NAME_LENGTH&&(a=n.substring(0,Kt.MAX_NAME_LENGTH),t.throwInternal(Qe.WARNING,$6,"name is too long.  It has been truncated to "+Kt.MAX_NAME_LENGTH+" characters.",{name:n},!0)),a||n},Kt.sanitizeString=function(t,n,a){var h;return a===void 0&&(a=Kt.MAX_STRING_LENGTH),n&&(a=a||Kt.MAX_STRING_LENGTH,(n=Kt.trim(n)).toString().length>a&&(h=n.toString().substring(0,a),t.throwInternal(Qe.WARNING,Q6,"string value is too long. It has been truncated to "+a+" characters.",{value:n},!0))),h||n},Kt.sanitizeUrl=function(t,n){return Kt.sanitizeInput(t,n,Kt.MAX_URL_LENGTH,rA)},Kt.sanitizeMessage=function(t,n){var a;return n&&n.length>Kt.MAX_MESSAGE_LENGTH&&(a=n.substring(0,Kt.MAX_MESSAGE_LENGTH),t.throwInternal(Qe.WARNING,K6,"message is too long, it has been truncated to "+Kt.MAX_MESSAGE_LENGTH+" characters.",{message:n},!0)),a||n},Kt.sanitizeException=function(t,n){var a;return n&&n.length>Kt.MAX_EXCEPTION_LENGTH&&(a=n.substring(0,Kt.MAX_EXCEPTION_LENGTH),t.throwInternal(Qe.WARNING,H6,"exception is too long, it has been truncated to "+Kt.MAX_EXCEPTION_LENGTH+" characters.",{exception:n},!0)),a||n},Kt.sanitizeProperties=function(t,n){if(n){var a={};for(var h in n){var y=n[h];if(typeof y=="object"&&typeof JSON<"u")try{y=JSON.stringify(y)}catch(b){t.throwInternal(Qe.WARNING,K3,"custom property is not valid",{exception:b},!0)}y=Kt.sanitizeString(t,y,Kt.MAX_PROPERTY_LENGTH),a[h=Kt.sanitizeKeyAndAddUniqueness(t,h,a)]=y}n=a}return n},Kt.sanitizeMeasurements=function(t,n){if(n){var a={};for(var h in n){var y=n[h];a[h=Kt.sanitizeKeyAndAddUniqueness(t,h,a)]=y}n=a}return n},Kt.sanitizeId=function(t,n){return n&&Kt.sanitizeInput(t,n,Kt.MAX_ID_LENGTH,iA).toString()},Kt.sanitizeInput=function(t,n,a,h){var y;return n&&(n=Kt.trim(n)).length>a&&(y=n.substring(0,a),t.throwInternal(Qe.WARNING,h,"input is too long, it has been truncated to "+a+" characters.",{data:n},!0)),y||n},Kt.padNumber=function(t){var n="00"+t;return n.substr(n.length-3)},Kt.trim=function(t){return typeof t!="string"?t:t.replace(/^\s+|\s+$/g,"")},Kt.MAX_NAME_LENGTH=150,Kt.MAX_ID_LENGTH=128,Kt.MAX_PROPERTY_LENGTH=8192,Kt.MAX_STRING_LENGTH=1024,Kt.MAX_URL_LENGTH=2048,Kt.MAX_MESSAGE_LENGTH=32768,Kt.MAX_EXCEPTION_LENGTH=32768,Kt);function Kt(){}var Le=(Je.createDomEvent=function(t){var n=null;return typeof Event=="function"?n=new Event(t):(n=document.createEvent("Event")).initEvent(t,!0,!0),n},Je.disableStorage=function(){Je._canUseLocalStorage=!1,Je._canUseSessionStorage=!1},Je._getLocalStorageObject=function(){return Je.canUseLocalStorage()?Je._getVerifiedStorageObject(Cp.LocalStorage):null},Je._getVerifiedStorageObject=function(t){var n,a,h=null;try{if(typeof window>"u")return null;a=new Date,(h=t===Cp.LocalStorage?window.localStorage:window.sessionStorage).setItem(a,a),n=h.getItem(a)!=a,h.removeItem(a),n&&(h=null)}catch{h=null}return h},Je.isInternalApplicationInsightsEndpoint=function(t){return Je._internalEndpoints.indexOf(t.toLowerCase())!==-1},Je.canUseLocalStorage=function(){return Je._canUseLocalStorage===void 0&&(Je._canUseLocalStorage=!!Je._getVerifiedStorageObject(Cp.LocalStorage)),Je._canUseLocalStorage},Je.getStorage=function(t,n){var a=Je._getLocalStorageObject();if(a!==null)try{return a.getItem(n)}catch(h){Je._canUseLocalStorage=!1,t.throwInternal(Qe.WARNING,l6,"Browser failed read of local storage. "+Je.getExceptionName(h),{exception:Je.dump(h)})}return null},Je.setStorage=function(t,n,a){var h=Je._getLocalStorageObject();if(h!==null)try{return h.setItem(n,a),!0}catch(y){Je._canUseLocalStorage=!1,t.throwInternal(Qe.WARNING,c6,"Browser failed write to local storage. "+Je.getExceptionName(y),{exception:Je.dump(y)})}return!1},Je.removeStorage=function(t,n){var a=Je._getLocalStorageObject();if(a!==null)try{return a.removeItem(n),!0}catch(h){Je._canUseLocalStorage=!1,t.throwInternal(Qe.WARNING,h6,"Browser failed removal of local storage item. "+Je.getExceptionName(h),{exception:Je.dump(h)})}return!1},Je._getSessionStorageObject=function(){return Je.canUseSessionStorage()?Je._getVerifiedStorageObject(Cp.SessionStorage):null},Je.canUseSessionStorage=function(){return Je._canUseSessionStorage===void 0&&(Je._canUseSessionStorage=!!Je._getVerifiedStorageObject(Cp.SessionStorage)),Je._canUseSessionStorage},Je.getSessionStorageKeys=function(){var t=[];if(Je.canUseSessionStorage())for(var n in window.sessionStorage)t.push(n);return t},Je.getSessionStorage=function(t,n){var a=Je._getSessionStorageObject();if(a!==null)try{return a.getItem(n)}catch(h){Je._canUseSessionStorage=!1,t.throwInternal(Qe.WARNING,u6,"Browser failed read of session storage. "+Je.getExceptionName(h),{exception:Je.dump(h)})}return null},Je.setSessionStorage=function(t,n,a){var h=Je._getSessionStorageObject();if(h!==null)try{return h.setItem(n,a),!0}catch(y){Je._canUseSessionStorage=!1,t.throwInternal(Qe.WARNING,p6,"Browser failed write to session storage. "+Je.getExceptionName(y),{exception:Je.dump(y)})}return!1},Je.removeSessionStorage=function(t,n){var a=Je._getSessionStorageObject();if(a!==null)try{return a.removeItem(n),!0}catch(h){Je._canUseSessionStorage=!1,t.throwInternal(Qe.WARNING,d6,"Browser failed removal of session storage item. "+Je.getExceptionName(h),{exception:Je.dump(h)})}return!1},Je.disableCookies=function(){st.disableCookies()},Je.canUseCookies=function(t){if(st._canUseCookies===void 0){st._canUseCookies=!1;try{st._canUseCookies=Je.document.cookie!==void 0}catch(n){t.throwInternal(Qe.WARNING,nA,"Cannot access document.cookie - "+Je.getExceptionName(n),{exception:Je.dump(n)})}}return st._canUseCookies},Je.setCookie=function(t,n,a,h){var y="",b="";h&&(y=";domain="+h),Je.document.location&&Je.document.location.protocol==="https:"&&(b=";secure"),Je.canUseCookies(t)&&(Je.document.cookie=n+"="+a+y+";path=/"+b)},Je.stringToBoolOrDefault=function(t,n){return n===void 0&&(n=!1),t==null?n:t.toString().toLowerCase()==="true"},Je.getCookie=function(t,n){if(Je.canUseCookies(t)){var a="";if(n&&n.length)for(var h=n+"=",y=Je.document.cookie.split(";"),b=0;b<y.length;b++){var u=y[b];if((u=Je.trim(u))&&u.indexOf(h)===0){a=u.substring(h.length,y[b].length);break}}return a}},Je.deleteCookie=function(t,n){Je.canUseCookies(t)&&(Je.document.cookie=n+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},Je.trim=function(t){return typeof t!="string"?t:t.replace(/^\s+|\s+$/g,"")},Je.newId=function(){for(var t="",n=1073741824*Math.random();0<n;)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n%64),n=Math.floor(n/64);return t},Je.random32=function(){return 4294967296*Math.random()|0},Je.generateW3CId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],a="",h=0;h<4;h++)a+=n[15&(t=Je.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var y=n[8+4*Math.random()|0];return a.substr(0,8)+a.substr(9,4)+"4"+a.substr(13,3)+y+a.substr(16,3)+a.substr(19,12)},Je.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"},Je.isError=function(t){return Object.prototype.toString.call(t)==="[object Error]"},Je.isDate=function(t){return Object.prototype.toString.call(t)==="[object Date]"},Je.toISOStringForIE8=function(t){if(Je.isDate(t)){if(Date.prototype.toISOString)return t.toISOString();var n=function(a){var h=String(a);return h.length===1&&(h="0"+h),h};return t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},Je.getIEVersion=function(t){t===void 0&&(t=null);var n=t?t.toLowerCase():navigator.userAgent.toLowerCase();return n.indexOf("msie")!=-1?parseInt(n.split("msie")[1]):null},Je.msToTimeSpan=function(t){(isNaN(t)||t<0)&&(t=0);var n=""+(t=Math.round(t))%1e3,a=""+Math.floor(t/1e3)%60,h=""+Math.floor(t/6e4)%60,y=""+Math.floor(t/36e5)%24,b=Math.floor(t/864e5);return n=n.length===1?"00"+n:n.length===2?"0"+n:n,a=a.length<2?"0"+a:a,h=h.length<2?"0"+h:h,(0<b?b+".":"")+(y=y.length<2?"0"+y:y)+":"+h+":"+a+"."+n},Je.isCrossOriginError=function(t,n,a,h,y){return(t==="Script error."||t==="Script error")&&!y},Je.dump=function(t){var n=Object.prototype.toString.call(t),a=JSON.stringify(t);return n==="[object Error]"&&(a="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'"),n+a},Je.getExceptionName=function(t){return Object.prototype.toString.call(t)==="[object Error]"?t.name:""},Je.addEventHandler=function(t,n){if(typeof window>"u"||!window||typeof t!="string"||typeof n!="function")return!1;var a="on"+t;if(window.addEventListener)window.addEventListener(t,n,!1);else{if(!window.attachEvent)return!1;window.attachEvent(a,n)}return!0},Je.IsBeaconApiSupported=function(){return"sendBeacon"in navigator&&navigator.sendBeacon},Je.getExtension=function(t,n){for(var a=null,h=0;!a&&h<t.length;)t[h]&&t[h].identifier===n&&(a=t[h]),h++;return a},Je.document=typeof document<"u"?document:{},Je._canUseLocalStorage=void 0,Je._canUseSessionStorage=void 0,Je._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],Je.NotSpecified="not_specified",Je);function Je(){}var Ay=(co.parseUrl=function(t){return co.htmlAnchorElement||(co.htmlAnchorElement=co.document.createElement?co.document.createElement("a"):{host:co.parseHost(t)}),co.htmlAnchorElement.href=t,co.htmlAnchorElement},co.getAbsoluteUrl=function(t){var n,a=co.parseUrl(t);return a&&(n=a.href),n},co.getPathName=function(t){var n,a=co.parseUrl(t);return a&&(n=a.pathname),n},co.getCompleteUrl=function(t,n){return t?t.toUpperCase()+" "+n:n},co.parseHost=function(t){var n=t.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return n!=null&&2<n.length&&typeof n[2]=="string"&&0<n[2].length?n[2]:null},co.document=typeof document<"u"?document:{},co);function co(){}var Ly=(Ep.canIncludeCorrelationHeader=function(t,n,a){if(t&&t.disableCorrelationHeaders||!n)return!1;var h=Ay.parseUrl(n).host.toLowerCase();if(!(t&&t.enableCorsCorrelation||h===a))return!1;var y,b=t&&t.correlationHeaderDomains;if(b&&(b.forEach(function(k){var G=new RegExp(k.toLowerCase().replace(/\./g,".").replace(/\*/g,".*"));y=y||G.test(h)}),!y))return!1;var u=t&&t.correlationHeaderExcludedDomains;if(!u||u.length==0)return!0;for(var A=0;A<u.length;A++)if(new RegExp(u[A].toLowerCase().replace(/\./g,".").replace(/\*/g,".*")).test(h))return!1;return!0},Ep.getCorrelationContext=function(t){if(t){var n=Ep.getCorrelationContextValue(t,Xn.requestContextTargetKey);if(n&&n!==Ep.correlationIdPrefix)return n}},Ep.getCorrelationContextValue=function(t,n){if(t)for(var a=t.split(","),h=0;h<a.length;++h){var y=a[h].split("=");if(y.length==2&&y[0]==n)return y[1]}},Ep.correlationIdPrefix="cid-v1:",Ep);function Ep(){}var uA=(J3.ParseDependencyPath=function(t,n,a,h){var y,b=h,u=h;if(n&&0<n.length){var A=Ay.parseUrl(n);if(y=A.host,!b)if(A.pathname!=null){var k=A.pathname.length===0?"/":A.pathname;k.charAt(0)!=="/"&&(k="/"+k),u=A.pathname,b=Ar.sanitizeString(t,a?a+" "+k:k)}else b=Ar.sanitizeString(t,n)}else b=y=h;return{target:y,name:b,data:u}},J3);function J3(){}var to=(x_.Now=typeof window<"u"&&window.performance&&window.performance.now&&window.performance.timing?function(){return window.performance.now()+window.performance.timing.navigationStart}:function(){return new Date().getTime()},x_.GetDuration=function(t,n){var a=null;return t===0||n===0||st.isNullOrUndefined(t)||st.isNullOrUndefined(n)||(a=n-t),a},x_);function x_(){}var Q3,xm="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",w_="ProcessLegacy",eC="http.method",cA=(ze(tC,Q3=function(){}),tC);function tC(){return Q3.call(this)||this}var rC,pA=(ze(nC,rC=function(){this.ver=1,this.sampleRate=100,this.tags={}}),nC);function nC(t,n,a){var h=rC.call(this)||this;return h.name=Ar.sanitizeString(t,a)||Le.NotSpecified,h.data=n,h.time=Le.toISOStringForIE8(new Date),h.aiDataContract={time:et.Required,iKey:et.Required,name:et.Required,sampleRate:function(){return h.sampleRate==100?et.Hidden:et.Required},tags:et.Required,data:et.Required},h}function wm(){}var iC,oC=(ze(aC,iC=wm),aC);function aC(){var t=iC.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}var sC,ec=(ze(Py,sC=oC),Py.envelopeType="Microsoft.ApplicationInsights.{0}.Event",Py.dataType="EventData",Py);function Py(t,n,a,h){var y=sC.call(this)||this;return y.aiDataContract={ver:et.Required,name:et.Required,properties:et.Default,measurements:et.Default},y.name=Ar.sanitizeString(t,n)||Le.NotSpecified,y.properties=Ar.sanitizeProperties(t,a),y.measurements=Ar.sanitizeMeasurements(t,h),y}function hA(){}var lC,dA=(ze(uC,lC=wm),uC);function uC(){var t=lC.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}function fA(){this.hasFullStack=!0,this.parsedStack=[]}var cC,Zl=(ze(tc,cC=dA),tc.CreateFromInterface=function(t,n){var a=n.exceptions&&n.exceptions.map(function(h){return hC.CreateFromInterface(t,h)});return new tc(t,ot({},n,{exceptions:a}))},tc.prototype.toInterface=function(){var t=this.exceptions,n=this.properties,a=this.measurements,h=this.severityLevel,y=this.ver,b=this.problemGroup,u=this.id,A=this.isManual;return{ver:y,exceptions:t instanceof Array&&t.map(function(k){return k.toInterface()})||void 0,severityLevel:h,properties:n,measurements:a,problemGroup:b,id:u,isManual:A}},tc.CreateSimpleException=function(t,n,a,h,y,b){return{exceptions:[{hasFullStack:!0,message:t,stack:y,typeName:n}]}},tc.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",tc.dataType="ExceptionData",tc);function tc(t,n,a,h,y,b){var u=cC.call(this)||this;return u.aiDataContract={ver:et.Required,exceptions:et.Required,severityLevel:et.Default,properties:et.Default,measurements:et.Default},n instanceof Error?(u.exceptions=[new hC(t,n)],u.properties=Ar.sanitizeProperties(t,a),u.measurements=Ar.sanitizeMeasurements(t,h),y&&(u.severityLevel=y),b&&(u.id=b)):(u.exceptions=n.exceptions,u.properties=n.properties,u.measurements=n.measurements,n.severityLevel&&(u.severityLevel=n.severityLevel),n.id&&(u.id=n.id),n.problemGroup&&(u.problemGroup=n.problemGroup),st.isNullOrUndefined(n.ver)||(u.ver=n.ver),st.isNullOrUndefined(n.isManual)||(u.isManual=n.isManual)),u}var pC,hC=(ze(Ip,pC=fA),Ip.prototype.toInterface=function(){var t=this.parsedStack instanceof Array&&this.parsedStack.map(function(n){return n.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:t||void 0}},Ip.CreateFromInterface=function(t,n){var a=n.parsedStack instanceof Array&&n.parsedStack.map(function(h){return b_.CreateFromInterface(h)})||n.parsedStack;return new Ip(t,ot({},n,{parsedStack:a}))},Ip.parseStack=function(t){var n=void 0;if(typeof t=="string"){var a=t.split(`
`);n=[];for(var h=0,y=0,b=0;b<=a.length;b++){var u=a[b];if(b_.regex.test(u)){var A=new b_(a[b],h++);y+=A.sizeInBytes,n.push(A)}}if(32768<y)for(var k=0,G=n.length-1,W=0,se=k,ne=G;k<G;){if(32768<(W+=n[k].sizeInBytes+n[G].sizeInBytes)){var Ee=ne-se+1;n.splice(se,Ee);break}se=k,ne=G,k++,G--}}return n},Ip);function Ip(t,n){var a=pC.call(this)||this;if(a.aiDataContract={id:et.Default,outerId:et.Default,typeName:et.Required,message:et.Required,hasFullStack:et.Default,stack:et.Default,parsedStack:et.Array},n instanceof Error){a.typeName=Ar.sanitizeString(t,n.name)||Le.NotSpecified,a.message=Ar.sanitizeMessage(t,n.message)||Le.NotSpecified;var h=n.stack;a.parsedStack=Ip.parseStack(h),a.stack=Ar.sanitizeException(t,h),a.hasFullStack=Le.isArray(a.parsedStack)&&0<a.parsedStack.length}else a.typeName=n.typeName,a.message=n.message,a.stack=n.stack,a.parsedStack=n.parsedStack,a.hasFullStack=n.hasFullStack;return a}var dC,b_=(ze(Gl,dC=hA),Gl.CreateFromInterface=function(t){return new Gl(t,null)},Gl.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},Gl.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,Gl.baseSize=58,Gl);function Gl(t,n){var a=dC.call(this)||this;if(a.sizeInBytes=0,a.aiDataContract={level:et.Required,method:et.Required,assembly:et.Default,fileName:et.Default,line:et.Default},typeof t=="string"){var h=t;a.level=n,a.method="<no_method>",a.assembly=Le.trim(h),a.fileName="",a.line=0;var y=h.match(Gl.regex);y&&5<=y.length&&(a.method=Le.trim(y[2])||a.method,a.fileName=Le.trim(y[4]),a.line=parseInt(y[5])||0)}else a.level=t.level,a.method=t.method,a.assembly=t.assembly,a.fileName=t.fileName,a.line=t.line,a.sizeInBytes=0;return a.sizeInBytes+=a.method.length,a.sizeInBytes+=a.fileName.length,a.sizeInBytes+=a.assembly.length,a.sizeInBytes+=Gl.baseSize,a.sizeInBytes+=a.level.toString().length,a.sizeInBytes+=a.line.toString().length,a}var fC,C_,Dy,mA=(ze(mC,fC=wm),mC);function mC(){var t=fC.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}(Dy=C_=C_||{})[Dy.Measurement=0]="Measurement",Dy[Dy.Aggregation=1]="Aggregation";var S_,gA=(ze(gC,S_=function(){this.kind=C_.Measurement}),gC);function gC(){var t=S_!==null&&S_.apply(this,arguments)||this;return t.aiDataContract={name:et.Required,kind:et.Default,value:et.Required,count:et.Default,min:et.Default,max:et.Default,stdDev:et.Default},t}var yC,kp=(ze(zy,yC=mA),zy.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",zy.dataType="MetricData",zy);function zy(t,n,a,h,y,b,u){var A=yC.call(this)||this;A.aiDataContract={ver:et.Required,metrics:et.Required,properties:et.Default};var k=new gA;return k.count=0<h?h:void 0,k.max=isNaN(b)||b===null?void 0:b,k.min=isNaN(y)||y===null?void 0:y,k.name=Ar.sanitizeString(t,n)||Le.NotSpecified,k.value=a,A.metrics=[k],A.properties=Ar.sanitizeProperties(t,u),A}var vC,_C=(ze(xC,vC=oC),xC);function xC(){var t=vC.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}var wC,Mp=(ze(Ny,wC=_C),Ny.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",Ny.dataType="PageviewData",Ny);function Ny(t,n,a,h,y,b,u){var A=wC.call(this)||this;return A.aiDataContract={ver:et.Required,name:et.Default,url:et.Default,duration:et.Default,properties:et.Default,measurements:et.Default,id:et.Default},A.id=Ar.sanitizeId(t,u),A.url=Ar.sanitizeUrl(t,a),A.name=Ar.sanitizeString(t,n)||Le.NotSpecified,isNaN(h)||(A.duration=Le.msToTimeSpan(h)),A.properties=Ar.sanitizeProperties(t,y),A.measurements=Ar.sanitizeMeasurements(t,b),A}var bC,yA=(ze(CC,bC=wm),CC);function CC(){var t=bC.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}var SC,Ap=(ze(Oy,SC=yA),Oy.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",Oy.dataType="RemoteDependencyData",Oy);function Oy(t,n,a,h,y,b,u,A,k,G,W,se){k===void 0&&(k="Ajax");var ne=SC.call(this)||this;ne.aiDataContract={id:et.Required,ver:et.Required,name:et.Default,resultCode:et.Default,duration:et.Default,success:et.Default,data:et.Default,target:et.Default,type:et.Default,properties:et.Default,measurements:et.Default,kind:et.Default,value:et.Default,count:et.Default,min:et.Default,max:et.Default,stdDev:et.Default,dependencyKind:et.Default,dependencySource:et.Default,commandName:et.Default,dependencyTypeName:et.Default},ne.id=n,ne.duration=Le.msToTimeSpan(y),ne.success=b,ne.resultCode=u+"",ne.type=Ar.sanitizeString(t,k);var Ee=uA.ParseDependencyPath(t,a,A,h);return ne.data=Ar.sanitizeUrl(t,h)||Ee.data,ne.target=Ar.sanitizeString(t,Ee.target),G&&(ne.target=ne.target+" | "+G),ne.name=Ar.sanitizeString(t,Ee.name),ne.properties=Ar.sanitizeProperties(t,W),ne.measurements=Ar.sanitizeMeasurements(t,se),ne}var TC,vA=(ze(EC,TC=wm),EC);function EC(){var t=TC.call(this)||this;return t.ver=2,t.properties={},t}var IC,ld=(ze(Ry,IC=vA),Ry.envelopeType="Microsoft.ApplicationInsights.{0}.Message",Ry.dataType="MessageData",Ry);function Ry(t,n,a,h){var y=IC.call(this)||this;return y.aiDataContract={ver:et.Required,message:et.Required,severityLevel:et.Default,properties:et.Default},n=n||Le.NotSpecified,y.message=Ar.sanitizeMessage(t,n),y.properties=Ar.sanitizeProperties(t,h),a&&(y.severityLevel=a),y}var kC,_A=(ze(MC,kC=_C),MC);function MC(){var t=kC.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}var AC,ud=(ze(By,AC=_A),By.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",By.dataType="PageviewPerformanceData",By);function By(t,n,a,h,y,b,u){var A=AC.call(this)||this;return A.aiDataContract={ver:et.Required,name:et.Default,url:et.Default,duration:et.Default,perfTotal:et.Default,networkConnect:et.Default,sentRequest:et.Default,receivedResponse:et.Default,domProcessing:et.Default,properties:et.Default,measurements:et.Default},A.url=Ar.sanitizeUrl(t,a),A.name=Ar.sanitizeString(t,n)||Le.NotSpecified,A.properties=Ar.sanitizeProperties(t,y),A.measurements=Ar.sanitizeMeasurements(t,b),u&&(A.domProcessing=u.domProcessing,A.duration=u.duration,A.networkConnect=u.networkConnect,A.perfTotal=u.perfTotal,A.receivedResponse=u.receivedResponse,A.sentRequest=u.sentRequest),A}var LC,T_,el,Lp=(ze(PC,LC=cA),PC);function PC(t,n){var a=LC.call(this)||this;return a.aiDataContract={baseType:et.Required,baseData:et.Required},a.baseType=t,a.baseData=n,a}(el=T_=T_||{})[el.Verbose=0]="Verbose",el[el.Information=1]="Information",el[el.Warning=2]="Warning",el[el.Error=3]="Error",el[el.Critical=4]="Critical";var Fy=(DC.getConfig=function(t,n,a,h){var y;return h===void 0&&(h=!1),y=a&&t.extensionConfig&&t.extensionConfig[a]&&!st.isNullOrUndefined(t.extensionConfig[a][n])?t.extensionConfig[a][n]:t[n],st.isNullOrUndefined(y)?h:y},DC);function DC(){}var zC=function(){this.applicationVersion="ai.application.ver",this.applicationBuild="ai.application.build",this.applicationTypeId="ai.application.typeId",this.applicationId="ai.application.applicationId",this.applicationLayer="ai.application.layer",this.deviceId="ai.device.id",this.deviceIp="ai.device.ip",this.deviceLanguage="ai.device.language",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceFriendlyName="ai.device.friendlyName",this.deviceNetwork="ai.device.network",this.deviceNetworkName="ai.device.networkName",this.deviceOEMName="ai.device.oemName",this.deviceOS="ai.device.os",this.deviceOSVersion="ai.device.osVersion",this.deviceRoleInstance="ai.device.roleInstance",this.deviceRoleName="ai.device.roleName",this.deviceScreenResolution="ai.device.screenResolution",this.deviceType="ai.device.type",this.deviceMachineName="ai.device.machineName",this.deviceVMName="ai.device.vmName",this.deviceBrowser="ai.device.browser",this.deviceBrowserVersion="ai.device.browserVersion",this.locationIp="ai.location.ip",this.locationCountry="ai.location.country",this.locationProvince="ai.location.province",this.locationCity="ai.location.city",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationRootId="ai.operation.rootId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.sessionIsNew="ai.session.isNew",this.userAccountAcquisitionDate="ai.user.accountAcquisitionDate",this.userAccountId="ai.user.accountId",this.userAgent="ai.user.userAgent",this.userId="ai.user.id",this.userStoreRegion="ai.user.storeRegion",this.userAuthUserId="ai.user.authUserId",this.userAnonymousUserAcquisitionDate="ai.user.anonUserAcquisitionDate",this.userAuthenticatedUserAcquisitionDate="ai.user.authUserAcquisitionDate",this.cloudName="ai.cloud.name",this.cloudRole="ai.cloud.role",this.cloudRoleVer="ai.cloud.roleVer",this.cloudRoleInstance="ai.cloud.roleInstance",this.cloudEnvironment="ai.cloud.environment",this.cloudLocation="ai.cloud.location",this.cloudDeploymentUnit="ai.cloud.deploymentUnit",this.internalNodeName="ai.internal.nodeName",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion"},rc=(NC.create=function(t,n,a,h,y,b){if(a=Ar.sanitizeString(h,a)||Le.NotSpecified,st.isNullOrUndefined(t)||st.isNullOrUndefined(n)||st.isNullOrUndefined(a))throw Error("Input doesn't contain all required fields");var u={name:a,time:new Date().toISOString(),iKey:"",ext:b||{},tags:[],data:{},baseType:n,baseData:t};if(!st.isNullOrUndefined(y))for(var A in y)y.hasOwnProperty(A)&&(u.data[A]=y[A]);return u},NC);function NC(){}var qr=(Hl.UserExt="user",Hl.DeviceExt="device",Hl.TraceExt="trace",Hl.WebExt="web",Hl.AppExt="app",Hl.OSExt="os",Hl.SessionExt="ses",Hl.SDKExt="sdk",Hl);function Hl(){}var Nn=new zC,jy="AppInsightsPropertiesPlugin",OC="AppInsightsChannelPlugin",xA=(RC.prototype.trackPageView=function(t,n){var a=this,h=t.name;!st.isNullOrUndefined(h)&&typeof h=="string"||(t.name=window.document&&window.document.title||"");var y=t.uri;if(!st.isNullOrUndefined(y)&&typeof y=="string"||(t.uri=window.location&&window.location.href||""),!this._pageViewPerformanceManager.isPerformanceTimingSupported())return this.appInsights.sendPageViewInternal(t,n),this._channel().forEach(function(W){W.forEach(function(se){return se.flush(!0)})}),void this._logger.throwInternal(Qe.WARNING,k6,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var b=!1,u=void 0,A=this._pageViewPerformanceManager.getPerformanceTiming().navigationStart;u=to.GetDuration(A,+new Date),this._pageViewPerformanceManager.shouldCollectDuration(u)||(u=void 0);var k=void 0;st.isNullOrUndefined(n)||st.isNullOrUndefined(n.duration)||(k=n.duration),!this.overridePageViewDuration&&isNaN(k)||(isNaN(k)&&((n=n||{}).duration=u),this.appInsights.sendPageViewInternal(t,n),this._channel().forEach(function(W){W.forEach(function(se){return se.flush(!0)})}),b=!0),n=n||{};var G=setInterval(function(){try{if(a._pageViewPerformanceManager.isPerformanceTimingDataReady()){clearInterval(G);var W={name:h,uri:y};a._pageViewPerformanceManager.populatePageViewPerformanceEvent(W),W.isValid||b?(b||(n.duration=W.durationMs,a.appInsights.sendPageViewInternal(t,n)),a.pageViewPerformanceSent||(a.appInsights.sendPageViewPerformanceInternal(W,n),a.pageViewPerformanceSent=!0),a._channel().forEach(function(se){se.forEach(function(ne){return ne.flush(!0)})})):(n.duration=u,a.appInsights.sendPageViewInternal(t,n),a._channel().forEach(function(se){se.forEach(function(ne){return ne.flush(!0)})}))}else 6e4<to.GetDuration(A,+new Date)&&(clearInterval(G),b||(n.duration=6e4,a.appInsights.sendPageViewInternal(t,n),a._channel().forEach(function(se){se.forEach(function(ne){return ne.flush(!0)})})))}catch(se){a._logger.throwInternal(Qe.CRITICAL,F6,"trackPageView failed on page load calculation: "+Le.getExceptionName(se),{exception:Le.dump(se)})}},100)},RC);function RC(t,n,a,h){this.pageViewPerformanceSent=!1,this.overridePageViewDuration=!1,this.overridePageViewDuration=n,this.appInsights=t,this._pageViewPerformanceManager=h,a&&(this._channel=function(){return a.getTransmissionControls()},this._logger=a.logger)}var wA=(bm.prototype.trackPreviousPageVisit=function(t,n){try{var a=this.restartPageVisitTimer(t,n);a&&this.pageVisitTimeTrackingHandler(a.pageName,a.pageUrl,a.pageVisitTime)}catch(h){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+Le.dump(h))}},bm.prototype.restartPageVisitTimer=function(t,n){try{var a=this.stopPageVisitTimer();return this.startPageVisitTimer(t,n),a}catch(h){return this._logger.warnToConsole("Call to restart failed: "+Le.dump(h)),null}},bm.prototype.startPageVisitTimer=function(t,n){try{if(Le.canUseSessionStorage()){if(Le.getSessionStorage(this._logger,this.prevPageVisitDataKeyName)!=null)throw new Error("Cannot call startPageVisit consecutively without first calling stopPageVisit");var a=new bA(t,n),h=JSON.stringify(a);Le.setSessionStorage(this._logger,this.prevPageVisitDataKeyName,h)}}catch(y){this._logger.warnToConsole("Call to start failed: "+Le.dump(y))}},bm.prototype.stopPageVisitTimer=function(){try{if(Le.canUseSessionStorage()){var t=Date.now(),n=Le.getSessionStorage(this._logger,this.prevPageVisitDataKeyName);if(n){var a=JSON.parse(n);return a.pageVisitTime=t-a.pageVisitStartTime,Le.removeSessionStorage(this._logger,this.prevPageVisitDataKeyName),a}return null}return null}catch(h){return this._logger.warnToConsole("Stop page visit timer failed: "+Le.dump(h)),null}},bm);function bm(t,n){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=n,this._logger=t}var bA=function(t,n){this.pageVisitStartTime=Date.now(),this.pageName=t,this.pageUrl=n},CA=(cd.prototype.populatePageViewPerformanceEvent=function(t){t.isValid=!1;var n=this.getPerformanceTiming();if(n){var a=to.GetDuration(n.navigationStart,n.loadEventEnd),h=to.GetDuration(n.navigationStart,n.connectEnd),y=to.GetDuration(n.requestStart,n.responseStart),b=to.GetDuration(n.responseStart,n.responseEnd),u=to.GetDuration(n.responseEnd,n.loadEventEnd);a==0?this._logger.throwInternal(Qe.WARNING,y6,"error calculating page view performance.",{total:a,network:h,request:y,response:b,dom:u}):this.shouldCollectDuration(a,h,y,b,u)?a<Math.floor(h)+Math.floor(y)+Math.floor(b)+Math.floor(u)?this._logger.throwInternal(Qe.WARNING,m6,"client performance math error.",{total:a,network:h,request:y,response:b,dom:u}):(t.durationMs=a,t.perfTotal=t.duration=Le.msToTimeSpan(a),t.networkConnect=Le.msToTimeSpan(h),t.sentRequest=Le.msToTimeSpan(y),t.receivedResponse=Le.msToTimeSpan(b),t.domProcessing=Le.msToTimeSpan(u),t.isValid=!0):this._logger.throwInternal(Qe.WARNING,q6,"Invalid page load duration value. Browser perf data won't be sent.",{total:a,network:h,request:y,response:b,dom:u})}},cd.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?window.performance.timing:null},cd.prototype.isPerformanceTimingSupported=function(){return typeof window<"u"&&window.performance&&window.performance.timing},cd.prototype.isPerformanceTimingDataReady=function(){var t=window.performance.timing;return 0<t.domainLookupStart&&0<t.navigationStart&&0<t.responseStart&&0<t.requestStart&&0<t.loadEventEnd&&0<t.responseEnd&&0<t.connectEnd&&0<t.domLoading},cd.prototype.shouldCollectDuration=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=["googlebot","adsbot-google","apis-google","mediapartners-google"],h=navigator.userAgent,y=!1;if(h)for(var b=0;b<a.length;b++)y=y||h.toLowerCase().indexOf(a[b])!==-1;if(y)return!1;for(var u=0;u<t.length;u++)if(t[u]>=this.MAX_DURATION_ALLOWED)return!1;return!0},cd);function cd(t){this.MAX_DURATION_ALLOWED=36e5,t&&(this._logger=t.logger)}var BC="duration",FC=(gn.getDefaultConfig=function(t){return(t=t||{}).sessionRenewalMs=18e5,t.sessionExpirationMs=864e5,t.disableExceptionTracking=Le.stringToBoolOrDefault(t.disableExceptionTracking),t.autoTrackPageVisitTime=Le.stringToBoolOrDefault(t.autoTrackPageVisitTime),t.overridePageViewDuration=Le.stringToBoolOrDefault(t.overridePageViewDuration),(isNaN(t.samplingPercentage)||t.samplingPercentage<=0||100<=t.samplingPercentage)&&(t.samplingPercentage=100),t.isCookieUseDisabled=Le.stringToBoolOrDefault(t.isCookieUseDisabled),t.isStorageUseDisabled=Le.stringToBoolOrDefault(t.isStorageUseDisabled),t.isBrowserLinkTrackingEnabled=Le.stringToBoolOrDefault(t.isBrowserLinkTrackingEnabled),t.enableAutoRouteTracking=Le.stringToBoolOrDefault(t.enableAutoRouteTracking),t.namePrefix=t.namePrefix||"",t},gn.prototype.processTelemetry=function(t){for(var n=!1,a=this._telemetryInitializers.length,h=0;h<a;++h){var y=this._telemetryInitializers[h];if(y)try{if(y.apply(null,[t])===!1){n=!0;break}}catch(b){this._logger.throwInternal(Qe.CRITICAL,$3,"One of telemetry initializers failed, telemetry item will not be sent: "+Le.getExceptionName(b),{exception:Le.dump(b)},!0)}}n||st.isNullOrUndefined(this._nextPlugin)||this._nextPlugin.processTelemetry(t)},gn.prototype.setNextPlugin=function(t){this._nextPlugin=t},gn.prototype.trackEvent=function(t,n){try{var a=rc.create(t,ec.dataType,ec.envelopeType,this._logger,n);this.core.track(a)}catch(h){this._logger.throwInternal(Qe.WARNING,W3,"trackTrace failed, trace will not be collected: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},gn.prototype.startTrackEvent=function(t){try{this._eventTracking.start(t)}catch(n){this._logger.throwInternal(Qe.CRITICAL,P6,"startTrackEvent failed, event will not be collected: "+Le.getExceptionName(n),{exception:Le.dump(n)})}},gn.prototype.stopTrackEvent=function(t,n,a){try{this._eventTracking.stop(t,void 0,n)}catch(h){this._logger.throwInternal(Qe.CRITICAL,D6,"stopTrackEvent failed, event will not be collected: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},gn.prototype.trackTrace=function(t,n){try{var a=rc.create(t,ld.dataType,ld.envelopeType,this._logger,n);this.core.track(a)}catch(h){this._logger.throwInternal(Qe.WARNING,W3,"trackTrace failed, trace will not be collected: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},gn.prototype.trackMetric=function(t,n){try{var a=rc.create(t,kp.dataType,kp.envelopeType,this._logger,n);this.core.track(a)}catch(h){this._logger.throwInternal(Qe.CRITICAL,B6,"trackMetric failed, metric will not be collected: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},gn.prototype.trackPageView=function(t,n){try{var a=t||{};this._pageViewManager.trackPageView(a,ot({},a.properties,a.measurements,n)),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(a.name,a.uri)}catch(h){this._logger.throwInternal(Qe.CRITICAL,H3,"trackPageView failed, page view will not be collected: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},gn.prototype.sendPageViewInternal=function(t,n,a){typeof document<"u"&&(t.refUri=t.refUri===void 0?document.referrer:t.refUri);var h=rc.create(t,Mp.dataType,Mp.envelopeType,this._logger,n,a);this.core.track(h),this._trackAjaxAttempts=0},gn.prototype.sendPageViewPerformanceInternal=function(t,n,a){var h=rc.create(t,ud.dataType,ud.envelopeType,this._logger,n,a);this.core.track(h)},gn.prototype.trackPageViewPerformance=function(t,n){try{this._pageViewPerformanceManager.populatePageViewPerformanceEvent(t),this.sendPageViewPerformanceInternal(t,n)}catch(a){this._logger.throwInternal(Qe.CRITICAL,H3,"trackPageViewPerformance failed, page view will not be collected: "+Le.getExceptionName(a),{exception:Le.dump(a)})}},gn.prototype.startTrackPage=function(t){try{typeof t!="string"&&(t=window.document&&window.document.title||""),this._pageTracking.start(t)}catch(n){this._logger.throwInternal(Qe.CRITICAL,z6,"startTrackPage failed, page view may not be collected: "+Le.getExceptionName(n),{exception:Le.dump(n)})}},gn.prototype.stopTrackPage=function(t,n,a,h){try{typeof t!="string"&&(t=window.document&&window.document.title||""),typeof n!="string"&&(n=window.location&&window.location.href||""),this._pageTracking.stop(t,n,a,h),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(t,n)}catch(y){this._logger.throwInternal(Qe.CRITICAL,N6,"stopTrackPage failed, page view will not be collected: "+Le.getExceptionName(y),{exception:Le.dump(y)})}},gn.prototype.sendExceptionInternal=function(t,n,a){var h=new Zl(this._logger,t.exception||new Error(Le.NotSpecified),t.properties,t.measurements,t.severityLevel,t.id).toInterface(),y=rc.create(h,Zl.dataType,Zl.envelopeType,this._logger,n,a);this.core.track(y)},gn.prototype.trackException=function(t,n){try{this.sendExceptionInternal(t,n)}catch(a){this._logger.throwInternal(Qe.CRITICAL,R6,"trackException failed, exception will not be collected: "+Le.getExceptionName(a),{exception:Le.dump(a)})}},gn.prototype._onerror=function(t){try{var n={url:t&&t.url||document.URL,lineNumber:t.lineNumber,columnNumber:t.columnNumber,message:t.message};if(Le.isCrossOriginError(t.message,t.url,t.lineNumber,t.columnNumber,t.error))this._sendCORSException(n.url);else{if(!Le.isError(t.error)){var a="window.onerror@"+n.url+":"+t.lineNumber+":"+(t.columnNumber||0);t.error=new Error(t.message),t.error.stack=a}this.trackException({exception:t.error,severityLevel:T_.Error},n)}}catch(y){var h=t.error?t.error.name+", "+t.error.message:"null";this._logger.throwInternal(Qe.CRITICAL,v6,"_onError threw exception while logging error, error will not be collected: "+Le.getExceptionName(y),{exception:Le.dump(y),errorString:h})}},gn.prototype.addTelemetryInitializer=function(t){this._telemetryInitializers.push(t)},gn.prototype._initialize=function(t,n,a){var h=this;if(!this._isInitialized){if(st.isNullOrUndefined(n))throw Error("Error initializing");this.core=n,this._logger=n.logger,this._globalconfig={instrumentationKey:t.instrumentationKey,endpointUrl:t.endpointUrl||"https://dc.services.visualstudio.com/v2/track"},this.config=t.extensionConfig&&t.extensionConfig[this.identifier]?t.extensionConfig[this.identifier]:{};var y=gn.getDefaultConfig();if(y!==void 0){for(var b in y)this.config[b]=Fy.getConfig(t,b,this.identifier,y[b]);if(this._globalconfig)for(var b in y)this._globalconfig[b]===void 0&&(this._globalconfig[b]=y[b])}this.config.isCookieUseDisabled&&Le.disableCookies(),this.config.isStorageUseDisabled&&Le.disableStorage();var u={instrumentationKey:function(){return t.instrumentationKey},accountId:function(){return h.config.accountId||t.accountId},sessionRenewalMs:function(){return h.config.sessionRenewalMs||t.sessionRenewalMs},sessionExpirationMs:function(){return h.config.sessionExpirationMs||t.sessionExpirationMs},sampleRate:function(){return h.config.samplingPercentage||t.samplingPercentage},cookieDomain:function(){return h.config.cookieDomain||t.cookieDomain},sdkExtension:function(){return h.config.sdkExtension||t.sdkExtension},isBrowserLinkTrackingEnabled:function(){return h.config.isBrowserLinkTrackingEnabled||t.isBrowserLinkTrackingEnabled},appId:function(){return h.config.appId||t.appId}};this._pageViewPerformanceManager=new CA(this.core),this._pageViewManager=new xA(this,this.config.overridePageViewDuration,this.core,this._pageViewPerformanceManager),this._pageVisitTimeManager=new wA(this._logger,function(ne,Ee,Ge){return h.trackPageVisitTime(ne,Ee,Ge)}),this._telemetryInitializers=[],this._addDefaultTelemetryInitializers(u),this._eventTracking=new jC(this._logger,"trackEvent"),this._eventTracking.action=function(ne,Ee,Ge,pt){(pt=pt||{})[BC]=Ge.toString(),h.trackEvent({name:ne,properties:pt})},this._pageTracking=new jC(this._logger,"trackPageView"),this._pageTracking.action=function(ne,Ee,Ge,pt,Wt){st.isNullOrUndefined(pt)&&(pt={}),pt[BC]=Ge.toString();var nt={name:ne,uri:Ee,properties:pt,measurements:Wt};h.sendPageViewInternal(nt)};var A,k,G=this;if(this.config.disableExceptionTracking===!1&&!this.config.autoExceptionInstrumented){var W=window.onerror;window.onerror=function(ne,Ee,Ge,pt,Wt){var nt=W&&W(ne,Ee,Ge,pt,Wt);return nt!==!0&&G._onerror({message:ne,url:Ee,lineNumber:Ge,columnNumber:pt,error:Wt}),nt},this.config.autoExceptionInstrumented=!0}if(this.config.enableAutoRouteTracking===!0&&typeof history=="object"&&typeof history.pushState=="function"&&typeof history.replaceState=="function"&&typeof window=="object"&&typeof Event<"u"){var se=this;a.forEach(function(ne){ne.identifier===jy&&(h._properties=ne)}),history.pushState=(k=history.pushState,function(){var ne=k.apply(this,arguments);return window.dispatchEvent(Le.createDomEvent(se.config.namePrefix+"pushState")),window.dispatchEvent(Le.createDomEvent(se.config.namePrefix+"locationchange")),ne}),history.replaceState=(A=history.replaceState,function(){var ne=A.apply(this,arguments);return window.dispatchEvent(Le.createDomEvent(se.config.namePrefix+"replaceState")),window.dispatchEvent(Le.createDomEvent(se.config.namePrefix+"locationchange")),ne}),window.addEventListener(se.config.namePrefix+"popstate",function(){window.dispatchEvent(Le.createDomEvent(se.config.namePrefix+"locationchange"))}),window.addEventListener(se.config.namePrefix+"locationchange",function(){se._properties&&se._properties.context&&se._properties.context.telemetryTrace&&(se._properties.context.telemetryTrace.traceID=Le.generateW3CId(),se._properties.context.telemetryTrace.name=window.location&&window.location.pathname||"_unknown_"),h._currUri&&(h._prevUri=h._currUri),h._currUri=window.location&&window.location.href||"",setTimeout(function(ne){se.trackPageView({refUri:ne,properties:{duration:0}})}.bind(h,h._prevUri),se.autoRoutePVDelay)})}this._isInitialized=!0}},gn.prototype.trackPageVisitTime=function(t,n,a){var h={PageName:t,PageUrl:n};this.trackMetric({name:"PageVisitTime",average:a,max:a,min:a,sampleCount:1},h)},gn.prototype._addDefaultTelemetryInitializers=function(t){if(!t.isBrowserLinkTrackingEnabled()){var n=["/browserLinkSignalR/","/__browserLink/"];this._addTelemetryInitializer(function(a){if(a.baseType===Ap.dataType){var h=a.baseData;if(h){for(var y=0;y<n.length;y++)if(h.target&&0<=h.target.indexOf(n[y]))return!1}}return!0})}},gn.prototype._addTelemetryInitializer=function(t){this._telemetryInitializers.push(t)},gn.prototype._sendCORSException=function(t){var n={message:"Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",url:t,lineNumber:0,columnNumber:0,error:void 0},a=rc.create(n,Zl.dataType,Zl.envelopeType,this._logger,{url:t});this.core.track(a)},gn.Version="2.2.2",gn);function gn(){this.identifier="ApplicationInsightsAnalytics",this.priority=180,this.autoRoutePVDelay=500,this._isInitialized=!1,this._trackAjaxAttempts=0,this._prevUri=typeof window=="object"&&window.location&&window.location.href||"",this.initialize=this._initialize.bind(this)}var jC=(E_.prototype.start=function(t){this._events[t]!==void 0&&this._logger.throwInternal(Qe.WARNING,eA,"start was called more than once for this event without calling stop.",{name:this._name,key:t},!0),this._events[t]=+new Date},E_.prototype.stop=function(t,n,a,h){var y=this._events[t];if(isNaN(y))this._logger.throwInternal(Qe.WARNING,tA,"stop was called without a corresponding start.",{name:this._name,key:t},!0);else{var b=+new Date,u=to.GetDuration(y,b);this.action(t,n,u,a,h)}delete this._events[t],this._events[t]=void 0},E_);function E_(t,n){this._name=n,this._events={},this._logger=t}var SA=(nc.prototype.enqueue=function(t){this._buffer.push(t)},nc.prototype.count=function(){return this._buffer.length},nc.prototype.clear=function(){this._buffer.length=0},nc.prototype.getItems=function(){return this._buffer.slice(0)},nc.prototype.batchPayloads=function(t){return t&&0<t.length?this._config.emitLineDelimitedJson()?t.join(`
`):"["+t.join(",")+"]":null},nc.prototype.markAsSent=function(t){this.clear()},nc.prototype.clearSent=function(t){},nc);function nc(t){this._config=t,this._buffer=[]}var TA=(zr.prototype.enqueue=function(t){this._buffer.length>=zr.MAX_BUFFER_SIZE?this._bufferFullMessageSent||(this._logger.throwInternal(Qe.WARNING,X3,"Maximum buffer size reached: "+this._buffer.length,!0),this._bufferFullMessageSent=!0):(this._buffer.push(t),this.setBuffer(zr.BUFFER_KEY,this._buffer))},zr.prototype.count=function(){return this._buffer.length},zr.prototype.clear=function(){this._buffer.length=0,this.setBuffer(zr.BUFFER_KEY,[]),this.setBuffer(zr.SENT_BUFFER_KEY,[]),this._bufferFullMessageSent=!1},zr.prototype.getItems=function(){return this._buffer.slice(0)},zr.prototype.batchPayloads=function(t){return t&&0<t.length?this._config.emitLineDelimitedJson()?t.join(`
`):"["+t.join(",")+"]":null},zr.prototype.markAsSent=function(t){this._buffer=this.removePayloadsFromBuffer(t,this._buffer),this.setBuffer(zr.BUFFER_KEY,this._buffer);var n=this.getBuffer(zr.SENT_BUFFER_KEY);n instanceof Array&&t instanceof Array&&((n=n.concat(t)).length>zr.MAX_BUFFER_SIZE&&(this._logger.throwInternal(Qe.CRITICAL,X3,"Sent buffer reached its maximum size: "+n.length,!0),n.length=zr.MAX_BUFFER_SIZE),this.setBuffer(zr.SENT_BUFFER_KEY,n))},zr.prototype.clearSent=function(t){var n=this.getBuffer(zr.SENT_BUFFER_KEY);n=this.removePayloadsFromBuffer(t,n),this.setBuffer(zr.SENT_BUFFER_KEY,n)},zr.prototype.removePayloadsFromBuffer=function(t,n){var a=[];for(var h in n){var y=!1;for(var b in t)if(t[b]===n[h]){y=!0;break}y||a.push(n[h])}return a},zr.prototype.getBuffer=function(t){var n=t;try{n=this._config.namePrefix&&this._config.namePrefix()?this._config.namePrefix()+"_"+n:n;var a=Le.getSessionStorage(this._logger,n);if(a){var h=JSON.parse(a);if(h)return h}}catch(y){this._logger.throwInternal(Qe.CRITICAL,U6," storage key: "+n+", "+Le.getExceptionName(y),{exception:Le.dump(y)})}return[]},zr.prototype.setBuffer=function(t,n){var a=t;try{a=this._config.namePrefix&&this._config.namePrefix()?this._config.namePrefix()+"_"+a:a;var h=JSON.stringify(n);Le.setSessionStorage(this._logger,a,h)}catch(y){Le.setSessionStorage(this._logger,a,JSON.stringify([])),this._logger.throwInternal(Qe.WARNING,j6," storage key: "+a+", "+Le.getExceptionName(y)+". Buffer cleared",{exception:Le.dump(y)})}},zr.BUFFER_KEY="AI_buffer",zr.SENT_BUFFER_KEY="AI_sentBuffer",zr.MAX_BUFFER_SIZE=2e3,zr);function zr(t,n){this._bufferFullMessageSent=!1,this._logger=t,this._config=n;var a=this.getBuffer(zr.BUFFER_KEY),h=this.getBuffer(zr.SENT_BUFFER_KEY);this._buffer=a.concat(h),this._buffer.length>zr.MAX_BUFFER_SIZE&&(this._buffer.length=zr.MAX_BUFFER_SIZE),this.setBuffer(zr.SENT_BUFFER_KEY,[]),this.setBuffer(zr.BUFFER_KEY,this._buffer)}var li=(ic.extractProperties=function(t){var n=null;for(var a in t)if(t.hasOwnProperty(a)){var h=t[a];typeof h!="number"&&((n=n||{})[a]=h)}return n},ic.extractPropsAndMeasurements=function(t,n,a){if(!st.isNullOrUndefined(t)){for(var h in t)if(t.hasOwnProperty(h)){var y=t[h];typeof y=="number"?a[h]=y:n[h]=typeof y=="string"?y:JSON.stringify(y)}}},ic.createEnvelope=function(t,n,a,h){var y=new pA(t,h,n);y.iKey=a.iKey;var b=a.iKey.replace(/-/g,"");return y.name=y.name.replace("{0}",b),ic.extractPartAExtensions(a,y),a.tags||(a.tags=[]),y},ic.extractPartAExtensions=function(t,n){if(n.tags||(n.tags={}),t.ext||(t.ext={}),t.tags||(t.tags=[]),t.ext.user){t.ext.user.authId&&(n.tags[Nn.userAuthUserId]=t.ext.user.authId);var a=t.ext.user.id||t.ext.user.localId;a&&(n.tags[Nn.userId]=a)}if(t.ext.app&&t.ext.app.sesId&&(n.tags[Nn.sessionId]=t.ext.app.sesId),t.ext.device&&((t.ext.device.id||t.ext.device.localId)&&(n.tags[Nn.deviceId]=t.ext.device.id||t.ext.device.localId),t.ext.device.deviceClass&&(n.tags[Nn.deviceType]=t.ext.device.deviceClass),t.ext.device.ip&&(n.tags[Nn.deviceIp]=t.ext.device.ip)),t.ext.web){var h=t.ext.web;h.browserLang&&(n.tags[Nn.deviceLanguage]=h.browserLang),h.browserVer&&(n.tags[Nn.deviceBrowserVersion]=h.browserVer),h.browser&&(n.tags[Nn.deviceBrowser]=h.browser),n.data=n.data||{},n.data.baseData=n.data.baseData||{},n.data.baseData.properties=n.data.baseData.properties||{},h.domain&&(n.data.baseData.properties.domain=h.domain),h.isManual&&(n.data.baseData.properties.isManual=h.isManual.toString()),h.screenRes&&(n.data.baseData.properties.screenRes=h.screenRes),h.userConsent&&(n.data.baseData.properties.userConsent=h.userConsent.toString())}t.ext.device&&t.ext.device.model&&(n.tags[Nn.deviceModel]=t.ext.device.model),t.ext.os&&t.ext.os.name&&(n.tags[Nn.deviceOS]=t.ext.os.name),t.ext.device&&t.ext.device.deviceType&&(n.tags[Nn.deviceType]=t.ext.device.deviceType),t.ext.trace&&(t.ext.trace.parentID&&(n.tags[Nn.operationParentId]=t.ext.trace.parentID),t.ext.trace.name&&(n.tags[Nn.operationName]=t.ext.trace.name),t.ext.trace.traceID&&(n.tags[Nn.operationId]=t.ext.trace.traceID));for(var y={},b=function(k){var G=t.tags[k];Object.keys(G).forEach(function(W){y[W]=G[W]}),t.tags.splice(k,1)},u=t.tags.length-1;0<=u;u--)b(u);for(var A in t.tags)y[A]=t.tags[A];n.tags=ot({},n.tags,y),n.tags[Nn.internalSdkVersion]||(n.tags[Nn.internalSdkVersion]="javascript:"+ic.Version)},ic.Version="2.2.2",ic);function ic(){}var I_,EA=(ze(Cm,I_=li),Cm.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=n.baseData.measurements||{},h=n.baseData.properties||{};li.extractPropsAndMeasurements(n.data,h,a);var y=n.baseData;if(st.isNullOrUndefined(y))return t.warnToConsole("Invalid input for dependency data"),null;var b=y.id,u=y.target,A=y.name,k=y.duration,G=y.success,W=y.responseCode,se=y.type,ne=y.correlationContext,Ee=y.properties&&y.properties[eC]?y.properties[eC]:"GET",Ge=new Ap(t,b,u,A,k,G,W,Ee,se,ne,h,a),pt=new Lp(Ap.dataType,Ge);return li.createEnvelope(t,Ap.envelopeType,n,pt)},Cm.DependencyEnvelopeCreator=new Cm,Cm);function Cm(){return I_!==null&&I_.apply(this,arguments)||this}var k_,UC=(ze(Sm,k_=li),Sm.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a={},h={};n.baseType!==ec.dataType&&(a.baseTypeSource=n.baseType),n.baseType===ec.dataType?(a=n.baseData.properties||{},h=n.baseData.measurements||{}):n.baseData&&li.extractPropsAndMeasurements(n.baseData,a,h),li.extractPropsAndMeasurements(n.data,a,h);var y=n.baseData.name,b=new ec(t,y,a,h),u=new Lp(ec.dataType,b);return li.createEnvelope(t,ec.envelopeType,n,u)},Sm.EventEnvelopeCreator=new Sm,Sm);function Sm(){return k_!==null&&k_.apply(this,arguments)||this}var M_,IA=(ze(Tm,M_=li),Tm.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=n.baseData,h=Zl.CreateFromInterface(t,a),y=new Lp(Zl.dataType,h);return li.createEnvelope(t,Zl.envelopeType,n,y)},Tm.ExceptionEnvelopeCreator=new Tm,Tm);function Tm(){return M_!==null&&M_.apply(this,arguments)||this}var A_,kA=(ze(Em,A_=li),Em.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=n.baseData.properties||{},h=li.extractProperties(n.data);h=ot({},a,h);var y=n.baseData.name,b=n.baseData.average,u=n.baseData.sampleCount,A=n.baseData.min,k=n.baseData.max,G=new kp(t,y,b,u,A,k,h),W=new Lp(kp.dataType,G);return li.createEnvelope(t,kp.envelopeType,n,W)},Em.MetricEnvelopeCreator=new Em,Em);function Em(){return A_!==null&&A_.apply(this,arguments)||this}var L_,MA=(ze(Im,L_=li),Im.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=void 0;st.isNullOrUndefined(n.baseData)||st.isNullOrUndefined(n.baseData.properties)||st.isNullOrUndefined(n.baseData.properties.duration)?st.isNullOrUndefined(n.data)||st.isNullOrUndefined(n.data.duration)||(a=n.data.duration,delete n.data.duration):(a=n.baseData.properties.duration,delete n.baseData.properties.duration);var h,y=n.baseData;n.ext&&n.ext.trace&&n.ext.trace.traceID&&(h=n.ext.trace.traceID);var b=y.id||h,u=y.name,A=y.uri,k=y.properties||{},G=y.measurements||{};if(st.isNullOrUndefined(y.refUri)||(k.refUri=y.refUri),st.isNullOrUndefined(y.pageType)||(k.pageType=y.pageType),st.isNullOrUndefined(y.isLoggedIn)||(k.isLoggedIn=y.isLoggedIn.toString()),!st.isNullOrUndefined(y.properties)){var W=y.properties;for(var se in W)W.hasOwnProperty(se)&&(k[se]=W[se])}li.extractPropsAndMeasurements(n.data,k,G);var ne=new Mp(t,u,A,a,k,G,b),Ee=new Lp(Mp.dataType,ne);return li.createEnvelope(t,Mp.envelopeType,n,Ee)},Im.PageViewEnvelopeCreator=new Im,Im);function Im(){return L_!==null&&L_.apply(this,arguments)||this}var P_,AA=(ze(km,P_=li),km.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=n.baseData,h=a.name,y=a.uri||a.url,b=a.properties||{},u=a.measurements||{};li.extractPropsAndMeasurements(n.data,b,u);var A=new ud(t,h,y,void 0,b,u,a),k=new Lp(ud.dataType,A);return li.createEnvelope(t,ud.envelopeType,n,k)},km.PageViewPerformanceEnvelopeCreator=new km,km);function km(){return P_!==null&&P_.apply(this,arguments)||this}var D_,LA=(ze(Mm,D_=li),Mm.prototype.Create=function(t,n){this._logger=t,st.isNullOrUndefined(n.baseData)&&this._logger.throwInternal(Qe.CRITICAL,Tp,"telemetryItem.baseData cannot be null.");var a=n.baseData.message,h=n.baseData.severityLevel,y=li.extractProperties(n.data),b=ot({},y,n.baseData.properties),u=new ld(t,a,h,b),A=new Lp(ld.dataType,u);return li.createEnvelope(t,ld.envelopeType,n,A)},Mm.TraceEnvelopeCreator=new Mm,Mm);function Mm(){return D_!==null&&D_.apply(this,arguments)||this}var PA=(Am.prototype.serialize=function(t){var n=this._serializeObject(t,"root");return JSON.stringify(n)},Am.prototype._serializeObject=function(t,n){var a="__aiCircularRefCheck",h={};if(!t)return this._logger.throwInternal(Qe.CRITICAL,Y3,"cannot serialize object because it is null or undefined",{name:n},!0),h;if(t[a])return this._logger.throwInternal(Qe.WARNING,G6,"Circular reference detected while serializing object",{name:n},!0),h;if(!t.aiDataContract){if(n==="measurements")h=this._serializeStringMap(t,"number",n);else if(n==="properties")h=this._serializeStringMap(t,"string",n);else if(n==="tags")h=this._serializeStringMap(t,"string",n);else if(Le.isArray(t))h=this._serializeArray(t,n);else{this._logger.throwInternal(Qe.WARNING,K3,"Attempting to serialize an object which does not implement ISerializable",{name:n},!0);try{JSON.stringify(t),h=t}catch(ne){this._logger.throwInternal(Qe.CRITICAL,Y3,ne&&typeof ne.toString=="function"?ne.toString():"Error serializing object",null,!0)}}return h}for(var y in t[a]=!0,t.aiDataContract){var b,u=t.aiDataContract[y],A=typeof u=="function"?u()&et.Required:u&et.Required,k=typeof u=="function"?u()&et.Hidden:u&et.Hidden,G=u&et.Array,W=t[y]!==void 0,se=typeof t[y]=="object"&&t[y]!==null;!A||W||G?k||(b=se?G?this._serializeArray(t[y],y):this._serializeObject(t[y],y):t[y])!==void 0&&(h[y]=b):this._logger.throwInternal(Qe.CRITICAL,I6,"Missing required field specification. The field is required but not present on source",{field:y,name:n})}return delete t[a],h},Am.prototype._serializeArray=function(t,n){var a=void 0;if(t)if(Le.isArray(t)){a=[];for(var h=0;h<t.length;h++){var y=t[h],b=this._serializeObject(y,n+"["+h+"]");a.push(b)}}else this._logger.throwInternal(Qe.CRITICAL,W6,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:n},!0);return a},Am.prototype._serializeStringMap=function(t,n,a){var h=void 0;if(t)for(var y in h={},t){var b=t[y];if(n==="string")b===void 0?h[y]="undefined":b===null?h[y]="null":b.toString?h[y]=b.toString():h[y]="invalid field: toString() is not defined.";else if(n==="number")if(b===void 0)h[y]="undefined";else if(b===null)h[y]="null";else{var u=parseFloat(b);isNaN(u)?h[y]="NaN":h[y]=u}else h[y]="invalid field: "+a+" is of unknown type.",this._logger.throwInternal(Qe.CRITICAL,h[y],null,!0)}return h},Am);function Am(t){this._logger=t}function Pp(){this._onlineStatus=!0;try{typeof window>"u"?this.isListening=!1:window&&window.addEventListener?(window.addEventListener("online",this._setOnline.bind(this),!1),window.addEventListener("offline",this._setOffline.bind(this),!1),this.isListening=!0):document&&document.body?(document.body.ononline=this._setOnline.bind(this),document.body.onoffline=this._setOffline.bind(this),this.isListening=!0):document?(document.ononline=this._setOnline.bind(this),document.onoffline=this._setOffline.bind(this),this.isListening=!0):this.isListening=!1}catch{this.isListening=!1}}var VC=(Pp.prototype._setOnline=function(){this._onlineStatus=!0},Pp.prototype._setOffline=function(){this._onlineStatus=!1},Pp.prototype.isOnline=function(){return this.isListening?this._onlineStatus:!(navigator&&!st.isNullOrUndefined(navigator.onLine))||navigator.onLine},Pp.prototype.isOffline=function(){return!this.isOnline()},Pp.Offline=new Pp,Pp).Offline,DA=(Dp.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/Dp.INT_MAX_VALUE*100},Dp.prototype.getHashCode=function(t){if(t=="")return 0;for(;t.length<Dp.MIN_INPUT_LENGTH;)t=t.concat(t);for(var n=5381,a=0;a<t.length;++a)n=(n<<5)+n+t.charCodeAt(a),n&=n;return Math.abs(n)},Dp.INT_MAX_VALUE=2147483647,Dp.MIN_INPUT_LENGTH=8,Dp);function Dp(){}var zA=(qC.prototype.getSamplingScore=function(t){return t.tags&&t.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(t.tags[this.keys.userId]):t.ext&&t.ext.user&&t.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(t.ext.user.id):t.tags&&t.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(t.tags[this.keys.operationId]):t.ext&&t.ext.telemetryTrace&&t.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(t.ext.telemetryTrace.traceID):100*Math.random()},qC);function qC(){this.hashCodeGeneragor=new DA,this.keys=new zC}var NA=(ZC.prototype.isSampledIn=function(t){var n=this.sampleRate;return n==null||100<=n||t.baseType===kp.dataType||this.samplingScoreGenerator.getSamplingScore(t)<n},ZC);function ZC(t,n){this.INT_MAX_VALUE=2147483647,st.isNullOrUndefined(n)?this._logger=new __:this._logger=n,(100<t||t<0)&&(this._logger.throwInternal(Qe.WARNING,X6,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:t},!0),this.sampleRate=100),this.sampleRate=t,this.samplingScoreGenerator=new zA}var OA=(Lr.prototype.pause=function(){throw new Error("Method not implemented.")},Lr.prototype.resume=function(){throw new Error("Method not implemented.")},Lr.prototype.flush=function(){try{this.triggerSend()}catch(t){this._logger.throwInternal(Qe.CRITICAL,T6,"flush failed, telemetry will not be collected: "+Le.getExceptionName(t),{exception:Le.dump(t)})}},Lr.prototype.onunloadFlush=function(){if(this._config.onunloadDisableBeacon()!==!1&&this._config.isBeaconApiDisabled()!==!1||!Le.IsBeaconApiSupported())this.flush();else try{this.triggerSend(!0,this._beaconSender)}catch(t){this._logger.throwInternal(Qe.CRITICAL,S6,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Le.getExceptionName(t),{exception:Le.dump(t)})}},Lr.prototype.teardown=function(){throw new Error("Method not implemented.")},Lr.prototype.initialize=function(t,n,a){var h=this;this._logger=n.logger,this._serializer=new PA(n.logger),this._consecutiveErrors=0,this._retryAt=null,this._lastSend=0,this._sender=null;var y=Lr._getDefaultAppInsightsChannelConfig();function b(k){u._config[k]=function(){return Fy.getConfig(t,k,h.identifier,y[k]())}}this._config=Lr._getEmptyAppInsightsChannelConfig();var u=this;for(var A in y)b(A);this._buffer=this._config.enableSessionStorageBuffer&&Le.canUseSessionStorage()?new TA(this._logger,this._config):new SA(this._config),this._sample=new NA(this._config.samplingPercentage(),this._logger),!this._config.isBeaconApiDisabled()&&Le.IsBeaconApiSupported()?this._sender=this._beaconSender:typeof XMLHttpRequest<"u"&&("withCredentials"in new XMLHttpRequest?(this._sender=this._xhrSender,this._XMLHttpRequestSupported=!0):typeof XDomainRequest<"u"&&(this._sender=this._xdrSender))},Lr.prototype.processTelemetry=function(t){var n=this;try{if(this._config.disableTelemetry())return;if(!t)return void this._logger.throwInternal(Qe.CRITICAL,f6,"Cannot send empty telemetry");if(t.baseData&&!t.baseType)return void this._logger.throwInternal(Qe.CRITICAL,oA,"Cannot send telemetry without baseData and baseType");if(t.baseType||(t.baseType="EventData"),!this._sender)return void this._logger.throwInternal(Qe.CRITICAL,L6,"Sender was not initialized");if(!this._isSampledIn(t))return void this._logger.throwInternal(Qe.WARNING,O6,"Telemetry item was sampled out and not sent",{SampleRate:this._sample.sampleRate});t.tags=t.tags||{},t.tags.sampleRate=this._sample.sampleRate;var a=Lr.constructEnvelope(t,this._config.instrumentationKey(),this._logger);if(!a)return void this._logger.throwInternal(Qe.CRITICAL,Z6,"Unable to create an AppInsights envelope");var h=!1;if(t.tags&&t.tags[w_]&&(t.tags[w_].forEach(function(A){try{A&&A(a)===!1&&(h=!0,n._logger.warnToConsole("Telemetry processor check returns false"))}catch(k){n._logger.throwInternal(Qe.CRITICAL,$3,"One of telemetry initializers failed, telemetry item will not be sent: "+Le.getExceptionName(k),{exception:Le.dump(k)},!0)}}),delete t.tags[w_]),h)return;var y=this._serializer.serialize(a),b=this._buffer.getItems(),u=this._buffer.batchPayloads(b);u&&u.length+y.length>this._config.maxBatchSizeInBytes()&&this.triggerSend(),this._buffer.enqueue(y),this._setupTimer()}catch(A){this._logger.throwInternal(Qe.WARNING,_6,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Le.getExceptionName(A),{exception:Le.dump(A)})}st.isNullOrUndefined(this._nextPlugin)||this._nextPlugin.processTelemetry(t)},Lr.prototype.setNextPlugin=function(t){this._nextPlugin=t},Lr.prototype._xhrReadyStateChange=function(t,n,a){if(t.readyState===4){var h=null;this._appId||(h=this._parseResponse(t.responseText||t.response))&&h.appId&&(this._appId=h.appId),(t.status<200||300<=t.status)&&t.status!==0?!this._config.isRetryDisabled()&&this._isRetriable(t.status)?(this._resendPayload(n),this._logger.throwInternal(Qe.WARNING,ad,". Response code "+t.status+". Will retry to send "+n.length+" items.")):this._onError(n,this._formatErrorMessageXhr(t)):VC.isOffline()?this._config.isRetryDisabled()||(this._resendPayload(n,10),this._logger.throwInternal(Qe.WARNING,ad,". Offline - Response Code: "+t.status+". Offline status: "+VC.isOffline()+". Will retry to send "+n.length+" items.")):t.status===206?(h=h||this._parseResponse(t.responseText||t.response))&&!this._config.isRetryDisabled()?this._onPartialSuccess(n,h):this._onError(n,this._formatErrorMessageXhr(t)):(this._consecutiveErrors=0,this._onSuccess(n,a))}},Lr.prototype.triggerSend=function(t,n){t===void 0&&(t=!0);try{if(this._config.disableTelemetry())this._buffer.clear();else{if(0<this._buffer.count()){var a=this._buffer.getItems();n?n.call(this,a,t):this._sender(a,t)}this._lastSend=+new Date}clearTimeout(this._timeoutHandle),this._timeoutHandle=null,this._retryAt=null}catch(h){(!Le.getIEVersion()||9<Le.getIEVersion())&&this._logger.throwInternal(Qe.CRITICAL,ad,"Telemetry transmission failed, some telemetry will be lost: "+Le.getExceptionName(h),{exception:Le.dump(h)})}},Lr.prototype._onError=function(t,n,a){this._logger.throwInternal(Qe.WARNING,M6,"Failed to send telemetry.",{message:n}),this._buffer.clearSent(t)},Lr.prototype._onPartialSuccess=function(t,n){for(var a=[],h=[],y=0,b=n.errors.reverse();y<b.length;y++){var u=b[y],A=t.splice(u.index,1)[0];this._isRetriable(u.statusCode)?h.push(A):a.push(A)}0<t.length&&this._onSuccess(t,n.itemsAccepted),0<a.length&&this._onError(a,this._formatErrorMessageXhr(null,["partial success",n.itemsAccepted,"of",n.itemsReceived].join(" "))),0<h.length&&(this._resendPayload(h),this._logger.throwInternal(Qe.WARNING,ad,"Partial success. Delivered: "+t.length+", Failed: "+a.length+". Will retry to send "+h.length+" our of "+n.itemsReceived+" items"))},Lr.prototype._onSuccess=function(t,n){this._buffer.clearSent(t)},Lr.prototype._xdrOnLoad=function(t,n){if(!t||t.responseText+""!="200"&&t.responseText!==""){var a=this._parseResponse(t.responseText);a&&a.itemsReceived&&a.itemsReceived>a.itemsAccepted&&!this._config.isRetryDisabled()?this._onPartialSuccess(n,a):this._onError(n,this._formatErrorMessageXdr(t))}else this._consecutiveErrors=0,this._onSuccess(n,0)},Lr.constructEnvelope=function(t,n,a){var h;switch((h=n===t.iKey||st.isNullOrUndefined(n)?t:ot({},t,{iKey:n})).baseType){case ec.dataType:return UC.EventEnvelopeCreator.Create(a,h);case ld.dataType:return LA.TraceEnvelopeCreator.Create(a,h);case Mp.dataType:return MA.PageViewEnvelopeCreator.Create(a,h);case ud.dataType:return AA.PageViewPerformanceEnvelopeCreator.Create(a,h);case Zl.dataType:return IA.ExceptionEnvelopeCreator.Create(a,h);case kp.dataType:return kA.MetricEnvelopeCreator.Create(a,h);case Ap.dataType:return EA.DependencyEnvelopeCreator.Create(a,h);default:return UC.EventEnvelopeCreator.Create(a,h)}},Lr._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100}}},Lr._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0}},Lr.prototype._isSampledIn=function(t){return this._sample.isSampledIn(t)},Lr.prototype._beaconSender=function(t,n){var a=this._config.endpointUrl(),h=this._buffer.batchPayloads(t),y=new Blob([h],{type:"text/plain;charset=UTF-8"});navigator.sendBeacon(a,y)?(this._buffer.markAsSent(t),this._onSuccess(t,t.length)):(this._xhrSender(t,!0),this._logger.throwInternal(Qe.WARNING,ad,". Failed to send telemetry with Beacon API, retried with xhrSender."))},Lr.prototype._xhrSender=function(t,n){var a=this,h=new XMLHttpRequest;h[xm]=!0,h.open("POST",this._config.endpointUrl(),n),h.setRequestHeader("Content-type","application/json"),Le.isInternalApplicationInsightsEndpoint(this._config.endpointUrl())&&h.setRequestHeader(Xn.sdkContextHeader,Xn.sdkContextHeaderAppIdRequest),h.onreadystatechange=function(){return a._xhrReadyStateChange(h,t,t.length)},h.onerror=function(b){return a._onError(t,a._formatErrorMessageXhr(h),b)};var y=this._buffer.batchPayloads(t);h.send(y),this._buffer.markAsSent(t)},Lr.prototype._parseResponse=function(t){try{if(t&&t!==""){var n=JSON.parse(t);if(n&&n.itemsReceived&&n.itemsReceived>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted==n.errors.length)return n}}catch(a){this._logger.throwInternal(Qe.CRITICAL,V6,"Cannot parse the response. "+Le.getExceptionName(a),{response:t})}return null},Lr.prototype._resendPayload=function(t,n){if(n===void 0&&(n=1),t&&t.length!==0){this._buffer.clearSent(t),this._consecutiveErrors++;for(var a=0,h=t;a<h.length;a++){var y=h[a];this._buffer.enqueue(y)}this._setRetryTime(n),this._setupTimer()}},Lr.prototype._setRetryTime=function(t){var n;if(this._consecutiveErrors<=1)n=10;else{var a=(Math.pow(2,this._consecutiveErrors)-1)/2,h=Math.floor(Math.random()*a*10)+1;h*=t,n=Math.max(Math.min(h,3600),10)}var y=Date.now()+1e3*n;this._retryAt=y},Lr.prototype._setupTimer=function(){var t=this;if(!this._timeoutHandle){var n=this._retryAt?Math.max(0,this._retryAt-Date.now()):0,a=Math.max(this._config.maxBatchInterval(),n);this._timeoutHandle=setTimeout(function(){t.triggerSend()},a)}},Lr.prototype._isRetriable=function(t){return t==408||t==429||t==500||t==503},Lr.prototype._formatErrorMessageXhr=function(t,n){return t?"XMLHttpRequest,Status:"+t.status+",Response:"+t.responseText||t.response||"":n},Lr.prototype._xdrSender=function(t,n){var a=this,h=new XDomainRequest;h.onload=function(){return a._xdrOnLoad(h,t)},h.onerror=function(A){return a._onError(t,a._formatErrorMessageXdr(h),A)};var y=window.location&&window.location.protocol;if(this._config.endpointUrl().lastIndexOf(y,0)!==0)return this._logger.throwInternal(Qe.WARNING,ad,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void this._buffer.clear();var b=this._config.endpointUrl().replace(/^(https?:)/,"");h.open("POST",b);var u=this._buffer.batchPayloads(t);h.send(u),this._buffer.markAsSent(t)},Lr.prototype._formatErrorMessageXdr=function(t,n){return t?"XDomainRequest,Response:"+t.responseText||"":n},Lr);function Lr(){this.priority=1001,this.identifier=OC,this._XMLHttpRequestSupported=!1}var GC=function(){},RA=(ro.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var t=to.Now(),n=t-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),a=t-this.automaticSession.renewalDate>this.config.sessionRenewalMs();n||a?this.renew():(!this.cookieUpdatedTimestamp||t-this.cookieUpdatedTimestamp>ro.cookieUpdateInterval)&&(this.automaticSession.renewalDate=t,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},ro.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},ro.prototype.initializeAutomaticSession=function(){var t=Le.getCookie(this._logger,this._storageNamePrefix());if(t&&typeof t.split=="function")this.initializeAutomaticSessionWithData(t);else{var n=Le.getStorage(this._logger,this._storageNamePrefix());n&&this.initializeAutomaticSessionWithData(n)}this.automaticSession.id||this.renew()},ro.prototype.initializeAutomaticSessionWithData=function(t){var n=t.split("|");0<n.length&&(this.automaticSession.id=n[0]);try{if(1<n.length){var a=+n[1];this.automaticSession.acquisitionDate=+new Date(a),this.automaticSession.acquisitionDate=0<this.automaticSession.acquisitionDate?this.automaticSession.acquisitionDate:0}if(2<n.length){var h=+n[2];this.automaticSession.renewalDate=+new Date(h),this.automaticSession.renewalDate=0<this.automaticSession.renewalDate?this.automaticSession.renewalDate:0}}catch(y){this._logger.throwInternal(Qe.CRITICAL,g6,"Error parsing ai_session cookie, session will be reset: "+Le.getExceptionName(y),{exception:Le.dump(y)})}this.automaticSession.renewalDate==0&&this._logger.throwInternal(Qe.WARNING,A6,"AI session renewal date is 0, session will be reset.")},ro.prototype.renew=function(){var t=to.Now();this.automaticSession.id=Le.newId(),this.automaticSession.acquisitionDate=t,this.automaticSession.renewalDate=t,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),Le.canUseLocalStorage()||this._logger.throwInternal(Qe.WARNING,s6,"Browser does not support local storage. Session durations will be inaccurate.")},ro.prototype.setCookie=function(t,n,a){var h=n+this.config.sessionExpirationMs(),y=a+this.config.sessionRenewalMs(),b=new Date,u=[t,n,a];h<y?b.setTime(h):b.setTime(y);var A=this.config.cookieDomain?this.config.cookieDomain():null;Le.setCookie(this._logger,this._storageNamePrefix(),u.join("|")+";expires="+b.toUTCString(),A),this.cookieUpdatedTimestamp=to.Now()},ro.prototype.setStorage=function(t,n,a){Le.setStorage(this._logger,this._storageNamePrefix(),[t,n,a].join("|"))},ro.acquisitionSpan=864e5,ro.renewalSpan=18e5,ro.cookieUpdateInterval=6e4,ro.cookieNameConst="ai_session",ro);function ro(t,n){var a=this;st.isNullOrUndefined(n)?this._logger=new __:this._logger=n,typeof(t=t||{}).sessionExpirationMs!="function"&&(t.sessionExpirationMs=function(){return ro.acquisitionSpan}),typeof t.sessionRenewalMs!="function"&&(t.sessionRenewalMs=function(){return ro.renewalSpan}),this.config=t,this._storageNamePrefix=function(){return a.config.namePrefix&&a.config.namePrefix()?ro.cookieNameConst+a.config.namePrefix():ro.cookieNameConst},this.automaticSession=new GC}var BA=function(){},FA=function(){this.id="browser",this.deviceClass="Browser"},jA=function(t){this.sdkVersion=(t.sdkExtension&&t.sdkExtension()?t.sdkExtension()+"_":"")+"javascript:2.2.2"},UA=(po.prototype.setAuthenticatedUserContext=function(t,n,a){if(a===void 0&&(a=!1),!this.validateUserInput(t)||n&&!this.validateUserInput(n))this._logger.throwInternal(Qe.WARNING,J6,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{this.authenticatedId=t;var h=this.authenticatedId;n&&(this.accountId=n,h=[this.authenticatedId,this.accountId].join(po.cookieSeparator)),a&&Le.setCookie(this._logger,po.authUserCookieName,encodeURI(h),this.config.cookieDomain())}},po.prototype.clearAuthenticatedUserContext=function(){this.authenticatedId=null,this.accountId=null,Le.deleteCookie(this._logger,po.authUserCookieName)},po.prototype.validateUserInput=function(t){return!(typeof t!="string"||!t||t.match(/,|;|=| |\|/))},po.cookieSeparator="|",po.userCookieName="ai_user",po.authUserCookieName="ai_authUser",po);function po(t,n){this._logger=n;var a=Le.getCookie(this._logger,po.userCookieName);if(a){var h=a.split(po.cookieSeparator);0<h.length&&(this.id=h[0])}if(this.config=t,!this.id){this.id=Le.newId();var y=new Date,b=Le.toISOStringForIE8(y);this.accountAcquisitionDate=b,y.setTime(y.getTime()+31536e6);var u=[this.id,b],A=this.config.cookieDomain?this.config.cookieDomain():void 0;Le.setCookie(this._logger,po.userCookieName,u.join(po.cookieSeparator)+";expires="+y.toUTCString(),A);var k=t.namePrefix&&t.namePrefix()?t.namePrefix()+"ai_session":"ai_session";Le.removeStorage(this._logger,k)}this.accountId=t.accountId?t.accountId():void 0;var G=Le.getCookie(this._logger,po.authUserCookieName);if(G){var W=(G=decodeURI(G)).split(po.cookieSeparator);W[0]&&(this.authenticatedId=W[0]),1<W.length&&W[1]&&(this.accountId=W[1])}}var VA=function(){},qA=function(t,n,a){this.traceID=t||Le.generateW3CId(),this.parentID=n,this.name=a,window&&window.location&&window.location.pathname&&(this.name=window.location.pathname)},ZA=(ws.prototype.applySessionContext=function(t){var n=this.session||this.sessionManager.automaticSession;n&&typeof n.id=="string"&&(t.ext.app.sesId=n.id),this.session&&(typeof this.session.id=="string"?t.ext.app.sesId=this.session.id:t.ext.app.sesId=this.sessionManager.automaticSession.id)},ws.prototype.applyOperatingSystemContxt=function(t){this.os&&this.os.name&&(t.ext.os=this.os)},ws.prototype.applyApplicationContext=function(t){this.application&&(typeof this.application.ver=="string"&&(t.tags[Nn.applicationVersion]=this.application.ver),typeof this.application.build=="string"&&(t.tags[Nn.applicationBuild]=this.application.build))},ws.prototype.applyDeviceContext=function(t){this.device&&(typeof this.device.id=="string"&&(t.ext.device.localId=this.device.id),typeof this.device.ip=="string"&&(t.ext.device.ip=this.device.ip),typeof this.device.model=="string"&&(t.ext.device.model=this.device.model),typeof this.device.deviceClass=="string"&&(t.ext.device.deviceClass=this.device.deviceClass))},ws.prototype.applyInternalContext=function(t){this.internal&&(typeof this.internal.agentVersion=="string"&&(t.tags[Nn.internalAgentVersion]=this.internal.agentVersion),typeof this.internal.sdkVersion=="string"&&(t.tags[Nn.internalSdkVersion]=this.internal.sdkVersion))},ws.prototype.applyLocationContext=function(t){this.location&&typeof this.location.ip=="string"&&(t.tags[Nn.locationIp]=this.location.ip)},ws.prototype.applyOperationContext=function(t){if(this.telemetryTrace){var n=t.ext.trace||{traceID:void 0,parentID:void 0};typeof this.telemetryTrace.traceID=="string"&&(n.traceID=this.telemetryTrace.traceID),typeof this.telemetryTrace.name=="string"&&(n.name=this.telemetryTrace.name),typeof this.telemetryTrace.parentID=="string"&&(n.parentID=this.telemetryTrace.parentID),t.ext.trace=n}},ws.prototype.applyWebContext=function(t){this.web&&(t.ext.web=t.ext.web||{},t.ext.web=this.web)},ws.prototype.applyUserContext=function(t){this.user&&(t.tags||(t.tags=[]),typeof this.user.accountId=="string"&&(t.tags[Nn.userAccountId]=this.user.accountId),typeof this.user.id=="string"&&(t.ext.user.id=this.user.id),typeof this.user.authenticatedId=="string"&&(t.ext.user.authId=this.user.authenticatedId))},ws.prototype.cleanUp=function(t){t.ext[qr.DeviceExt]&&Object.keys(t.ext[qr.DeviceExt]).length===0&&delete t.ext[qr.DeviceExt],t.ext[qr.UserExt]&&Object.keys(t.ext[qr.UserExt]).length===0&&delete t.ext[qr.UserExt],t.ext[qr.WebExt]&&Object.keys(t.ext[qr.WebExt]).length===0&&delete t.ext[qr.WebExt],t.ext[qr.OSExt]&&Object.keys(t.ext[qr.OSExt]).length===0&&delete t.ext[qr.OSExt],t.ext[qr.AppExt]&&Object.keys(t.ext[qr.AppExt]).length===0&&delete t.ext[qr.AppExt],t.ext[qr.TraceExt]&&Object.keys(t.ext[qr.TraceExt]).length===0&&delete t.ext[qr.TraceExt]},ws);function ws(t,n){typeof window<"u"&&(this.sessionManager=new RA(n,t),this.application=new BA,this.device=new FA,this.internal=new jA(n),this.location=new VA,this.user=new UA(n,t),this.telemetryTrace=new qA,this.session=new GC),this.appId=function(){return null}}var GA=(oc.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){}}},oc.prototype.initialize=function(t,n,a){var h=this,y=oc.getDefaultConfig();function b(k){u._extensionConfig[k]=function(){return Fy.getConfig(t,k,h.identifier,y[k]())}}this._extensionConfig=this._extensionConfig||oc.getDefaultConfig();var u=this;for(var A in y)b(A);this._logger=n.logger,this.context=new ZA(n.logger,this._extensionConfig),this._breezeChannel=Le.getExtension(a,OC),this.context.appId=function(){return h._breezeChannel?h._breezeChannel._appId:null}},oc.prototype.processTelemetry=function(t){st.isNullOrUndefined(t)||(t.name===Mp.envelopeType&&this._logger.resetInternalMessageCount(),this.context.session&&typeof this.context.session.id!="string"&&this.context.sessionManager.update(),this._processTelemetryInternal(t),st.isNullOrUndefined(this._nextPlugin)||this._nextPlugin.processTelemetry(t))},oc.prototype.setNextPlugin=function(t){this._nextPlugin=t},oc.prototype._processTelemetryInternal=function(t){t.tags||(t.tags=[]),t.ext||(t.ext={}),t.ext[qr.DeviceExt]=t.ext[qr.DeviceExt]||{},t.ext[qr.WebExt]=t.ext[qr.WebExt]||{},t.ext[qr.UserExt]=t.ext[qr.UserExt]||{},t.ext[qr.OSExt]=t.ext[qr.OSExt]||{},t.ext[qr.AppExt]=t.ext[qr.AppExt]||{},t.ext[qr.TraceExt]=t.ext[qr.TraceExt]||{},this.context.applySessionContext(t),this.context.applyApplicationContext(t),this.context.applyDeviceContext(t),this.context.applyOperationContext(t),this.context.applyUserContext(t),this.context.applyOperatingSystemContxt(t),this.context.applyWebContext(t),this.context.applyLocationContext(t),this.context.applyInternalContext(t),this.context.cleanUp(t)},oc);function oc(){this.priority=110,this.identifier=jy}var HA=function(){this.openDone=!1,this.setRequestHeaderDone=!1,this.sendDone=!1,this.abortDone=!1,this.onreadystatechangeCallbackAttached=!1},HC=(z_.prototype.getAbsoluteUrl=function(){return this.requestUrl?Ay.getAbsoluteUrl(this.requestUrl):null},z_.prototype.getPathName=function(){return this.requestUrl?Ar.sanitizeUrl(this._logger,Ay.getCompleteUrl(this.method,this.requestUrl)):null},z_);function z_(t,n,a){this.completed=!1,this.requestHeadersSize=null,this.requestHeaders=null,this.ttfb=null,this.responseReceivingDuration=null,this.callbackDuration=null,this.ajaxTotalDuration=null,this.aborted=null,this.pageUrl=null,this.requestUrl=null,this.requestSize=0,this.method=null,this.status=null,this.requestSentTime=null,this.responseStartedTime=null,this.responseFinishedTime=null,this.callbackFinishedTime=null,this.endTime=null,this.originalOnreadystatechage=null,this.xhrMonitoringState=new HA,this.clientFailure=0,this.CalculateMetrics=function(){this.ajaxTotalDuration=Math.round(1e3*to.GetDuration(this.requestSentTime,this.responseFinishedTime))/1e3},this.traceID=t,this.spanID=n,this._logger=a}var WA=(N_.AttachEvent=function(t,n,a){var h=!1;return st.isNullOrUndefined(t)||(st.isNullOrUndefined(t.attachEvent)?st.isNullOrUndefined(t.addEventListener)||(t.addEventListener(n,a,!1),h=!0):(t.attachEvent("on"+n,a),h=!0)),h},N_.DetachEvent=function(t,n,a){st.isNullOrUndefined(t)||(st.isNullOrUndefined(t.detachEvent)?st.isNullOrUndefined(t.removeEventListener)||t.removeEventListener(n,a,!1):t.detachEvent("on"+n,a))},N_);function N_(){}var WC=(tl.isValidTraceId=function(t){return t.match(/^[0-9a-f]{32}$/)&&t!=="00000000000000000000000000000000"},tl.isValidSpanId=function(t){return t.match(/^[0-9a-f]{16}$/)&&t!=="0000000000000000"},tl.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},tl.DEFAULT_TRACE_FLAG="00",tl.DEFAULT_VERSION="00",tl);function tl(t,n){this.traceFlag=tl.DEFAULT_TRACE_FLAG,this.version=tl.DEFAULT_VERSION,t&&tl.isValidTraceId(t)?this.traceId=t:this.traceId=Le.generateW3CId(),n&&tl.isValidSpanId(n)?this.spanId=n:this.spanId=Le.generateW3CId().substr(0,16)}var YA=(tr.prototype.isMonitoredInstance=function(t,n,a,h){var y=!1,b=!0,u=!1;return a!==void 0?(u=this._fetchInitialized,y=typeof a=="object"&&a[xm]===!0||!!h&&h[xm]===!0):t!==void 0&&(u=this.initialized,y=t[xm]===!0,b=n===!0||!st.isNullOrUndefined(t.ajaxData)),u&&b&&!y},tr.prototype.supportsAjaxMonitoring=function(){var t=!0;(st.isNullOrUndefined(XMLHttpRequest)||st.isNullOrUndefined(XMLHttpRequest.prototype)||st.isNullOrUndefined(XMLHttpRequest.prototype.open)||st.isNullOrUndefined(XMLHttpRequest.prototype.send)||st.isNullOrUndefined(XMLHttpRequest.prototype.abort))&&(t=!1);try{" a ".trim()}catch{t=!1}return t},tr.prototype.instrumentOpen=function(){var t=XMLHttpRequest.prototype.open,n=this;XMLHttpRequest.prototype.open=function(a,h,y){try{!n.isMonitoredInstance(this,!0)||this.ajaxData&&this.ajaxData.xhrMonitoringState.openDone||n.openHandler(this,a,h,y)}catch(b){n._core.logger.throwInternal(Qe.CRITICAL,y_,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(this),exception:Le.dump(b)})}return t.apply(this,arguments)}},tr.prototype.openHandler=function(t,n,a,h){var y=this._context&&this._context.telemetryTrace&&this._context.telemetryTrace.traceID||Le.generateW3CId(),b=Le.generateW3CId().substr(0,16),u=new HC(y,b,this._core.logger);u.method=n,u.requestUrl=a,u.xhrMonitoringState.openDone=!0,u.requestHeaders={},t.ajaxData=u,this.attachToOnReadyStateChange(t)},tr.getFailedAjaxDiagnosticsMessage=function(t){var n="";try{st.isNullOrUndefined(t)||st.isNullOrUndefined(t.ajaxData)||st.isNullOrUndefined(t.ajaxData.requestUrl)||(n+="(url: '"+t.ajaxData.requestUrl+"')")}catch{}return n},tr.prototype.instrumentSend=function(){var t=XMLHttpRequest.prototype.send,n=this;XMLHttpRequest.prototype.send=function(a){try{n.isMonitoredInstance(this)&&!this.ajaxData.xhrMonitoringState.sendDone&&n.sendHandler(this,a)}catch(h){n._core.logger.throwInternal(Qe.CRITICAL,b6,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(this),exception:Le.dump(h)})}return t.apply(this,arguments)}},tr.prototype.sendHandler=function(t,n){t.ajaxData.requestSentTime=to.Now(),(t=this.includeCorrelationHeaders(t.ajaxData,void 0,void 0,t)).ajaxData.xhrMonitoringState.sendDone=!0},tr.prototype.instrumentAbort=function(){var t=XMLHttpRequest.prototype.abort,n=this;XMLHttpRequest.prototype.abort=function(){try{n.isMonitoredInstance(this)&&!this.ajaxData.xhrMonitoringState.abortDone&&(this.ajaxData.aborted=1,this.ajaxData.xhrMonitoringState.abortDone=!0)}catch(a){n._core.logger.throwInternal(Qe.CRITICAL,x6,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(this),exception:Le.dump(a)})}return t.apply(this,arguments)}},tr.prototype.instrumentSetRequestHeader=function(){if(this._config.enableRequestHeaderTracking){var t=XMLHttpRequest.prototype.setRequestHeader,n=this;XMLHttpRequest.prototype.setRequestHeader=function(a,h){try{n.isMonitoredInstance(this)&&(this.ajaxData.requestHeaders[a]=h)}catch(y){n._core.logger.throwInternal(Qe.CRITICAL,aA,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(this),exception:Le.dump(y)})}return t.apply(this,arguments)}}},tr.prototype.attachToOnReadyStateChange=function(t){var n=this;t.ajaxData.xhrMonitoringState.onreadystatechangeCallbackAttached=WA.AttachEvent(t,"readystatechange",function(){try{n.isMonitoredInstance(t)&&t.readyState===4&&n.onAjaxComplete(t)}catch(h){var a=Le.dump(h);a&&a.toLowerCase().indexOf("c00c023f")!=-1||n._core.logger.throwInternal(Qe.CRITICAL,w6,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(t),exception:Le.dump(h)})}})},tr.prototype.onAjaxComplete=function(t){if(t.ajaxData.responseFinishedTime=to.Now(),t.ajaxData.status=t.status,t.ajaxData.CalculateMetrics(),t.ajaxData.ajaxTotalDuration<0)this._core.logger.throwInternal(Qe.WARNING,g_,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(t),requestSentTime:t.ajaxData.requestSentTime,responseFinishedTime:t.ajaxData.responseFinishedTime});else{var n={id:"|"+t.ajaxData.traceID+"."+t.ajaxData.spanID,target:t.ajaxData.getAbsoluteUrl(),name:t.ajaxData.getPathName(),type:"Ajax",duration:t.ajaxData.ajaxTotalDuration,success:200<=+t.ajaxData.status&&+t.ajaxData.status<400,responseCode:+t.ajaxData.status,method:t.ajaxData.method},a=this.getAjaxCorrelationContext(t);if(a&&(n.correlationContext=a),this._config.enableRequestHeaderTracking&&0<Object.keys(t.ajaxData.requestHeaders).length&&(n.properties=n.properties||{},n.properties.requestHeaders={},n.properties.requestHeaders=t.ajaxData.requestHeaders),this._config.enableResponseHeaderTracking){var h=t.getAllResponseHeaders();if(h){var y=h.trim().split(/[\r\n]+/),b={};y.forEach(function(u){var A=u.split(": "),k=A.shift(),G=A.join(": ");b[k]=G}),0<Object.keys(b).length&&(n.properties=n.properties||{},n.properties.responseHeaders={},n.properties.responseHeaders=b)}}this.trackDependencyDataInternal(n),t.ajaxData=null}},tr.prototype.getAjaxCorrelationContext=function(t){try{var n=t.getAllResponseHeaders();if(n!==null&&n.toLowerCase().indexOf(Xn.requestContextHeaderLowerCase)!==-1){var a=t.getResponseHeader(Xn.requestContextHeader);return Ly.getCorrelationContext(a)}}catch(h){this._core.logger.throwInternal(Qe.WARNING,ky,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:tr.getFailedAjaxDiagnosticsMessage(t),exception:Le.dump(h)})}},tr.prototype.trackDependencyDataInternal=function(t,n,a){if(this._config.maxAjaxCallsPerView===-1||this._trackAjaxAttempts<this._config.maxAjaxCallsPerView){var h=rc.create(t,Ap.dataType,Ap.envelopeType,this._core.logger,n,a);this._core.track(h)}else this._trackAjaxAttempts===this._config.maxAjaxCallsPerView&&this._core.logger.throwInternal(Qe.CRITICAL,Y6,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++this._trackAjaxAttempts},tr.prototype.trackDependencyData=function(t,n){this.trackDependencyDataInternal(t,n)},tr.prototype.processTelemetry=function(t){this._nextPlugin&&this._nextPlugin.processTelemetry&&this._nextPlugin.processTelemetry(t)},tr.prototype.setNextPlugin=function(t){t&&(this._nextPlugin=t)},tr.prototype.instrumentFetch=function(){if(this.supportsFetch()&&!this._fetchInitialized){var t=window.fetch,n=this;window.fetch=function(a,h){var y;if(n.isFetchInstrumented(a)&&n.isMonitoredInstance(void 0,void 0,a,h))try{y=n.createFetchRecord(a,h),h=n.includeCorrelationHeaders(y,a,h)}catch(b){n._core.logger.throwInternal(Qe.CRITICAL,y_,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.",{ajaxDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(a),exception:Le.dump(b)})}return t(a,h).then(function(b){return n.onFetchComplete(b,y),b}).catch(function(b){throw n.onFetchFailed(a,y,b),b})},this._fetchInitialized=!0}},tr.prototype.isFetchInstrumented=function(t){return this._fetchInitialized&&t[xm]!==!0},tr.prototype.supportsFetch=function(){var t=!0;return(!window||st.isNullOrUndefined(window.Request)||st.isNullOrUndefined(window.Request.prototype)||st.isNullOrUndefined(window.fetch))&&(t=!1),t},tr.prototype.createFetchRecord=function(t,n){var a=this._context&&this._context.telemetryTrace&&this._context.telemetryTrace.traceID||Le.generateW3CId(),h=Le.generateW3CId().substr(0,16),y=new HC(a,h,this._core.logger);return y.requestSentTime=to.Now(),t instanceof Request?y.requestUrl=t?t.url:"":y.requestUrl=t,n&&n.method?y.method=n.method:t&&t instanceof Request?y.method=t.method:y.method="GET",n&&n.headers&&this._config.enableRequestHeaderTracking?y.requestHeaders=n.headers:y.requestHeaders={},y},tr.prototype.includeCorrelationHeaders=function(t,n,a,h){if(n){if(Ly.canIncludeCorrelationHeader(this._config,t.getAbsoluteUrl(),this.currentWindowHost)){if((a=a||{}).headers=new Headers(a.headers||n instanceof Request&&n.headers||{}),this._isUsingAIHeaders){var y="|"+t.traceID+"."+t.spanID;a.headers.set(Xn.requestIdHeader,y),this._config.enableRequestHeaderTracking&&(t.requestHeaders[Xn.requestIdHeader]=y)}var b=this._config.appId||this._context.appId();if(b&&(a.headers.set(Xn.requestContextHeader,Xn.requestContextAppIdFormat+b),this._config.enableRequestHeaderTracking&&(t.requestHeaders[Xn.requestContextHeader]=Xn.requestContextAppIdFormat+b)),this._isUsingW3CHeaders){var u=new WC(t.traceID,t.spanID);a.headers.set(Xn.traceParentHeader,u.toString()),this._config.enableRequestHeaderTracking&&(t.requestHeaders[Xn.traceParentHeader]=u.toString())}return a}return a}if(h){if(this.currentWindowHost&&Ly.canIncludeCorrelationHeader(this._config,h.ajaxData.getAbsoluteUrl(),this.currentWindowHost)){this._isUsingAIHeaders&&(y="|"+h.ajaxData.traceID+"."+h.ajaxData.spanID,h.setRequestHeader(Xn.requestIdHeader,y),this._config.enableRequestHeaderTracking&&(h.ajaxData.requestHeaders[Xn.requestIdHeader]=y));var A=this._config.appId||this._context.appId();A&&(h.setRequestHeader(Xn.requestContextHeader,Xn.requestContextAppIdFormat+A),this._config.enableRequestHeaderTracking&&(h.ajaxData.requestHeaders[Xn.requestContextHeader]=Xn.requestContextAppIdFormat+A)),this._isUsingW3CHeaders&&(u=new WC(h.ajaxData.traceID,h.ajaxData.spanID),h.setRequestHeader(Xn.traceParentHeader,u.toString()),this._config.enableRequestHeaderTracking&&(h.ajaxData.requestHeaders[Xn.traceParentHeader]=u.toString()))}return h}},tr.prototype.getFailedFetchDiagnosticsMessage=function(t){var n="";try{st.isNullOrUndefined(t)||(n+=typeof t=="string"?"(url: '"+t+"')":"(url: '"+t.url+"')")}catch(a){this._core.logger.throwInternal(Qe.CRITICAL,y_,"Failed to grab failed fetch diagnostics message",{exception:Le.dump(a)})}return n},tr.prototype.onFetchComplete=function(t,n){if(n)try{if(n.responseFinishedTime=to.Now(),n.CalculateMetrics(),n.ajaxTotalDuration<0)this._core.logger.throwInternal(Qe.WARNING,g_,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime});else{var a={id:"|"+n.traceID+"."+n.spanID,target:n.getAbsoluteUrl(),name:n.getPathName(),type:"Fetch",duration:n.ajaxTotalDuration,success:200<=t.status&&t.status<400,responseCode:t.status,properties:{HttpMethod:n.method}},h=this.getFetchCorrelationContext(t);if(h&&(a.correlationContext=h),this._config.enableRequestHeaderTracking&&0<Object.keys(n.requestHeaders).length&&(a.properties=a.properties||{},a.properties.requestHeaders=n.requestHeaders),this._config.enableResponseHeaderTracking){var y={};t.headers.forEach(function(b,u){y[u]=b}),0<Object.keys(y).length&&(a.properties=a.properties||{},a.properties.responseHeaders=y)}this.trackDependencyDataInternal(a)}}catch(b){this._core.logger.throwInternal(Qe.WARNING,ky,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),exception:Le.dump(b)})}},tr.prototype.onFetchFailed=function(t,n,a){if(n)try{if(n.responseFinishedTime=to.Now(),n.CalculateMetrics(),n.ajaxTotalDuration<0)this._core.logger.throwInternal(Qe.WARNING,g_,"Failed to calculate the duration of the failed fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime});else{var h={id:"|"+n.traceID+"."+n.spanID,target:n.getAbsoluteUrl(),name:n.getPathName(),type:"Fetch",duration:n.ajaxTotalDuration,success:!1,responseCode:0,properties:{HttpMethod:n.method}};this.trackDependencyDataInternal(h,{error:a.message})}}catch(y){this._core.logger.throwInternal(Qe.WARNING,ky,"Failed to calculate the duration of the failed fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),exception:Le.dump(y)})}},tr.prototype.getFetchCorrelationContext=function(t){try{var n=t.headers.get(Xn.requestContextHeader);return Ly.getCorrelationContext(n)}catch(a){this._core.logger.throwInternal(Qe.WARNING,ky,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),exception:Le.dump(a)})}},tr.prototype.instrumentXhr=function(){this.supportsAjaxMonitoring()&&!this.initialized&&(this.instrumentOpen(),this.instrumentSend(),this.instrumentAbort(),this.instrumentSetRequestHeader(),this.initialized=!0)},tr.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,disableCorrelationHeaders:!1,distributedTracingMode:Sp.AI,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1}},tr.getEmptyConfig=function(){return{maxAjaxCallsPerView:void 0,disableAjaxTracking:void 0,disableFetchTracking:void 0,disableCorrelationHeaders:void 0,distributedTracingMode:void 0,correlationHeaderExcludedDomains:void 0,appId:void 0,enableCorsCorrelation:void 0,correlationHeaderDomains:void 0,enableRequestHeaderTracking:void 0,enableResponseHeaderTracking:void 0}},tr.prototype.initialize=function(t,n,a){if(!this.initialized&&!this._fetchInitialized){this._core=n;var h=tr.getDefaultConfig();for(var y in this._config=tr.getEmptyConfig(),h)this._config[y]=Fy.getConfig(t,y,tr.identifier,h[y]);if(this._isUsingAIHeaders=this._config.distributedTracingMode===Sp.AI||this._config.distributedTracingMode===Sp.AI_AND_W3C,this._isUsingW3CHeaders=this._config.distributedTracingMode===Sp.AI_AND_W3C||this._config.distributedTracingMode===Sp.W3C,this._config.disableAjaxTracking===!1&&this.instrumentXhr(),this._config.disableFetchTracking===!1&&this.instrumentFetch(),0<a.length&&a){for(var b=void 0,u=0;!b&&u<a.length;)a[u]&&a[u].identifier===jy&&(b=a[u]),u++;b&&(this._context=b.context)}}},tr.identifier="AjaxDependencyPlugin",tr);function tr(){this._trackAjaxAttempts=0,this.identifier=tr.identifier,this.priority=120,this.currentWindowHost=window&&window.location&&window.location.host&&window.location.host.toLowerCase(),this.initialized=!1,this._fetchInitialized=!1}var KA=(On.prototype.trackEvent=function(t,n){this.appInsights.trackEvent(t,n)},On.prototype.trackPageView=function(t){var n=t||{};this.appInsights.trackPageView(n)},On.prototype.trackPageViewPerformance=function(t){var n=t||{};this.appInsights.trackPageViewPerformance(n)},On.prototype.trackException=function(t){!t.exception&&t.error&&(t.exception=t.error),this.appInsights.trackException(t)},On.prototype._onerror=function(t){this.appInsights._onerror(t)},On.prototype.trackTrace=function(t,n){this.appInsights.trackTrace(t,n)},On.prototype.trackMetric=function(t,n){this.appInsights.trackMetric(t,n)},On.prototype.startTrackPage=function(t){this.appInsights.startTrackPage(t)},On.prototype.stopTrackPage=function(t,n,a,h){this.appInsights.stopTrackPage(t,n,a,h)},On.prototype.startTrackEvent=function(t){this.appInsights.startTrackEvent(t)},On.prototype.stopTrackEvent=function(t,n,a){this.appInsights.stopTrackEvent(t,n,a)},On.prototype.addTelemetryInitializer=function(t){return this.appInsights.addTelemetryInitializer(t)},On.prototype.setAuthenticatedUserContext=function(t,n,a){a===void 0&&(a=!1),this.properties.context.user.setAuthenticatedUserContext(t,n,a)},On.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},On.prototype.trackDependencyData=function(t){this.dependencies.trackDependencyData(t)},On.prototype.flush=function(t){t===void 0&&(t=!0),this.core.getTransmissionControls().forEach(function(n){n.forEach(function(a){a.flush(t)})})},On.prototype.onunloadFlush=function(t){t===void 0&&(t=!0),this.core.getTransmissionControls().forEach(function(n){n.forEach(function(a){a.onunloadFlush?a.onunloadFlush():a.flush(t)})})},On.prototype.loadAppInsights=function(t){if(t===void 0&&(t=!1),t&&this.config.extensions&&0<this.config.extensions.length)throw new Error("Extensions not allowed in legacy mode");var n=[],a=new OA;return n.push(a),n.push(this.properties),n.push(this.dependencies),n.push(this.appInsights),this.core.initialize(this.config,n),this.emptyQueue(),this.pollInternalLogs(),this.addHousekeepingBeforeUnload(this),this.context=this.properties.context,this},On.prototype.updateSnippetDefinitions=function(t){for(var n in this)typeof n=="string"&&(t[n]=this[n])},On.prototype.emptyQueue=function(){try{if(Le.isArray(this.snippet.queue)){for(var t=this.snippet.queue.length,n=0;n<t;n++)(0,this.snippet.queue[n])();this.snippet.queue=void 0,delete this.snippet.queue}}catch(h){var a={};h&&typeof h.toString=="function"&&(a.exception=h.toString())}},On.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},On.prototype.addHousekeepingBeforeUnload=function(t){!t.appInsights.config.disableFlushOnBeforeUnload&&"onbeforeunload"in window&&(Le.addEventHandler("beforeunload",function(){t.onunloadFlush(!1);var n=t.appInsights.core._extensions[jy];n&&n.context&&n.context._sessionManager&&n.context._sessionManager.backup()})||t.appInsights.core.logger.throwInternal(Qe.CRITICAL,C6,"Could not add handler for beforeunload"))},On.prototype.getSKUDefaults=function(){this.config.diagnosticLogInterval=this.config.diagnosticLogInterval&&0<this.config.diagnosticLogInterval?this.config.diagnosticLogInterval:1e4},On);function On(t){t.queue=t.queue||[],t.version=t.version||2;var n=t.config||{};n&&!n.instrumentationKey&&(n=t,FC.Version="2.2.2"),this.appInsights=new FC,this.properties=new GA,this.dependencies=new YA,this.core=new lA,this.snippet=t,this.config=n,this.getSKUDefaults()}var $A=(Lm.prototype.trackEvent=function(t,n){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.trackEvent(t,n)},Lm.prototype.setAuthenticatedUserContext=function(t,n){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.setAuthenticatedUserContext(t,n)},Lm.prototype.trackException=function(t){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.trackException(t)},Lm.prototype.flush=function(t){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.flush(t)},Lm);function Lm(t){this.options=t,!this.options.disableTelemetry&&Se&&(this.appInsights=new KA({config:{instrumentationKey:Se,disableExceptionTracking:!0,disableAjaxTracking:!0,isCookieUseDisabled:!0,maxBatchInterval:5e3}}),this.appInsights.loadAppInsights(),this.appInsights.addTelemetryInitializer(function(n){n.tags[Nn.applicationVersion]=Tn.getFullVersion()}))}var YC=(O_.prototype.onAdd=function(t){return this.container=document.createElement("div"),this.container.className="azure-map-logo",this.container},O_.prototype.onRemove=function(){this.container.remove()},O_);function O_(){}var R_,KC=(ze($C,R_=sr),$C);function $C(){var t=R_!==null&&R_.apply(this,arguments)||this;return t.copyrightMessage=void 0,t.showFeedbackLink=!0,t}var B_,XA=(ze(zp,B_=ys),zp.prototype.onAdd=function(t){return this.container=this.buildContainer(t,d.ControlStyle.auto),this.container.className="map-copyright",this.copyrightDiv=this.buildCopyrightDiv(),this.container.appendChild(this.copyrightDiv),this.options.showFeedbackLink&&(this.feedbackLink=this.buildFeedbackLink(),this.container.appendChild(this.feedbackLink)),this.container},zp.prototype.onRemove=function(){B_.prototype.onRemove.call(this),delete this.container},zp.prototype.setOptions=function(t){var n=new KC().merge(this.options,t);n.copyrightMessage!==this.options.copyrightMessage&&(this.copyrightDiv.innerText=n.copyrightMessage),!n.showFeedbackLink&&this.feedbackLink?(this.feedbackLink.remove(),delete this.feedbackLink):n.showFeedbackLink&&!this.feedbackLink&&(this.feedbackLink=this.buildFeedbackLink(),this.container.appendChild(this.feedbackLink)),this.options=n},zp.prototype.buildCopyrightDiv=function(){var t=document.createElement("div");return t.innerText=this.options.copyrightMessage||"",t},zp.prototype.buildFeedbackLink=function(){var t=document.createElement("a");return t.textContent="Improve this map",t.href="https://feedback.azuremaps.com",t.target="_blank",t.rel="noopener",t},zp);function zp(t){var n=B_.call(this)||this;return n.options=new KC().merge(t),n}var JA=(Uy.throwOnError=function(t,n){var a=t instanceof bS?t._getMap():t,h=function(b){throw a.off("error",h),b.error};a.on("error",h);var y=n();return a.off("error",h),y},Uy.tryCatch=function(t,n,a,h){try{return this.throwOnError(t,n)}catch(y){return a(y)}finally{typeof h=="function"&&h()}},Uy.tryFinally=function(t,n,a){try{return this.throwOnError(t,n)}finally{a()}},Uy);function Uy(){}var QA=(XC.prototype.request=function(t){var n={domain:this.map.getServiceOptions().domain,path:"search/address/reverse/json",queryParams:ot({"api-version":"1.0",language:t.style.language,limit:1,query:xi(t.position[1])+","+Dn(t.position[0])},t.style.view&&{view:t.style.view})};return new gi(this.map.authentication.signRequest(n)).get()},XC);function XC(t){this.map=t}var eL=(Vy.prototype.cache=function(t,n,a,h){var y=t+"_"+a[0]+"_"+a[1]+"_"+h;this._labelIdx[n.labelType]||(this._labelIdx[n.labelType]=[],this._labelCache[n.labelType]=[]),this._labelIdx[n.labelType].indexOf(y)===-1&&(this._labelCache[n.labelType].push({name:t,radius:n.radius,minZoom:n.minZoom,maxZoom:n.maxZoom||24,position:a}),this._labelIdx[n.labelType].push(y))},Vy.prototype.getNearestLabel=function(t,n,a){var h=null,y=this._labelCache[t];if(y){for(var b=1/0,u=0,A=y.length;u<A;u++)if(a>=y[u].minZoom&&a<=y[u].maxZoom){var k=ya(y[u].position,n);k<=y[u].radius&&k<=b&&(b=k,h=y[u])}}return h},Vy.prototype._preloadCache=function(t){if(!this._preloadedCache.has(t)){this._preloadedCache.add(t);var n={source:["Ocean label","Ocean name"],labelType:"water",minZoom:0,radius:395e4,polygonSources:["Ocean","Ocean or sea"]},a=t,h=a.indexOf("-");switch(h!==-1&&(a=a.substr(0,h)),a){case"fr":this.cache("Ocan Pacifique",n,[-170,32],t),this.cache("Ocan Pacifique",n,[-138,-27],t),this.cache("Ocan Atlantique",n,[-40,32],t),this.cache("Ocan Atlantique",n,[-17,-29],t);break;case"es":this.cache("Ocan Pacifique",n,[-170,32],t),this.cache("Ocan Pacifique",n,[-138,-27],t),this.cache("Ocano Atlntico",n,[-40,32],t),this.cache("Ocano Atlntico",n,[-17,-29],t);break;case"pt":this.cache("Oceano Pacfico",n,[-170,32],t),this.cache("Oceano Pacfico",n,[-138,-27],t),this.cache("Oceano Atlntico",n,[-40,32],t),this.cache("Oceano Atlntico",n,[-17,-29],t);break;case"ja":this.cache("",n,[-170,32],t),this.cache("",n,[-138,-27],t);break;case"en":this.cache("Pacific Ocean",n,[-170,32],t),this.cache("Pacific Ocean",n,[-138,-27],t),this.cache("Atlantic Ocean",n,[-40,32],t),this.cache("Atlantic Ocean",n,[-17,-29],t),this.cache("Indian Ocean",n,[77,-26],t)}}},Vy);function Vy(){this._labelCache={},this._labelIdx={},this._preloadedCache=new Set}var tL=(en.prototype.dispose=function(){this._disposed=!0,this._map._getMap().off("move",this._onMove),this._map._getMap().off("moveend",this._onMoveEnd),this._map._getMap().off("styledata",this._onStyleData),this._map._getMap().off("rotate",this._onRotate),this._map.getCanvas().removeEventListener("mousedown",this._onPointerDown),this._map.getCanvas().removeEventListener("touchstart",this._onPointerDown),this._map.getMapContainer().removeEventListener("keydown",this._shortcutListener)},en.prototype._getEventPos=function(t){if("touches"in t){var n=t.touches[0],a=t.target.getBoundingClientRect();return[n.pageX-a.left,n.pageY-a.top]}return[t.offsetX,t.offsetY]},en.prototype._checkThresholds=function(t,n){return this._checkZoomThreshold(t.zoom,n.zoom)||this._checkPitchThreshold(t.pitch,n.pitch)||this._checkLocThreshold(t.center,n.center)||this._checkHeadingThreshold(t.bearing,n.bearing)},en.prototype._checkZoomThreshold=function(t,n){return this._round(t)!==this._round(n)},en.prototype._checkPitchThreshold=function(t,n){return Math.abs(t-n)>=this._pitchThreshold},en.prototype._checkLocThreshold=function(t,n){var a=this._map.positionsToPixels([n,t]),h=a[0],y=a[1];return Qi.getDistance(h,y)>=this._moveThreshold},en.prototype._checkHeadingThreshold=function(t,n){t<0&&(t+=360),n<0&&(n+=360);var a=Math.abs(t-n);return 180<a&&(a=360-a),a>=this._headingThreshold},en.prototype._getLocDesc=function(t,n,a){return Zr(this,void 0,void 0,function(){var h,y,b,u,A,k,G,W,se,ne=this;return yr(this,function(Ee){switch(Ee.label){case 0:return a==="blank"?[3,3]:this._map._getMap().loaded()?[3,2]:[4,new Promise(function(Ge){return ne._map._getMap().once("idle",Ge)})];case 1:Ee.sent(),Ee.label=2;case 2:for(h={},y=this._map.positionsToPixels([t.center])[0],JA.tryCatch(this._map,function(){b=ne._map._getMap().queryRenderedFeatures(y,{layers:ne._polygonStyleLayer,filter:["==",["geometry-type"],"Polygon"]})},function(){}),u=null,b&&0<b.length&&(u=b[0]),A=null,k=0,G=this._lableConfig.length;k<G;k++)W=this._lableConfig[k],t.zoom>=W.minZoom?W.polygonSources?u&&W.polygonSources.indexOf(u.layer["source-layer"])!==-1?(A=W.labelType,this._getClosestLabel(W,t,n,h,!1)):this._getClosestLabel(W,t,n,h,!0):this._getClosestLabel(W,t,n,h,!1):this._getClosestLabel(W,t,n,h,!0);return 8<=t.zoom&&this._processRoads(h,t,n),this._labelCache.forEach(function(Ge){h[Ge]||(se=null,(Ge!=="water"&&Ge!=="majorPoi"||Ge===A)&&(se=en._labelCache.getNearestLabel(Ge,t.center,t.zoom)),se&&(h[Ge]=se.name))}),[2,this._processLocInfo(t,A,h,!0,this._restFallback)];case 3:return[2,this._processLocInfo(t,null,null,!1,!1)]}})})},en.prototype._getHeadingDesc=function(t){var n=t.bearing;switch(n<0&&(n+=360),n=this._round(n,this._headingThreshold)){case 0:case 360:return"north";case 45:return"north east";case 90:return"east";case 135:return"south east";case 180:return"south";case 225:return"south west";case 270:return"west";case 315:return"north west";default:return n+" degrees"}},en.prototype._getClosestLabel=function(t,n,a,h,y){for(var b=t.radius,u=0,A=t.source.length;u<A;u++){var k={sourceLayer:t.source[u]},G=this._map._getMap().querySourceFeatures(this._baseVectorTileSourceId,k),W=null,se=1/0,ne=this._labelCache.has(t.labelType);if(!y||y&&ne)for(var Ee=0,Ge=G.length;Ee<Ge;Ee++){var pt=G[Ee].geometry.type==="Point"?G[Ee]:fy(n.center,G[Ee].geometry);if(!y){var Wt=G[Ee].geometry.type==="Point"?ya(n.center,pt.geometry.coordinates):pt.properties.distance;Wt<se&&(se=Wt,W=G[Ee])}ne&&en._labelCache.cache(G[Ee].properties.name,t,pt.geometry.coordinates,a)}if(!y){var nt=t.labelType+"Dis";W&&se<=b&&(typeof h[nt]!="number"||se<=h[nt])&&(h[t.labelType]=W.properties.name,h[nt]=se)}}},en.prototype._processRoads=function(t,n,a,h){var y=this._map._getMap().queryRenderedFeatures(h,{filter:["==",["geometry-type"],"LineString"]});if(y){for(var b=void 0,u=void 0,A=void 0,k=void 0,G=0,W=y.length;G<W;G++)if(this._roadLayers.has(y[G].layer["source-layer"])&&y[G].properties.name&&y[G].properties.name!==""){var se=fy(n.center,y[G]);(!A||se.properties.distance<A.properties.distance)&&(b&&y[G].properties.name===b.properties.name?A=se:b&&y[G].properties.name===b.properties.name?(!k||se.properties.distance<k.properties.distance)&&(k=se,u=y[G]):(k=A,u=b,A=se,b=y[G]))}if(b&&(t.country||(t.country=b.properties.country_code,t.countryDis=0,en._labelCache.cache(t.country,{source:["Country name"],labelType:"country",radius:5e3,minZoom:0},A.geometry.coordinates,a)),t.state||(t.state=b.properties.country_subdivision,t.stateDis=0,en._labelCache.cache(t.state,{source:["State name"],labelType:"state",radius:5e3,minZoom:4},A.geometry.coordinates,a)),15<=n.zoom)){var ne=this._map.positionsToPixels([n.center,A.geometry.coordinates]),Ee=Qi.getDistance(ne[0],ne[1]);if((Ee<this._roadPixelRadius||A.properties.distance<this._minRoadDistance)&&(t.road=b.properties.name),u){var Ge=this._map.positionsToPixels([k.geometry.coordinates]);((Ee=Qi.getDistance(ne[0],Ge[0]))<this._minIntersectionPixelDistance||k.properties.distance<this._minRoadDistance)&&(t.secondRoad=u.properties.name,t.secondRoadDis=k.properties.distance)}}}},en.prototype._getActionDesc=function(t){if(this._lastCam){var n=[];if(this._checkLocThreshold(t.center,this._lastCam.center)){var a=["panned"],h=Math.round(Hu(this._lastCam.center,t.center));h===0||h===360?a.push("north"):h<90?a.push("north east"):h===90?a.push("east"):h<180?a.push("south east"):h===180?a.push("south"):h<270?a.push("south west"):h===270?a.push("west"):h<360&&a.push("north west");var y=ya(this._lastCam.center,t.center,wr.meters);a.push(1e3<y?Wo(y/1e3,2)+" kilometers":Wo(y,2)+" meters"),n.push(a.join(" "))}if(this._checkZoomThreshold(t.zoom,this._lastCam.zoom)){(a=["zoomed"]).push(this._lastCam.zoom<t.zoom?"in":"out");var b=Math.abs(this._lastCam.zoom-t.zoom);1<=b&&(b=Math.ceil(b),a.push(1<b?b+" levels":b+" level")),this._getCanonicalZoom(this._lastCam.zoom)!==this._getCanonicalZoom(t.zoom)&&a.push("to "+this._getCanonicalZoom(t.zoom)+" level"),n.push(a.join(" "))}if(this._checkPitchThreshold(t.pitch,this._lastCam.pitch)){var u=this._round(t.pitch,this._pitchThreshold);if(n.push("pitched to "+u+" degrees"),t.pitch===60||t.pitch===0){var A=t.pitch===60?"maximum":"minimum";n.push("reached "+A+" of "+t.pitch+" degrees")}}return this._checkHeadingThreshold(this._lastCam.bearing,t.bearing)&&n.push("rotated to "+this._getHeadingDesc(t)),n.join(" and ")||null}return null},en.prototype._getCanonicalZoom=function(t){return(t=this._round(t))<2?"world":t<5?"country":t<11?"state province":t<15?"city":"street"},en.prototype._processLocInfo=function(t,n,a,h,y){var b=this;return new Promise(function(u,A){var k=[];if(h){var G=[];if(a&&(n&&(n==="water"&&a.water?G.push(a.water):n==="majorPoi"&&a.majorPoi&&G.push(a.majorPoi)),G.length===0&&(a.majorPoi&&8<=t.zoom?G.push(a.majorPoi):(a.poi&&14<=t.zoom?G.push(a.poi):a.road&&15<=t.zoom&&(a.secondRoad?G.push(a.road+" & "+a.secondRoad):G.push(a.road)),a.neighbourhood&&12<=t.zoom&&G.push(a.neighbourhood),a.city&&6<=t.zoom&&G.push(a.city)),a.state&&4<=t.zoom&&G.push(a.state),G.length===0?a.water?G.push(a.water):a.country&&G.push(a.country):G.length===1&&a.state&&4<=t.zoom&&a.country&&G.push(a.country))),0<G.length)k.push("<p>Location: ",G.join(", "),".</p>");else if(y&&n!=="water")return void b._reverseGeocodeDescription(t).then(function(W){u(W)},function(){A("<p>Location: unknown</p>")})}b._returnDetailedDescriptions&&(k.push("<p>Zoom: ",Wo(t.zoom,2),".</p>"),k.push("<p>Latitude: ",Wo(t.center[1],5),".</p>"),k.push("<p>Longitude: ",Wo(t.center[0],5),".</p>")),u(k.join(""))})},en.prototype._reverseGeocodeDescription=function(t){var n=this;return new Promise(function(a){var h=n._map.getStyle();n._reverseSearch.request({position:t.center,style:h}).then(function(y){var b={};if(y&&y.addresses&&0<y.addresses.length&&y.addresses[0].address){var u=y.addresses[0].address;u.country&&(b.country=u.country,en._labelCache.cache(b.country,{source:["Country name"],labelType:"country",radius:5e3,minZoom:0},t.center,h.language)),u.countrySubdivision&&(b.state=u.countrySubdivision,en._labelCache.cache(b.state,{source:["State name"],labelType:"state",radius:5e3,minZoom:4},t.center,h.language)),u.municipality&&(b.city=u.municipality,en._labelCache.cache(b.state,{source:["Small city"],labelType:"city",radius:1e3,minZoom:10},t.center,h.language)),u.streetNameAndNumber?b.road=u.streetNameAndNumber:u.street&&(b.road=u.street)}n._processLocInfo(t,null,b,!0,!1).then(function(A){a(A)})},function(y){n._processLocInfo(t,null,null,!0,!1).then(function(b){a(b)})}).catch(function(y){n._processLocInfo(t,null,null,!0,!1).then(function(b){a(b)})})})},en.prototype._round=function(t,n){return n===void 0&&(n=1),Math.round(t/n)*n},en);function en(t,n){var a=this;this._restFallback=!0,this._disposed=!1,this._lastHeadingTime=0,this._actionQueue=[],this._pointerUpdateDelay=3e3,this._camUpdateDelay=1e3,this._headUpdateLimit=1e3,this._controlEventDelay=500,this._moveThreshold=25,this._headingThreshold=5,this._pitchThreshold=5,this._roadPixelRadius=120,this._minRoadDistance=25,this._minIntersectionPixelDistance=50,this._baseVectorTileSourceId="vectorTiles",this._lableConfig=[{source:["Ocean label","Ocean name"],labelType:"water",minZoom:0,radius:395e4,polygonSources:["Ocean","Ocean or sea"]},{source:["Sea label"],labelType:"water",minZoom:3,radius:1e6,polygonSources:["Sea","Ocean or sea"]},{source:["Country name"],labelType:"country",minZoom:0,maxZoom:5,radius:3e5},{source:["State name","State name short"],labelType:"state",minZoom:4,maxZoom:7,radius:3e5},{source:["Capital city","Large city"],labelType:"city",minZoom:8,radius:4e4},{source:["Medium city"],labelType:"city",minZoom:8,radius:3e4},{source:["Small city"],labelType:"city",minZoom:8,radius:2e4},{source:["Island label"],labelType:"city",minZoom:8,radius:1e4},{source:["Town"],labelType:"city",minZoom:10,radius:1e4},{source:["Village"],labelType:"neighbourhood",minZoom:12,radius:6e3},{source:["Amusement area label"],labelType:"poi",minZoom:14,radius:2e3,polygonSources:["Amusement park"]},{source:["Hospital label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Hospital"]},{source:["Shopping centre label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Shopping"]},{source:["Stadium label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Stadium"]},{source:["University/School label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["University"]},{source:["Zoo label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Zoo"]},{source:["Airport Label","Airport name","Airport POI"],labelType:"majorPoi",minZoom:11,radius:3e3,polygonSources:["Airport","Runway"]},{source:["National park label"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["National or state park","National park","Forest"]},{source:["Reservation label"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["Reservation"]}],this._polygonStyleLayer=["National or state park","National park","Reservation","Airport","Runway","Stadium","University","Zoo","Shopping","Hospital","Amusement park","Ocean","Sea","Ocean or sea"],this._labelCache=new Set(["city","state","country","water","majorPoi"]),this._roadLayers=new Set(["Connecting road","Connecting road tunnel","International road","International road tunnel","Local road","Local road tunnel","Major local road","Major local road tunnel","Major road","Major road tunnel","Minor local road","Minor local road tunnel","Motorway","Motorway tunnel","Secondary road","Secondary road tunnel","Toll connecting road","Toll connecting road tunnel","Toll international road","Toll international road tunnel","Toll local road","Toll local road tunnel","Toll major local road","Toll major local road tunnel","Toll major road","Toll major road tunnel","Toll minor local road","Toll minor local road tunnel","Toll motorway","Toll motorway tunnel","Toll secondary road","Toll secondary road tunnel"]),this._returnDetailedDescriptions=!1,this._shortcutListener=function(h){return Zr(a,void 0,void 0,function(){var y,b,u,A,k;return yr(this,function(G){switch(G.label){case 0:return h.altKey&&h.ctrlKey&&h.keyCode===68?(this._returnDetailedDescriptions=!this._returnDetailedDescriptions,y=this._map.getCamera(),b=this._map.getStyle(),u=b.language.toLowerCase(),A=b.style.toLowerCase(),[4,this._getLocDesc(y,u,A)]):[3,2];case 1:k=G.sent(),this._descCallback(k),G.label=2;case 2:return[2]}})})},this._onRotate=function(){a._rotateTimeout||(Date.now()-a._lastHeadingTime>=a._headUpdateLimit?a._rotateTimeout=setTimeout(a._updateHeading,ww.RotationDuration+25):a._rotateTimeout=setTimeout(a._updateHeading,a._headUpdateLimit-(Date.now()-a._lastHeadingTime)))},this._onMove=function(){a._moveTimeout&&(clearTimeout(a._moveTimeout),delete a._moveTimeout),a._controlTimeout&&(clearTimeout(a._controlTimeout),delete a._controlTimeout)},this._onMoveEnd=function(h){h.fromControl?a._controlTimeout=setTimeout(a._updateCam,a._controlEventDelay):a._updateCam()},this._onStyleData=function(){setTimeout(a._updateStyle)},this._onPointerDown=function(h){a._lastPointerPos=a._getEventPos(h),a._pointerTimeout=setTimeout(function(){return Zr(a,void 0,void 0,function(){var y,b,u,A,k;return yr(this,function(G){switch(G.label){case 0:return y=this._map.getStyle(),b=y.language.toLowerCase(),u=y.style.toLowerCase(),(A=this._map.getCamera()).center=this._map.pixelsToPositions([this._lastPointerPos])[0],[4,this._getLocDesc(A,b,u)];case 1:return k=G.sent(),this._descCallback(k),this._onPointerUp(),[2]}})})},a._pointerUpdateDelay),a._map.getCanvas().addEventListener("mousemove",a._onPointerMove),a._map.getCanvas().addEventListener("touchmove",a._onPointerMove),a._map.getCanvas().addEventListener("mouseup",a._onPointerUp),a._map.getCanvas().addEventListener("touchend",a._onPointerUp)},this._onPointerMove=function(h){var y=a._getEventPos(h),b=a._lastPointerPos[0]-y[0],u=a._lastPointerPos[1]-y[1];Math.sqrt(b*b+u*u)>a._moveThreshold&&a._onPointerUp()},this._onPointerUp=function(){clearTimeout(a._pointerTimeout),delete a._pointerTimeout,a._map.getCanvas().removeEventListener("mousemove",a._onPointerMove),a._map.getCanvas().removeEventListener("touchmove",a._onPointerMove),a._map.getCanvas().removeEventListener("mouseup",a._onPointerUp),a._map.getCanvas().removeEventListener("touchend",a._onPointerUp)},this._updateHeading=function(){var h=a._map.getCamera();if(!a._lastHead||a._checkHeadingThreshold(h.bearing,a._lastHead)){var y=a._getHeadingDesc(h);a._lastHead=h.bearing,a._descCallback("<p>Map heading "+y+".</p>"),a._lastHeadingTime=Date.now()}delete a._rotateTimeout},this._updateStyle=function(){return Zr(a,void 0,void 0,function(){var h,y,b,u,A;return yr(this,function(k){switch(k.label){case 0:return h=this._map.getCamera(),y=this._map.getStyle(),b=y.language.toLowerCase(),u=y.style.toLowerCase(),this._lastLang===b?[3,2]:(en._labelCache._preloadCache(b),[4,this._getLocDesc(h,b,u)]);case 1:return A=k.sent(),[3,4];case 2:return this._lastStyle===u||this._lastStyle!=="blank"?[3,4]:[4,this._getLocDesc(h,b,u)];case 3:A=k.sent(),k.label=4;case 4:return this._lastLang=b,this._lastStyle=u,A&&this._descCallback(A),[2]}})})},this._updateCam=function(h){h===void 0&&(h=!1);var y=a._map.getCamera();if(!a._lastCam||0<a._actionQueue.length||a._checkThresholds(y,a._lastCam)){var b=a._map.getStyle(),u=b.language.toLowerCase(),A=b.style.toLowerCase(),k=a._getActionDesc(y);k&&a._actionQueue.push(k),a._lastCam=y,a._moveTimeout&&(clearTimeout(a._moveTimeout),delete a._moveTimeout),a._moveTimeout=setTimeout(function(){return Zr(a,void 0,void 0,function(){var G;return yr(this,function(W){switch(W.label){case 0:return clearTimeout(this._rotateTimeout),delete this._rotateTimeout,[4,this._getLocDesc(y,u,A)];case 1:return G=W.sent(),0<this._actionQueue.length?(this._descCallback("<p>Map "+this._actionQueue.join(", then ")+".</p>"+G),this._actionQueue=[]):this._descCallback(G),[2]}})})},h?0:a._camUpdateDelay)}},this._map=t,this._descCallback=n,this._reverseSearch=new QA(t),en._labelCache||(en._labelCache=new eL),this._lastLang=this._map.getStyle().language.toLowerCase(),en._labelCache._preloadCache(this._lastLang),this._map.events.addOnce("load",function(){a._disposed||(a._updateCam(!0),a._map._getMap().on("move",a._onMove),a._map._getMap().on("moveend",a._onMoveEnd),a._map._getMap().on("styledata",a._onStyleData),a._map._getMap().on("rotate",a._onRotate),a._map.getCanvas().addEventListener("mousedown",a._onPointerDown),a._map.getCanvas().addEventListener("touchstart",a._onPointerDown))}),this._map.getMapContainer().addEventListener("keydown",this._shortcutListener)}var F_,rL=function(t){var n=this;this.addToMap=function(){n.initializeMapLiveStateInfo(),n.initializeMapStyleInfo(),n.createMapKeyBindingInfo(),n.map.getMapContainer().setAttribute("role","application"),n.map.getMapContainer().setAttribute("aria-label","Map Application"),n.map.getCanvas().setAttribute("aria-label","Interactive Map"),n.map.getCanvas().setAttribute("aria-describedby","atlas-map-state atlas-map-style atlas-map-shortcuts"),n.map.getCanvas().setAttribute("alt","Interactive Map")},this.removeFromMap=function(){n.mapViewDesc!=null&&n.mapViewDesc.dispose(),delete n.mapViewDesc,n.atlasMapKeyBindings!=null&&n.map.getCanvasContainer().removeChild(n.atlasMapKeyBindings),delete n.atlasMapKeyBindings,n.atlasMapLiveStateInfo!=null&&n.map.getCanvasContainer().removeChild(n.atlasMapLiveStateInfo),delete n.atlasMapLiveStateInfo,n.atlasMapStyleInfo!=null&&n.map.getCanvasContainer().removeChild(n.atlasMapStyleInfo),delete n.atlasMapStyleInfo,n.map.getMapContainer().removeAttribute("role"),n.map.getMapContainer().removeAttribute("aria-label"),n.map.getCanvas().removeAttribute("aria-label"),n.map.getCanvas().removeAttribute("aria-describedby"),n.map.getCanvas().removeAttribute("alt"),n.map.events.remove("styledata",n.updateMapStyle)},this.createMapKeyBindingInfo=function(){n.atlasMapKeyBindings=document.createElement("div"),n.atlasMapKeyBindings.setAttribute("tabindex","-1"),n.atlasMapKeyBindings.setAttribute("aria-hidden","true"),n.atlasMapKeyBindings.id="atlas-map-shortcuts",n.atlasMapKeyBindings.classList.add("hidden-accessible-element"),n.atlasMapKeyBindings.innerHTML=["Map shortcuts:","Zoom out: hyphen.","Zoom in: plus.","Pan right 100 pixels: right arrow.","Pan left 100 pixels: left arrow.","Pan up 100 pixels: up arrow.","Pan down 100 pixels: down arrow.","Rotate 15 degrees clockwise: shift + right arrow.","Rotate 15 degrees counter clockwise: shift + left arrow.","Increase pitch 10 degrees: shift + up arrow.","Decrease pitch 10 degrees: shift + down arrow.","Toggle verbose map state: control + alt + D.","Jump focus to the map: Escape."].join(`
`),n.map.getCanvasContainer().appendChild(n.atlasMapKeyBindings),n.atlasMapKeyBindings.setAttribute("aria-live","polite")},this.initializeMapLiveStateInfo=function(){n.mapViewDesc=new tL(n.map,n.updateMapState),n.atlasMapLiveStateInfo=document.createElement("div"),n.atlasMapLiveStateInfo.setAttribute("tabindex","-1"),n.atlasMapLiveStateInfo.setAttribute("aria-hidden","true"),n.atlasMapLiveStateInfo.id="atlas-map-state",n.atlasMapLiveStateInfo.classList.add("hidden-accessible-element"),n.map.getCanvasContainer().appendChild(n.atlasMapLiveStateInfo),n.atlasMapLiveStateInfo.setAttribute("aria-live","polite")},this.initializeMapStyleInfo=function(){n.atlasMapStyleInfo=document.createElement("div"),n.atlasMapStyleInfo.setAttribute("tabindex","-1"),n.atlasMapStyleInfo.setAttribute("aria-hidden","true"),n.atlasMapStyleInfo.id="atlas-map-style",n.atlasMapStyleInfo.classList.add("hidden-accessible-element"),n.updateMapStyle(),n.map.events.add("styledata",n.updateMapStyle),n.map.getCanvasContainer().appendChild(n.atlasMapStyleInfo),n.atlasMapStyleInfo.setAttribute("aria-live","polite")},this.updateMapStyle=function(){n.atlasMapStyleInfo.innerHTML="<p>Map style: "+n.map.getStyle().style+".</p>"},this.updateMapState=function(a){n.atlasMapLiveStateInfo.innerHTML=a},this.map=t},nL=function(t){var n=this;this.callCounter=0,this.listenerEnabled=!1,this.flowComponent=void 0,this.flowPath=void 0,this.addToMap=function(){if(!n.map._isReady())throw new Error("Traffic flow could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before enabling traffic flow.");n.listenerEnabled||(n.map.events.add("styledata",n.addToMap),n.listenerEnabled=!0);var a=n.map.getStyle(),h=n.map.getTraffic(),y=n.map.styles.getFlowPath(a,h);if(y&&n.flowPath!==y){n.callCounter++;var b=n.callCounter;n.map.styles.getFlowComponent(a,h).then(function(u){if(n.callCounter===b){n.flowComponent&&(n.map.layers.remove(n.flowComponent.layer),n.map.sources.remove(n.flowComponent.sources),delete n.flowComponent);var A=n.map.layers.getLayers(),k=A.findIndex(function(W){return W.getId()==="transit"}),G=k!==-1?A[k+1]:void 0;n.map.sources.add(u.sources),n.map.layers.add(u.layer,G),n.flowComponent=u,n.flowPath=y}})}},this.removeFromMap=function(){n.callCounter++,n.listenerEnabled&&(n.map.events.remove("styledata",n.addToMap),n.listenerEnabled=!1),n.flowPath&&delete n.flowPath,n.flowComponent&&(n.map.layers.remove(n.flowComponent.layer),n.map.sources.remove(n.flowComponent.sources),delete n.flowComponent)},this.map=t},iL=(ze(JC,F_=sr),JC);function JC(){var t=F_!==null&&F_.apply(this,arguments)||this;return t.version="1.0",t.bbox=void 0,t.zoom=void 0,t.params={},t}var oL=(QC.prototype.request=function(t){var n,a=new iL().merge(t),h=this.map.getServiceOptions().domain;n=hr.getWest(a.bbox)<-180&&180<hr.getEast(a.bbox)?hr.getSouth(a.bbox)+",-180,"+hr.getNorth(a.bbox)+",180":hr.getSouth(a.bbox)+","+Dn(hr.getWest(a.bbox))+","+hr.getNorth(a.bbox)+","+Dn(hr.getEast(a.bbox));var y={domain:h,path:"traffic/incident/detail/json",queryParams:ot({"api-version":a.version,projection:"EPSG4326",style:"s3",boundingbox:n,boundingzoom:a.zoom,trafficmodelid:-1},a.params)};return new gi(this.map.authentication.signRequest(y)).get()},QC);function QC(t){this.map=t}var eS,pd,qy,aL=(ze(rl,eS=xs),rl.getIncidentTypeName=function(t,n){switch(t){case 0:return n.Unknown;case 1:return n.Accident;case 2:return n.Fog;case 3:return n.Danger;case 4:return n.Rain;case 5:return n.Ice;case 6:return n.Jam;case 7:return n.LaneClosed;case 8:return n.RoadClosed;case 9:return n.RoadWorks;case 10:return n.Wind;case 11:return n.Flood;case 12:return n.Detour;default:return n.Unknown}},rl.getIncidentTypeIconName=function(t){switch(t){case 0:return"unknown";case 1:return"accident";case 2:return"fog";case 3:return"danger";case 4:return"rain";case 5:return"ice";case 6:return"jam";case 7:return"lane-closed";case 8:return"road-closed";case 9:return"road-work";case 10:return"wind";case 11:return"flood";case 12:return"detour";default:return"unknown"}},rl.getSeverityColorName=function(t){switch(t){case 0:return"grey";case 1:return"yellow";case 2:return"orange";case 3:return"red";case 4:default:return"grey"}},rl.getSeverityColorHexCode=function(t){switch(t){case 0:return"#B5B6B7";case 1:return"#F4C951";case 2:return"#F4873F";case 3:return"#F04F4E";case 4:default:return"#B5B6B7"}},rl);function rl(t,n){var a=new Xs(new Po(t.op.x,t.op.y)),h={icon:rl.getSeverityColorName(t.ty)+"-"+rl.getIncidentTypeIconName(t.ic),incidentType:rl.getIncidentTypeName(t.ic,n),description:t.d,length:t.l,delay:t.dl,from:t.f,color:rl.getSeverityColorHexCode(t.ty),to:t.t,id:t.id};return eS.call(this,a,h)||this}(qy=pd=pd||{}).DELAY="delay",qy.LENGTH="length",qy.FROM="from",qy.TO="to";var sL=(j_.build=function(t,n){n===void 0&&(n="en-US");var a=document.createElement("div");a.classList.add("incident-popup-title"),a.classList.add("font-segoeui-b"),a.setAttribute("tabindex","0"),a.innerText=t.properties.incidentType,a.setAttribute("aria-label","Incident Type "+t.properties.incidentType);var h=document.createElement("div");h.classList.add("incident-popup-subtitle"),h.classList.add("font-segoeui-b"),h.setAttribute("aria-label","Incident Description "+t.properties.description),h.setAttribute("tabindex","0"),h.innerText=t.properties.description;var y=document.createElement("div");y.classList.add("incident-popup-header"),y.style.backgroundColor=t.properties.color,y.appendChild(a),y.appendChild(h);var b=document.createElement("div");if(b.classList.add("incident-popup-body"),t.properties.delay){var u=Math.floor(t.properties.delay/60)+" min",A=this.createInfoSection(u,pd.DELAY);b.appendChild(A)}if(t.properties.length){var k=new Intl.NumberFormat([n,"en-US"],{maximumFractionDigits:2}),G=void 0;if(n==="en-US"){var W=Gu(t.properties.length,"meters","miles");G=k.format(W)+" miles"}else{var se=Gu(t.properties.length,"meters","kilometers");G=k.format(se)+" km"}var ne=this.createInfoSection(G,pd.LENGTH);b.appendChild(ne)}if(t.properties.from){var Ee=this.createInfoSection(t.properties.from,pd.FROM);b.appendChild(Ee)}if(t.properties.to){var Ge=this.createInfoSection(t.properties.to,pd.TO);b.appendChild(Ge)}var pt=document.createElement("div");return pt.classList.add("incident-popup-content"),pt.appendChild(y),pt.appendChild(b),new i_({content:pt,position:t.geometry.coordinates})},j_.createInfoSection=function(t,n){var a=document.createElement("div");a.classList.add("incident-popup-info");var h=document.createElement("div");h.classList.add("icon"),h.classList.add(n);var y=document.createElement("span");return y.classList.add("message"),y.classList.add("font-segoeui"),y.setAttribute("aria-label","Incident "+n+" "+t),y.setAttribute("tabindex","0"),y.innerText=t,a.appendChild(h),a.appendChild(y),a},j_);function j_(){}var U_,lL=function(t){var n=this;this.incidentLayerName="incidents",this.popups=new Ua,this.addToMap=function(){n.map.addPins([],{name:n.incidentLayerName,cluster:!1}),n.map.addEventListener("mouseenter",n.incidentLayerName,n.cursorToPointer),n.map.addEventListener("mouseleave",n.incidentLayerName,n.cursorToDefault),n.map.addEventListener("click",n.incidentLayerName,n.openIncidentPopup),n.map.events.add("moveend",n.updateIncidents),n.map.events.add("styledata",n.updateLanguage),n.updateIncidents()},this.removeFromMap=function(){n.map.removeLayers([n.incidentLayerName]),n.map.removeEventListener("click",n.incidentLayerName,n.openIncidentPopup),n.map.removeEventListener("mouseenter",n.incidentLayerName,n.cursorToPointer),n.map.removeEventListener("mouseleave",n.incidentLayerName,n.cursorToDefault),n.map.events.remove("moveend",n.updateIncidents),n.map.events.remove("styledata",n.updateLanguage),n.cleanUpPopups()},this.updateIncidents=function(){var a=Math.ceil(n.map.getCamera().zoom),h=n.map.getCamera().bounds;n.incidentLanguage=n.map.getStyle().language;var y=n.map._getLocalizedStrings(),b=n.incidentService.request({bbox:h,zoom:a,params:{expandCluster:!0,originalPosition:!0,language:n.incidentLanguage}});Promise.all([b,y]).then(function(u){var A=u[0],k=u[1];if(n.map.getTraffic().incidents){var G=[];n.cleanUpPopups();for(var W=0,se=A.tm.poi||[];W<se.length;W++)for(var ne=se[W],Ee=function(Wt){if(hr.containsPosition(h,[Wt.op.x,Wt.op.y])){var nt=new aL(Wt,k);G.push(nt);var qt=sL.build(nt,n.incidentLanguage);n.popups.set(nt.properties.id,qt),n.map.events.add("open",qt,function(){n.openPopupId=nt.properties.id,n.popups.forEach(function(tn,ho){n.openPopupId!==ho&&tn.close()})}),n.map.events.add("close",qt,function(){n.openPopupId===nt.properties.id&&delete n.openPopupId}),n.openPopupId===nt.properties.id?n.popups.get(nt.properties.id).open(n.map):n.popups.get(nt.properties.id).attach(n.map)}},Ge=0,pt=ne.cpoi||[ne];Ge<pt.length;Ge++)Ee(pt[Ge]);n.map.addPins(G,{overwrite:!0,name:n.incidentLayerName})}})},this.cursorToPointer=function(a){n.map.getCanvas().style.cursor="pointer"},this.cursorToDefault=function(a){n.map.getCanvas().style.cursor=""},this.openIncidentPopup=function(a){var h=a.features[0].properties.id;n.popups.has(h)&&n.popups.get(h).open(n.map)},this.cleanUpPopups=function(){n.popups.forEach(function(a){a.remove()}),n.popups.clear()},this.updateLanguage=function(){n.map.getStyle().language!==n.incidentLanguage&&n.updateIncidents()},this.map=t,this.incidentService=new oL(this.map)},tS=(ze(rS,U_=sr),rS);function rS(){var t=U_!==null&&U_.apply(this,arguments)||this;return t.interactive=!0,t.scrollZoomInteraction=!0,t.boxZoomInteraction=!0,t.dragRotateInteraction=!0,t.dragPanInteraction=!0,t.keyboardInteraction=!0,t.dblClickZoomInteraction=!0,t.touchInteraction=!0,t.wheelZoomRate=1/450,t}var uL=(V_.prototype.enable=function(){this.map.getMapContainer().addEventListener("keydown",this._onKeyDown)},V_.prototype.disable=function(){this.map.getMapContainer().removeEventListener("keydown",this._onKeyDown)},V_);function V_(t){var n=this;this._onKeyDown=function(a){a.keyCode===27&&n.map.getCanvas().focus()},this.map=t}var cL=(q_.prototype.enable=function(){this.map._getMap().on("touchstart",this._onTouchStart),this.map._getMap().on("touchmove",this._onTouchMove),this.map._getMap().on("touchend",this._onTouchEnd),this.map._getMap().on("touchcancel",this._onTouchCancel)},q_.prototype.disable=function(){this.map._getMap().off("touchstart",this._onTouchStart),this.map._getMap().off("touchmove",this._onTouchMove),this.map._getMap().off("touchend",this._onTouchEnd),this.map._getMap().off("touchcancel",this._onTouchCancel)},q_);function q_(t){var n=this;this.minDiffX=70,this.maxDiffY=100,this.minDiff=30,this.delay=160,this._onTouchStart=function(a){if(a.points.length===2){var h=a.points[0].y-a.points[1].y,y=a.points[0].x-a.points[1].x;Math.abs(y)>=n.minDiffX&&Math.abs(h)<=n.maxDiffY&&(a.originalEvent.preventDefault(),n.map._getMap().touchZoomRotate.disable(),n.map._getMap().dragPan.disable(),n.dpPoint=a.point,n.dpPitch=n.map._getMap().getPitch(),n.startTiming=Date.now(),n.startDistance=Math.hypot(y,h),n.startEventData=a)}},this._onTouchMove=function(a){if(n.dpPoint!==void 0&&n.dpPitch!==void 0){a.preventDefault(),a.originalEvent.preventDefault();var h=a.points[0].y-a.points[1].y,y=a.points[0].x-a.points[1].x,b=Math.hypot(y,h);if(Math.abs(b-n.startDistance)>=n.minDiff)return n.dpPoint&&(n.map._getMap().touchZoomRotate.enable(),n.map._getMap().dragPan.enable(),n.map._getMap().touchZoomRotate.onStart(Date.now()-n.startTiming>=n.delay?a.originalEvent:n.startEventData.originalEvent)),void(n.dpPoint=void 0);if(Date.now()-n.startTiming>=n.delay){var u=.5*(n.dpPoint.y-a.point.y);n.map._getMap().setPitch(n.dpPitch+u)}}},this._onTouchEnd=function(){n.dpPoint&&(n.map._getMap().touchZoomRotate.enable(),n.map._getMap().dragPan.enable()),n.dpPoint=void 0},this._onTouchCancel=function(){n.dpPoint&&(n.map._getMap().touchZoomRotate.enable(),n.map._getMap().dragPan.enable()),n.dpPoint=void 0},this.map=t}var pL=(Z_.prototype.enable=function(){this.map.getCanvasContainer().addEventListener("gesturestart",this._onGestureStart),this.map.getCanvasContainer().addEventListener("gesturechange",this._onGestureChange),this.map.getCanvasContainer().addEventListener("touchstart",this._onTouchStart),this.map.getCanvasContainer().addEventListener("touchend",this._onTouchEnd)},Z_.prototype.disable=function(){this.map.getCanvasContainer().removeEventListener("gesturestart",this._onGestureStart),this.map.getCanvasContainer().removeEventListener("gesturechange",this._onGestureChange),this.map.getCanvasContainer().removeEventListener("touchstart",this._onTouchStart),this.map.getCanvasContainer().removeEventListener("touchend",this._onTouchEnd)},Z_);function Z_(t){var n=this;this._onGestureStart=function(a){n.hasTouch||(a.preventDefault(),n.initZoom=n.map.getCamera().zoom)},this._onGestureChange=function(a){n.hasTouch||(a.preventDefault(),n.map.setCamera({zoom:n.initZoom+a.scale-1}))},this._onTouchStart=function(a){n.hasTouch=!0},this._onTouchEnd=function(a){a.touches.length===0&&(n.hasTouch=!1)},this.map=t}var hL=(hd.prototype.addToMap=function(){this.added||(this.added=!0,this._setInteractions(this.options))},hd.prototype.removeFromMap=function(){this.added&&(this.added=!1,this._setInteractions({interactive:!1}))},hd.prototype.setOptions=function(t){this.options=new tS().merge(this.options,t),this.added&&this._setInteractions(this.options)},hd.prototype.getOptions=function(){return Object.assign({},this.options)},hd.prototype._setInteractions=function(t){t.interactive?(t.boxZoomInteraction?this.map._getMap().boxZoom.enable():this.map._getMap().boxZoom.disable(),t.dblClickZoomInteraction?this.map._getMap().doubleClickZoom.enable():this.map._getMap().doubleClickZoom.disable(),t.dragPanInteraction?this.map._getMap().dragPan.enable():this.map._getMap().dragPan.disable(),t.dragRotateInteraction?this.map._getMap().dragRotate.enable():this.map._getMap().dragRotate.disable(),t.keyboardInteraction?(this.map._getMap().keyboard.enable(),this.focusShortcut.enable()):(this.map._getMap().keyboard.disable(),this.focusShortcut.disable()),t.scrollZoomInteraction?(this.map._getMap().scrollZoom.enable(),this.map._getMap().scrollZoom.setWheelZoomRate(t.wheelZoomRate)):this.map._getMap().scrollZoom.disable(),t.touchInteraction?(this.map._getMap().touchZoomRotate.enable(),this.mobilePitch.enable()):(this.map._getMap().touchZoomRotate.disable(),this.mobilePitch.disable()),this.pinchZoom.enable()):(this.map._getMap().boxZoom.disable(),this.map._getMap().doubleClickZoom.disable(),this.map._getMap().dragPan.disable(),this.map._getMap().dragRotate.disable(),this.map._getMap().keyboard.disable(),this.focusShortcut.disable(),this.map._getMap().scrollZoom.disable(),this.map._getMap().touchZoomRotate.disable(),this.mobilePitch.disable(),this.pinchZoom.disable())},hd);function hd(t,n){this.added=!1,this.map=t,this.mobilePitch=new cL(t),this.focusShortcut=new uL(t),this.pinchZoom=new pL(t),this.options=new tS().merge(n)}var nS=C(function(t){var n=(n=function(a){if(this.REQUEST_TYPE={LOGIN:"LOGIN",RENEW_TOKEN:"RENEW_TOKEN",UNKNOWN:"UNKNOWN"},this.RESPONSE_TYPE={ID_TOKEN_TOKEN:"id_token token",TOKEN:"token"},this.CONSTANTS={ACCESS_TOKEN:"access_token",EXPIRES_IN:"expires_in",ID_TOKEN:"id_token",ERROR_DESCRIPTION:"error_description",SESSION_STATE:"session_state",ERROR:"error",STORAGE:{TOKEN_KEYS:"adal.token.keys",ACCESS_TOKEN_KEY:"adal.access.token.key",EXPIRATION_KEY:"adal.expiration.key",STATE_LOGIN:"adal.state.login",STATE_RENEW:"adal.state.renew",NONCE_IDTOKEN:"adal.nonce.idtoken",SESSION_STATE:"adal.session.state",USERNAME:"adal.username",IDTOKEN:"adal.idtoken",ERROR:"adal.error",ERROR_DESCRIPTION:"adal.error.description",LOGIN_REQUEST:"adal.login.request",LOGIN_ERROR:"adal.login.error",RENEW_STATUS:"adal.token.renew.status",ANGULAR_LOGIN_REQUEST:"adal.angular.login.request"},RESOURCE_DELIMETER:"|",CACHE_DELIMETER:"||",LOADFRAME_TIMEOUT:6e3,TOKEN_RENEW_STATUS_CANCELED:"Canceled",TOKEN_RENEW_STATUS_COMPLETED:"Completed",TOKEN_RENEW_STATUS_IN_PROGRESS:"In Progress",LOGGING_LEVEL:{ERROR:0,WARN:1,INFO:2,VERBOSE:3},LEVEL_STRING_MAP:{0:"ERROR:",1:"WARNING:",2:"INFO:",3:"VERBOSE:"},POPUP_WIDTH:483,POPUP_HEIGHT:600},n.prototype._singletonInstance)return n.prototype._singletonInstance;if((n.prototype._singletonInstance=this).instance="https://login.microsoftonline.com/",this.config={},this.callback=null,this.popUp=!1,this.isAngular=!1,this._user=null,this._activeRenewals={},this._loginInProgress=!1,this._acquireTokenInProgress=!1,this._renewStates=[],this._callBackMappedToRenewStates={},this._callBacksMappedToRenewStates={},this._openedWindows=[],this._requestType=this.REQUEST_TYPE.LOGIN,window._adalInstance=this,a.displayCall&&typeof a.displayCall!="function")throw new Error("displayCall is not a function");if(!a.clientId)throw new Error("clientId is required");this.config=this._cloneConfig(a),this.config.navigateToLoginRequestUrl===void 0&&(this.config.navigateToLoginRequestUrl=!0),this.config.popUp&&(this.popUp=!0),this.config.callback&&typeof this.config.callback=="function"&&(this.callback=this.config.callback),this.config.instance&&(this.instance=this.config.instance),this.config.loginResource||(this.config.loginResource=this.config.clientId),this.config.redirectUri||(this.config.redirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.postLogoutRedirectUri||(this.config.postLogoutRedirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.anonymousEndpoints||(this.config.anonymousEndpoints=[]),this.config.isAngular&&(this.isAngular=this.config.isAngular),this.config.loadFrameTimeout&&(this.CONSTANTS.LOADFRAME_TIMEOUT=this.config.loadFrameTimeout)},typeof window<"u"&&(window.Logging={piiLoggingEnabled:!1,level:0,log:function(a){}}),n.prototype.login=function(){if(this._loginInProgress)this.info("Login in progress");else{this._loginInProgress=!0;var a=this._guid();this.config.state=a,this._idTokenNonce=this._guid();var h=this._getItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST);h&&h!==""?this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""):h=window.location.href,this.verbose("Expected state: "+a+" startPage:"+h),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,h),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,a,!0),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var y=this._getNavigateUrl("id_token",null)+"&nonce="+encodeURIComponent(this._idTokenNonce);this.config.displayCall?this.config.displayCall(y):this.popUp?(this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._renewStates.push(a),this.registerCallback(a,this.config.clientId,this.callback),this._loginPopup(y)):this.promptUser(y)}},n.prototype._openPopup=function(a,h,y,b){try{var u=window.screenLeft?window.screenLeft:window.screenX,A=window.screenTop?window.screenTop:window.screenY,k=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,G=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,W=k/2-y/2+u,se=G/2-b/2+A,ne=window.open(a,h,"width="+y+", height="+b+", top="+se+", left="+W);return ne.focus&&ne.focus(),ne}catch(Ee){return this.warn("Error opening popup, "+Ee.message),this._loginInProgress=!1,this._acquireTokenInProgress=!1,null}},n.prototype._handlePopupError=function(a,h,y,b,u){this.warn(b),this._saveItem(this.CONSTANTS.STORAGE.ERROR,y),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,b),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,u),h&&this._activeRenewals[h]&&(this._activeRenewals[h]=null),this._loginInProgress=!1,this._acquireTokenInProgress=!1,a&&a(b,null,y)},n.prototype._loginPopup=function(a,h,y){var b=this._openPopup(a,"login",this.CONSTANTS.POPUP_WIDTH,this.CONSTANTS.POPUP_HEIGHT),u=y||this.callback;if(b!=null){if(this._openedWindows.push(b),this.config.redirectUri.indexOf("#")!=-1)var A=this.config.redirectUri.split("#")[0];else A=this.config.redirectUri;var k=this,G=window.setInterval(function(){if(!b||b.closed||b.closed===void 0){var se="Popup Window closed",ne="Popup Window closed by UI action/ Popup Window handle destroyed due to cross zone navigation in IE/Edge";return k.isAngular&&k._broadcast("adal:popUpClosed",ne+k.CONSTANTS.RESOURCE_DELIMETER+se),k._handlePopupError(u,h,se,ne,ne),void window.clearInterval(G)}try{var Ee=b.location;if(encodeURI(Ee.href).indexOf(encodeURI(A))!=-1)return k.isAngular?k._broadcast("adal:popUpHashChanged",Ee.hash):k.handleWindowCallback(Ee.hash),window.clearInterval(G),k._loginInProgress=!1,k._acquireTokenInProgress=!1,k.info("Closing popup window"),k._openedWindows=[],void b.close()}catch{}},1)}else{var W="Popup Window is null. This can happen if you are using IE";this._handlePopupError(u,h,"Error opening popup",W,W)}},n.prototype._broadcast=function(a,h){function y(u,A){A=A||{bubbles:!1,cancelable:!1,detail:void 0};var k=document.createEvent("CustomEvent");return k.initCustomEvent(u,A.bubbles,A.cancelable,A.detail),k}typeof window.CustomEvent!="function"&&(y.prototype=window.Event.prototype,window.CustomEvent=y);var b=new CustomEvent(a,{detail:h});window.dispatchEvent(b)},n.prototype.loginInProgress=function(){return this._loginInProgress},n.prototype._hasResource=function(a){var h=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);return h&&!this._isEmpty(h)&&-1<h.indexOf(a+this.CONSTANTS.RESOURCE_DELIMETER)},n.prototype.getCachedToken=function(a){if(!this._hasResource(a))return null;var h=this._getItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+a),y=this._getItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+a),b=this.config.expireOffsetSeconds||300;return y&&y>this._now()+b?h:(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+a,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+a,0),null)},n.prototype.getCachedUser=function(){if(this._user)return this._user;var a=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);return this._user=this._createUser(a),this._user},n.prototype.registerCallback=function(a,h,y){this._activeRenewals[h]=a,this._callBacksMappedToRenewStates[a]||(this._callBacksMappedToRenewStates[a]=[]);var b=this;this._callBacksMappedToRenewStates[a].push(y),this._callBackMappedToRenewStates[a]||(this._callBackMappedToRenewStates[a]=function(u,A,k,G){b._activeRenewals[h]=null;for(var W=0;W<b._callBacksMappedToRenewStates[a].length;++W)try{b._callBacksMappedToRenewStates[a][W](u,A,k,G)}catch(se){b.warn(se)}b._callBacksMappedToRenewStates[a]=null,b._callBackMappedToRenewStates[a]=null})},n.prototype._renewToken=function(a,h,y){this.info("renewToken is called for resource:"+a);var b=this._addAdalFrame("adalRenewFrame"+a),u=this._guid()+"|"+a;this.config.state=u,this._renewStates.push(u),this.verbose("Renew token Expected state: "+u),y=y||"token";var A=this._urlRemoveQueryStringParameter(this._getNavigateUrl(y,a),"prompt");y===this.RESPONSE_TYPE.ID_TOKEN_TOKEN&&(this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),A+="&nonce="+encodeURIComponent(this._idTokenNonce)),A+="&prompt=none",A=this._addHintParameters(A),this.registerCallback(u,a,h),this.verbosePii("Navigate to:"+A),b.src="about:blank",this._loadFrameTimeout(A,"adalRenewFrame"+a,a)},n.prototype._renewIdToken=function(a,h){this.info("renewIdToken is called");var y=this._addAdalFrame("adalIdTokenFrame"),b=this._guid()+"|"+this.config.clientId;this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this.config.state=b,this._renewStates.push(b),this.verbose("Renew Idtoken Expected state: "+b);var u=h==null?null:this.config.clientId,A=(h=h||"id_token",this._urlRemoveQueryStringParameter(this._getNavigateUrl(h,u),"prompt"));A+="&prompt=none",A=this._addHintParameters(A),A+="&nonce="+encodeURIComponent(this._idTokenNonce),this.registerCallback(b,this.config.clientId,a),this.verbosePii("Navigate to:"+A),y.src="about:blank",this._loadFrameTimeout(A,"adalIdTokenFrame",this.config.clientId)},n.prototype._urlContainsQueryStringParameter=function(a,h){return new RegExp("[\\?&]"+a+"=").test(h)},n.prototype._urlRemoveQueryStringParameter=function(a,h){var y=new RegExp("(\\&"+h+"=)[^&]+");return a=a.replace(y,""),y=new RegExp("("+h+"=)[^&]+&"),a=a.replace(y,""),y=new RegExp("("+h+"=)[^&]+"),a=a.replace(y,"")},n.prototype._loadFrameTimeout=function(a,h,y){this.verbose("Set loading state to pending for: "+y),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+y,this.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS),this._loadFrame(a,h);var b=this;setTimeout(function(){if(b._getItem(b.CONSTANTS.STORAGE.RENEW_STATUS+y)===b.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS){b.verbose("Loading frame has timed out after: "+b.CONSTANTS.LOADFRAME_TIMEOUT/1e3+" seconds for resource "+y);var u=b._activeRenewals[y];u&&b._callBackMappedToRenewStates[u]&&b._callBackMappedToRenewStates[u]("Token renewal operation failed due to timeout",null,"Token Renewal Failed"),b._saveItem(b.CONSTANTS.STORAGE.RENEW_STATUS+y,b.CONSTANTS.TOKEN_RENEW_STATUS_CANCELED)}},b.CONSTANTS.LOADFRAME_TIMEOUT)},n.prototype._loadFrame=function(a,h){var y=this;y.info("LoadFrame: "+h);var b=h;setTimeout(function(){var u=y._addAdalFrame(b);u.src!==""&&u.src!=="about:blank"||(u.src=a,y._loadFrame(a,b))},500)},n.prototype.acquireToken=function(a,h){if(this._isEmpty(a))return this.warn("resource is required"),void h("resource is required",null,"resource is required");var y=this.getCachedToken(a);return y?(this.info("Token is already in cache for resource:"+a),void h(null,y,null)):this._user||this.config.extraQueryParameter&&this.config.extraQueryParameter.indexOf("login_hint")!==-1?void(this._activeRenewals[a]?this.registerCallback(this._activeRenewals[a],a,h):(this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,a===this.config.clientId?this._user?(this.verbose("renewing idtoken"),this._renewIdToken(h)):(this.verbose("renewing idtoken and access_token"),this._renewIdToken(h,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)):this._user?(this.verbose("renewing access_token"),this._renewToken(a,h)):(this.verbose("renewing idtoken and access_token"),this._renewToken(a,h,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)))):(this.warn("User login is required"),void h("User login is required",null,"login required"))},n.prototype.acquireTokenPopup=function(a,h,y,b){if(this._isEmpty(a))return this.warn("resource is required"),void b("resource is required",null,"resource is required");if(!this._user)return this.warn("User login is required"),void b("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void b("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var u=this._guid()+"|"+a;this.config.state=u,this._renewStates.push(u),this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,this.verbose("Renew token Expected state: "+u);var A=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",a),"prompt");if(A+="&prompt=select_account",h&&(A+=h),y&&A.indexOf("&claims")===-1)A+="&claims="+encodeURIComponent(y);else if(y&&A.indexOf("&claims")!==-1)throw new Error("Claims cannot be passed as an extraQueryParameter");A=this._addHintParameters(A),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+a),this.registerCallback(u,a,b),this._loginPopup(A,a,b)},n.prototype.acquireTokenRedirect=function(a,h,y){if(this._isEmpty(a))return this.warn("resource is required"),void b("resource is required",null,"resource is required");var b=this.callback;if(!this._user)return this.warn("User login is required"),void b("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void b("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var u=this._guid()+"|"+a;this.config.state=u,this.verbose("Renew token Expected state: "+u);var A=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",a),"prompt");if(A+="&prompt=select_account",h&&(A+=h),y&&A.indexOf("&claims")===-1)A+="&claims="+encodeURIComponent(y);else if(y&&A.indexOf("&claims")!==-1)throw new Error("Claims cannot be passed as an extraQueryParameter");A=this._addHintParameters(A),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+a),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,window.location.href),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,u,!0),this.promptUser(A)},n.prototype.promptUser=function(a){a?(this.infoPii("Navigate to:"+a),window.location.replace(a)):this.info("Navigate url is empty")},n.prototype.clearCache=function(){this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._renewStates=[],this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"");var a=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);if(!this._isEmpty(a)){a=a.split(this.CONSTANTS.RESOURCE_DELIMETER);for(var h=0;h<a.length&&a[h]!=="";h++)this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+a[h],""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+a[h],0)}this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,"")},n.prototype.clearCacheForResource=function(a){this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._hasResource(a)&&(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+a,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+a,0))},n.prototype.logOut=function(){var a;if(this.clearCache(),this._user=null,this.config.logOutUri)a=this.config.logOutUri;else{var h="common",y="";this.config.tenant&&(h=this.config.tenant),this.config.postLogoutRedirectUri&&(y="post_logout_redirect_uri="+encodeURIComponent(this.config.postLogoutRedirectUri)),a=this.instance+h+"/oauth2/logout?"+y}this.infoPii("Logout navigate to: "+a),this.promptUser(a)},n.prototype._isEmpty=function(a){return a===void 0||!a||a.length===0},n.prototype.getUser=function(a){if(typeof a!="function")throw new Error("callback is not a function");if(this._user)a(null,this._user);else{var h=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);this._isEmpty(h)?(this.warn("User information is not available"),a("User information is not available",null)):(this.info("User exists in cache: "),this._user=this._createUser(h),a(null,this._user))}},n.prototype._addHintParameters=function(a){if(this._user&&this._user.profile){if(this._user.profile.sid&&a.indexOf("&prompt=none")!==-1)this._urlContainsQueryStringParameter("sid",a)||(a+="&sid="+encodeURIComponent(this._user.profile.sid));else if(this._user.profile.upn&&(this._urlContainsQueryStringParameter("login_hint",a)||(a+="&login_hint="+encodeURIComponent(this._user.profile.upn)),!this._urlContainsQueryStringParameter("domain_hint",a)&&-1<this._user.profile.upn.indexOf("@"))){var h=this._user.profile.upn.split("@");a+="&domain_hint="+encodeURIComponent(h[h.length-1])}}return a},n.prototype._createUser=function(a){var h=null,y=this._extractIdToken(a);return y&&y.hasOwnProperty("aud")&&(y.aud.toLowerCase()===this.config.clientId.toLowerCase()?(h={userName:"",profile:y},y.hasOwnProperty("upn")?h.userName=y.upn:y.hasOwnProperty("email")&&(h.userName=y.email)):this.warn("IdToken has invalid aud field")),h},n.prototype._getHash=function(a){return-1<a.indexOf("#/")?a=a.substring(a.indexOf("#/")+2):-1<a.indexOf("#")&&(a=a.substring(1)),a},n.prototype.isCallback=function(a){a=this._getHash(a);var h=this._deserialize(a);return h.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||h.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||h.hasOwnProperty(this.CONSTANTS.ID_TOKEN)},n.prototype.getLoginError=function(){return this._getItem(this.CONSTANTS.STORAGE.LOGIN_ERROR)},n.prototype.getRequestInfo=function(a){a=this._getHash(a);var h=this._deserialize(a),y={valid:!1,parameters:{},stateMatch:!1,stateResponse:"",requestType:this.REQUEST_TYPE.UNKNOWN};if(h&&((y.parameters=h).hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||h.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||h.hasOwnProperty(this.CONSTANTS.ID_TOKEN))){y.valid=!0;var b="";if(!h.hasOwnProperty("state"))return this.warn("No state returned"),y;if(this.verbose("State: "+h.state),b=h.state,y.stateResponse=b,this._matchState(y))return y;if(!y.stateMatch&&window.parent){y.requestType=this._requestType;for(var u=this._renewStates,A=0;A<u.length;A++)if(u[A]===y.stateResponse){y.stateMatch=!0;break}}}return y},n.prototype._matchNonce=function(a){var h=this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN);if(h){h=h.split(this.CONSTANTS.CACHE_DELIMETER);for(var y=0;y<h.length;y++)if(h[y]===a.profile.nonce)return!0}return!1},n.prototype._matchState=function(a){var h=this._getItem(this.CONSTANTS.STORAGE.STATE_LOGIN);if(h){h=h.split(this.CONSTANTS.CACHE_DELIMETER);for(var y=0;y<h.length;y++)if(h[y]===a.stateResponse)return a.requestType=this.REQUEST_TYPE.LOGIN,a.stateMatch=!0}var b=this._getItem(this.CONSTANTS.STORAGE.STATE_RENEW);if(b){for(b=b.split(this.CONSTANTS.CACHE_DELIMETER),y=0;y<b.length;y++)if(b[y]===a.stateResponse)return a.requestType=this.REQUEST_TYPE.RENEW_TOKEN,a.stateMatch=!0}return!1},n.prototype._getResourceFromState=function(a){if(a){var h=a.indexOf("|");if(-1<h&&h+1<a.length)return a.substring(h+1)}return""},n.prototype.saveTokenFromHash=function(a){this.info("State status:"+a.stateMatch+"; Request type:"+a.requestType),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var h,y=this._getResourceFromState(a.stateResponse);a.parameters.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)?(this.infoPii("Error :"+a.parameters.error+"; Error description:"+a.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),this._saveItem(this.CONSTANTS.STORAGE.ERROR,a.parameters.error),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,a.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),a.requestType===this.REQUEST_TYPE.LOGIN&&(this._loginInProgress=!1,this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,a.parameters.error_description))):a.stateMatch?(this.info("State is right"),a.parameters.hasOwnProperty(this.CONSTANTS.SESSION_STATE)&&this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,a.parameters[this.CONSTANTS.SESSION_STATE]),a.parameters.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)&&(this.info("Fragment has access token"),this._hasResource(y)||(h=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,h+y+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+y,a.parameters[this.CONSTANTS.ACCESS_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+y,this._expiresIn(a.parameters[this.CONSTANTS.EXPIRES_IN]))),a.parameters.hasOwnProperty(this.CONSTANTS.ID_TOKEN)&&(this.info("Fragment has id token"),this._loginInProgress=!1,this._user=this._createUser(a.parameters[this.CONSTANTS.ID_TOKEN]),this._user&&this._user.profile?this._matchNonce(this._user)?(this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,a.parameters[this.CONSTANTS.ID_TOKEN]),y=this.config.loginResource?this.config.loginResource:this.config.clientId,this._hasResource(y)||(h=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,h+y+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+y,a.parameters[this.CONSTANTS.ID_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+y,this._user.profile.exp)):(this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"Nonce received: "+this._user.profile.nonce+" is not same as requested: "+this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN)),this._user=null):(a.parameters.error="invalid id_token",a.parameters.error_description="Invalid id_token. id_token: "+a.parameters[this.CONSTANTS.ID_TOKEN],this._saveItem(this.CONSTANTS.STORAGE.ERROR,"invalid id_token"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid id_token. id_token: "+a.parameters[this.CONSTANTS.ID_TOKEN])))):(a.parameters.error="Invalid_state",a.parameters.error_description="Invalid_state. state: "+a.stateResponse,this._saveItem(this.CONSTANTS.STORAGE.ERROR,"Invalid_state"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid_state. state: "+a.stateResponse)),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+y,this.CONSTANTS.TOKEN_RENEW_STATUS_COMPLETED)},n.prototype.getResourceForEndpoint=function(a){if(this.config&&this.config.anonymousEndpoints){for(var h=0;h<this.config.anonymousEndpoints.length;h++)if(-1<a.indexOf(this.config.anonymousEndpoints[h]))return null}if(this.config&&this.config.endpoints){for(var y in this.config.endpoints)if(-1<a.indexOf(y))return this.config.endpoints[y]}return(-1<a.indexOf("http://")||-1<a.indexOf("https://"))&&this._getHostFromUri(a)!==this._getHostFromUri(this.config.redirectUri)?null:this.config.loginResource},n.prototype._getHostFromUri=function(a){var h=String(a).replace(/^(https?:)\/\//,"");return h=h.split("/")[0]},n.prototype.handleWindowCallback=function(a){if(a==null&&(a=window.location.hash),this.isCallback(a)){var h=null,y=!1;0<this._openedWindows.length&&this._openedWindows[this._openedWindows.length-1].opener&&this._openedWindows[this._openedWindows.length-1].opener._adalInstance?(h=this._openedWindows[this._openedWindows.length-1].opener._adalInstance,y=!0):window.parent&&window.parent._adalInstance&&(h=window.parent._adalInstance);var b,u,A=h.getRequestInfo(a),k=null;u=y||window.parent!==window?h._callBackMappedToRenewStates[A.stateResponse]:h.callback,h.info("Returned from redirect url"),h.saveTokenFromHash(A),A.requestType===this.REQUEST_TYPE.RENEW_TOKEN&&window.parent?(window.parent!==window?h.verbose("Window is in iframe, acquiring token silently"):h.verbose("acquiring token interactive in progress"),b=A.parameters[h.CONSTANTS.ACCESS_TOKEN]||A.parameters[h.CONSTANTS.ID_TOKEN],k=h.CONSTANTS.ACCESS_TOKEN):A.requestType===this.REQUEST_TYPE.LOGIN&&(b=A.parameters[h.CONSTANTS.ID_TOKEN],k=h.CONSTANTS.ID_TOKEN);var G=A.parameters[h.CONSTANTS.ERROR_DESCRIPTION],W=A.parameters[h.CONSTANTS.ERROR];try{u&&u(G,b,W,k)}catch(se){h.error("Error occurred in user defined callback function: "+se)}window.parent!==window||y||(h.config.navigateToLoginRequestUrl?window.location.href=h._getItem(h.CONSTANTS.STORAGE.LOGIN_REQUEST):window.location.hash="")}},n.prototype._getNavigateUrl=function(a,h){var y="common";this.config.tenant&&(y=this.config.tenant);var b=this.instance+y+"/oauth2/authorize"+this._serialize(a,this.config,h)+this._addLibMetadata();return this.info("Navigate url:"+b),b},n.prototype._extractIdToken=function(a){var h=this._decodeJwt(a);if(!h)return null;try{var y=h.JWSPayload,b=this._base64DecodeStringUrlSafe(y);return b?JSON.parse(b):(this.info("The returned id_token could not be base64 url safe decoded."),null)}catch(u){this.error("The returned id_token could not be decoded",u)}return null},n.prototype._base64DecodeStringUrlSafe=function(a){return a=a.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(escape(window.atob(a))):decodeURIComponent(escape(this._decode(a)))},n.prototype._decode=function(a){var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y=(a=String(a).replace(/=+$/,"")).length;if(y%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var b,u,A,k,G,W,se,ne,Ee="",Ge=0;Ge<y;Ge+=4){if(b=h.indexOf(a.charAt(Ge)),u=h.indexOf(a.charAt(Ge+1)),A=h.indexOf(a.charAt(Ge+2)),k=h.indexOf(a.charAt(Ge+3)),Ge+2===y-1){W=(G=b<<18|u<<12|A<<6)>>16&255,se=G>>8&255,Ee+=String.fromCharCode(W,se);break}if(Ge+1===y-1){W=(G=b<<18|u<<12)>>16&255,Ee+=String.fromCharCode(W);break}W=(G=b<<18|u<<12|A<<6|k)>>16&255,se=G>>8&255,ne=255&G,Ee+=String.fromCharCode(W,se,ne)}return Ee},n.prototype._decodeJwt=function(a){if(this._isEmpty(a))return null;var h=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(a);return!h||h.length<4?(this.warn("The returned id_token is not parseable."),null):{header:h[1],JWSPayload:h[2],JWSSig:h[3]}},n.prototype._convertUrlSafeToRegularBase64EncodedString=function(a){return a.replace("-","+").replace("_","/")},n.prototype._serialize=function(a,h,y){var b=[];if(h!==null){b.push("?response_type="+a),b.push("client_id="+encodeURIComponent(h.clientId)),y&&b.push("resource="+encodeURIComponent(y)),b.push("redirect_uri="+encodeURIComponent(h.redirectUri)),b.push("state="+encodeURIComponent(h.state)),h.hasOwnProperty("slice")&&b.push("slice="+encodeURIComponent(h.slice)),h.hasOwnProperty("extraQueryParameter")&&b.push(h.extraQueryParameter);var u=h.correlationId?h.correlationId:this._guid();b.push("client-request-id="+encodeURIComponent(u))}return b.join("&")},n.prototype._deserialize=function(a){function h(k){return decodeURIComponent(k.replace(b," "))}var y,b=/\+/g,u=/([^&=]+)=([^&]*)/g,A={};for(y=u.exec(a);y;)A[h(y[1])]=h(y[2]),y=u.exec(a);return A},n.prototype._decimalToHex=function(a){for(var h=a.toString(16);h.length<2;)h="0"+h;return h},n.prototype._guid=function(){var a=window.crypto||window.msCrypto;if(a&&a.getRandomValues){var h=new Uint8Array(16);return a.getRandomValues(h),h[6]|=64,h[6]&=79,h[8]|=128,h[8]&=191,this._decimalToHex(h[0])+this._decimalToHex(h[1])+this._decimalToHex(h[2])+this._decimalToHex(h[3])+"-"+this._decimalToHex(h[4])+this._decimalToHex(h[5])+"-"+this._decimalToHex(h[6])+this._decimalToHex(h[7])+"-"+this._decimalToHex(h[8])+this._decimalToHex(h[9])+"-"+this._decimalToHex(h[10])+this._decimalToHex(h[11])+this._decimalToHex(h[12])+this._decimalToHex(h[13])+this._decimalToHex(h[14])+this._decimalToHex(h[15])}for(var y="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",b="0123456789abcdef",u=0,A="",k=0;k<36;k++)y[k]!=="-"&&y[k]!=="4"&&(u=16*Math.random()|0),y[k]==="x"?A+=b[u]:y[k]==="y"?(u&=3,A+=b[u|=8]):A+=y[k];return A},n.prototype._expiresIn=function(a){return a=a||3599,this._now()+parseInt(a,10)},n.prototype._now=function(){return Math.round(new Date().getTime()/1e3)},n.prototype._addAdalFrame=function(a){if(a!==void 0){this.info("Add adal frame to document:"+a);var h=document.getElementById(a);if(!h){if(document.createElement&&document.documentElement&&(window.opera||window.navigator.userAgent.indexOf("MSIE 5.0")===-1)){var y=document.createElement("iframe");y.setAttribute("id",a),y.setAttribute("aria-hidden","true"),y.style.visibility="hidden",y.style.position="absolute",y.style.width=y.style.height=y.borderWidth="0px",h=document.getElementsByTagName("body")[0].appendChild(y)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeEnd",'<iframe name="'+a+'" id="'+a+'" style="display:none"></iframe>');window.frames&&window.frames[a]&&(h=window.frames[a])}return h}},n.prototype._saveItem=function(a,h,y){if(this.config&&this.config.cacheLocation&&this.config.cacheLocation==="localStorage"){if(!this._supportsLocalStorage())return this.info("Local storage is not supported"),!1;if(y){var b=this._getItem(a)||"";localStorage.setItem(a,b+h+this.CONSTANTS.CACHE_DELIMETER)}else localStorage.setItem(a,h);return!0}return this._supportsSessionStorage()?(sessionStorage.setItem(a,h),!0):(this.info("Session storage is not supported"),!1)},n.prototype._getItem=function(a){return this.config&&this.config.cacheLocation&&this.config.cacheLocation==="localStorage"?this._supportsLocalStorage()?localStorage.getItem(a):(this.info("Local storage is not supported"),null):this._supportsSessionStorage()?sessionStorage.getItem(a):(this.info("Session storage is not supported"),null)},n.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem("storageTest","A"),window.localStorage.getItem("storageTest")=="A"&&(window.localStorage.removeItem("storageTest"),!window.localStorage.getItem("storageTest")))}catch{return!1}},n.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem("storageTest","A"),window.sessionStorage.getItem("storageTest")=="A"&&(window.sessionStorage.removeItem("storageTest"),!window.sessionStorage.getItem("storageTest")))}catch{return!1}},n.prototype._cloneConfig=function(a){if(a===null||typeof a!="object")return a;var h={};for(var y in a)a.hasOwnProperty(y)&&(h[y]=a[y]);return h},n.prototype._addLibMetadata=function(){return"&x-client-SKU=Js&x-client-Ver="+this._libVersion()},n.prototype.log=function(a,h,y,b){if(a<=Logging.level){if(!Logging.piiLoggingEnabled&&b)return;var u=new Date().toUTCString(),A="";A=this.config.correlationId?u+":"+this.config.correlationId+"-"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[a]+" "+h:u+":"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[a]+" "+h,y&&(A+=`
stack:
`+y.stack),Logging.log(A)}},n.prototype.error=function(a,h){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,a,h)},n.prototype.warn=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,a,null)},n.prototype.info=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,a,null)},n.prototype.verbose=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,a,null)},n.prototype.errorPii=function(a,h){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,a,h,!0)},n.prototype.warnPii=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,a,null,!0)},n.prototype.infoPii=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,a,null,!0)},n.prototype.verbosePii=function(a){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,a,null,!0)},n.prototype._libVersion=function(){return"1.0.17"},t.exports&&(t.exports=n,t.exports.inject=function(a){return new n(a)}),n)});nS.inject;function iS(t){this.message=t}(iS.prototype=new Error).name="InvalidCharacterError";var oS=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new iS("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,h,y=0,b=0,u="";h=n.charAt(b++);~h&&(a=y%4?64*a+h:h,y++%4)&&(u+=String.fromCharCode(255&a>>(-2*y&6))))h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(h);return u};function dL(t){var n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(oS(n).replace(/(.)/g,function(a,h){var y=h.charCodeAt(0).toString(16).toUpperCase();return y.length<2&&(y="0"+y),"%"+y}))}catch{return oS(n)}}function Zy(t){this.message=t}(Zy.prototype=new Error).name="InvalidTokenError";function aS(t,n){if(typeof t!="string")throw new Zy("Invalid token specified");var a=(n=n||{}).header===!0?0:1;try{return JSON.parse(dL(t.split(".")[a]))}catch(h){throw new Zy("Invalid token specified: "+h.message)}}aS.InvalidTokenError=Zy;var fL=(dr.prototype.initialize=function(){var t=this;return this.initPromise||(this.initPromise=new Promise(function(n,a){if(t.options.authType===d.AuthenticationType.subscriptionKey)n();else if(t.options.authType===d.AuthenticationType.aad){if(t.options.authContext=t.options.authContext||dr.getDefaultAuthContext(t.options),t.options.authContext.handleWindowCallback(),t.options.authContext.getLoginError())return void a(new Error("Error logging in the AAD users: "+t.options.authContext.getLoginError()));if(t.options.authContext.isCallback(window.location.hash))return void t.map.dispose();setTimeout(function(){return t._loginAndAcquire(n,a)})}else t.options.authType===d.AuthenticationType.anonymous?n(t._triggerTokenFetch()):a(new Error("An invalid authentication type was specified."))})),this.initPromise},dr.getDefaultAuthContext=function(t){if(!t.aadAppId)throw new Error("No AAD app ID was specified.");if(!t.aadTenant)throw new Error("No AAD tenant was specified.");return this.defaultAuthContext||(this.defaultAuthContext=new nS({instance:t.aadInstance||Ne,tenant:t.aadTenant,clientId:t.aadAppId,cacheLocation:this.constants.preferredCacheLocation})),this.defaultAuthContext},dr.prototype._loginAndAcquire=function(t,n){function a(){h.options.authContext.acquireToken(Et,function(A){if(A)n(new Error(A));else{var k={map:h.map,type:dr.constants.events.tokenAcquired};h.map.events.invoke(dr.constants.events.tokenAcquired,k),t()}})}var h=this,y=this.options.authContext.getCachedToken(this.options.aadAppId),b=this.options.authContext.getCachedUser();if(y&&b)a();else{this.options.authContext.loginInProgress()||this.options.authContext.login();var u=setInterval(function(){h.options.authContext.loginInProgress()||(clearInterval(u),h.options.authContext.getCachedToken(h.options.aadAppId)?a():n(new Error(h.options.authContext.getLoginError()||"The AAD authentication context is not logged-in for the specified app ID: "+h.options.aadAppId)))},25)}},dr.prototype.getAuthType=function(){return this.options.authType},dr.prototype.getClientId=function(){return this.options.clientId},dr.prototype.getToken=function(){var t=this;if(this.options.authType===d.AuthenticationType.aad){var n=this.options.authContext.getCachedToken(Et);return n||(this.options.authContext.getCachedUser()||this.options.authContext.login(),this.options.authContext.acquireToken(Et,function(y,b){if(!y){n=b;var u={map:t.map,type:dr.constants.events.tokenAcquired};t.map.events.invoke(dr.constants.events.tokenAcquired,u)}})),n}if(this.options.authType===d.AuthenticationType.anonymous){var a=this._getItem(dr.constants.storage.accessTokenKey);if(a){var h=this._getTokenExpiry(a);if(h<300&&0<h)this._triggerTokenFetch();else if(h<=0)throw this._saveItem(dr.constants.storage.accessTokenKey,""),new Error(dr.constants.errors.tokenExpired)}else this._triggerTokenFetch();return a}if(this.options.authType===d.AuthenticationType.subscriptionKey)return this.options.subscriptionKey},dr.prototype._getTokenExpiry=function(t){var n=aS(t).exp,a=this._getCurrentTime();return 0<n-a?n-a:-1},dr.prototype._storeAccessToken=function(t){this._saveItem(dr.constants.storage.accessTokenKey,t);var n={map:this.map,type:dr.constants.events.tokenAcquired};this.map.events.invoke(dr.constants.events.tokenAcquired,n)},dr.prototype._saveItem=function(t,n){return this._supportsLocalStorage()?(localStorage.setItem(t,n),!0):!!this._supportsSessionStorage()&&(sessionStorage.setItem(t,n),!0)},dr.prototype._getItem=function(t){return this._supportsLocalStorage()?localStorage.getItem(t):this._supportsSessionStorage()?sessionStorage.getItem(t):null},dr.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem(dr.constants.storage.testStorageKey,"A"),window.localStorage.getItem(dr.constants.storage.testStorageKey)==="A"&&(window.localStorage.removeItem(dr.constants.storage.testStorageKey),!window.localStorage.getItem(dr.constants.storage.testStorageKey)))}catch{return!1}},dr.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem(dr.constants.storage.testStorageKey,"A"),window.sessionStorage.getItem(dr.constants.storage.testStorageKey)==="A"&&(window.sessionStorage.removeItem(dr.constants.storage.testStorageKey),!window.sessionStorage.getItem(dr.constants.storage.testStorageKey)))}catch{return!1}},dr.prototype._getCurrentTime=function(){return Math.round(new Date().getTime()/1e3)},dr.prototype.signRequest=function(t){t.headers=t.headers||{},t.headers[Ht]=this.sessionId,t.headers[Be]=Xe,t.headers[ct]="MapControl/"+Vr+" (Web)";var n=this.getToken();switch(this.options.authType){case d.AuthenticationType.aad:case d.AuthenticationType.anonymous:t.headers[Oe]=this.options.clientId,t.headers[$e]=We+n;break;case d.AuthenticationType.subscriptionKey:if("url"in t)t.url.indexOf("?")!==-1?t.url+="&subscription-key="+n:t.url+="?&subscription-key="+n;else{if(!("domain"in t))throw new Error("Could not determine if the provided object was UrlOptions or RequestParameters");t.queryParams=t.queryParams||{},t.queryParams["subscription-key"]=n}break;default:throw new Error("An invalid authentication type was specified")}return t},dr.constants={preferredCacheLocation:"localStorage",storage:{accessTokenKey:"access.token.key",testStorageKey:"testStorage"},events:{tokenAcquired:"tokenacquired"},tokenExpiresIn:3599,tokenRefreshClockSkew:300,errors:{tokenExpired:"Token Expired, Try again"}},dr);function dr(t){var n=this;this._triggerTokenFetch=function(){return new Promise(function(h,y){n.options.getToken(function(b){try{var u=n._getTokenExpiry(b)-dr.constants.tokenRefreshClockSkew;n._storeAccessToken(b),clearTimeout(n.tokenTimeOutHandle),n.tokenTimeOutHandle=setTimeout(n._triggerTokenFetch,1e3*u),h()}catch{y(new Error("Invalid token returned by getToken function"))}},function(b){y(b)},n.map)})};var a=t.getServiceOptions();this.options=a.authOptions,this.sessionId=a.sessionId,this.map=t}var mL=(dd.prototype.add=function(t,n){if(Array.isArray(t))for(var a=0,h=t;a<h.length;a++){var y=h[a];this._add(y,n)}else this._add(t,n)},dd.prototype.getControls=function(){return Array.from(this.controls)},dd.prototype.remove=function(t){if(Array.isArray(t))for(var n=0,a=t;n<a.length;n++){var h=a[n];this._remove(h)}else this._remove(t)},dd.prototype._add=function(t,n){this.controls.add(t);var a=new Uf().merge(n),h=t.onAdd(this.map,n),y=this.controlContainer.getElementsByClassName(a.position);if(!(0<y.length))throw new Error("Control position "+a.position+" does not exist.");y.item(0).appendChild(h)},dd.prototype._remove=function(t){t.onRemove(),this.controls.delete(t)},dd);function dd(t){for(var n in this.map=t,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("atlas-control-container"),d.ControlPosition)if(d.ControlPosition.hasOwnProperty(n)){var a=document.createElement("div");a.classList.add(d.ControlPosition[n]),a.classList.add("subcontrol-container"),this.controlContainer.appendChild(a)}this.map.getMapContainer().appendChild(this.controlContainer),this.controls=new Set}var gL=(fd.prototype.addCallback=function(t,n,a,h,y){var b,u,A=this;if(h)b=function(k){var G=k.lngLat?new Po(k.lngLat.lng,k.lngLat.lat):void 0,W=k.point?[k.point.x,k.point.y]:void 0,se=k.features?k.features.map(function(Ee){return new xs(Ee.geometry,Ee.properties,Ee.id)}):[],ne={type:k.type,originalEvent:k.originalEvent,position:G,coordinate:W,features:se};a(ne)};else switch(t){case"data":case"sourcedata":case"styledata":b=function(k){var G=ot(ot({dataType:k.dataType},k.dataType==="source"&&ot(ot(ot({isSourceLoaded:k.isSourceLoaded},k.sourceDataType&&{sourceDataType:k.sourceDataType}),{source:A.map.sources.getById(k.sourceId)}),k.tile&&{tile:{id:{x:k.tile.tileID.canonical.x,y:k.tile.tileID.canonical.y,z:k.tile.tileID.canonical.z},size:k.tile.tileSize,state:k.tile.state}})),{map:A.map,type:k.type});y&&A.map.events._removeListener(t,n,a),a(G)};break;case"error":b=function(k){var G={error:k.error,map:A.map,type:k.type};y&&A.map.events._removeListener(t,n,a),a(G)};break;case"touchstart":case"touchend":case"touchmove":case"touchcancel":b=function(k){if(k.originalEvent){if(k.originalEvent===u)return;u=k.originalEvent}var G=k.point?new Qi(k.point.x,k.point.y):void 0,W=k.points?k.points.map(function(pt){return new Qi(pt.x,pt.y)}):[],se=k.lngLat?new Po(k.lngLat.lng,k.lngLat.lat):void 0,ne=k.lngLats?k.lngLats.map(function(pt){return new Po(pt.lng,pt.lat)}):[],Ee=se?A.map.layers.getRenderedShapes(new Xs(se),n?[n]:void 0):[],Ge={map:A.map,originalEvent:k.originalEvent,pixel:G,pixels:W,position:se,positions:ne,shapes:Ee,layerId:n||void 0,preventDefault:function(){return k.preventDefault()},type:k.type};y&&A.map.events._removeListener(t,n,a),a(Ge)};break;case"mousedown":case"mouseup":case"mouseover":case"mousemove":case"click":case"dblclick":case"mouseout":case"mouseenter":case"mouseleave":case"contextmenu":b=function(k){if(k.originalEvent){if(k.originalEvent===u)return;u=k.originalEvent}var G=k.lngLat?new Po(k.lngLat.lng,k.lngLat.lat):void 0,W=k.point?new Qi(k.point.x,k.point.y):void 0,se=G?A.map.layers.getRenderedShapes(new Xs(G),n?[n]:void 0):[],ne={map:A.map,originalEvent:k.originalEvent,position:G,pixel:W,preventDefault:function(){return k.preventDefault()},shapes:se,layerId:n||void 0,type:k.type};y&&A.map.events._removeListener(t,n,a),a(ne)};break;case"styleimagemissing":b=function(k){y&&A.map.events._removeListener(t,n,a),a(k.id)};break;case"wheel":b=function(k){if(k.originalEvent){if(k.originalEvent===u)return;u=k.originalEvent}var G={map:A.map,originalEvent:k.originalEvent,preventDefault:function(){return k.preventDefault()},type:k.type};y&&A.map.events._removeListener(t,n,a),a(G)};break;case"resize":b=function(k){var G={map:A.map,type:k.type};for(var W in k)W!=="type"&&W!=="target"&&(G[W]=k[W]);y&&A.map.events._removeListener(t,n,a),a(G)};break;default:b=function(k){var G={map:A.map,type:k.type};k.originalEvent&&(G.originalEvent=k.originalEvent),y&&A.map.events._removeListener(t,n,a),a(G)}}this.callbacks.has(n)||this.callbacks.set(n,new Ua),this.callbacks.get(n).has(t)||this.callbacks.get(n).set(t,new Ua),this.callbacks.get(n).get(t).set(a,[b,y])},fd.prototype.removeCallback=function(t,n,a){this.callbacks.has(n)&&this.callbacks.get(n).has(t)&&this.callbacks.get(n).get(t).has(a)&&this.callbacks.get(n).get(t).delete(a)},fd.prototype.getModifiedCallback=function(t,n,a){if(this.callbacks.has(n)&&this.callbacks.get(n).has(t)&&this.callbacks.get(n).get(t).has(a))return this.callbacks.get(n).get(t).get(a)[0]},fd.prototype.getLayerCallbacks=function(t){if(this.callbacks.has(t))return this.callbacks.get(t)},fd.prototype.getEventCallbacks=function(t,n){if(this.callbacks.has(n)){var a=this.callbacks.get(n);if(a.has(t))return a.get(t)}},fd);function fd(t){this.callbacks=new Ua,this.map=t}var yL=(_a.prototype.add=function(t,n,a){if(typeof n=="function")this._addGlobalListener(t,n,!1,!1);else for(var h=0,y=n=Array.isArray(n)?n:[n];h<y.length;h++){var b=y[h];b instanceof zn&&zn._isMBoxEvent(t)?this._addLayerListener(t,b,a,!1,!1):b._addEventListener(t,a,!1)}},_a.prototype.addOnce=function(t,n,a){typeof n=="function"?this._addGlobalListener(t,n,!1,!0):n instanceof zn&&zn._isMBoxEvent(t)?this._addLayerListener(t,n,a,!1,!0):n._addEventListener(t,a,!0)},_a.prototype._addLegacy=function(t,n,a){typeof n=="function"?this._addGlobalListener(t,n,!0,!1):this._addLayerListener(t,n,a,!0,!1)},_a.prototype._addLayerListener=function(t,n,a,h,y){var b=n instanceof zn?n.getId():n,u=this.map.layers.getLayerById(b),A=this.mapCallbackHandler.getModifiedCallback(t,b,a);if(A&&u)for(var k=0,G=u._getLayerIds();k<G.length;k++){var W=G[k];this.map._getMap().off(t,W,A)}if(this.mapCallbackHandler.addCallback(t,b,a,h,y),u){A=this.mapCallbackHandler.getModifiedCallback(t,b,a);for(var se=0,ne=u._getLayerIds();se<ne.length;se++)W=ne[se],this.map._getMap().on(t,W,A)}},_a.prototype._addGlobalListener=function(t,n,a,h){var y=this.mapCallbackHandler.getModifiedCallback(t,"",n);if(y&&this.map._getMap().off(t,y),this.mapCallbackHandler.addCallback(t,"",n,a,h),y=this.mapCallbackHandler.getModifiedCallback(t,"",n),t==="load"&&this.map._isLoaded()){var b={type:"load",map:this.map};setTimeout(function(){return y(b)})}else if(t==="ready"){if(this.map._isReady()){var u={type:"ready",map:this.map};setTimeout(function(){return y(u)})}}else this.map._getMap().on(t,y)},_a.prototype.invoke=function(t,n,a){if(a===void 0)this._invokeListeners(t,"",n);else if(n instanceof zn&&zn._isMBoxEvent(t))this._invokeListeners(t,n.getId(),a);else{if(!(n instanceof _p))throw new Error("The invoke target is invalid.");n._invokeEvent(t,a)}},_a.prototype._invokeListeners=function(t,n,a){var h=this,y=this.mapCallbackHandler.getEventCallbacks(t,n);y?y.forEach(function(b,u){b[0],b[1]&&h._removeListener(t,n,u),u(a)}):t==="error"&&console.error("error"in a?a.error:a)},_a.prototype.remove=function(t,n,a){if(typeof n=="function")this._removeListener(t,"",n);else for(var h=0,y=n=Array.isArray(n)?n:[n];h<y.length;h++){var b=y[h];b instanceof zn&&zn._isMBoxEvent(t)?this._removeListener(t,b,a):b._removeEventListener(t,a)}},_a.prototype._removeLegacy=function(t,n,a){typeof n=="function"?this._removeListener(t,"",n):this._removeListener(t,n,a)},_a.prototype._removeListener=function(t,n,a){var h=n instanceof zn?n.getId():n,y=this.mapCallbackHandler.getModifiedCallback(t,h,a);if(y)if(h){var b=this.map.layers.getLayerById(h);if(b)for(var u=0,A=b._getLayerIds();u<A.length;u++){var k=A[u];this.map._getMap().off(t,k,y)}}else this.map._getMap().off(t,y);this.mapCallbackHandler.removeCallback(t,h,a)},_a.prototype._enableLayerEvents=function(t){var n=this,a=this.mapCallbackHandler.getLayerCallbacks(t.getId());a&&a.forEach(function(h,y){h.forEach(function(b){for(var u=b[0],A=0,k=t._getLayerIds();A<k.length;A++){var G=k[A];n.map._getMap().on(y,G,u)}})})},_a.prototype._disableLayerEvents=function(t){var n=this,a=this.mapCallbackHandler.getLayerCallbacks(t.getId());a&&a.forEach(function(h,y){h.forEach(function(b){for(var u=b[0],A=0,k=t._getLayerIds();A<k.length;A++){var G=k[A];n.map._getMap().off(y,G,u)}})})},_a);function _a(t){this.map=t,this.mapCallbackHandler=new gL(this.map)}var vL=(Np.prototype.add=function(t,n){if(Array.isArray(t))for(var a=0,h=t;a<h.length;a++){var y=h[a];this._addMarker(y,n)}else this._addMarker(t,n)},Np.prototype._addMarker=function(t,n){t._addToMap(this.map,n),this.markers.add(t)},Np.prototype.getMarkers=function(){return Array.from(this.markers)},Np.prototype.remove=function(t){if(Array.isArray(t))for(var n=0,a=t;n<a.length;n++){var h=a[n];this._removeMarker(h)}else this._removeMarker(t)},Np.prototype._removeMarker=function(t){var n=this;t instanceof s_?(t._removeFromMap(),this.markers.delete(t)):this.markers.forEach(function(a){a._getId()===t&&(a._removeFromMap(),n.markers.delete(a))})},Np.prototype.clear=function(){var t=this;this.markers.forEach(function(n){n._removeFromMap(),t.markers.delete(n)})},Np);function Np(t){this.markers=new Set,this.map=t}var _L=(ac.prototype.add=function(t,n){var a=this;return new Promise(function(h,y){if(a.userImages.has(t))h();else if(n instanceof HTMLImageElement||n instanceof ImageData)a.map._getMap().addImage(t,n),a.userImages.set(t,n),h();else if(typeof n=="string"){var b,u=void 0;u=/<svg/i.test(n)&&!/^data:/i.test(n)?"data:image/svg+xml;base64,"+window.btoa(n):n;var A=!1;a.map._sendRequest(u,"Image").then(function(k){if(!A)return k.blob()}).then(function(k){if(!A){clearTimeout(b);var G=new Image;G.onload=function(){a.map._getMap().addImage(t,G),a.userImages.set(t,G),h()},G.onerror=G.onabort=function(){y("Failed to load image into HTML element.")},G.src=URL.createObjectURL(k)}}).catch(function(){A||(clearTimeout(b),y("Failed to load image into HTML element."))}),b=setTimeout(function(){A=!0,y("Failed to load image within specified timeout: "+a.imageLoadTimeout+" ms.")},a.imageLoadTimeout)}})},ac.prototype.clear=function(){var t=this;this.userImages.forEach(function(n,a){t.map._getMap().removeImage(a)}),this.userImages.clear()},ac.prototype.getImageIds=function(){var t=[];return this.userImages.forEach(function(n,a){t.push(a)}),t},ac.prototype.createFromTemplate=function(t,n,a,h,y){a=a||"#1A73AA",h=h||"#fff";var b=F3(n,y);return b=b.replace(/{color}/g,a).replace(/{secondaryColor}/g,h).replace(/{text}/g,""),this.add(t,b)},ac.prototype.hasImage=function(t){return this.userImages.has(t)},ac.prototype.remove=function(t){this.map._getMap().removeImage(t),this.userImages.delete(t)},ac.prototype._restoreImages=function(){var t=this;this.userImages.forEach(function(n,a){t.map._getMap().hasImage(a)||t.map._getMap().addImage(a,n)})},ac);function ac(t){this.userImages=new Ua,this.imageLoadTimeout=5e3,this.map=t}var xL=(Do.prototype.add=function(t,n,a){a===void 0&&(a=!0);var h=n instanceof zn?n.getId():n;if(Array.isArray(t))for(var y=0,b=t;y<b.length;y++){var u=b[y];this._addLayer(u,h,a)}else this._addLayer(t,h,a)},Do.prototype._addLayer=function(t,n,a){if(n!==t.getId()&&this.layersById.has(n))if(this.layersById.has(t.getId())){var h=this.layers.findIndex(function(u){return u.getId()===t.getId()}),y=this.layers[h];a&&(this._removeMapboxLayers(y),this._addMapboxLayers(t,n)),this.map.events._disableLayerEvents(y),this.map.events._enableLayerEvents(t),this.layersById.set(t.getId(),t),this.layers.splice(h,1);var b=this.layers.findIndex(function(u){return u.getId()===n});this.layers.splice(b,0,t),y.onRemove(),t.onAdd(this.map)}else a&&this._addMapboxLayers(t,n),b=this.layers.findIndex(function(u){return u.getId()===n}),this.layers.splice(b,0,t),this.layersById.set(t.getId(),t),this.map.events._enableLayerEvents(t),t.onAdd(this.map);else this.layersById.has(t.getId())?(h=this.layers.findIndex(function(u){return u.getId()===t.getId()}),y=this.layers[h],a&&(this._removeMapboxLayers(y),this._addMapboxLayers(t,h+1)),this.map.events._disableLayerEvents(y),this.map.events._enableLayerEvents(t),this.layersById.set(t.getId(),t),this.layers[h]=t,y.onRemove()):(a&&this._addMapboxLayers(t),this.layersById.set(t.getId(),t),this.layers.push(t),this.map.events._enableLayerEvents(t)),t.onAdd(this.map)},Do.prototype._addMapboxLayers=function(t,n){if(!this.map._isReady())throw new Error("The layer '"+t.getId()+"' could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before adding a layer to it.");if(!(t instanceof xy)||t.getOptions().tileUrl){t instanceof um&&this.map._getMap().addSource(t._getSourceId(),t._buildSource());for(var a=this._getMapboxBefore(n),h=0,y=t._buildLayers();h<y.length;h++){var b=y[h];this.map._getMap().addLayer(b,a)}}},Do.prototype._removeMapboxLayers=function(t){for(var n=0,a=t._getLayerIds();n<a.length;n++){var h=a[n];this.map._getMap().getLayer(h)&&this.map._getMap().removeLayer(h)}t instanceof um&&this.map._getMap().getSource(t._getSourceId())&&this.map._getMap().removeSource(t._getSourceId())},Do.prototype._getMapboxBefore=function(t){if(typeof t=="string"){var n=this.layersById.get(t);if(!n)return;for(var a=0,h=n._getLayerIds();a<h.length;a++){var y=h[a];if(this.map._getMap().getLayer(y))return y}t=this.layers.findIndex(function(k){return k.getId()===t})+1}for(var b=t;b<this.layers.length;b++)for(var u=0,A=this.layers[b]._getLayerIds();u<A.length;u++)if(y=A[u],this.map._getMap().getLayer(y))return y},Do.prototype.clear=function(){for(var t=this.layers.length-1;0<=t;t--){var n=this.layers[t];this._removeMapboxLayers(n),this.map.events._disableLayerEvents(n),this.layersById.delete(n.getId()),this.layers.splice(t,1),n.onRemove()}},Do.prototype.getLayerById=function(t){return this.layersById.get(t)},Do.prototype.getLayers=function(){return this.layers.slice(0)},Do.prototype._getSourceIds=function(){for(var t=new Set,n=0,a=this.layers;n<a.length;n++)a[n]._getSourceIds().forEach(function(h){return t.add(h)});return t},Do.prototype.move=function(t,n){var a=t instanceof zn?t.getId():t,h=n instanceof zn?n.getId():n;if(!this.layersById.has(a))throw new Error("The layer '"+a+"' has not been added to the map and cannot be moved.");var y=this.layers.findIndex(function(u){return u.getId()===a});if(this._moveMapboxLayers(this.layers[y],h),t=this.layers[y],this.layers.splice(y,1),this.layersById.has(h)){var b=this.layers.findIndex(function(u){return u.getId()===h});this.layers.splice(b,0,t)}else this.layers.push(t)},Do.prototype._moveMapboxLayers=function(t,n){for(var a=this._getMapboxBefore(n),h=0,y=t._getLayerIds();h<y.length;h++){var b=y[h];this.map._getMap().moveLayer(b,a)}},Do.prototype.getRenderedShapes=function(t,n,a){var h,y,b=this;if(t=t||[-180,-85.0511,180,85.0511],Array.isArray(t)?t.length===4||t.length===6?h=this.map.positionsToPixels([hr.getSouthWest(t),hr.getNorthEast(t)]):t.length!==2&&t.length!==3||(h=this.map.positionsToPixels([t])[0]):h=this.map.positionsToPixels([t.coordinates])[0],n){y=[];for(var u=0,A=n=Array.isArray(n)?n:[n];u<A.length;u++){var k=A[u],G=k instanceof zn?k.getId():k;if(!this.layersById.has(G))throw new Error("The layer '"+G+"' has not been added to the map and its rendered features cannot be retrieved.");y.push.apply(y,this.layersById.get(G)._getLayerIds().filter(function(se){return!!b.map._getMap().getLayer(se)}))}}var W=this.map._getMap().queryRenderedFeatures(h,{layers:y,filter:a});return this.map.sources._mapFeaturesToShapes(W)},Do.prototype.remove=function(t,n){if(n===void 0&&(n=!0),Array.isArray(t))for(var a=0,h=t;a<h.length;a++){var y=h[a];this._removeLayer(y,n)}else this._removeLayer(t,n)},Do.prototype._removeLayer=function(t,n){var a=t instanceof zn?t.getId():t;if(!this.layersById.has(a))throw new Error("The layer '"+a+"' has not been added to the map and cannot be removed.");var h=this.layers.findIndex(function(b){return b.getId()===a}),y=this.layers[h];n&&this._removeMapboxLayers(y),this.layersById.delete(a),this.layers.splice(h,1),this.map.events._disableLayerEvents(y),y.onRemove()},Do);function Do(t){this.layersById=new Ua,this.layers=[],this.map=t}var wL=(nl.prototype.add=function(t){for(var n=0,a=t=Array.isArray(t)?t:[t];n<a.length;n++){var h=a[n];this.popups.has(h)||(this.popups.add(h),h.attach(this.map))}},nl.prototype.clear=function(){var t=this;this.popups.forEach(function(n){t.popups.delete(n),n.remove()})},nl.prototype.remove=function(t){for(var n=0,a=t=Array.isArray(t)?t:[t];n<a.length;n++){var h=a[n];this.popups.has(h)&&(this.popups.delete(h),h.remove())}},nl.prototype.getPopups=function(){return Array.from(this.popups)},nl.prototype._getCollectionDiv=function(){var t=this.map.getMapContainer().querySelector("."+nl.Css.collection);return t||((t=document.createElement("div")).classList.add(nl.Css.collection),t.setAttribute("aria-label","Map Information"),this.map.getMapContainer().appendChild(t)),t},nl.prototype._addDraggedPopup=function(t){this.draggedPopups.size===0&&(this.map.getMapContainer().addEventListener("mousemove",this._onDrag),this.map.getMapContainer().addEventListener("touchmove",this._onDrag),this.map.getMapContainer().addEventListener("mouseup",this._onUp),this.map.getMapContainer().addEventListener("touchend",this._onUp)),this.draggedPopups.add(t)},nl.Css={collection:"popup-collection-container"},nl);function nl(t){var n=this;this._onDrag=function(a){var h,y;a.type==="mousemove"?(h=(a=a).clientX,y=a.clientY):a.type==="touchmove"&&(h=(a=a).touches[0].clientX,y=a.touches[0].clientY),n.draggedPopups.forEach(function(b){b._dragToPixel([h,y])})},this._onUp=function(){n.map.getMapContainer().removeEventListener("mousemove",n._onDrag),n.map.getMapContainer().removeEventListener("touchmove",n._onDrag),n.map.getMapContainer().removeEventListener("mouseup",n._onUp),n.map.getMapContainer().removeEventListener("touchend",n._onUp),n.draggedPopups.forEach(function(a){n.draggedPopups.delete(a),a._onUp()})},this.map=t,this.popups=new Set,this.draggedPopups=new Set}var bL=(Va.prototype.add=function(t,n){if(n===void 0&&(n=!0),Array.isArray(t))for(var a=0,h=t;a<h.length;a++){var y=h[a];this._addSource(y,n)}else this._addSource(t,n)},Va.prototype.getRenderedShapes=function(t,n,a){var h=typeof t=="string"?t:t.getId(),y=this.map._getMap().querySourceFeatures(h,{sourceLayer:a,filter:n});return this.map.sources._mapFeaturesToShapes(y,!0,this.sources.get(h))},Va.prototype._buildSources=function(){var t={};return this.sources.forEach(function(n){t[n.getId()]=n._buildSource()}),t},Va.prototype.clear=function(){var t=this;this.sources.forEach(function(n){t.remove(n)})},Va.prototype.getById=function(t){return this.sources.get(t)},Va.prototype.getSources=function(){return Array.from(this.sources.values())},Va.prototype.isSourceLoaded=function(t){var n=t instanceof ai?t.getId():t;return this.map._getMap().isSourceLoaded(n)},Va.prototype.remove=function(t,n){if(n===void 0&&(n=!0),Array.isArray(t))for(var a=0,h=t;a<h.length;a++){var y=h[a];this._removeSource(y,n)}else this._removeSource(t,n)},Va.prototype._removeSource=function(t,n){var a=t instanceof ai?t.getId():t;if(this.sources.has(a)){if(this.map._getMap().getSource(a)&&n&&this.map._getMap().removeSource(a),this.map._getMap().getSource(a)&&n)throw new Error("One or more layers have a dependency on the source '"+a+"'");return this.sources.get(a)._setMap(null),void this.sources.delete(a)}throw new Error("'"+a+"' is not added to the map")},Va.prototype._addSource=function(t,n){if(this.sources.has(t.getId())){if(n)throw new Error("'"+t.getId()+"' is already added to the map");this.sources.get(t.getId())._setMap(null),this.sources.delete(t.getId())}if(n){if(!this.map._isReady())throw new Error("The source '"+t.getId()+"' could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before adding a source to it.");this.map._getMap().addSource(t.getId(),t._buildSource())}this.sources.set(t.getId(),t),t._setMap(this.map)},Va.prototype._mapFeaturesToShapes=function(t,n,a){for(var h=[],y=0,b=t;y<b.length;y++){var u=b[y];if((a||typeof u.source=="string")&&typeof u.properties[wi._shapeIdPropName]=="string"){var A=a||this.sources.get(u.source);if(A instanceof Qs){var k=A.getShapeById(u.properties[wi._shapeIdPropName]);if(k instanceof wi){h.push(k);continue}}}n||h.push(u)}return h},Va);function Va(t){this.map=t,this.sources=new Ua}var G_,CL=(ze(sS,G_=sr),sS);function sS(){var t=G_!==null&&G_.apply(this,arguments)||this;return t.duration=1e3,t.type="jump",t}var H_,SL=(ze(lS,H_=sr),lS);function lS(){var t=H_!==null&&H_.apply(this,arguments)||this;return t.bottom=0,t.left=0,t.right=0,t.top=0,t}var Gy,TL=(ze(W_,Gy=sr),W_.prototype.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,h=t;a<h.length;a++){var y=h[a];y&&typeof y.padding=="number"&&(y.padding={top:y.padding,bottom:y.padding,left:y.padding,right:y.padding})}return Gy.prototype.merge.apply(this,t)},W_);function W_(){var t=Gy!==null&&Gy.apply(this,arguments)||this;return t.bounds=[-180,-89,180,90],t.maxBounds=void 0,t.maxZoom=20,t.offset=new Qi(0,0),t.padding=new SL,t}var Y_,EL=(ze(uS,Y_=sr),uS);function uS(){var t=Y_!==null&&Y_.apply(this,arguments)||this;return t.zoom=1,t.center=new Po(0,0),t.centerOffset=new Qi(0,0),t.bearing=0,t.pitch=0,t.minZoom=1,t.maxZoom=20,t.maxBounds=void 0,t}var K_,Pm=(ze(cS,K_=sr),cS);function cS(){var t=K_!==null&&K_.apply(this,arguments)||this;return t.name=void 0,t.before=void 0,t.minZoom=1,t.maxZoom=20,t.overwrite=!1,t.defer=!1,t.opacity=1,t}var $_,IL=(ze(pS,$_=Pm),pS);function pS(){var t=$_!==null&&$_.apply(this,arguments)||this;return t.color="rgba(0,0,0,.5)",t.outlineColor="#000",t.radius=1,t.outlineWidth=5,t.name="default-circles",t}var X_,kL=(ze(hS,X_=Pm),hS);function hS(){var t=X_!==null&&X_.apply(this,arguments)||this;return t.cap="butt",t.join="miter",t.name="default-linestrings",t.color="#000",t.width=1,t}var J_,ML=(ze(dS,J_=Pm),dS);function dS(){var t=J_!==null&&J_.apply(this,arguments)||this;return t.iconSize=1,t.fontSize=14,t.fontColor="#000",t.textFont="SegoeUi-Regular",t.cluster=!0,t.clusterIcon=void 0,t.textOffset=[0,0],t.name="default-pins",t.icon="pin-darkblue",t.title="",t}var Q_,AL=(ze(fS,Q_=Pm),fS);function fS(){var t=Q_!==null&&Q_.apply(this,arguments)||this;return t.color="rgba(0,0,0,.5)",t.outlineColor="#000",t.name="default-polygons",t}var ex,LL=(ze(mS,ex=Pm),mS);function mS(){var t=ex!==null&&ex.apply(this,arguments)||this;return t.name="default-raster",t}var tx,PL=(ze(gS,tx=sr),gS);function gS(){var t=tx!==null&&tx.apply(this,arguments)||this;return t.anchor="map",t.color="#FFFFFF",t.intensity=.5,t.position=[1.15,210,30],t}var Hy,yS=(ze(rx,Hy=sr),rx.prototype.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,h=t;a<h.length;a++){var y=h[a];y&&(y.hasOwnProperty("view")?y.userRegion=y.view:y.hasOwnProperty("userRegion")&&(y.view=y.userRegion),typeof y.language=="string"&&(y.language=wy.getCode(y.language)))}return Hy.prototype.merge.apply(this,t)},rx);function rx(){var t=Hy!==null&&Hy.apply(this,arguments)||this;return t.autoResize=!0,t.language=k3(),t.light=new PL,t.preserveDrawingBuffer=!1,t.renderWorldCopies=!0,t.showBuildingModels=!1,t.showFeedbackLink=!0,t.showLogo=!0,t.showTileBoundaries=!1,t.style="road",t.view=L3(),t.userRegion=t.view,t}var nx,vS=(ze(_S,nx=sr),_S);function _S(){var t=nx!==null&&nx.apply(this,arguments)||this;return t.flow="none",t.incidents=!1,t}var Wy,ix=(ze(Yy,Wy=sr),Yy.prototype.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,h=t;a<h.length;a++){var y=h[a];y&&(y.authOptions?typeof y.authOptions.subscriptionKey=="string"&&(y.subscriptionKey=y["subscription-key"]=y.authOptions.subscriptionKey):typeof y.subscriptionKey=="string"?(y["subscription-key"]=y.subscriptionKey,y.authOptions={authType:d.AuthenticationType.subscriptionKey,subscriptionKey:y.subscriptionKey}):typeof y["subscription-key"]=="string"&&(y.subscriptionKey=y["subscription-key"],y.authOptions={authType:d.AuthenticationType.subscriptionKey,subscriptionKey:y["subscription-key"]}),typeof y.sessionId=="string"?y["session-id"]=y.sessionId:typeof y["session-id"]=="string"&&(y.sessionId=y["session-id"]),typeof y.disableTelemetry=="boolean"?y["disable-telemetry"]=y.disableTelemetry:typeof y["disable-telemetry"]=="boolean"&&(y.disableTelemetry=y["disable-telemetry"]),typeof y.enableAccessibility=="boolean"?y["enable-accessibility"]=y.enableAccessibility:typeof y["enable-accessibility"]=="boolean"&&(y.enableAccessibility=y["enable-accessibility"]))}var b=Wy.prototype.merge.apply(this,t);return b.authOptions.authType!==d.AuthenticationType.subscriptionKey&&(b["subscription-key"]=b.subscriptionKey=void 0),b},Yy._cloneCustomizer=function(t){if(typeof t=="object")return Object.assign({},t)},Yy);function Yy(){var t=Wy!==null&&Wy.apply(this,arguments)||this;return t.authOptions=E3(),t.disableTelemetry=!1,t["disable-telemetry"]=t.disableTelemetry,t.domain=d_(),t.styleDefinitionsPath=I3(),t.enableAccessibility=!0,t["enable-accessibility"]=t.enableAccessibility,t.refreshExpiredTiles=!0,t.subscriptionKey=A3(),t["subscription-key"]=t.subscriptionKey,t.sessionId=M3(),t["session-id"]=t.sessionId,t.transformRequest=void 0,t}var DL=function(){this.version=8,this.sprite="",this.glyphs="",this.light={},this.sources={},this.layers=[]},zL=(Ky.prototype.build=function(t){var n=new DL;if(this.glyphs!=null&&(n.glyphs=this.glyphs),this.sprite!=null&&(n.sprite=this.sprite),t.light!=null&&Object.assign(n.light,t.light),this.map.sources!=null&&(n.sources=this.map.sources._buildSources()),this.map.layers!=null)for(var a=0,h=this.map.layers.getLayers();a<h.length;a++){var y=h[a];n.layers=n.layers.concat(y._buildLayers()),y instanceof um&&(n.sources[y._getSourceId()]=y._buildSource())}return n},Ky.prototype.setGlyphs=function(t){this.glyphs=t},Ky.prototype.setSprite=function(t){this.sprite=t},Ky);function Ky(t){this.sprite="",this.glyphs="{fontstack}/{range}",this.map=t}var xS,NL=(ze(Dm,xS=zn),Dm.prototype._buildLayers=function(){return this.layers},Dm.prototype._getLayerIds=function(){return this.layers.map(function(t){return t.id})},Dm.prototype._getSourceIds=function(){for(var t=new Set,n=0,a=this.layers;n<a.length;n++){var h=a[n];typeof h.source=="string"?t.add(h.source):h.source&&t.add(h.id)}return t},Dm);function Dm(t,n){var a=xS.call(this,n)||this;return a.layers=t,a}var wS,OL=(ze($y,wS=ai),$y.prototype._buildSource=function(){return this.source},$y.prototype._modifySource=function(t,n){var a=t.tiles.map(function(h){return typeof h=="string"?h:new gi({domain:Ze,path:h.path,queryParams:ot(ot({},n),h.queryParams)}).toString()});return t.tiles=a,t},$y);function $y(t,n,a){var h=wS.call(this,t)||this;return h.source=h._modifySource(n,a),h}var RL=(xa.prototype.initialize=function(){var t=this;return this.initPromise||(this.initPromise=this.request(oe,this._serviceOptions.styleDefinitionsPath).then(function(n){t.definitions=n}).catch(function(n){throw new Error("Failed to retrieve the style definitions: "+n)})),this.initPromise},xa.prototype.getStyleComponents=function(t){return Zr(this,void 0,void 0,function(){var n,a,h,y=this;return yr(this,function(b){return n=new Set,a=this.lookUp(t),h=a.layerGroups.map(function(u){return Zr(y,void 0,void 0,function(){var A,k,G,W,se,ne,Ee;return yr(this,function(Ge){switch(Ge.label){case 0:return A=u.layerPath,k=u.name,G={language:t.language},t.view&&(G.view=encodeURIComponent(t.view)),[4,this.buildComponent(k,A,G,n)];case 1:for(W=Ge.sent(),se=0,ne=W.layer.layers;se<ne.length;se++)(Ee=ne[se]).type==="fill-extrusion"&&(Ee.layout=Ee.layout||{},Ee.layout.visibility=t.showBuildingModels?"visible":"none");return[2,W]}})})}),[2,Promise.all(h)]})})},xa.prototype.getFlowComponent=function(t,n){return Zr(this,void 0,void 0,function(){var a;return yr(this,function(h){return a=this.getFlowPath(t,n),[2,this.buildComponent("flow",a)]})})},xa.prototype.getCopyrightCaption=function(t){var n=this.lookUp(t).copyright.join(" ");return t.showLogo||(n+=" 2019 Microsoft"),n},xa.prototype.getSprite=function(t){var n=this.lookUp(t);return new gi({domain:this.definitions.domain,path:n.spritePath}).toString()},xa.prototype.getGlyphs=function(t){var n=this.lookUp(t);return new gi({domain:this.definitions.domain,path:n.glyphsPath}).toString()},xa.prototype.getFlowPath=function(t,n){return this.lookUp(t).flowPaths[n.flow]},xa.prototype.getTheme=function(t){return this.lookUp(t).theme.toLowerCase()||"light"},xa.prototype.getDef=function(){return this.definitions},xa.prototype.lookUp=function(t){for(var n,a=t.style||this.definitions.defaultStyle,h=0,y=this.definitions.styles;h<y.length;h++){var b=y[h];if(b.name===a)return b;b.name===this.definitions.defaultStyle&&(n=b)}return n},xa.prototype.request=function(t,n){return Zr(this,void 0,void 0,function(){return yr(this,function(a){return[2,new gi({domain:t,path:n}).get()]})})},xa.prototype.buildComponent=function(t,n,a,h){return Zr(this,void 0,void 0,function(){return yr(this,function(y){return[2,this.request(this.definitions.domain,n).then(function(b){var u=new NL(b.layers,t),A=[],k=b.sources;for(var G in k)if(k.hasOwnProperty(G)){var W=k[G],se=W.name||G;if(h){if(h.has(se))continue;h.add(se)}A.push(new OL(se,W,a))}return{layer:u,sources:A}})]})})},xa);function xa(t){this._serviceOptions=t}var bS=(Bt.prototype.getCanvas=function(){return this.map.getCanvas()},Bt.prototype.getCanvasContainer=function(){return this.map.getCanvasContainer()},Bt.prototype.getMapContainer=function(){return this.map.getContainer()},Bt.prototype.getServiceOptions=function(){return Dr(this.serviceOptions,ix._cloneCustomizer)},Bt.prototype.setServiceOptions=function(t){this.serviceOptions=new ix().merge(this.serviceOptions,t),this.serviceOptions["enable-accessibility"]?this.accessibleMapDelegate.addToMap():this.accessibleMapDelegate.removeFromMap()},Bt.prototype.setCamera=function(t,n){var a,h;if(n===void 0&&(n=!1),"padding"in t||"offset"in t||"bounds"in t){var y=new TL().merge({maxZoom:this.getCamera().maxZoom},t),b=this._generateSafeBounds(y.bounds);if(!(a=this.map.cameraForBounds(b,{padding:y.padding,offset:y.offset,maxZoom:y.maxZoom})))throw new Error("The map cannot be fit to the current canvas with the given CameraBoundsOptions.");this.map.setMaxZoom(y.maxZoom),h=this._generateSafeBounds(y.maxBounds)}else{var u=new EL().merge(this.getCamera(),t);if(u.centerOffset&&2<=u.centerOffset.length){var A=u.centerOffset,k=tm([u.center],u.zoom);k[0][0]+=A[0],k[0][1]+=A[1],u.center=S1(k,u.zoom)[0]}a={center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch,around:void 0},this.map.setMinZoom(u.minZoom),this.map.setMaxZoom(u.maxZoom),h=this._generateSafeBounds(u.maxBounds)}h?this.map.setMaxBounds(h):this.map.setMaxBounds(null);var G=new CL().merge(t),W={duration:G.duration,easing:function(ne){return ne},offset:[0,0],animate:!0},se={fromControl:n};G.type==="jump"?this.map.jumpTo(a,se):G.type==="ease"?this.map.easeTo(ot(ot({},a),W),se):G.type==="fly"&&this.map.flyTo(ot(ot({},a),W),se)},Bt.prototype.setCameraBounds=function(t){this.setCamera(t)},Bt.prototype.getCamera=function(){var t=this.map.getBounds().getSouthWest().toArray(),n=this.map.getBounds().getNorthEast().toArray();return{zoom:this.map.getZoom(),center:this.map.getCenter().toArray(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),bounds:new hr(t,n),minZoom:this.map.getMinZoom(),maxZoom:this.map.getMaxZoom()}},Bt.prototype.setStyle=function(t){delete t.preserveDrawingBuffer;var n=new yS().merge(this.styleOptions,t);n.autoResize!==this.styleOptions.autoResize&&this._setAutoResize(n.autoResize),n.language!==this.styleOptions.language&&(this.localizedStringsPromise=wy.getStrings(n.language)),n.renderWorldCopies!==this.styleOptions.renderWorldCopies&&this.map.setRenderWorldCopies(n.renderWorldCopies),n.showFeedbackLink!==this.styleOptions.showFeedbackLink&&this.copyrightControl.setOptions({showFeedbackLink:n.showFeedbackLink}),n.showLogo&&!this.logoControl?(this.logoControl=new YC,this.controls.add(this.logoControl,{position:d.ControlPosition.NonFixed})):!n.showLogo&&this.logoControl&&(this.controls.remove(this.logoControl),delete this.logoControl),n.showTileBoundaries!==this.styleOptions.showTileBoundaries&&(this.map.showTileBoundaries=n.showTileBoundaries),this._setStyleComponents(n),this.styleOptions=n},Bt.prototype.getStyle=function(){return vi(this.styleOptions)},Bt.prototype.addIcon=function(t,n){this.imageSprite.add(t,n)},Bt.prototype.addPins=function(t,n){var a,h=new ML().merge(n),y=this.layers.getLayerById(h.name),b=!1;if(y||(b=!0,y=new t_(h.name+"-source",h.name,{source:h.name+"-source",minZoom:h.minZoom,maxZoom:h.maxZoom,iconOptions:{anchor:"center",size:h.iconSize,image:["case",["has","icon"],["get","icon"],h.icon],ignorePlacement:!h.cluster,opacity:h.opacity},textOptions:{anchor:"center",textField:["case",["has","point_count"],["to-string",["get","point_count"]],["has","title"],["to-string",["get","title"]],h.title],font:["case",["has","point_count"],["literal",["StandardFontCondensed-Bold"]],["literal",[h.textFont]]],size:["case",["has","point_count"],20,h.fontSize],ignorePlacement:!h.cluster,opacity:h.opacity,offset:["case",["has","point_count"],["literal",[.5,-.45]],["literal",[h.textOffset[0]/16,h.textOffset[1]/16]]],color:h.fontColor}})),!(y instanceof t_))throw new Error("A layer with name '"+h.name+"' already exists but it is not a SymbolLayer.A SymbolLayer should be used for rendering pins.");var u=y.getSource();typeof u=="string"?(a=u,u=this.sources.getById(a)):a=u.getId();var A=!1;if(u||(A=!0,u=new Qs(a,{cluster:h.cluster})),!(u instanceof Qs))throw new Error("The source with name '"+a+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");A&&this.sources.add(u),b&&this.layers.add(y,h.before);var k=new xp(t);h.defer?(h.overwrite&&u._clearNoUpdate(),u._addNoUpdate(k)):h.overwrite?u.setShapes(k):u.add(k)},Bt.prototype.addCircles=function(t,n){var a,h=new IL().merge(n),y=this.layers.getLayerById(h.name),b=!1;if(y||(b=!0,y=new F1(h.name+"-source",h.name,{source:h.name+"-source",minZoom:h.minZoom,maxZoom:h.maxZoom,opacity:h.opacity,radius:["case",["has","radius"],["get","radius"],h.radius],color:["case",["has","color"],["get","color"],h.color],strokeColor:["case",["has","outlineColor"],["get","outlineColor"],h.outlineColor],strokeWidth:["case",["has","outlineWidth"],["get","outlineWidth"],h.outlineWidth]})),!(y instanceof F1))throw new Error("A layer with name '"+h.name+"' already exists but it is not a BubbleLayer.A BubbleLayer should be used for rendering circles.");var u=y.getSource();typeof u=="string"?(a=u,u=this.sources.getById(a)):a=u.getId();var A=!1;if(u||(A=!0,u=new Qs(a)),!(u instanceof Qs))throw new Error("The source with name '"+a+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");A&&this.sources.add(u),b&&this.layers.add(y,h.before);var k=new xp(t);h.defer?(h.overwrite&&u._clearNoUpdate(),u._addNoUpdate(k)):h.overwrite?u.setShapes(k):u.add(k)},Bt.prototype.addLinestrings=function(t,n){var a,h=new kL().merge(n),y=this.layers.getLayerById(h.name),b=!1;if(y||(b=!0,y=new Y1(h.name+"-source",h.name,{source:h.name+"-source",minZoom:h.minZoom,maxZoom:h.maxZoom,lineCap:h.cap,lineJoin:h.join,strokeOpacity:h.opacity,strokeColor:["case",["has","color"],["get","color"],h.color],strokeWidth:["case",["has","width"],["get","width"],h.width]})),!(y instanceof Y1))throw new Error("A layer with name '"+h.name+"' already exists but it is not a LineLayer.A LineLayer should be used for rendering linestrings.");var u=y.getSource();typeof u=="string"?(a=u,u=this.sources.getById(a)):a=u.getId();var A=!1;if(u||(A=!0,u=new Qs(a)),!(u instanceof Qs))throw new Error("The source with name '"+a+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");A&&this.sources.add(u),b&&this.layers.add(y,h.before);var k=new xp(t);h.defer?(h.overwrite&&u._clearNoUpdate(),u._addNoUpdate(k)):h.overwrite?u.setShapes(k):u.add(k)},Bt.prototype.addPolygons=function(t,n){var a,h=new AL().merge(n),y=this.layers.getLayerById(h.name),b=!1;if(y||(b=!0,y=new X1(h.name+"-source",h.name,{source:h.name+"-source",minZoom:h.minZoom,maxZoom:h.maxZoom,fillOpacity:h.opacity,fillColor:["case",["has","color"],["get","color"],h.color]})),!(y instanceof X1))throw new Error("A layer with name '"+h.name+"' already exists but it is not a PolygonLayer.A PolygonLayer should be used for rendering linestrings.");var u=y.getSource();typeof u=="string"?(a=u,u=this.sources.getById(a)):a=u.getId();var A=!1;if(u||(A=!0,u=new Qs(a)),!(u instanceof Qs))throw new Error("The source with name '"+a+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");A&&this.sources.add(u),b&&this.layers.add(y,h.before);var k=new xp(t);h.defer?(h.overwrite&&u._clearNoUpdate(),u._addNoUpdate(k)):h.overwrite?u.setShapes(k):u.add(k)},Bt.prototype.addRaster=function(t,n){var a,h=new LL().merge(n),y=this.layers.getLayerById(h.name),b=!1;if(y||(b=!0,y=new xy({maxZoom:h.maxZoom,minZoom:h.minZoom,opacity:h.opacity,tileSize:256,tileUrl:"{subdomain}"},h.name)),!(y instanceof xy))throw new Error("A layer with name '"+h.name+"' already exists but it is not a TileLayer.A TileLayer should be used for rendering raster images.");if(y.getOptions().tileUrl!=="{subdomain}")throw new Error("A TileLayer with name '"+h.name+"' already exists but was configured for a single tile url [default for new TileLayer(...)].");(a=!h.overwrite&&y.getOptions().subdomains||[]).push.apply(a,t),y._setOptionsNoUpdate({subdomains:a}),h.defer?b&&this.layers.add(y,h.before,!1):this.layers.add(y,h.before)},Bt.prototype.getLayers=function(){return this.layers.getLayers().map(function(t){return t.getId()})},Bt.prototype.removeLayers=function(t){for(var n=0,a=t;n<a.length;n++){var h=a[n];if(this.layers.getLayerById(h)){this.layers.remove(h);var y=h+"-source";this.sources.getById(y)&&this.sources.remove(y)}}},Bt.prototype.addHtml=function(t,n){t.id||(t.id="marker_"+gp());var a=new s_({htmlContent:t});return this.markers.add(a,n),t.id},Bt.prototype.removeHtml=function(t){this.markers.remove(t)},Bt.prototype.addEventListener=function(t,n,a){this.events._addLegacy(t,n,a)},Bt.prototype.removeEventListener=function(t,n,a){this.events._removeLegacy(t,n,a)},Bt.prototype.setUserInteraction=function(t){this.userInteractionDelegate.setOptions(t)},Bt.prototype.getUserInteraction=function(){return this.userInteractionDelegate.getOptions()},Bt.prototype.addControl=function(t,n){this.controls.add(t,n)},Bt.prototype.removeControl=function(t){this.controls.remove(t)},Bt.prototype.setTraffic=function(t){var n=this.trafficOptions.incidents,a=this.trafficOptions.flow;if(this.trafficOptions=new vS().merge(this.trafficOptions,t),this.trafficOptions.incidents?n||this.incidentDelegate.addToMap():this.incidentDelegate.removeFromMap(),this.trafficOptions.flow&&this.trafficOptions.flow!=="none")try{this.flowDelegate.addToMap()}catch(h){throw this.trafficOptions.flow=a,h}else this.flowDelegate.removeFromMap()},Bt.prototype.getTraffic=function(){return vi(this.trafficOptions)},Bt.prototype.remove=function(){this.dispose()},Bt.prototype.clear=function(){this.popups.clear(),this.layers.clear(),this.sources.clear(),this.markers.clear()},Bt.prototype.dispose=function(){for(this.clear(),this.map.remove(),this.removed=!0;this.getMapContainer().firstChild;){var t=this.getMapContainer().firstChild;this.getMapContainer().removeChild(t)}},Bt.prototype.resize=function(t,n,a){if(typeof t!="number"&&typeof t!="string"||typeof n!="number"&&typeof n!="string")a=t;else{var h=t;this.getMapContainer().style.height=typeof h=="number"?h+"px":h,this.getMapContainer().style.width=typeof n=="number"?n+"px":n}var y=this.getMapContainer().style.overflow;this.getMapContainer().style.overflow="hidden",this.map.resize(a),this.getMapContainer().style.overflow=y},Bt.prototype.pixelsToPositions=function(t){for(var n=[],a=0,h=t;a<h.length;a++){var y=h[a],b=this.map.unproject(y);n.push(new Po(b.lng,b.lat))}return n},Bt.prototype.positionsToPixels=function(t){for(var n=[],a=0,h=t;a<h.length;a++){var y=h[a],b=this.map.project(y);n.push(new Qi(b.x,b.y))}return n},Bt.prototype.areTilesLoaded=function(){return this.map.areTilesLoaded()},Bt.prototype.stop=function(){this.map.stop()},Bt.prototype._getMap=function(){return this.map},Bt.prototype._rebuildStyle=function(){this.map.setStyle(this.styleBuilder.build(this.styleOptions)),this.imageSprite._restoreImages()},Bt.prototype._isLoaded=function(){return this.loaded},Bt.prototype._isReady=function(){return this.ready},Bt.prototype._getLocalizedStrings=function(){return this.localizedStringsPromise},Bt.prototype._sendRequest=function(t,n,a){var h;return typeof this.serviceOptions.transformRequest=="function"&&(h=this.serviceOptions.transformRequest(t,n)),h?fetch(h.url||t,{credentials:h.credentials,headers:ot(ot({},a),h.headers),method:"GET",mode:"cors"}):fetch(t,{headers:a,method:"GET",mode:"cors"})},Bt.prototype._setAutoResize=function(t){t?window.addEventListener("resize",this._windowResizeCallback):window.removeEventListener("resize",this._windowResizeCallback)},Bt.prototype._setStyleComponents=function(t){var n=this;this.styles.getStyleComponents(t).then(function(a){if(!n.removed){n.copyrightControl.setOptions({copyrightMessage:n.styles.getCopyrightCaption(t)}),n.styleBuilder.setGlyphs(n.styles.getGlyphs(t)),n.styleBuilder.setSprite(n.styles.getSprite(t));for(var h=new Set,y=new Set,b=0,u=a;b<u.length;b++){var A=u[b];h.add(A.layer.getId());for(var k=0,G=A.sources;k<G.length;k++){var W=G[k];y.add(W.getId())}}n.styleLayerIds.forEach(function(qt){h.has(qt)||(n.layers.getLayerById(qt)&&n.layers.remove(qt,!1),n.styleLayerIds.delete(qt))});for(var se=function(qt){var tn=a[qt].layer;if(n.styleLayerIds.add(tn.getId()),n.layers.getLayerById(tn.getId()))n.layers.add(tn,void 0,!1);else if(qt===0)n.layers.add(tn,n.layers.getLayers()[0],!1);else{var ho=a[qt-1].layer,un=n.layers.getLayers(),rn=un.findIndex(function(qa){return qa.getId()===ho.getId()});n.layers.add(tn,un[rn+1],!1)}},ne=0;ne<a.length;ne++)se(ne);var Ee=n.layers._getSourceIds();n.styleSourceIds.forEach(function(qt){Ee.has(qt)||y.has(qt)||(n.sources.getById(qt)&&n.sources.remove(qt,!1),n.styleSourceIds.delete(qt))});for(var Ge=0,pt=a;Ge<pt.length;Ge++){A=pt[Ge],n.sources.add(A.sources,!1);for(var Wt=0,nt=A.sources;Wt<nt.length;Wt++)W=nt[Wt],n.styleSourceIds.add(W.getId())}n._rebuildStyle()}})},Bt.prototype._updateGlobalDefaults=function(t){t&&(t.authOptions&&!m_()&&P3(t.authOptions),t.domain&&!j3()&&D3(t.domain),t.styleDefinitionsPath&&!U3()&&z3(t.styleDefinitionsPath),!t.subscriptionKey&&!t["subscription-key"]||m_()||R3(t.subscriptionKey||t["subscription-key"]),!t.sessionId&&!t["session-id"]||q3()||O3(t.sessionId||t["session-id"]),t.language&&!V3()&&N3(t.language),!t.userRegion&&!t.view||Z3()||B3(t.userRegion||t.view))},Bt.prototype._generateSafeBounds=function(t){if(t){var n=hr.getSouth(t),a=hr.getWest(t),h=hr.getNorth(t),y=hr.getEast(t);if(isNaN(n)||isNaN(a)||isNaN(h)||isNaN(y))throw new Error("The bounds specified are invalid: ["+t+"]");for(;y<a;)y+=360;return new hr([a,n,y,h])}return t},Bt.prototype._detectHighContrast=function(){var t,n;switch(n6.getHighContrastMode()){case"invert":t=Bt.Css.hcLight,n="high_contrast_dark";break;case"light":t=Bt.Css.hcLight,n="grayscale_light";break;case"dark":t=Bt.Css.hcDark,n="high_contrast_dark"}t&&this.map.getContainer().classList.add(t),n&&this.styleOptions.style==="road"&&(this.styleOptions.style=n)},Bt.Css={canvasContainer:"atlas-map-canvas-container",canvas:"atlas-map-canvas",container:"atlas-map",hcDark:"high-contrast-dark",hcLight:"high-contrast-light"},Bt);function Bt(t,n){var a=this;this.styleLayerIds=new Set,this.styleSourceIds=new Set,this.removed=!1,this.loaded=!1,this.ready=!1,this._windowResizeCallback=function(){return a.resize()};var h=!0;this._updateGlobalDefaults(n),this.serviceOptions=new ix().merge(n),this.styleOptions=new yS().merge(n),this.trafficOptions=new vS,this.styles=new RL(this.serviceOptions),this.insights=new $A(this.serviceOptions),this.serviceOptions.authOptions.subscriptionKey&&(this.serviceOptions.authOptions.subscriptionKey=encodeURIComponent(this.serviceOptions.authOptions.subscriptionKey));var y,b={attributionControl:!1,container:t,preserveDrawingBuffer:this.styleOptions.preserveDrawingBuffer,refreshExpiredTiles:this.serviceOptions.refreshExpiredTiles,renderWorldCopies:this.styleOptions.renderWorldCopies,trackResize:!1,transformRequest:function(se,ne){var Ee={url:se};if(ne==="Tile"&&se.includes(Ze)){if(a.insights&&a.insights.trackEvent({name:"TileLoad"}),gi.protoRegEx.test(a.serviceOptions.domain)){var Ge=se.indexOf(Ze);Ee.url=a.serviceOptions.domain+se.substring(Ge+Ze.length)}else Ee.url=se.replace(Ze,a.serviceOptions.domain);a.authentication.signRequest(Ee)}return a.serviceOptions.transformRequest&&e6(Ee,a.serviceOptions.transformRequest(Ee.url,ne)),Ee}};y=this.serviceOptions.authOptions.clientId?this.serviceOptions.authOptions.clientId:this.serviceOptions.authOptions.subscriptionKey?this.serviceOptions.authOptions.subscriptionKey.replace(/.(?=.{3,}$)/g,"*"):"invalid-setting",this.insights&&this.insights.setAuthenticatedUserContext(this.serviceOptions.sessionId,y);try{var u=new I.Map(b);this.map=u,this.authentication=new fL(this),this.controls=new mL(this),this.events=new yL(this),this.imageSprite=new _L(this),this.layers=new xL(this),this.markers=new vL(this),this.sources=new bL(this),this.popups=new wL(this),this.styleBuilder=new zL(this),this.map.getContainer().classList.add(Bt.Css.container),this.map.getCanvasContainer().classList.add(Bt.Css.canvasContainer),this.map.getCanvas().classList.add(Bt.Css.canvas),this._detectHighContrast(),this.copyrightControl=new XA({showFeedbackLink:this.styleOptions.showFeedbackLink}),this.controls.add(this.copyrightControl,{position:d.ControlPosition.NonFixed}),this.styleOptions.showLogo&&(this.logoControl=new YC,this.controls.add(this.logoControl,{position:d.ControlPosition.NonFixed}));var A=this.authentication.initialize();if(this.removed)return;var k=function(){a.loaded=!0,a.map.off("load",k)};this.map.on("load",k);var G=function(){a.ready=!0,a.map.off("styledata",G);var se={map:a,type:"ready"};a.events.invoke("ready",se)};this.map.on("styledata",G),this._setAutoResize(this.styleOptions.autoResize),this.map.showTileBoundaries=this.styleOptions.showTileBoundaries,this.localizedStringsPromise=wy.getStrings(this.styleOptions.language);var W=this.styles.initialize();Promise.all([A,W]).then(function(){if(!a.removed){if(!a.authentication.getToken())throw new Error("AuthenticationManager finished initializing, but no token is available");a.serviceOptions["enable-accessibility"]&&a.accessibleMapDelegate.addToMap(),a._setStyleComponents(a.styleOptions)}}).catch(function(se){var ne=se instanceof Error?se:new Error(se);a.insights&&a.insights.trackException({error:ne});var Ee={map:a,type:"error",error:ne};a.events.invoke("error",Ee)}),this.setCamera(ot(ot({},n),{type:"jump",duration:0})),this.incidentDelegate=new lL(this),this.flowDelegate=new nL(this),this.accessibleMapDelegate=new rL(this),this.userInteractionDelegate=new hL(this,n),this.userInteractionDelegate.addToMap()}catch(se){throw h=!1,this.insights&&this.insights.trackException({error:se instanceof Error?se:new Error(se)}),se}finally{this.insights&&(this.insights.trackEvent({name:"MapLoad"},{success:h,supported:f_(!1),supportedWithPerformance:f_(!0)}),this.insights.flush())}}var BL=(yn.applyTemplate=function(t,n){var a=this,h=document.createElement("div");if(h.classList.add(yn.Css.template),t){typeof(n=n||{}).singleDescription!="boolean"&&(n.singleDescription=!0),n.sandboxContent=typeof n.sandboxContent!="boolean"||n.sandboxContent,n.title&&typeof n.content=="string"&&(n.content.includes("{title}")||n.content.includes("{name}"))||(t.title?n.title="{title}":t.name&&(n.title="{name}")),typeof n.detectHyperlinks!="boolean"&&(n.detectHyperlinks=!0),typeof n.parsePropertyPaths!="boolean"&&(n.parsePropertyPaths=!0),n.textColor&&(h.style.color=n.textColor),n.fillColor&&(h.style.backgroundColor=n.fillColor),n.title&&((u=this._applyStringTemplate(t,n.title,n)).innerText=u.textContent||u.innerText||"",this._appendChild(h,u,yn.Css.title));var y=document.createElement("div");if(y.classList.add(yn.Css.content),Array.isArray(n.content))0<n.content.length&&n.content[0].propertyPath?this._appendChild(y,this._generateContent(t,n.content,n),yn.Css.item):n.content.forEach(function(A){a._appendChild(y,a._generateContent(t,A,n),yn.Css.item)});else{var b=0;t.description&&Object.keys(t).forEach(function(A){a._ignoreProperty(A,t[A])||b++});var u=void 0;b===1||n.singleDescription&&t.description||b===2&&t.Snippet?(u=document.createElement("div")).innerHTML=t.description:u=this._generateContent(t,n.content,n),this._appendChild(y,u,yn.Css.item)}y.innerHTML!==""&&(n.sandboxContent?h.appendChild(yn._createSandboxedIframe(y,n)):h.appendChild(y))}return h},yn._createSandboxedIframe=function(t,n){var a=document.createElement("iframe");a.sandbox.add("allow-popups");var h,y=t.innerHTML,b=!1,u=100,A=550,k=10;document.body.scrollWidth<=340&&(A=300,u=50);var G=y.split(/<(tr|div|br|li|h[0-9]|p>)/);h=Math.max.apply(Math,G.map(function(pt){return pt.replace(/<[a-zA-Z0-9\s=\/]+>/g,"").length}))-1;var W=Math.ceil(3.5*h);if(W<A&&(A=W,u=h),y.includes("<img")||y.includes("<video"))b=!0,a.width="550px";else{var se=-1<y.indexOf(yn.Css.table)?25:20;k+=Math.max(.5*G.length*se,Math.ceil(y.replace(/<[a-zA-Z0-9\s=\/]+>/g,"").length/u)*se)}a.width=A+"px",a.height=b||280<k?"280px":k+"px";var ne=n.textColor?"color:"+n.textColor+";":"",Ee=n.fillColor?"background-color:"+n.fillColor+";":"",Ge='<html><head><title></title><meta charset="utf-8" /><meta http-equiv="x-ua-compatible" content="IE=Edge" /><link rel="stylesheet" href="'+yn._cssUrl+'" type="text/css"/><style>html, body{margin:0;padding:0;'+ne+Ee+'}</style></head><body><div class="'+yn.Css.template+'" style="padding:0;width:'+(A-20)+'px">'+y+"</div></body></html>";return a.srcdoc===void 0?a.src="data:text/html;charset=utf-8,"+encodeURI(Ge):a.srcdoc=Ge,a},yn._appendChild=function(t,n,a){n&&(a&&(n.className=(n.className?n.className+" ":"")+a),t.appendChild(n))},yn._generateContent=function(t,n,a){if(n)return Array.isArray(n)?this._generatePropertyInfoTable(t,n,a):this._applyStringTemplate(t,n,a);var h=this._generateDynamicTableHtml(t,null,a);if(h){var y=document.createElement("div");return y.innerHTML=h,y}return null},yn._applyStringTemplate=function(t,n,a){if(n){for(var h=n,y=this._placeholderRx.exec(n);y;){if(2<=y.length){var b=this._getPropertyValue(t,y[1],a);h=h.replace(y[0],b)}y=this._placeholderRx.exec(n)}if(h){(h=h.trim()).includes("<")&&(h=h.replace(/[\r\n]+/g,"<br/>"));var u=document.createElement("div");return u.innerHTML=h,u}}return null},yn._getPropertyValue=function(t,n,a,h){var y=a.parsePropertyPaths?n.split("/"):[n],b=y.length;if(0<b&&t){var u=y[0],A=t[u];if(a.detectHyperlinks&&n==="link"&&(!h||h.hyperlinkFormat)){var k=[];if(Array.isArray(A)?A.forEach(function(un){un.href?k.push(un):typeof un=="string"&&k.push({href:un})}):A.href&&k.push(A),0<k.length){var G,W;h&&h.hyperlinkFormat?G=h.hyperlinkFormat:a&&a.hyperlinkFormat&&(G=a.hyperlinkFormat),W=G&&G.target?G.target:"_blank";var se=[];return k.forEach(function(un){un.title||G&&G.label||!un.rel||se.push(un.rel," - "),se.push('<a href="',un.href,'" target="',W,'">'),un.title?se.push(un.title):G&&G.label?se.push(G.label):se.push(un.href),se.push("</a>","<br/>")}),se.pop(),se.join("")}}if(A!=null){var ne=void 0;for(ne=1;ne<b&&(A=A[y[ne]],u=y[ne],A!=null);ne++);if(ne===b&&A!=null){var Ee=void 0;if((Ee=A.value!==void 0?A.value:A)instanceof Date)return h&&h.dateFormat?Ee.toLocaleString(void 0,h.dateFormat):a.dateFormat?Ee.toLocaleString(void 0,a.dateFormat):Ee.toISOString();if(typeof Ee=="object")return(qt=this._generateDynamicTableHtml(Ee,y.slice(1),a))||"";if(typeof Ee=="number"){if(h){if(h.dateFormat)return new Date(Ee).toLocaleString(void 0,h.dateFormat);if(h.numberFormat)return Ee.toLocaleString(void 0,h.numberFormat)}else if(/(timestamp|date)/gi.test(u))return new Date(Ee).toISOString();return Ee.toLocaleString(void 0,a.numberFormat)}if(typeof Ee=="string"&&Ee!==""&&!/[\n\r<>\s]/g.test(Ee)&&(a.detectHyperlinks||h&&h.hyperlinkFormat)){Ee=Ee.trim();var Ge=this._isUrlRx.test(Ee)||h&&h.hyperlinkFormat,pt=this._isImageUrlRx.test(Ee)&&(Ge||Ee.startsWith("data:image")),Wt=this._emailRx.test(Ee);if(Ge||pt||Wt){var nt=void 0;h&&h.hyperlinkFormat?nt=h.hyperlinkFormat:a&&a.hyperlinkFormat&&(nt=a.hyperlinkFormat);var qt=void 0;qt=nt&&nt.target?' target="'+nt.target+'"':' target="_blank"';var tn=""+(nt&&nt.label?nt.label:Ee);nt&&nt.scheme?Ee=nt.scheme+Ee:Wt&&(Ee="mailto:"+Ee);var ho=nt&&nt.label?' alt="'+nt.label+'"':"";return(nt&&nt.isImage||pt)&&(tn='<img src="'+Ee+'" style="max-width:100%"'+ho+'"/>'),'<a href="'+Ee+'"'+qt+">"+tn+"</a>"}}return Ee.toString()}}}return""},yn._generatePropertyInfoTable=function(t,n,a){if(t&&n&&0<n.length){var h=[],y=this;h.push('<table class="'+y.Css.table+'">'),n.forEach(function(u){var A=y._getPropertyValue(t,u.propertyPath,a,u);if(u.hideLabel)h.push('<tr><td colspan="2">',A,"</td></tr>");else{var k=u.label||u.propertyPath.split("/")[0];h.push("<tr><th>",k,"</th><td>",A,"</td></tr>")}}),h.push("</table>");var b=document.createElement("div");return b.innerHTML=h.join(""),b}return null},yn._generateDynamicTableHtml=function(t,n,a){var h=this;if(t){var y=[],b=this;y.push('<table class="'+b.Css.table+'">');var u=n&&0<n.length?n.join("/")+"/":"",A=0;return Object.keys(t).forEach(function(k){h._ignoreProperty(k,t[k])||(y.push("<tr><th>",k,"</th><td>",b._getPropertyValue(t,u+k,a),"</td></tr>"),A++)}),A===0?null:(y.push("</table>"),y.join(""))}return null},yn._ignoreProperty=function(t,n){switch(t){case"title":case"name":case"base":case"popupTemplate":case"anchor":case"icon":case"image":case"imageUrl":case"rotation":case"color":case"size":case"offset":case"strokeColor":case"strokeWidth":case"strokeOpacity":case"subType":case"fillColor":case"fillOpacity":case"visibility":case"visible":return!0;default:if(t.indexOf("_")===0||n==null||n==="")return!0}return!1},yn._placeholderRx=/\{([a-zA-Z0-9_\/\s]+)\}/gi,yn._isUrlRx=/^(http|https|ftp|tel|mailto):\/\//i,yn._isImageUrlRx=/(^data:image|.png$|.jpg$|.jpeg$|.gif$|.bmp$|.svg|.tif|.tiff$)/i,yn._emailRx=/^[^\.\s@:](?:[^\s@:]*[^\s@:\.])?@[^\.\s@]+(?:\.[^\.\s@]+)*$/,yn._cssUrl=new gi({domain:oe,path:"sdk/javascript/mapcontrol/"+Tn.getEndpointVersion()+"/atlas.min.css"}).toString(),yn.Css={template:"azure-maps-control-popup-template",title:"azure-maps-control-popup-template-title",content:"azure-maps-control-popup-template-content",item:"azure-maps-control-popup-template-content-item",table:"azure-maps-control-popup-template-table"},yn);function yn(){this.detectHyperlinks=!0,this.parsePropertyPaths=!0}z(new gi({domain:oe,path:"sdk/javascript/mapcontrol/"+Tn.getEndpointVersion()+"/mapbox-gl-rtl-text.min.js"}).toString(),function(t){t&&console.warn(t)},!0),d.HtmlMarker=s_,d.Map=bS,d.Pixel=Qi,d.Popup=i_,d.PopupTemplate=BL,d.Shape=wi,d._getAssetDomain=function(){return X},d._getDomain=function(){return d_()},d._hasSetAuthenticationOptions=m_,d._hasSetDomain=j3,d._hasSetLanguage=V3,d._hasSetSessionId=q3,d._hasSetStyleDefinitionsPath=U3,d._hasSetView=Z3,d.addImageTemplate=function(t,n,a){!a&&ym[t.toLowerCase()]||(ym[t.toLowerCase()]=n)},d.control=uM,d.data=Nb,d.getAllImageTemplateNames=function(){return Object.keys(ym)},d.getAuthenticationOptions=E3,d.getDomain=d_,d.getImageTemplate=F3,d.getLanguage=k3,d.getSessionId=M3,d.getStyleDefinitionsPath=I3,d.getSubscriptionKey=A3,d.getUserRegion=function(){return Ty},d.getVersion=function(){return Tn.getFullVersion()},d.getView=L3,d.internal=CM,d.isSupported=f_,d.layer=BM,d.math=SM,d.setAuthenticationOptions=P3,d.setDomain=D3,d.setLanguage=N3,d.setSessionId=O3,d.setStyleDefinitionsPath=z3,d.setSubscriptionKey=R3,d.setUserRegion=B3,d.setView=function(t){Ty=t,p_=!0},d.source=PM,Object.defineProperty(d,"__esModule",{value:!0})})})(YG,sw);const KG=[{controlName:"StyleControl",controlOptions:{mapStyles:["road","grayscale_light","grayscale_dark","night","satellite"]},options:{position:"top-right"}},{controlName:"ZoomControl",options:{position:"top-right"}},{controlName:"CompassControl",controlOptions:{rotationDegreesDelta:10,style:"dark"},options:{position:"bottom-right"}},{controlName:"PitchControl",controlOptions:{pitchDegreesDelta:5,style:"dark"},options:{position:"bottom-right"}},{controlName:"TrafficControl",controlOptions:{incidents:!0},options:{position:"top-left"}},{controlName:"TrafficLegendControl",controlOptions:{},options:{position:"bottom-left"}}],qO=o=>{const c=[];return o.map((d,_)=>{const C=d,I=new sw.data.Point([Number(C.latitude),Number(C.longitude)]),z=new sw.data.Feature(I,{name:C.name});c.push(z)}),c};function zT(o){console.log("clusterClicked",o)}const $G={textOptions:{textField:["get","title"],offset:[0,1.2]},iconOptions:{image:"pin-round-red"}},XG={textOptions:{textField:["get","title"],offset:[0,1.2]},iconOptions:{image:"pin-round-darkblue"}},ZO=(o,c)=>{const d=Math.random();return pe(qG,{id:d.toString(),type:"Point",coordinate:o.coordinates,properties:{title:c}},d)};function JG(){const[o,c]=Re.useState([]),[d,_]=Re.useState([]);Re.useEffect(()=>{(async()=>{try{const Oe=await(await fetch("/map")).json();if("status"in Oe)return;const{zones:Be,beacons:Xe}=Oe;Array.isArray(Xe)?c(Xe):c([Xe]),Array.isArray(Be)?_(Be):_([Be])}catch(ct){console.log(ct)}})()},[]);var C=qO(o),I=qO(d);const[z]=Re.useState("SymbolLayer"),[Z,X]=Re.useState(XG),[oe]=Re.useState("SymbolLayer"),[_e,Se]=Re.useState($G),Ne=Re.useMemo(()=>({authOptions:{authType:sw.AuthenticationType.subscriptionKey,subscriptionKey:"5hsgO4geR7ounvuJTs9ZZJ_jdsPBp7AOpmyoMP6kg3A"},center:[-8.608016921839297,41.17841760693419],zoom:17,view:"Auto"}),[]),$e=Re.useMemo(()=>C.map(Ze=>ZO(Ze.geometry,Ze.properties!=null?Ze.properties.name:"")),[C]),We=Re.useMemo(()=>I.map(Ze=>ZO(Ze.geometry,Ze.properties!=null?Ze.properties.name:"")),[I]);return rt(c7,{children:[rt("div",{style:GO.buttonContainer,children:[rt("div",{className:"inline-flex rounded-full bg-danger bg-opacity-10 px-3 py-1 text-sm font-medium text-danger",children:["Beacons on ISEP: ",C.length]}),rt("div",{className:"inline-flex rounded-full bg-[#0065af] bg-opacity-10 px-3 py-1 text-sm font-medium text-[#003963] dark:text-[#007bd5]",children:["Zones on ISEP: ",I.length]})]}),pe(yF,{children:pe("div",{style:GO.map,children:rt(jG,{options:Ne,controls:KG,children:[rt(UO,{events:{dataadded:Ze=>{console.log("Data on source added",Ze)}},id:"markersExample AzureMapDataSourceProvider",children:[pe(VO,{id:"markersExample AzureMapLayerProvider",options:_e,events:{click:zT,dbclick:zT},lifecycleEvents:{layeradded:()=>{console.log("LAYER ADDED TO MAP")}},type:oe}),$e]}),rt(UO,{events:{dataadded:Ze=>{console.log("Data on source added",Ze)}},id:"markersExample AzureMapDataSourceProvider2",children:[pe(VO,{id:"markersExample AzureMapLayerProvider2",options:Z,events:{click:zT,dbclick:zT},lifecycleEvents:{layeradded:()=>{console.log("LAYER ADDED TO MAP")}},type:z}),We]})]})})})]})}const GO={map:{height:700},buttonContainer:{display:"grid",gridAutoFlow:"column",gridGap:"10px",gridAutoColumns:"max-content",padding:"10px 0",alignItems:"center"},button:{height:35,width:80,color:"#9a1a24","text-align":"center"}},QG=Re.memo(JG),eH=()=>rt(Q5,{children:[pe(fI,{pageName:"Map Overview"}),pe(yF,{children:pe(QG,{})})]});var tH=Object.defineProperty,rH=(o,c,d)=>c in o?tH(o,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):o[c]=d,j8=(o,c,d)=>(rH(o,typeof c!="symbol"?c+"":c,d),d);let nH=class{constructor(){j8(this,"current",this.detect()),j8(this,"handoffState","pending"),j8(this,"currentId",0)}set(c){this.current!==c&&(this.handoffState="pending",this.currentId=0,this.current=c)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},sv=new nH,ty=(o,c)=>{sv.isServer?Re.useEffect(o,c):Re.useLayoutEffect(o,c)};function lv(o){let c=Re.useRef(o);return ty(()=>{c.current=o},[o]),c}function eT(o){typeof queueMicrotask=="function"?queueMicrotask(o):Promise.resolve().then(o).catch(c=>setTimeout(()=>{throw c}))}function gw(){let o=[],c={addEventListener(d,_,C,I){return d.addEventListener(_,C,I),c.add(()=>d.removeEventListener(_,C,I))},requestAnimationFrame(...d){let _=requestAnimationFrame(...d);return c.add(()=>cancelAnimationFrame(_))},nextFrame(...d){return c.requestAnimationFrame(()=>c.requestAnimationFrame(...d))},setTimeout(...d){let _=setTimeout(...d);return c.add(()=>clearTimeout(_))},microTask(...d){let _={current:!0};return eT(()=>{_.current&&d[0]()}),c.add(()=>{_.current=!1})},style(d,_,C){let I=d.style.getPropertyValue(_);return Object.assign(d.style,{[_]:C}),this.add(()=>{Object.assign(d.style,{[_]:I})})},group(d){let _=gw();return d(_),this.add(()=>_.dispose())},add(d){return o.push(d),()=>{let _=o.indexOf(d);if(_>=0)for(let C of o.splice(_,1))C()}},dispose(){for(let d of o.splice(0))d()}};return c}function T9(){let[o]=Re.useState(gw);return Re.useEffect(()=>()=>o.dispose(),[o]),o}let Vu=function(o){let c=lv(o);return oi.useCallback((...d)=>c.current(...d),[c])};function yw(){let[o,c]=Re.useState(sv.isHandoffComplete);return o&&sv.isHandoffComplete===!1&&c(!1),Re.useEffect(()=>{o!==!0&&c(!0)},[o]),Re.useEffect(()=>sv.handoff(),[]),o}var HO;let vw=(HO=oi.useId)!=null?HO:function(){let o=yw(),[c,d]=oi.useState(o?()=>sv.nextId():null);return ty(()=>{c===null&&d(sv.nextId())},[c]),c!=null?""+c:void 0};function lp(o,c,...d){if(o in c){let C=c[o];return typeof C=="function"?C(...d):C}let _=new Error(`Tried to handle "${o}" but there is no handler defined. Only defined handlers are: ${Object.keys(c).map(C=>`"${C}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(_,lp),_}function _F(o){return sv.isServer?null:o instanceof Node?o.ownerDocument:o!=null&&o.hasOwnProperty("current")&&o.current instanceof Node?o.current.ownerDocument:document}let rz=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(o=>`${o}:not([tabindex='-1'])`).join(",");var i2=(o=>(o[o.First=1]="First",o[o.Previous=2]="Previous",o[o.Next=4]="Next",o[o.Last=8]="Last",o[o.WrapAround=16]="WrapAround",o[o.NoScroll=32]="NoScroll",o))(i2||{}),xF=(o=>(o[o.Error=0]="Error",o[o.Overflow=1]="Overflow",o[o.Success=2]="Success",o[o.Underflow=3]="Underflow",o))(xF||{}),iH=(o=>(o[o.Previous=-1]="Previous",o[o.Next=1]="Next",o))(iH||{});function oH(o=document.body){return o==null?[]:Array.from(o.querySelectorAll(rz)).sort((c,d)=>Math.sign((c.tabIndex||Number.MAX_SAFE_INTEGER)-(d.tabIndex||Number.MAX_SAFE_INTEGER)))}var wF=(o=>(o[o.Strict=0]="Strict",o[o.Loose=1]="Loose",o))(wF||{});function aH(o,c=0){var d;return o===((d=_F(o))==null?void 0:d.body)?!1:lp(c,{[0](){return o.matches(rz)},[1](){let _=o;for(;_!==null;){if(_.matches(rz))return!0;_=_.parentElement}return!1}})}var sH=(o=>(o[o.Keyboard=0]="Keyboard",o[o.Mouse=1]="Mouse",o))(sH||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",o=>{o.metaKey||o.altKey||o.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",o=>{o.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:o.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function d2(o){o==null||o.focus({preventScroll:!0})}let lH=["textarea","input"].join(",");function uH(o){var c,d;return(d=(c=o==null?void 0:o.matches)==null?void 0:c.call(o,lH))!=null?d:!1}function cH(o,c=d=>d){return o.slice().sort((d,_)=>{let C=c(d),I=c(_);if(C===null||I===null)return 0;let z=C.compareDocumentPosition(I);return z&Node.DOCUMENT_POSITION_FOLLOWING?-1:z&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function oE(o,c,{sorted:d=!0,relativeTo:_=null,skipElements:C=[]}={}){let I=Array.isArray(o)?o.length>0?o[0].ownerDocument:document:o.ownerDocument,z=Array.isArray(o)?d?cH(o):o:oH(o);C.length>0&&z.length>1&&(z=z.filter($e=>!C.includes($e))),_=_??I.activeElement;let Z=(()=>{if(c&5)return 1;if(c&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),X=(()=>{if(c&1)return 0;if(c&2)return Math.max(0,z.indexOf(_))-1;if(c&4)return Math.max(0,z.indexOf(_))+1;if(c&8)return z.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),oe=c&32?{preventScroll:!0}:{},_e=0,Se=z.length,Ne;do{if(_e>=Se||_e+Se<=0)return 0;let $e=X+_e;if(c&16)$e=($e+Se)%Se;else{if($e<0)return 3;if($e>=Se)return 1}Ne=z[$e],Ne==null||Ne.focus(oe),_e+=Z}while(Ne!==I.activeElement);return c&6&&uH(Ne)&&Ne.select(),2}function U8(o,c,d){let _=lv(c);Re.useEffect(()=>{function C(I){_.current(I)}return document.addEventListener(o,C,d),()=>document.removeEventListener(o,C,d)},[o,d])}function pH(o,c,d=!0){let _=Re.useRef(!1);Re.useEffect(()=>{requestAnimationFrame(()=>{_.current=d})},[d]);function C(z,Z){if(!_.current||z.defaultPrevented)return;let X=function _e(Se){return typeof Se=="function"?_e(Se()):Array.isArray(Se)||Se instanceof Set?Se:[Se]}(o),oe=Z(z);if(oe!==null&&oe.getRootNode().contains(oe)){for(let _e of X){if(_e===null)continue;let Se=_e instanceof HTMLElement?_e:_e.current;if(Se!=null&&Se.contains(oe)||z.composed&&z.composedPath().includes(Se))return}return!aH(oe,wF.Loose)&&oe.tabIndex!==-1&&z.preventDefault(),c(z,oe)}}let I=Re.useRef(null);U8("mousedown",z=>{var Z,X;_.current&&(I.current=((X=(Z=z.composedPath)==null?void 0:Z.call(z))==null?void 0:X[0])||z.target)},!0),U8("click",z=>{I.current&&(C(z,()=>I.current),I.current=null)},!0),U8("blur",z=>C(z,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}let bF=Symbol();function hH(o,c=!0){return Object.assign(o,{[bF]:c})}function Ug(...o){let c=Re.useRef(o);Re.useEffect(()=>{c.current=o},[o]);let d=Vu(_=>{for(let C of c.current)C!=null&&(typeof C=="function"?C(_):C.current=_)});return o.every(_=>_==null||(_==null?void 0:_[bF]))?void 0:d}function nz(...o){return o.filter(Boolean).join(" ")}var GE=(o=>(o[o.None=0]="None",o[o.RenderStrategy=1]="RenderStrategy",o[o.Static=2]="Static",o))(GE||{}),ov=(o=>(o[o.Unmount=0]="Unmount",o[o.Hidden=1]="Hidden",o))(ov||{});function jf({ourProps:o,theirProps:c,slot:d,defaultTag:_,features:C,visible:I=!0,name:z}){let Z=CF(c,o);if(I)return NT(Z,d,_,z);let X=C??0;if(X&2){let{static:oe=!1,..._e}=Z;if(oe)return NT(_e,d,_,z)}if(X&1){let{unmount:oe=!0,..._e}=Z;return lp(oe?0:1,{[0](){return null},[1](){return NT({..._e,hidden:!0,style:{display:"none"}},d,_,z)}})}return NT(Z,d,_,z)}function NT(o,c={},d,_){let{as:C=d,children:I,refName:z="ref",...Z}=V8(o,["unmount","static"]),X=o.ref!==void 0?{[z]:o.ref}:{},oe=typeof I=="function"?I(c):I;"className"in Z&&Z.className&&typeof Z.className=="function"&&(Z.className=Z.className(c));let _e={};if(c){let Se=!1,Ne=[];for(let[$e,We]of Object.entries(c))typeof We=="boolean"&&(Se=!0),We===!0&&Ne.push($e);Se&&(_e["data-headlessui-state"]=Ne.join(" "))}if(C===Re.Fragment&&Object.keys(WO(Z)).length>0){if(!Re.isValidElement(oe)||Array.isArray(oe)&&oe.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${_} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Z).map(We=>`  - ${We}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(We=>`  - ${We}`).join(`
`)].join(`
`));let Se=oe.props,Ne=typeof(Se==null?void 0:Se.className)=="function"?(...We)=>nz(Se==null?void 0:Se.className(...We),Z.className):nz(Se==null?void 0:Se.className,Z.className),$e=Ne?{className:Ne}:{};return Re.cloneElement(oe,Object.assign({},CF(oe.props,WO(V8(Z,["ref"]))),_e,X,dH(oe.ref,X.ref),$e))}return Re.createElement(C,Object.assign({},V8(Z,["ref"]),C!==Re.Fragment&&X,C!==Re.Fragment&&_e),oe)}function dH(...o){return{ref:o.every(c=>c==null)?void 0:c=>{for(let d of o)d!=null&&(typeof d=="function"?d(c):d.current=c)}}}function CF(...o){if(o.length===0)return{};if(o.length===1)return o[0];let c={},d={};for(let _ of o)for(let C in _)C.startsWith("on")&&typeof _[C]=="function"?(d[C]!=null||(d[C]=[]),d[C].push(_[C])):c[C]=_[C];if(c.disabled||c["aria-disabled"])return Object.assign(c,Object.fromEntries(Object.keys(d).map(_=>[_,void 0])));for(let _ in d)Object.assign(c,{[_](C,...I){let z=d[_];for(let Z of z){if((C instanceof Event||(C==null?void 0:C.nativeEvent)instanceof Event)&&C.defaultPrevented)return;Z(C,...I)}}});return c}function Af(o){var c;return Object.assign(Re.forwardRef(o),{displayName:(c=o.displayName)!=null?c:o.name})}function WO(o){let c=Object.assign({},o);for(let d in c)c[d]===void 0&&delete c[d];return c}function V8(o,c=[]){let d=Object.assign({},o);for(let _ of c)_ in d&&delete d[_];return d}function fH(o){let c=o.parentElement,d=null;for(;c&&!(c instanceof HTMLFieldSetElement);)c instanceof HTMLLegendElement&&(d=c),c=c.parentElement;let _=(c==null?void 0:c.getAttribute("disabled"))==="";return _&&mH(d)?!1:_}function mH(o){if(!o)return!1;let c=o.previousElementSibling;for(;c!==null;){if(c instanceof HTMLLegendElement)return!1;c=c.previousElementSibling}return!0}let gH="div";var HE=(o=>(o[o.None=1]="None",o[o.Focusable=2]="Focusable",o[o.Hidden=4]="Hidden",o))(HE||{});function yH(o,c){let{features:d=1,..._}=o,C={ref:c,"aria-hidden":(d&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(d&4)===4&&(d&2)!==2&&{display:"none"}}};return jf({ourProps:C,theirProps:_,slot:{},defaultTag:gH,name:"Hidden"})}let iz=Af(yH),E9=Re.createContext(null);E9.displayName="OpenClosedContext";var Sf=(o=>(o[o.Open=1]="Open",o[o.Closed=2]="Closed",o[o.Closing=4]="Closing",o[o.Opening=8]="Opening",o))(Sf||{});function I9(){return Re.useContext(E9)}function vH({value:o,children:c}){return oi.createElement(E9.Provider,{value:o},c)}var SF=(o=>(o.Space=" ",o.Enter="Enter",o.Escape="Escape",o.Backspace="Backspace",o.Delete="Delete",o.ArrowLeft="ArrowLeft",o.ArrowUp="ArrowUp",o.ArrowRight="ArrowRight",o.ArrowDown="ArrowDown",o.Home="Home",o.End="End",o.PageUp="PageUp",o.PageDown="PageDown",o.Tab="Tab",o))(SF||{});function k9(o,c){let d=Re.useRef([]),_=Vu(o);Re.useEffect(()=>{let C=[...d.current];for(let[I,z]of c.entries())if(d.current[I]!==z){let Z=_(c,C);return d.current=c,Z}},[_,...c])}function _H(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function xH(o,c,d){let _=lv(c);Re.useEffect(()=>{function C(I){_.current(I)}return window.addEventListener(o,C,d),()=>window.removeEventListener(o,C,d)},[o,d])}var c5=(o=>(o[o.Forwards=0]="Forwards",o[o.Backwards=1]="Backwards",o))(c5||{});function wH(){let o=Re.useRef(0);return xH("keydown",c=>{c.key==="Tab"&&(o.current=c.shiftKey?1:0)},!0),o}function tT(){let o=Re.useRef(!1);return ty(()=>(o.current=!0,()=>{o.current=!1}),[]),o}function wI(...o){return Re.useMemo(()=>_F(...o),[...o])}function TF(o,c,d,_){let C=lv(d);Re.useEffect(()=>{o=o??window;function I(z){C.current(z)}return o.addEventListener(c,I,_),()=>o.removeEventListener(c,I,_)},[o,c,_])}function bH(o){function c(){document.readyState!=="loading"&&(o(),document.removeEventListener("DOMContentLoaded",c))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",c),c())}function EF(o){if(!o)return new Set;if(typeof o=="function")return new Set(o());let c=new Set;for(let d of o.current)d.current instanceof HTMLElement&&c.add(d.current);return c}let CH="div";var IF=(o=>(o[o.None=1]="None",o[o.InitialFocus=2]="InitialFocus",o[o.TabLock=4]="TabLock",o[o.FocusLock=8]="FocusLock",o[o.RestoreFocus=16]="RestoreFocus",o[o.All=30]="All",o))(IF||{});function SH(o,c){let d=Re.useRef(null),_=Ug(d,c),{initialFocus:C,containers:I,features:z=30,...Z}=o;yw()||(z=1);let X=wI(d);IH({ownerDocument:X},Boolean(z&16));let oe=kH({ownerDocument:X,container:d,initialFocus:C},Boolean(z&2));MH({ownerDocument:X,container:d,containers:I,previousActiveElement:oe},Boolean(z&8));let _e=wH(),Se=Vu(Ze=>{let ct=d.current;ct&&(Oe=>Oe())(()=>{lp(_e.current,{[c5.Forwards]:()=>{oE(ct,i2.First,{skipElements:[Ze.relatedTarget]})},[c5.Backwards]:()=>{oE(ct,i2.Last,{skipElements:[Ze.relatedTarget]})}})})}),Ne=T9(),$e=Re.useRef(!1),We={ref:_,onKeyDown(Ze){Ze.key=="Tab"&&($e.current=!0,Ne.requestAnimationFrame(()=>{$e.current=!1}))},onBlur(Ze){let ct=EF(I);d.current instanceof HTMLElement&&ct.add(d.current);let Oe=Ze.relatedTarget;Oe instanceof HTMLElement&&Oe.dataset.headlessuiFocusGuard!=="true"&&(kF(ct,Oe)||($e.current?oE(d.current,lp(_e.current,{[c5.Forwards]:()=>i2.Next,[c5.Backwards]:()=>i2.Previous})|i2.WrapAround,{relativeTo:Ze.target}):Ze.target instanceof HTMLElement&&d2(Ze.target)))}};return oi.createElement(oi.Fragment,null,Boolean(z&4)&&oi.createElement(iz,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:Se,features:HE.Focusable}),jf({ourProps:We,theirProps:Z,defaultTag:CH,name:"FocusTrap"}),Boolean(z&4)&&oi.createElement(iz,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:Se,features:HE.Focusable}))}let TH=Af(SH),J4=Object.assign(TH,{features:IF}),Iv=[];bH(()=>{function o(c){c.target instanceof HTMLElement&&c.target!==document.body&&Iv[0]!==c.target&&(Iv.unshift(c.target),Iv=Iv.filter(d=>d!=null&&d.isConnected),Iv.splice(10))}window.addEventListener("click",o,{capture:!0}),window.addEventListener("mousedown",o,{capture:!0}),window.addEventListener("focus",o,{capture:!0}),document.body.addEventListener("click",o,{capture:!0}),document.body.addEventListener("mousedown",o,{capture:!0}),document.body.addEventListener("focus",o,{capture:!0})});function EH(o=!0){let c=Re.useRef(Iv.slice());return k9(([d],[_])=>{_===!0&&d===!1&&eT(()=>{c.current.splice(0)}),_===!1&&d===!0&&(c.current=Iv.slice())},[o,Iv,c]),Vu(()=>{var d;return(d=c.current.find(_=>_!=null&&_.isConnected))!=null?d:null})}function IH({ownerDocument:o},c){let d=EH(c);k9(()=>{c||(o==null?void 0:o.activeElement)===(o==null?void 0:o.body)&&d2(d())},[c]);let _=Re.useRef(!1);Re.useEffect(()=>(_.current=!1,()=>{_.current=!0,eT(()=>{_.current&&d2(d())})}),[])}function kH({ownerDocument:o,container:c,initialFocus:d},_){let C=Re.useRef(null),I=tT();return k9(()=>{if(!_)return;let z=c.current;z&&eT(()=>{if(!I.current)return;let Z=o==null?void 0:o.activeElement;if(d!=null&&d.current){if((d==null?void 0:d.current)===Z){C.current=Z;return}}else if(z.contains(Z)){C.current=Z;return}d!=null&&d.current?d2(d.current):oE(z,i2.First)===xF.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),C.current=o==null?void 0:o.activeElement})},[_]),C}function MH({ownerDocument:o,container:c,containers:d,previousActiveElement:_},C){let I=tT();TF(o==null?void 0:o.defaultView,"focus",z=>{if(!C||!I.current)return;let Z=EF(d);c.current instanceof HTMLElement&&Z.add(c.current);let X=_.current;if(!X)return;let oe=z.target;oe&&oe instanceof HTMLElement?kF(Z,oe)?(_.current=oe,d2(oe)):(z.preventDefault(),z.stopPropagation(),d2(X)):d2(_.current)},!0)}function kF(o,c){for(let d of o)if(d.contains(c))return!0;return!1}let MF=Re.createContext(!1);function AH(){return Re.useContext(MF)}function oz(o){return oi.createElement(MF.Provider,{value:o.force},o.children)}function LH(o){let c=AH(),d=Re.useContext(AF),_=wI(o),[C,I]=Re.useState(()=>{if(!c&&d!==null||sv.isServer)return null;let z=_==null?void 0:_.getElementById("headlessui-portal-root");if(z)return z;if(_===null)return null;let Z=_.createElement("div");return Z.setAttribute("id","headlessui-portal-root"),_.body.appendChild(Z)});return Re.useEffect(()=>{C!==null&&(_!=null&&_.body.contains(C)||_==null||_.body.appendChild(C))},[C,_]),Re.useEffect(()=>{c||d!==null&&I(d.current)},[d,I,c]),C}let PH=Re.Fragment;function DH(o,c){let d=o,_=Re.useRef(null),C=Ug(hH(_e=>{_.current=_e}),c),I=wI(_),z=LH(_),[Z]=Re.useState(()=>{var _e;return sv.isServer?null:(_e=I==null?void 0:I.createElement("div"))!=null?_e:null}),X=yw(),oe=Re.useRef(!1);return ty(()=>{if(oe.current=!1,!(!z||!Z))return z.contains(Z)||(Z.setAttribute("data-headlessui-portal",""),z.appendChild(Z)),()=>{oe.current=!0,eT(()=>{var _e;oe.current&&(!z||!Z||(Z instanceof Node&&z.contains(Z)&&z.removeChild(Z),z.childNodes.length<=0&&((_e=z.parentElement)==null||_e.removeChild(z))))})}},[z,Z]),X?!z||!Z?null:aE.createPortal(jf({ourProps:{ref:C},theirProps:d,defaultTag:PH,name:"Portal"}),Z):null}let zH=Re.Fragment,AF=Re.createContext(null);function NH(o,c){let{target:d,..._}=o,C={ref:Ug(c)};return oi.createElement(AF.Provider,{value:d},jf({ourProps:C,theirProps:_,defaultTag:zH,name:"Popover.Group"}))}let OH=Af(DH),RH=Af(NH),az=Object.assign(OH,{Group:RH}),LF=Re.createContext(null);function PF(){let o=Re.useContext(LF);if(o===null){let c=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(c,PF),c}return o}function BH(){let[o,c]=Re.useState([]);return[o.length>0?o.join(" "):void 0,Re.useMemo(()=>function(d){let _=Vu(I=>(c(z=>[...z,I]),()=>c(z=>{let Z=z.slice(),X=Z.indexOf(I);return X!==-1&&Z.splice(X,1),Z}))),C=Re.useMemo(()=>({register:_,slot:d.slot,name:d.name,props:d.props}),[_,d.slot,d.name,d.props]);return oi.createElement(LF.Provider,{value:C},d.children)},[c])]}let FH="p";function jH(o,c){let d=vw(),{id:_=`headlessui-description-${d}`,...C}=o,I=PF(),z=Ug(c);ty(()=>I.register(_),[_,I.register]);let Z={ref:z,...I.props,id:_};return jf({ourProps:Z,theirProps:C,slot:I.slot||{},defaultTag:FH,name:I.name||"Description"})}let UH=Af(jH),VH=Object.assign(UH,{}),M9=Re.createContext(()=>{});M9.displayName="StackContext";var sz=(o=>(o[o.Add=0]="Add",o[o.Remove=1]="Remove",o))(sz||{});function qH(){return Re.useContext(M9)}function ZH({children:o,onUpdate:c,type:d,element:_,enabled:C}){let I=qH(),z=Vu((...Z)=>{c==null||c(...Z),I(...Z)});return ty(()=>{let Z=C===void 0||C===!0;return Z&&z(0,d,_),()=>{Z&&z(1,d,_)}},[z,d,_,C]),oi.createElement(M9.Provider,{value:z},o)}function GH(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}const HH=typeof Object.is=="function"?Object.is:GH,{useState:WH,useEffect:YH,useLayoutEffect:KH,useDebugValue:$H}=J2;function XH(o,c,d){const _=c(),[{inst:C},I]=WH({inst:{value:_,getSnapshot:c}});return KH(()=>{C.value=_,C.getSnapshot=c,q8(C)&&I({inst:C})},[o,_,c]),YH(()=>(q8(C)&&I({inst:C}),o(()=>{q8(C)&&I({inst:C})})),[o]),$H(_),_}function q8(o){const c=o.getSnapshot,d=o.value;try{const _=c();return!HH(d,_)}catch{return!0}}function JH(o,c,d){return c()}const QH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eW=!QH,tW=eW?JH:XH,rW="useSyncExternalStore"in J2?(o=>o.useSyncExternalStore)(J2):tW;function nW(o){return rW(o.subscribe,o.getSnapshot,o.getSnapshot)}function iW(o,c){let d=o(),_=new Set;return{getSnapshot(){return d},subscribe(C){return _.add(C),()=>_.delete(C)},dispatch(C,...I){let z=c[C].call(d,...I);z&&(d=z,_.forEach(Z=>Z()))}}}function oW(){let o;return{before({doc:c}){var d;let _=c.documentElement;o=((d=c.defaultView)!=null?d:window).innerWidth-_.clientWidth},after({doc:c,d}){let _=c.documentElement,C=_.clientWidth-_.offsetWidth,I=o-C;d.style(_,"paddingRight",`${I}px`)}}}function aW(){if(!_H())return{};let o;return{before(){o=window.pageYOffset},after({doc:c,d,meta:_}){function C(z){return _.containers.flatMap(Z=>Z()).some(Z=>Z.contains(z))}d.style(c.body,"marginTop",`-${o}px`),window.scrollTo(0,0);let I=null;d.addEventListener(c,"click",z=>{if(z.target instanceof HTMLElement)try{let Z=z.target.closest("a");if(!Z)return;let{hash:X}=new URL(Z.href),oe=c.querySelector(X);oe&&!C(oe)&&(I=oe)}catch{}},!0),d.addEventListener(c,"touchmove",z=>{z.target instanceof HTMLElement&&!C(z.target)&&z.preventDefault()},{passive:!1}),d.add(()=>{window.scrollTo(0,window.pageYOffset+o),I&&I.isConnected&&(I.scrollIntoView({block:"nearest"}),I=null)})}}}function sW(){return{before({doc:o,d:c}){c.style(o.documentElement,"overflow","hidden")}}}function lW(o){let c={};for(let d of o)Object.assign(c,d(c));return c}let c2=iW(()=>new Map,{PUSH(o,c){var d;let _=(d=this.get(o))!=null?d:{doc:o,count:0,d:gw(),meta:new Set};return _.count++,_.meta.add(c),this.set(o,_),this},POP(o,c){let d=this.get(o);return d&&(d.count--,d.meta.delete(c)),this},SCROLL_PREVENT({doc:o,d:c,meta:d}){let _={doc:o,d:c,meta:lW(d)},C=[aW(),oW(),sW()];C.forEach(({before:I})=>I==null?void 0:I(_)),C.forEach(({after:I})=>I==null?void 0:I(_))},SCROLL_ALLOW({d:o}){o.dispose()},TEARDOWN({doc:o}){this.delete(o)}});c2.subscribe(()=>{let o=c2.getSnapshot(),c=new Map;for(let[d]of o)c.set(d,d.documentElement.style.overflow);for(let d of o.values()){let _=c.get(d.doc)==="hidden",C=d.count!==0;(C&&!_||!C&&_)&&c2.dispatch(d.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",d),d.count===0&&c2.dispatch("TEARDOWN",d)}});function uW(o,c,d){let _=nW(c2),C=o?_.get(o):void 0,I=C?C.count>0:!1;return ty(()=>{if(!(!o||!c))return c2.dispatch("PUSH",o,d),()=>c2.dispatch("POP",o,d)},[c,o]),I}let Z8=new Map,Q4=new Map;function YO(o,c=!0){ty(()=>{var d;if(!c)return;let _=typeof o=="function"?o():o.current;if(!_)return;function C(){var z;if(!_)return;let Z=(z=Q4.get(_))!=null?z:1;if(Z===1?Q4.delete(_):Q4.set(_,Z-1),Z!==1)return;let X=Z8.get(_);X&&(X["aria-hidden"]===null?_.removeAttribute("aria-hidden"):_.setAttribute("aria-hidden",X["aria-hidden"]),_.inert=X.inert,Z8.delete(_))}let I=(d=Q4.get(_))!=null?d:0;return Q4.set(_,I+1),I!==0||(Z8.set(_,{"aria-hidden":_.getAttribute("aria-hidden"),inert:_.inert}),_.setAttribute("aria-hidden","true"),_.inert=!0),C},[o,c])}var cW=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(cW||{}),pW=(o=>(o[o.SetTitleId=0]="SetTitleId",o))(pW||{});let hW={[0](o,c){return o.titleId===c.id?o:{...o,titleId:c.id}}},WE=Re.createContext(null);WE.displayName="DialogContext";function rT(o){let c=Re.useContext(WE);if(c===null){let d=new Error(`<${o} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,rT),d}return c}function dW(o,c,d=()=>[document.body]){uW(o,c,_=>{var C;return{containers:[...(C=_.containers)!=null?C:[],d]}})}function fW(o,c){return lp(c.type,hW,o,c)}let mW="div",gW=GE.RenderStrategy|GE.Static;function yW(o,c){let d=vw(),{id:_=`headlessui-dialog-${d}`,open:C,onClose:I,initialFocus:z,__demoMode:Z=!1,...X}=o,[oe,_e]=Re.useState(0),Se=I9();C===void 0&&Se!==null&&(C=(Se&Sf.Open)===Sf.Open);let Ne=Re.useRef(null),$e=Ug(Ne,c),We=Re.useRef(null),Ze=wI(Ne),ct=o.hasOwnProperty("open")||Se!==null,Oe=o.hasOwnProperty("onClose");if(!ct&&!Oe)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!ct)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!Oe)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof C!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${C}`);if(typeof I!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${I}`);let Be=C?0:1,[Xe,Et]=Re.useReducer(fW,{titleId:null,descriptionId:null,panelRef:Re.createRef()}),Ht=Vu(()=>I(!1)),Xt=Vu(Eo=>Et({type:0,id:Eo})),ze=yw()?Z?!1:Be===0:!1,ot=oe>1,Zr=Re.useContext(WE)!==null,yr=ot?"parent":"leaf",sr=Se!==null?(Se&Sf.Closing)===Sf.Closing:!1,_s=(()=>Zr||sr?!1:ze)(),ms=Re.useCallback(()=>{var Eo,gs;return(gs=Array.from((Eo=Ze==null?void 0:Ze.querySelectorAll("body > *"))!=null?Eo:[]).find(ko=>ko.id==="headlessui-portal-root"?!1:ko.contains(We.current)&&ko instanceof HTMLElement))!=null?gs:null},[We]);YO(ms,_s);let Lf=(()=>ot?!0:ze)(),Go=Re.useCallback(()=>{var Eo,gs;return(gs=Array.from((Eo=Ze==null?void 0:Ze.querySelectorAll("[data-headlessui-portal]"))!=null?Eo:[]).find(ko=>ko.contains(We.current)&&ko instanceof HTMLElement))!=null?gs:null},[We]);YO(Go,Lf);let gi=Vu(()=>{var Eo,gs;return[...Array.from((Eo=Ze==null?void 0:Ze.querySelectorAll("html > *, body > *, [data-headlessui-portal]"))!=null?Eo:[]).filter(ko=>!(ko===document.body||ko===document.head||!(ko instanceof HTMLElement)||ko.contains(We.current)||Xe.panelRef.current&&ko.contains(Xe.panelRef.current))),(gs=Xe.panelRef.current)!=null?gs:Ne.current]}),Ra=(()=>!(!ze||ot))();pH(()=>gi(),Ht,Ra);let ar=(()=>!(ot||Be!==0))();TF(Ze==null?void 0:Ze.defaultView,"keydown",Eo=>{ar&&(Eo.defaultPrevented||Eo.key===SF.Escape&&(Eo.preventDefault(),Eo.stopPropagation(),Ht()))});let Vr=(()=>!(sr||Be!==0||Zr))();dW(Ze,Vr,gi),Re.useEffect(()=>{if(Be!==0||!Ne.current)return;let Eo=new ResizeObserver(gs=>{for(let ko of gs){let ys=ko.target.getBoundingClientRect();ys.x===0&&ys.y===0&&ys.width===0&&ys.height===0&&Ht()}});return Eo.observe(Ne.current),()=>Eo.disconnect()},[Be,Ne,Ht]);let[Tn,Ai]=BH(),ga=Re.useMemo(()=>[{dialogState:Be,close:Ht,setTitleId:Xt},Xe],[Be,Xe,Ht,Xt]),Uf=Re.useMemo(()=>({open:Be===0}),[Be]),cp={ref:$e,id:_,role:"dialog","aria-modal":Be===0?!0:void 0,"aria-labelledby":Xe.titleId,"aria-describedby":Tn};return oi.createElement(ZH,{type:"Dialog",enabled:Be===0,element:Ne,onUpdate:Vu((Eo,gs)=>{gs==="Dialog"&&lp(Eo,{[sz.Add]:()=>_e(ko=>ko+1),[sz.Remove]:()=>_e(ko=>ko-1)})})},oi.createElement(oz,{force:!0},oi.createElement(az,null,oi.createElement(WE.Provider,{value:ga},oi.createElement(az.Group,{target:Ne},oi.createElement(oz,{force:!1},oi.createElement(Ai,{slot:Uf,name:"Dialog.Description"},oi.createElement(J4,{initialFocus:z,containers:gi,features:ze?lp(yr,{parent:J4.features.RestoreFocus,leaf:J4.features.All&~J4.features.FocusLock}):J4.features.None},jf({ourProps:cp,theirProps:X,slot:Uf,defaultTag:mW,features:gW,visible:Be===0,name:"Dialog"})))))))),oi.createElement(iz,{features:HE.Hidden,ref:We}))}let vW="div";function _W(o,c){let d=vw(),{id:_=`headlessui-dialog-overlay-${d}`,...C}=o,[{dialogState:I,close:z}]=rT("Dialog.Overlay"),Z=Ug(c),X=Vu(_e=>{if(_e.target===_e.currentTarget){if(fH(_e.currentTarget))return _e.preventDefault();_e.preventDefault(),_e.stopPropagation(),z()}}),oe=Re.useMemo(()=>({open:I===0}),[I]);return jf({ourProps:{ref:Z,id:_,"aria-hidden":!0,onClick:X},theirProps:C,slot:oe,defaultTag:vW,name:"Dialog.Overlay"})}let xW="div";function wW(o,c){let d=vw(),{id:_=`headlessui-dialog-backdrop-${d}`,...C}=o,[{dialogState:I},z]=rT("Dialog.Backdrop"),Z=Ug(c);Re.useEffect(()=>{if(z.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[z.panelRef]);let X=Re.useMemo(()=>({open:I===0}),[I]);return oi.createElement(oz,{force:!0},oi.createElement(az,null,jf({ourProps:{ref:Z,id:_,"aria-hidden":!0},theirProps:C,slot:X,defaultTag:xW,name:"Dialog.Backdrop"})))}let bW="div";function CW(o,c){let d=vw(),{id:_=`headlessui-dialog-panel-${d}`,...C}=o,[{dialogState:I},z]=rT("Dialog.Panel"),Z=Ug(c,z.panelRef),X=Re.useMemo(()=>({open:I===0}),[I]),oe=Vu(_e=>{_e.stopPropagation()});return jf({ourProps:{ref:Z,id:_,onClick:oe},theirProps:C,slot:X,defaultTag:bW,name:"Dialog.Panel"})}let SW="h2";function TW(o,c){let d=vw(),{id:_=`headlessui-dialog-title-${d}`,...C}=o,[{dialogState:I,setTitleId:z}]=rT("Dialog.Title"),Z=Ug(c);Re.useEffect(()=>(z(_),()=>z(null)),[_,z]);let X=Re.useMemo(()=>({open:I===0}),[I]);return jf({ourProps:{ref:Z,id:_},theirProps:C,slot:X,defaultTag:SW,name:"Dialog.Title"})}let EW=Af(yW),IW=Af(wW),kW=Af(CW),MW=Af(_W),AW=Af(TW),f2=Object.assign(EW,{Backdrop:IW,Panel:kW,Overlay:MW,Title:AW,Description:VH});function LW(o=0){let[c,d]=Re.useState(o),_=tT(),C=Re.useCallback(X=>{_.current&&d(oe=>oe|X)},[c,_]),I=Re.useCallback(X=>Boolean(c&X),[c]),z=Re.useCallback(X=>{_.current&&d(oe=>oe&~X)},[d,_]),Z=Re.useCallback(X=>{_.current&&d(oe=>oe^X)},[d]);return{flags:c,addFlag:C,hasFlag:I,removeFlag:z,toggleFlag:Z}}function PW(o){let c={called:!1};return(...d)=>{if(!c.called)return c.called=!0,o(...d)}}function G8(o,...c){o&&c.length>0&&o.classList.add(...c)}function H8(o,...c){o&&c.length>0&&o.classList.remove(...c)}function DW(o,c){let d=gw();if(!o)return d.dispose;let{transitionDuration:_,transitionDelay:C}=getComputedStyle(o),[I,z]=[_,C].map(X=>{let[oe=0]=X.split(",").filter(Boolean).map(_e=>_e.includes("ms")?parseFloat(_e):parseFloat(_e)*1e3).sort((_e,Se)=>Se-_e);return oe}),Z=I+z;if(Z!==0){d.group(oe=>{oe.setTimeout(()=>{c(),oe.dispose()},Z),oe.addEventListener(o,"transitionrun",_e=>{_e.target===_e.currentTarget&&oe.dispose()})});let X=d.addEventListener(o,"transitionend",oe=>{oe.target===oe.currentTarget&&(c(),X())})}else c();return d.add(()=>c()),d.dispose}function zW(o,c,d,_){let C=d?"enter":"leave",I=gw(),z=_!==void 0?PW(_):()=>{};C==="enter"&&(o.removeAttribute("hidden"),o.style.display="");let Z=lp(C,{enter:()=>c.enter,leave:()=>c.leave}),X=lp(C,{enter:()=>c.enterTo,leave:()=>c.leaveTo}),oe=lp(C,{enter:()=>c.enterFrom,leave:()=>c.leaveFrom});return H8(o,...c.enter,...c.enterTo,...c.enterFrom,...c.leave,...c.leaveFrom,...c.leaveTo,...c.entered),G8(o,...Z,...oe),I.nextFrame(()=>{H8(o,...oe),G8(o,...X),DW(o,()=>(H8(o,...Z),G8(o,...c.entered),z()))}),I.dispose}function NW({container:o,direction:c,classes:d,onStart:_,onStop:C}){let I=tT(),z=T9(),Z=lv(c);ty(()=>{let X=gw();z.add(X.dispose);let oe=o.current;if(oe&&Z.current!=="idle"&&I.current)return X.dispose(),_.current(Z.current),X.add(zW(oe,d.current,Z.current==="enter",()=>{X.dispose(),C.current(Z.current)})),X.dispose},[c])}function Xx(o=""){return o.split(" ").filter(c=>c.trim().length>1)}let bI=Re.createContext(null);bI.displayName="TransitionContext";var OW=(o=>(o.Visible="visible",o.Hidden="hidden",o))(OW||{});function RW(){let o=Re.useContext(bI);if(o===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return o}function BW(){let o=Re.useContext(CI);if(o===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return o}let CI=Re.createContext(null);CI.displayName="NestingContext";function SI(o){return"children"in o?SI(o.children):o.current.filter(({el:c})=>c.current!==null).filter(({state:c})=>c==="visible").length>0}function DF(o,c){let d=lv(o),_=Re.useRef([]),C=tT(),I=T9(),z=Vu(($e,We=ov.Hidden)=>{let Ze=_.current.findIndex(({el:ct})=>ct===$e);Ze!==-1&&(lp(We,{[ov.Unmount](){_.current.splice(Ze,1)},[ov.Hidden](){_.current[Ze].state="hidden"}}),I.microTask(()=>{var ct;!SI(_)&&C.current&&((ct=d.current)==null||ct.call(d))}))}),Z=Vu($e=>{let We=_.current.find(({el:Ze})=>Ze===$e);return We?We.state!=="visible"&&(We.state="visible"):_.current.push({el:$e,state:"visible"}),()=>z($e,ov.Unmount)}),X=Re.useRef([]),oe=Re.useRef(Promise.resolve()),_e=Re.useRef({enter:[],leave:[],idle:[]}),Se=Vu(($e,We,Ze)=>{X.current.splice(0),c&&(c.chains.current[We]=c.chains.current[We].filter(([ct])=>ct!==$e)),c==null||c.chains.current[We].push([$e,new Promise(ct=>{X.current.push(ct)})]),c==null||c.chains.current[We].push([$e,new Promise(ct=>{Promise.all(_e.current[We].map(([Oe,Be])=>Be)).then(()=>ct())})]),We==="enter"?oe.current=oe.current.then(()=>c==null?void 0:c.wait.current).then(()=>Ze(We)):Ze(We)}),Ne=Vu(($e,We,Ze)=>{Promise.all(_e.current[We].splice(0).map(([ct,Oe])=>Oe)).then(()=>{var ct;(ct=X.current.shift())==null||ct()}).then(()=>Ze(We))});return Re.useMemo(()=>({children:_,register:Z,unregister:z,onStart:Se,onStop:Ne,wait:oe,chains:_e}),[Z,z,_,Se,Ne,_e,oe])}function FW(){}let jW=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function KO(o){var c;let d={};for(let _ of jW)d[_]=(c=o[_])!=null?c:FW;return d}function UW(o){let c=Re.useRef(KO(o));return Re.useEffect(()=>{c.current=KO(o)},[o]),c}let VW="div",zF=GE.RenderStrategy;function qW(o,c){let{beforeEnter:d,afterEnter:_,beforeLeave:C,afterLeave:I,enter:z,enterFrom:Z,enterTo:X,entered:oe,leave:_e,leaveFrom:Se,leaveTo:Ne,...$e}=o,We=Re.useRef(null),Ze=Ug(We,c),ct=$e.unmount?ov.Unmount:ov.Hidden,{show:Oe,appear:Be,initial:Xe}=RW(),[Et,Ht]=Re.useState(Oe?"visible":"hidden"),Xt=BW(),{register:ze,unregister:ot}=Xt,Zr=Re.useRef(null);Re.useEffect(()=>ze(We),[ze,We]),Re.useEffect(()=>{if(ct===ov.Hidden&&We.current){if(Oe&&Et!=="visible"){Ht("visible");return}return lp(Et,{hidden:()=>ot(We),visible:()=>ze(We)})}},[Et,We,ze,ot,Oe,ct]);let yr=lv({enter:Xx(z),enterFrom:Xx(Z),enterTo:Xx(X),entered:Xx(oe),leave:Xx(_e),leaveFrom:Xx(Se),leaveTo:Xx(Ne)}),sr=UW({beforeEnter:d,afterEnter:_,beforeLeave:C,afterLeave:I}),_s=yw();Re.useEffect(()=>{if(_s&&Et==="visible"&&We.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[We,Et,_s]);let ms=Xe&&!Be,Lf=(()=>!_s||ms||Zr.current===Oe?"idle":Oe?"enter":"leave")(),Go=LW(0),gi=Vu(Ai=>lp(Ai,{enter:()=>{Go.addFlag(Sf.Opening),sr.current.beforeEnter()},leave:()=>{Go.addFlag(Sf.Closing),sr.current.beforeLeave()},idle:()=>{}})),Ra=Vu(Ai=>lp(Ai,{enter:()=>{Go.removeFlag(Sf.Opening),sr.current.afterEnter()},leave:()=>{Go.removeFlag(Sf.Closing),sr.current.afterLeave()},idle:()=>{}})),ar=DF(()=>{Ht("hidden"),ot(We)},Xt);NW({container:We,classes:yr,direction:Lf,onStart:lv(Ai=>{ar.onStart(We,Ai,gi)}),onStop:lv(Ai=>{ar.onStop(We,Ai,Ra),Ai==="leave"&&!SI(ar)&&(Ht("hidden"),ot(We))})}),Re.useEffect(()=>{ms&&(ct===ov.Hidden?Zr.current=null:Zr.current=Oe)},[Oe,ms,Et]);let Vr=$e,Tn={ref:Ze};return Be&&Oe&&(Vr={...Vr,className:nz($e.className,...yr.current.enter,...yr.current.enterFrom)}),oi.createElement(CI.Provider,{value:ar},oi.createElement(vH,{value:lp(Et,{visible:Sf.Open,hidden:Sf.Closed})|Go.flags},jf({ourProps:Tn,theirProps:Vr,defaultTag:VW,features:zF,visible:Et==="visible",name:"Transition.Child"})))}function ZW(o,c){let{show:d,appear:_=!1,unmount:C,...I}=o,z=Re.useRef(null),Z=Ug(z,c);yw();let X=I9();if(d===void 0&&X!==null&&(d=(X&Sf.Open)===Sf.Open),![!0,!1].includes(d))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[oe,_e]=Re.useState(d?"visible":"hidden"),Se=DF(()=>{_e("hidden")}),[Ne,$e]=Re.useState(!0),We=Re.useRef([d]);ty(()=>{Ne!==!1&&We.current[We.current.length-1]!==d&&(We.current.push(d),$e(!1))},[We,d]);let Ze=Re.useMemo(()=>({show:d,appear:_,initial:Ne}),[d,_,Ne]);Re.useEffect(()=>{if(d)_e("visible");else if(!SI(Se))_e("hidden");else{let Oe=z.current;if(!Oe)return;let Be=Oe.getBoundingClientRect();Be.x===0&&Be.y===0&&Be.width===0&&Be.height===0&&_e("hidden")}},[d,Se]);let ct={unmount:C};return oi.createElement(CI.Provider,{value:Se},oi.createElement(bI.Provider,{value:Ze},jf({ourProps:{...ct,as:Re.Fragment,children:oi.createElement(NF,{ref:Z,...ct,...I})},theirProps:{},defaultTag:Re.Fragment,features:zF,visible:oe==="visible",name:"Transition"})))}function GW(o,c){let d=Re.useContext(bI)!==null,_=I9()!==null;return oi.createElement(oi.Fragment,null,!d&&_?oi.createElement(lz,{ref:c,...o}):oi.createElement(NF,{ref:c,...o}))}let lz=Af(ZW),NF=Af(qW),HW=Af(GW),uv=Object.assign(lz,{Child:HW,Root:lz});var $g=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:globalThis;function WW(o,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob([String.fromCharCode(65279),o],{type:o.type}):o}function W8(o,c,d){var _=new XMLHttpRequest;_.open("GET",o),_.responseType="blob",_.onload=function(){G5(_.response,c,d)},_.onerror=function(){console.error("could not download file")},_.send()}function $O(o){var c=new XMLHttpRequest;c.open("HEAD",o,!1);try{c.send()}catch{}return c.status>=200&&c.status<=299}function OT(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(c)}}var XO=$g.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),G5=$g.saveAs||(typeof window!="object"||window!==$g?function(){}:"download"in HTMLAnchorElement.prototype&&!XO?function(c,d,_){var C=$g.URL||$g.webkitURL,I=document.createElement("a");d=d||c.name||"download",I.download=d,I.rel="noopener",typeof c=="string"?(I.href=c,I.origin!==location.origin?$O(I.href)?W8(c,d,_):OT(I,I.target="_blank"):OT(I)):(I.href=C.createObjectURL(c),setTimeout(function(){C.revokeObjectURL(I.href)},4e4),setTimeout(function(){OT(I)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,_){if(d=d||c.name||"download",typeof c=="string")if($O(c))W8(c,d,_);else{var C=document.createElement("a");C.href=c,C.target="_blank",setTimeout(function(){OT(C)})}else navigator.msSaveOrOpenBlob(WW(c,_),d)}:function(c,d,_,C){if(C=C||open("","_blank"),C&&(C.document.title=C.document.body.innerText="downloading..."),typeof c=="string")return W8(c,d,_);var I=c.type==="application/octet-stream",z=/constructor/i.test($g.HTMLElement)||$g.safari,Z=/CriOS\/[\d]+/.test(navigator.userAgent);if((Z||I&&z||XO)&&typeof FileReader<"u"){var X=new FileReader;X.onloadend=function(){var Se=X.result;Se=Z?Se:Se.replace(/^data:[^;]*;/,"data:attachment/file;"),C?C.location.href=Se:location=Se,C=null},X.readAsDataURL(c)}else{var oe=$g.URL||$g.webkitURL,_e=oe.createObjectURL(c);C?C.location=_e:location.href=_e,C=null,setTimeout(function(){oe.revokeObjectURL(_e)},4e4)}});$g.saveAs=G5.saveAs=G5;function YE(o){return YE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},YE(o)}function x2(o){if(o===null||o===!0||o===!1)return NaN;var c=Number(o);return isNaN(c)?c:c<0?Math.ceil(c):Math.floor(c)}function Uh(o,c){if(c.length<o)throw new TypeError(o+" argument"+(o>1?"s":"")+" required, but only "+c.length+" present")}function ry(o){Uh(1,arguments);var c=Object.prototype.toString.call(o);return o instanceof Date||YE(o)==="object"&&c==="[object Date]"?new Date(o.getTime()):typeof o=="number"||c==="[object Number]"?new Date(o):((typeof o=="string"||c==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function YW(o,c){Uh(2,arguments);var d=ry(o).getTime(),_=x2(c);return new Date(d+_)}var KW={};function TI(){return KW}function $W(o){var c=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return c.setUTCFullYear(o.getFullYear()),o.getTime()-c.getTime()}function XW(o){return Uh(1,arguments),o instanceof Date||YE(o)==="object"&&Object.prototype.toString.call(o)==="[object Date]"}function JW(o){if(Uh(1,arguments),!XW(o)&&typeof o!="number")return!1;var c=ry(o);return!isNaN(Number(c))}function QW(o,c){Uh(2,arguments);var d=x2(c);return YW(o,-d)}var eY=864e5;function tY(o){Uh(1,arguments);var c=ry(o),d=c.getTime();c.setUTCMonth(0,1),c.setUTCHours(0,0,0,0);var _=c.getTime(),C=d-_;return Math.floor(C/eY)+1}function KE(o){Uh(1,arguments);var c=1,d=ry(o),_=d.getUTCDay(),C=(_<c?7:0)+_-c;return d.setUTCDate(d.getUTCDate()-C),d.setUTCHours(0,0,0,0),d}function OF(o){Uh(1,arguments);var c=ry(o),d=c.getUTCFullYear(),_=new Date(0);_.setUTCFullYear(d+1,0,4),_.setUTCHours(0,0,0,0);var C=KE(_),I=new Date(0);I.setUTCFullYear(d,0,4),I.setUTCHours(0,0,0,0);var z=KE(I);return c.getTime()>=C.getTime()?d+1:c.getTime()>=z.getTime()?d:d-1}function rY(o){Uh(1,arguments);var c=OF(o),d=new Date(0);d.setUTCFullYear(c,0,4),d.setUTCHours(0,0,0,0);var _=KE(d);return _}var nY=6048e5;function iY(o){Uh(1,arguments);var c=ry(o),d=KE(c).getTime()-rY(c).getTime();return Math.round(d/nY)+1}function $E(o,c){var d,_,C,I,z,Z,X,oe;Uh(1,arguments);var _e=TI(),Se=x2((d=(_=(C=(I=c==null?void 0:c.weekStartsOn)!==null&&I!==void 0?I:c==null||(z=c.locale)===null||z===void 0||(Z=z.options)===null||Z===void 0?void 0:Z.weekStartsOn)!==null&&C!==void 0?C:_e.weekStartsOn)!==null&&_!==void 0?_:(X=_e.locale)===null||X===void 0||(oe=X.options)===null||oe===void 0?void 0:oe.weekStartsOn)!==null&&d!==void 0?d:0);if(!(Se>=0&&Se<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var Ne=ry(o),$e=Ne.getUTCDay(),We=($e<Se?7:0)+$e-Se;return Ne.setUTCDate(Ne.getUTCDate()-We),Ne.setUTCHours(0,0,0,0),Ne}function RF(o,c){var d,_,C,I,z,Z,X,oe;Uh(1,arguments);var _e=ry(o),Se=_e.getUTCFullYear(),Ne=TI(),$e=x2((d=(_=(C=(I=c==null?void 0:c.firstWeekContainsDate)!==null&&I!==void 0?I:c==null||(z=c.locale)===null||z===void 0||(Z=z.options)===null||Z===void 0?void 0:Z.firstWeekContainsDate)!==null&&C!==void 0?C:Ne.firstWeekContainsDate)!==null&&_!==void 0?_:(X=Ne.locale)===null||X===void 0||(oe=X.options)===null||oe===void 0?void 0:oe.firstWeekContainsDate)!==null&&d!==void 0?d:1);if(!($e>=1&&$e<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var We=new Date(0);We.setUTCFullYear(Se+1,0,$e),We.setUTCHours(0,0,0,0);var Ze=$E(We,c),ct=new Date(0);ct.setUTCFullYear(Se,0,$e),ct.setUTCHours(0,0,0,0);var Oe=$E(ct,c);return _e.getTime()>=Ze.getTime()?Se+1:_e.getTime()>=Oe.getTime()?Se:Se-1}function oY(o,c){var d,_,C,I,z,Z,X,oe;Uh(1,arguments);var _e=TI(),Se=x2((d=(_=(C=(I=c==null?void 0:c.firstWeekContainsDate)!==null&&I!==void 0?I:c==null||(z=c.locale)===null||z===void 0||(Z=z.options)===null||Z===void 0?void 0:Z.firstWeekContainsDate)!==null&&C!==void 0?C:_e.firstWeekContainsDate)!==null&&_!==void 0?_:(X=_e.locale)===null||X===void 0||(oe=X.options)===null||oe===void 0?void 0:oe.firstWeekContainsDate)!==null&&d!==void 0?d:1),Ne=RF(o,c),$e=new Date(0);$e.setUTCFullYear(Ne,0,Se),$e.setUTCHours(0,0,0,0);var We=$E($e,c);return We}var aY=6048e5;function sY(o,c){Uh(1,arguments);var d=ry(o),_=$E(d,c).getTime()-oY(d,c).getTime();return Math.round(_/aY)+1}function fa(o,c){for(var d=o<0?"-":"",_=Math.abs(o).toString();_.length<c;)_="0"+_;return d+_}var lY={y:function(c,d){var _=c.getUTCFullYear(),C=_>0?_:1-_;return fa(d==="yy"?C%100:C,d.length)},M:function(c,d){var _=c.getUTCMonth();return d==="M"?String(_+1):fa(_+1,2)},d:function(c,d){return fa(c.getUTCDate(),d.length)},a:function(c,d){var _=c.getUTCHours()/12>=1?"pm":"am";switch(d){case"a":case"aa":return _.toUpperCase();case"aaa":return _;case"aaaaa":return _[0];case"aaaa":default:return _==="am"?"a.m.":"p.m."}},h:function(c,d){return fa(c.getUTCHours()%12||12,d.length)},H:function(c,d){return fa(c.getUTCHours(),d.length)},m:function(c,d){return fa(c.getUTCMinutes(),d.length)},s:function(c,d){return fa(c.getUTCSeconds(),d.length)},S:function(c,d){var _=d.length,C=c.getUTCMilliseconds(),I=Math.floor(C*Math.pow(10,_-3));return fa(I,d.length)}};const xv=lY;var P2={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},uY={G:function(c,d,_){var C=c.getUTCFullYear()>0?1:0;switch(d){case"G":case"GG":case"GGG":return _.era(C,{width:"abbreviated"});case"GGGGG":return _.era(C,{width:"narrow"});case"GGGG":default:return _.era(C,{width:"wide"})}},y:function(c,d,_){if(d==="yo"){var C=c.getUTCFullYear(),I=C>0?C:1-C;return _.ordinalNumber(I,{unit:"year"})}return xv.y(c,d)},Y:function(c,d,_,C){var I=RF(c,C),z=I>0?I:1-I;if(d==="YY"){var Z=z%100;return fa(Z,2)}return d==="Yo"?_.ordinalNumber(z,{unit:"year"}):fa(z,d.length)},R:function(c,d){var _=OF(c);return fa(_,d.length)},u:function(c,d){var _=c.getUTCFullYear();return fa(_,d.length)},Q:function(c,d,_){var C=Math.ceil((c.getUTCMonth()+1)/3);switch(d){case"Q":return String(C);case"QQ":return fa(C,2);case"Qo":return _.ordinalNumber(C,{unit:"quarter"});case"QQQ":return _.quarter(C,{width:"abbreviated",context:"formatting"});case"QQQQQ":return _.quarter(C,{width:"narrow",context:"formatting"});case"QQQQ":default:return _.quarter(C,{width:"wide",context:"formatting"})}},q:function(c,d,_){var C=Math.ceil((c.getUTCMonth()+1)/3);switch(d){case"q":return String(C);case"qq":return fa(C,2);case"qo":return _.ordinalNumber(C,{unit:"quarter"});case"qqq":return _.quarter(C,{width:"abbreviated",context:"standalone"});case"qqqqq":return _.quarter(C,{width:"narrow",context:"standalone"});case"qqqq":default:return _.quarter(C,{width:"wide",context:"standalone"})}},M:function(c,d,_){var C=c.getUTCMonth();switch(d){case"M":case"MM":return xv.M(c,d);case"Mo":return _.ordinalNumber(C+1,{unit:"month"});case"MMM":return _.month(C,{width:"abbreviated",context:"formatting"});case"MMMMM":return _.month(C,{width:"narrow",context:"formatting"});case"MMMM":default:return _.month(C,{width:"wide",context:"formatting"})}},L:function(c,d,_){var C=c.getUTCMonth();switch(d){case"L":return String(C+1);case"LL":return fa(C+1,2);case"Lo":return _.ordinalNumber(C+1,{unit:"month"});case"LLL":return _.month(C,{width:"abbreviated",context:"standalone"});case"LLLLL":return _.month(C,{width:"narrow",context:"standalone"});case"LLLL":default:return _.month(C,{width:"wide",context:"standalone"})}},w:function(c,d,_,C){var I=sY(c,C);return d==="wo"?_.ordinalNumber(I,{unit:"week"}):fa(I,d.length)},I:function(c,d,_){var C=iY(c);return d==="Io"?_.ordinalNumber(C,{unit:"week"}):fa(C,d.length)},d:function(c,d,_){return d==="do"?_.ordinalNumber(c.getUTCDate(),{unit:"date"}):xv.d(c,d)},D:function(c,d,_){var C=tY(c);return d==="Do"?_.ordinalNumber(C,{unit:"dayOfYear"}):fa(C,d.length)},E:function(c,d,_){var C=c.getUTCDay();switch(d){case"E":case"EE":case"EEE":return _.day(C,{width:"abbreviated",context:"formatting"});case"EEEEE":return _.day(C,{width:"narrow",context:"formatting"});case"EEEEEE":return _.day(C,{width:"short",context:"formatting"});case"EEEE":default:return _.day(C,{width:"wide",context:"formatting"})}},e:function(c,d,_,C){var I=c.getUTCDay(),z=(I-C.weekStartsOn+8)%7||7;switch(d){case"e":return String(z);case"ee":return fa(z,2);case"eo":return _.ordinalNumber(z,{unit:"day"});case"eee":return _.day(I,{width:"abbreviated",context:"formatting"});case"eeeee":return _.day(I,{width:"narrow",context:"formatting"});case"eeeeee":return _.day(I,{width:"short",context:"formatting"});case"eeee":default:return _.day(I,{width:"wide",context:"formatting"})}},c:function(c,d,_,C){var I=c.getUTCDay(),z=(I-C.weekStartsOn+8)%7||7;switch(d){case"c":return String(z);case"cc":return fa(z,d.length);case"co":return _.ordinalNumber(z,{unit:"day"});case"ccc":return _.day(I,{width:"abbreviated",context:"standalone"});case"ccccc":return _.day(I,{width:"narrow",context:"standalone"});case"cccccc":return _.day(I,{width:"short",context:"standalone"});case"cccc":default:return _.day(I,{width:"wide",context:"standalone"})}},i:function(c,d,_){var C=c.getUTCDay(),I=C===0?7:C;switch(d){case"i":return String(I);case"ii":return fa(I,d.length);case"io":return _.ordinalNumber(I,{unit:"day"});case"iii":return _.day(C,{width:"abbreviated",context:"formatting"});case"iiiii":return _.day(C,{width:"narrow",context:"formatting"});case"iiiiii":return _.day(C,{width:"short",context:"formatting"});case"iiii":default:return _.day(C,{width:"wide",context:"formatting"})}},a:function(c,d,_){var C=c.getUTCHours(),I=C/12>=1?"pm":"am";switch(d){case"a":case"aa":return _.dayPeriod(I,{width:"abbreviated",context:"formatting"});case"aaa":return _.dayPeriod(I,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return _.dayPeriod(I,{width:"narrow",context:"formatting"});case"aaaa":default:return _.dayPeriod(I,{width:"wide",context:"formatting"})}},b:function(c,d,_){var C=c.getUTCHours(),I;switch(C===12?I=P2.noon:C===0?I=P2.midnight:I=C/12>=1?"pm":"am",d){case"b":case"bb":return _.dayPeriod(I,{width:"abbreviated",context:"formatting"});case"bbb":return _.dayPeriod(I,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return _.dayPeriod(I,{width:"narrow",context:"formatting"});case"bbbb":default:return _.dayPeriod(I,{width:"wide",context:"formatting"})}},B:function(c,d,_){var C=c.getUTCHours(),I;switch(C>=17?I=P2.evening:C>=12?I=P2.afternoon:C>=4?I=P2.morning:I=P2.night,d){case"B":case"BB":case"BBB":return _.dayPeriod(I,{width:"abbreviated",context:"formatting"});case"BBBBB":return _.dayPeriod(I,{width:"narrow",context:"formatting"});case"BBBB":default:return _.dayPeriod(I,{width:"wide",context:"formatting"})}},h:function(c,d,_){if(d==="ho"){var C=c.getUTCHours()%12;return C===0&&(C=12),_.ordinalNumber(C,{unit:"hour"})}return xv.h(c,d)},H:function(c,d,_){return d==="Ho"?_.ordinalNumber(c.getUTCHours(),{unit:"hour"}):xv.H(c,d)},K:function(c,d,_){var C=c.getUTCHours()%12;return d==="Ko"?_.ordinalNumber(C,{unit:"hour"}):fa(C,d.length)},k:function(c,d,_){var C=c.getUTCHours();return C===0&&(C=24),d==="ko"?_.ordinalNumber(C,{unit:"hour"}):fa(C,d.length)},m:function(c,d,_){return d==="mo"?_.ordinalNumber(c.getUTCMinutes(),{unit:"minute"}):xv.m(c,d)},s:function(c,d,_){return d==="so"?_.ordinalNumber(c.getUTCSeconds(),{unit:"second"}):xv.s(c,d)},S:function(c,d){return xv.S(c,d)},X:function(c,d,_,C){var I=C._originalDate||c,z=I.getTimezoneOffset();if(z===0)return"Z";switch(d){case"X":return QO(z);case"XXXX":case"XX":return e2(z);case"XXXXX":case"XXX":default:return e2(z,":")}},x:function(c,d,_,C){var I=C._originalDate||c,z=I.getTimezoneOffset();switch(d){case"x":return QO(z);case"xxxx":case"xx":return e2(z);case"xxxxx":case"xxx":default:return e2(z,":")}},O:function(c,d,_,C){var I=C._originalDate||c,z=I.getTimezoneOffset();switch(d){case"O":case"OO":case"OOO":return"GMT"+JO(z,":");case"OOOO":default:return"GMT"+e2(z,":")}},z:function(c,d,_,C){var I=C._originalDate||c,z=I.getTimezoneOffset();switch(d){case"z":case"zz":case"zzz":return"GMT"+JO(z,":");case"zzzz":default:return"GMT"+e2(z,":")}},t:function(c,d,_,C){var I=C._originalDate||c,z=Math.floor(I.getTime()/1e3);return fa(z,d.length)},T:function(c,d,_,C){var I=C._originalDate||c,z=I.getTime();return fa(z,d.length)}};function JO(o,c){var d=o>0?"-":"+",_=Math.abs(o),C=Math.floor(_/60),I=_%60;if(I===0)return d+String(C);var z=c||"";return d+String(C)+z+fa(I,2)}function QO(o,c){if(o%60===0){var d=o>0?"-":"+";return d+fa(Math.abs(o)/60,2)}return e2(o,c)}function e2(o,c){var d=c||"",_=o>0?"-":"+",C=Math.abs(o),I=fa(Math.floor(C/60),2),z=fa(C%60,2);return _+I+d+z}const cY=uY;var e7=function(c,d){switch(c){case"P":return d.date({width:"short"});case"PP":return d.date({width:"medium"});case"PPP":return d.date({width:"long"});case"PPPP":default:return d.date({width:"full"})}},BF=function(c,d){switch(c){case"p":return d.time({width:"short"});case"pp":return d.time({width:"medium"});case"ppp":return d.time({width:"long"});case"pppp":default:return d.time({width:"full"})}},pY=function(c,d){var _=c.match(/(P+)(p+)?/)||[],C=_[1],I=_[2];if(!I)return e7(c,d);var z;switch(C){case"P":z=d.dateTime({width:"short"});break;case"PP":z=d.dateTime({width:"medium"});break;case"PPP":z=d.dateTime({width:"long"});break;case"PPPP":default:z=d.dateTime({width:"full"});break}return z.replace("{{date}}",e7(C,d)).replace("{{time}}",BF(I,d))},hY={p:BF,P:pY};const dY=hY;var fY=["D","DD"],mY=["YY","YYYY"];function gY(o){return fY.indexOf(o)!==-1}function yY(o){return mY.indexOf(o)!==-1}function t7(o,c,d){if(o==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(c,"`) for formatting years to the input `").concat(d,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(c,"`) for formatting years to the input `").concat(d,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(c,"`) for formatting days of the month to the input `").concat(d,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(c,"`) for formatting days of the month to the input `").concat(d,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var vY={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_Y=function(c,d,_){var C,I=vY[c];return typeof I=="string"?C=I:d===1?C=I.one:C=I.other.replace("{{count}}",d.toString()),_!=null&&_.addSuffix?_.comparison&&_.comparison>0?"in "+C:C+" ago":C};const xY=_Y;function Y8(o){return function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.width?String(c.width):o.defaultWidth,_=o.formats[d]||o.formats[o.defaultWidth];return _}}var wY={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bY={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},CY={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},SY={date:Y8({formats:wY,defaultWidth:"full"}),time:Y8({formats:bY,defaultWidth:"full"}),dateTime:Y8({formats:CY,defaultWidth:"full"})};const TY=SY;var EY={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},IY=function(c,d,_,C){return EY[c]};const kY=IY;function e5(o){return function(c,d){var _=d!=null&&d.context?String(d.context):"standalone",C;if(_==="formatting"&&o.formattingValues){var I=o.defaultFormattingWidth||o.defaultWidth,z=d!=null&&d.width?String(d.width):I;C=o.formattingValues[z]||o.formattingValues[I]}else{var Z=o.defaultWidth,X=d!=null&&d.width?String(d.width):o.defaultWidth;C=o.values[X]||o.values[Z]}var oe=o.argumentCallback?o.argumentCallback(c):c;return C[oe]}}var MY={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},AY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},LY={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},PY={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},DY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NY=function(c,d){var _=Number(c),C=_%100;if(C>20||C<10)switch(C%10){case 1:return _+"st";case 2:return _+"nd";case 3:return _+"rd"}return _+"th"},OY={ordinalNumber:NY,era:e5({values:MY,defaultWidth:"wide"}),quarter:e5({values:AY,defaultWidth:"wide",argumentCallback:function(c){return c-1}}),month:e5({values:LY,defaultWidth:"wide"}),day:e5({values:PY,defaultWidth:"wide"}),dayPeriod:e5({values:DY,defaultWidth:"wide",formattingValues:zY,defaultFormattingWidth:"wide"})};const RY=OY;function t5(o){return function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=d.width,C=_&&o.matchPatterns[_]||o.matchPatterns[o.defaultMatchWidth],I=c.match(C);if(!I)return null;var z=I[0],Z=_&&o.parsePatterns[_]||o.parsePatterns[o.defaultParseWidth],X=Array.isArray(Z)?FY(Z,function(Se){return Se.test(z)}):BY(Z,function(Se){return Se.test(z)}),oe;oe=o.valueCallback?o.valueCallback(X):X,oe=d.valueCallback?d.valueCallback(oe):oe;var _e=c.slice(z.length);return{value:oe,rest:_e}}}function BY(o,c){for(var d in o)if(o.hasOwnProperty(d)&&c(o[d]))return d}function FY(o,c){for(var d=0;d<o.length;d++)if(c(o[d]))return d}function jY(o){return function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=c.match(o.matchPattern);if(!_)return null;var C=_[0],I=c.match(o.parsePattern);if(!I)return null;var z=o.valueCallback?o.valueCallback(I[0]):I[0];z=d.valueCallback?d.valueCallback(z):z;var Z=c.slice(C.length);return{value:z,rest:Z}}}var UY=/^(\d+)(th|st|nd|rd)?/i,VY=/\d+/i,qY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ZY={any:[/^b/i,/^(a|c)/i]},GY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},HY={any:[/1/i,/2/i,/3/i,/4/i]},WY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},YY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},KY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$Y={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},XY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},JY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},QY={ordinalNumber:jY({matchPattern:UY,parsePattern:VY,valueCallback:function(c){return parseInt(c,10)}}),era:t5({matchPatterns:qY,defaultMatchWidth:"wide",parsePatterns:ZY,defaultParseWidth:"any"}),quarter:t5({matchPatterns:GY,defaultMatchWidth:"wide",parsePatterns:HY,defaultParseWidth:"any",valueCallback:function(c){return c+1}}),month:t5({matchPatterns:WY,defaultMatchWidth:"wide",parsePatterns:YY,defaultParseWidth:"any"}),day:t5({matchPatterns:KY,defaultMatchWidth:"wide",parsePatterns:$Y,defaultParseWidth:"any"}),dayPeriod:t5({matchPatterns:XY,defaultMatchWidth:"any",parsePatterns:JY,defaultParseWidth:"any"})};const eK=QY;var tK={code:"en-US",formatDistance:xY,formatLong:TY,formatRelative:kY,localize:RY,match:eK,options:{weekStartsOn:0,firstWeekContainsDate:1}};const rK=tK;var nK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,iK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oK=/^'([^]*?)'?$/,aK=/''/g,sK=/[a-zA-Z]/;function lK(o,c,d){var _,C,I,z,Z,X,oe,_e,Se,Ne,$e,We,Ze,ct,Oe,Be,Xe,Et;Uh(2,arguments);var Ht=String(c),Xt=TI(),ze=(_=(C=d==null?void 0:d.locale)!==null&&C!==void 0?C:Xt.locale)!==null&&_!==void 0?_:rK,ot=x2((I=(z=(Z=(X=d==null?void 0:d.firstWeekContainsDate)!==null&&X!==void 0?X:d==null||(oe=d.locale)===null||oe===void 0||(_e=oe.options)===null||_e===void 0?void 0:_e.firstWeekContainsDate)!==null&&Z!==void 0?Z:Xt.firstWeekContainsDate)!==null&&z!==void 0?z:(Se=Xt.locale)===null||Se===void 0||(Ne=Se.options)===null||Ne===void 0?void 0:Ne.firstWeekContainsDate)!==null&&I!==void 0?I:1);if(!(ot>=1&&ot<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Zr=x2(($e=(We=(Ze=(ct=d==null?void 0:d.weekStartsOn)!==null&&ct!==void 0?ct:d==null||(Oe=d.locale)===null||Oe===void 0||(Be=Oe.options)===null||Be===void 0?void 0:Be.weekStartsOn)!==null&&Ze!==void 0?Ze:Xt.weekStartsOn)!==null&&We!==void 0?We:(Xe=Xt.locale)===null||Xe===void 0||(Et=Xe.options)===null||Et===void 0?void 0:Et.weekStartsOn)!==null&&$e!==void 0?$e:0);if(!(Zr>=0&&Zr<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!ze.localize)throw new RangeError("locale must contain localize property");if(!ze.formatLong)throw new RangeError("locale must contain formatLong property");var yr=ry(o);if(!JW(yr))throw new RangeError("Invalid time value");var sr=$W(yr),_s=QW(yr,sr),ms={firstWeekContainsDate:ot,weekStartsOn:Zr,locale:ze,_originalDate:yr},Lf=Ht.match(iK).map(function(Go){var gi=Go[0];if(gi==="p"||gi==="P"){var Ra=dY[gi];return Ra(Go,ze.formatLong)}return Go}).join("").match(nK).map(function(Go){if(Go==="''")return"'";var gi=Go[0];if(gi==="'")return uK(Go);var Ra=cY[gi];if(Ra)return!(d!=null&&d.useAdditionalWeekYearTokens)&&yY(Go)&&t7(Go,c,String(o)),!(d!=null&&d.useAdditionalDayOfYearTokens)&&gY(Go)&&t7(Go,c,String(o)),Ra(_s,Go,ze.localize,ms);if(gi.match(sK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+gi+"`");return Go}).join("");return Lf}function uK(o){var c=o.match(oK);return c?c[1].replace(aK,"'"):o}const cK=({jsonData:o,updateUser:c,deleteUser:d})=>{const[_,C]=Re.useState(!1),[I,z]=Re.useState({fullName:"",emailAddress:"",phoneNumber:"",password:"",lastLogin:""}),Z=Re.useRef(null),X=ct=>{I.fullName=ct.name,I.emailAddress=ct.email,I.phoneNumber=ct.phone,I.lastLogin=ct.lastLogin},oe=ct=>{ct.preventDefault(),C(!1)},_e=ct=>{ct.preventDefault();const Oe=Ze();if(Oe.error){alert(Oe.message);return}const Be={name:I.fullName,email:I.emailAddress,phone:I.phoneNumber,password:I.password};c&&c(Be),C(!1)},Se=ct=>{z({...I,[ct.target.name]:ct.target.value})},Ne=ct=>{X(ct);const Oe={email:I.emailAddress};d&&d(Oe)},$e=ct=>{X(ct);const Oe="data:text/csv;charset=utf-8,"+Object.values(I).join(","),Be=new Blob([Oe],{type:"text/csv;charset=utf-8"});G5(Be,"userData.csv")},We=ct=>{if(!ct)return ct;const Oe=new Date(ct);return lK(Oe,"dd-MM-yyyy HH:mm")},Ze=()=>{var ct=`The following errors were found: 
`,Oe=!1;return(I.fullName===""||I.fullName.length<=5)&&(ct+=`#The field NAME cannot be empty or less than 5 characters.
`,Oe=!0),I.password!==""&&I.password.length!=8&&(ct+="#The PASSWORD must have 8 characters.",Oe=!0),{error:Oe,message:ct}};return rt("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[pe("div",{className:"max-w-full overflow-x-auto",children:rt("table",{className:"w-full table-auto",children:[pe("thead",{children:rt("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[pe("th",{className:"min-w-[220px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"Name"}),pe("th",{className:"min-w-[150px] py-4 px-4 font-medium text-black dark:text-white",children:"E-mail"}),pe("th",{className:"min-w-[120px] py-4 px-4 font-medium text-black dark:text-white",children:"Last Login"}),pe("th",{className:"py-4 px-4 font-medium text-black dark:text-white",children:"Logs"})]})}),pe("tbody",{children:o.map((ct,Oe)=>rt("tr",{onClick:()=>X(ct),children:[pe("td",{className:"border-b border-[#eee] py-5 px-4 pl-9 dark:border-strokedark xl:pl-11",children:pe("h5",{className:"font-medium text-black dark:text-white",children:ct.name})}),pe("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:pe("p",{className:"text-black dark:text-white",children:ct.email})}),pe("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:pe("p",{className:"text-black dark:text-white",children:We(ct.lastLogin)})}),pe("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:rt("div",{className:"flex items-center space-x-3.5",children:[pe("button",{className:"hover:text-primary",onClick:()=>C(!0),id:"showInfoButton",children:rt("svg",{className:"fill-current",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{d:"M8.99981 14.8219C3.43106 14.8219 0.674805 9.50624 0.562305 9.28124C0.47793 9.11249 0.47793 8.88749 0.562305 8.71874C0.674805 8.49374 3.43106 3.20624 8.99981 3.20624C14.5686 3.20624 17.3248 8.49374 17.4373 8.71874C17.5217 8.88749 17.5217 9.11249 17.4373 9.28124C17.3248 9.50624 14.5686 14.8219 8.99981 14.8219ZM1.85605 8.99999C2.4748 10.0406 4.89356 13.5562 8.99981 13.5562C13.1061 13.5562 15.5248 10.0406 16.1436 8.99999C15.5248 7.95936 13.1061 4.44374 8.99981 4.44374C4.89356 4.44374 2.4748 7.95936 1.85605 8.99999Z",fill:""}),pe("path",{d:"M9 11.3906C7.67812 11.3906 6.60938 10.3219 6.60938 9C6.60938 7.67813 7.67812 6.60938 9 6.60938C10.3219 6.60938 11.3906 7.67813 11.3906 9C11.3906 10.3219 10.3219 11.3906 9 11.3906ZM9 7.875C8.38125 7.875 7.875 8.38125 7.875 9C7.875 9.61875 8.38125 10.125 9 10.125C9.61875 10.125 10.125 9.61875 10.125 9C10.125 8.38125 9.61875 7.875 9 7.875Z",fill:""})]})}),pe("button",{className:"hover:text-primary",id:"deleteUserButton",onClick:()=>Ne(ct),children:rt("svg",{className:"fill-current",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{d:"M13.7535 2.47502H11.5879V1.9969C11.5879 1.15315 10.9129 0.478149 10.0691 0.478149H7.90352C7.05977 0.478149 6.38477 1.15315 6.38477 1.9969V2.47502H4.21914C3.40352 2.47502 2.72852 3.15002 2.72852 3.96565V4.8094C2.72852 5.42815 3.09414 5.9344 3.62852 6.1594L4.07852 15.4688C4.13477 16.6219 5.09102 17.5219 6.24414 17.5219H11.7004C12.8535 17.5219 13.8098 16.6219 13.866 15.4688L14.3441 6.13127C14.8785 5.90627 15.2441 5.3719 15.2441 4.78127V3.93752C15.2441 3.15002 14.5691 2.47502 13.7535 2.47502ZM7.67852 1.9969C7.67852 1.85627 7.79102 1.74377 7.93164 1.74377H10.0973C10.2379 1.74377 10.3504 1.85627 10.3504 1.9969V2.47502H7.70664V1.9969H7.67852ZM4.02227 3.96565C4.02227 3.85315 4.10664 3.74065 4.24727 3.74065H13.7535C13.866 3.74065 13.9785 3.82502 13.9785 3.96565V4.8094C13.9785 4.9219 13.8941 5.0344 13.7535 5.0344H4.24727C4.13477 5.0344 4.02227 4.95002 4.02227 4.8094V3.96565ZM11.7285 16.2563H6.27227C5.79414 16.2563 5.40039 15.8906 5.37227 15.3844L4.95039 6.2719H13.0785L12.6566 15.3844C12.6004 15.8625 12.2066 16.2563 11.7285 16.2563Z",fill:""}),pe("path",{d:"M9.00039 9.11255C8.66289 9.11255 8.35352 9.3938 8.35352 9.75942V13.3313C8.35352 13.6688 8.63477 13.9782 9.00039 13.9782C9.33789 13.9782 9.64727 13.6969 9.64727 13.3313V9.75942C9.64727 9.3938 9.33789 9.11255 9.00039 9.11255Z",fill:""}),pe("path",{d:"M11.2502 9.67504C10.8846 9.64692 10.6033 9.90004 10.5752 10.2657L10.4064 12.7407C10.3783 13.0782 10.6314 13.3875 10.9971 13.4157C11.0252 13.4157 11.0252 13.4157 11.0533 13.4157C11.3908 13.4157 11.6721 13.1625 11.6721 12.825L11.8408 10.35C11.8408 9.98442 11.5877 9.70317 11.2502 9.67504Z",fill:""}),pe("path",{d:"M6.72245 9.67504C6.38495 9.70317 6.1037 10.0125 6.13182 10.35L6.3287 12.825C6.35683 13.1625 6.63808 13.4157 6.94745 13.4157C6.97558 13.4157 6.97558 13.4157 7.0037 13.4157C7.3412 13.3875 7.62245 13.0782 7.59433 12.7407L7.39745 10.2657C7.39745 9.90004 7.08808 9.64692 6.72245 9.67504Z",fill:""})]})}),pe("button",{className:"hover:text-primary",id:"exportDataButton",onClick:()=>$e(ct),children:rt("svg",{className:"fill-current",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{d:"M16.8754 11.6719C16.5379 11.6719 16.2285 11.9531 16.2285 12.3187V14.8219C16.2285 15.075 16.0316 15.2719 15.7785 15.2719H2.22227C1.96914 15.2719 1.77227 15.075 1.77227 14.8219V12.3187C1.77227 11.9812 1.49102 11.6719 1.12539 11.6719C0.759766 11.6719 0.478516 11.9531 0.478516 12.3187V14.8219C0.478516 15.7781 1.23789 16.5375 2.19414 16.5375H15.7785C16.7348 16.5375 17.4941 15.7781 17.4941 14.8219V12.3187C17.5223 11.9531 17.2129 11.6719 16.8754 11.6719Z",fill:""}),pe("path",{d:"M8.55074 12.3469C8.66324 12.4594 8.83199 12.5156 9.00074 12.5156C9.16949 12.5156 9.31012 12.4594 9.45074 12.3469L13.4726 8.43752C13.7257 8.1844 13.7257 7.79065 13.5007 7.53752C13.2476 7.2844 12.8539 7.2844 12.6007 7.5094L9.64762 10.4063V2.1094C9.64762 1.7719 9.36637 1.46252 9.00074 1.46252C8.66324 1.46252 8.35387 1.74377 8.35387 2.1094V10.4063L5.40074 7.53752C5.14762 7.2844 4.75387 7.31252 4.50074 7.53752C4.24762 7.79065 4.27574 8.1844 4.50074 8.43752L8.55074 12.3469Z",fill:""})]})})]})})]},Oe))})]})}),pe(uv.Root,{show:_,as:Re.Fragment,children:rt(f2,{as:"div",className:"relative z-10",initialFocus:Z,onClose:C,children:[pe(uv.Child,{as:Re.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:pe("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),pe("div",{className:"fixed inset-0 z-10 overflow-y-auto drop-shadow-2xl",children:pe("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:pe(uv.Child,{as:Re.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:pe(f2.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:pe("div",{className:"col-span-5 xl:col-span-3",children:rt("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[pe("div",{className:"border-b border-stroke py-4 px-7 dark:border-strokedark",children:pe("h3",{className:"font-medium text-black dark:text-white",children:"User Details"})}),pe("div",{className:"p-7",children:rt("form",{action:"#",children:[rt("div",{className:"mb-5.5 flex flex-col gap-5.5 sm:flex-row",children:[rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"fullName",children:"Full Name"}),rt("div",{className:"relative",children:[pe("span",{className:"absolute left-4.5 top-4",children:pe("svg",{className:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.8",children:[pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.72039 12.887C4.50179 12.1056 5.5616 11.6666 6.66667 11.6666H13.3333C14.4384 11.6666 15.4982 12.1056 16.2796 12.887C17.061 13.6684 17.5 14.7282 17.5 15.8333V17.5C17.5 17.9602 17.1269 18.3333 16.6667 18.3333C16.2064 18.3333 15.8333 17.9602 15.8333 17.5V15.8333C15.8333 15.1703 15.5699 14.5344 15.1011 14.0655C14.6323 13.5967 13.9964 13.3333 13.3333 13.3333H6.66667C6.00363 13.3333 5.36774 13.5967 4.8989 14.0655C4.43006 14.5344 4.16667 15.1703 4.16667 15.8333V17.5C4.16667 17.9602 3.79357 18.3333 3.33333 18.3333C2.8731 18.3333 2.5 17.9602 2.5 17.5V15.8333C2.5 14.7282 2.93899 13.6684 3.72039 12.887Z",fill:""}),pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.99967 3.33329C8.61896 3.33329 7.49967 4.45258 7.49967 5.83329C7.49967 7.214 8.61896 8.33329 9.99967 8.33329C11.3804 8.33329 12.4997 7.214 12.4997 5.83329C12.4997 4.45258 11.3804 3.33329 9.99967 3.33329ZM5.83301 5.83329C5.83301 3.53211 7.69849 1.66663 9.99967 1.66663C12.3009 1.66663 14.1663 3.53211 14.1663 5.83329C14.1663 8.13448 12.3009 9.99996 9.99967 9.99996C7.69849 9.99996 5.83301 8.13448 5.83301 5.83329Z",fill:""})]})})}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 pl-11.5 pr-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"fullName",id:"fullName",placeholder:I.fullName,defaultValue:I.fullName,onBlur:Se})]})]}),rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"phoneNumber",children:"Phone Number"}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"phoneNumber",id:"phoneNumber",placeholder:I.phoneNumber,defaultValue:I.phoneNumber,onBlur:Se})]})]}),rt("div",{className:"mb-5.5",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"emailAddress",children:"Email Address"}),rt("div",{className:"relative",children:[pe("span",{className:"absolute left-4.5 top-4",children:pe("svg",{className:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.8",children:[pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33301 4.16667C2.87658 4.16667 2.49967 4.54357 2.49967 5V15C2.49967 15.4564 2.87658 15.8333 3.33301 15.8333H16.6663C17.1228 15.8333 17.4997 15.4564 17.4997 15V5C17.4997 4.54357 17.1228 4.16667 16.6663 4.16667H3.33301ZM0.833008 5C0.833008 3.6231 1.9561 2.5 3.33301 2.5H16.6663C18.0432 2.5 19.1663 3.6231 19.1663 5V15C19.1663 16.3769 18.0432 17.5 16.6663 17.5H3.33301C1.9561 17.5 0.833008 16.3769 0.833008 15V5Z",fill:""}),pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.983719 4.52215C1.24765 4.1451 1.76726 4.05341 2.1443 4.31734L9.99975 9.81615L17.8552 4.31734C18.2322 4.05341 18.7518 4.1451 19.0158 4.52215C19.2797 4.89919 19.188 5.4188 18.811 5.68272L10.4776 11.5161C10.1907 11.7169 9.80879 11.7169 9.52186 11.5161L1.18853 5.68272C0.811486 5.4188 0.719791 4.89919 0.983719 4.52215Z",fill:""})]})})}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 pl-11.5 pr-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"email",name:"emailAddress",id:"emailAddress",placeholder:I.emailAddress,defaultValue:I.emailAddress,onBlur:Se,disabled:!0})]})]}),rt("div",{className:"mb-5.5",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"Password",children:"Password"}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"password",name:"password",id:"password",placeholder:"Secret Password",defaultValue:I.password,onBlur:Se,maxLength:8})]}),rt("div",{className:"flex justify-end gap-4.5",children:[pe("button",{className:"flex justify-center rounded border border-stroke py-2 px-6 font-medium text-black hover:shadow-1 dark:border-strokedark dark:text-white",onClick:oe,children:"Cancel"}),pe("button",{className:"flex justify-center rounded bg-primary py-2 px-6 font-medium text-gray hover:shadow-1",id:"buttonSave",onClick:_e,children:"Save"})]})]})})]})})})})})})]})})]})},pK=()=>{const[o,c]=Re.useState([]),[d,_]=Re.useState({fullName:"",email:""});Re.useEffect(()=>{fetch("/user-management/list").then(X=>X.json()).then(X=>{"status"in X||(Array.isArray(X)?c(X):c([X]))})},[]);const C=X=>{X.preventDefault();const oe={name:d.fullName,email:d.email};if(oe.name===""&&oe.email===""){alert("Enter a valid value");return}fetch("/user-management/find",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)}).then(_e=>_e.json()).then(_e=>{if("status"in _e){_e.message==="User not found"&&alert("User not found!");return}Array.isArray(_e)?c(_e):c([_e])}),_({fullname:"",email:""})},I=X=>{fetch("/user-management",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}).then(oe=>oe.json()).then(oe=>{if("status"in oe){alert("Failure to update information!");return}alert("Information successfully updated!"),window.location.reload()})},z=X=>{window.confirm("The data cannot be recovered! Would you like to confirm this action?")&&fetch("/user-management",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}).then(_e=>_e.json()).then(_e=>{"status"in _e||(alert("User "+_e.name+" deleted"),window.location.reload(!0))})},Z=X=>{_({...d,[X.target.name]:X.target.value})};return rt(Q5,{children:[pe(fI,{pageName:"User Management"}),rt("div",{className:"flex flex-col gap-10",children:[pe("div",{className:"col-span-5 xl:col-span-3",children:rt("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[pe("div",{className:"border-b border-stroke py-4 px-7 dark:border-strokedark",children:pe("h3",{className:"font-medium text-black dark:text-white",children:"Search user"})}),pe("div",{className:"p-7",children:rt("form",{onSubmit:C,children:[rt("div",{className:"mb-5.5 flex flex-col gap-5.5 sm:flex-row",children:[rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"fullName",children:"Name"}),pe("div",{className:"relative",children:pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"fullName",id:"fullName",defaultValue:d.fullName,onBlur:Z,placeholder:"Full Name"})})]}),rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"phoneNumber",children:"Email"}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"email",id:"emailUser",defaultValue:d.email,onBlur:Z,placeholder:"Email"})]})]}),pe("div",{className:"flex justify-end gap-4.5",children:pe("button",{className:"flex justify-center rounded bg-primary py-2 px-6 font-medium text-gray hover:shadow-1",type:"submit",children:"Search user"})})]})})]})}),pe(cK,{jsonData:o,updateUser:I,deleteUser:z})]})]})},hK=({jsonData:o,updateBeacon:c,deleteBeacon:d})=>{const[_,C]=Re.useState(!1),[I,z]=Re.useState({name:"",latitude:"",longitude:"",macAddress:""}),Z=Re.useRef(null),X=Ze=>{I.name=Ze.name,I.latitude=Ze.latitude,I.longitude=Ze.longitude,I.macAddress=Ze.macAddress},oe=Ze=>{Ze.preventDefault(),C(!1)},_e=Ze=>{Ze.preventDefault();const ct=We();if(ct.error){alert(ct.message);return}const Oe={name:I.name,latitude:I.latitude,longitude:I.longitude,macAddress:I.macAddress};c&&c(Oe),C(!1)},Se=Ze=>{z({...I,[Ze.target.name]:Ze.target.value})},Ne=Ze=>{X(Ze);const ct={macAddress:I.macAddress};d&&d(ct)},$e=Ze=>{X(Ze);const ct="data:text/csv;charset=utf-8,"+Object.values(I).join(","),Oe=new Blob([ct],{type:"text/csv;charset=utf-8"});G5(Oe,"beaconData.csv")},We=()=>{var Ze=`The following errors were found: 
`,ct=!1;return(I.name===""||I.name.length<=3)&&(Ze+=`#The field NAME cannot be empty or less than 3 characters.
`,ct=!0),(I.latitude||I.longitude)===""&&(Ze+=`#Latitude and longitude coordinates cannot be empty.
`,ct=!0),I.macAddress===""&&(Ze+="#MAC address cannot be empty.",ct=!0),{error:ct,message:Ze}};return rt("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[pe("div",{className:"max-w-full overflow-x-auto",children:rt("table",{className:"w-full table-auto",children:[pe("thead",{children:rt("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[pe("th",{className:"min-w-[220px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"Name"}),pe("th",{className:"min-w-[150px] py-4 px-4 font-medium text-black dark:text-white",children:"Mac Address"}),pe("th",{className:"min-w-[120px] py-4 px-4 font-medium text-black dark:text-white",children:"Localization"}),pe("th",{className:"py-4 px-4 font-medium text-black dark:text-white",children:"Actions"})]})}),pe("tbody",{children:o.map((Ze,ct)=>rt("tr",{onClick:()=>X(Ze),children:[pe("td",{className:"border-b border-[#eee] py-5 px-4 pl-9 dark:border-strokedark xl:pl-11",children:pe("h5",{className:"font-medium text-black dark:text-white",children:Ze.name})}),pe("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:pe("p",{className:"text-black dark:text-white",children:Ze.macAddress})}),pe("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:rt("p",{className:"inline-flex rounded-full bg-success bg-opacity-10 py-1 px-3 text-sm font-medium text-success",children:[Ze.latitude,", ",Ze.longitude]})}),pe("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:rt("div",{className:"flex items-center space-x-3.5",children:[pe("button",{className:"hover:text-primary",onClick:()=>C(!0),id:"showInfoButton",children:rt("svg",{className:"fill-current",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{d:"M8.99981 14.8219C3.43106 14.8219 0.674805 9.50624 0.562305 9.28124C0.47793 9.11249 0.47793 8.88749 0.562305 8.71874C0.674805 8.49374 3.43106 3.20624 8.99981 3.20624C14.5686 3.20624 17.3248 8.49374 17.4373 8.71874C17.5217 8.88749 17.5217 9.11249 17.4373 9.28124C17.3248 9.50624 14.5686 14.8219 8.99981 14.8219ZM1.85605 8.99999C2.4748 10.0406 4.89356 13.5562 8.99981 13.5562C13.1061 13.5562 15.5248 10.0406 16.1436 8.99999C15.5248 7.95936 13.1061 4.44374 8.99981 4.44374C4.89356 4.44374 2.4748 7.95936 1.85605 8.99999Z",fill:""}),pe("path",{d:"M9 11.3906C7.67812 11.3906 6.60938 10.3219 6.60938 9C6.60938 7.67813 7.67812 6.60938 9 6.60938C10.3219 6.60938 11.3906 7.67813 11.3906 9C11.3906 10.3219 10.3219 11.3906 9 11.3906ZM9 7.875C8.38125 7.875 7.875 8.38125 7.875 9C7.875 9.61875 8.38125 10.125 9 10.125C9.61875 10.125 10.125 9.61875 10.125 9C10.125 8.38125 9.61875 7.875 9 7.875Z",fill:""})]})}),pe("button",{className:"hover:text-primary",id:"deleteBeaconButton",onClick:()=>Ne(Ze),children:rt("svg",{className:"fill-current",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{d:"M13.7535 2.47502H11.5879V1.9969C11.5879 1.15315 10.9129 0.478149 10.0691 0.478149H7.90352C7.05977 0.478149 6.38477 1.15315 6.38477 1.9969V2.47502H4.21914C3.40352 2.47502 2.72852 3.15002 2.72852 3.96565V4.8094C2.72852 5.42815 3.09414 5.9344 3.62852 6.1594L4.07852 15.4688C4.13477 16.6219 5.09102 17.5219 6.24414 17.5219H11.7004C12.8535 17.5219 13.8098 16.6219 13.866 15.4688L14.3441 6.13127C14.8785 5.90627 15.2441 5.3719 15.2441 4.78127V3.93752C15.2441 3.15002 14.5691 2.47502 13.7535 2.47502ZM7.67852 1.9969C7.67852 1.85627 7.79102 1.74377 7.93164 1.74377H10.0973C10.2379 1.74377 10.3504 1.85627 10.3504 1.9969V2.47502H7.70664V1.9969H7.67852ZM4.02227 3.96565C4.02227 3.85315 4.10664 3.74065 4.24727 3.74065H13.7535C13.866 3.74065 13.9785 3.82502 13.9785 3.96565V4.8094C13.9785 4.9219 13.8941 5.0344 13.7535 5.0344H4.24727C4.13477 5.0344 4.02227 4.95002 4.02227 4.8094V3.96565ZM11.7285 16.2563H6.27227C5.79414 16.2563 5.40039 15.8906 5.37227 15.3844L4.95039 6.2719H13.0785L12.6566 15.3844C12.6004 15.8625 12.2066 16.2563 11.7285 16.2563Z",fill:""}),pe("path",{d:"M9.00039 9.11255C8.66289 9.11255 8.35352 9.3938 8.35352 9.75942V13.3313C8.35352 13.6688 8.63477 13.9782 9.00039 13.9782C9.33789 13.9782 9.64727 13.6969 9.64727 13.3313V9.75942C9.64727 9.3938 9.33789 9.11255 9.00039 9.11255Z",fill:""}),pe("path",{d:"M11.2502 9.67504C10.8846 9.64692 10.6033 9.90004 10.5752 10.2657L10.4064 12.7407C10.3783 13.0782 10.6314 13.3875 10.9971 13.4157C11.0252 13.4157 11.0252 13.4157 11.0533 13.4157C11.3908 13.4157 11.6721 13.1625 11.6721 12.825L11.8408 10.35C11.8408 9.98442 11.5877 9.70317 11.2502 9.67504Z",fill:""}),pe("path",{d:"M6.72245 9.67504C6.38495 9.70317 6.1037 10.0125 6.13182 10.35L6.3287 12.825C6.35683 13.1625 6.63808 13.4157 6.94745 13.4157C6.97558 13.4157 6.97558 13.4157 7.0037 13.4157C7.3412 13.3875 7.62245 13.0782 7.59433 12.7407L7.39745 10.2657C7.39745 9.90004 7.08808 9.64692 6.72245 9.67504Z",fill:""})]})}),pe("button",{className:"hover:text-primary",id:"exportDataBeacon",onClick:()=>$e(Ze),children:rt("svg",{className:"fill-current",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{d:"M16.8754 11.6719C16.5379 11.6719 16.2285 11.9531 16.2285 12.3187V14.8219C16.2285 15.075 16.0316 15.2719 15.7785 15.2719H2.22227C1.96914 15.2719 1.77227 15.075 1.77227 14.8219V12.3187C1.77227 11.9812 1.49102 11.6719 1.12539 11.6719C0.759766 11.6719 0.478516 11.9531 0.478516 12.3187V14.8219C0.478516 15.7781 1.23789 16.5375 2.19414 16.5375H15.7785C16.7348 16.5375 17.4941 15.7781 17.4941 14.8219V12.3187C17.5223 11.9531 17.2129 11.6719 16.8754 11.6719Z",fill:""}),pe("path",{d:"M8.55074 12.3469C8.66324 12.4594 8.83199 12.5156 9.00074 12.5156C9.16949 12.5156 9.31012 12.4594 9.45074 12.3469L13.4726 8.43752C13.7257 8.1844 13.7257 7.79065 13.5007 7.53752C13.2476 7.2844 12.8539 7.2844 12.6007 7.5094L9.64762 10.4063V2.1094C9.64762 1.7719 9.36637 1.46252 9.00074 1.46252C8.66324 1.46252 8.35387 1.74377 8.35387 2.1094V10.4063L5.40074 7.53752C5.14762 7.2844 4.75387 7.31252 4.50074 7.53752C4.24762 7.79065 4.27574 8.1844 4.50074 8.43752L8.55074 12.3469Z",fill:""})]})})]})})]},ct))})]})}),pe(uv.Root,{show:_,as:Re.Fragment,children:rt(f2,{as:"div",className:"relative z-10",initialFocus:Z,onClose:C,children:[pe(uv.Child,{as:Re.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:pe("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),pe("div",{className:"fixed inset-0 z-10 overflow-y-auto drop-shadow-2xl",children:pe("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:pe(uv.Child,{as:Re.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:pe(f2.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:pe("div",{className:"col-span-5 xl:col-span-3",children:rt("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[pe("div",{className:"border-b border-stroke py-4 px-7 dark:border-strokedark",children:pe("h3",{className:"font-medium text-black dark:text-white",children:"Beacon Details"})}),pe("div",{className:"p-7",children:rt("form",{action:"#",children:[rt("div",{className:"mb-5.5 flex flex-col gap-5.5 sm:flex-row",children:[rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"name",children:"Name"}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"name",id:"name",placeholder:I.name,defaultValue:I.name,onBlur:Se})]}),rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"macAddress",children:"MAC Address"}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"macAddress",id:"macAddress",placeholder:I.macAddress,defaultValue:I.macAddress,maxLength:17,disabled:!0})]})]}),rt("div",{className:"mb-5.5 flex flex-col gap-5.5 sm:flex-row",children:[rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"latitude",children:"Latitude"}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"latitude",id:"latitude",placeholder:I.latitude,defaultValue:I.latitude,onBlur:Se,pattern:"-?\\d*\\.?\\d*"})]}),rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"longitude",children:"Longitude"}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"longitude",id:"longitude",placeholder:I.longitude,defaultValue:I.longitude,onBlur:Se,pattern:"-?\\d*\\.?\\d*"})]})]}),rt("div",{className:"flex justify-end gap-4.5",children:[pe("button",{className:"flex justify-center rounded border border-stroke py-2 px-6 font-medium text-black hover:shadow-1 dark:border-strokedark dark:text-white",onClick:oe,children:"Cancel"}),pe("button",{className:"flex justify-center rounded bg-primary py-2 px-6 font-medium text-gray hover:shadow-1",id:"buttonSave",onClick:_e,children:"Save"})]})]})})]})})})})})})]})})]})},dK=()=>{const[o,c]=Re.useState([]),[d,_]=Re.useState({name:"",latitude:"",longitude:"",macAddress:""});Re.useEffect(()=>{fetch("/beacon-management/list").then(_e=>_e.json()).then(_e=>{Array.isArray(_e)?c(_e):c([_e])})},[]);const C=_e=>{_e.preventDefault();const Se=oe();if(Se.error){alert(Se.message);return}const Ne={name:d.name,latitude:d.latitude,longitude:d.longitude,macAddress:d.macAddress};fetch("/beacon-management",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)}).then($e=>$e.json()).then($e=>{"status"in $e||(alert("Beacon "+$e.name+" added"),window.location.reload(!0))}),_({name:"",latitude:"",longitude:"",macAdress:""})},I=_e=>{fetch("/beacon-management",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}).then(Se=>Se.json()).then(Se=>{"status"in Se&&alert("Failure to update information!"),alert("Information successfully updated!"),window.location.reload()})},z=_e=>{window.confirm("The data cannot be recovered! Would you like to confirm this action?")&&fetch("/beacon-management",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}).then(Ne=>Ne.json()).then(Ne=>{"status"in Ne||(alert("Beacon "+Ne.name+" deleted"),window.location.reload())})},Z=_e=>{_({...d,[_e.target.name]:_e.target.value})},X=_e=>{var Se=_e.target.value;if(Se==="")return;Se=Se.replace(/[^0-9.,\s-]/g,"");const[Ne,$e]=Se.split(",");d.latitude=$e.trim(),d.longitude=Ne.trim()},oe=()=>{var _e=`The following errors were found: 
`,Se=!1;return(d.name===""||d.name.length<=3)&&(_e+=`#The field NAME cannot be empty or less than 3 characters.
`,Se=!0),(d.latitude||d.longitude)===""&&(_e+=`#Latitude and longitude coordinates cannot be empty.
`,Se=!0),d.macAddress===""&&(_e+="#MAC address cannot be empty.",Se=!0),{error:Se,message:_e}};return rt(Q5,{children:[pe(fI,{pageName:"Beacon Management"}),rt("div",{className:"flex flex-col gap-10",children:[pe("div",{className:"col-span-5 xl:col-span-3",children:rt("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[pe("div",{className:"border-b border-stroke py-4 px-7 dark:border-strokedark",children:pe("h3",{className:"font-medium text-black dark:text-white",children:"Add Beacon"})}),pe("div",{className:"p-7",children:rt("form",{onSubmit:C,children:[rt("div",{className:"mb-5.5 flex flex-col gap-5.5 sm:flex-row",children:[rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"name",children:"Name"}),pe("div",{className:"relative",children:pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"name",id:"name",onBlur:Z,placeholder:"Name",defaultValue:d.name})})]}),rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"macAddress",children:"MAC Address"}),pe("div",{className:"relative",children:pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"macAddress",id:"macAddress",onBlur:Z,placeholder:"MAC Address",defaultValue:d.macAddress})})]})]}),rt("div",{className:"mb-5.5",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"Localization",children:"Localization"}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"localization",id:"localization",onBlur:X,placeholder:"Localization"})]}),pe("div",{className:"flex justify-end gap-4.5",children:pe("button",{className:"flex justify-center rounded bg-primary py-2 px-6 font-medium text-gray hover:shadow-1",type:"submit",children:"Add Beacon"})})]})})]})}),pe(hK,{jsonData:o,updateBeacon:I,deleteBeacon:z})]})]})},fK=({jsonData:o})=>{const[c,d]=Re.useState([]),[_,C]=Re.useState(!1),[I,z]=Re.useState({messageID:""}),Z=Re.useRef(null),X=Se=>{I.messageID=Se.id},oe=Se=>{Se.preventDefault();const Ne={id:I.messageID},$e=new URL("/user-experience/media","http://localhost:3000");$e.search=new URLSearchParams(Ne).toString(),fetch($e).then(We=>We.json()).then(We=>{"status"in We||(Array.isArray(We)?d(We):d([We]))})},_e=(Se,Ne)=>{X(Ne),oe(Se),C(!0)};return rt("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[pe("div",{className:"py-6 px-4 md:px-6 xl:px-7.5",children:rt("div",{className:"relative z-20 inline-block",children:[rt("select",{name:"#",id:"#",className:"relative z-20 inline-flex appearance-none bg-transparent py-1 pl-3 pr-8 text-xl font-semibold text-black dark:text-white outline-none",children:[pe("option",{className:"dark:text-black",value:"",children:"Feedback"}),pe("option",{className:"dark:text-black",value:"",children:"Other things"})]}),pe("span",{className:"absolute top-1/2 right-3 z-10 -translate-y-1/2",children:rt("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{d:"M0.47072 1.08816C0.47072 1.02932 0.500141 0.955772 0.54427 0.911642C0.647241 0.808672 0.809051 0.808672 0.912022 0.896932L4.85431 4.60386C4.92785 4.67741 5.06025 4.67741 5.14851 4.60386L9.09079 0.896932C9.19376 0.793962 9.35557 0.808672 9.45854 0.911642C9.56151 1.01461 9.5468 1.17642 9.44383 1.27939L5.50155 4.98632C5.22206 5.23639 4.78076 5.23639 4.51598 4.98632L0.558981 1.27939C0.50014 1.22055 0.47072 1.16171 0.47072 1.08816Z",fill:"#637381"}),pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.22659 0.546578L5.00141 4.09604L8.76422 0.557869C9.08459 0.244537 9.54201 0.329403 9.79139 0.578788C10.112 0.899434 10.0277 1.36122 9.77668 1.61224L9.76644 1.62248L5.81552 5.33722C5.36257 5.74249 4.6445 5.7544 4.19352 5.32924C4.19327 5.32901 4.19377 5.32948 4.19352 5.32924L0.225953 1.61241C0.102762 1.48922 -4.20186e-08 1.31674 -3.20269e-08 1.08816C-2.40601e-08 0.905899 0.0780105 0.712197 0.211421 0.578787C0.494701 0.295506 0.935574 0.297138 1.21836 0.539529L1.22659 0.546578ZM4.51598 4.98632C4.78076 5.23639 5.22206 5.23639 5.50155 4.98632L9.44383 1.27939C9.5468 1.17642 9.56151 1.01461 9.45854 0.911642C9.35557 0.808672 9.19376 0.793962 9.09079 0.896932L5.14851 4.60386C5.06025 4.67741 4.92785 4.67741 4.85431 4.60386L0.912022 0.896932C0.809051 0.808672 0.647241 0.808672 0.54427 0.911642C0.500141 0.955772 0.47072 1.02932 0.47072 1.08816C0.47072 1.16171 0.50014 1.22055 0.558981 1.27939L4.51598 4.98632Z",fill:"#637381"})]})})]})}),rt("div",{className:"grid grid-cols-4 border-t border-stroke py-4.5 px-4 dark:border-strokedark sm:grid-cols-8 md:px-6 2xl:px-7.5",children:[pe("div",{className:"col-span-1 flex items-center",children:pe("p",{className:"font-medium",children:"ID"})}),pe("div",{className:"col-span-2  items-center sm:flex",children:pe("p",{className:"font-medium",children:"Title"})}),pe("div",{className:"col-span-2 flex items-center",children:pe("p",{className:"font-medium",children:"Message"})})]}),o.map((Se,Ne)=>rt("div",{className:"grid grid-cols-4 border-t border-stroke py-4.5 px-4 dark:border-strokedark sm:grid-cols-8 md:px-6 2xl:px-7.5",onClick:()=>X(Se),children:[pe("div",{className:"col-span-1 flex items-center",children:pe("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:pe("p",{className:"text-sm text-black dark:text-white",children:Se.id})})}),pe("div",{className:"col-span-2  items-center sm:flex",children:pe("p",{className:"text-sm text-black dark:text-white",children:Se.title})}),pe("div",{className:"col-span-3 flex items-center",children:pe("p",{className:"text-sm text-black dark:text-white",children:Se.description})}),pe("button",{id:"coluna04",type:"button",onClick:()=>_e(event,Se),className:"col-end-9 flex justify-end items-center",children:pe("p",{className:"text-sm text-meta-3",children:"See attachemnts"})})]},Ne)),pe(uv.Root,{show:_,as:Re.Fragment,children:rt(f2,{as:"div",className:"relative z-10",initialFocus:Z,onClose:C,children:[pe(uv.Child,{as:Re.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:pe("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),pe("div",{className:"fixed inset-0 z-10 overflow-y-auto drop-shadow-2xl",children:pe("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:pe(uv.Child,{as:Re.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:rt(f2.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[pe("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:pe("div",{className:"sm:flex sm:items-start",children:rt("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[pe(f2.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"Attachements"}),rt("div",{className:"grid grid-cols-2 py-4.5  2xl:px-7.5",children:[pe("div",{className:"col-span-1 flex items-center",children:pe("p",{className:"font-medium",children:"Type"})}),pe("div",{className:"col-span-1 flex items-center",children:pe("p",{className:"font-medium",children:"URL"})})]}),c.map((Se,Ne)=>rt("div",{className:"grid grid-cols-2 py-4.5  2xl:px-7.5",children:[pe("div",{className:"col-span-1 flex items-center",children:pe("p",{className:"text-sm text-gray-500",children:Se.type})}),pe("div",{className:"col-span-1 flex items-center",children:pe("a",{href:Se.url,className:"text-sm text-gray-500",target:"_blank",children:Se.url})})]},Ne))]})})}),pe("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:pe("button",{type:"button",className:"flex justify-center rounded bg-primary py-2 px-6 font-medium text-gray hover:shadow-1",onClick:()=>C(!1),ref:Z,children:"Close"})})]})})})})]})})]})},mK=()=>{const[o,c]=Re.useState([]);return Re.useEffect(()=>{fetch("/user-experience/list").then(d=>d.json()).then(d=>{"status"in d||(Array.isArray(d)?c(d):c([d]))})},[]),rt(Q5,{children:[pe(fI,{pageName:"User Experience"}),pe("div",{className:"flex flex-col gap-10",children:pe(fK,{jsonData:o})})]})},gK=()=>{const[o,c]=Re.useState({fullName:"",email:"",phone:"",password:"",repassword:""});Re.useEffect(()=>{var oe;const I=(oe=document.cookie.split("; ").find(_e=>_e.startsWith("loginAtlasToken=")))==null?void 0:oe.split("=")[1];if(!I)return;const z=decodeURIComponent(I),X={email:JSON.parse(z).emailUser};fetch("/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}).then(_e=>_e.json()).then(_e=>{"status"in _e||c({...o,fullName:_e.name,email:_e.email,phone:_e.phone})})},[]);const d=I=>{c({...o,[I.target.name]:I.target.value})},_=I=>{I.preventDefault();const z=C();if(z.error){alert(z.message);return}const Z={name:o.fullName,email:o.email,phone:o.phone,password:o.password};fetch("/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}).then(X=>X.json()).then(X=>{if("status"in X){alert("Failure to update information!");return}alert("Information successfully updated!"),window.location.reload()})},C=()=>{var I=`The following errors were found: 
`,z=!1;return(o.fullName===""||o.fullName.length<=5)&&(I+=`#The field NAME cannot be empty or less than 5 characters.
`,z=!0),o.password!==o.repassword&&(I+=`#The PASSWORD fields do not match.
`,z=!0),o.password!==""&&(o.password.length||o.repassword.length)!=8&&(I+="#The PASSWORD must have 8 characters.",z=!0),{error:z,message:I}};return pe(Q5,{children:rt("div",{className:"grid grid-cols-5 gap-8",children:[pe("div",{className:"col-span-5 xl:col-span-3",children:rt("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[pe("div",{className:"border-b border-stroke py-4 px-7 dark:border-strokedark",children:pe("h3",{className:"font-medium text-black dark:text-white",children:"Personal Information"})}),pe("div",{className:"p-7",children:rt("form",{onSubmit:_,children:[rt("div",{className:"mb-5.5 flex flex-col gap-5.5 sm:flex-row",children:[rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"fullName",children:"Full Name"}),rt("div",{className:"relative",children:[pe("span",{className:"absolute left-4.5 top-4",children:pe("svg",{className:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.8",children:[pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.72039 12.887C4.50179 12.1056 5.5616 11.6666 6.66667 11.6666H13.3333C14.4384 11.6666 15.4982 12.1056 16.2796 12.887C17.061 13.6684 17.5 14.7282 17.5 15.8333V17.5C17.5 17.9602 17.1269 18.3333 16.6667 18.3333C16.2064 18.3333 15.8333 17.9602 15.8333 17.5V15.8333C15.8333 15.1703 15.5699 14.5344 15.1011 14.0655C14.6323 13.5967 13.9964 13.3333 13.3333 13.3333H6.66667C6.00363 13.3333 5.36774 13.5967 4.8989 14.0655C4.43006 14.5344 4.16667 15.1703 4.16667 15.8333V17.5C4.16667 17.9602 3.79357 18.3333 3.33333 18.3333C2.8731 18.3333 2.5 17.9602 2.5 17.5V15.8333C2.5 14.7282 2.93899 13.6684 3.72039 12.887Z",fill:""}),pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.99967 3.33329C8.61896 3.33329 7.49967 4.45258 7.49967 5.83329C7.49967 7.214 8.61896 8.33329 9.99967 8.33329C11.3804 8.33329 12.4997 7.214 12.4997 5.83329C12.4997 4.45258 11.3804 3.33329 9.99967 3.33329ZM5.83301 5.83329C5.83301 3.53211 7.69849 1.66663 9.99967 1.66663C12.3009 1.66663 14.1663 3.53211 14.1663 5.83329C14.1663 8.13448 12.3009 9.99996 9.99967 9.99996C7.69849 9.99996 5.83301 8.13448 5.83301 5.83329Z",fill:""})]})})}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 pl-11.5 pr-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"fullName",id:"fullName",placeholder:"Your full name",defaultValue:o.fullName,onBlur:d})]})]}),rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"phoneNumber",children:"Phone Number"}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 px-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"phone",id:"phoneNumber",placeholder:"Your phone number",defaultValue:o.phone,onBlur:d})]})]}),rt("div",{className:"mb-5.5",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"emailAddress",children:"Email Address"}),rt("div",{className:"relative",children:[pe("span",{className:"absolute left-4.5 top-4",children:pe("svg",{className:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.8",children:[pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33301 4.16667C2.87658 4.16667 2.49967 4.54357 2.49967 5V15C2.49967 15.4564 2.87658 15.8333 3.33301 15.8333H16.6663C17.1228 15.8333 17.4997 15.4564 17.4997 15V5C17.4997 4.54357 17.1228 4.16667 16.6663 4.16667H3.33301ZM0.833008 5C0.833008 3.6231 1.9561 2.5 3.33301 2.5H16.6663C18.0432 2.5 19.1663 3.6231 19.1663 5V15C19.1663 16.3769 18.0432 17.5 16.6663 17.5H3.33301C1.9561 17.5 0.833008 16.3769 0.833008 15V5Z",fill:""}),pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.983719 4.52215C1.24765 4.1451 1.76726 4.05341 2.1443 4.31734L9.99975 9.81615L17.8552 4.31734C18.2322 4.05341 18.7518 4.1451 19.0158 4.52215C19.2797 4.89919 19.188 5.4188 18.811 5.68272L10.4776 11.5161C10.1907 11.7169 9.80879 11.7169 9.52186 11.5161L1.18853 5.68272C0.811486 5.4188 0.719791 4.89919 0.983719 4.52215Z",fill:""})]})})}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 pl-11.5 pr-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"email",name:"emailAddress",id:"emailAddress",placeholder:"Your e-mail address",defaultValue:o.email,disabled:!0})]})]}),rt("div",{className:"mb-5.5 flex flex-col gap-5.5 sm:flex-row",children:[rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"fullName",children:"Current Password"}),rt("div",{className:"relative",children:[pe("span",{className:"absolute left-4.5 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.8",children:[pe("path",{d:"M16.1547 6.80626V5.91251C16.1547 3.16251 14.0922 0.825009 11.4797 0.618759C10.0359 0.481259 8.59219 0.996884 7.52656 1.95938C6.46094 2.92188 5.84219 4.29688 5.84219 5.70626V6.80626C3.84844 7.18438 2.33594 8.93751 2.33594 11.0688V17.2906C2.33594 19.5594 4.19219 21.3813 6.42656 21.3813H15.5016C17.7703 21.3813 19.6266 19.525 19.6266 17.2563V11C19.6609 8.93751 18.1484 7.21876 16.1547 6.80626ZM8.55781 3.09376C9.31406 2.40626 10.3109 2.06251 11.3422 2.16563C13.1641 2.33751 14.6078 3.98751 14.6078 5.91251V6.70313H7.38906V5.67188C7.38906 4.70938 7.80156 3.78126 8.55781 3.09376ZM18.1141 17.2906C18.1141 18.7 16.9453 19.8688 15.5359 19.8688H6.46094C5.05156 19.8688 3.91719 18.7344 3.91719 17.325V11.0688C3.91719 9.52189 5.15469 8.28438 6.70156 8.28438H15.2953C16.8422 8.28438 18.1141 9.52188 18.1141 11V17.2906Z",fill:""}),pe("path",{d:"M10.9977 11.8594C10.5852 11.8594 10.207 12.2031 10.207 12.65V16.2594C10.207 16.6719 10.5508 17.05 10.9977 17.05C11.4102 17.05 11.7883 16.7063 11.7883 16.2594V12.6156C11.7883 12.2031 11.4102 11.8594 10.9977 11.8594Z",fill:""})]})})}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 pl-11.5 pr-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"password",maxLength:8,name:"password",id:"password",placeholder:"Your secret password",defaultValue:o.password,onBlur:d})]})]}),rt("div",{className:"w-full sm:w-1/2",children:[pe("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"phoneNumber",children:"Re-Type Password"}),rt("div",{className:"relative",children:[pe("span",{className:"absolute left-4.5 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.8",children:[pe("path",{d:"M16.1547 6.80626V5.91251C16.1547 3.16251 14.0922 0.825009 11.4797 0.618759C10.0359 0.481259 8.59219 0.996884 7.52656 1.95938C6.46094 2.92188 5.84219 4.29688 5.84219 5.70626V6.80626C3.84844 7.18438 2.33594 8.93751 2.33594 11.0688V17.2906C2.33594 19.5594 4.19219 21.3813 6.42656 21.3813H15.5016C17.7703 21.3813 19.6266 19.525 19.6266 17.2563V11C19.6609 8.93751 18.1484 7.21876 16.1547 6.80626ZM8.55781 3.09376C9.31406 2.40626 10.3109 2.06251 11.3422 2.16563C13.1641 2.33751 14.6078 3.98751 14.6078 5.91251V6.70313H7.38906V5.67188C7.38906 4.70938 7.80156 3.78126 8.55781 3.09376ZM18.1141 17.2906C18.1141 18.7 16.9453 19.8688 15.5359 19.8688H6.46094C5.05156 19.8688 3.91719 18.7344 3.91719 17.325V11.0688C3.91719 9.52189 5.15469 8.28438 6.70156 8.28438H15.2953C16.8422 8.28438 18.1141 9.52188 18.1141 11V17.2906Z",fill:""}),pe("path",{d:"M10.9977 11.8594C10.5852 11.8594 10.207 12.2031 10.207 12.65V16.2594C10.207 16.6719 10.5508 17.05 10.9977 17.05C11.4102 17.05 11.7883 16.7063 11.7883 16.2594V12.6156C11.7883 12.2031 11.4102 11.8594 10.9977 11.8594Z",fill:""})]})})}),pe("input",{className:"w-full rounded border border-stroke bg-gray py-3 pl-11.5 pr-4.5 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"password",name:"repassword",id:"repassword",placeholder:"Your secret password",defaultValue:o.repassword,onBlur:d,maxLength:8})]})]})]}),pe("div",{className:"flex justify-end gap-4.5",children:pe("button",{className:"flex justify-center rounded bg-primary py-2 px-6 font-medium text-gray hover:shadow-1",type:"submit",children:"Save"})})]})})]})}),pe("div",{className:"col-span-5 xl:col-span-2",children:rt("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[pe("div",{className:"border-b border-stroke py-4 px-7 dark:border-strokedark",children:pe("h3",{className:"font-medium text-black dark:text-white",children:"Your Photo"})}),pe("div",{className:"p-7",children:rt("form",{children:[rt("div",{className:"mb-4 flex items-center gap-3",children:[pe("div",{className:"h-14 w-14 rounded-full",children:pe("img",{src:_B,alt:"User"})}),rt("div",{children:[pe("span",{className:"mb-1.5 text-black dark:text-white",children:"Edit your photo"}),rt("span",{className:"flex gap-2.5",children:[pe("button",{className:"text-sm hover:text-primary",children:"Delete"}),pe("button",{className:"text-sm hover:text-primary",children:"Update"})]})]})]}),rt("div",{id:"FileUpload",className:"relative mb-5.5 block w-full cursor-pointer appearance-none rounded border-2 border-dashed border-primary bg-gray py-4 px-4 dark:bg-meta-4 sm:py-7.5",children:[pe("input",{type:"file",accept:"image/*",className:"absolute inset-0 z-50 m-0 h-full w-full cursor-pointer p-0 opacity-0 outline-none"}),rt("div",{className:"flex flex-col items-center justify-center space-y-3",children:[pe("span",{className:"flex h-10 w-10 items-center justify-center rounded-full border border-stroke bg-white dark:border-strokedark dark:bg-boxdark",children:rt("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.99967 9.33337C2.36786 9.33337 2.66634 9.63185 2.66634 10V12.6667C2.66634 12.8435 2.73658 13.0131 2.8616 13.1381C2.98663 13.2631 3.1562 13.3334 3.33301 13.3334H12.6663C12.8431 13.3334 13.0127 13.2631 13.1377 13.1381C13.2628 13.0131 13.333 12.8435 13.333 12.6667V10C13.333 9.63185 13.6315 9.33337 13.9997 9.33337C14.3679 9.33337 14.6663 9.63185 14.6663 10V12.6667C14.6663 13.1971 14.4556 13.7058 14.0806 14.0809C13.7055 14.456 13.1968 14.6667 12.6663 14.6667H3.33301C2.80257 14.6667 2.29387 14.456 1.91879 14.0809C1.54372 13.7058 1.33301 13.1971 1.33301 12.6667V10C1.33301 9.63185 1.63148 9.33337 1.99967 9.33337Z",fill:"#3C50E0"}),pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5286 1.52864C7.78894 1.26829 8.21106 1.26829 8.4714 1.52864L11.8047 4.86197C12.0651 5.12232 12.0651 5.54443 11.8047 5.80478C11.5444 6.06513 11.1223 6.06513 10.8619 5.80478L8 2.94285L5.13807 5.80478C4.87772 6.06513 4.45561 6.06513 4.19526 5.80478C3.93491 5.54443 3.93491 5.12232 4.19526 4.86197L7.5286 1.52864Z",fill:"#3C50E0"}),pe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99967 1.33337C8.36786 1.33337 8.66634 1.63185 8.66634 2.00004V10C8.66634 10.3682 8.36786 10.6667 7.99967 10.6667C7.63148 10.6667 7.33301 10.3682 7.33301 10V2.00004C7.33301 1.63185 7.63148 1.33337 7.99967 1.33337Z",fill:"#3C50E0"})]})}),rt("p",{children:[pe("span",{className:"text-primary",children:"Click to upload"})," or drag and drop"]}),pe("p",{className:"mt-1.5",children:"SVG, PNG, JPG or GIF"}),pe("p",{children:"(max, 800 X 800px)"})]})]}),rt("div",{className:"flex justify-end gap-4.5",children:[pe("button",{className:"flex justify-center rounded border border-stroke py-2 px-6 font-medium text-black hover:shadow-1 dark:border-strokedark dark:text-white",type:"submit",children:"Cancel"}),pe("button",{className:"flex justify-center rounded bg-primary py-2 px-6 font-medium text-gray hover:bg-opacity-70",type:"submit",children:"Save"})]})]})})]})})]})})},EI="/assets/logo-extended-a23eb369.png",yK=()=>{const[o,c]=Re.useState({emailuser:"",passworduser:""});Re.useEffect(()=>{var X;const C=(X=document.cookie.split("; ").find(oe=>oe.startsWith("loginAtlasToken=")))==null?void 0:X.split("=")[1];if(!C)return;const I=decodeURIComponent(C),z=JSON.parse(I),Z={userID:z.userID,token:z.token};fetch("/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}).then(oe=>oe.json()).then(oe=>{if("status"in oe)return;const _e=new Date(oe.expiryDate);if(new Date().getTime()<=_e.getTime())window.location.href="/";else return})},[]);function d(C){C.preventDefault();const I={email:o.emailuser,password:o.passworduser};fetch("/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}).then(z=>{z.ok?window.location.href="/":alert("Email or password is incorrect.")}).catch(z=>{console.error(z),alert("An error occurred. Please try again later.")})}const _=C=>{c({...o,[C.target.name]:C.target.value})};return rt("main",{children:[pe("a",{href:"https://www.isep.ipp.pt/",className:"inline-block",target:"_blank",children:pe("img",{className:"text-primary pl-[36px] pt-[18px] ",src:EI,alt:"Logo"})}),pe("div",{className:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10 ",children:pe("div",{className:"rounded-md drop-shadow-md overflow-hidden border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:rt("div",{className:"flex flex-wrap items-center",children:[pe("div",{className:"bg-cover xl:bg-isep-background bg-isep-background-horizontal  xl:h-[880px] h-[150px] w-[100%]  xl:block xl:w-1/2"}),pe("div",{className:"w-full  border-stroke dark:border-strokedark xl:w-1/2 xl:border-l-2",children:rt("div",{className:"w-full p-4 sm:p-12.5 xl:p-17.5",children:[pe("h2",{className:"mb-1.5 text-2xl font-bold text-black dark:text-white sm:text-title-xl2",children:"Log in"}),pe("span",{className:"mb-1.5 block font-medium",children:"Welcome back!"}),pe("span",{className:"mb-9 block font-medium",children:"Its nice to see you again!"}),rt("form",{onSubmit:d,children:[rt("div",{className:"mb-4",children:[pe("label",{className:"mb-2.5 block font-medium text-black dark:text-white",children:"Email"}),rt("div",{className:"relative",children:[pe("input",{name:"emailuser",type:"email",defaultValue:o.emailuser,onBlur:_,placeholder:"Enter your email",className:"w-full rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"}),pe("span",{className:"absolute right-4 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pe("g",{opacity:"0.5",children:pe("path",{d:"M19.2516 3.30005H2.75156C1.58281 3.30005 0.585938 4.26255 0.585938 5.46567V16.6032C0.585938 17.7719 1.54844 18.7688 2.75156 18.7688H19.2516C20.4203 18.7688 21.4172 17.8063 21.4172 16.6032V5.4313C21.4172 4.26255 20.4203 3.30005 19.2516 3.30005ZM19.2516 4.84692C19.2859 4.84692 19.3203 4.84692 19.3547 4.84692L11.0016 10.2094L2.64844 4.84692C2.68281 4.84692 2.71719 4.84692 2.75156 4.84692H19.2516ZM19.2516 17.1532H2.75156C2.40781 17.1532 2.13281 16.8782 2.13281 16.5344V6.35942L10.1766 11.5157C10.4172 11.6875 10.6922 11.7563 10.9672 11.7563C11.2422 11.7563 11.5172 11.6875 11.7578 11.5157L19.8016 6.35942V16.5688C19.8703 16.9125 19.5953 17.1532 19.2516 17.1532Z",fill:""})})})})]})]}),rt("div",{className:"mb-6",children:[pe("label",{className:"mb-2.5 block font-medium text-black dark:text-white",children:"Password"}),rt("div",{className:"relative",children:[pe("input",{name:"passworduser",type:"password",defaultValue:o.passworduser,onBlur:_,placeholder:"Enter your password",className:"w-full rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"}),pe("span",{className:"absolute right-4 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.5",children:[pe("path",{d:"M16.1547 6.80626V5.91251C16.1547 3.16251 14.0922 0.825009 11.4797 0.618759C10.0359 0.481259 8.59219 0.996884 7.52656 1.95938C6.46094 2.92188 5.84219 4.29688 5.84219 5.70626V6.80626C3.84844 7.18438 2.33594 8.93751 2.33594 11.0688V17.2906C2.33594 19.5594 4.19219 21.3813 6.42656 21.3813H15.5016C17.7703 21.3813 19.6266 19.525 19.6266 17.2563V11C19.6609 8.93751 18.1484 7.21876 16.1547 6.80626ZM8.55781 3.09376C9.31406 2.40626 10.3109 2.06251 11.3422 2.16563C13.1641 2.33751 14.6078 3.98751 14.6078 5.91251V6.70313H7.38906V5.67188C7.38906 4.70938 7.80156 3.78126 8.55781 3.09376ZM18.1141 17.2906C18.1141 18.7 16.9453 19.8688 15.5359 19.8688H6.46094C5.05156 19.8688 3.91719 18.7344 3.91719 17.325V11.0688C3.91719 9.52189 5.15469 8.28438 6.70156 8.28438H15.2953C16.8422 8.28438 18.1141 9.52188 18.1141 11V17.2906Z",fill:""}),pe("path",{d:"M10.9977 11.8594C10.5852 11.8594 10.207 12.2031 10.207 12.65V16.2594C10.207 16.6719 10.5508 17.05 10.9977 17.05C11.4102 17.05 11.7883 16.7063 11.7883 16.2594V12.6156C11.7883 12.2031 11.4102 11.8594 10.9977 11.8594Z",fill:""})]})})})]})]}),pe("div",{className:"mt-6 mb-6 text-end",children:pe(ey,{to:"/auth/password-reset-email",className:"text-primary",children:"Forgot your password?"})}),pe("div",{className:"mb-5",children:pe("input",{type:"submit",value:"Sign In",className:"w-full cursor-pointer rounded-lg border border-primary bg-primary p-4 text-white transition hover:bg-opacity-90"})}),pe("div",{className:"mt-6 text-center",children:rt("p",{children:["Dont have any account?"," ",pe(ey,{to:"/auth/signup",className:"text-primary",children:"Sign Up"})]})})]})]})})]})})})]})},vK=()=>{Re.useEffect(()=>{var z;const d=(z=document.cookie.split("; ").find(Z=>Z.startsWith("loginAtlasToken=")))==null?void 0:z.split("=")[1];if(!d)return;const _=decodeURIComponent(d),C=JSON.parse(_),I={userID:C.userID,token:C.token};fetch("/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}).then(Z=>Z.json()).then(Z=>{if("status"in Z)return;const X=new Date(Z.expiryDate);if(new Date().getTime()<=X.getTime())window.location.href="/";else return})},[]);function o(d){d.preventDefault();const _=c();_&&fetch("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}).then(C=>{(C.ok||C.status==400&&window.confirm("The forwarded e-mail is already being used. Go to LOGIN?"))&&(window.location.href="/auth/signin")})}function c(){const d=document.getElementById("nameClient").value,_=document.getElementById("emailClient").value,C=document.getElementById("passwordClient").value,I=document.getElementById("repasswordClient").value;if(C!==I){alert("The passwords do not match.");return}if(!d||!_||!C||!I){alert("Please fill in all fields.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_)){alert("The email entered is not valid.");return}if(C.length<8){alert("The password must be at least 8 characters long.");return}return{name:d,email:_,password:C,repassword:I}}return rt("main",{children:[pe("a",{href:"https://www.isep.ipp.pt/",className:"inline-block",target:"_blank",children:pe("img",{className:"text-primary pl-[36px] pt-[18px] ",src:EI,alt:"Logo"})}),pe("div",{className:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10 ",children:pe("div",{className:"rounded-md drop-shadow-md overflow-hidden border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:rt("div",{className:"flex flex-wrap items-center",children:[pe("div",{className:"bg-cover xl:bg-isep-background bg-isep-background-horizontal  xl:h-[880px] h-[150px] w-[100%]  xl:block xl:w-1/2"}),pe("div",{className:"w-full border-stroke dark:border-strokedark xl:w-1/2 xl:border-l-2",children:rt("div",{className:"w-full p-4 sm:p-12.5 xl:p-17.5",children:[pe("h2",{className:"mb-1.5  text-2xl font-bold text-black dark:text-white sm:text-title-xl2",children:"Sign Up"}),pe("span",{className:"mb-9 block font-medium",children:"Never get lost when in ISEP"}),rt("form",{children:[rt("div",{className:"mb-4",children:[pe("label",{className:"mb-2.5 block font-medium text-black dark:text-white",children:"Name"}),rt("div",{className:"relative",children:[pe("input",{id:"nameClient",type:"text",name:"name",placeholder:"Enter your full name",className:"w-full rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"}),pe("span",{className:"absolute right-4 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.5",children:[pe("path",{d:"M11.0008 9.52185C13.5445 9.52185 15.607 7.5281 15.607 5.0531C15.607 2.5781 13.5445 0.584351 11.0008 0.584351C8.45703 0.584351 6.39453 2.5781 6.39453 5.0531C6.39453 7.5281 8.45703 9.52185 11.0008 9.52185ZM11.0008 2.1656C12.6852 2.1656 14.0602 3.47185 14.0602 5.08748C14.0602 6.7031 12.6852 8.00935 11.0008 8.00935C9.31641 8.00935 7.94141 6.7031 7.94141 5.08748C7.94141 3.47185 9.31641 2.1656 11.0008 2.1656Z",fill:""}),pe("path",{d:"M13.2352 11.0687H8.76641C5.08828 11.0687 2.09766 14.0937 2.09766 17.7719V20.625C2.09766 21.0375 2.44141 21.4156 2.88828 21.4156C3.33516 21.4156 3.67891 21.0719 3.67891 20.625V17.7719C3.67891 14.9531 5.98203 12.6156 8.83516 12.6156H13.2695C16.0883 12.6156 18.4258 14.9187 18.4258 17.7719V20.625C18.4258 21.0375 18.7695 21.4156 19.2164 21.4156C19.6633 21.4156 20.007 21.0719 20.007 20.625V17.7719C19.9039 14.0937 16.9133 11.0687 13.2352 11.0687Z",fill:""})]})})})]})]}),rt("div",{className:"mb-4",children:[pe("label",{className:"mb-2.5 block font-medium text-black dark:text-white",children:"Email"}),rt("div",{className:"relative",children:[pe("input",{id:"emailClient",type:"email",name:"email",placeholder:"Enter your email",className:"w-full rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"}),pe("span",{className:"absolute right-4 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pe("g",{opacity:"0.5",children:pe("path",{d:"M19.2516 3.30005H2.75156C1.58281 3.30005 0.585938 4.26255 0.585938 5.46567V16.6032C0.585938 17.7719 1.54844 18.7688 2.75156 18.7688H19.2516C20.4203 18.7688 21.4172 17.8063 21.4172 16.6032V5.4313C21.4172 4.26255 20.4203 3.30005 19.2516 3.30005ZM19.2516 4.84692C19.2859 4.84692 19.3203 4.84692 19.3547 4.84692L11.0016 10.2094L2.64844 4.84692C2.68281 4.84692 2.71719 4.84692 2.75156 4.84692H19.2516ZM19.2516 17.1532H2.75156C2.40781 17.1532 2.13281 16.8782 2.13281 16.5344V6.35942L10.1766 11.5157C10.4172 11.6875 10.6922 11.7563 10.9672 11.7563C11.2422 11.7563 11.5172 11.6875 11.7578 11.5157L19.8016 6.35942V16.5688C19.8703 16.9125 19.5953 17.1532 19.2516 17.1532Z",fill:""})})})})]})]}),rt("div",{className:"mb-4",children:[pe("label",{className:"mb-2.5 block font-medium text-black dark:text-white",children:"Password"}),rt("div",{className:"relative",children:[pe("input",{id:"passwordClient",type:"password",maxLength:8,name:"password",placeholder:"Enter your password",className:"w-full rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"}),pe("span",{className:"absolute right-4 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.5",children:[pe("path",{d:"M16.1547 6.80626V5.91251C16.1547 3.16251 14.0922 0.825009 11.4797 0.618759C10.0359 0.481259 8.59219 0.996884 7.52656 1.95938C6.46094 2.92188 5.84219 4.29688 5.84219 5.70626V6.80626C3.84844 7.18438 2.33594 8.93751 2.33594 11.0688V17.2906C2.33594 19.5594 4.19219 21.3813 6.42656 21.3813H15.5016C17.7703 21.3813 19.6266 19.525 19.6266 17.2563V11C19.6609 8.93751 18.1484 7.21876 16.1547 6.80626ZM8.55781 3.09376C9.31406 2.40626 10.3109 2.06251 11.3422 2.16563C13.1641 2.33751 14.6078 3.98751 14.6078 5.91251V6.70313H7.38906V5.67188C7.38906 4.70938 7.80156 3.78126 8.55781 3.09376ZM18.1141 17.2906C18.1141 18.7 16.9453 19.8688 15.5359 19.8688H6.46094C5.05156 19.8688 3.91719 18.7344 3.91719 17.325V11.0688C3.91719 9.52189 5.15469 8.28438 6.70156 8.28438H15.2953C16.8422 8.28438 18.1141 9.52188 18.1141 11V17.2906Z",fill:""}),pe("path",{d:"M10.9977 11.8594C10.5852 11.8594 10.207 12.2031 10.207 12.65V16.2594C10.207 16.6719 10.5508 17.05 10.9977 17.05C11.4102 17.05 11.7883 16.7063 11.7883 16.2594V12.6156C11.7883 12.2031 11.4102 11.8594 10.9977 11.8594Z",fill:""})]})})})]})]}),rt("div",{className:"mb-6",children:[pe("label",{className:"mb-2.5 block font-medium text-black dark:text-white",children:"Re-type Password"}),rt("div",{className:"relative",children:[pe("input",{id:"repasswordClient",type:"password",maxLength:8,name:"repassword",placeholder:"Re-enter your password",className:"w-full rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"}),pe("span",{className:"absolute right-4 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.5",children:[pe("path",{d:"M16.1547 6.80626V5.91251C16.1547 3.16251 14.0922 0.825009 11.4797 0.618759C10.0359 0.481259 8.59219 0.996884 7.52656 1.95938C6.46094 2.92188 5.84219 4.29688 5.84219 5.70626V6.80626C3.84844 7.18438 2.33594 8.93751 2.33594 11.0688V17.2906C2.33594 19.5594 4.19219 21.3813 6.42656 21.3813H15.5016C17.7703 21.3813 19.6266 19.525 19.6266 17.2563V11C19.6609 8.93751 18.1484 7.21876 16.1547 6.80626ZM8.55781 3.09376C9.31406 2.40626 10.3109 2.06251 11.3422 2.16563C13.1641 2.33751 14.6078 3.98751 14.6078 5.91251V6.70313H7.38906V5.67188C7.38906 4.70938 7.80156 3.78126 8.55781 3.09376ZM18.1141 17.2906C18.1141 18.7 16.9453 19.8688 15.5359 19.8688H6.46094C5.05156 19.8688 3.91719 18.7344 3.91719 17.325V11.0688C3.91719 9.52189 5.15469 8.28438 6.70156 8.28438H15.2953C16.8422 8.28438 18.1141 9.52188 18.1141 11V17.2906Z",fill:""}),pe("path",{d:"M10.9977 11.8594C10.5852 11.8594 10.207 12.2031 10.207 12.65V16.2594C10.207 16.6719 10.5508 17.05 10.9977 17.05C11.4102 17.05 11.7883 16.7063 11.7883 16.2594V12.6156C11.7883 12.2031 11.4102 11.8594 10.9977 11.8594Z",fill:""})]})})})]})]}),pe("div",{className:"mb-5",children:pe("input",{id:"buttonSubmit",type:"submit",value:"Create account",className:"w-full cursor-pointer rounded-lg border border-primary bg-primary p-4 text-white transition hover:bg-opacity-90",onClick:o})}),pe("div",{className:"mt-6 text-center",children:rt("p",{children:["Already have an account?"," ",pe(ey,{to:"/auth/signin",className:"text-primary",children:"Sign in"})]})})]})]})})]})})})]})},_K=()=>rt("main",{children:[pe("a",{href:"https://www.isep.ipp.pt/",className:"inline-block",target:"_blank",children:pe("img",{className:"text-primary pl-[36px] pt-[18px] ",src:EI,alt:"Logo"})}),pe("div",{className:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10 ",children:pe("div",{className:"rounded-md drop-shadow-md overflow-hidden border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:rt("div",{className:"flex flex-wrap items-center",children:[pe("div",{className:"bg-cover xl:bg-isep-background bg-isep-background-horizontal  xl:h-[880px] h-[150px] w-[100%]  xl:block xl:w-1/2"}),pe("div",{className:"w-full  border-stroke dark:border-strokedark xl:w-1/2 xl:border-l-2",children:rt("div",{className:"w-full p-4 sm:p-12.5 xl:p-17.5",children:[pe("h2",{className:"mb-1.5 text-2xl font-bold text-black dark:text-white sm:text-title-xl2",children:"Reset password"}),pe("span",{className:"mb-1.5 block font-medium",children:"In a few steps you will have access to your account again."}),rt("span",{className:"mb-9 block font-medium",children:["Enter your ",pe("b",{children:"new password"})," and confirm to proceed with the reset."]}),rt("form",{children:[rt("div",{className:"mb-4",children:[pe("label",{className:"mb-2.5 block font-medium text-black dark:text-white",children:"New password"}),rt("div",{className:"relative",children:[pe("input",{type:"email",placeholder:"Enter your new password",className:"w-full rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"}),pe("span",{className:"absolute right-4 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.5",children:[pe("path",{d:"M16.1547 6.80626V5.91251C16.1547 3.16251 14.0922 0.825009 11.4797 0.618759C10.0359 0.481259 8.59219 0.996884 7.52656 1.95938C6.46094 2.92188 5.84219 4.29688 5.84219 5.70626V6.80626C3.84844 7.18438 2.33594 8.93751 2.33594 11.0688V17.2906C2.33594 19.5594 4.19219 21.3813 6.42656 21.3813H15.5016C17.7703 21.3813 19.6266 19.525 19.6266 17.2563V11C19.6609 8.93751 18.1484 7.21876 16.1547 6.80626ZM8.55781 3.09376C9.31406 2.40626 10.3109 2.06251 11.3422 2.16563C13.1641 2.33751 14.6078 3.98751 14.6078 5.91251V6.70313H7.38906V5.67188C7.38906 4.70938 7.80156 3.78126 8.55781 3.09376ZM18.1141 17.2906C18.1141 18.7 16.9453 19.8688 15.5359 19.8688H6.46094C5.05156 19.8688 3.91719 18.7344 3.91719 17.325V11.0688C3.91719 9.52189 5.15469 8.28438 6.70156 8.28438H15.2953C16.8422 8.28438 18.1141 9.52188 18.1141 11V17.2906Z",fill:""}),pe("path",{d:"M10.9977 11.8594C10.5852 11.8594 10.207 12.2031 10.207 12.65V16.2594C10.207 16.6719 10.5508 17.05 10.9977 17.05C11.4102 17.05 11.7883 16.7063 11.7883 16.2594V12.6156C11.7883 12.2031 11.4102 11.8594 10.9977 11.8594Z",fill:""})]})})})]})]}),rt("div",{className:"mb-6",children:[pe("label",{className:"mb-2.5 block font-medium text-black dark:text-white",children:"Confirm Password"}),rt("div",{className:"relative",children:[pe("input",{type:"password",placeholder:"Confirm your new password",className:"w-full rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"}),pe("span",{className:"absolute right-4 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:rt("g",{opacity:"0.5",children:[pe("path",{d:"M16.1547 6.80626V5.91251C16.1547 3.16251 14.0922 0.825009 11.4797 0.618759C10.0359 0.481259 8.59219 0.996884 7.52656 1.95938C6.46094 2.92188 5.84219 4.29688 5.84219 5.70626V6.80626C3.84844 7.18438 2.33594 8.93751 2.33594 11.0688V17.2906C2.33594 19.5594 4.19219 21.3813 6.42656 21.3813H15.5016C17.7703 21.3813 19.6266 19.525 19.6266 17.2563V11C19.6609 8.93751 18.1484 7.21876 16.1547 6.80626ZM8.55781 3.09376C9.31406 2.40626 10.3109 2.06251 11.3422 2.16563C13.1641 2.33751 14.6078 3.98751 14.6078 5.91251V6.70313H7.38906V5.67188C7.38906 4.70938 7.80156 3.78126 8.55781 3.09376ZM18.1141 17.2906C18.1141 18.7 16.9453 19.8688 15.5359 19.8688H6.46094C5.05156 19.8688 3.91719 18.7344 3.91719 17.325V11.0688C3.91719 9.52189 5.15469 8.28438 6.70156 8.28438H15.2953C16.8422 8.28438 18.1141 9.52188 18.1141 11V17.2906Z",fill:""}),pe("path",{d:"M10.9977 11.8594C10.5852 11.8594 10.207 12.2031 10.207 12.65V16.2594C10.207 16.6719 10.5508 17.05 10.9977 17.05C11.4102 17.05 11.7883 16.7063 11.7883 16.2594V12.6156C11.7883 12.2031 11.4102 11.8594 10.9977 11.8594Z",fill:""})]})})})]})]}),pe(ey,{className:"mb-5",to:"/auth/signin",children:pe("input",{type:"submit",value:"Save changes",className:"w-full cursor-pointer rounded-lg border border-primary bg-primary p-4 text-white transition hover:bg-opacity-90"})})]})]})})]})})})]}),xK=()=>rt("main",{children:[pe("a",{href:"https://www.isep.ipp.pt/",className:"inline-block",target:"_blank",children:pe("img",{className:"text-primary pl-[36px] pt-[18px] ",src:EI,alt:"Logo"})}),pe("div",{className:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10 ",children:pe("div",{className:"rounded-md drop-shadow-md overflow-hidden border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:rt("div",{className:"flex flex-wrap items-center",children:[pe("div",{className:"bg-cover xl:bg-isep-background bg-isep-background-horizontal  xl:h-[880px] h-[150px] w-[100%]  xl:block xl:w-1/2"}),pe("div",{className:"w-full  border-stroke dark:border-strokedark xl:w-1/2 xl:border-l-2",children:rt("div",{className:"w-full p-4 sm:p-12.5 xl:p-17.5",children:[pe("h2",{className:"mb-1.5 text-2xl font-bold text-black dark:text-white sm:text-title-xl2",children:"Reset password"}),pe("span",{className:"mb-1.5 block font-medium",children:"In a few steps you will have access to your account again."}),rt("span",{className:"mb-9 block font-medium",children:["A ",pe("b",{children:"reset"})," link will be sent to your email, please ",pe("b",{children:"enter your email address below:"})]}),rt("form",{children:[rt("div",{className:"mb-6",children:[pe("label",{className:"mb-2.5 block font-medium text-black dark:text-white",children:"Email"}),rt("div",{className:"relative",children:[pe("input",{type:"email",placeholder:"Enter your email",className:"w-full rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"}),pe("span",{className:"absolute right-4 top-4",children:pe("svg",{className:"fill-current",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pe("g",{opacity:"0.5",children:pe("path",{d:"M19.2516 3.30005H2.75156C1.58281 3.30005 0.585938 4.26255 0.585938 5.46567V16.6032C0.585938 17.7719 1.54844 18.7688 2.75156 18.7688H19.2516C20.4203 18.7688 21.4172 17.8063 21.4172 16.6032V5.4313C21.4172 4.26255 20.4203 3.30005 19.2516 3.30005ZM19.2516 4.84692C19.2859 4.84692 19.3203 4.84692 19.3547 4.84692L11.0016 10.2094L2.64844 4.84692C2.68281 4.84692 2.71719 4.84692 2.75156 4.84692H19.2516ZM19.2516 17.1532H2.75156C2.40781 17.1532 2.13281 16.8782 2.13281 16.5344V6.35942L10.1766 11.5157C10.4172 11.6875 10.6922 11.7563 10.9672 11.7563C11.2422 11.7563 11.5172 11.6875 11.7578 11.5157L19.8016 6.35942V16.5688C19.8703 16.9125 19.5953 17.1532 19.2516 17.1532Z",fill:""})})})})]})]}),pe("div",{className:"mb-5",children:pe("input",{type:"submit",value:"Reset Password",className:"w-full cursor-pointer rounded-lg border border-primary bg-primary p-4 text-white transition hover:bg-opacity-90"})})]})]})})]})})})]}),wK=()=>{const[o,c]=Re.useState(!0),d=document.getElementById("preloader");return d&&setTimeout(()=>{d.style.display="none",c(!1)},2e3),Re.useEffect(()=>{setTimeout(()=>c(!1),1e3)},[]),!o&&pe(c7,{children:rt(lq,{children:[pe(Gg,{path:"/",element:pe(eH,{})}),pe(Gg,{path:"/user-management",element:pe(pK,{})}),pe(Gg,{path:"/beacon-management",element:pe(dK,{})}),pe(Gg,{path:"/user-experience",element:pe(mK,{})}),pe(Gg,{path:"/settings",element:pe(gK,{})}),pe(Gg,{path:"/auth/password-reset",element:pe(_K,{})}),pe(Gg,{path:"/auth/password-reset-email",element:pe(xK,{})}),pe(Gg,{path:"/auth/signin",element:pe(yK,{})}),pe(Gg,{path:"/auth/signup",element:pe(vK,{})})]})})};K8.createRoot(document.getElementById("root")).render(pe(oi.StrictMode,{children:pe(dq,{children:pe(wK,{})})}));
